import{S as Z,i as Q,s as Y,e as S,b as A,k as se,c as d,n as J,d as h,Y as at,a as L,aX as Rn,m as $,an as ft,Z as ut,_ as ct,$ as $t,t as m,p as g,y as he,C as be,q as we,z as Ke,j as w,x as y,o as v,B as G,u as k,V as ve,v as W,W as hn,X as it,g as E,h as B,r as U,ap as Bt,aY as Dn,aZ as Nr,aI as cn,a8 as te,f as Fe,aS as sn,aL as Vt,a4 as Ae,a_ as ce,a9 as ne,aa as re,R as bn,ax as Zt,am as Ze,ao as gr,a$ as Kt,b0 as Dt,w as dr,b1 as Pr,aN as Rr,aw as $n,b2 as Dr,M as Fr,P as Ar,Q as Gr,T as qr,b3 as hr,F as zr,E as Hr,aW as Er,aR as pn,D as Br}from"./files-23a328ff.js";import{c as q,d as Qe,t as Ur,a as Je,C as Ge,e as me,S as Ft,p as Fn,f as An,h as Yt,g as Wr,H as Yr,m as Gn}from"./colors-633f29c5.js";import{e as qn,h as tt,M as Jr,b as br,H as Vr,R as Zr,f as Xe,C as At,d as Qr,c as zn,a as Hn,i as en,W as wr,B as Kr,S as Xr,G as xr}from"./WarningIcon-be27fd3a.js";import{g as wn,u as vr,r as kr,b as yr,c as Sr,e as eo,G as Gt,a as _e,d as to,E as le,h as ee,F as Re,f as no,i as lo,j as ro,D as oo,A as so,L as io,M as ao}from"./MapLibreMap-773d4c3b.js";import{P as ae,A as Tr}from"./Popup-10e296fa.js";function fo(o){let e;return{c(){e=S("span"),A(e,"class","svelte-kzgqtg"),se(e,"background",o[0])},m(l,t){d(l,e,t)},p(l,[t]){t&1&&se(e,"background",l[0])},i:J,o:J,d(l){l&&h(e)}}}function uo(o,e,l){let{color:t}=e;return o.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class Se extends Z{constructor(e){super(),Q(this,e,uo,fo,Y,{color:0})}}const co=o=>({}),En=o=>({}),$o=o=>({}),Bn=o=>({});function po(o){let e,l,t,n,r,s,f,i,a,u,c;const p=o[4].sidebar,_=at(p,o,o[3],Bn),b=o[4].main,C=at(b,o,o[3],En);return{c(){e=S("div"),l=S("aside"),t=S("div"),_&&_.c(),n=L(),r=S("button"),r.textContent="→",f=L(),i=S("main"),C&&C.c(),A(t,"class","sidebar-content content-container svelte-1n0etgd"),A(r,"type","button"),A(r,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),A(l,"class",s=Rn(o[1]?"":"collapsed")+" svelte-1n0etgd"),se(l,"--sidebarWidth",o[0]),A(i,"class","svelte-1n0etgd"),A(e,"class","overall-layout svelte-1n0etgd")},m(T,M){d(T,e,M),$(e,l),$(l,t),_&&_.m(t,null),$(l,n),$(l,r),$(e,f),$(e,i),C&&C.m(i,null),a=!0,u||(c=ft(r,"click",o[2]),u=!0)},p(T,[M]){_&&_.p&&(!a||M&8)&&ut(_,p,T,T[3],a?$t(p,T[3],M,$o):ct(T[3]),Bn),(!a||M&2&&s!==(s=Rn(T[1]?"":"collapsed")+" svelte-1n0etgd"))&&A(l,"class",s),(!a||M&1)&&se(l,"--sidebarWidth",T[0]),C&&C.p&&(!a||M&8)&&ut(C,b,T,T[3],a?$t(b,T[3],M,co):ct(T[3]),En)},i(T){a||(m(_,T),m(C,T),a=!0)},o(T){g(_,T),g(C,T),a=!1},d(T){T&&h(e),_&&_.d(T),C&&C.d(T),u=!1,c()}}}function mo(o,e,l){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:r="25rem"}=e,s=!0;function f(){l(1,s=!s)}return o.$$set=i=>{"sidebarWidth"in i&&l(0,r=i.sidebarWidth),"$$scope"in i&&l(3,n=i.$$scope)},[r,s,f,n,t]}class _o extends Z{constructor(e){super(),Q(this,e,mo,po,Y,{sidebarWidth:0})}}function Un(o,e,l){const t=o.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function Wn(o){let e,l,t,n=o[1]+"",r,s,f;return l=new Se({props:{color:o[2]}}),{c(){e=S("li"),w(l.$$.fragment),t=L(),r=y(n),s=L()},m(i,a){d(i,e,a),v(l,e,null),$(e,t),$(e,r),$(e,s),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),l.$set(u),(!f||a&1)&&n!==(n=i[1]+"")&&G(r,n)},i(i){f||(m(l.$$.fragment,i),f=!0)},o(i){g(l.$$.fragment,i),f=!1},d(i){i&&h(e),k(l)}}}function go(o){let e,l,t=he(o[0]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Wn(Un(o,t,s));const r=s=>g(n[s],1,1,()=>{n[s]=null});return{c(){e=S("ul");for(let s=0;s<n.length;s+=1)n[s].c()},m(s,f){d(s,e,f);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);l=!0},p(s,[f]){if(f&1){t=he(s[0]);let i;for(i=0;i<t.length;i+=1){const a=Un(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Wn(a),n[i].c(),m(n[i],1),n[i].m(e,null))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(s){s&&h(e),Ke(n,s)}}}function ho(o,e,l){let{rows:t}=e;return o.$$set=n=>{"rows"in n&&l(0,t=n.rows)},[t]}class Xt extends Z{constructor(e){super(),Q(this,e,ho,go,Y,{rows:0})}}function Yn(o){let e=o[0],l,t,n=Jn(o);return{c(){n.c(),l=ve()},m(r,s){n.m(r,s),d(r,l,s),t=!0},p(r,s){s&1&&Y(e,e=r[0])?(be(),g(n,1,1,J),we(),n=Jn(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function Jn(o){let e;const l=o[16].default,t=at(l,o,o[15],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&32768)&&ut(t,l,n,n[15],e?$t(l,n[15],r,null):ct(n[15]),null)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function bo(o){let e,l,t=o[0]&&Yn(o);return{c(){t&&t.c(),e=ve()},m(n,r){t&&t.m(n,r),d(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&m(t,1)):(t=Yn(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(be(),g(t,1,1,()=>{t=null}),we())},i(n){l||(m(t),l=!0)},o(n){g(t),l=!1},d(n){n&&h(e),t&&t.d(n)}}}function wo(o,e,l){let t,n,{$$slots:r={},$$scope:s}=e,{id:f=wn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e,{bounds:u=null}=e,{scheme:c=null}=e,{attribution:p=null}=e,{minzoom:_=null}=e,{maxzoom:b=null}=e,{volatile:C=null}=e;const{map:T,self:M}=vr();W(o,T,N=>l(14,n=N)),W(o,M,N=>l(0,t=N));let j,P=!0;return hn(()=>{t&&j&&n&&(kr(T,t,j),it(M,t=null,t),l(12,j=void 0))}),o.$$set=N=>{"id"in N&&l(3,f=N.id),"tiles"in N&&l(4,i=N.tiles),"tileSize"in N&&l(5,a=N.tileSize),"bounds"in N&&l(6,u=N.bounds),"scheme"in N&&l(7,c=N.scheme),"attribution"in N&&l(8,p=N.attribution),"minzoom"in N&&l(9,_=N.minzoom),"maxzoom"in N&&l(10,b=N.maxzoom),"volatile"in N&&l(11,C=N.volatile),"$$scope"in N&&l(15,s=N.$$scope)},o.$$.update=()=>{o.$$.dirty&24569&&n&&t!==f&&(it(M,t=f,t),yr(n,t,Sr({type:"raster",tiles:i,tileSize:a,bounds:u,scheme:c,attribution:p,minzoom:_,maxzoom:b,volatile:C}),N=>n&&N===t,()=>{t&&(l(12,j=n==null?void 0:n.getSource(t)),l(13,P=!0))})),o.$$.dirty&16392&&(n==null||n.on("style.load",()=>{l(12,j=n==null?void 0:n.getSource(f))})),o.$$.dirty&12304&&j&&(P?l(13,P=!1):j.setTiles(i))},[t,T,M,f,i,a,u,c,p,_,b,C,j,P,n,s,r]}class vo extends Z{constructor(e){super(),Q(this,e,wo,bo,Y,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function ko(o){let e;const l=o[16].default,t=at(l,o,o[24],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16777216)&&ut(t,l,n,n[24],e?$t(l,n[24],r,null):ct(n[24]),null)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function yo(o){let e,l,t;function n(s){o[17](s)}let r={id:o[1],type:"symbol",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],applyToClusters:o[9],minzoom:o[10],maxzoom:o[11],hoverCursor:o[12],manageHoverState:o[13],eventsIfTopMost:o[14],interactive:o[15],$$slots:{default:[ko]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.hovered=o[0]),e=new eo({props:r}),E.push(()=>B(e,"hovered",n)),e.$on("click",o[18]),e.$on("dblclick",o[19]),e.$on("contextmenu",o[20]),e.$on("mouseenter",o[21]),e.$on("mousemove",o[22]),e.$on("mouseleave",o[23]),{c(){w(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,[f]){const i={};f&2&&(i.id=s[1]),f&4&&(i.source=s[2]),f&8&&(i.sourceLayer=s[3]),f&16&&(i.beforeId=s[4]),f&32&&(i.beforeLayerType=s[5]),f&64&&(i.paint=s[6]),f&128&&(i.layout=s[7]),f&256&&(i.filter=s[8]),f&512&&(i.applyToClusters=s[9]),f&1024&&(i.minzoom=s[10]),f&2048&&(i.maxzoom=s[11]),f&4096&&(i.hoverCursor=s[12]),f&8192&&(i.manageHoverState=s[13]),f&16384&&(i.eventsIfTopMost=s[14]),f&32768&&(i.interactive=s[15]),f&16777216&&(i.$$scope={dirty:f,ctx:s}),!l&&f&1&&(l=!0,i.hovered=s[0],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function So(o,e,l){let{$$slots:t={},$$scope:n}=e,{id:r=wn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{applyToClusters:_=void 0}=e,{minzoom:b=void 0}=e,{maxzoom:C=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:M=!1}=e,{hovered:j=null}=e,{eventsIfTopMost:P=!1}=e,{interactive:N=!0}=e;function O(F){j=F,l(0,j)}function I(F){Bt.call(this,o,F)}function D(F){Bt.call(this,o,F)}function R(F){Bt.call(this,o,F)}function z(F){Bt.call(this,o,F)}function V(F){Bt.call(this,o,F)}function ie(F){Bt.call(this,o,F)}return o.$$set=F=>{"id"in F&&l(1,r=F.id),"source"in F&&l(2,s=F.source),"sourceLayer"in F&&l(3,f=F.sourceLayer),"beforeId"in F&&l(4,i=F.beforeId),"beforeLayerType"in F&&l(5,a=F.beforeLayerType),"paint"in F&&l(6,u=F.paint),"layout"in F&&l(7,c=F.layout),"filter"in F&&l(8,p=F.filter),"applyToClusters"in F&&l(9,_=F.applyToClusters),"minzoom"in F&&l(10,b=F.minzoom),"maxzoom"in F&&l(11,C=F.maxzoom),"hoverCursor"in F&&l(12,T=F.hoverCursor),"manageHoverState"in F&&l(13,M=F.manageHoverState),"hovered"in F&&l(0,j=F.hovered),"eventsIfTopMost"in F&&l(14,P=F.eventsIfTopMost),"interactive"in F&&l(15,N=F.interactive),"$$scope"in F&&l(24,n=F.$$scope)},[j,r,s,f,i,a,u,c,p,_,b,C,T,M,P,N,t,O,I,D,R,z,V,ie,n]}class vn extends Z{constructor(e){super(),Q(this,e,So,yo,Y,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Vn(o){let e=o[0],l,t,n=Zn(o);return{c(){n.c(),l=ve()},m(r,s){n.m(r,s),d(r,l,s),t=!0},p(r,s){s&1&&Y(e,e=r[0])?(be(),g(n,1,1,J),we(),n=Zn(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function Zn(o){let e;const l=o[15].default,t=at(l,o,o[14],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16384)&&ut(t,l,n,n[14],e?$t(l,n[14],r,null):ct(n[14]),null)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function To(o){let e,l,t=o[0]&&Vn(o);return{c(){t&&t.c(),e=ve()},m(n,r){t&&t.m(n,r),d(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&m(t,1)):(t=Vn(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(be(),g(t,1,1,()=>{t=null}),we())},i(n){l||(m(t),l=!0)},o(n){g(t),l=!1},d(n){n&&h(e),t&&t.d(n)}}}function Co(o,e,l){let t,n,{$$slots:r={},$$scope:s}=e,{id:f=wn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e,{bounds:c=null}=e,{scheme:p=null}=e,{attribution:_=null}=e,{minzoom:b=null}=e,{maxzoom:C=null}=e,{volatile:T=null}=e;if(i&&i.includes("pmtiles://")&&!Dn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let N=new Nr;Dn.addProtocol("pmtiles",N.tile)}const{map:M,self:j}=vr();W(o,M,N=>l(13,n=N)),W(o,j,N=>l(0,t=N));let P;return hn(()=>{t&&n&&(kr(M,t,P),it(j,t=null,t),P=void 0)}),o.$$set=N=>{"id"in N&&l(3,f=N.id),"url"in N&&l(4,i=N.url),"tiles"in N&&l(5,a=N.tiles),"promoteId"in N&&l(6,u=N.promoteId),"bounds"in N&&l(7,c=N.bounds),"scheme"in N&&l(8,p=N.scheme),"attribution"in N&&l(9,_=N.attribution),"minzoom"in N&&l(10,b=N.minzoom),"maxzoom"in N&&l(11,C=N.maxzoom),"volatile"in N&&l(12,T=N.volatile),"$$scope"in N&&l(14,s=N.$$scope)},o.$$.update=()=>{o.$$.dirty&16377&&n&&t!==f&&(it(j,t=f,t),yr(n,t,Sr({type:"vector",url:i,tiles:a,promoteId:u,bounds:c,scheme:p,attribution:_,minzoom:b,maxzoom:C,volatile:T}),N=>n&&N===t,()=>{t&&(P=n==null?void 0:n.getSource(t))})),o.$$.dirty&8200&&(n==null||n.on("style.load",()=>{P=n==null?void 0:n.getSource(f)}))},[t,M,j,f,i,a,u,c,p,_,b,C,T,n,s,r]}class $e extends Z{constructor(e){super(),Q(this,e,Co,To,Y,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function Qn(o,e,l){const t=o.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function Lo(o){let e,l,t;return l=new Fe({props:{$$slots:{default:[Mo]},$$scope:{ctx:o}}}),l.$on("click",o[9]),{c(){e=S("div"),w(l.$$.fragment)},m(n,r){d(n,e,r),v(l,e,null),t=!0},p(n,r){const s={};r&16384&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Io(o){let e,l,t,n,r,s,f,i,a,u;l=new Fe({props:{$$slots:{default:[Oo]},$$scope:{ctx:o}}}),l.$on("click",o[4]);let c=o[2]&&Kn(o);r=new tt({props:{label:"Help",$$slots:{default:[jo]},$$scope:{ctx:o}}}),f=new to({}),f.$on("click",o[3]);let p=he(o[0]),_=[];for(let C=0;C<p.length;C+=1)_[C]=Xn(Qn(o,p,C));const b=C=>g(_[C],1,1,()=>{_[C]=null});return{c(){e=S("div"),w(l.$$.fragment),t=L(),c&&c.c(),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L();for(let C=0;C<_.length;C+=1)_[C].c();a=ve()},m(C,T){d(C,e,T),v(l,e,null),d(C,t,T),c&&c.m(C,T),d(C,n,T),v(r,C,T),d(C,s,T),v(f,C,T),d(C,i,T);for(let M=0;M<_.length;M+=1)_[M]&&_[M].m(C,T);d(C,a,T),u=!0},p(C,T){const M={};T&16384&&(M.$$scope={dirty:T,ctx:C}),l.$set(M),C[2]?c?c.p(C,T):(c=Kn(C),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const j={};if(T&16384&&(j.$$scope={dirty:T,ctx:C}),r.$set(j),T&65){p=he(C[0]);let P;for(P=0;P<p.length;P+=1){const N=Qn(C,p,P);_[P]?(_[P].p(N,T),m(_[P],1)):(_[P]=Xn(N),_[P].c(),m(_[P],1),_[P].m(a.parentNode,a))}for(be(),P=p.length;P<_.length;P+=1)b(P);we()}},i(C){if(!u){m(l.$$.fragment,C),m(r.$$.fragment,C),m(f.$$.fragment,C);for(let T=0;T<p.length;T+=1)m(_[T]);u=!0}},o(C){g(l.$$.fragment,C),g(r.$$.fragment,C),g(f.$$.fragment,C),_=_.filter(Boolean);for(let T=0;T<_.length;T+=1)g(_[T]);u=!1},d(C){C&&(h(e),h(t),h(n),h(s),h(i),h(a)),k(l),c&&c.d(C),k(r,C),k(f,C),Ke(_,C)}}}function Mo(o){let e;return{c(){e=y("Measure lines")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Oo(o){let e;return{c(){e=y("Stop measuring")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Kn(o){let e,l,t=o[2].toFixed(2)+"",n,r;return{c(){e=S("p"),l=y("Length: "),n=y(t),r=y(" meters")},m(s,f){d(s,e,f),$(e,l),$(e,n),$(e,r)},p(s,f){f&4&&t!==(t=s[2].toFixed(2)+"")&&G(n,t)},d(s){s&&h(e)}}}function jo(o){let e;return{c(){e=S("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){d(l,e,t)},p:J,d(l){l&&h(e)}}}function No(o){let e,l;return{c(){e=S("span"),l=L(),A(e,"class","dot svelte-1tzt432")},m(t,n){d(t,e,n),d(t,l,n)},p:J,d(t){t&&(h(e),h(l))}}}function Xn(o){let e,l,t;function n(f){o[7](f,o[11],o[12],o[13])}function r(){return o[8](o[13])}let s={draggable:!0,$$slots:{default:[No]},$$scope:{ctx:o}};return o[11]!==void 0&&(s.lngLat=o[11]),e=new Jr({props:s}),E.push(()=>B(e,"lngLat",n)),e.$on("click",r),{c(){w(e.$$.fragment)},m(f,i){v(e,f,i),t=!0},p(f,i){o=f;const a={};i&16384&&(a.$$scope={dirty:i,ctx:o}),!l&&i&1&&(l=!0,a.lngLat=o[11],U(()=>l=!1)),e.$set(a)},i(f){t||(m(e.$$.fragment,f),t=!0)},o(f){g(e.$$.fragment,f),t=!1},d(f){k(e,f)}}}function Po(o){let e,l;const t=[q("measurement-line"),{paint:{"line-color":Qe.measuringLine,"line-width":5}}];let n={};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f={};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Ro(o){let e,l,t,n,r,s,f;const i=[Io,Lo],a=[];function u(c,p){return c[1]?0:1}return e=u(o),l=a[e]=i[e](o),n=new Gt({props:{data:o[0].length<2?qn():cn(o[0]),$$slots:{default:[Po]},$$scope:{ctx:o}}}),{c(){l.c(),t=L(),w(n.$$.fragment)},m(c,p){a[e].m(c,p),d(c,t,p),v(n,c,p),r=!0,s||(f=ft(window,"keydown",o[5]),s=!0)},p(c,[p]){let _=e;e=u(c),e===_?a[e].p(c,p):(be(),g(a[_],1,1,()=>{a[_]=null}),we(),l=a[e],l?l.p(c,p):(l=a[e]=i[e](c),l.c()),m(l,1),l.m(t.parentNode,t));const b={};p&1&&(b.data=c[0].length<2?qn():cn(c[0])),p&16384&&(b.$$scope={dirty:p,ctx:c}),n.$set(b)},i(c){r||(m(l),m(n.$$.fragment,c),r=!0)},o(c){g(l),g(n.$$.fragment,c),r=!1},d(c){c&&h(t),a[e].d(c),k(n,c),s=!1,f()}}}function Do(o,e,l){let t,n=!1,r=[];function s(b){return b.length<2?null:1e3*Ur(cn(b),{units:"kilometers"})}function f(b){l(0,r=[...r,b.detail.lngLat.toArray()])}function i(){l(1,n=!1),l(0,r=[])}function a(b){n&&b.key==="Escape"&&(b.stopPropagation(),i())}function u(b){r.splice(b,1),l(0,r)}function c(b,C,T,M){T[M]=b,l(0,r)}const p=b=>u(b),_=()=>l(1,n=!0);return o.$$.update=()=>{o.$$.dirty&1&&l(2,t=s(r))},[r,n,t,f,i,a,u,c,p,_]}class Fo extends Z{constructor(e){super(),Q(this,e,Do,Ro,Y,{})}}const Ao="/atip/ss_sb_integration/assets/zoom_out_map-b2e1091a.svg";function Go(o){let e,l;return{c(){e=S("img"),Vt(e.src,l=Ao)||A(e,"src",l),A(e,"alt","Zoom to show entire boundary")},m(t,n){d(t,e,n)},p:J,d(t){t&&h(e)}}}function qo(o){let e,l;return e=new Fe({props:{title:"Zoom to show entire boundary",$$slots:{default:[Go]},$$scope:{ctx:o}}}),e.$on("click",o[0]),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,[n]){const r={};n&8&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function zo(o,e,l){let t;W(o,sn,s=>l(2,t=s));let{boundaryGeojson:n}=e;function r(){let s=br(n);Number.isFinite(s[0])&&t.fitBounds(s,{padding:20,animate:!0,duration:500})}return o.$$set=s=>{"boundaryGeojson"in s&&l(1,n=s.boundaryGeojson)},[r,n]}class Ho extends Z{constructor(e){super(),Q(this,e,zo,qo,Y,{boundaryGeojson:1})}}const x={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},Pe=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Eo(o){let e;return{c(){e=y(`Open Government License
  `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Bo(o){let e,l,t,n,r;return t=new le({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Eo]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=y("License: "),w(t.$$.fragment),n=y(`. Contains OS data © Crown copyright and database right
  2023.`)},m(s,f){d(s,e,f),$(e,l),v(t,e,null),$(e,n),r=!0},p(s,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){r||(m(t.$$.fragment,s),r=!0)},o(s){g(t.$$.fragment,s),r=!1},d(s){s&&h(e),k(t)}}}class Te extends Z{constructor(e){super(),Q(this,e,null,Bo,Y,{})}}function xn(o,e,l){const t=o.slice();return t[2]=e[l],t}function el(o,e,l){const t=o.slice();return t[5]=e[l],t}function tl(o){let e,l;return{c(){e=S("span"),l=y(` 
    `),se(e,"background",o[5]),se(e,"width","100%"),se(e,"border","1px solid black")},m(t,n){d(t,e,n),$(e,l)},p(t,n){n&1&&se(e,"background",t[5])},d(t){t&&h(e)}}}function nl(o){let e,l=o[2]+"",t;return{c(){e=S("span"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&2&&l!==(l=n[2]+"")&&G(t,l)},d(n){n&&h(e)}}}function Uo(o){let e,l,t,n=he(o[0]),r=[];for(let i=0;i<n.length;i+=1)r[i]=tl(el(o,n,i));let s=he(o[1]),f=[];for(let i=0;i<s.length;i+=1)f[i]=nl(xn(o,s,i));return{c(){e=S("div");for(let i=0;i<r.length;i+=1)r[i].c();l=L(),t=S("div");for(let i=0;i<f.length;i+=1)f[i].c();se(e,"display","flex"),se(t,"display","flex"),se(t,"justify-content","space-between")},m(i,a){d(i,e,a);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);d(i,l,a),d(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){n=he(i[0]);let u;for(u=0;u<n.length;u+=1){const c=el(i,n,u);r[u]?r[u].p(c,a):(r[u]=tl(c),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}if(a&2){s=he(i[1]);let u;for(u=0;u<s.length;u+=1){const c=xn(i,s,u);f[u]?f[u].p(c,a):(f[u]=nl(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=s.length}},i:J,o:J,d(i){i&&(h(e),h(l),h(t)),Ke(r,i),Ke(f,i)}}}function Wo(o,e,l){let{colorScale:t}=e,{limits:n}=e;return o.$$set=r=>{"colorScale"in r&&l(0,t=r.colorScale),"limits"in r&&l(1,n=r.limits)},[t,n]}class qe extends Z{constructor(e){super(),Q(this,e,Wo,Uo,Y,{colorScale:0,limits:1})}}function pe(o){let e=new URLSearchParams(window.location.search).has(o),l=Ae(e);return l.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(o,"1"):n.searchParams.delete(o),window.history.replaceState(null,"",n.toString())}),l}function qt(o,e,l,t){let n=e,r=new URLSearchParams(window.location.search).get(o);if(r!=null)try{n=t(r)}catch(f){console.warn(`Parsing URL parameter ${o}=${r} failed, using default value: ${f}`)}let s=Ae(n);return s.subscribe(f=>{let i=new URL(window.location.href),a=l(f);a==null?i.searchParams.delete(o):i.searchParams.set(o,a),window.history.replaceState(null,"",i.toString())}),s}let mn=Ae(new Map),Jt=Ae(new Set);const Yo=o=>({}),ll=o=>({}),Jo=o=>({}),rl=o=>({}),Vo=o=>({}),ol=o=>({});function Zo(o){let e;return{c(){e=y(o[2])},m(l,t){d(l,e,t)},p(l,t){t&4&&G(e,l[2])},d(l){l&&h(e)}}}function Qo(o){let e,l,t;const n=o[7].icon,r=at(n,o,o[10],ol);return{c(){r&&r.c(),e=L(),l=y(o[2])},m(s,f){r&&r.m(s,f),d(s,e,f),d(s,l,f),t=!0},p(s,f){r&&r.p&&(!t||f&1024)&&ut(r,n,s,s[10],t?$t(n,s[10],f,Vo):ct(s[10]),ol),(!t||f&4)&&G(l,s[2])},i(s){t||(m(r,s),t=!0)},o(s){g(r,s),t=!1},d(s){s&&(h(e),h(l)),r&&r.d(s)}}}function Ko(o){let e;const l=o[7].help,t=at(l,o,o[10],rl);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&ut(t,l,n,n[10],e?$t(l,n[10],r,Jo):ct(n[10]),rl)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Xo(o){let e;return{c(){e=y("X")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function xo(o){let e,l,t,n,r,s,f,i,a;function u(p){o[8](p)}let c={$$slots:{default:[Qo]},$$scope:{ctx:o}};return o[0]!==void 0&&(c.checked=o[0]),l=new Je({props:c}),E.push(()=>B(l,"checked",u)),s=new Vr({props:{$$slots:{default:[Ko]},$$scope:{ctx:o}}}),i=new Fe({props:{$$slots:{default:[Xo]},$$scope:{ctx:o}}}),i.$on("click",o[6]),{c(){e=S("div"),w(l.$$.fragment),n=L(),r=S("span"),w(s.$$.fragment),f=L(),w(i.$$.fragment),se(e,"display","flex"),se(e,"justify-content","space-between")},m(p,_){d(p,e,_),v(l,e,null),$(e,n),$(e,r),v(s,r,null),$(r,f),v(i,r,null),a=!0},p(p,_){const b={};_&1028&&(b.$$scope={dirty:_,ctx:p}),!t&&_&1&&(t=!0,b.checked=p[0],U(()=>t=!1)),l.$set(b);const C={};_&1024&&(C.$$scope={dirty:_,ctx:p}),s.$set(C);const T={};_&1024&&(T.$$scope={dirty:_,ctx:p}),i.$set(T)},i(p){a||(m(l.$$.fragment,p),m(s.$$.fragment,p),m(i.$$.fragment,p),a=!0)},o(p){g(l.$$.fragment,p),g(s.$$.fragment,p),g(i.$$.fragment,p),a=!1},d(p){p&&h(e),k(l),k(s),k(i)}}}function sl(o){let e;const l=o[7].controls,t=at(l,o,o[10],ll);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&ut(t,l,n,n[10],e?$t(l,n[10],r,Yo):ct(n[10]),ll)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function es(o){let e,l,t,n,r,s;e=new Je({props:{checked:o[4].has(o[1]),$$slots:{default:[Zo]},$$scope:{ctx:o}}}),e.$on("change",o[5]),n=new Ge({props:{small:!0,$$slots:{default:[xo]},$$scope:{ctx:o}}});let f=o[0]&&sl(o);return{c(){w(e.$$.fragment),l=L(),t=S("div"),w(n.$$.fragment),r=L(),f&&f.c()},m(i,a){v(e,i,a),d(i,l,a),d(i,t,a),v(n,t,null),$(t,r),f&&f.m(t,null),o[9](t),s=!0},p(i,[a]){const u={};a&18&&(u.checked=i[4].has(i[1])),a&1028&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&1029&&(c.$$scope={dirty:a,ctx:i}),n.$set(c),i[0]?f?(f.p(i,a),a&1&&m(f,1)):(f=sl(i),f.c(),m(f,1),f.m(t,null)):f&&(be(),g(f,1,1,()=>{f=null}),we())},i(i){s||(m(e.$$.fragment,i),m(n.$$.fragment,i),m(f),s=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),g(f),s=!1},d(i){i&&(h(l),h(t)),k(e,i),k(n),f&&f.d(),o[9](null)}}}function ts(o,e,l){let t;W(o,Jt,b=>l(4,t=b));let{$$slots:n={},$$scope:r}=e,{name:s}=e,{title:f}=e,{show:i}=e;i&&(t.add(s),Jt.set(t));let a=null;hn(()=>{mn.update(b=>(b.delete(s),b))});function u(){Jt.update(b=>(b.has(s)?(b.delete(s),l(0,i=!1)):(b.add(s),l(0,i=!0)),b))}function c(){t.delete(s),Jt.set(t),l(0,i=!1)}function p(b){i=b,l(0,i)}function _(b){E[b?"unshift":"push"](()=>{a=b,l(3,a),l(1,s)})}return o.$$set=b=>{"name"in b&&l(1,s=b.name),"title"in b&&l(2,f=b.title),"show"in b&&l(0,i=b.show),"$$scope"in b&&l(10,r=b.$$scope)},o.$$.update=()=>{o.$$.dirty&10&&a&&mn.update(b=>(l(3,a.style.display="none",a),b.set(s,a),b))},[i,s,f,a,t,u,c,n,p,_,r]}class ue extends Z{constructor(e){super(),Q(this,e,ts,es,Y,{name:1,title:2,show:0})}}function il(o){const e=o[7].OA21CD;o[8]=e;const l=o[7][o[0].kind];o[9]=l}function ns(o){let e,l,t,n,r,s,f;return t=new le({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[os]},$$scope:{ctx:o}}}),r=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ss]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=y("Population density data is from the 2021 census, via "),w(t.$$.fragment),n=y(". Output area boundaries from "),w(r.$$.fragment),s=y(".")},m(i,a){d(i,e,a),$(e,l),v(t,e,null),$(e,n),v(r,e,null),$(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(r.$$.fragment,i),f=!1},d(i){i&&h(e),k(t),k(r)}}}function ls(o){let e,l,t,n,r,s,f,i,a;return r=new le({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[is]},$$scope:{ctx:o}}}),f=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[as]},$$scope:{ctx:o}}}),{c(){e=S("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,l=L(),t=S("p"),n=y("Car/van availability data is from the 2021 census, via "),w(r.$$.fragment),s=y(". Output area boundaries from "),w(f.$$.fragment),i=y(".")},m(u,c){d(u,e,c),d(u,l,c),d(u,t,c),$(t,n),v(r,t,null),$(t,s),v(f,t,null),$(t,i),a=!0},i(u){a||(m(r.$$.fragment,u),m(f.$$.fragment,u),a=!0)},o(u){g(r.$$.fragment,u),g(f.$$.fragment,u),a=!1},d(u){u&&(h(e),h(l),h(t)),k(r),k(f)}}}function rs(o){let e,l,t,n,r,s,f;return t=new le({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[fs]},$$scope:{ctx:o}}}),r=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[us]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=y("Car/van availability data is from the 2021 census, via "),w(t.$$.fragment),n=y(". Output area boundaries from "),w(r.$$.fragment),s=y(".")},m(i,a){d(i,e,a),$(e,l),v(t,e,null),$(e,n),v(r,e,null),$(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(r.$$.fragment,i),f=!1},d(i){i&&h(e),k(t),k(r)}}}function os(o){let e;return{c(){e=y(`NOMIS TS006
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ss(o){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function is(o){let e;return{c(){e=y(`NOMIS TS045
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function as(o){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function fs(o){let e;return{c(){e=y(`NOMIS TS045
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function us(o){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function cs(o){let e,l,t,n,r,s;const f=[rs,ls,ns],i=[];function a(u,c){return u[0].kind=="percent_households_with_car"?0:u[0].kind=="average_cars_per_household"?1:2}return l=a(o),t=i[l]=f[l](o),r=new Te({}),{c(){e=S("span"),t.c(),n=L(),w(r.$$.fragment),A(e,"slot","help")},m(u,c){d(u,e,c),i[l].m(e,null),$(e,n),v(r,e,null),s=!0},p(u,c){let p=l;l=a(u),l!==p&&(be(),g(i[p],1,1,()=>{i[p]=null}),we(),t=i[l],t||(t=i[l]=f[l](u),t.c()),m(t,1),t.m(e,n))},i(u){s||(m(t),m(r.$$.fragment,u),s=!0)},o(u){g(t),g(r.$$.fragment,u),s=!1},d(u){u&&h(e),i[l].d(),k(r)}}}function $s(o){let e,l,t,n;return t=new qe({props:{colorScale:o[1],limits:pt(o[0].kind).map(al)}}),{c(){e=S("p"),e.textContent="(people per square kilometres)",l=L(),w(t.$$.fragment)},m(r,s){d(r,e,s),d(r,l,s),v(t,r,s),n=!0},p(r,s){const f={};s&1&&(f.limits=pt(r[0].kind).map(al)),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){g(t.$$.fragment,r),n=!1},d(r){r&&(h(e),h(l)),k(t,r)}}}function ps(o){let e,l;return e=new qe({props:{colorScale:o[1],limits:pt(o[0].kind)}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=pt(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ms(o){let e,l;return e=new qe({props:{colorScale:o[1],limits:pt(o[0].kind)}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=pt(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function _s(o){let e,l,t,n,r,s,f;function i(_){o[4](_)}let a={label:"Dataset",choices:[["percent_households_with_car","Percent of households with a car"],["average_cars_per_household","Average cars per household"],["population_density","Population density"]],inlineSmall:!0};o[0].kind!==void 0&&(a.value=o[0].kind),l=new bn({props:a}),E.push(()=>B(l,"value",i));const u=[ms,ps,$s],c=[];function p(_,b){return _[0].kind=="percent_households_with_car"?0:_[0].kind=="average_cars_per_household"?1:_[0].kind=="population_density"?2:-1}return~(r=p(o))&&(s=c[r]=u[r](o)),{c(){e=S("div"),w(l.$$.fragment),n=L(),s&&s.c(),A(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(_,b){d(_,e,b),v(l,e,null),$(e,n),~r&&c[r].m(e,null),f=!0},p(_,b){const C={};!t&&b&1&&(t=!0,C.value=_[0].kind,U(()=>t=!1)),l.$set(C);let T=r;r=p(_),r===T?~r&&c[r].p(_,b):(s&&(be(),g(c[T],1,1,()=>{c[T]=null}),we()),~r?(s=c[r],s?s.p(_,b):(s=c[r]=u[r](_),s.c()),m(s,1),s.m(e,null)):s=null)},i(_){f||(m(l.$$.fragment,_),m(s),f=!0)},o(_){g(l.$$.fragment,_),g(s),f=!1},d(_){_&&h(e),k(l),~r&&c[r].d()}}}function gs(o){let e,l,t,n=o[9].toLocaleString()+"",r,s,f=o[8]+"",i;return{c(){e=S("p"),l=y("There are "),t=S("b"),r=y(n),s=y(`
          people per square kilometre in `),i=y(f)},m(a,u){d(a,e,u),$(e,l),$(e,t),$(t,r),$(e,s),$(e,i)},p(a,u){u&129&&n!==(n=a[9].toLocaleString()+"")&&G(r,n),u&128&&f!==(f=a[8]+"")&&G(i,f)},d(a){a&&h(e)}}}function ds(o){let e,l,t=o[8]+"",n,r,s,f=o[9]+"",i,a;return{c(){e=S("p"),l=y("Households in "),n=y(t),r=y(` have an average of
          `),s=S("b"),i=y(f),a=y(`
          cars`)},m(u,c){d(u,e,c),$(e,l),$(e,n),$(e,r),$(e,s),$(s,i),$(e,a)},p(u,c){c&128&&t!==(t=u[8]+"")&&G(n,t),c&129&&f!==(f=u[9]+"")&&G(i,f)},d(u){u&&h(e)}}}function hs(o){let e,l,t=o[9]+"",n,r,s,f=o[8]+"",i,a;return{c(){e=S("p"),l=S("b"),n=y(t),r=y("%"),s=y(`
          of households in `),i=y(f),a=y(" have 1 or more cars")},m(u,c){d(u,e,c),$(e,l),$(l,n),$(l,r),$(e,s),$(e,i),$(e,a)},p(u,c){c&129&&t!==(t=u[9]+"")&&G(n,t),c&128&&f!==(f=u[8]+"")&&G(i,f)},d(u){u&&h(e)}}}function bs(o){il(o);let e;function l(r,s){return r[0].kind=="percent_households_with_car"?hs:r[0].kind=="average_cars_per_household"?ds:gs}let t=l(o),n=t(o);return{c(){n.c(),e=ve()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){il(r),t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function ws(o){let e,l;return e=new ae({props:{$$slots:{default:[bs,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&1153&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function vs(o){let e,l,t,n;const r=[q(He),{sourceLayer:He},{paint:{"fill-color":me(["get",o[0].kind],pt(o[0].kind),o[1]),"fill-opacity":ee(.5,.7)}},{layout:{visibility:o[0].show?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ws]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new Re({props:s}),e.$on("click",o[3]);const f=[q(`${He}-outline`),{sourceLayer:He},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0].show?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&re(q(He)),u&0&&{sourceLayer:He},u&3&&{paint:{"fill-color":me(["get",a[0].kind],pt(a[0].kind),a[1]),"fill-opacity":ee(.5,.7)}},u&1&&{layout:{visibility:a[0].show?"visible":"none"}},r[4],r[5],r[6]]):{};u&1025&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?ne(f,[u&0&&re(q(`${He}-outline`)),u&0&&{sourceLayer:He},f[2],u&1&&{layout:{visibility:a[0].show?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),k(e,a),k(t,a)}}}function ks(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:He,title:"2021 census",$$slots:{controls:[_s],help:[cs]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${He}.pmtiles`,$$slots:{default:[vs]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&1025&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&1025&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let He="census_output_areas";function ys(o){return o.show?o.kind:null}function Ss(o){return{show:!0,kind:o}}function pt(o){return o=="percent_households_with_car"?[0,20,40,60,80,100]:o=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const al=o=>o.toLocaleString();function Ts(o,e,l){let t,n=x.sequential_low_to_high,s=qt(He,{show:!1,kind:"percent_households_with_car"},ys,Ss);W(o,s,u=>l(0,t=u));function f(u){let c=u.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${c}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${c}`,"_blank")}function i(u){o.$$.not_equal(t.kind,u)&&(t.kind=u,s.set(t))}function a(u){o.$$.not_equal(t.show,u)&&(t.show=u,s.set(t))}return[t,n,s,f,i,a]}class Cs extends Z{constructor(e){super(),Q(this,e,Ts,ks,Y,{})}}function Ls(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Is(o){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ms(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/8369f71423ba474ebdbac60a539b53c8_0/explore",$$slots:{default:[Is]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),w(n.$$.fragment),r=y(", as of May 2024."),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function Os(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&h(e)}}}function js(o){let e,l;return e=new ae({props:{$$slots:{default:[Os,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ns(o){let e,l,t,n;const r=[q(_t),{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[js]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new Re({props:s}),e.$on("click",Ds);const f=[q(`${_t}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&re(q(_t)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?ne(f,[u&0&&re(q(`${_t}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),k(e,a),k(t,a)}}}function Ps(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:_t,title:Rs,$$slots:{help:[Ms],icon:[Ls]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new Gt({props:{data:`${ce()}/v1/${_t}.geojson`,$$slots:{default:[Ns]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let _t="combined_authorities",Rs="Combined authorities";function Ds(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.CAUTH24CD}`,"_blank")}function Fs(o,e,l){let t,n=x.combined_authorities,r=pe(_t);W(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class As extends Z{constructor(e){super(),Q(this,e,Fs,Ps,Y,{})}}function Gs(o){let e;return{c(){e=y(`DLUCH GIS
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function qs(o){let e;return{c(){e=y(`here
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function zs(o){let e,l,t,n,r,s,f,i,a,u;return n=new le({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Gs]},$$scope:{ctx:o}}}),s=new le({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[qs]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),t=y("The 2019 English IMD scores come from "),w(n.$$.fragment),r=y(`. Note the LSOAs identified are from the 2011 census. A
      detailed breakdown of the score across different categories can be found `),w(s.$$.fragment),f=y("."),i=L(),w(a.$$.fragment),A(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(l,t),v(n,l,null),$(l,r),v(s,l,null),$(l,f),$(e,i),v(a,e,null),u=!0},p(c,p){const _={};p&64&&(_.$$scope={dirty:p,ctx:c}),n.$set(_);const b={};p&64&&(b.$$scope={dirty:p,ctx:c}),s.$set(b)},i(c){u||(m(n.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(s.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),k(n),k(s),k(a)}}}function Hs(o){let e,l,t;return l=new qe({props:{colorScale:o[1],limits:["Least deprived","Most deprived"]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","controls")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Es(o){let e,l=o[5].LSOA11CD+"",t,n,r,s=o[5].score+"",f,i,a,u,c,p=o[5].rank.toLocaleString()+"",_,b;return{c(){e=S("p"),t=y(l),n=y(` has an IMD score of
        `),r=S("b"),f=y(s),i=L(),a=S("p"),u=y("Rank: "),c=S("b"),_=y(p),b=y(`
        / 32,844 LSOAs`)},m(C,T){d(C,e,T),$(e,t),$(e,n),$(e,r),$(r,f),d(C,i,T),d(C,a,T),$(a,u),$(a,c),$(c,_),$(a,b)},p(C,T){T&32&&l!==(l=C[5].LSOA11CD+"")&&G(t,l),T&32&&s!==(s=C[5].score+"")&&G(f,s),T&32&&p!==(p=C[5].rank.toLocaleString()+"")&&G(_,p)},d(C){C&&(h(e),h(i),h(a))}}}function Bs(o){let e,l;return e=new ae({props:{$$slots:{default:[Es,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Us(o){let e,l,t,n;const r=[q(Ee),{sourceLayer:Ee},{paint:{"fill-color":me(["-",10,["get","decile"]],o[2],o[1]),"fill-opacity":ee(.5,.7)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Bs]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new Re({props:s});const f=[q(`${Ee}-outline`),{sourceLayer:Ee},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),n=!0},p(a,u){const c=u&7?ne(r,[u&0&&re(q(Ee)),u&0&&{sourceLayer:Ee},u&6&&{paint:{"fill-color":me(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":ee(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?ne(f,[u&0&&re(q(`${Ee}-outline`)),u&0&&{sourceLayer:Ee},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),k(e,a),k(t,a)}}}function Ws(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Ee,title:Ys,$$slots:{controls:[Hs],help:[zs]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Ee}.pmtiles`,$$slots:{default:[Us]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Ee="imd",Ys="Indices of Multiple Deprivation";function Js(o,e,l){let t,n=x.sequential_low_to_high,r=[0,2,4,6,8,10],s=pe(Ee);W(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Vs extends Z{constructor(e){super(),Q(this,e,Js,Ws,Y,{})}}function Zs(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Qs(o){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ks(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/fb6ab0ce776243339e45e33444f431c8_0/explore",$$slots:{default:[Qs]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),w(n.$$.fragment),r=y(", as of May 2024."),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function Xs(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&h(e)}}}function xs(o){let e,l;return e=new ae({props:{$$slots:{default:[Xs,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ei(o){let e,l,t,n;const r=[q(gt),{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[xs]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new Re({props:s}),e.$on("click",li);const f=[q(`${gt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&re(q(gt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?ne(f,[u&0&&re(q(`${gt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),k(e,a),k(t,a)}}}function ti(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:gt,title:ni,$$slots:{help:[Ks],icon:[Zs]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new Gt({props:{data:`${ce()}/v1/${gt}.geojson`,$$slots:{default:[ei]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let gt="local_authority_districts",ni="Local Authority Districts";function li(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.LAD24CD}`,"_blank")}function ri(o,e,l){let t,n=x.local_authority_districts,r=pe(gt);W(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class oi extends Z{constructor(e){super(),Q(this,e,ri,ti,Y,{})}}function si(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function ii(o){let e;return{c(){e=y(`local authority
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ai(o){let e;return{c(){e=y(`national park authorit
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function fi(o){let e;return{c(){e=y(`development corporation
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ui(o){let e;return{c(){e=y("this map")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ci(o){let e;return{c(){e=y(`planning.data.gov.uk
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function $i(o){let e,l,t,n,r,s,f,i,a,u,c,p,_,b,C,T,M,j,P,N,O,I,D;return n=new le({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[ii]},$$scope:{ctx:o}}}),s=new le({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ai]},$$scope:{ctx:o}}}),i=new le({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[fi]},$$scope:{ctx:o}}}),b=new le({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[ui]},$$scope:{ctx:o}}}),P=new le({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[ci]},$$scope:{ctx:o}}}),I=new Te({}),{c(){e=S("span"),l=S("p"),t=y("LPAs may be a "),w(n.$$.fragment),r=y(", "),w(s.$$.fragment),f=y("y, or "),w(i.$$.fragment),a=y("."),u=L(),c=S("p"),p=S("strong"),_=y(`Note there are overlapping LPAs near Northhamptonshire. Only one
        authority name is shown when hovering. Use `),w(b.$$.fragment),C=y(" to get more details."),T=L(),M=S("p"),j=y("Data from ONS Geography via "),w(P.$$.fragment),N=y(", as of November 2022."),O=L(),w(I.$$.fragment),A(e,"slot","help")},m(R,z){d(R,e,z),$(e,l),$(l,t),v(n,l,null),$(l,r),v(s,l,null),$(l,f),v(i,l,null),$(l,a),$(e,u),$(e,c),$(c,p),$(p,_),v(b,p,null),$(p,C),$(e,T),$(e,M),$(M,j),v(P,M,null),$(M,N),$(e,O),v(I,e,null),D=!0},p(R,z){const V={};z&32&&(V.$$scope={dirty:z,ctx:R}),n.$set(V);const ie={};z&32&&(ie.$$scope={dirty:z,ctx:R}),s.$set(ie);const F={};z&32&&(F.$$scope={dirty:z,ctx:R}),i.$set(F);const X={};z&32&&(X.$$scope={dirty:z,ctx:R}),b.$set(X);const H={};z&32&&(H.$$scope={dirty:z,ctx:R}),P.$set(H)},i(R){D||(m(n.$$.fragment,R),m(s.$$.fragment,R),m(i.$$.fragment,R),m(b.$$.fragment,R),m(P.$$.fragment,R),m(I.$$.fragment,R),D=!0)},o(R){g(n.$$.fragment,R),g(s.$$.fragment,R),g(i.$$.fragment,R),g(b.$$.fragment,R),g(P.$$.fragment,R),g(I.$$.fragment,R),D=!1},d(R){R&&h(e),k(n),k(s),k(i),k(b),k(P),k(I)}}}function pi(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&h(e)}}}function mi(o){let e,l;return e=new ae({props:{$$slots:{default:[pi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function _i(o){let e,l,t,n;const r=[q(Be),{sourceLayer:Be},{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[mi]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new Re({props:s});const f=[q(`${Be}-outline`),{sourceLayer:Be},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&re(q(Be)),u&0&&{sourceLayer:Be},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?ne(f,[u&0&&re(q(`${Be}-outline`)),u&0&&{sourceLayer:Be},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),k(e,a),k(t,a)}}}function gi(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Be,title:di,$$slots:{help:[$i],icon:[si]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Be}.pmtiles`,$$slots:{default:[_i]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Be="local_planning_authorities",di="Local Planning Authorities";function hi(o,e,l){let t,n=x.local_planning_authorities,r=pe(Be);W(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class bi extends Z{constructor(e){super(),Q(this,e,hi,gi,Y,{})}}function wi(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function vi(o){let e;return{c(){e=y(`Ordnance Survey Boundary-Line
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ki(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[vi]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),w(n.$$.fragment),r=y(", as of October 2024."),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function yi(o){let e,l=o[4].Name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].Name+"")&&G(t,l)},d(n){n&&h(e)}}}function Si(o){let e,l;return e=new ae({props:{$$slots:{default:[yi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ti(o){let e,l,t,n;const r=[q(Ue),{sourceLayer:Ue},{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Si]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new Re({props:s}),e.$on("click",Ii);const f=[q(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":o[1],"line-width":5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&re(q(Ue)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?ne(f,[u&0&&re(q(`${Ue}-outline`)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),k(e,a),k(t,a)}}}function Ci(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ue,title:Li,$$slots:{help:[ki],icon:[wi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Ue}.pmtiles`,$$slots:{default:[Ti]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Ue="parliamentary_constituencies",Li="Parliamentary constituencies";function Ii(o){let e=o.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Mi(o,e,l){let t,n=x.parliamentary_constituencies,r=pe(Ue);W(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Oi extends Z{constructor(e){super(),Q(this,e,Mi,Ci,Y,{})}}function ji(o){let e;return{c(){e=y(`DEFRA
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ni(o){let e,l,t,n,r,s,f,i,a,u;return n=new le({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[ji]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Most layers show air quality data from "),w(n.$$.fragment),r=y(`. The measurements are annual means, in units of µgm
      `),s=S("sup"),s.textContent="3",f=y(`
      . Note the particulate matter layers are not corrected for natural sources.`),i=L(),w(a.$$.fragment),A(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(l,t),v(n,l,null),$(l,r),$(l,s),$(l,f),$(e,i),v(a,e,null),u=!0},p(c,p){const _={};p&4096&&(_.$$scope={dirty:p,ctx:c}),n.$set(_)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),k(n),k(a)}}}function Pi(o){let e,l,t,n,r,s=o[3](o[0].pollutant)+"",f,i,a,u,c,p,_,b,C,T,M,j,P;function N(I){o[5](I)}let O={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return o[0].pollutant!==void 0&&(O.value=o[0].pollutant),l=new Ft({props:O}),E.push(()=>B(l,"value",N)),{c(){e=S("div"),w(l.$$.fragment),n=L(),r=S("p"),f=y(s),i=L(),a=S("div"),u=S("label"),c=y(`Opacity
        `),p=S("input"),_=L(),b=S("img"),A(p,"type","range"),A(p,"min","0"),A(p,"max","100"),Vt(b.src,C=o[4](o[0].pollutant))||A(b,"src",C),A(b,"width",150),A(b,"alt",T=`Legend for ${o[0].pollutant} layer`),A(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(I,D){d(I,e,D),v(l,e,null),$(e,n),$(e,r),$(r,f),$(e,i),$(e,a),$(a,u),$(u,c),$(u,p),Ze(p,o[0].opacity),$(e,_),$(e,b),M=!0,j||(P=[ft(p,"change",o[6]),ft(p,"input",o[6])],j=!0)},p(I,D){const R={};!t&&D&1&&(t=!0,R.value=I[0].pollutant,U(()=>t=!1)),l.$set(R),(!M||D&1)&&s!==(s=I[3](I[0].pollutant)+"")&&G(f,s),D&1&&Ze(p,I[0].opacity),(!M||D&1&&!Vt(b.src,C=I[4](I[0].pollutant)))&&A(b,"src",C),(!M||D&1&&T!==(T=`Legend for ${I[0].pollutant} layer`))&&A(b,"alt",T)},i(I){M||(m(l.$$.fragment,I),M=!0)},o(I){g(l.$$.fragment,I),M=!1},d(I){I&&h(e),k(l),j=!1,gr(P)}}}function Ri(o){let e,l;const t=[q(tn),{paint:{"raster-opacity":o[0].opacity/100}},{layout:{visibility:o[0].show?"visible":"none"}}];let n={};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Zr({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&re(q(tn)),s&1&&{paint:{"raster-opacity":r[0].opacity/100}},s&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Di(o){let e,l,t,n,r;function s(i){o[7](i)}let f={name:tn,title:Fi,$$slots:{controls:[Pi],help:[Ni]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new vo({props:{tiles:[o[1]],tileSize:256,$$slots:{default:[Ri]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&4097&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&2&&(c.tiles=[i[1]]),a&4097&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let tn="pollution",Fi="Pollution";function Ai(o){return o.show?`${o.pollutant}/${o.opacity}`:null}function Gi(o){let[e,l]=o.split("/");return{show:!0,pollutant:e,opacity:parseInt(l)}}function qi(o,e,l){let t,n,r,f=qt(tn,{show:!1,pollutant:"PM25_viridis",opacity:50},Ai,Gi);W(o,f,C=>l(0,r=C));function i(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${r.pollutant}/MapServer/WMSServer`}function a(C){return t[1]}function u(C){let T=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${i()}?bbox={bbox-epsg-3857}&${T}`}function c(C){let T=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${i()}?${T}`}function p(C){o.$$.not_equal(r.pollutant,C)&&(r.pollutant=C,f.set(r))}function _(){r.opacity=Zt(this.value),f.set(r)}function b(C){o.$$.not_equal(r.show,C)&&(r.show=C,f.set(r))}return o.$$.update=()=>{o.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[r.pollutant]),o.$$.dirty&1&&l(1,n=u(r.pollutant))},[r,n,f,a,c,p,_,b]}class zi extends Z{constructor(e){super(),Q(this,e,qi,Di,Y,{})}}function Hi(o){let e;return{c(){e=y(`DEFRA
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ei(o){let e,l,t,n,r,s,f,i,a,u;return s=new le({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[Hi]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),l.textContent=`This is the LAeq,16h dataset showing annual average noise levels in units
      of decibels for the 16-hour period between 7am and 11pm. Only roads in
      areas with at least 100,000 people are included.`,t=L(),n=S("p"),r=y("Data from June 2019, produced by "),w(s.$$.fragment),f=y(". See there for methodology details"),i=L(),w(a.$$.fragment),A(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(e,t),$(e,n),$(n,r),v(s,n,null),$(n,f),$(e,i),v(a,e,null),u=!0},p(c,p){const _={};p&32&&(_.$$scope={dirty:p,ctx:c}),s.$set(_)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(s.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),k(s),k(a)}}}function Bi(o){let e,l,t;return l=new qe({props:{colorScale:o[1],limits:["55","65","75",">"]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","controls")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Ui(o){let e,l=o[4].noiseclass+"",t,n,r=fl(o[4].noiseclass)+"",s,f;return{c(){e=S("p"),t=y(l),n=y(" dB ("),s=y(r),f=y(")")},m(i,a){d(i,e,a),$(e,t),$(e,n),$(e,s),$(e,f)},p(i,a){a&16&&l!==(l=i[4].noiseclass+"")&&G(t,l),a&16&&r!==(r=fl(i[4].noiseclass)+"")&&G(s,r)},d(i){i&&h(e)}}}function Wi(o){let e,l;return e=new ae({props:{$$slots:{default:[Ui,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Yi(o){let e,l;const t=[q(dt),{sourceLayer:dt},{paint:{"fill-color":Xe(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":ee(.5,.8)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Wi]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Re({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&3?ne(t,[s&0&&re(q(dt)),s&0&&{sourceLayer:dt},s&2&&{paint:{"fill-color":Xe(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":ee(.5,.8)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Ji(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:dt,title:Vi,$$slots:{controls:[Bi],help:[Ei]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${dt}.pmtiles`,$$slots:{default:[Yi]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let dt="road_noise",Vi="Road noise";function fl(o){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[o]}function Zi(o,e,l){let t,n=[x.sequential_low_to_high[0],x.sequential_low_to_high[2],x.sequential_low_to_high[4]],r=pe(dt);W(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Qi extends Z{constructor(e){super(),Q(this,e,Zi,Ji,Y,{})}}function Ki(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Xi(o){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function xi(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Xi]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),w(n.$$.fragment),r=y(", as of May 2023."),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function ea(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&h(e)}}}function ta(o){let e,l;return e=new ae({props:{$$slots:{default:[ea,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function na(o){let e,l,t,n;const r=[q(We),{sourceLayer:We},{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ta]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new Re({props:s}),e.$on("click",oa);const f=[q(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&re(q(We)),u&0&&{sourceLayer:We},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?ne(f,[u&0&&re(q(`${We}-outline`)),u&0&&{sourceLayer:We},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),k(e,a),k(t,a)}}}function la(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:We,title:ra,$$slots:{help:[xi],icon:[Ki]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${We}.pmtiles`,$$slots:{default:[na]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let We="wards",ra="Wards";function oa(o){let e=encodeURIComponent(o.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function sa(o,e,l){let t,n=x.wards,r=pe(We);W(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class ia extends Z{constructor(e){super(),Q(this,e,sa,la,Y,{})}}function aa(o){let e;return{c(){e=y("Open Data Commons Open Database License")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function fa(o){let e,l,t,n;return t=new le({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[aa]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=y("License: "),w(t.$$.fragment)},m(r,s){d(r,e,s),$(e,l),v(t,e,null),n=!0},p(r,[s]){const f={};s&1&&(f.$$scope={dirty:s,ctx:r}),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){g(t.$$.fragment,r),n=!1},d(r){r&&h(e),k(t)}}}class xe extends Z{constructor(e){super(),Q(this,e,null,fa,Y,{})}}function ua(o){let e,l,t;return l=new Se({props:{color:x.bus_route_with_lane}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function ca(o){let e;return{c(){e=y(`GTFS
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function $a(o){let e,l,t,n,r,s,f,i,a,u;return s=new le({props:{href:"https://gtfs.org",$$slots:{default:[ca]},$$scope:{ctx:o}}}),a=new xe({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows all roads with at least one bus route crossing them. It also
      shows whether the road has a bus lane or not.`,t=L(),n=S("p"),r=y("Note this data is from OpenStreetMap (as of 20 October 2024), not "),w(s.$$.fragment),f=y(`, and doesn't include which routes are run or the frequency
      of service.`),i=L(),w(a.$$.fragment),A(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(e,t),$(e,n),$(n,r),v(s,n,null),$(n,f),$(e,i),v(a,e,null),u=!0},p(c,p){const _={};p&16&&(_.$$scope={dirty:p,ctx:c}),s.$set(_)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(s.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),k(s),k(a)}}}function pa(o){let e;return{c(){e=S("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ma(o){let e;return{c(){e=S("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function _a(o){let e;function l(r,s){return r[3].has_bus_lane?ma:pa}let t=l(o),n=t(o);return{c(){n.c(),e=ve()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function ga(o){let e,l;return e=new ae({props:{$$slots:{default:[_a,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function da(o){let e,l;const t=[q(ht),{sourceLayer:ht},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],x.bus_route_with_lane,x.bus_route_without_lane],"line-width":5,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[ga]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&re(q(ht)),s&0&&{sourceLayer:ht},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function ha(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:ht,title:ba,$$slots:{help:[$a],icon:[ua]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${ht}.pmtiles`,$$slots:{default:[da]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let ht="bus_routes",ba="Bus routes";function wa(o,e,l){let t,n=pe(ht);W(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class va extends Z{constructor(e){super(),Q(this,e,wa,ha,Y,{})}}function ul(o){const e=Na(o[9]);o[10]=e[0],o[11]=e[1],o[12]=e[2]}function cl(o,e,l){const t=o.slice();return t[10]=e[l][0],t[13]=e[l][1],t[14]=e[l][2],t[15]=e,t[16]=l,t}function ka(o){let e,l,t,n,r,s,f,i,a;return i=new xe({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
      of 20 October 2024).`,t=L(),n=S("ul"),n.innerHTML=`<li><b>Separated tracks</b>
        include fully or partly segregated cycletracks alongside a carriageway, stepped
        cycletracks, and tracks off the carriageway entirely. They&#39;re also separated
        from foot traffic.</li> <li><b>Unprotected lanes</b>
        are mandatory or advisory lanes on the carriageway, without any physical
        protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
        paths are split between cycle and foot traffic, and are separated from motor
        traffic somehow. There can be segregation between cyclists and pedestrians
        or not.</li>`,r=L(),s=S("p"),s.textContent=`Note there are many known limitations with this layer. Data in
      OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
      processing is also imperfect. You can click a segment to see full
      OpenStreetMap data. Please do report issues with the classification or
      data.`,f=L(),w(i.$$.fragment),A(e,"slot","help")},m(u,c){d(u,e,c),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(e,f),v(i,e,null),a=!0},p:J,i(u){a||(m(i.$$.fragment,u),a=!0)},o(u){g(i.$$.fragment,u),a=!1},d(u){u&&h(e),k(i)}}}function ya(o){let e,l,t=o[13]+"",n,r,s;return e=new Se({props:{color:o[14]}}),{c(){w(e.$$.fragment),l=L(),n=y(t),r=L()},m(f,i){v(e,f,i),d(f,l,i),d(f,n,i),d(f,r,i),s=!0},p:J,i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),s=!1},d(f){f&&(h(l),h(n),h(r)),k(e,f)}}}function $l(o){let e,l,t;function n(s){o[4](s,o[10])}let r={$$slots:{default:[ya]},$$scope:{ctx:o}};return o[0][o[10]]!==void 0&&(r.checked=o[0][o[10]]),e=new Je({props:r}),E.push(()=>B(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){o=s;const i={};f&131072&&(i.$$scope={dirty:f,ctx:o}),!l&&f&5&&(l=!0,i.checked=o[0][o[10]],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function Sa(o){let e,l,t=he(o[2]),n=[];for(let s=0;s<t.length;s+=1)n[s]=$l(cl(o,t,s));const r=s=>g(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ve()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);d(s,e,f),l=!0},p(s,f){if(f&5){t=he(s[2]);let i;for(i=0;i<t.length;i+=1){const a=cl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=$l(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(s){s&&h(e),Ke(n,s)}}}function Ta(o){let e,l,t;return l=new Ge({props:{small:!0,$$slots:{default:[Sa]},$$scope:{ctx:o}}}),{c(){e=S("div"),w(l.$$.fragment),A(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p(n,r){const s={};r&131073&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Ca(o){ul(o);let e,l=o[10]+"",t,n,r,s,f,i=o[11]+"",a,u,c,p,_=o[12]+"",b;return{c(){e=S("h2"),t=y(l),n=L(),r=S("p"),s=y("Direction: "),f=S("b"),a=L(),u=S("p"),c=y("Width: "),p=S("b"),b=y(_)},m(C,T){d(C,e,T),$(e,t),d(C,n,T),d(C,r,T),$(r,s),$(r,f),f.innerHTML=i,d(C,a,T),d(C,u,T),$(u,c),$(u,p),$(p,b)},p(C,T){ul(C),T&512&&l!==(l=C[10]+"")&&G(t,l),T&512&&i!==(i=C[11]+"")&&(f.innerHTML=i),T&512&&_!==(_=C[12]+"")&&G(b,_)},d(C){C&&(h(e),h(n),h(r),h(a),h(u))}}}function La(o){let e,l;return e=new ae({props:{$$slots:{default:[Ca,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&131584&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ia(o){let e,l;const t=[q(bt),{sourceLayer:bt},{paint:{"line-color":Xe(["get","kind"],{track:x.cycle_paths.track,lane:x.cycle_paths.lane,shared_use_segregated:x.cycle_paths.shared_use_segregated,shared_use_unsegregated:x.cycle_paths.shared_use_unsegregated},"red"),"line-width":Pe,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[La]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new _e({props:n}),e.$on("click",Pa),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&9?ne(t,[s&0&&re(q(bt)),s&0&&{sourceLayer:bt},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&9&&{filter:r[3](r[0])},t[5],t[6],t[7]]):{};s&131072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Ma(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:bt,title:Oa,$$slots:{controls:[Ta],help:[ka]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${bt}.pmtiles`,$$slots:{default:[Ia]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&131073&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&131073&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let bt="cycle_paths",Oa="Cycle paths";function ja(o){return{show:!0,track:o.includes("track"),lane:o.includes("lane"),shared_use_segregated:o.includes("shared_use_segregated"),shared_use_unsegregated:o.includes("shared_use_unsegregated")}}function Na(o){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[o.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[o.direction],t=o.width=="unknown"?"unknown":`${o.width} meters`;return[e,`${l} ${o.direction}`,t]}function Pa(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function Ra(o,e,l){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],r={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(p){return p.show?n.filter(_=>p[_]).join(","):null}let f=qt(bt,r,s,ja);W(o,f,p=>l(0,t=p));let i=[["track","Separated tracks",x.cycle_paths.track],["lane","Unprotected lanes",x.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",x.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",x.cycle_paths.shared_use_unsegregated]];function a(p){let _=n.filter(b=>p[b]);return["in",["get","kind"],["literal",_]]}function u(p,_){o.$$.not_equal(t[_],p)&&(t[_]=p,f.set(t))}function c(p){o.$$.not_equal(t.show,p)&&(t.show=p,f.set(t))}return[t,f,i,a,u,c]}class Da extends Z{constructor(e){super(),Q(this,e,Ra,Ma,Y,{})}}function Fa(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Aa(o){let e;return{c(){e=y(`Major Road Network
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ga(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Aa]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from the "),w(n.$$.fragment),r=y(", as of September 2021."),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function qa(o){let e,l=(o[4].name??"Unknown MRN road")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown MRN road")+"")&&G(t,l)},d(n){n&&h(e)}}}function za(o){let e,l;return e=new ae({props:{$$slots:{default:[qa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ha(o){let e,l;const t=[q(wt),{sourceLayer:wt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[za]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&3?ne(t,[s&0&&re(q(wt)),s&0&&{sourceLayer:wt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Ea(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:wt,title:Ba,$$slots:{help:[Ga],icon:[Fa]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${wt}.pmtiles`,$$slots:{default:[Ha]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let wt="mrn",Ba="Major Road Network";function Ua(o,e,l){let t,n=x.mrn,r=pe(wt);W(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Wa extends Z{constructor(e){super(),Q(this,e,Ua,Ea,Y,{})}}function Ya(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Ja(o){let e;return{c(){e=y(`OS Open Roads
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Va(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[Ja]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),w(n.$$.fragment),r=y(`, as of December 2023. The SRN is equivalent to trunk
      roads.`),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function Za(o){let e,l=(o[4].name??"Unknown SRN road")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown SRN road")+"")&&G(t,l)},d(n){n&&h(e)}}}function Qa(o){let e,l;return e=new ae({props:{$$slots:{default:[Za,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ka(o){let e,l;const t=[q(vt),{sourceLayer:vt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Qa]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&3?ne(t,[s&0&&re(q(vt)),s&0&&{sourceLayer:vt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Xa(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:vt,title:xa,$$slots:{help:[Va],icon:[Ya]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${vt}.pmtiles`,$$slots:{default:[Ka]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let vt="srn",xa="Strategic Road Network";function ef(o,e,l){let t,n=x.srn,r=pe(vt);W(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class tf extends Z{constructor(e){super(),Q(this,e,ef,Xa,Y,{})}}function nf(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function lf(o){let e;return{c(){e=y(`National Cycle Network
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function rf(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[lf]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from Sustrans about the "),w(n.$$.fragment),r=y(", downloaded on 22/01/2024."),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function pl(o){let e,l,t,n=o[4].Desc_+"",r;return{c(){e=S("li"),l=y("Description: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Desc_+"")&&G(r,n)},d(s){s&&h(e)}}}function ml(o){let e,l,t,n=o[4].Greenway+"",r;return{c(){e=S("li"),l=y("Is greenway: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Greenway+"")&&G(r,n)},d(s){s&&h(e)}}}function _l(o){let e,l,t,n=o[4].RouteType+"",r;return{c(){e=S("li"),l=y("Route type: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteType+"")&&G(r,n)},d(s){s&&h(e)}}}function gl(o){let e,l,t,n=o[4].RouteNo+"",r;return{c(){e=S("li"),l=y("Route number: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteNo+"")&&G(r,n)},d(s){s&&h(e)}}}function dl(o){let e,l,t,n=o[4].RouteCat+"",r;return{c(){e=S("li"),l=y("Route Category: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteCat+"")&&G(r,n)},d(s){s&&h(e)}}}function hl(o){let e,l,t,n=o[4].OpenStatus+"",r;return{c(){e=S("li"),l=y("Open Status: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].OpenStatus+"")&&G(r,n)},d(s){s&&h(e)}}}function bl(o){let e,l,t,n=o[4].Surface+"",r;return{c(){e=S("li"),l=y("Surface: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Surface+"")&&G(r,n)},d(s){s&&h(e)}}}function wl(o){let e,l,t,n=o[4].Quality+"",r;return{c(){e=S("li"),l=y("Quality: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Quality+"")&&G(r,n)},d(s){s&&h(e)}}}function vl(o){let e,l,t,n=o[4].RoadClass+"",r;return{c(){e=S("li"),l=y("Road Class: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RoadClass+"")&&G(r,n)},d(s){s&&h(e)}}}function of(o){let e,l,t,n,r,s,f,i,a,u=o[4].Desc_&&pl(o),c=o[4].Greenway&&ml(o),p=o[4].RouteType&&_l(o),_=o[4].RouteNo&&gl(o),b=o[4].RouteCat&&dl(o),C=o[4].OpenStatus&&hl(o),T=o[4].Surface&&bl(o),M=o[4].Quality&&wl(o),j=o[4].RoadClass&&vl(o);return{c(){e=S("ul"),u&&u.c(),l=L(),c&&c.c(),t=L(),p&&p.c(),n=L(),_&&_.c(),r=L(),b&&b.c(),s=L(),C&&C.c(),f=L(),T&&T.c(),i=L(),M&&M.c(),a=L(),j&&j.c()},m(P,N){d(P,e,N),u&&u.m(e,null),$(e,l),c&&c.m(e,null),$(e,t),p&&p.m(e,null),$(e,n),_&&_.m(e,null),$(e,r),b&&b.m(e,null),$(e,s),C&&C.m(e,null),$(e,f),T&&T.m(e,null),$(e,i),M&&M.m(e,null),$(e,a),j&&j.m(e,null)},p(P,N){P[4].Desc_?u?u.p(P,N):(u=pl(P),u.c(),u.m(e,l)):u&&(u.d(1),u=null),P[4].Greenway?c?c.p(P,N):(c=ml(P),c.c(),c.m(e,t)):c&&(c.d(1),c=null),P[4].RouteType?p?p.p(P,N):(p=_l(P),p.c(),p.m(e,n)):p&&(p.d(1),p=null),P[4].RouteNo?_?_.p(P,N):(_=gl(P),_.c(),_.m(e,r)):_&&(_.d(1),_=null),P[4].RouteCat?b?b.p(P,N):(b=dl(P),b.c(),b.m(e,s)):b&&(b.d(1),b=null),P[4].OpenStatus?C?C.p(P,N):(C=hl(P),C.c(),C.m(e,f)):C&&(C.d(1),C=null),P[4].Surface?T?T.p(P,N):(T=bl(P),T.c(),T.m(e,i)):T&&(T.d(1),T=null),P[4].Quality?M?M.p(P,N):(M=wl(P),M.c(),M.m(e,a)):M&&(M.d(1),M=null),P[4].RoadClass?j?j.p(P,N):(j=vl(P),j.c(),j.m(e,null)):j&&(j.d(1),j=null)},d(P){P&&h(e),u&&u.d(),c&&c.d(),p&&p.d(),_&&_.d(),b&&b.d(),C&&C.d(),T&&T.d(),M&&M.d(),j&&j.d()}}}function sf(o){let e,l;return e=new ae({props:{$$slots:{default:[of,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function af(o){let e,l;const t=[q(kt),{sourceLayer:kt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":4,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[sf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&3?ne(t,[s&0&&re(q(kt)),s&0&&{sourceLayer:kt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":4,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function ff(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:kt,title:uf,$$slots:{help:[rf],icon:[nf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${kt}.pmtiles`,$$slots:{default:[af]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let kt="national_cycle_network",uf="National Cycle Network";function cf(o,e,l){let t,n=x.national_cycle_network,r=pe(kt);W(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class $f extends Z{constructor(e){super(),Q(this,e,cf,ff,Y,{})}}function kl(o,e,l){const t=o.slice();return t[7]=e[l][0],t[8]=e[l][1],t[9]=e[l][2],t}function pf(o){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function mf(o){let e,l,t,n,r,s,f,i,a,u,c,p;return u=new le({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[pf]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows the average and minimum pavement width (in meters) from
      Ordnance Survey. Because the shape of pavement may vary along a road, both
      average and minimum are reported. Measurements may be available for the
      left side of the road, the right, or both. The coloring shows the larger
      of the two average widths, and the line thickness has no meaning. Hover
      over a line to see if there's pavement on one or both sides of the road.
      (You won't be able to distinguish left and right though; use the OS Road
      basemap instead.)`,t=L(),n=S("p"),n.textContent=`Note these measurements are difficult to interpret near dual carriageways
      (shown as parallel lines).`,r=L(),s=S("p"),s.textContent="Data valid as of 1 January, 2024",f=L(),i=S("p"),a=y(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),w(u.$$.fragment),c=y("."),A(e,"slot","help")},m(_,b){d(_,e,b),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(e,f),$(e,i),$(i,a),v(u,i,null),$(i,c),p=!0},p(_,b){const C={};b&4096&&(C.$$scope={dirty:b,ctx:_}),u.$set(C)},i(_){p||(m(u.$$.fragment,_),p=!0)},o(_){g(u.$$.fragment,_),p=!1},d(_){_&&h(e),k(u)}}}function _f(o){let e,l,t;return l=new qe({props:{colorScale:o[1],limits:o[3]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","controls")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function gf(o){let e,l,t=nn(o[6].angle+o[9])+"",n;return{c(){e=S("p"),l=new Dt(!1),n=y(` side of the road: no pavement
          `),l.a=n},m(r,s){d(r,e,s),l.m(t,e),$(e,n)},p(r,s){s&64&&t!==(t=nn(r[6].angle+r[9])+"")&&l.p(t)},d(r){r&&h(e)}}}function df(o){let e,l,t=nn(o[6].angle+o[9])+"",n,r,s=o[7]+"",f,i,a,u=o[8]+"",c,p;return{c(){e=S("p"),l=new Dt(!1),n=y(` side of the road:
            `),r=S("b"),f=y(s),i=y(`
            m average,
            `),a=S("b"),c=y(u),p=y(`
            m minimum
          `),l.a=n},m(_,b){d(_,e,b),l.m(t,e),$(e,n),$(e,r),$(r,f),$(e,i),$(e,a),$(a,c),$(e,p)},p(_,b){b&64&&t!==(t=nn(_[6].angle+_[9])+"")&&l.p(t),b&64&&s!==(s=_[7]+"")&&G(f,s),b&64&&u!==(u=_[8]+"")&&G(c,u)},d(_){_&&h(e)}}}function yl(o){let e;function l(r,s){return r[7]?df:gf}let t=l(o),n=t(o);return{c(){n.c(),e=ve()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function hf(o){let e,l=he([[o[6].left_average,o[6].left_minimum,-90],[o[6].right_average,o[6].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=yl(kl(o,l,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=ve()},m(n,r){for(let s=0;s<2;s+=1)t[s]&&t[s].m(n,r);d(n,e,r)},p(n,r){if(r&64){l=he([[n[6].left_average,n[6].left_minimum,-90],[n[6].right_average,n[6].right_minimum,90]]);let s;for(s=0;s<2;s+=1){const f=kl(n,l,s);t[s]?t[s].p(f,r):(t[s]=yl(f),t[s].c(),t[s].m(e.parentNode,e))}for(;s<2;s+=1)t[s].d(1)}},d(n){n&&h(e),Ke(t,n)}}}function bf(o){let e,l;return e=new ae({props:{openOn:"hover",$$slots:{default:[hf,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&4160&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function wf(o){let e,l;const t=[q(yt),{sourceLayer:yt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":me(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],o[2],o[1]),"line-width":Pe,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[bf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&re(q(yt)),s&0&&{sourceLayer:yt},t[2],t[3],s&6&&{paint:{"line-color":me(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":Pe,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&4096&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function vf(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:yt,title:kf,$$slots:{controls:[_f],help:[mf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${Kt()}/v1/${yt}.pmtiles`,$$slots:{default:[wf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&4096&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&4097&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let yt="pavement_widths",kf="OS Pavement widths";function yf(o){let e=Math.floor((o+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function nn(o){return`${yf(o)} <span style="display: inline-block; rotate: ${o}deg">⬆</span>`}function Sf(o,e,l){let t,n=["black","red","orange","green"],r=[0,1.5,2,3,100],s=["0-1.5m","1.5-2m","2-3m",">3m"],f=pe(yt);W(o,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,s,f,i]}class Tf extends Z{constructor(e){super(),Q(this,e,Sf,vf,Y,{})}}function Cf(o){let e;return{c(){e=y("the PCT website")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Lf(o){let e;return{c(){e=y("2017 journal article")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function If(o){let e,l,t,n,r,s,f,i,a,u,c,p;return i=new le({props:{href:"https://www.pct.bike",$$slots:{default:[Cf]},$$scope:{ctx:o}}}),u=new le({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Lf]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),l.textContent=`The PCT shows major links on the transport network on which there is high
      latent demand for cycling under scenarios of change, based on the
      "fastest" routes from CycleStreets. Counts approximate daily rush hour
      traffic levels.`,t=L(),n=S("p"),n.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
      Please use this layer with caution.`,r=L(),s=S("p"),f=y("See "),w(i.$$.fragment),a=y(" and "),w(u.$$.fragment),c=y(" for details on methodology and data sources."),A(e,"slot","help")},m(_,b){d(_,e,b),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),v(i,s,null),$(s,a),v(u,s,null),$(s,c),p=!0},p(_,b){const C={};b&1024&&(C.$$scope={dirty:b,ctx:_}),i.$set(C);const T={};b&1024&&(T.$$scope={dirty:b,ctx:_}),u.$set(T)},i(_){p||(m(i.$$.fragment,_),m(u.$$.fragment,_),p=!0)},o(_){g(i.$$.fragment,_),g(u.$$.fragment,_),p=!1},d(_){_&&h(e),k(i),k(u)}}}function Mf(o){let e,l,t,n,r,s,f,i,a;l=new qe({props:{colorScale:o[1],limits:o[2]}});function u(b){o[5](b)}let c={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};o[0].tripPurpose!==void 0&&(c.value=o[0].tripPurpose),n=new bn({props:c}),E.push(()=>B(n,"value",u));function p(b){o[6](b)}let _={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return o[0].scenario!==void 0&&(_.value=o[0].scenario),f=new Ft({props:_}),E.push(()=>B(f,"value",p)),{c(){e=S("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),s=L(),w(f.$$.fragment),A(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(b,C){d(b,e,C),v(l,e,null),$(e,t),v(n,e,null),$(e,s),v(f,e,null),a=!0},p(b,C){const T={};!r&&C&1&&(r=!0,T.value=b[0].tripPurpose,U(()=>r=!1)),n.$set(T);const M={};!i&&C&1&&(i=!0,M.value=b[0].scenario,U(()=>i=!1)),f.$set(M)},i(b){a||(m(l.$$.fragment,b),m(n.$$.fragment,b),m(f.$$.fragment,b),a=!0)},o(b){g(l.$$.fragment,b),g(n.$$.fragment,b),g(f.$$.fragment,b),a=!1},d(b){b&&h(e),k(l),k(n),k(f)}}}function Of(o){let e,l=o[4](o[9])+"",t;return{c(){e=new Dt(!1),t=ve(),e.a=t},m(n,r){e.m(l,n,r),d(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(h(t),e.d())}}}function jf(o){let e,l;return e=new ae({props:{$$slots:{default:[Of,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Nf(o){let e,l;const t=[q(nt),{sourceLayer:nt},{paint:{"line-color":me(["get",o[0].scenario],o[2],o[1]),"line-width":Pe,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==nt?"visible":"none"}}];let n={$$slots:{default:[jf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&re(q(nt)),s&0&&{sourceLayer:nt},s&7&&{paint:{"line-color":me(["get",r[0].scenario],r[2],r[1]),"line-width":Pe,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==nt?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Pf(o){let e,l=o[4](o[9])+"",t;return{c(){e=new Dt(!1),t=ve(),e.a=t},m(n,r){e.m(l,n,r),d(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(h(t),e.d())}}}function Rf(o){let e,l;return e=new ae({props:{$$slots:{default:[Pf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Df(o){let e,l;const t=[q(mt),{sourceLayer:mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":me(["get",o[0].scenario],o[2],o[1]),"line-width":Pe,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==mt?"visible":"none"}}];let n={$$slots:{default:[Rf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&re(q(mt)),s&0&&{sourceLayer:mt},t[2],t[3],s&7&&{paint:{"line-color":me(["get",r[0].scenario],r[2],r[1]),"line-width":Pe,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==mt?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Ff(o){let e,l,t,n,r,s,f;function i(u){o[7](u)}let a={name:Cr,title:Af,$$slots:{controls:[Mf],help:[If]},$$scope:{ctx:o}};return o[0].show!==void 0&&(a.show=o[0].show),e=new ue({props:a}),E.push(()=>B(e,"show",i)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${nt}.pmtiles`,$$slots:{default:[Nf]},$$scope:{ctx:o}}}),s=new $e({props:{url:`pmtiles://${ce()}/v1/${mt}.pmtiles`,$$slots:{default:[Df]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment)},m(u,c){v(e,u,c),d(u,t,c),v(n,u,c),d(u,r,c),v(s,u,c),f=!0},p(u,[c]){const p={};c&1025&&(p.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,p.show=u[0].show,U(()=>l=!1)),e.$set(p);const _={};c&1025&&(_.$$scope={dirty:c,ctx:u}),n.$set(_);const b={};c&1025&&(b.$$scope={dirty:c,ctx:u}),s.$set(b)},i(u){f||(m(e.$$.fragment,u),m(n.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){g(e.$$.fragment,u),g(n.$$.fragment,u),g(s.$$.fragment,u),f=!1},d(u){u&&(h(t),h(r)),k(e,u),k(n,u),k(s,u)}}}let Cr="pct",nt="pct_commute",mt="pct_school",Af="Propensity to Cycle Tool";function Gf(o){return o.show?`${o.tripPurpose}/${o.scenario}`:null}function qf(o){let[e,l]=o.split("/");return{show:!0,tripPurpose:e,scenario:l}}function zf(o,e,l){let t,n=x.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],f=qt(Cr,{show:!1,tripPurpose:nt,scenario:"baseline"},Gf,qf);W(o,f,p=>l(0,t=p));function i(p){let _=p.baseline,b=p.gov_target,C=p.go_dutch,T=`<h2>Trip purpose: ${t.tripPurpose==nt?"commuting":"school"}</h2>`;if(T+=`<p>Baseline (2011): <b>${_.toLocaleString()}</b></p>`,_==0)T+=`<p>Government target (2025): <b>${b.toLocaleString()}</b></p>`,T+=`<p>Go Dutch: <b>${C.toLocaleString()}</b></p>`;else{let M=(b/_).toFixed(1),j=(C/_).toFixed(1);T+=`<p>Government target (2025): ${b.toLocaleString()} (<b>${M}x</b> of baseline)</p>`,T+=`<p>Go Dutch: ${C.toLocaleString()} (<b>${j}x</b> of baseline)</p>`}return T}function a(p){o.$$.not_equal(t.tripPurpose,p)&&(t.tripPurpose=p,f.set(t))}function u(p){o.$$.not_equal(t.scenario,p)&&(t.scenario=p,f.set(t))}function c(p){o.$$.not_equal(t.show,p)&&(t.show=p,f.set(t))}return[t,n,r,f,i,a,u,c]}class Hf extends Z{constructor(e){super(),Q(this,e,zf,Ff,Y,{})}}function Ef(o){let e;return{c(){e=y("Basemap")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Bf(o){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Uf(o){let e,l,t,n,r,s,f,i,a,u,c,p,_;return n=new le({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Ef]},$$scope:{ctx:o}}}),c=new le({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Bf]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),t=y("The average speed data is collected over a six-month period by "),w(n.$$.fragment),r=y(` from 135,000 vehicle telematic systems and provided through
      Ordnance Survey. The averages are grouped by different time periods for weekdays
      and weekends. This map shows the highest average.`),s=L(),f=S("p"),f.textContent="Data valid as of 1 September, 2023",i=L(),a=S("p"),u=y(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),w(c.$$.fragment),p=y("."),A(e,"slot","help")},m(b,C){d(b,e,C),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),$(e,f),$(e,i),$(e,a),$(a,u),v(c,a,null),$(a,p),_=!0},p(b,C){const T={};C&512&&(T.$$scope={dirty:C,ctx:b}),n.$set(T);const M={};C&512&&(M.$$scope={dirty:C,ctx:b}),c.$set(M)},i(b){_||(m(n.$$.fragment,b),m(c.$$.fragment,b),_=!0)},o(b){g(n.$$.fragment,b),g(c.$$.fragment,b),_=!1},d(b){b&&h(e),k(n),k(c)}}}function Wf(o){let e,l,t,n,r,s;l=new qe({props:{colorScale:o[1],limits:o[2]}});function f(a){o[5](a)}let i={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return o[0].kind!==void 0&&(i.value=o[0].kind),n=new bn({props:i}),E.push(()=>B(n,"value",f)),{c(){e=S("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),A(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(a,u){d(a,e,u),v(l,e,null),$(e,t),v(n,e,null),s=!0},p(a,u){const c={};!r&&u&1&&(r=!0,c.value=a[0].kind,U(()=>r=!1)),n.$set(c)},i(a){s||(m(l.$$.fragment,a),m(n.$$.fragment,a),s=!0)},o(a){g(l.$$.fragment,a),g(n.$$.fragment,a),s=!1},d(a){a&&h(e),k(l),k(n)}}}function Yf(o){let e,l,t=o[8].indicative_mph+"",n,r,s,f,i,a=o[8].highest_mph+"",u,c,p=o[4][o[8].highest_description]+"",_,b;return{c(){e=S("p"),l=y("Posted speed limit: "),n=y(t),r=y(" mph"),s=L(),f=S("p"),i=y("Highest average speed: "),u=y(a),c=y(" mph (during "),_=y(p),b=y(")")},m(C,T){d(C,e,T),$(e,l),$(e,n),$(e,r),d(C,s,T),d(C,f,T),$(f,i),$(f,u),$(f,c),$(f,_),$(f,b)},p(C,T){T&256&&t!==(t=C[8].indicative_mph+"")&&G(n,t),T&256&&a!==(a=C[8].highest_mph+"")&&G(u,a),T&256&&p!==(p=C[4][C[8].highest_description]+"")&&G(_,p)},d(C){C&&(h(e),h(s),h(f))}}}function Jf(o){let e,l;return e=new ae({props:{$$slots:{default:[Yf,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&768&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Vf(o){let e,l;const t=[q(St),{sourceLayer:St},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":me(["get",o[0].kind],o[2],o[1]),"line-width":Pe,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}}];let n={$$slots:{default:[Jf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&re(q(St)),s&0&&{sourceLayer:St},t[2],t[3],s&7&&{paint:{"line-color":me(["get",r[0].kind],r[2],r[1]),"line-width":Pe,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Zf(o){let e,l,t,n,r;function s(i){o[6](i)}let f={name:St,title:Qf,$$slots:{controls:[Wf],help:[Uf]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${Kt()}/v1/${St}.pmtiles`,$$slots:{default:[Vf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&513&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let St="road_speeds",Qf="OS Speeds";function Kf(o){return o.show?o.kind:null}function Xf(o){return{show:!0,kind:o}}function xf(o,e,l){let t,n=x.sequential_low_to_high,r=[0,20,30,40,50,90],f=qt(St,{show:!1,kind:"indicative_mph"},Kf,Xf);W(o,f,c=>l(0,t=c));let i={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function a(c){o.$$.not_equal(t.kind,c)&&(t.kind=c,f.set(t))}function u(c){o.$$.not_equal(t.show,c)&&(t.show=c,f.set(t))}return[t,n,r,f,i,a,u]}class eu extends Z{constructor(e){super(),Q(this,e,xf,Zf,Y,{})}}function tu(o){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function nu(o){let e,l,t,n,r,s,f,i,a,u;return i=new le({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[tu]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),l.textContent=`This is average and minimum road carriageway width (in meters) from
      Ordnance Survey. The coloring shows the average width, and the line
      thickness has no meaning. Be careful interpreting the data near dual
      carriageways and crossing islands.`,t=L(),n=S("p"),n.textContent="Data valid as of 1 September, 2023",r=L(),s=S("p"),f=y(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),w(i.$$.fragment),a=y("."),A(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),v(i,s,null),$(s,a),u=!0},p(c,p){const _={};p&64&&(_.$$scope={dirty:p,ctx:c}),i.$set(_)},i(c){u||(m(i.$$.fragment,c),u=!0)},o(c){g(i.$$.fragment,c),u=!1},d(c){c&&h(e),k(i)}}}function lu(o){let e,l,t;return l=new qe({props:{colorScale:o[1],limits:o[2]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","controls")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function ru(o){let e,l,t,n=o[5].average+"",r,s,f,i,a,u,c=o[5].minimum+"",p,_;return{c(){e=S("p"),l=y("Average width: "),t=S("b"),r=y(n),s=y(`
        meters`),f=L(),i=S("p"),a=y("Minimum width: "),u=S("b"),p=y(c),_=y(`
        meters`)},m(b,C){d(b,e,C),$(e,l),$(e,t),$(t,r),$(e,s),d(b,f,C),d(b,i,C),$(i,a),$(i,u),$(u,p),$(i,_)},p(b,C){C&32&&n!==(n=b[5].average+"")&&G(r,n),C&32&&c!==(c=b[5].minimum+"")&&G(p,c)},d(b){b&&(h(e),h(f),h(i))}}}function ou(o){let e,l;return e=new ae({props:{$$slots:{default:[ru,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function su(o){let e,l;const t=[q(Tt),{sourceLayer:Tt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":me(["get","average"],o[2],o[1]),"line-width":Pe,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[ou]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&re(q(Tt)),s&0&&{sourceLayer:Tt},t[2],t[3],s&6&&{paint:{"line-color":me(["get","average"],r[2],r[1]),"line-width":Pe,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function iu(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Tt,title:au,$$slots:{controls:[lu],help:[nu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${Kt()}/v1/${Tt}.pmtiles`,$$slots:{default:[su]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Tt="road_widths",au="OS Road widths";function fu(o,e,l){let t,n=x.sequential_low_to_high,r=[0,5,10,15,20,100],s=pe(Tt);W(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class uu extends Z{constructor(e){super(),Q(this,e,fu,iu,Y,{})}}function cu(o){let e,l,t;return l=new Se({props:{color:x.trams}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function $u(o){let e,l,t,n,r;return n=new xe({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows all trams and light rail lines, according to OpenStreetMap (as
      of 20 October 2024). When these are close to a scheme, interactions
      between the modes must be designed carefully.`,t=L(),w(n.$$.fragment),A(e,"slot","help")},m(s,f){d(s,e,f),$(e,l),$(e,t),v(n,e,null),r=!0},p:J,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){g(n.$$.fragment,s),r=!1},d(s){s&&h(e),k(n)}}}function pu(o){let e,l;const t=[q(Ct),{sourceLayer:Ct},{paint:{"line-color":x.trams,"line-width":5,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new _e({props:n}),e.$on("click",gu),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&re(q(Ct)),s&0&&{sourceLayer:Ct},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function mu(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Ct,title:_u,$$slots:{help:[$u],icon:[cu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Ct}.pmtiles`,$$slots:{default:[pu]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Ct="trams",_u="Trams";function gu(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function du(o,e,l){let t,n=pe(Ct);W(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class hu extends Z{constructor(e){super(),Q(this,e,du,mu,Y,{})}}function bu(o){let e;return{c(){e=y(`Bus Open Data Service
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function wu(o){let e,l,t,n,r,s,f,i,a,u;return n=new le({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[bu]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from the "),w(n.$$.fragment),r=y(`, as of 7 February 2024. To calculate frequency, every
      scheduled arrival time per stop is considered, grouped by day of the week.
      The total daily count is just the number of scheduled arrivals for a day.
      The peak hour frequency is the highest number of buses in any one hour
      window. That window might not lined up perfectly on the hour -- a peak
      hour might occur from 8:25 to 9:25,for example.`),s=L(),f=S("p"),f.textContent=`There are known limitations with this layer, so please use caution when
      using these numbers. Some stops may not be shown at all. Frequency could
      be over- or under-counted, due to exceptions to the regular daily schedule
      of a service.`,i=L(),w(a.$$.fragment),A(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),$(e,f),$(e,i),v(a,e,null),u=!0},p(c,p){const _={};p&64&&(_.$$scope={dirty:p,ctx:c}),n.$set(_)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),k(n),k(a)}}}function vu(o){let e,l,t,n,r;return n=new qe({props:{colorScale:o[1],limits:o[2]}}),{c(){e=S("div"),l=S("p"),l.textContent="Peak hourly frequency:",t=L(),w(n.$$.fragment),A(e,"slot","controls")},m(s,f){d(s,e,f),$(e,l),$(e,t),v(n,e,null),r=!0},p:J,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){g(n.$$.fragment,s),r=!1},d(s){s&&h(e),k(n)}}}function ku(o){let e,l,t,n=o[5].stop_name+"",r,s,f,i,a,u=o[5].peak+"",c,p,_,b,C,T=o[5].peak_description+"",M,j,P,N,O,I=o[5].total+"",D,R,z=o[5].total_description+"",V,ie;return{c(){e=S("p"),l=y("Stop name: "),t=S("b"),r=y(n),s=L(),f=S("p"),i=y("Peak: "),a=S("b"),c=y(u),p=y(`
        buses during the busiest hour of any day`),_=L(),b=S("p"),C=y("The peak hour is "),M=y(T),j=L(),P=S("p"),N=y("Total buses per day: "),O=S("b"),D=y(I),R=y(`
        (for `),V=y(z),ie=y(", the busiest day of the week)")},m(F,X){d(F,e,X),$(e,l),$(e,t),$(t,r),d(F,s,X),d(F,f,X),$(f,i),$(f,a),$(a,c),$(f,p),d(F,_,X),d(F,b,X),$(b,C),$(b,M),d(F,j,X),d(F,P,X),$(P,N),$(P,O),$(O,D),$(P,R),$(P,V),$(P,ie)},p(F,X){X&32&&n!==(n=F[5].stop_name+"")&&G(r,n),X&32&&u!==(u=F[5].peak+"")&&G(c,u),X&32&&T!==(T=F[5].peak_description+"")&&G(M,T),X&32&&I!==(I=F[5].total+"")&&G(D,I),X&32&&z!==(z=F[5].total_description+"")&&G(V,z)},d(F){F&&(h(e),h(s),h(f),h(_),h(b),h(j),h(P))}}}function yu(o){let e,l;return e=new ae({props:{$$slots:{default:[ku,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Su(o){let e,l;const t=[q(Lt),{sourceLayer:Lt},{paint:{"circle-color":me(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[yu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new At({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&re(q(Lt)),s&0&&{sourceLayer:Lt},s&6&&{paint:{"circle-color":me(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Tu(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Lt,title:Cu,$$slots:{controls:[vu],help:[wu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Lt}.pmtiles`,$$slots:{default:[Su]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Lt="bus_stops",Cu="Bus stops";function Lu(o,e,l){let t,n=x.sequential_low_to_high,r=[0,3,10,20,30,100],s=pe(Lt);W(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Iu extends Z{constructor(e){super(),Q(this,e,Lu,Tu,Y,{})}}function Mu(o){let e;return{c(){e=y("crossing")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ou(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Mu]},$$scope:{ctx:o}}}),f=new xe({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),w(n.$$.fragment),r=y(" data from OpenStreetMap (as of 20 October 2024)."),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function ju(o){let e,l,t;return l=new Xt({props:{rows:o[2]}}),{c(){e=S("div"),w(l.$$.fragment),A(e,"slot","controls")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Nu(o){let e,l=Sl(o[4])+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=Sl(n[4])+"")&&G(t,l)},d(n){n&&h(e)}}}function Pu(o){let e,l;return e=new ae({props:{$$slots:{default:[Nu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ru(o){let e,l;const t=[q(It),{sourceLayer:It},{paint:{"circle-color":Xe(["get","crossing"],{traffic_signals:x.signalized_crossing},x.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Pu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new At({props:n}),e.$on("click",Au),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&re(q(It)),s&0&&{sourceLayer:It},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Du(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:It,title:Fu,$$slots:{controls:[ju],help:[Ou]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${It}.pmtiles`,$$slots:{default:[Ru]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let It="crossings",Fu="Crossings";function Sl(o){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[o.crossing]??`Unknown crossing type (${o.crossing})`}function Au(o){window.open(`http://openstreetmap.org/node/${o.detail.features[0].properties.osm_id}`,"_blank")}function Gu(o,e,l){let t,n=pe(It);W(o,n,f=>l(0,t=f));let r=[["Signalized",x.signalized_crossing],["Other",x.other_crossing]];function s(f){t=f,n.set(t)}return[t,n,r,s]}class qu extends Z{constructor(e){super(),Q(this,e,Gu,Du,Y,{})}}function zu(o){let e;return{c(){e=y("OS Terrain 50")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Hu(o){let e,l,t,n,r,s,f,i,a,u,c,p,_,b;return i=new le({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[zu]},$$scope:{ctx:o}}}),c=new Te({}),_=new xe({}),{c(){e=S("span"),l=S("p"),l.textContent=`This layer shows the steepness of roads, with the arrows pointing uphill.
      You have to zoom in to see all roads.`,t=L(),n=S("p"),n.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending on
      the underlying Digital Elevation Model used.`,r=L(),s=S("p"),f=y("This layer is built from "),w(i.$$.fragment),a=y(` and roads from OpenStreetMap. The data is valid as of 18 February
      2024.`),u=L(),w(c.$$.fragment),p=L(),w(_.$$.fragment),A(e,"slot","help")},m(C,T){d(C,e,T),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),v(i,s,null),$(s,a),$(e,u),v(c,e,null),$(e,p),v(_,e,null),b=!0},p(C,T){const M={};T&64&&(M.$$scope={dirty:T,ctx:C}),i.$set(M)},i(C){b||(m(i.$$.fragment,C),m(c.$$.fragment,C),m(_.$$.fragment,C),b=!0)},o(C){g(i.$$.fragment,C),g(c.$$.fragment,C),g(_.$$.fragment,C),b=!1},d(C){C&&h(e),k(i),k(c),k(_)}}}function Eu(o){let e,l,t,n,r;return l=new qe({props:{colorScale:o[1],limits:o[2]}}),{c(){e=S("span"),w(l.$$.fragment),t=L(),n=S("p"),n.innerHTML=`<img src="${no}" alt="arrow"/>
      Arrows point uphill`,A(e,"slot","controls")},m(s,f){d(s,e,f),v(l,e,null),$(e,t),$(e,n),r=!0},p:J,i(s){r||(m(l.$$.fragment,s),r=!0)},o(s){g(l.$$.fragment,s),r=!1},d(s){s&&h(e),k(l)}}}function Bu(o){let e,l,t,n=Math.abs(o[5].gradient)/100+"",r,s;return{c(){e=S("p"),l=y("Gradient: "),t=S("b"),r=y(n),s=y(`
        %`)},m(f,i){d(f,e,i),$(e,l),$(e,t),$(t,r),$(e,s)},p(f,i){i&32&&n!==(n=Math.abs(f[5].gradient)/100+"")&&G(r,n)},d(f){f&&h(e)}}}function Uu(o){let e,l;return e=new ae({props:{$$slots:{default:[Bu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Wu(o){let e,l,t,n;const r=[q(Ye),{sourceLayer:Ye},{manageHoverState:!0},{paint:{"line-color":me(["/",["abs",["get","gradient"]],100],o[2],o[1]),"line-width":Pe,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let s={$$slots:{default:[Uu]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new _e({props:s});const f=[q(Ye+"_arrows"),{sourceLayer:Ye},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new vn({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),n=!0},p(a,u){const c=u&7?ne(r,[u&0&&re(q(Ye)),u&0&&{sourceLayer:Ye},r[2],u&6&&{paint:{"line-color":me(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":Pe,"line-opacity":ee(1,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?ne(f,[u&0&&re(q(Ye+"_arrows")),u&0&&{sourceLayer:Ye},f[2],f[3],u&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),k(e,a),k(t,a)}}}function Yu(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Ye,title:Ju,$$slots:{controls:[Eu],help:[Hu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Ye}.pmtiles`,$$slots:{default:[Wu]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Ye="gradient",Ju="Gradients";function Vu(o,e,l){let t,n=x.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],s=pe(Ye);W(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Zu extends Z{constructor(e){super(),Q(this,e,Vu,Yu,Y,{})}}function Qu(o){let e,l;return{c(){e=S("img"),A(e,"slot","icon"),Vt(e.src,l=lo)||A(e,"src",l),A(e,"alt","a logo representing cycle parking")},m(t,n){d(t,e,n)},p:J,d(t){t&&h(e)}}}function Ku(o){let e;return{c(){e=y("OpenStreetMap")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Xu(o){let e;return{c(){e=y("OpenStreetMap Carto")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function xu(o){let e,l,t,n,r,s,f,i,a,u,c,p;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Ku]},$$scope:{ctx:o}}}),a=new le({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[Xu]},$$scope:{ctx:o}}}),c=new xe({}),{c(){e=S("span"),l=S("p"),t=y("Cycle parking, according to "),w(n.$$.fragment),r=y(` (as of 20 October 2024). The type of parking, public/private
      access, and whether it's covered are not shown.`),s=L(),f=S("p"),i=y("Icon from "),w(a.$$.fragment),u=L(),w(c.$$.fragment),A(e,"slot","help")},m(_,b){d(_,e,b),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),v(a,f,null),$(e,u),v(c,e,null),p=!0},p(_,b){const C={};b&16&&(C.$$scope={dirty:b,ctx:_}),n.$set(C);const T={};b&16&&(T.$$scope={dirty:b,ctx:_}),a.$set(T)},i(_){p||(m(n.$$.fragment,_),m(a.$$.fragment,_),m(c.$$.fragment,_),p=!0)},o(_){g(n.$$.fragment,_),g(a.$$.fragment,_),g(c.$$.fragment,_),p=!1},d(_){_&&h(e),k(n),k(a),k(c)}}}function ec(o){let e,l,t,n=(o[3].capacity??"unknown")+"",r;return{c(){e=S("p"),l=y("Capacity: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&8&&n!==(n=(s[3].capacity??"unknown")+"")&&G(r,n)},d(s){s&&h(e)}}}function tc(o){let e,l;return e=new ae({props:{$$slots:{default:[ec,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function nc(o){let e,l;const t=[q(Mt),{sourceLayer:Mt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[tc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new vn({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&re(q(Mt)),s&0&&{sourceLayer:Mt},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function lc(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Mt,title:rc,$$slots:{help:[xu],icon:[Qu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Mt}.pmtiles`,$$slots:{default:[nc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Mt="cycle_parking",rc="Cycle parking";function oc(o,e,l){let t,n=pe(Mt);W(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class sc extends Z{constructor(e){super(),Q(this,e,oc,lc,Y,{})}}function ic(o){let e,l,t,n,r;return n=new xe({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows different places of education according to OpenStreetMap (as of
      20 October 2024).`,t=L(),w(n.$$.fragment),A(e,"slot","help")},m(s,f){d(s,e,f),$(e,l),$(e,t),v(n,e,null),r=!0},p:J,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){g(n.$$.fragment,s),r=!1},d(s){s&&h(e),k(n)}}}function ac(o){let e,l,t;return e=new Se({props:{color:x.education.schools}}),{c(){w(e.$$.fragment),l=y(`
        Schools`)},m(n,r){v(e,n,r),d(n,l,r),t=!0},p:J,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),k(e,n)}}}function fc(o){let e,l,t;return e=new Se({props:{color:x.education.colleges}}),{c(){w(e.$$.fragment),l=y(`
        Colleges`)},m(n,r){v(e,n,r),d(n,l,r),t=!0},p:J,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),k(e,n)}}}function uc(o){let e,l,t;return e=new Se({props:{color:x.education.universities}}),{c(){w(e.$$.fragment),l=y(`
        Universities`)},m(n,r){v(e,n,r),d(n,l,r),t=!0},p:J,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),k(e,n)}}}function cc(o){let e,l,t,n,r,s,f,i,a;function u(T){o[3](T)}let c={$$slots:{default:[ac]},$$scope:{ctx:o}};o[0].school!==void 0&&(c.checked=o[0].school),e=new Je({props:c}),E.push(()=>B(e,"checked",u));function p(T){o[4](T)}let _={$$slots:{default:[fc]},$$scope:{ctx:o}};o[0].college!==void 0&&(_.checked=o[0].college),n=new Je({props:_}),E.push(()=>B(n,"checked",p));function b(T){o[5](T)}let C={$$slots:{default:[uc]},$$scope:{ctx:o}};return o[0].university!==void 0&&(C.checked=o[0].university),f=new Je({props:C}),E.push(()=>B(f,"checked",b)),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment),s=L(),w(f.$$.fragment)},m(T,M){v(e,T,M),d(T,t,M),v(n,T,M),d(T,s,M),v(f,T,M),a=!0},p(T,M){const j={};M&2048&&(j.$$scope={dirty:M,ctx:T}),!l&&M&1&&(l=!0,j.checked=T[0].school,U(()=>l=!1)),e.$set(j);const P={};M&2048&&(P.$$scope={dirty:M,ctx:T}),!r&&M&1&&(r=!0,P.checked=T[0].college,U(()=>r=!1)),n.$set(P);const N={};M&2048&&(N.$$scope={dirty:M,ctx:T}),!i&&M&1&&(i=!0,N.checked=T[0].university,U(()=>i=!1)),f.$set(N)},i(T){a||(m(e.$$.fragment,T),m(n.$$.fragment,T),m(f.$$.fragment,T),a=!0)},o(T){g(e.$$.fragment,T),g(n.$$.fragment,T),g(f.$$.fragment,T),a=!1},d(T){T&&(h(t),h(s)),k(e,T),k(n,T),k(f,T)}}}function $c(o){let e,l,t;return l=new Ge({props:{small:!0,$$slots:{default:[cc]},$$scope:{ctx:o}}}),{c(){e=S("div"),w(l.$$.fragment),A(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p(n,r){const s={};r&2049&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function pc(o){let e,l=(o[10].name??"Unnamed institution")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=(n[10].name??"Unnamed institution")+"")&&G(t,l)},d(n){n&&h(e)}}}function mc(o){let e,l;return e=new ae({props:{$$slots:{default:[pc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&3072&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function _c(o){let e,l;const t=[q(Ot),{sourceLayer:Ot},{paint:{"fill-color":Xe(["get","type"],{school:x.education.schools,college:x.education.colleges,university:x.education.universities},"grey"),"fill-opacity":ee(.7,1)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[2](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[mc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Re({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&5?ne(t,[s&0&&re(q(Ot)),s&0&&{sourceLayer:Ot},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&5&&{filter:r[2](r[0])},t[5],t[6]]):{};s&2048&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function gc(o){let e,l,t,n,r;function s(i){o[6](i)}let f={name:Ot,title:dc,$$slots:{controls:[$c],help:[ic]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Ot}.pmtiles`,$$slots:{default:[_c]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&2049&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Ot="education",dc="Education";function hc(o){return{show:!0,school:o.includes("school"),college:o.includes("college"),university:o.includes("university")}}function bc(o,e,l){let t,n=["school","college","university"],r={show:!1,school:!0,college:!0,university:!0};function s(_){return _.show?n.filter(b=>_[b]).join(","):null}let f=qt(Ot,r,s,hc);W(o,f,_=>l(0,t=_));function i(_){let b=n.filter(C=>_[C]);return["in",["get","type"],["literal",b]]}function a(_){o.$$.not_equal(t.school,_)&&(t.school=_,f.set(t))}function u(_){o.$$.not_equal(t.college,_)&&(t.college=_,f.set(t))}function c(_){o.$$.not_equal(t.university,_)&&(t.university=_,f.set(t))}function p(_){o.$$.not_equal(t.show,_)&&(t.show=_,f.set(t))}return[t,f,i,a,u,c,p]}class wc extends Z{constructor(e){super(),Q(this,e,bc,gc,Y,{})}}function vc(o){let e,l,t;return l=new Se({props:{color:x.hospitals}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function kc(o){let e;return{c(){e=y("hospital")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function yc(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[kc]},$$scope:{ctx:o}}}),f=new xe({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),w(n.$$.fragment),r=y(` data from OpenStreetMap (as of 20 October 2024). It doesn't
      include outpatient clinics or individual doctor's offices.`),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&16&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function Sc(o){let e,l=(o[3].name??"Unnamed hospital")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed hospital")+"")&&G(t,l)},d(n){n&&h(e)}}}function Tc(o){let e,l;return e=new ae({props:{$$slots:{default:[Sc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Cc(o){let e,l;const t=[q(jt),{sourceLayer:jt},{paint:{"fill-color":x.hospitals,"fill-opacity":ee(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Tc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Re({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&re(q(jt)),s&0&&{sourceLayer:jt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Lc(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:jt,title:Ic,$$slots:{help:[yc],icon:[vc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${jt}.pmtiles`,$$slots:{default:[Cc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let jt="hospitals",Ic="Hospitals";function Mc(o,e,l){let t,n=pe(jt);W(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Oc extends Z{constructor(e){super(),Q(this,e,Mc,Lc,Y,{})}}function jc(o){let e,l;return{c(){e=S("img"),A(e,"slot","icon"),Vt(e.src,l=ro)||A(e,"src",l),A(e,"alt","A logo representing a train")},m(t,n){d(t,e,n)},p:J,d(t){t&&h(e)}}}function Nc(o){let e;return{c(){e=y("railway station")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Pc(o){let e;return{c(){e=y(`National Rail
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Rc(o){let e,l,t,n,r,s,f,i,a,u,c,p,_;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Nc]},$$scope:{ctx:o}}}),a=new le({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[Pc]},$$scope:{ctx:o}}}),p=new xe({}),{c(){e=S("div"),l=S("p"),t=y("This shows "),w(n.$$.fragment),r=y(" data from OpenStreetMap (as of 20 October 2024)."),s=L(),f=S("p"),i=y("Icon from "),w(a.$$.fragment),u=y(". (Note that not all stations shown are National Rail.)"),c=L(),w(p.$$.fragment),A(e,"slot","help")},m(b,C){d(b,e,C),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),v(a,f,null),$(f,u),$(e,c),v(p,e,null),_=!0},p(b,C){const T={};C&16&&(T.$$scope={dirty:C,ctx:b}),n.$set(T);const M={};C&16&&(M.$$scope={dirty:C,ctx:b}),a.$set(M)},i(b){_||(m(n.$$.fragment,b),m(a.$$.fragment,b),m(p.$$.fragment,b),_=!0)},o(b){g(n.$$.fragment,b),g(a.$$.fragment,b),g(p.$$.fragment,b),_=!1},d(b){b&&h(e),k(n),k(a),k(p)}}}function Dc(o){let e,l=(o[3].name??"Unnamed railway station")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed railway station")+"")&&G(t,l)},d(n){n&&h(e)}}}function Fc(o){let e,l;return e=new ae({props:{$$slots:{default:[Dc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ac(o){let e,l;const t=[q(Qt),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Fc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new vn({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&re(q(Qt)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Gc(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Qt,title:qc,$$slots:{help:[Rc],icon:[jc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new Gt({props:{data:`${ce()}/v1/${Qt}.geojson`,$$slots:{default:[Ac]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Qt="railway_stations",qc="Railway stations";function zc(o,e,l){let t,n=pe(Qt);W(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Hc extends Z{constructor(e){super(),Q(this,e,zc,Gc,Y,{})}}function Ec(o){let e,l,t;return l=new Se({props:{color:x.sports_spaces}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Bc(o){let e;return{c(){e=y("sports pitches")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Uc(o){let e;return{c(){e=y("sports centres")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Wc(o){let e,l,t,n,r,s,f,i,a,u;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Bc]},$$scope:{ctx:o}}}),s=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Uc]},$$scope:{ctx:o}}}),a=new xe({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),w(n.$$.fragment),r=y(" and "),w(s.$$.fragment),f=y(" data from OpenStreetMap (as of 20 October 2024)."),i=L(),w(a.$$.fragment),A(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(l,t),v(n,l,null),$(l,r),v(s,l,null),$(l,f),$(e,i),v(a,e,null),u=!0},p(c,p){const _={};p&16&&(_.$$scope={dirty:p,ctx:c}),n.$set(_);const b={};p&16&&(b.$$scope={dirty:p,ctx:c}),s.$set(b)},i(c){u||(m(n.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(s.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),k(n),k(s),k(a)}}}function Yc(o){let e,l=(o[3].name??"Unnamed sports space")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed sports space")+"")&&G(t,l)},d(n){n&&h(e)}}}function Jc(o){let e,l;return e=new ae({props:{$$slots:{default:[Yc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Vc(o){let e,l;const t=[q(Nt),{sourceLayer:Nt},{paint:{"fill-color":x.sports_spaces,"fill-opacity":ee(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Jc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Re({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&re(q(Nt)),s&0&&{sourceLayer:Nt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Zc(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Nt,title:Qc,$$slots:{help:[Wc],icon:[Ec]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Nt}.pmtiles`,$$slots:{default:[Vc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Nt="sports_spaces",Qc="Sports spaces";function Kc(o,e,l){let t,n=pe(Nt);W(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Xc extends Z{constructor(e){super(),Q(this,e,Kc,Zc,Y,{})}}function xc(o){let e;return{c(){e=y("DfT stats19")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function e$(o){let e;return{c(){e=y("documented by DfT")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function t$(o){let e,l,t,n,r,s,f,i,a,u,c,p,_,b,C,T,M,j,P,N,O,I,D,R;return n=new le({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[xc]},$$scope:{ctx:o}}}),j=new le({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[e$]},$$scope:{ctx:o}}}),D=new Te({}),{c(){e=S("span"),l=S("p"),t=y("This layer shows collisions recorded in the "),w(n.$$.fragment),r=y(" dataset, as of 30 September 2024. Please note these limitations:"),s=L(),f=S("ul"),i=S("li"),i.textContent="Only collisions between 2017 and 2023 are included",a=L(),u=S("li"),u.textContent=`This tool is intended to be used at high-zoom levels, while inspecting a
        scheme or development area. Not all points are shown at lower zoom
        levels. Do not use this to look for trends across a city or region
        scale.`,c=L(),p=S("li"),p.textContent=`Approximately 150 collisions from the source data aren't included, due
        to problems with the recorded location`,_=L(),b=S("li"),b.textContent='The "pedestrians" category also include mobility scooters',C=L(),T=S("li"),M=y("All limitations "),w(j.$$.fragment),P=y(` also apply. Not all collisions or near misses are reported.
        There's nuance with the severity categories.`),N=L(),O=S("p"),O.textContent="You can click a point to open the full report, thanks to CycleStreets.",I=L(),w(D.$$.fragment),A(e,"slot","help")},m(z,V){d(z,e,V),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),$(f,a),$(f,u),$(f,c),$(f,p),$(f,_),$(f,b),$(f,C),$(f,T),$(T,M),v(j,T,null),$(T,P),$(e,N),$(e,O),$(e,I),v(D,e,null),R=!0},p(z,V){const ie={};V&4194304&&(ie.$$scope={dirty:V,ctx:z}),n.$set(ie);const F={};V&4194304&&(F.$$scope={dirty:V,ctx:z}),j.$set(F)},i(z){R||(m(n.$$.fragment,z),m(j.$$.fragment,z),m(D.$$.fragment,z),R=!0)},o(z){g(n.$$.fragment,z),g(j.$$.fragment,z),g(D.$$.fragment,z),R=!1},d(z){z&&h(e),k(n),k(j),k(D)}}}function n$(o){let e;return{c(){e=y("Pedestrians")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function l$(o){let e;return{c(){e=y("Cyclists")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function r$(o){let e;return{c(){e=y("Horse riders")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function o$(o){let e;return{c(){e=y("Other")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function s$(o){let e,l,t,n,r,s,f,i,a,u,c,p;function _(O){o[10](O)}let b={$$slots:{default:[n$]},$$scope:{ctx:o}};o[0].pedestrians!==void 0&&(b.checked=o[0].pedestrians),e=new Je({props:b}),E.push(()=>B(e,"checked",_));function C(O){o[11](O)}let T={$$slots:{default:[l$]},$$scope:{ctx:o}};o[0].cyclists!==void 0&&(T.checked=o[0].cyclists),n=new Je({props:T}),E.push(()=>B(n,"checked",C));function M(O){o[12](O)}let j={$$slots:{default:[r$]},$$scope:{ctx:o}};o[0].horseRiders!==void 0&&(j.checked=o[0].horseRiders),f=new Je({props:j}),E.push(()=>B(f,"checked",M));function P(O){o[13](O)}let N={$$slots:{default:[o$]},$$scope:{ctx:o}};return o[0].other!==void 0&&(N.checked=o[0].other),u=new Je({props:N}),E.push(()=>B(u,"checked",P)),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment),s=L(),w(f.$$.fragment),a=L(),w(u.$$.fragment)},m(O,I){v(e,O,I),d(O,t,I),v(n,O,I),d(O,s,I),v(f,O,I),d(O,a,I),v(u,O,I),p=!0},p(O,I){const D={};I&4194304&&(D.$$scope={dirty:I,ctx:O}),!l&&I&1&&(l=!0,D.checked=O[0].pedestrians,U(()=>l=!1)),e.$set(D);const R={};I&4194304&&(R.$$scope={dirty:I,ctx:O}),!r&&I&1&&(r=!0,R.checked=O[0].cyclists,U(()=>r=!1)),n.$set(R);const z={};I&4194304&&(z.$$scope={dirty:I,ctx:O}),!i&&I&1&&(i=!0,z.checked=O[0].horseRiders,U(()=>i=!1)),f.$set(z);const V={};I&4194304&&(V.$$scope={dirty:I,ctx:O}),!c&&I&1&&(c=!0,V.checked=O[0].other,U(()=>c=!1)),u.$set(V)},i(O){p||(m(e.$$.fragment,O),m(n.$$.fragment,O),m(f.$$.fragment,O),m(u.$$.fragment,O),p=!0)},o(O){g(e.$$.fragment,O),g(n.$$.fragment,O),g(f.$$.fragment,O),g(u.$$.fragment,O),p=!1},d(O){O&&(h(t),h(s),h(a)),k(e,O),k(n,O),k(f,O),k(u,O)}}}function i$(o){let e,l,t,n,r,s,f,i,a,u,c,p,_;return l=new Ge({props:{small:!0,$$slots:{default:[s$]},$$scope:{ctx:o}}}),u=new Xt({props:{rows:o[9]}}),{c(){e=S("div"),w(l.$$.fragment),t=L(),n=S("div"),r=y(`Filter years:
      `),s=S("input"),f=y(`
      -
      `),i=S("input"),a=L(),w(u.$$.fragment),A(s,"type","number"),A(s,"min",2017),A(s,"max",2023),A(s,"class","svelte-1ft65rw"),A(i,"type","number"),A(i,"min",2017),A(i,"max",2023),A(i,"class","svelte-1ft65rw"),A(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(b,C){d(b,e,C),v(l,e,null),$(e,t),$(e,n),$(n,r),$(n,s),Ze(s,o[0].minYear),$(n,f),$(n,i),Ze(i,o[0].maxYear),$(e,a),v(u,e,null),c=!0,p||(_=[ft(s,"input",o[14]),ft(i,"input",o[15])],p=!0)},p(b,C){const T={};C&4194305&&(T.$$scope={dirty:C,ctx:b}),l.$set(T),C&1&&Zt(s.value)!==b[0].minYear&&Ze(s,b[0].minYear),C&1&&Zt(i.value)!==b[0].maxYear&&Ze(i,b[0].maxYear)},i(b){c||(m(l.$$.fragment,b),m(u.$$.fragment,b),c=!0)},o(b){g(l.$$.fragment,b),g(u.$$.fragment,b),c=!1},d(b){b&&h(e),k(l),k(u),p=!1,gr(_)}}}function Tl(o){let e,l,t,n=o[3][o[21].pedestrian_location]+"",r;return{c(){e=S("p"),l=y("Pedestrian location: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&2097152&&n!==(n=s[3][s[21].pedestrian_location]+"")&&G(r,n)},d(s){s&&h(e)}}}function Cl(o){let e,l,t,n=o[4][o[21].pedestrian_movement]+"",r;return{c(){e=S("p"),l=y("Pedestrian movement: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&2097152&&n!==(n=s[4][s[21].pedestrian_movement]+"")&&G(r,n)},d(s){s&&h(e)}}}function a$(o){let e,l,t,n=o[21].year+"",r,s,f,i,a,u=o[5][o[21].severity]+"",c,p,_,b,C,T=Ll(o[21])+"",M,j,P,N,O,I=o[21].pedestrian_location&&Tl(o),D=o[21].pedestrian_movement&&Cl(o);return{c(){e=S("p"),l=y("Year: "),t=S("b"),r=y(n),s=L(),f=S("p"),i=y("Severity: "),a=S("b"),c=y(u),p=L(),_=S("p"),b=y("Casualties: "),C=S("b"),M=y(T),j=L(),I&&I.c(),P=L(),D&&D.c(),N=L(),O=S("p"),O.textContent="Click to open full report in CycleStreets"},m(R,z){d(R,e,z),$(e,l),$(e,t),$(t,r),d(R,s,z),d(R,f,z),$(f,i),$(f,a),$(a,c),d(R,p,z),d(R,_,z),$(_,b),$(_,C),$(C,M),d(R,j,z),I&&I.m(R,z),d(R,P,z),D&&D.m(R,z),d(R,N,z),d(R,O,z)},p(R,z){z&2097152&&n!==(n=R[21].year+"")&&G(r,n),z&2097152&&u!==(u=R[5][R[21].severity]+"")&&G(c,u),z&2097152&&T!==(T=Ll(R[21])+"")&&G(M,T),R[21].pedestrian_location?I?I.p(R,z):(I=Tl(R),I.c(),I.m(P.parentNode,P)):I&&(I.d(1),I=null),R[21].pedestrian_movement?D?D.p(R,z):(D=Cl(R),D.c(),D.m(N.parentNode,N)):D&&(D.d(1),D=null)},d(R){R&&(h(e),h(s),h(f),h(p),h(_),h(j),h(P),h(N),h(O)),I&&I.d(R),D&&D.d(R)}}}function f$(o){let e,l;return e=new ae({props:{$$slots:{default:[a$,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&6291456&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function u$(o){let e,l;const t=[q(Pt),{sourceLayer:Pt},{paint:{"circle-color":me(["get","severity"],[1,2,3],[o[6],o[7],o[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:o[1]},{layout:{visibility:o[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[f$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new At({props:n}),e.$on("click",m$),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&451?ne(t,[s&0&&re(q(Pt)),s&0&&{sourceLayer:Pt},s&448&&{paint:{"circle-color":me(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&2&&{filter:r[1]},s&1&&{layout:{visibility:r[0].show?"visible":"none"}},t[5],t[6]]):{};s&4194304&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function c$(o){let e,l,t,n,r;function s(i){o[16](i)}let f={name:Pt,title:$$,$$slots:{controls:[i$],help:[t$]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Pt}.pmtiles`,$$slots:{default:[u$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&4194305&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&4194307&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Pt="stats19",$$="Stats19";function p$(o){let[e,l,t]=o.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function Ll(o){let e=[];return o.pedestrian&&e.push("pedestrian"),o.cyclist&&e.push("cyclist"),o.horse_rider&&e.push("horse rider"),o.other&&e.push("other"),e.join(", ")}function m$(o){window.open(`https://www.cyclestreets.net/collisions/reports/${o.detail.features[0].properties.accident_index}`,"_blank")}function _$(o,e,l){let t,n,r=["pedestrians","cyclists","horseRiders","other"],s={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2023};function f(R){return R.show?`${r.filter(V=>R[V]).join(",")}/${R.minYear}/${R.maxYear}`:null}let i=qt(Pt,s,f,p$);W(o,i,R=>l(0,n=R));function a(R,z,V,ie,F,X){let H=["any"];return n.pedestrians&&H.push(["get","pedestrian"]),n.cyclists&&H.push(["get","cyclist"]),n.horseRiders&&H.push(["get","horse_rider"]),n.other&&H.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],H]}let u={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},p={1:"Fatal",2:"Serious",3:"Slight"},_=x.sequential_low_to_high[4],b=x.sequential_low_to_high[2],C=x.sequential_low_to_high[0],T=[["Fatal",_],["Serious",b],["Slight",C]];function M(R){o.$$.not_equal(n.pedestrians,R)&&(n.pedestrians=R,i.set(n))}function j(R){o.$$.not_equal(n.cyclists,R)&&(n.cyclists=R,i.set(n))}function P(R){o.$$.not_equal(n.horseRiders,R)&&(n.horseRiders=R,i.set(n))}function N(R){o.$$.not_equal(n.other,R)&&(n.other=R,i.set(n))}function O(){n.minYear=Zt(this.value),i.set(n)}function I(){n.maxYear=Zt(this.value),i.set(n)}function D(R){o.$$.not_equal(n.show,R)&&(n.show=R,i.set(n))}return o.$$.update=()=>{o.$$.dirty&1&&l(1,t=a(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,i,u,c,p,_,b,C,T,M,j,P,N,O,I,D]}class g$ extends Z{constructor(e){super(),Q(this,e,_$,c$,Y,{})}}function d$(o){let e;return{c(){e=y(`DfT road statistics
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function h$(o){let e;return{c(){e=y("methodology")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function b$(o){let e,l,t,n,r,s,f,i,a,u,c,p;return n=new le({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[d$]},$$scope:{ctx:o}}}),s=new le({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[h$]},$$scope:{ctx:o}}}),c=new Te({}),{c(){e=S("span"),l=S("p"),t=y("AADF (annual average daily flow) data from "),w(n.$$.fragment),r=y(`. This counts the total daily number of vehicles traveling
      past a count point (in both directions) on an average day of the year.
      Data from the latest year available is shown. See `),w(s.$$.fragment),f=y(" for details and caveats about the measurements."),i=L(),a=S("p"),a.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
      thicker when the latest data is a manual or automatic count, and thinner
      when it's an estimate from previous years or nearby counters. Click a
      point for full data.`,u=L(),w(c.$$.fragment),A(e,"slot","help")},m(_,b){d(_,e,b),$(e,l),$(l,t),v(n,l,null),$(l,r),v(s,l,null),$(l,f),$(e,i),$(e,a),$(e,u),v(c,e,null),p=!0},p(_,b){const C={};b&128&&(C.$$scope={dirty:b,ctx:_}),n.$set(C);const T={};b&128&&(T.$$scope={dirty:b,ctx:_}),s.$set(T)},i(_){p||(m(n.$$.fragment,_),m(s.$$.fragment,_),m(c.$$.fragment,_),p=!0)},o(_){g(n.$$.fragment,_),g(s.$$.fragment,_),g(c.$$.fragment,_),p=!1},d(_){_&&h(e),k(n),k(s),k(c)}}}function w$(o){let e,l,t;return l=new qe({props:{colorScale:o[1],limits:o[3]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","controls")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function v$(o){let e,l=o[6].location+"",t,n,r,s,f=o[6].year+"",i,a,u,c=o[6].motor_vehicles.toLocaleString()+"",p,_,b,C,T=o[6].year+"",M,j,P,N=o[6].pedal_cycles.toLocaleString()+"",O,I,D,R,z,V=o[6].method+"",ie;return{c(){e=S("h2"),t=y(l),n=L(),r=S("p"),s=y("Total motor vehicles ("),i=y(f),a=y(` AADF):
        `),u=S("b"),p=y(c),_=L(),b=S("p"),C=y("Total pedal cycles ("),M=y(T),j=y(` AADF):
        `),P=S("b"),O=y(N),I=L(),D=S("p"),R=y("Count method: "),z=S("b"),ie=y(V)},m(F,X){d(F,e,X),$(e,t),d(F,n,X),d(F,r,X),$(r,s),$(r,i),$(r,a),$(r,u),$(u,p),d(F,_,X),d(F,b,X),$(b,C),$(b,M),$(b,j),$(b,P),$(P,O),d(F,I,X),d(F,D,X),$(D,R),$(D,z),$(z,ie)},p(F,X){X&64&&l!==(l=F[6].location+"")&&G(t,l),X&64&&f!==(f=F[6].year+"")&&G(i,f),X&64&&c!==(c=F[6].motor_vehicles.toLocaleString()+"")&&G(p,c),X&64&&T!==(T=F[6].year+"")&&G(M,T),X&64&&N!==(N=F[6].pedal_cycles.toLocaleString()+"")&&G(O,N),X&64&&V!==(V=F[6].method+"")&&G(ie,V)},d(F){F&&(h(e),h(n),h(r),h(_),h(b),h(I),h(D))}}}function k$(o){let e,l;return e=new ae({props:{$$slots:{default:[v$,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&192&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function y$(o){let e,l;const t=[q(Rt),{sourceLayer:Rt},{paint:{"circle-color":me(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[k$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new At({props:n}),e.$on("click",C$),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&re(q(Rt)),s&0&&{sourceLayer:Rt},s&6&&{paint:{"circle-color":me(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&128&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function S$(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Rt,title:T$,$$slots:{controls:[w$],help:[b$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Rt}.pmtiles`,$$slots:{default:[y$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&128&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&129&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Rt="vehicle_counts",T$="Vehicle counts";function C$(o){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${o.detail.features[0].properties.count_point}`,"_blank")}function L$(o,e,l){let t,n=["green","orange","red","black"],r=[0,2500,8e3,15e3,205e3],s=["0-2.5k","2.5-8k","8-15k",">15k"],f=pe(Rt);W(o,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,s,f,i]}class I$ extends Z{constructor(e){super(),Q(this,e,L$,S$,Y,{})}}function Il(o,e,l){const t=o.slice();return t[6]=e[l],t}function M$(o){let e;return{c(){e=S("span"),e.innerHTML=`<p>Critical issues and policy conflicts from the Design Assistance Log. This
      is internally collected data.</p> <p>This layer is manually copied from a copy of the DA Log. The data is
      recent as of 10 June 2024.</p>`,A(e,"slot","help")},m(l,t){d(l,e,t)},p:J,d(l){l&&h(e)}}}function O$(o){let e,l,t;return l=new Xt({props:{rows:o[3]}}),{c(){e=S("div"),w(l.$$.fragment),A(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function j$(o){let e,l=o[5]["Issue ID"]+"",t,n,r=o[5].Code+"",s,f,i,a=o[5]["Issue Stage"]+"",u;return{c(){e=S("h2"),t=y(l),n=y(" - "),s=y(r),f=L(),i=S("p"),u=y(a)},m(c,p){d(c,e,p),$(e,t),$(e,n),$(e,s),d(c,f,p),d(c,i,p),$(i,u)},p(c,p){p&32&&l!==(l=c[5]["Issue ID"]+"")&&G(t,l),p&32&&r!==(r=c[5].Code+"")&&G(s,r),p&32&&a!==(a=c[5]["Issue Stage"]+"")&&G(u,a)},d(c){c&&(h(e),h(f),h(i))}}}function Ml(o){let e,l=o[6]+"",t,n,r,s=o[5][o[6]]+"",f,i;return{c(){e=S("p"),t=y(l),n=y(`:
            `),r=S("b"),f=y(s),i=L()},m(a,u){d(a,e,u),$(e,t),$(e,n),$(e,r),$(r,f),$(e,i)},p(a,u){u&32&&s!==(s=a[5][a[6]]+"")&&G(f,s)},d(a){a&&h(e)}}}function N$(o){let e,l=he(o[2]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Ml(Il(o,l,n));return{c(){e=S("div");for(let n=0;n<t.length;n+=1)t[n].c();se(e,"max-width","30vw"),se(e,"max-height","60vh"),se(e,"overflow","auto")},m(n,r){d(n,e,r);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(n,r){if(r&36){l=he(n[2]);let s;for(s=0;s<l.length;s+=1){const f=Il(n,l,s);t[s]?t[s].p(f,r):(t[s]=Ml(f),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=l.length}},d(n){n&&h(e),Ke(t,n)}}}function P$(o){let e,l,t,n;return e=new ae({props:{openOn:"hover",$$slots:{default:[j$,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[N$,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){v(e,r,s),d(r,l,s),v(t,r,s),n=!0},p(r,s){const f={};s&544&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&544&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),k(e,r),k(t,r)}}}function R$(o){let e,l;const t=[q(ln),{paint:{"circle-color":Xe(["get","Design Review Status"],Object.fromEntries(o[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[P$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new At({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&9?ne(t,[s&0&&re(q(ln)),s&8&&{paint:{"circle-color":Xe(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[3],t[4]]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function D$(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:ln,title:F$,$$slots:{controls:[O$],help:[M$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new Gt({props:{data:`${Kt()}/v1/problems.geojson.gz`,$$slots:{default:[R$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&512&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let ln="problems",F$="Issues & Conflicts";function A$(o,e,l){let t,n=pe(ln);W(o,n,i=>l(0,t=i));let r=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],s=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function f(i){t=i,n.set(t)}return[t,n,r,s,f]}class G$ extends Z{constructor(e){super(),Q(this,e,A$,D$,Y,{})}}function q$(o){let e;function l(r,s){return r[2]<=100?E$:H$}let t=l(o),n=t(o);return{c(){n.c(),e=ve()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},i:J,o:J,d(r){r&&h(e),n.d(r)}}}function z$(o){let e,l;return e=new Fe({props:{$$slots:{default:[B$]},$$scope:{ctx:o}}}),e.$on("click",o[3]),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function H$(o){let e;return{c(){e=S("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){d(l,e,t)},p:J,d(l){l&&h(e)}}}function E$(o){let e,l,t;return{c(){e=S("label"),l=y(`Downloading scheme data
      `),t=S("progress"),t.value=o[2],A(t,"class","svelte-q3473n")},m(n,r){d(n,e,r),$(e,l),$(e,t)},p(n,r){r&4&&(t.value=n[2])},d(n){n&&h(e)}}}function B$(o){let e;return{c(){e=y("Load latest scheme data")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function U$(o){let e,l,t,n;const r=[z$,q$],s=[];function f(i,a){return i[0]?i[1]?1:-1:0}return~(e=f(o))&&(l=s[e]=r[e](o)),{c(){l&&l.c(),t=ve()},m(i,a){~e&&s[e].m(i,a),d(i,t,a),n=!0},p(i,[a]){let u=e;e=f(i),e===u?~e&&s[e].p(i,a):(l&&(be(),g(s[u],1,1,()=>{s[u]=null}),we()),~e?(l=s[e],l?l.p(i,a):(l=s[e]=r[e](i),l.c()),m(l,1),l.m(t.parentNode,t)):l=null)},i(i){n||(m(l),n=!0)},o(i){g(l),n=!1},d(i){i&&h(t),~e&&s[e].d(i)}}}function W$(o,e,l){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),r=!0,s=0;async function f(){let a=await Pr(`${Kt()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,s=c)});l(2,s=100);let u=new TextDecoder().decode(a);t("all_schemes_output.geojson",u),l(1,r=!1)}dr(async()=>{n&&await f()});async function i(){l(0,n=!0),await f()}return o.$$set=a=>{"loadFile"in a&&l(4,t=a.loadFile)},[n,r,s,i,t]}class Y$ extends Z{constructor(e){super(),Q(this,e,W$,U$,Y,{loadFile:4})}}const rn=Ae({type:"FeatureCollection",features:[],schemes:{}}),Ol=Ae(""),jl=Ae(""),_n=Ae({type:"FeatureCollection",features:[],schemes:{}}),Nl=Ae(""),Pl=Ae("");function Rl(o){let e={type:"FeatureCollection",features:[],schemes:{},notes:o.notes},l={type:"FeatureCollection",features:[],schemes:{},notes:o.notes};for(let[t,n]of Object.entries(o.schemes))n.pipeline?l.schemes[t]=n:e.schemes[t]=n;for(let t of o.features){if(!J$(t))continue;let n=t.properties.scheme_reference,r=Object.hasOwn(e.schemes,n),s=r?e.schemes[n]:l.schemes[n];s.browse&&(t.properties.funding_programme=s.browse.funding_programme,t.properties.current_milestone=s.browse.current_milestone);let f=r?e:l;t.id=f.features.length+1,f.features.push(t)}rn.set(e),_n.set(l)}function J$(o){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(o.properties.id)}function V$(){let o={type:"FeatureCollection",features:[],schemes:{},notes:["These schemes are everything you've drawn in this browser using Scheme Sketcher. The data source and accuracy depend on whatever files you imported, created, or edited yourself."]};for(let l=0;l<window.localStorage.length;l++){let t=window.localStorage.key(l),n=t.split("/");if(!(n.length!=3||n[0]!="sketch"))try{let r=JSON.parse(window.localStorage.getItem(t));if(r.features.length==0)continue;for(let s of Object.values(r.schemes))s.browse={authority_or_region:n[1]};o.schemes={...o.schemes,...r.schemes},o.features=[...o.features,...r.features]}catch{}}let e=1;for(let l of o.features)l.id=e++;return o}let Ut={ATF2:"#66c2a5","ATF2 or ATF3":"#fc8d62",ATF3:"#8da0cb",ATF4:"#e78ac3",ATF4E:"#a6d854"},gn={removed:"grey","no data":"grey","not progressed":"red",superseded:"red","preliminary design completed":"#fbb862","feasability design completed":"#eddc76","detailed design completed":"#dafd9d","consruction started":"#76c384","construction completed":"#488f31"};function Dl(o,e,l){const t=o.slice();return t[27]=e[l],t[28]=e,t[29]=l,t}function Z$(o){let e;return{c(){e=y("Filters")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Q$(o){let e;return{c(){e=y("Reset all filters")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function K$(o){let e,l,t,n,r,s,f,i;e=new $n({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[ep]},$$scope:{ctx:o}}});function a(_){o[22](_)}let u={label:"Scheme name or reference",options:on(o[0])};o[1]!==void 0&&(u.value=o[1]),t=new Tr({props:u}),E.push(()=>B(t,"value",a));function c(_){o[23](_)}let p={label:"Authority or region",choices:o[10],emptyOption:!0};return o[4]!==void 0&&(p.value=o[4]),s=new Ft({props:p}),E.push(()=>B(s,"value",c)),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),r=L(),w(s.$$.fragment)},m(_,b){v(e,_,b),d(_,l,b),v(t,_,b),d(_,r,b),v(s,_,b),i=!0},p(_,b){const C={};b&1073741828&&(C.$$scope={dirty:b,ctx:_}),e.$set(C);const T={};b&1&&(T.options=on(_[0])),!n&&b&2&&(n=!0,T.value=_[1],U(()=>n=!1)),t.$set(T);const M={};b&1024&&(M.choices=_[10]),!f&&b&16&&(f=!0,M.value=_[4],U(()=>f=!1)),s.$set(M)},i(_){i||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(s.$$.fragment,_),i=!0)},o(_){g(e.$$.fragment,_),g(t.$$.fragment,_),g(s.$$.fragment,_),i=!1},d(_){_&&(h(l),h(r)),k(e,_),k(t,_),k(s,_)}}}function X$(o){let e,l,t,n,r,s,f,i,a,u,c,p,_,b,C,T;t=new $n({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[np]},$$scope:{ctx:o}}});function M(D){o[16](D)}let j={label:"Scheme name or reference",options:on(o[0])};o[1]!==void 0&&(j.value=o[1]),r=new Tr({props:j}),E.push(()=>B(r,"value",M));function P(D){o[17](D)}let N={label:"Authority or region",choices:o[10],emptyOption:!0};o[4]!==void 0&&(N.value=o[4]),i=new Ft({props:N}),E.push(()=>B(i,"value",P)),p=new $n({props:{label:"Funding programmes",id:"filterFundingProgrammes",$$slots:{default:[op]},$$scope:{ctx:o}}});function O(D){o[19](D)}let I={label:"Current milestone",choices:o[11],emptyOption:!0};return o[6]!==void 0&&(I.value=o[6]),b=new Ft({props:I}),E.push(()=>B(b,"value",O)),{c(){e=S("div"),l=S("div"),w(t.$$.fragment),n=L(),w(r.$$.fragment),f=L(),w(i.$$.fragment),u=L(),c=S("div"),w(p.$$.fragment),_=L(),w(b.$$.fragment),A(l,"class","govuk-grid-column-one-half"),A(c,"class","govuk-grid-column-one-half"),A(e,"class","govuk-grid-row")},m(D,R){d(D,e,R),$(e,l),v(t,l,null),$(l,n),v(r,l,null),$(l,f),v(i,l,null),$(e,u),$(e,c),v(p,c,null),$(c,_),v(b,c,null),T=!0},p(D,R){const z={};R&1073741828&&(z.$$scope={dirty:R,ctx:D}),t.$set(z);const V={};R&1&&(V.options=on(D[0])),!s&&R&2&&(s=!0,V.value=D[1],U(()=>s=!1)),r.$set(V);const ie={};R&1024&&(ie.choices=D[10]),!a&&R&16&&(a=!0,ie.value=D[4],U(()=>a=!1)),i.$set(ie);const F={};R&1073741856&&(F.$$scope={dirty:R,ctx:D}),p.$set(F);const X={};!C&&R&64&&(C=!0,X.value=D[6],U(()=>C=!1)),b.$set(X)},i(D){T||(m(t.$$.fragment,D),m(r.$$.fragment,D),m(i.$$.fragment,D),m(p.$$.fragment,D),m(b.$$.fragment,D),T=!0)},o(D){g(t.$$.fragment,D),g(r.$$.fragment,D),g(i.$$.fragment,D),g(p.$$.fragment,D),g(b.$$.fragment,D),T=!1},d(D){D&&h(e),k(t),k(r),k(i),k(p),k(b)}}}function x$(o){let e;return{c(){e=y("Clear")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ep(o){let e,l,t,n,r,s;return t=new Fe({props:{$$slots:{default:[x$]},$$scope:{ctx:o}}}),t.$on("click",o[21]),{c(){e=S("input"),l=L(),w(t.$$.fragment),A(e,"type","text"),A(e,"class","govuk-input govuk-input--width-10"),A(e,"id","filterInterventionText")},m(f,i){d(f,e,i),Ze(e,o[2]),d(f,l,i),v(t,f,i),n=!0,r||(s=ft(e,"input",o[20]),r=!0)},p(f,i){i&4&&e.value!==f[2]&&Ze(e,f[2]);const a={};i&1073741824&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){g(t.$$.fragment,f),n=!1},d(f){f&&(h(e),h(l)),k(t,f),r=!1,s()}}}function tp(o){let e;return{c(){e=y("Clear")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function np(o){let e,l,t,n,r,s;return t=new Fe({props:{$$slots:{default:[tp]},$$scope:{ctx:o}}}),t.$on("click",o[15]),{c(){e=S("input"),l=L(),w(t.$$.fragment),A(e,"type","text"),A(e,"class","govuk-input govuk-input--width-10"),A(e,"id","filterInterventionText")},m(f,i){d(f,e,i),Ze(e,o[2]),d(f,l,i),v(t,f,i),n=!0,r||(s=ft(e,"input",o[14]),r=!0)},p(f,i){i&4&&e.value!==f[2]&&Ze(e,f[2]);const a={};i&1073741824&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){g(t.$$.fragment,f),n=!1},d(f){f&&(h(e),h(l)),k(t,f),r=!1,s()}}}function lp(o){let e=o[27]+"",l,t;return{c(){l=y(e),t=L()},m(n,r){d(n,l,r),d(n,t,r)},p:J,d(n){n&&(h(l),h(t))}}}function Fl(o){let e,l,t;function n(s){o[18](s,o[27])}let r={$$slots:{default:[lp]},$$scope:{ctx:o}};return o[5][o[27]]!==void 0&&(r.checked=o[5][o[27]]),e=new Je({props:r}),E.push(()=>B(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){o=s;const i={};f&1073741824&&(i.$$scope={dirty:f,ctx:o}),!l&&f&32&&(l=!0,i.checked=o[5][o[27]],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function rp(o){let e,l,t=he(Object.keys(Ut)),n=[];for(let s=0;s<t.length;s+=1)n[s]=Fl(Dl(o,t,s));const r=s=>g(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ve()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);d(s,e,f),l=!0},p(s,f){if(f&32){t=he(Object.keys(Ut));let i;for(i=0;i<t.length;i+=1){const a=Dl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Fl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(s){s&&h(e),Ke(n,s)}}}function op(o){let e,l;return e=new Ge({props:{small:!0,$$slots:{default:[rp]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&1073741856&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function sp(o){let e;return{c(){e=y("Done")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ip(o){let e,l,t,n,r=o[9].interventions.toLocaleString()+"",s,f,i,a,u=o[8].size.toLocaleString()+"",c,p,_,b,C,T=Al(o[9].totalLength).toFixed(1)+"",M,j,P,N,O,I,D,R,z,V;N=new Fe({props:{$$slots:{default:[Q$]},$$scope:{ctx:o}}}),N.$on("click",o[12]);const ie=[X$,K$],F=[];function X(H,fe){return H[3]=="ATF"?0:1}return I=X(o),D=F[I]=ie[I](o),z=new oo({props:{$$slots:{default:[sp]},$$scope:{ctx:o}}}),z.$on("click",o[24]),{c(){e=S("p"),e.textContent="Showing:",l=L(),t=S("ul"),n=S("li"),s=y(r),f=y(" interventions"),i=L(),a=S("li"),c=y(u),p=y(" schemes"),_=L(),b=S("li"),C=y("total route length of "),M=y(T),j=y(" miles"),P=L(),w(N.$$.fragment),O=L(),D.c(),R=L(),w(z.$$.fragment)},m(H,fe){d(H,e,fe),d(H,l,fe),d(H,t,fe),$(t,n),$(n,s),$(n,f),$(t,i),$(t,a),$(a,c),$(a,p),$(t,_),$(t,b),$(b,C),$(b,M),$(b,j),d(H,P,fe),v(N,H,fe),d(H,O,fe),F[I].m(H,fe),d(H,R,fe),v(z,H,fe),V=!0},p(H,fe){(!V||fe&512)&&r!==(r=H[9].interventions.toLocaleString()+"")&&G(s,r),(!V||fe&256)&&u!==(u=H[8].size.toLocaleString()+"")&&G(c,u),(!V||fe&512)&&T!==(T=Al(H[9].totalLength).toFixed(1)+"")&&G(M,T);const je={};fe&1073741824&&(je.$$scope={dirty:fe,ctx:H}),N.$set(je);let K=I;I=X(H),I===K?F[I].p(H,fe):(be(),g(F[K],1,1,()=>{F[K]=null}),we(),D=F[I],D?D.p(H,fe):(D=F[I]=ie[I](H),D.c()),m(D,1),D.m(R.parentNode,R));const De={};fe&1073741824&&(De.$$scope={dirty:fe,ctx:H}),z.$set(De)},i(H){V||(m(N.$$.fragment,H),m(D),m(z.$$.fragment,H),V=!0)},o(H){g(N.$$.fragment,H),g(D),g(z.$$.fragment,H),V=!1},d(H){H&&(h(e),h(l),h(t),h(P),h(O),h(R)),k(N,H),F[I].d(H),k(z,H)}}}function ap(o){let e,l,t,n,r;e=new Fe({props:{$$slots:{default:[Z$]},$$scope:{ctx:o}}}),e.$on("click",o[13]);function s(i){o[25](i)}let f={title:`Filter ${o[3]} schemes`,$$slots:{default:[ip]},$$scope:{ctx:o}};return o[7]!==void 0&&(f.open=o[7]),t=new Rr({props:f}),E.push(()=>B(t,"open",s)),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(i,a){v(e,i,a),d(i,l,a),v(t,i,a),r=!0},p(i,[a]){const u={};a&1073741824&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&8&&(c.title=`Filter ${i[3]} schemes`),a&1073743871&&(c.$$scope={dirty:a,ctx:i}),!n&&a&128&&(n=!0,c.open=i[7],U(()=>n=!1)),t.$set(c)},i(i){r||(m(e.$$.fragment,i),m(t.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),r=!1},d(i){i&&h(l),k(e,i),k(t,i)}}}function fp(o){var t;let e=new Set;for(let n of Object.values(o.schemes))(t=n.browse)!=null&&t.authority_or_region&&e.add(n.browse.authority_or_region);let l=Array.from(e.entries());return l.sort(),l}function Al(o){return o*621371e-9}function on(o){let e=[];for(let l of Object.values(o.schemes))e.push([l.scheme_reference,l.scheme_reference]),l.scheme_name&&e.push([l.scheme_name,l.scheme_name]);return e}function up(o,e,l){let t,{source:n}=e,{schemesGj:r}=e,{filterSchemeText:s}=e,{filterInterventionText:f}=e,i=!1,a=new Set,u={interventions:0,totalLength:0},c=Object.keys(gn).map(H=>[H,H]),p="",_=Object.fromEntries(Object.keys(Ut).map(H=>[H,!0])),b="";function C(H,fe,je,K,De){let ze=H.toLowerCase(),et=fe.toLowerCase(),Wt=ge=>{var lt,zt,Ht,Et;if(ze&&!((lt=ge.properties.name)!=null&&lt.toLowerCase().includes(ze))&&!((zt=ge.properties.description)!=null&&zt.toLowerCase().includes(ze)))return!1;let Ne=r.schemes[ge.properties.scheme_reference];return!(je&&((Ht=Ne.browse)==null?void 0:Ht.authority_or_region)!=je||n=="ATF"&&Ne.browse.funding_programme&&!K[Ne.browse.funding_programme]||De&&((Et=Ne.browse)==null?void 0:Et.current_milestone)!=De||et&&!Ne.scheme_reference.toLowerCase().includes(et)&&!(Ne.scheme_name??"").toLowerCase().includes(et))};l(8,a=new Set(r.features.filter(Wt).map(ge=>ge.properties.scheme_reference))),l(9,u={interventions:0,totalLength:0});let xt=ge=>{var Ne,lt;return!(!a.has(ge.properties.scheme_reference)||ze&&!((Ne=ge.properties.name)!=null&&Ne.toLowerCase().includes(ze))&&!((lt=ge.properties.description)!=null&&lt.toLowerCase().includes(ze)))};for(let ge of r.features)xt(ge)?(delete ge.properties.hide_while_editing,l(9,u.interventions++,u),ge.geometry.type=="LineString"&&ge.properties.length_meters&&l(9,u.totalLength+=ge.properties.length_meters,u)):ge.properties.hide_while_editing=!0;l(0,r),l(9,u)}function T(){l(4,p=""),l(5,_=Object.fromEntries(Object.keys(Ut).map(H=>[H,!0]))),l(6,b=""),l(2,f=""),l(1,s="")}const M=()=>l(7,i=!0);function j(){f=this.value,l(2,f)}const P=()=>l(2,f="");function N(H){s=H,l(1,s)}function O(H){p=H,l(4,p)}function I(H,fe){o.$$.not_equal(_[fe],H)&&(_[fe]=H,l(5,_))}function D(H){b=H,l(6,b)}function R(){f=this.value,l(2,f)}const z=()=>l(2,f="");function V(H){s=H,l(1,s)}function ie(H){p=H,l(4,p)}const F=()=>l(7,i=!1);function X(H){i=H,l(7,i)}return o.$$set=H=>{"source"in H&&l(3,n=H.source),"schemesGj"in H&&l(0,r=H.schemesGj),"filterSchemeText"in H&&l(1,s=H.filterSchemeText),"filterInterventionText"in H&&l(2,f=H.filterInterventionText)},o.$$.update=()=>{o.$$.dirty&1&&l(10,t=fp(r)),o.$$.dirty&118&&C(f,s,p,_,b)},[r,s,f,n,p,_,b,i,a,u,t,c,T,M,j,P,N,O,I,D,R,z,V,ie,F,X]}class Lr extends Z{constructor(e){super(),Q(this,e,up,ap,Y,{source:3,schemesGj:0,filterSchemeText:1,filterInterventionText:2})}}function Gl(o){let e,l,t,n=o[0].status+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Status",t=y(`
    : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].status+"")&&G(r,n)},d(s){s&&h(e)}}}function ql(o){let e,l,t,n=o[0].timescale+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Timescale",t=y(`
    : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].timescale+"")&&G(r,n)},d(s){s&&h(e)}}}function zl(o){let e,l,t,n=o[0].timescale_year+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Estimated completion year",t=y(`
    : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].timescale_year+"")&&G(r,n)},d(s){s&&h(e)}}}function Hl(o){let e,l,t,n=o[0].year_published+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme most recently published",t=y(`
    : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].year_published+"")&&G(r,n)},d(s){s&&h(e)}}}function El(o){let e,l,t,n=o[0].year_consulted+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme most recently consulted on",t=y(`
    : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].year_consulted+"")&&G(r,n)},d(s){s&&h(e)}}}function cp(o){let e,l,t,n,r,s=o[0].status&&Gl(o),f=o[0].timescale&&ql(o),i=o[0].timescale_year&&zl(o),a=o[0].year_published&&Hl(o),u=o[0].year_consulted&&El(o);return{c(){s&&s.c(),e=L(),f&&f.c(),l=L(),i&&i.c(),t=L(),a&&a.c(),n=L(),u&&u.c(),r=ve()},m(c,p){s&&s.m(c,p),d(c,e,p),f&&f.m(c,p),d(c,l,p),i&&i.m(c,p),d(c,t,p),a&&a.m(c,p),d(c,n,p),u&&u.m(c,p),d(c,r,p)},p(c,[p]){c[0].status?s?s.p(c,p):(s=Gl(c),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c[0].timescale?f?f.p(c,p):(f=ql(c),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),c[0].timescale_year?i?i.p(c,p):(i=zl(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,p):(a=Hl(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[0].year_consulted?u?u.p(c,p):(u=El(c),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},i:J,o:J,d(c){c&&(h(e),h(l),h(t),h(n),h(r)),s&&s.d(c),f&&f.d(c),i&&i.d(c),a&&a.d(c),u&&u.d(c)}}}function $p(o,e,l){let{props:t}=e;return o.$$set=n=>{"props"in n&&l(0,t=n.props)},[t]}class Ir extends Z{constructor(e){super(),Q(this,e,$p,cp,Y,{props:0})}}function Bl(o){let e,l,t,n=o[0].budget.toLocaleString()+"",r,s;return{c(){e=S("p"),l=S("b"),l.textContent="Cost",t=y(`
    : `),r=y(n),s=y(`
    GBP`)},m(f,i){d(f,e,i),$(e,l),$(e,t),$(e,r),$(e,s)},p(f,i){i&1&&n!==(n=f[0].budget.toLocaleString()+"")&&G(r,n)},d(f){f&&h(e)}}}function Ul(o){let e;return{c(){e=S("p"),e.textContent="Development is fully funded"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Wl(o){let e;return{c(){e=S("p"),e.textContent="Construction is fully funded"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Yl(o){let e,l,t,n;return{c(){e=S("p"),l=S("b"),l.textContent="Funding sources",t=y(`
    : `),n=y(o[1])},m(r,s){d(r,e,s),$(e,l),$(e,t),$(e,n)},p(r,s){s&2&&G(n,r[1])},d(r){r&&h(e)}}}function pp(o){let e,l,t,n,r=o[0].budget&&Bl(o),s=o[0].development_funded&&Ul(),f=o[0].construction_funded&&Wl(),i=o[1]&&Yl(o);return{c(){r&&r.c(),e=L(),s&&s.c(),l=L(),f&&f.c(),t=L(),i&&i.c(),n=ve()},m(a,u){r&&r.m(a,u),d(a,e,u),s&&s.m(a,u),d(a,l,u),f&&f.m(a,u),d(a,t,u),i&&i.m(a,u),d(a,n,u)},p(a,[u]){a[0].budget?r?r.p(a,u):(r=Bl(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),a[0].development_funded?s||(s=Ul(),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null),a[0].construction_funded?f||(f=Wl(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),a[1]?i?i.p(a,u):(i=Yl(a),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:J,o:J,d(a){a&&(h(e),h(l),h(t),h(n)),r&&r.d(a),s&&s.d(a),f&&f.d(a),i&&i.d(a)}}}function mp(o){if(!o.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])o.funding_sources[l]&&e.push(l.toUpperCase());return o.funding_sources.other&&e.push(o.funding_sources.other),e.join(", ")}function _p(o,e,l){let t,{props:n}=e;return o.$$set=r=>{"props"in r&&l(0,n=r.props)},o.$$.update=()=>{o.$$.dirty&1&&l(1,t=mp(n))},[n,t]}class Mr extends Z{constructor(e){super(),Q(this,e,_p,pp,Y,{props:0})}}function fn(o){const e=o.slice(),l=e[5].pipeline;return e[11]=l,e}function un(o){const e=o.slice(),l=e[1].pipeline;return e[11]=l,e}function Jl(o){let e,l,t,n=Fn(o[1].length_meters)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Length",t=y(`
        : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=Fn(s[1].length_meters)+"")&&G(r,n)},d(s){s&&h(e)}}}function Vl(o){let e,l=st(o[1].description,o[3])+"";return{c(){e=S("p")},m(t,n){d(t,e,n),e.innerHTML=l},p(t,n){n&10&&l!==(l=st(t[1].description,t[3])+"")&&(e.innerHTML=l)},d(t){t&&h(e)}}}function Zl(o){let e,l,t,n,r,s,f,i=o[11].atf4_type&&Ql(o),a=o[11].accuracy&&Kl(o),u=o[11].is_alternative&&Xl();return n=new Mr({props:{props:o[11]}}),s=new Ir({props:{props:o[11]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment)},m(c,p){i&&i.m(c,p),d(c,e,p),a&&a.m(c,p),d(c,l,p),u&&u.m(c,p),d(c,t,p),v(n,c,p),d(c,r,p),v(s,c,p),f=!0},p(c,p){c[11].atf4_type?i?i.p(c,p):(i=Ql(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[11].accuracy?a?a.p(c,p):(a=Kl(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[11].is_alternative?u||(u=Xl(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const _={};p&2&&(_.props=c[11]),n.$set(_);const b={};p&2&&(b.props=c[11]),s.$set(b)},i(c){f||(m(n.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){g(n.$$.fragment,c),g(s.$$.fragment,c),f=!1},d(c){c&&(h(e),h(l),h(t),h(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),k(n,c),k(s,c)}}}function Ql(o){let e,l,t,n=o[11].atf4_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="ATF4 type",t=y(`
          : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].atf4_type+"")&&G(r,n)},d(s){s&&h(e)}}}function Kl(o){let e,l,t,n=o[11].accuracy+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Accuracy",t=y(`
          : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].accuracy+"")&&G(r,n)},d(s){s&&h(e)}}}function Xl(o){let e;return{c(){e=S("p"),e.textContent="Represents an alternative route"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function xl(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.capital_scheme_id)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Capital scheme ID",t=y(`
        : `),r=y(n)},m(f,i){d(f,e,i),$(e,l),$(e,t),$(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.capital_scheme_id)+"")&&G(r,n)},d(f){f&&h(e)}}}function er(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.funding_programme)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Funding programme",t=y(`
        : `),r=y(n)},m(f,i){d(f,e,i),$(e,l),$(e,t),$(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.funding_programme)+"")&&G(r,n)},d(f){f&&h(e)}}}function tr(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.current_milestone)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Current milestone",t=y(`
        : `),r=y(n)},m(f,i){d(f,e,i),$(e,l),$(e,t),$(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.current_milestone)+"")&&G(r,n)},d(f){f&&h(e)}}}function nr(o){let e,l,t,n,r,s,f,i=o[11].scheme_type&&lr(o),a=o[11].atf4_lead_type&&rr(o),u=o[11].scheme_description&&or(o);return n=new Mr({props:{props:o[11]}}),s=new Ir({props:{props:o[11]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment)},m(c,p){i&&i.m(c,p),d(c,e,p),a&&a.m(c,p),d(c,l,p),u&&u.m(c,p),d(c,t,p),v(n,c,p),d(c,r,p),v(s,c,p),f=!0},p(c,p){c[11].scheme_type?i?i.p(c,p):(i=lr(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[11].atf4_lead_type?a?a.p(c,p):(a=rr(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[11].scheme_description?u?u.p(c,p):(u=or(c),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const _={};p&32&&(_.props=c[11]),n.$set(_);const b={};p&32&&(b.props=c[11]),s.$set(b)},i(c){f||(m(n.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){g(n.$$.fragment,c),g(s.$$.fragment,c),f=!1},d(c){c&&(h(e),h(l),h(t),h(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),k(n,c),k(s,c)}}}function lr(o){let e,l,t,n=o[11].scheme_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme type",t=y(`
          : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[11].scheme_type+"")&&G(r,n)},d(s){s&&h(e)}}}function rr(o){let e,l,t,n=o[11].atf4_lead_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="ATF4 lead type",t=y(`
          : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[11].atf4_lead_type+"")&&G(r,n)},d(s){s&&h(e)}}}function or(o){let e,l,t,n=o[11].scheme_description+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Descripton",t=y(`
          : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[11].scheme_description+"")&&G(r,n)},d(s){s&&h(e)}}}function gp(o){let e;return{c(){e=y("Zoom to show entire scheme")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function dp(o){let e;return{c(){e=y("Edit a copy of this scheme")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function sr(o){var Sn,Tn,Cn,Ln;let e,l,t,n,r,s,f,i=st(o[1].name,o[3])+"",a,u=o[1].intervention_type+"",c,p,_,b,C,T,M,j,P,N=o[0].toUpperCase()+"",O,I,D,R,z,V,ie,F=st(o[5].scheme_name??"",o[2])+"",X,H,fe,je,K,De=st(o[1].scheme_reference,o[2])+"",ze,et,Wt,xt,ge=((Sn=o[5].browse)==null?void 0:Sn.authority_or_region)+"",Ne,lt,zt,Ht,Et,an,rt,yn,ot,Ve,Ce=o[1].length_meters&&Jl(o),Le=o[1].description&&Vl(o),ke=o[1].pipeline&&Zl(un(o)),Ie=((Tn=o[5].browse)==null?void 0:Tn.capital_scheme_id)&&xl(o),Me=((Cn=o[5].browse)==null?void 0:Cn.funding_programme)&&er(o),Oe=((Ln=o[5].browse)==null?void 0:Ln.current_milestone)&&tr(o),ye=o[5].pipeline&&nr(fn(o));return rt=new Fe({props:{$$slots:{default:[gp]},$$scope:{ctx:o}}}),rt.$on("click",o[6]),ot=new Fe({props:{$$slots:{default:[dp]},$$scope:{ctx:o}}}),ot.$on("click",o[7]),{c(){e=S("div"),l=S("h2"),l.textContent="Intervention",t=L(),n=S("p"),r=S("b"),r.textContent="Name",s=y(`
      : `),f=new Dt(!1),a=y(" ("),c=y(u),p=y(")"),_=L(),Ce&&Ce.c(),b=L(),Le&&Le.c(),C=L(),ke&&ke.c(),T=L(),M=S("hr"),j=L(),P=S("h2"),O=y(N),I=y(" Scheme"),D=L(),R=S("p"),z=S("b"),z.textContent="Scheme name",V=y(`
      : `),ie=new Dt(!1),X=L(),H=S("p"),fe=S("b"),fe.textContent="Scheme reference",je=y(`
      : `),K=new Dt(!1),ze=L(),et=S("p"),Wt=S("b"),Wt.textContent="Authority or region",xt=y(`
      : `),Ne=y(ge),lt=L(),Ie&&Ie.c(),zt=L(),Me&&Me.c(),Ht=L(),Oe&&Oe.c(),Et=L(),ye&&ye.c(),an=L(),w(rt.$$.fragment),yn=L(),w(ot.$$.fragment),f.a=a,ie.a=null,K.a=null,se(e,"max-width","30vw"),se(e,"max-height","60vh"),se(e,"overflow","auto")},m(oe,de){d(oe,e,de),$(e,l),$(e,t),$(e,n),$(n,r),$(n,s),f.m(i,n),$(n,a),$(n,c),$(n,p),$(e,_),Ce&&Ce.m(e,null),$(e,b),Le&&Le.m(e,null),$(e,C),ke&&ke.m(e,null),$(e,T),$(e,M),$(e,j),$(e,P),$(P,O),$(P,I),$(e,D),$(e,R),$(R,z),$(R,V),ie.m(F,R),$(e,X),$(e,H),$(H,fe),$(H,je),K.m(De,H),$(e,ze),$(e,et),$(et,Wt),$(et,xt),$(et,Ne),$(e,lt),Ie&&Ie.m(e,null),$(e,zt),Me&&Me.m(e,null),$(e,Ht),Oe&&Oe.m(e,null),$(e,Et),ye&&ye.m(e,null),$(e,an),v(rt,e,null),$(e,yn),v(ot,e,null),o[9](e),Ve=!0},p(oe,de){var On,jn,Nn,Pn;(!Ve||de&10)&&i!==(i=st(oe[1].name,oe[3])+"")&&f.p(i),(!Ve||de&2)&&u!==(u=oe[1].intervention_type+"")&&G(c,u),oe[1].length_meters?Ce?Ce.p(oe,de):(Ce=Jl(oe),Ce.c(),Ce.m(e,b)):Ce&&(Ce.d(1),Ce=null),oe[1].description?Le?Le.p(oe,de):(Le=Vl(oe),Le.c(),Le.m(e,C)):Le&&(Le.d(1),Le=null),oe[1].pipeline?ke?(ke.p(un(oe),de),de&2&&m(ke,1)):(ke=Zl(un(oe)),ke.c(),m(ke,1),ke.m(e,T)):ke&&(be(),g(ke,1,1,()=>{ke=null}),we()),(!Ve||de&1)&&N!==(N=oe[0].toUpperCase()+"")&&G(O,N),(!Ve||de&36)&&F!==(F=st(oe[5].scheme_name??"",oe[2])+"")&&ie.p(F),(!Ve||de&6)&&De!==(De=st(oe[1].scheme_reference,oe[2])+"")&&K.p(De),(!Ve||de&32)&&ge!==(ge=((On=oe[5].browse)==null?void 0:On.authority_or_region)+"")&&G(Ne,ge),(jn=oe[5].browse)!=null&&jn.capital_scheme_id?Ie?Ie.p(oe,de):(Ie=xl(oe),Ie.c(),Ie.m(e,zt)):Ie&&(Ie.d(1),Ie=null),(Nn=oe[5].browse)!=null&&Nn.funding_programme?Me?Me.p(oe,de):(Me=er(oe),Me.c(),Me.m(e,Ht)):Me&&(Me.d(1),Me=null),(Pn=oe[5].browse)!=null&&Pn.current_milestone?Oe?Oe.p(oe,de):(Oe=tr(oe),Oe.c(),Oe.m(e,Et)):Oe&&(Oe.d(1),Oe=null),oe[5].pipeline?ye?(ye.p(fn(oe),de),de&32&&m(ye,1)):(ye=nr(fn(oe)),ye.c(),m(ye,1),ye.m(e,an)):ye&&(be(),g(ye,1,1,()=>{ye=null}),we());const In={};de&4096&&(In.$$scope={dirty:de,ctx:oe}),rt.$set(In);const Mn={};de&4096&&(Mn.$$scope={dirty:de,ctx:oe}),ot.$set(Mn)},i(oe){Ve||(m(ke),m(ye),m(rt.$$.fragment,oe),m(ot.$$.fragment,oe),Ve=!0)},o(oe){g(ke),g(ye),g(rt.$$.fragment,oe),g(ot.$$.fragment,oe),Ve=!1},d(oe){oe&&h(e),Ce&&Ce.d(),Le&&Le.d(),ke&&ke.d(),Ie&&Ie.d(),Me&&Me.d(),Oe&&Oe.d(),ye&&ye.d(),k(rt),k(ot),o[9](null)}}}function hp(o){let e=o[1],l,t,n=sr(o);return{c(){n.c(),l=ve()},m(r,s){n.m(r,s),d(r,l,s),t=!0},p(r,[s]){s&2&&Y(e,e=r[1])?(be(),g(n,1,1,J),we(),n=sr(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function st(o,e){return e?o.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):o}function bp(o,e,l){let t,n;W(o,sn,b=>l(10,n=b));let{source:r}=e,{props:s}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,u;Dr(()=>{u&&l(4,u.scrollTop=0,u)});function c(){let b={type:"FeatureCollection",features:f.features.filter(C=>C.properties.scheme_reference==t.scheme_reference)};n==null||n.fitBounds(br(b),{padding:20,animate:!1})}function p(){var j;let b={type:"FeatureCollection",features:f.features.filter(P=>P.properties.scheme_reference==t.scheme_reference),schemes:{}};b.schemes[t.scheme_reference]=t;let C=(j=t.browse)==null?void 0:j.authority_or_region;if(!C){window.alert("This scheme has no authority specified, you can't edit this");return}let T=t.pipeline?"pipeline":"v1",M=`browse_copy_${t.scheme_reference}`;Fr(Gr(C,M),JSON.stringify(Ar(C,b))),window.open(qr(C,M,T),"_blank")}function _(b){E[b?"unshift":"push"](()=>{u=b,l(4,u)})}return o.$$set=b=>{"source"in b&&l(0,r=b.source),"props"in b&&l(1,s=b.props),"schemesGj"in b&&l(8,f=b.schemesGj),"filterSchemeText"in b&&l(2,i=b.filterSchemeText),"filterInterventionText"in b&&l(3,a=b.filterInterventionText)},o.$$.update=()=>{o.$$.dirty&258&&l(5,t=f.schemes[s.scheme_reference])},[r,s,i,a,u,t,c,p,f,_]}class kn extends Z{constructor(e){super(),Q(this,e,bp,hp,Y,{source:0,props:1,schemesGj:8,filterSchemeText:2,filterInterventionText:3})}}function wp(o){let e,l=o[9].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&512&&l!==(l=n[9].name+"")&&G(t,l)},d(n){n&&h(e)}}}function vp(o){let e,l;return e=new kn({props:{source:o[0],props:o[9],schemesGj:o[2],filterSchemeText:o[3],filterInterventionText:o[4]}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.source=t[0]),n&512&&(r.props=t[9]),n&4&&(r.schemesGj=t[2]),n&8&&(r.filterSchemeText=t[3]),n&16&&(r.filterInterventionText=t[4]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function kp(o){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[wp,({props:r})=>({9:r}),({props:r})=>r?512:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[vp,({props:r})=>({9:r}),({props:r})=>r?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){v(e,r,s),d(r,l,s),v(t,r,s),n=!0},p(r,s){const f={};s&1536&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&1565&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),k(e,r),k(t,r)}}}function yp(o){let e,l=o[9].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&512&&l!==(l=n[9].name+"")&&G(t,l)},d(n){n&&h(e)}}}function Sp(o){let e,l;return e=new kn({props:{source:o[0],props:o[9],schemesGj:o[2],filterSchemeText:o[3],filterInterventionText:o[4]}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.source=t[0]),n&512&&(r.props=t[9]),n&4&&(r.schemesGj=t[2]),n&8&&(r.filterSchemeText=t[3]),n&16&&(r.filterInterventionText=t[4]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Tp(o){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[yp,({props:r})=>({9:r}),({props:r})=>r?512:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Sp,({props:r})=>({9:r}),({props:r})=>r?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){v(e,r,s),d(r,l,s),v(t,r,s),n=!0},p(r,s){const f={};s&1536&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&1565&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),k(e,r),k(t,r)}}}function Cp(o){let e,l=o[9].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&512&&l!==(l=n[9].name+"")&&G(t,l)},d(n){n&&h(e)}}}function Lp(o){let e,l;return e=new kn({props:{source:o[0],props:o[9],schemesGj:o[2],filterSchemeText:o[3],filterInterventionText:o[4]}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.source=t[0]),n&512&&(r.props=t[9]),n&4&&(r.schemesGj=t[2]),n&8&&(r.filterSchemeText=t[3]),n&16&&(r.filterInterventionText=t[4]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ip(o){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[Cp,({props:r})=>({9:r}),({props:r})=>r?512:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Lp,({props:r})=>({9:r}),({props:r})=>r?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){v(e,r,s),d(r,l,s),v(t,r,s),n=!0},p(r,s){const f={};s&1536&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&1565&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),k(e,r),k(t,r)}}}function Mp(o){let e,l,t,n,r,s,f,i,a,u;const c=[q(`${o[0]}-interventions-points`),{filter:["all",zn,o[7],o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":o[5],"circle-radius":An,"circle-opacity":ee(1,.5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"}];let p={$$slots:{default:[kp]},$$scope:{ctx:o}};for(let O=0;O<c.length;O+=1)p=te(p,c[O]);e=new At({props:p});const _=[q(`${o[0]}-interventions-lines`),{filter:["all",Hn,o[7]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[5],"line-width":Yt,"line-opacity":ee(1,.5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"}];let b={$$slots:{default:[Tp]},$$scope:{ctx:o}};for(let O=0;O<_.length;O+=1)b=te(b,_[O]);t=new _e({props:b});const C=[q(`${o[0]}-interventions-lines-endpoints`),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Yt,"circle-opacity":0,"circle-stroke-color":Qe.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:o[1]?"visible":"none"}}];let T={};for(let O=0;O<C.length;O+=1)T=te(T,C[O]);r=new At({props:T});const M=[q(`${o[0]}-interventions-polygons`),{filter:["all",en,o[7]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":o[5],"fill-opacity":ee(.2,.5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"}];let j={$$slots:{default:[Ip]},$$scope:{ctx:o}};for(let O=0;O<M.length;O+=1)j=te(j,M[O]);f=new Re({props:j});const P=[q(`${o[0]}-interventions-polygons-outlines`),{filter:["all",en,o[7]]},{paint:{"line-color":o[5],"line-opacity":.5,"line-width":.7*Yt}},{layout:{visibility:o[1]?"visible":"none"}}];let N={};for(let O=0;O<P.length;O+=1)N=te(N,P[O]);return a=new _e({props:N}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment)},m(O,I){v(e,O,I),d(O,l,I),v(t,O,I),d(O,n,I),v(r,O,I),d(O,s,I),v(f,O,I),d(O,i,I),v(a,O,I),u=!0},p(O,I){const D=I&419?ne(c,[I&1&&re(q(`${O[0]}-interventions-points`)),I&384&&{filter:["all",zn,O[7],O[8]]},c[2],c[3],I&32&&{paint:{"circle-color":O[5],"circle-radius":An,"circle-opacity":ee(1,.5)}},I&2&&{layout:{visibility:O[1]?"visible":"none"}},c[6]]):{};I&1053&&(D.$$scope={dirty:I,ctx:O}),e.$set(D);const R=I&163?ne(_,[I&1&&re(q(`${O[0]}-interventions-lines`)),I&128&&{filter:["all",Hn,O[7]]},_[2],_[3],I&32&&{paint:{"line-color":O[5],"line-width":Yt,"line-opacity":ee(1,.5)}},I&2&&{layout:{visibility:O[1]?"visible":"none"}},_[6]]):{};I&1053&&(R.$$scope={dirty:I,ctx:O}),t.$set(R);const z=I&3?ne(C,[I&1&&re(q(`${O[0]}-interventions-lines-endpoints`)),C[1],C[2],I&2&&{layout:{visibility:O[1]?"visible":"none"}}]):{};r.$set(z);const V=I&163?ne(M,[I&1&&re(q(`${O[0]}-interventions-polygons`)),I&128&&{filter:["all",en,O[7]]},M[2],M[3],I&32&&{paint:{"fill-color":O[5],"fill-opacity":ee(.2,.5)}},I&2&&{layout:{visibility:O[1]?"visible":"none"}},M[6]]):{};I&1053&&(V.$$scope={dirty:I,ctx:O}),f.$set(V);const ie=I&163?ne(P,[I&1&&re(q(`${O[0]}-interventions-polygons-outlines`)),I&128&&{filter:["all",en,O[7]]},I&32&&{paint:{"line-color":O[5],"line-opacity":.5,"line-width":.7*Yt}},I&2&&{layout:{visibility:O[1]?"visible":"none"}}]):{};a.$set(ie)},i(O){u||(m(e.$$.fragment,O),m(t.$$.fragment,O),m(r.$$.fragment,O),m(f.$$.fragment,O),m(a.$$.fragment,O),u=!0)},o(O){g(e.$$.fragment,O),g(t.$$.fragment,O),g(r.$$.fragment,O),g(f.$$.fragment,O),g(a.$$.fragment,O),u=!1},d(O){O&&(h(l),h(n),h(s),h(i)),k(e,O),k(t,O),k(r,O),k(f,O),k(a,O)}}}function Op(o){let e,l;return e=new Gt({props:{data:o[6],$$slots:{default:[Mp]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,[n]){const r={};n&64&&(r.data=t[6]),n&1087&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function jp(o,e,l){let t,{source:n}=e,{show:r}=e,{schemesGj:s}=e,{filterSchemeText:f}=e,{filterInterventionText:i}=e,{color:a}=e;const u=["!=",["get","hide_while_editing"],!0],c=["!=",["get","endpoint"],!0];return o.$$set=p=>{"source"in p&&l(0,n=p.source),"show"in p&&l(1,r=p.show),"schemesGj"in p&&l(2,s=p.schemesGj),"filterSchemeText"in p&&l(3,f=p.filterSchemeText),"filterInterventionText"in p&&l(4,i=p.filterInterventionText),"color"in p&&l(5,a=p.color)},o.$$.update=()=>{o.$$.dirty&4&&l(6,t=Qr(s))},[n,r,s,f,i,a,t,u,c]}class ir extends Z{constructor(e){super(),Q(this,e,jp,Op,Y,{source:0,show:1,schemesGj:2,filterSchemeText:3,filterInterventionText:4,color:5})}}function Np(o){return Xe(["get","intervention_type"],{area:Qe.area,route:Qe.route,crossing:Qe.crossing,other:Qe.other},"white")}function Pp(o){return[["Areas",Qe.area],["Routes",Qe.route],["Crossings",Qe.crossing],["Other",Qe.other]]}function ar(o,e,l){const t=o.slice();return t[30]=e[l],t}function fr(o,e,l){const t=o.slice();return t[30]=e[l],t}function Rp(o){let e,l;return e=new Y$({props:{loadFile:o[17]}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p:J,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ur(o){let e,l,t;function n(s){o[23](s)}let r={name:Or,title:Bp,$$slots:{controls:[Fp],help:[Dp]},$$scope:{ctx:o}};return o[8]!==void 0&&(r.show=o[8]),e=new ue({props:r}),E.push(()=>B(e,"show",n)),{c(){w(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f[0]&3617|f[1]&16&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&256&&(l=!0,i.show=s[8],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function cr(o){let e,l,t=o[30]+"",n;return{c(){e=S("li"),l=S("p"),n=y(t)},m(r,s){d(r,e,s),$(e,l),$(l,n)},p(r,s){s[0]&512&&t!==(t=r[30]+"")&&G(n,t)},d(r){r&&h(e)}}}function Dp(o){let e,l,t,n,r,s,f;t=new wr({props:{text:"Scheme data caveats"}});let i=he(o[9].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=cr(fr(o,i,u));return{c(){e=S("span"),l=S("p"),w(t.$$.fragment),n=y(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();A(e,"slot","help")},m(u,c){d(u,e,c),$(e,l),v(t,l,null),$(l,n),$(e,r),$(e,s);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,null);f=!0},p(u,c){if(c[0]&512){i=he(u[9].notes??[]);let p;for(p=0;p<i.length;p+=1){const _=fr(u,i,p);a[p]?a[p].p(_,c):(a[p]=cr(_),a[p].c(),a[p].m(s,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){g(t.$$.fragment,u),f=!1},d(u){u&&h(e),k(t),Ke(a,u)}}}function Fp(o){let e,l,t,n,r,s,f,i,a,u,c;function p(j){o[19](j)}function _(j){o[20](j)}function b(j){o[21](j)}let C={source:"ATF"};o[9]!==void 0&&(C.schemesGj=o[9]),o[10]!==void 0&&(C.filterSchemeText=o[10]),o[11]!==void 0&&(C.filterInterventionText=o[11]),l=new Lr({props:C}),E.push(()=>B(l,"schemesGj",p)),E.push(()=>B(l,"filterSchemeText",_)),E.push(()=>B(l,"filterInterventionText",b));function T(j){o[22](j)}let M={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return o[0]!==void 0&&(M.value=o[0]),f=new Ft({props:M}),E.push(()=>B(f,"value",T)),u=new Xt({props:{rows:o[5]}}),{c(){e=S("div"),w(l.$$.fragment),s=L(),w(f.$$.fragment),a=L(),w(u.$$.fragment),A(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(j,P){d(j,e,P),v(l,e,null),$(e,s),v(f,e,null),$(e,a),v(u,e,null),c=!0},p(j,P){const N={};!t&&P[0]&512&&(t=!0,N.schemesGj=j[9],U(()=>t=!1)),!n&&P[0]&1024&&(n=!0,N.filterSchemeText=j[10],U(()=>n=!1)),!r&&P[0]&2048&&(r=!0,N.filterInterventionText=j[11],U(()=>r=!1)),l.$set(N);const O={};!i&&P[0]&1&&(i=!0,O.value=j[0],U(()=>i=!1)),f.$set(O);const I={};P[0]&32&&(I.rows=j[5]),u.$set(I)},i(j){c||(m(l.$$.fragment,j),m(f.$$.fragment,j),m(u.$$.fragment,j),c=!0)},o(j){g(l.$$.fragment,j),g(f.$$.fragment,j),g(u.$$.fragment,j),c=!1},d(j){j&&h(e),k(l),k(f),k(u)}}}function $r(o){let e,l,t;function n(s){o[28](s)}let r={name:jr,title:Up,$$slots:{controls:[Gp],help:[Ap]},$$scope:{ctx:o}};return o[7]!==void 0&&(r.show=o[7]),e=new ue({props:r}),E.push(()=>B(e,"show",n)),{c(){w(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f[0]&28682|f[1]&16&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&128&&(l=!0,i.show=s[7],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function pr(o){let e,l,t=o[30]+"",n;return{c(){e=S("li"),l=S("p"),n=y(t)},m(r,s){d(r,e,s),$(e,l),$(l,n)},p(r,s){s[0]&4096&&t!==(t=r[30]+"")&&G(n,t)},d(r){r&&h(e)}}}function Ap(o){let e,l,t,n,r,s,f;t=new wr({props:{text:"Scheme data caveats"}});let i=he(o[12].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=pr(ar(o,i,u));return{c(){e=S("span"),l=S("p"),w(t.$$.fragment),n=y(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();A(e,"slot","help")},m(u,c){d(u,e,c),$(e,l),v(t,l,null),$(l,n),$(e,r),$(e,s);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,null);f=!0},p(u,c){if(c[0]&4096){i=he(u[12].notes??[]);let p;for(p=0;p<i.length;p+=1){const _=ar(u,i,p);a[p]?a[p].p(_,c):(a[p]=pr(_),a[p].c(),a[p].m(s,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){g(t.$$.fragment,u),f=!1},d(u){u&&h(e),k(t),Ke(a,u)}}}function Gp(o){let e,l,t,n,r,s,f,i,a,u,c;function p(j){o[24](j)}function _(j){o[25](j)}function b(j){o[26](j)}let C={source:"LCWIP"};o[12]!==void 0&&(C.schemesGj=o[12]),o[13]!==void 0&&(C.filterSchemeText=o[13]),o[14]!==void 0&&(C.filterInterventionText=o[14]),l=new Lr({props:C}),E.push(()=>B(l,"schemesGj",p)),E.push(()=>B(l,"filterSchemeText",_)),E.push(()=>B(l,"filterInterventionText",b));function T(j){o[27](j)}let M={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return o[1]!==void 0&&(M.value=o[1]),f=new Ft({props:M}),E.push(()=>B(f,"value",T)),u=new Xt({props:{rows:o[3]}}),{c(){e=S("div"),w(l.$$.fragment),s=L(),w(f.$$.fragment),a=L(),w(u.$$.fragment),A(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(j,P){d(j,e,P),v(l,e,null),$(e,s),v(f,e,null),$(e,a),v(u,e,null),c=!0},p(j,P){const N={};!t&&P[0]&4096&&(t=!0,N.schemesGj=j[12],U(()=>t=!1)),!n&&P[0]&8192&&(n=!0,N.filterSchemeText=j[13],U(()=>n=!1)),!r&&P[0]&16384&&(r=!0,N.filterInterventionText=j[14],U(()=>r=!1)),l.$set(N);const O={};!i&&P[0]&2&&(i=!0,O.value=j[1],U(()=>i=!1)),f.$set(O);const I={};P[0]&8&&(I.rows=j[3]),u.$set(I)},i(j){c||(m(l.$$.fragment,j),m(f.$$.fragment,j),m(u.$$.fragment,j),c=!0)},o(j){g(l.$$.fragment,j),g(f.$$.fragment,j),g(u.$$.fragment,j),c=!1},d(j){j&&h(e),k(l),k(f),k(u)}}}function qp(o){let e=Object.entries(o[9].schemes).length>0,l,t=Object.entries(o[12].schemes).length>0,n,r,s=e&&ur(o),f=t&&$r(o);return{c(){s&&s.c(),l=L(),f&&f.c(),n=ve()},m(i,a){s&&s.m(i,a),d(i,l,a),f&&f.m(i,a),d(i,n,a),r=!0},p(i,a){a[0]&512&&(e=Object.entries(i[9].schemes).length>0),e?s?(s.p(i,a),a[0]&512&&m(s,1)):(s=ur(i),s.c(),m(s,1),s.m(l.parentNode,l)):s&&(be(),g(s,1,1,()=>{s=null}),we()),a[0]&4096&&(t=Object.entries(i[12].schemes).length>0),t?f?(f.p(i,a),a[0]&4096&&m(f,1)):(f=$r(i),f.c(),m(f,1),f.m(n.parentNode,n)):f&&(be(),g(f,1,1,()=>{f=null}),we())},i(i){r||(m(s),m(f),r=!0)},o(i){g(s),g(f),r=!1},d(i){i&&(h(l),h(n)),s&&s.d(i),f&&f.d(i)}}}function zp(o){let e;return{c(){e=y("Show your sketches")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Hp(o){let e=hr()=="Private (development)",l,t,n,r,s,f,i,a,u,c=e&&Rp(o);return t=new Ge({props:{small:!0,$$slots:{default:[qp]},$$scope:{ctx:o}}}),r=new zr({props:{label:"Load schemes from GeoJSON",onLoad:o[17]}}),f=new Hr({props:{errorMessage:o[2]}}),a=new Fe({props:{$$slots:{default:[zp]},$$scope:{ctx:o}}}),a.$on("click",o[18]),{c(){c&&c.c(),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment)},m(p,_){c&&c.m(p,_),d(p,l,_),v(t,p,_),d(p,n,_),v(r,p,_),d(p,s,_),v(f,p,_),d(p,i,_),v(a,p,_),u=!0},p(p,_){e&&c.p(p,_);const b={};_[0]&32683|_[1]&16&&(b.$$scope={dirty:_,ctx:p}),t.$set(b);const C={};_[0]&4&&(C.errorMessage=p[2]),f.$set(C);const T={};_[1]&16&&(T.$$scope={dirty:_,ctx:p}),a.$set(T)},i(p){u||(m(c),m(t.$$.fragment,p),m(r.$$.fragment,p),m(f.$$.fragment,p),m(a.$$.fragment,p),u=!0)},o(p){g(c),g(t.$$.fragment,p),g(r.$$.fragment,p),g(f.$$.fragment,p),g(a.$$.fragment,p),u=!1},d(p){p&&(h(l),h(n),h(s),h(i)),c&&c.d(p),k(t,p),k(r,p),k(f,p),k(a,p)}}}function Ep(o){let e,l,t,n,r,s;return e=new tt({props:{label:"Schemes",open:!0,$$slots:{default:[Hp]},$$scope:{ctx:o}}}),t=new ir({props:{source:"atf",show:o[8],schemesGj:o[9],filterSchemeText:o[10],filterInterventionText:o[11],color:o[6]}}),r=new ir({props:{source:"lcwip",show:o[7],schemesGj:o[12],filterSchemeText:o[13],filterInterventionText:o[14],color:o[4]}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment)},m(f,i){v(e,f,i),d(f,l,i),v(t,f,i),d(f,n,i),v(r,f,i),s=!0},p(f,i){const a={};i[0]&32687|i[1]&16&&(a.$$scope={dirty:i,ctx:f}),e.$set(a);const u={};i[0]&256&&(u.show=f[8]),i[0]&512&&(u.schemesGj=f[9]),i[0]&1024&&(u.filterSchemeText=f[10]),i[0]&2048&&(u.filterInterventionText=f[11]),i[0]&64&&(u.color=f[6]),t.$set(u);const c={};i[0]&128&&(c.show=f[7]),i[0]&4096&&(c.schemesGj=f[12]),i[0]&8192&&(c.filterSchemeText=f[13]),i[0]&16384&&(c.filterInterventionText=f[14]),i[0]&16&&(c.color=f[4]),r.$set(c)},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(r.$$.fragment,f),s=!1},d(f){f&&(h(l),h(n)),k(e,f),k(t,f),k(r,f)}}}let Or="atf_schemes",Bp="ATF schemes",jr="lcwip_schemes",Up="LCWIP schemes";function Wp(o,e,l){let t,n,r,s,f,i,a,u,c,p,_,b;W(o,rn,K=>l(9,a=K)),W(o,jl,K=>l(10,u=K)),W(o,Ol,K=>l(11,c=K)),W(o,_n,K=>l(12,p=K)),W(o,Pl,K=>l(13,_=K)),W(o,Nl,K=>l(14,b=K));let C="",T=pe(Or);W(o,T,K=>l(8,i=K));let M="fundingProgramme",j=pe(jr);W(o,j,K=>l(7,f=K));let P="interventionType";function N(K,De){try{Rl(JSON.parse(De)),it(T,i=!0,i),it(j,f=!0,f),l(2,C="")}catch(ze){l(2,C=`The file you loaded is broken: ${ze}`)}}function O(K){return K=="interventionType"?[Np(),Pp()]:K=="fundingProgramme"?[Xe(["get","funding_programme"],Ut,"grey"),Object.entries(Ut)]:K=="currentMilestone"?[Xe(["get","current_milestone"],gn,"grey"),Object.entries(gn)]:["red",[]]}function I(){Rl(V$()),it(T,i=!0,i),it(j,f=!0,f),l(2,C="")}function D(K){a=K,rn.set(a)}function R(K){u=K,jl.set(u)}function z(K){c=K,Ol.set(c)}function V(K){M=K,l(0,M)}function ie(K){i=K,T.set(i)}function F(K){p=K,_n.set(p)}function X(K){_=K,Pl.set(_)}function H(K){b=K,Nl.set(b)}function fe(K){P=K,l(1,P)}function je(K){f=K,j.set(f)}return o.$$.update=()=>{o.$$.dirty[0]&1&&l(6,[t,n]=O(M),t,(l(5,n),l(0,M))),o.$$.dirty[0]&2&&l(4,[r,s]=O(P),r,(l(3,s),l(1,P)))},[M,P,C,s,r,n,t,f,i,a,u,c,p,_,b,T,j,N,I,D,R,z,V,ie,F,X,H,fe,je]}class Yp extends Z{constructor(e){super(),Q(this,e,Wp,Ep,Y,{},null,[-1,-1])}}const mr=Ae(!0);let dn=Ae(null);function Jp(o){let e,l,t,n,r,s,f,i;return e=new wc({}),t=new Oc({}),r=new Xc({}),f=new Hc({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),d(a,n,u),v(r,a,u),d(a,s,u),v(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(r.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&(h(l),h(n),h(s)),k(e,a),k(t,a),k(r,a),k(f,a)}}}function Vp(o){let e,l;return e=new Ge({props:{small:!0,$$slots:{default:[Jp]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Zp(o){let e,l,t,n,r,s,f,i,a,u,c,p;return e=new Da({}),t=new $f({}),r=new Wa({}),f=new tf({}),a=new sc({}),c=new qu({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment),u=L(),w(c.$$.fragment)},m(_,b){v(e,_,b),d(_,l,b),v(t,_,b),d(_,n,b),v(r,_,b),d(_,s,b),v(f,_,b),d(_,i,b),v(a,_,b),d(_,u,b),v(c,_,b),p=!0},i(_){p||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(r.$$.fragment,_),m(f.$$.fragment,_),m(a.$$.fragment,_),m(c.$$.fragment,_),p=!0)},o(_){g(e.$$.fragment,_),g(t.$$.fragment,_),g(r.$$.fragment,_),g(f.$$.fragment,_),g(a.$$.fragment,_),g(c.$$.fragment,_),p=!1},d(_){_&&(h(l),h(n),h(s),h(i),h(u)),k(e,_),k(t,_),k(r,_),k(f,_),k(a,_),k(c,_)}}}function Qp(o){let e,l;return e=new Ge({props:{small:!0,$$slots:{default:[Zp]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Kp(o){let e,l,t,n,r,s;return e=new va({}),t=new hu({}),r=new Iu({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment)},m(f,i){v(e,f,i),d(f,l,i),v(t,f,i),d(f,n,i),v(r,f,i),s=!0},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(r.$$.fragment,f),s=!1},d(f){f&&(h(l),h(n)),k(e,f),k(t,f),k(r,f)}}}function Xp(o){let e,l;return e=new Ge({props:{small:!0,$$slots:{default:[Kp]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function xp(o){let e,l,t,n,r,s,f,i,a,u;return e=new Oi({}),t=new ia({}),r=new As({}),f=new oi({}),a=new bi({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment)},m(c,p){v(e,c,p),d(c,l,p),v(t,c,p),d(c,n,p),v(r,c,p),d(c,s,p),v(f,c,p),d(c,i,p),v(a,c,p),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(r.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(r.$$.fragment,c),g(f.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&(h(l),h(n),h(s),h(i)),k(e,c),k(t,c),k(r,c),k(f,c),k(a,c)}}}function em(o){let e,l;return e=new Ge({props:{small:!0,$$slots:{default:[xp]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function tm(o){let e,l,t,n;return e=new Cs({}),t=new Vs({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){v(e,r,s),d(r,l,s),v(t,r,s),n=!0},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),k(e,r),k(t,r)}}}function nm(o){let e,l;return e=new Ge({props:{small:!0,$$slots:{default:[tm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function lm(o){let e,l,t,n,r,s,f,i;return e=new uu({}),t=new Tf({}),r=new eu({}),f=new G$({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),d(a,n,u),v(r,a,u),d(a,s,u),v(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(r.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&(h(l),h(n),h(s)),k(e,a),k(t,a),k(r,a),k(f,a)}}}function rm(o){let e,l,t,n,r,s,f,i,a=hr()=="Private (development)",u,c,p,_,b;e=new I$({}),t=new g$({}),r=new Hf({}),f=new Zu({});let C=a&&lm();return c=new zi({}),_=new Qi({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),C&&C.c(),u=L(),w(c.$$.fragment),p=L(),w(_.$$.fragment)},m(T,M){v(e,T,M),d(T,l,M),v(t,T,M),d(T,n,M),v(r,T,M),d(T,s,M),v(f,T,M),d(T,i,M),C&&C.m(T,M),d(T,u,M),v(c,T,M),d(T,p,M),v(_,T,M),b=!0},p:J,i(T){b||(m(e.$$.fragment,T),m(t.$$.fragment,T),m(r.$$.fragment,T),m(f.$$.fragment,T),m(C),m(c.$$.fragment,T),m(_.$$.fragment,T),b=!0)},o(T){g(e.$$.fragment,T),g(t.$$.fragment,T),g(r.$$.fragment,T),g(f.$$.fragment,T),g(C),g(c.$$.fragment,T),g(_.$$.fragment,T),b=!1},d(T){T&&(h(l),h(n),h(s),h(i),h(u),h(p)),k(e,T),k(t,T),k(r,T),k(f,T),C&&C.d(T),k(c,T),k(_,T)}}}function om(o){let e,l;return e=new Ge({props:{small:!0,$$slots:{default:[rm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function sm(o){let e,l,t,n,r;function s(i){o[6](i)}let f={cfg:o[5],map:o[3]};return o[0]!==void 0&&(f.enabled=o[0]),e=new Xr({props:f}),E.push(()=>B(e,"enabled",s)),n=new Fo({}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,a){const u={};a&8&&(u.map=i[3]),!l&&a&1&&(l=!0,u.enabled=i[0],U(()=>l=!1)),e.$set(u)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}function im(o){let e,l;const t=[q("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:o[1]?"none":"visible"}}];let n={};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Re({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&2?ne(t,[t[0],t[1],{layout:{visibility:r[1]?"none":"visible"}}]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function am(o){let e,l,t,n,r,s,f,i,a,u,c,p,_,b,C,T,M,j,P,N,O;return l=new Yp({}),n=new tt({props:{label:"Trip generators",$$slots:{default:[Vp]},$$scope:{ctx:o}}}),s=new tt({props:{label:"Existing infrastructure",$$slots:{default:[Qp]},$$scope:{ctx:o}}}),i=new tt({props:{label:"Public transport",$$slots:{default:[Xp]},$$scope:{ctx:o}}}),u=new tt({props:{label:"Boundaries",$$slots:{default:[em]},$$scope:{ctx:o}}}),p=new tt({props:{label:"Census",$$slots:{default:[nm]},$$scope:{ctx:o}}}),b=new tt({props:{label:"Other",$$slots:{default:[om]},$$scope:{ctx:o}}}),T=new tt({props:{label:"Tools",$$slots:{default:[sm]},$$scope:{ctx:o}}}),j=new Kr({props:{disabled:!o[1]}}),N=new Gt({props:{data:o[4],$$slots:{default:[im]},$$scope:{ctx:o}}}),{c(){e=S("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment),f=L(),w(i.$$.fragment),a=L(),w(u.$$.fragment),c=L(),w(p.$$.fragment),_=L(),w(b.$$.fragment),C=L(),w(T.$$.fragment),M=L(),w(j.$$.fragment),P=L(),w(N.$$.fragment)},m(I,D){d(I,e,D),v(l,e,null),$(e,t),v(n,e,null),$(e,r),v(s,e,null),$(e,f),v(i,e,null),$(e,a),v(u,e,null),$(e,c),v(p,e,null),$(e,_),v(b,e,null),$(e,C),v(T,e,null),$(e,M),v(j,e,null),o[7](e),d(I,P,D),v(N,I,D),O=!0},p(I,[D]){const R={};D&256&&(R.$$scope={dirty:D,ctx:I}),n.$set(R);const z={};D&256&&(z.$$scope={dirty:D,ctx:I}),s.$set(z);const V={};D&256&&(V.$$scope={dirty:D,ctx:I}),i.$set(V);const ie={};D&256&&(ie.$$scope={dirty:D,ctx:I}),u.$set(ie);const F={};D&256&&(F.$$scope={dirty:D,ctx:I}),p.$set(F);const X={};D&256&&(X.$$scope={dirty:D,ctx:I}),b.$set(X);const H={};D&265&&(H.$$scope={dirty:D,ctx:I}),T.$set(H);const fe={};D&2&&(fe.disabled=!I[1]),j.$set(fe);const je={};D&258&&(je.$$scope={dirty:D,ctx:I}),N.$set(je)},i(I){O||(m(l.$$.fragment,I),m(n.$$.fragment,I),m(s.$$.fragment,I),m(i.$$.fragment,I),m(u.$$.fragment,I),m(p.$$.fragment,I),m(b.$$.fragment,I),m(T.$$.fragment,I),m(j.$$.fragment,I),m(N.$$.fragment,I),O=!0)},o(I){g(l.$$.fragment,I),g(n.$$.fragment,I),g(s.$$.fragment,I),g(i.$$.fragment,I),g(u.$$.fragment,I),g(p.$$.fragment,I),g(b.$$.fragment,I),g(T.$$.fragment,I),g(j.$$.fragment,I),g(N.$$.fragment,I),O=!1},d(I){I&&(h(e),h(P)),k(l),k(n),k(s),k(i),k(u),k(p),k(b),k(T),k(j),o[7](null),k(N,I)}}}function fm(o,e,l){let t,n,r,s;W(o,mr,c=>l(1,n=c)),W(o,dn,c=>l(2,r=c)),W(o,sn,c=>l(3,s=c));let f={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},i={getStreetViewRoadLayerNames:c=>Wr(c,Er(pn))};function a(c){t=c,l(0,t),l(1,n)}function u(c){E[c?"unshift":"push"](()=>{r=c,dn.set(r)})}return o.$$.update=()=>{o.$$.dirty&2&&l(0,t=!n),o.$$.dirty&1&&mr.set(!t)},[t,n,r,s,f,i,a,u]}class um extends Z{constructor(e){super(),Q(this,e,fm,am,Y,{})}}function cm(o){let e,l,t;return{c(){e=S("p"),e.innerHTML="<b>Selected layers</b>",l=L(),t=S("div")},m(n,r){d(n,e,r),d(n,l,r),d(n,t,r),o[3](t)},p:J,i:J,o:J,d(n){n&&(h(e),h(l),h(t)),o[3](null)}}}function $m(o,e,l){if(o){o.innerHTML="";for(let t of e){let n=l.get(t);n&&(n.style.display="block",o.appendChild(n))}}}function pm(o,e,l){let t,n;W(o,mn,f=>l(1,t=f)),W(o,Jt,f=>l(2,n=f));let r=null;function s(f){E[f?"unshift":"push"](()=>{r=f,l(0,r)})}return o.$$.update=()=>{o.$$.dirty&7&&$m(r,n,t)},[r,t,n,s]}class mm extends Z{constructor(e){super(),Q(this,e,pm,cm,Y,{})}}function _m(o){let e,l,t,n,r,s,f,i,a,u,c,p,_,b,C;return l=new Yr({}),n=new so({}),f=new io({}),p=new Ho({props:{boundaryGeojson:o[3]}}),{c(){e=S("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),r=L(),s=S("div"),w(f.$$.fragment),i=L(),a=S("div"),u=S("h1"),u.textContent="Scheme Browser",c=L(),w(p.$$.fragment),_=L(),b=S("div"),se(s,"border-bottom","1px solid #b1b4b6"),se(a,"display","flex"),se(a,"justify-content","space-between"),A(e,"slot","sidebar"),A(e,"class","govuk-prose")},m(T,M){d(T,e,M),v(l,e,null),$(e,t),v(n,e,null),$(e,r),$(e,s),v(f,s,null),$(e,i),$(e,a),$(a,u),$(a,c),v(p,a,null),$(e,_),$(e,b),o[6](b),C=!0},p(T,M){const j={};M&8&&(j.boundaryGeojson=T[3]),p.$set(j)},i(T){C||(m(l.$$.fragment,T),m(n.$$.fragment,T),m(f.$$.fragment,T),m(p.$$.fragment,T),C=!0)},o(T){g(l.$$.fragment,T),g(n.$$.fragment,T),g(f.$$.fragment,T),g(p.$$.fragment,T),C=!1},d(T){T&&h(e),k(l),k(n),k(f),k(p),o[6](null)}}}function _r(o){let e,l;return e=new um({}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function gm(o){let e,l,t,n;e=new xr({});let r=o[2]&&_r();return{c(){w(e.$$.fragment),l=L(),r&&r.c(),t=ve()},m(s,f){v(e,s,f),d(s,l,f),r&&r.m(s,f),d(s,t,f),n=!0},p(s,f){s[2]?r?f&4&&m(r,1):(r=_r(),r.c(),m(r,1),r.m(t.parentNode,t)):r&&(be(),g(r,1,1,()=>{r=null}),we())},i(s){n||(m(e.$$.fragment,s),m(r),n=!0)},o(s){g(e.$$.fragment,s),g(r),n=!1},d(s){s&&(h(l),h(t)),k(e,s),r&&r.d(s)}}}function dm(o){let e,l,t;return l=new ao({props:{style:o[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[gm]},$$scope:{ctx:o}}}),{c(){e=S("div"),w(l.$$.fragment),A(e,"slot","main")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p(n,r){const s={};r&2&&(s.style=n[1]),r&260&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function hm(o){let e,l,t,n,r;return e=new _o({props:{$$slots:{main:[dm],sidebar:[_m]},$$scope:{ctx:o}}}),n=new mm({}),{c(){w(e.$$.fragment),l=L(),t=S("div"),w(n.$$.fragment),A(t,"class","top-right govuk-prose svelte-u44ed2")},m(s,f){v(e,s,f),d(s,l,f),d(s,t,f),v(n,t,null),r=!0},p(s,[f]){const i={};f&271&&(i.$$scope={dirty:f,ctx:s}),e.$set(i)},i(s){r||(m(e.$$.fragment,s),m(n.$$.fragment,s),r=!0)},o(s){g(e.$$.fragment,s),g(n.$$.fragment,s),r=!1},d(s){s&&(h(l),h(t)),k(e,s),k(n)}}}function bm(o,e,l){let t,n,r,s,f;W(o,dn,c=>l(4,t=c)),W(o,sn,c=>l(5,n=c)),W(o,pn,c=>l(1,r=c)),W(o,Gn,c=>l(2,s=c)),W(o,rn,c=>l(3,f=c)),dr(()=>{Br()});const i=new URLSearchParams(window.location.search);pn.set(i.get("style")||"dataviz");let a;function u(c){E[c?"unshift":"push"](()=>{a=c,l(0,a),l(4,t)})}return o.$$.update=()=>{o.$$.dirty&32&&n&&Gn.set(n),o.$$.dirty&17&&a&&t&&(l(0,a.innerHTML="",a),a.appendChild(t))},[a,r,s,f,t,n,u]}class wm extends Z{constructor(e){super(),Q(this,e,bm,hm,Y,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new wm({target:document.getElementById("app")});
