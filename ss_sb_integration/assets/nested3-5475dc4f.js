import{S as K,i as X,s as J,e as S,b as A,k as ie,c as d,n as Z,d as h,Y as ft,a as L,aX as Fn,m as $,an as ut,Z as ct,_ as $t,$ as pt,t as _,p as g,y as he,C as be,q as we,z as Xe,j as b,x as y,o as w,B as G,u as v,V as ve,v as W,W as wn,X as at,g as H,h as E,r as B,ap as Yt,aY as An,aZ as Rr,aI as cn,a8 as ne,f as Ge,aS as an,aL as Qt,a4 as Pe,a_ as ce,a9 as le,aa as oe,R as vn,ax as Kt,am as Qe,ao as hr,a$ as xt,b0 as At,w as br,b1 as Dr,aN as Fr,aw as $n,b2 as Ar,M as Gr,P as zr,Q as qr,T as Hr,b3 as wr,F as Er,E as Br,aW as Ur,aR as pn,D as Wr}from"./files-23a328ff.js";import{c as z,d as Ke,t as Yr,a as Ve,C as ze,e as me,S as Gt,p as Gn,f as zn,h as Vt,g as Jr,H as Vr,m as qn}from"./colors-633f29c5.js";import{e as Hn,h as nt,M as Zr,b as vr,H as Qr,R as Kr,f as xe,C as zt,d as Xr,c as En,a as Bn,i as tn,W as kr,B as xr,S as eo,G as to}from"./WarningIcon-be27fd3a.js";import{g as kn,u as yr,r as Sr,b as Tr,c as Cr,e as no,G as qt,a as _e,d as lo,E as re,h as te,F as Fe,f as ro,i as oo,j as so,D as io,A as ao,L as fo,M as uo}from"./MapLibreMap-773d4c3b.js";import{P as fe,A as Lr}from"./Popup-10e296fa.js";function co(o){let e;return{c(){e=S("span"),A(e,"class","svelte-kzgqtg"),ie(e,"background",o[0])},m(l,t){d(l,e,t)},p(l,[t]){t&1&&ie(e,"background",l[0])},i:Z,o:Z,d(l){l&&h(e)}}}function $o(o,e,l){let{color:t}=e;return o.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class Se extends K{constructor(e){super(),X(this,e,$o,co,J,{color:0})}}const po=o=>({}),Un=o=>({}),mo=o=>({}),Wn=o=>({});function _o(o){let e,l,t,n,r,s,f,i,a,u,c;const p=o[4].sidebar,m=ft(p,o,o[3],Wn),k=o[4].main,C=ft(k,o,o[3],Un);return{c(){e=S("div"),l=S("aside"),t=S("div"),m&&m.c(),n=L(),r=S("button"),r.textContent="â†’",f=L(),i=S("main"),C&&C.c(),A(t,"class","sidebar-content content-container svelte-1n0etgd"),A(r,"type","button"),A(r,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),A(l,"class",s=Fn(o[1]?"":"collapsed")+" svelte-1n0etgd"),ie(l,"--sidebarWidth",o[0]),A(i,"class","svelte-1n0etgd"),A(e,"class","overall-layout svelte-1n0etgd")},m(T,j){d(T,e,j),$(e,l),$(l,t),m&&m.m(t,null),$(l,n),$(l,r),$(e,f),$(e,i),C&&C.m(i,null),a=!0,u||(c=ut(r,"click",o[2]),u=!0)},p(T,[j]){m&&m.p&&(!a||j&8)&&ct(m,p,T,T[3],a?pt(p,T[3],j,mo):$t(T[3]),Wn),(!a||j&2&&s!==(s=Fn(T[1]?"":"collapsed")+" svelte-1n0etgd"))&&A(l,"class",s),(!a||j&1)&&ie(l,"--sidebarWidth",T[0]),C&&C.p&&(!a||j&8)&&ct(C,k,T,T[3],a?pt(k,T[3],j,po):$t(T[3]),Un)},i(T){a||(_(m,T),_(C,T),a=!0)},o(T){g(m,T),g(C,T),a=!1},d(T){T&&h(e),m&&m.d(T),C&&C.d(T),u=!1,c()}}}function go(o,e,l){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:r="25rem"}=e,s=!0;function f(){l(1,s=!s)}return o.$$set=i=>{"sidebarWidth"in i&&l(0,r=i.sidebarWidth),"$$scope"in i&&l(3,n=i.$$scope)},[r,s,f,n,t]}class ho extends K{constructor(e){super(),X(this,e,go,_o,J,{sidebarWidth:0})}}function Yn(o,e,l){const t=o.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function Jn(o){let e,l,t,n=o[1]+"",r,s,f;return l=new Se({props:{color:o[2]}}),{c(){e=S("li"),b(l.$$.fragment),t=L(),r=y(n),s=L()},m(i,a){d(i,e,a),w(l,e,null),$(e,t),$(e,r),$(e,s),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),l.$set(u),(!f||a&1)&&n!==(n=i[1]+"")&&G(r,n)},i(i){f||(_(l.$$.fragment,i),f=!0)},o(i){g(l.$$.fragment,i),f=!1},d(i){i&&h(e),v(l)}}}function bo(o){let e,l,t=he(o[0]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Jn(Yn(o,t,s));const r=s=>g(n[s],1,1,()=>{n[s]=null});return{c(){e=S("ul");for(let s=0;s<n.length;s+=1)n[s].c()},m(s,f){d(s,e,f);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);l=!0},p(s,[f]){if(f&1){t=he(s[0]);let i;for(i=0;i<t.length;i+=1){const a=Yn(s,t,i);n[i]?(n[i].p(a,f),_(n[i],1)):(n[i]=Jn(a),n[i].c(),_(n[i],1),n[i].m(e,null))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)_(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(s){s&&h(e),Xe(n,s)}}}function wo(o,e,l){let{rows:t}=e;return o.$$set=n=>{"rows"in n&&l(0,t=n.rows)},[t]}class en extends K{constructor(e){super(),X(this,e,wo,bo,J,{rows:0})}}function Vn(o){let e=o[0],l,t,n=Zn(o);return{c(){n.c(),l=ve()},m(r,s){n.m(r,s),d(r,l,s),t=!0},p(r,s){s&1&&J(e,e=r[0])?(be(),g(n,1,1,Z),we(),n=Zn(r),n.c(),_(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(_(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function Zn(o){let e;const l=o[16].default,t=ft(l,o,o[15],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&32768)&&ct(t,l,n,n[15],e?pt(l,n[15],r,null):$t(n[15]),null)},i(n){e||(_(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function vo(o){let e,l,t=o[0]&&Vn(o);return{c(){t&&t.c(),e=ve()},m(n,r){t&&t.m(n,r),d(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&_(t,1)):(t=Vn(n),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(be(),g(t,1,1,()=>{t=null}),we())},i(n){l||(_(t),l=!0)},o(n){g(t),l=!1},d(n){n&&h(e),t&&t.d(n)}}}function ko(o,e,l){let t,n,{$$slots:r={},$$scope:s}=e,{id:f=kn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e,{bounds:u=null}=e,{scheme:c=null}=e,{attribution:p=null}=e,{minzoom:m=null}=e,{maxzoom:k=null}=e,{volatile:C=null}=e;const{map:T,self:j}=yr();W(o,T,M=>l(14,n=M)),W(o,j,M=>l(0,t=M));let D,N=!0;return wn(()=>{t&&D&&n&&(Sr(T,t,D),at(j,t=null,t),l(12,D=void 0))}),o.$$set=M=>{"id"in M&&l(3,f=M.id),"tiles"in M&&l(4,i=M.tiles),"tileSize"in M&&l(5,a=M.tileSize),"bounds"in M&&l(6,u=M.bounds),"scheme"in M&&l(7,c=M.scheme),"attribution"in M&&l(8,p=M.attribution),"minzoom"in M&&l(9,m=M.minzoom),"maxzoom"in M&&l(10,k=M.maxzoom),"volatile"in M&&l(11,C=M.volatile),"$$scope"in M&&l(15,s=M.$$scope)},o.$$.update=()=>{o.$$.dirty&24569&&n&&t!==f&&(at(j,t=f,t),Tr(n,t,Cr({type:"raster",tiles:i,tileSize:a,bounds:u,scheme:c,attribution:p,minzoom:m,maxzoom:k,volatile:C}),M=>n&&M===t,()=>{t&&(l(12,D=n==null?void 0:n.getSource(t)),l(13,N=!0))})),o.$$.dirty&16392&&(n==null||n.on("style.load",()=>{l(12,D=n==null?void 0:n.getSource(f))})),o.$$.dirty&12304&&D&&(N?l(13,N=!1):D.setTiles(i))},[t,T,j,f,i,a,u,c,p,m,k,C,D,N,n,s,r]}class yo extends K{constructor(e){super(),X(this,e,ko,vo,J,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function So(o){let e;const l=o[16].default,t=ft(l,o,o[24],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16777216)&&ct(t,l,n,n[24],e?pt(l,n[24],r,null):$t(n[24]),null)},i(n){e||(_(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function To(o){let e,l,t;function n(s){o[17](s)}let r={id:o[1],type:"symbol",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],applyToClusters:o[9],minzoom:o[10],maxzoom:o[11],hoverCursor:o[12],manageHoverState:o[13],eventsIfTopMost:o[14],interactive:o[15],$$slots:{default:[So]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.hovered=o[0]),e=new no({props:r}),H.push(()=>E(e,"hovered",n)),e.$on("click",o[18]),e.$on("dblclick",o[19]),e.$on("contextmenu",o[20]),e.$on("mouseenter",o[21]),e.$on("mousemove",o[22]),e.$on("mouseleave",o[23]),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,[f]){const i={};f&2&&(i.id=s[1]),f&4&&(i.source=s[2]),f&8&&(i.sourceLayer=s[3]),f&16&&(i.beforeId=s[4]),f&32&&(i.beforeLayerType=s[5]),f&64&&(i.paint=s[6]),f&128&&(i.layout=s[7]),f&256&&(i.filter=s[8]),f&512&&(i.applyToClusters=s[9]),f&1024&&(i.minzoom=s[10]),f&2048&&(i.maxzoom=s[11]),f&4096&&(i.hoverCursor=s[12]),f&8192&&(i.manageHoverState=s[13]),f&16384&&(i.eventsIfTopMost=s[14]),f&32768&&(i.interactive=s[15]),f&16777216&&(i.$$scope={dirty:f,ctx:s}),!l&&f&1&&(l=!0,i.hovered=s[0],B(()=>l=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Co(o,e,l){let{$$slots:t={},$$scope:n}=e,{id:r=kn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{applyToClusters:m=void 0}=e,{minzoom:k=void 0}=e,{maxzoom:C=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:j=!1}=e,{hovered:D=null}=e,{eventsIfTopMost:N=!1}=e,{interactive:M=!0}=e;function O(F){D=F,l(0,D)}function I(F){Yt.call(this,o,F)}function R(F){Yt.call(this,o,F)}function P(F){Yt.call(this,o,F)}function q(F){Yt.call(this,o,F)}function Q(F){Yt.call(this,o,F)}function ae(F){Yt.call(this,o,F)}return o.$$set=F=>{"id"in F&&l(1,r=F.id),"source"in F&&l(2,s=F.source),"sourceLayer"in F&&l(3,f=F.sourceLayer),"beforeId"in F&&l(4,i=F.beforeId),"beforeLayerType"in F&&l(5,a=F.beforeLayerType),"paint"in F&&l(6,u=F.paint),"layout"in F&&l(7,c=F.layout),"filter"in F&&l(8,p=F.filter),"applyToClusters"in F&&l(9,m=F.applyToClusters),"minzoom"in F&&l(10,k=F.minzoom),"maxzoom"in F&&l(11,C=F.maxzoom),"hoverCursor"in F&&l(12,T=F.hoverCursor),"manageHoverState"in F&&l(13,j=F.manageHoverState),"hovered"in F&&l(0,D=F.hovered),"eventsIfTopMost"in F&&l(14,N=F.eventsIfTopMost),"interactive"in F&&l(15,M=F.interactive),"$$scope"in F&&l(24,n=F.$$scope)},[D,r,s,f,i,a,u,c,p,m,k,C,T,j,N,M,t,O,I,R,P,q,Q,ae,n]}class yn extends K{constructor(e){super(),X(this,e,Co,To,J,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Qn(o){let e=o[0],l,t,n=Kn(o);return{c(){n.c(),l=ve()},m(r,s){n.m(r,s),d(r,l,s),t=!0},p(r,s){s&1&&J(e,e=r[0])?(be(),g(n,1,1,Z),we(),n=Kn(r),n.c(),_(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(_(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function Kn(o){let e;const l=o[15].default,t=ft(l,o,o[14],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16384)&&ct(t,l,n,n[14],e?pt(l,n[14],r,null):$t(n[14]),null)},i(n){e||(_(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Lo(o){let e,l,t=o[0]&&Qn(o);return{c(){t&&t.c(),e=ve()},m(n,r){t&&t.m(n,r),d(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&_(t,1)):(t=Qn(n),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(be(),g(t,1,1,()=>{t=null}),we())},i(n){l||(_(t),l=!0)},o(n){g(t),l=!1},d(n){n&&h(e),t&&t.d(n)}}}function Mo(o,e,l){let t,n,{$$slots:r={},$$scope:s}=e,{id:f=kn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e,{bounds:c=null}=e,{scheme:p=null}=e,{attribution:m=null}=e,{minzoom:k=null}=e,{maxzoom:C=null}=e,{volatile:T=null}=e;if(i&&i.includes("pmtiles://")&&!An.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let M=new Rr;An.addProtocol("pmtiles",M.tile)}const{map:j,self:D}=yr();W(o,j,M=>l(13,n=M)),W(o,D,M=>l(0,t=M));let N;return wn(()=>{t&&n&&(Sr(j,t,N),at(D,t=null,t),N=void 0)}),o.$$set=M=>{"id"in M&&l(3,f=M.id),"url"in M&&l(4,i=M.url),"tiles"in M&&l(5,a=M.tiles),"promoteId"in M&&l(6,u=M.promoteId),"bounds"in M&&l(7,c=M.bounds),"scheme"in M&&l(8,p=M.scheme),"attribution"in M&&l(9,m=M.attribution),"minzoom"in M&&l(10,k=M.minzoom),"maxzoom"in M&&l(11,C=M.maxzoom),"volatile"in M&&l(12,T=M.volatile),"$$scope"in M&&l(14,s=M.$$scope)},o.$$.update=()=>{o.$$.dirty&16377&&n&&t!==f&&(at(D,t=f,t),Tr(n,t,Cr({type:"vector",url:i,tiles:a,promoteId:u,bounds:c,scheme:p,attribution:m,minzoom:k,maxzoom:C,volatile:T}),M=>n&&M===t,()=>{t&&(N=n==null?void 0:n.getSource(t))})),o.$$.dirty&8200&&(n==null||n.on("style.load",()=>{N=n==null?void 0:n.getSource(f)}))},[t,j,D,f,i,a,u,c,p,m,k,C,T,n,s,r]}class $e extends K{constructor(e){super(),X(this,e,Mo,Lo,J,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function Xn(o,e,l){const t=o.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function Io(o){let e,l,t;return l=new Ge({props:{$$slots:{default:[jo]},$$scope:{ctx:o}}}),l.$on("click",o[9]),{c(){e=S("div"),b(l.$$.fragment)},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const s={};r&16384&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Oo(o){let e,l,t,n,r,s,f,i,a,u;l=new Ge({props:{$$slots:{default:[No]},$$scope:{ctx:o}}}),l.$on("click",o[4]);let c=o[2]&&xn(o);r=new nt({props:{label:"Help",$$slots:{default:[Po]},$$scope:{ctx:o}}}),f=new lo({}),f.$on("click",o[3]);let p=he(o[0]),m=[];for(let C=0;C<p.length;C+=1)m[C]=el(Xn(o,p,C));const k=C=>g(m[C],1,1,()=>{m[C]=null});return{c(){e=S("div"),b(l.$$.fragment),t=L(),c&&c.c(),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L();for(let C=0;C<m.length;C+=1)m[C].c();a=ve()},m(C,T){d(C,e,T),w(l,e,null),d(C,t,T),c&&c.m(C,T),d(C,n,T),w(r,C,T),d(C,s,T),w(f,C,T),d(C,i,T);for(let j=0;j<m.length;j+=1)m[j]&&m[j].m(C,T);d(C,a,T),u=!0},p(C,T){const j={};T&16384&&(j.$$scope={dirty:T,ctx:C}),l.$set(j),C[2]?c?c.p(C,T):(c=xn(C),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const D={};if(T&16384&&(D.$$scope={dirty:T,ctx:C}),r.$set(D),T&65){p=he(C[0]);let N;for(N=0;N<p.length;N+=1){const M=Xn(C,p,N);m[N]?(m[N].p(M,T),_(m[N],1)):(m[N]=el(M),m[N].c(),_(m[N],1),m[N].m(a.parentNode,a))}for(be(),N=p.length;N<m.length;N+=1)k(N);we()}},i(C){if(!u){_(l.$$.fragment,C),_(r.$$.fragment,C),_(f.$$.fragment,C);for(let T=0;T<p.length;T+=1)_(m[T]);u=!0}},o(C){g(l.$$.fragment,C),g(r.$$.fragment,C),g(f.$$.fragment,C),m=m.filter(Boolean);for(let T=0;T<m.length;T+=1)g(m[T]);u=!1},d(C){C&&(h(e),h(t),h(n),h(s),h(i),h(a)),v(l),c&&c.d(C),v(r,C),v(f,C),Xe(m,C)}}}function jo(o){let e;return{c(){e=y("Measure lines")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function No(o){let e;return{c(){e=y("Stop measuring")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function xn(o){let e,l,t=o[2].toFixed(2)+"",n,r;return{c(){e=S("p"),l=y("Length: "),n=y(t),r=y(" meters")},m(s,f){d(s,e,f),$(e,l),$(e,n),$(e,r)},p(s,f){f&4&&t!==(t=s[2].toFixed(2)+"")&&G(n,t)},d(s){s&&h(e)}}}function Po(o){let e;return{c(){e=S("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){d(l,e,t)},p:Z,d(l){l&&h(e)}}}function Ro(o){let e,l;return{c(){e=S("span"),l=L(),A(e,"class","dot svelte-1tzt432")},m(t,n){d(t,e,n),d(t,l,n)},p:Z,d(t){t&&(h(e),h(l))}}}function el(o){let e,l,t;function n(f){o[7](f,o[11],o[12],o[13])}function r(){return o[8](o[13])}let s={draggable:!0,$$slots:{default:[Ro]},$$scope:{ctx:o}};return o[11]!==void 0&&(s.lngLat=o[11]),e=new Zr({props:s}),H.push(()=>E(e,"lngLat",n)),e.$on("click",r),{c(){b(e.$$.fragment)},m(f,i){w(e,f,i),t=!0},p(f,i){o=f;const a={};i&16384&&(a.$$scope={dirty:i,ctx:o}),!l&&i&1&&(l=!0,a.lngLat=o[11],B(()=>l=!1)),e.$set(a)},i(f){t||(_(e.$$.fragment,f),t=!0)},o(f){g(e.$$.fragment,f),t=!1},d(f){v(e,f)}}}function Do(o){let e,l;const t=[z("measurement-line"),{paint:{"line-color":Ke.measuringLine,"line-width":5}}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f={};e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Fo(o){let e,l,t,n,r,s,f;const i=[Oo,Io],a=[];function u(c,p){return c[1]?0:1}return e=u(o),l=a[e]=i[e](o),n=new qt({props:{data:o[0].length<2?Hn():cn(o[0]),$$slots:{default:[Do]},$$scope:{ctx:o}}}),{c(){l.c(),t=L(),b(n.$$.fragment)},m(c,p){a[e].m(c,p),d(c,t,p),w(n,c,p),r=!0,s||(f=ut(window,"keydown",o[5]),s=!0)},p(c,[p]){let m=e;e=u(c),e===m?a[e].p(c,p):(be(),g(a[m],1,1,()=>{a[m]=null}),we(),l=a[e],l?l.p(c,p):(l=a[e]=i[e](c),l.c()),_(l,1),l.m(t.parentNode,t));const k={};p&1&&(k.data=c[0].length<2?Hn():cn(c[0])),p&16384&&(k.$$scope={dirty:p,ctx:c}),n.$set(k)},i(c){r||(_(l),_(n.$$.fragment,c),r=!0)},o(c){g(l),g(n.$$.fragment,c),r=!1},d(c){c&&h(t),a[e].d(c),v(n,c),s=!1,f()}}}function Ao(o,e,l){let t,n=!1,r=[];function s(k){return k.length<2?null:1e3*Yr(cn(k),{units:"kilometers"})}function f(k){l(0,r=[...r,k.detail.lngLat.toArray()])}function i(){l(1,n=!1),l(0,r=[])}function a(k){n&&k.key==="Escape"&&(k.stopPropagation(),i())}function u(k){r.splice(k,1),l(0,r)}function c(k,C,T,j){T[j]=k,l(0,r)}const p=k=>u(k),m=()=>l(1,n=!0);return o.$$.update=()=>{o.$$.dirty&1&&l(2,t=s(r))},[r,n,t,f,i,a,u,c,p,m]}class Go extends K{constructor(e){super(),X(this,e,Ao,Fo,J,{})}}const zo="/atip/ss_sb_integration/assets/zoom_out_map-b2e1091a.svg";function qo(o){let e,l;return{c(){e=S("img"),Qt(e.src,l=zo)||A(e,"src",l),A(e,"alt","Zoom to show entire boundary")},m(t,n){d(t,e,n)},p:Z,d(t){t&&h(e)}}}function Ho(o){let e,l;return e=new Ge({props:{title:"Zoom to show entire boundary",$$slots:{default:[qo]},$$scope:{ctx:o}}}),e.$on("click",o[0]),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,[n]){const r={};n&8&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Eo(o,e,l){let t;W(o,an,s=>l(2,t=s));let{boundaryGeojson:n}=e;function r(){let s=vr(n);Number.isFinite(s[0])&&t.fitBounds(s,{padding:20,animate:!0,duration:500})}return o.$$set=s=>{"boundaryGeojson"in s&&l(1,n=s.boundaryGeojson)},[r,n]}class Bo extends K{constructor(e){super(),X(this,e,Eo,Ho,J,{boundaryGeojson:1})}}const ee={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},De=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Uo(o){let e;return{c(){e=y(`Open Government License
  `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Wo(o){let e,l,t,n,r;return t=new re({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Uo]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=y("License: "),b(t.$$.fragment),n=y(`. Contains OS data Â© Crown copyright and database right
  2023.`)},m(s,f){d(s,e,f),$(e,l),w(t,e,null),$(e,n),r=!0},p(s,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){r||(_(t.$$.fragment,s),r=!0)},o(s){g(t.$$.fragment,s),r=!1},d(s){s&&h(e),v(t)}}}class Te extends K{constructor(e){super(),X(this,e,null,Wo,J,{})}}function tl(o,e,l){const t=o.slice();return t[2]=e[l],t}function nl(o,e,l){const t=o.slice();return t[5]=e[l],t}function ll(o){let e,l;return{c(){e=S("span"),l=y(`Â 
    `),ie(e,"background",o[5]),ie(e,"width","100%"),ie(e,"border","1px solid black")},m(t,n){d(t,e,n),$(e,l)},p(t,n){n&1&&ie(e,"background",t[5])},d(t){t&&h(e)}}}function rl(o){let e,l=o[2]+"",t;return{c(){e=S("span"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&2&&l!==(l=n[2]+"")&&G(t,l)},d(n){n&&h(e)}}}function Yo(o){let e,l,t,n=he(o[0]),r=[];for(let i=0;i<n.length;i+=1)r[i]=ll(nl(o,n,i));let s=he(o[1]),f=[];for(let i=0;i<s.length;i+=1)f[i]=rl(tl(o,s,i));return{c(){e=S("div");for(let i=0;i<r.length;i+=1)r[i].c();l=L(),t=S("div");for(let i=0;i<f.length;i+=1)f[i].c();ie(e,"display","flex"),ie(t,"display","flex"),ie(t,"justify-content","space-between")},m(i,a){d(i,e,a);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);d(i,l,a),d(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){n=he(i[0]);let u;for(u=0;u<n.length;u+=1){const c=nl(i,n,u);r[u]?r[u].p(c,a):(r[u]=ll(c),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}if(a&2){s=he(i[1]);let u;for(u=0;u<s.length;u+=1){const c=tl(i,s,u);f[u]?f[u].p(c,a):(f[u]=rl(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=s.length}},i:Z,o:Z,d(i){i&&(h(e),h(l),h(t)),Xe(r,i),Xe(f,i)}}}function Jo(o,e,l){let{colorScale:t}=e,{limits:n}=e;return o.$$set=r=>{"colorScale"in r&&l(0,t=r.colorScale),"limits"in r&&l(1,n=r.limits)},[t,n]}class qe extends K{constructor(e){super(),X(this,e,Jo,Yo,J,{colorScale:0,limits:1})}}function pe(o){let e=new URLSearchParams(window.location.search).has(o),l=Pe(e);return l.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(o,"1"):n.searchParams.delete(o),window.history.replaceState(null,"",n.toString())}),l}function Ht(o,e,l,t){let n=e,r=new URLSearchParams(window.location.search).get(o);if(r!=null)try{n=t(r)}catch(f){console.warn(`Parsing URL parameter ${o}=${r} failed, using default value: ${f}`)}let s=Pe(n);return s.subscribe(f=>{let i=new URL(window.location.href),a=l(f);a==null?i.searchParams.delete(o):i.searchParams.set(o,a),window.history.replaceState(null,"",i.toString())}),s}let mn=Pe(new Map),Zt=Pe(new Set);const Vo=o=>({}),ol=o=>({}),Zo=o=>({}),sl=o=>({}),Qo=o=>({}),il=o=>({});function Ko(o){let e;return{c(){e=y(o[2])},m(l,t){d(l,e,t)},p(l,t){t&4&&G(e,l[2])},d(l){l&&h(e)}}}function Xo(o){let e,l,t;const n=o[7].icon,r=ft(n,o,o[10],il);return{c(){r&&r.c(),e=L(),l=y(o[2])},m(s,f){r&&r.m(s,f),d(s,e,f),d(s,l,f),t=!0},p(s,f){r&&r.p&&(!t||f&1024)&&ct(r,n,s,s[10],t?pt(n,s[10],f,Qo):$t(s[10]),il),(!t||f&4)&&G(l,s[2])},i(s){t||(_(r,s),t=!0)},o(s){g(r,s),t=!1},d(s){s&&(h(e),h(l)),r&&r.d(s)}}}function xo(o){let e;const l=o[7].help,t=ft(l,o,o[10],sl);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&ct(t,l,n,n[10],e?pt(l,n[10],r,Zo):$t(n[10]),sl)},i(n){e||(_(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function es(o){let e;return{c(){e=y("X")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ts(o){let e,l,t,n,r,s,f,i,a;function u(p){o[8](p)}let c={$$slots:{default:[Xo]},$$scope:{ctx:o}};return o[0]!==void 0&&(c.checked=o[0]),l=new Ve({props:c}),H.push(()=>E(l,"checked",u)),s=new Qr({props:{$$slots:{default:[xo]},$$scope:{ctx:o}}}),i=new Ge({props:{$$slots:{default:[es]},$$scope:{ctx:o}}}),i.$on("click",o[6]),{c(){e=S("div"),b(l.$$.fragment),n=L(),r=S("span"),b(s.$$.fragment),f=L(),b(i.$$.fragment),ie(e,"display","flex"),ie(e,"justify-content","space-between")},m(p,m){d(p,e,m),w(l,e,null),$(e,n),$(e,r),w(s,r,null),$(r,f),w(i,r,null),a=!0},p(p,m){const k={};m&1028&&(k.$$scope={dirty:m,ctx:p}),!t&&m&1&&(t=!0,k.checked=p[0],B(()=>t=!1)),l.$set(k);const C={};m&1024&&(C.$$scope={dirty:m,ctx:p}),s.$set(C);const T={};m&1024&&(T.$$scope={dirty:m,ctx:p}),i.$set(T)},i(p){a||(_(l.$$.fragment,p),_(s.$$.fragment,p),_(i.$$.fragment,p),a=!0)},o(p){g(l.$$.fragment,p),g(s.$$.fragment,p),g(i.$$.fragment,p),a=!1},d(p){p&&h(e),v(l),v(s),v(i)}}}function al(o){let e;const l=o[7].controls,t=ft(l,o,o[10],ol);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&ct(t,l,n,n[10],e?pt(l,n[10],r,Vo):$t(n[10]),ol)},i(n){e||(_(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function ns(o){let e,l,t,n,r,s;e=new Ve({props:{checked:o[4].has(o[1]),$$slots:{default:[Ko]},$$scope:{ctx:o}}}),e.$on("change",o[5]),n=new ze({props:{small:!0,$$slots:{default:[ts]},$$scope:{ctx:o}}});let f=o[0]&&al(o);return{c(){b(e.$$.fragment),l=L(),t=S("div"),b(n.$$.fragment),r=L(),f&&f.c()},m(i,a){w(e,i,a),d(i,l,a),d(i,t,a),w(n,t,null),$(t,r),f&&f.m(t,null),o[9](t),s=!0},p(i,[a]){const u={};a&18&&(u.checked=i[4].has(i[1])),a&1028&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&1029&&(c.$$scope={dirty:a,ctx:i}),n.$set(c),i[0]?f?(f.p(i,a),a&1&&_(f,1)):(f=al(i),f.c(),_(f,1),f.m(t,null)):f&&(be(),g(f,1,1,()=>{f=null}),we())},i(i){s||(_(e.$$.fragment,i),_(n.$$.fragment,i),_(f),s=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),g(f),s=!1},d(i){i&&(h(l),h(t)),v(e,i),v(n),f&&f.d(),o[9](null)}}}function ls(o,e,l){let t;W(o,Zt,k=>l(4,t=k));let{$$slots:n={},$$scope:r}=e,{name:s}=e,{title:f}=e,{show:i}=e;i&&(t.add(s),Zt.set(t));let a=null;wn(()=>{mn.update(k=>(k.delete(s),k))});function u(){Zt.update(k=>(k.has(s)?(k.delete(s),l(0,i=!1)):(k.add(s),l(0,i=!0)),k))}function c(){t.delete(s),Zt.set(t),l(0,i=!1)}function p(k){i=k,l(0,i)}function m(k){H[k?"unshift":"push"](()=>{a=k,l(3,a),l(1,s)})}return o.$$set=k=>{"name"in k&&l(1,s=k.name),"title"in k&&l(2,f=k.title),"show"in k&&l(0,i=k.show),"$$scope"in k&&l(10,r=k.$$scope)},o.$$.update=()=>{o.$$.dirty&10&&a&&mn.update(k=>(l(3,a.style.display="none",a),k.set(s,a),k))},[i,s,f,a,t,u,c,n,p,m,r]}class ue extends K{constructor(e){super(),X(this,e,ls,ns,J,{name:1,title:2,show:0})}}function fl(o){const e=o[7].OA21CD;o[8]=e;const l=o[7][o[0].kind];o[9]=l}function rs(o){let e,l,t,n,r,s,f;return t=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[is]},$$scope:{ctx:o}}}),r=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[as]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=y("Population density data is from the 2021 census, via "),b(t.$$.fragment),n=y(". Output area boundaries from "),b(r.$$.fragment),s=y(".")},m(i,a){d(i,e,a),$(e,l),w(t,e,null),$(e,n),w(r,e,null),$(e,s),f=!0},i(i){f||(_(t.$$.fragment,i),_(r.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(r.$$.fragment,i),f=!1},d(i){i&&h(e),v(t),v(r)}}}function os(o){let e,l,t,n,r,s,f,i,a;return r=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[fs]},$$scope:{ctx:o}}}),f=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[us]},$$scope:{ctx:o}}}),{c(){e=S("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,l=L(),t=S("p"),n=y("Car/van availability data is from the 2021 census, via "),b(r.$$.fragment),s=y(". Output area boundaries from "),b(f.$$.fragment),i=y(".")},m(u,c){d(u,e,c),d(u,l,c),d(u,t,c),$(t,n),w(r,t,null),$(t,s),w(f,t,null),$(t,i),a=!0},i(u){a||(_(r.$$.fragment,u),_(f.$$.fragment,u),a=!0)},o(u){g(r.$$.fragment,u),g(f.$$.fragment,u),a=!1},d(u){u&&(h(e),h(l),h(t)),v(r),v(f)}}}function ss(o){let e,l,t,n,r,s,f;return t=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[cs]},$$scope:{ctx:o}}}),r=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[$s]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=y("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),n=y(". Output area boundaries from "),b(r.$$.fragment),s=y(".")},m(i,a){d(i,e,a),$(e,l),w(t,e,null),$(e,n),w(r,e,null),$(e,s),f=!0},i(i){f||(_(t.$$.fragment,i),_(r.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(r.$$.fragment,i),f=!1},d(i){i&&h(e),v(t),v(r)}}}function is(o){let e;return{c(){e=y(`NOMIS TS006
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function as(o){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function fs(o){let e;return{c(){e=y(`NOMIS TS045
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function us(o){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function cs(o){let e;return{c(){e=y(`NOMIS TS045
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function $s(o){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ps(o){let e,l,t,n,r,s;const f=[ss,os,rs],i=[];function a(u,c){return u[0].kind=="percent_households_with_car"?0:u[0].kind=="average_cars_per_household"?1:2}return l=a(o),t=i[l]=f[l](o),r=new Te({}),{c(){e=S("span"),t.c(),n=L(),b(r.$$.fragment),A(e,"slot","help")},m(u,c){d(u,e,c),i[l].m(e,null),$(e,n),w(r,e,null),s=!0},p(u,c){let p=l;l=a(u),l!==p&&(be(),g(i[p],1,1,()=>{i[p]=null}),we(),t=i[l],t||(t=i[l]=f[l](u),t.c()),_(t,1),t.m(e,n))},i(u){s||(_(t),_(r.$$.fragment,u),s=!0)},o(u){g(t),g(r.$$.fragment,u),s=!1},d(u){u&&h(e),i[l].d(),v(r)}}}function ms(o){let e,l,t,n;return t=new qe({props:{colorScale:o[1],limits:mt(o[0].kind).map(ul)}}),{c(){e=S("p"),e.textContent="(people per square kilometres)",l=L(),b(t.$$.fragment)},m(r,s){d(r,e,s),d(r,l,s),w(t,r,s),n=!0},p(r,s){const f={};s&1&&(f.limits=mt(r[0].kind).map(ul)),t.$set(f)},i(r){n||(_(t.$$.fragment,r),n=!0)},o(r){g(t.$$.fragment,r),n=!1},d(r){r&&(h(e),h(l)),v(t,r)}}}function _s(o){let e,l;return e=new qe({props:{colorScale:o[1],limits:mt(o[0].kind)}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=mt(t[0].kind)),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function gs(o){let e,l;return e=new qe({props:{colorScale:o[1],limits:mt(o[0].kind)}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=mt(t[0].kind)),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ds(o){let e,l,t,n,r,s,f;function i(m){o[4](m)}let a={label:"Dataset",choices:[["percent_households_with_car","Percent of households with a car"],["average_cars_per_household","Average cars per household"],["population_density","Population density"]],inlineSmall:!0};o[0].kind!==void 0&&(a.value=o[0].kind),l=new vn({props:a}),H.push(()=>E(l,"value",i));const u=[gs,_s,ms],c=[];function p(m,k){return m[0].kind=="percent_households_with_car"?0:m[0].kind=="average_cars_per_household"?1:m[0].kind=="population_density"?2:-1}return~(r=p(o))&&(s=c[r]=u[r](o)),{c(){e=S("div"),b(l.$$.fragment),n=L(),s&&s.c(),A(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(m,k){d(m,e,k),w(l,e,null),$(e,n),~r&&c[r].m(e,null),f=!0},p(m,k){const C={};!t&&k&1&&(t=!0,C.value=m[0].kind,B(()=>t=!1)),l.$set(C);let T=r;r=p(m),r===T?~r&&c[r].p(m,k):(s&&(be(),g(c[T],1,1,()=>{c[T]=null}),we()),~r?(s=c[r],s?s.p(m,k):(s=c[r]=u[r](m),s.c()),_(s,1),s.m(e,null)):s=null)},i(m){f||(_(l.$$.fragment,m),_(s),f=!0)},o(m){g(l.$$.fragment,m),g(s),f=!1},d(m){m&&h(e),v(l),~r&&c[r].d()}}}function hs(o){let e,l,t,n=o[9].toLocaleString()+"",r,s,f=o[8]+"",i;return{c(){e=S("p"),l=y("There are "),t=S("b"),r=y(n),s=y(`
          people per square kilometre in `),i=y(f)},m(a,u){d(a,e,u),$(e,l),$(e,t),$(t,r),$(e,s),$(e,i)},p(a,u){u&129&&n!==(n=a[9].toLocaleString()+"")&&G(r,n),u&128&&f!==(f=a[8]+"")&&G(i,f)},d(a){a&&h(e)}}}function bs(o){let e,l,t=o[8]+"",n,r,s,f=o[9]+"",i,a;return{c(){e=S("p"),l=y("Households in "),n=y(t),r=y(` have an average of
          `),s=S("b"),i=y(f),a=y(`
          cars`)},m(u,c){d(u,e,c),$(e,l),$(e,n),$(e,r),$(e,s),$(s,i),$(e,a)},p(u,c){c&128&&t!==(t=u[8]+"")&&G(n,t),c&129&&f!==(f=u[9]+"")&&G(i,f)},d(u){u&&h(e)}}}function ws(o){let e,l,t=o[9]+"",n,r,s,f=o[8]+"",i,a;return{c(){e=S("p"),l=S("b"),n=y(t),r=y("%"),s=y(`
          of households in `),i=y(f),a=y(" have 1 or more cars")},m(u,c){d(u,e,c),$(e,l),$(l,n),$(l,r),$(e,s),$(e,i),$(e,a)},p(u,c){c&129&&t!==(t=u[9]+"")&&G(n,t),c&128&&f!==(f=u[8]+"")&&G(i,f)},d(u){u&&h(e)}}}function vs(o){fl(o);let e;function l(r,s){return r[0].kind=="percent_households_with_car"?ws:r[0].kind=="average_cars_per_household"?bs:hs}let t=l(o),n=t(o);return{c(){n.c(),e=ve()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){fl(r),t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function ks(o){let e,l;return e=new fe({props:{$$slots:{default:[vs,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1153&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ys(o){let e,l,t,n;const r=[z(Ee),{sourceLayer:Ee},{paint:{"fill-color":me(["get",o[0].kind],mt(o[0].kind),o[1]),"fill-opacity":te(.5,.7)}},{layout:{visibility:o[0].show?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ks]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new Fe({props:s}),e.$on("click",o[3]);const f=[z(`${Ee}-outline`),{sourceLayer:Ee},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0].show?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(z(Ee)),u&0&&{sourceLayer:Ee},u&3&&{paint:{"fill-color":me(["get",a[0].kind],mt(a[0].kind),a[1]),"fill-opacity":te(.5,.7)}},u&1&&{layout:{visibility:a[0].show?"visible":"none"}},r[4],r[5],r[6]]):{};u&1025&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?le(f,[u&0&&oe(z(`${Ee}-outline`)),u&0&&{sourceLayer:Ee},f[2],u&1&&{layout:{visibility:a[0].show?"visible":"none"}}]):{};t.$set(p)},i(a){n||(_(e.$$.fragment,a),_(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Ss(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Ee,title:"2021 census",$$slots:{controls:[ds],help:[ps]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Ee}.pmtiles`,$$slots:{default:[ys]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&1025&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&1025&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ee="census_output_areas";function Ts(o){return o.show?o.kind:null}function Cs(o){return{show:!0,kind:o}}function mt(o){return o=="percent_households_with_car"?[0,20,40,60,80,100]:o=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const ul=o=>o.toLocaleString();function Ls(o,e,l){let t,n=ee.sequential_low_to_high,s=Ht(Ee,{show:!1,kind:"percent_households_with_car"},Ts,Cs);W(o,s,u=>l(0,t=u));function f(u){let c=u.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${c}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${c}`,"_blank")}function i(u){o.$$.not_equal(t.kind,u)&&(t.kind=u,s.set(t))}function a(u){o.$$.not_equal(t.show,u)&&(t.show=u,s.set(t))}return[t,n,s,f,i,a]}class Ms extends K{constructor(e){super(),X(this,e,Ls,Ss,J,{})}}function Is(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Os(o){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function js(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/8369f71423ba474ebdbac60a539b53c8_0/explore",$$slots:{default:[Os]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(", as of May 2024."),s=L(),b(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(_(n.$$.fragment,a),_(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Ns(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&h(e)}}}function Ps(o){let e,l;return e=new fe({props:{$$slots:{default:[Ns,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Rs(o){let e,l,t,n;const r=[z(dt),{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Ps]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new Fe({props:s}),e.$on("click",As);const f=[z(`${dt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(z(dt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?le(f,[u&0&&oe(z(`${dt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(_(e.$$.fragment,a),_(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Ds(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:dt,title:Fs,$$slots:{help:[js],icon:[Is]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new qt({props:{data:`${ce()}/v1/${dt}.geojson`,$$slots:{default:[Rs]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let dt="combined_authorities",Fs="Combined authorities";function As(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.CAUTH24CD}`,"_blank")}function Gs(o,e,l){let t,n=ee.combined_authorities,r=pe(dt);W(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class zs extends K{constructor(e){super(),X(this,e,Gs,Ds,J,{})}}function qs(o){let e;return{c(){e=y(`DLUCH GIS
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Hs(o){let e;return{c(){e=y(`here
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Es(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[qs]},$$scope:{ctx:o}}}),s=new re({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Hs]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),t=y("The 2019 English IMD scores come from "),b(n.$$.fragment),r=y(`. Note the LSOAs identified are from the 2011 census. A
      detailed breakdown of the score across different categories can be found `),b(s.$$.fragment),f=y("."),i=L(),b(a.$$.fragment),A(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(l,t),w(n,l,null),$(l,r),w(s,l,null),$(l,f),$(e,i),w(a,e,null),u=!0},p(c,p){const m={};p&64&&(m.$$scope={dirty:p,ctx:c}),n.$set(m);const k={};p&64&&(k.$$scope={dirty:p,ctx:c}),s.$set(k)},i(c){u||(_(n.$$.fragment,c),_(s.$$.fragment,c),_(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(s.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(s),v(a)}}}function Bs(o){let e,l,t;return l=new qe({props:{colorScale:o[1],limits:["Least deprived","Most deprived"]}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Us(o){let e,l=o[5].LSOA11CD+"",t,n,r,s=o[5].score+"",f,i,a,u,c,p=o[5].rank.toLocaleString()+"",m,k;return{c(){e=S("p"),t=y(l),n=y(` has an IMD score of
        `),r=S("b"),f=y(s),i=L(),a=S("p"),u=y("Rank: "),c=S("b"),m=y(p),k=y(`
        / 32,844 LSOAs`)},m(C,T){d(C,e,T),$(e,t),$(e,n),$(e,r),$(r,f),d(C,i,T),d(C,a,T),$(a,u),$(a,c),$(c,m),$(a,k)},p(C,T){T&32&&l!==(l=C[5].LSOA11CD+"")&&G(t,l),T&32&&s!==(s=C[5].score+"")&&G(f,s),T&32&&p!==(p=C[5].rank.toLocaleString()+"")&&G(m,p)},d(C){C&&(h(e),h(i),h(a))}}}function Ws(o){let e,l;return e=new fe({props:{$$slots:{default:[Us,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ys(o){let e,l,t,n;const r=[z(Be),{sourceLayer:Be},{paint:{"fill-color":me(["-",10,["get","decile"]],o[2],o[1]),"fill-opacity":te(.5,.7)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Ws]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new Fe({props:s});const f=[z(`${Be}-outline`),{sourceLayer:Be},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&7?le(r,[u&0&&oe(z(Be)),u&0&&{sourceLayer:Be},u&6&&{paint:{"fill-color":me(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":te(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?le(f,[u&0&&oe(z(`${Be}-outline`)),u&0&&{sourceLayer:Be},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(_(e.$$.fragment,a),_(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Js(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Be,title:Vs,$$slots:{controls:[Bs],help:[Es]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Be}.pmtiles`,$$slots:{default:[Ys]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Be="imd",Vs="Indices of Multiple Deprivation";function Zs(o,e,l){let t,n=ee.sequential_low_to_high,r=[0,2,4,6,8,10],s=pe(Be);W(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Qs extends K{constructor(e){super(),X(this,e,Zs,Js,J,{})}}function Ks(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Xs(o){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function xs(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/fb6ab0ce776243339e45e33444f431c8_0/explore",$$slots:{default:[Xs]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(", as of May 2024."),s=L(),b(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(_(n.$$.fragment,a),_(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function ei(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&h(e)}}}function ti(o){let e,l;return e=new fe({props:{$$slots:{default:[ei,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ni(o){let e,l,t,n;const r=[z(ht),{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ti]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new Fe({props:s}),e.$on("click",oi);const f=[z(`${ht}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(z(ht)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?le(f,[u&0&&oe(z(`${ht}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(_(e.$$.fragment,a),_(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function li(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:ht,title:ri,$$slots:{help:[xs],icon:[Ks]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new qt({props:{data:`${ce()}/v1/${ht}.geojson`,$$slots:{default:[ni]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let ht="local_authority_districts",ri="Local Authority Districts";function oi(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.LAD24CD}`,"_blank")}function si(o,e,l){let t,n=ee.local_authority_districts,r=pe(ht);W(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class ii extends K{constructor(e){super(),X(this,e,si,li,J,{})}}function ai(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function fi(o){let e;return{c(){e=y(`local authority
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ui(o){let e;return{c(){e=y(`national park authorit
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ci(o){let e;return{c(){e=y(`development corporation
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function $i(o){let e;return{c(){e=y("this map")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function pi(o){let e;return{c(){e=y(`planning.data.gov.uk
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function mi(o){let e,l,t,n,r,s,f,i,a,u,c,p,m,k,C,T,j,D,N,M,O,I,R;return n=new re({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[fi]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ui]},$$scope:{ctx:o}}}),i=new re({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[ci]},$$scope:{ctx:o}}}),k=new re({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[$i]},$$scope:{ctx:o}}}),N=new re({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[pi]},$$scope:{ctx:o}}}),I=new Te({}),{c(){e=S("span"),l=S("p"),t=y("LPAs may be a "),b(n.$$.fragment),r=y(", "),b(s.$$.fragment),f=y("y, or "),b(i.$$.fragment),a=y("."),u=L(),c=S("p"),p=S("strong"),m=y(`Note there are overlapping LPAs near Northhamptonshire. Only one
        authority name is shown when hovering. Use `),b(k.$$.fragment),C=y(" to get more details."),T=L(),j=S("p"),D=y("Data from ONS Geography via "),b(N.$$.fragment),M=y(", as of November 2022."),O=L(),b(I.$$.fragment),A(e,"slot","help")},m(P,q){d(P,e,q),$(e,l),$(l,t),w(n,l,null),$(l,r),w(s,l,null),$(l,f),w(i,l,null),$(l,a),$(e,u),$(e,c),$(c,p),$(p,m),w(k,p,null),$(p,C),$(e,T),$(e,j),$(j,D),w(N,j,null),$(j,M),$(e,O),w(I,e,null),R=!0},p(P,q){const Q={};q&32&&(Q.$$scope={dirty:q,ctx:P}),n.$set(Q);const ae={};q&32&&(ae.$$scope={dirty:q,ctx:P}),s.$set(ae);const F={};q&32&&(F.$$scope={dirty:q,ctx:P}),i.$set(F);const x={};q&32&&(x.$$scope={dirty:q,ctx:P}),k.$set(x);const V={};q&32&&(V.$$scope={dirty:q,ctx:P}),N.$set(V)},i(P){R||(_(n.$$.fragment,P),_(s.$$.fragment,P),_(i.$$.fragment,P),_(k.$$.fragment,P),_(N.$$.fragment,P),_(I.$$.fragment,P),R=!0)},o(P){g(n.$$.fragment,P),g(s.$$.fragment,P),g(i.$$.fragment,P),g(k.$$.fragment,P),g(N.$$.fragment,P),g(I.$$.fragment,P),R=!1},d(P){P&&h(e),v(n),v(s),v(i),v(k),v(N),v(I)}}}function _i(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&h(e)}}}function gi(o){let e,l;return e=new fe({props:{$$slots:{default:[_i,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function di(o){let e,l,t,n;const r=[z(Ue),{sourceLayer:Ue},{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[gi]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new Fe({props:s});const f=[z(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(z(Ue)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?le(f,[u&0&&oe(z(`${Ue}-outline`)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(_(e.$$.fragment,a),_(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function hi(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ue,title:bi,$$slots:{help:[mi],icon:[ai]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Ue}.pmtiles`,$$slots:{default:[di]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ue="local_planning_authorities",bi="Local Planning Authorities";function wi(o,e,l){let t,n=ee.local_planning_authorities,r=pe(Ue);W(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class vi extends K{constructor(e){super(),X(this,e,wi,hi,J,{})}}function ki(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function yi(o){let e;return{c(){e=y(`Ordnance Survey Boundary-Line
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Si(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[yi]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(", as of October 2024."),s=L(),b(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(_(n.$$.fragment,a),_(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Ti(o){let e,l=o[4].Name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].Name+"")&&G(t,l)},d(n){n&&h(e)}}}function Ci(o){let e,l;return e=new fe({props:{$$slots:{default:[Ti,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Li(o){let e,l,t,n;const r=[z(We),{sourceLayer:We},{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Ci]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new Fe({props:s}),e.$on("click",Oi);const f=[z(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":o[1],"line-width":5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(z(We)),u&0&&{sourceLayer:We},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?le(f,[u&0&&oe(z(`${We}-outline`)),u&0&&{sourceLayer:We},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(_(e.$$.fragment,a),_(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Mi(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:We,title:Ii,$$slots:{help:[Si],icon:[ki]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${We}.pmtiles`,$$slots:{default:[Li]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let We="parliamentary_constituencies",Ii="Parliamentary constituencies";function Oi(o){let e=o.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function ji(o,e,l){let t,n=ee.parliamentary_constituencies,r=pe(We);W(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Ni extends K{constructor(e){super(),X(this,e,ji,Mi,J,{})}}function Pi(o){let e;return{c(){e=y(`DEFRA
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ri(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Pi]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Most layers show air quality data from "),b(n.$$.fragment),r=y(`. The measurements are annual means, in units of Âµgm
      `),s=S("sup"),s.textContent="3",f=y(`
      . Note the particulate matter layers are not corrected for natural sources.`),i=L(),b(a.$$.fragment),A(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(l,t),w(n,l,null),$(l,r),$(l,s),$(l,f),$(e,i),w(a,e,null),u=!0},p(c,p){const m={};p&4096&&(m.$$scope={dirty:p,ctx:c}),n.$set(m)},i(c){u||(_(n.$$.fragment,c),_(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(a)}}}function Di(o){let e,l,t,n,r,s=o[3](o[0].pollutant)+"",f,i,a,u,c,p,m,k,C,T,j,D,N;function M(I){o[5](I)}let O={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return o[0].pollutant!==void 0&&(O.value=o[0].pollutant),l=new Gt({props:O}),H.push(()=>E(l,"value",M)),{c(){e=S("div"),b(l.$$.fragment),n=L(),r=S("p"),f=y(s),i=L(),a=S("div"),u=S("label"),c=y(`Opacity
        `),p=S("input"),m=L(),k=S("img"),A(p,"type","range"),A(p,"min","0"),A(p,"max","100"),Qt(k.src,C=o[4](o[0].pollutant))||A(k,"src",C),A(k,"width",150),A(k,"alt",T=`Legend for ${o[0].pollutant} layer`),A(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(I,R){d(I,e,R),w(l,e,null),$(e,n),$(e,r),$(r,f),$(e,i),$(e,a),$(a,u),$(u,c),$(u,p),Qe(p,o[0].opacity),$(e,m),$(e,k),j=!0,D||(N=[ut(p,"change",o[6]),ut(p,"input",o[6])],D=!0)},p(I,R){const P={};!t&&R&1&&(t=!0,P.value=I[0].pollutant,B(()=>t=!1)),l.$set(P),(!j||R&1)&&s!==(s=I[3](I[0].pollutant)+"")&&G(f,s),R&1&&Qe(p,I[0].opacity),(!j||R&1&&!Qt(k.src,C=I[4](I[0].pollutant)))&&A(k,"src",C),(!j||R&1&&T!==(T=`Legend for ${I[0].pollutant} layer`))&&A(k,"alt",T)},i(I){j||(_(l.$$.fragment,I),j=!0)},o(I){g(l.$$.fragment,I),j=!1},d(I){I&&h(e),v(l),D=!1,hr(N)}}}function Fi(o){let e,l;const t=[z(nn),{paint:{"raster-opacity":o[0].opacity/100}},{layout:{visibility:o[0].show?"visible":"none"}}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Kr({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(z(nn)),s&1&&{paint:{"raster-opacity":r[0].opacity/100}},s&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Ai(o){let e,l,t,n,r;function s(i){o[7](i)}let f={name:nn,title:Gi,$$slots:{controls:[Di],help:[Ri]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new yo({props:{tiles:[o[1]],tileSize:256,$$slots:{default:[Fi]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&4097&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&2&&(c.tiles=[i[1]]),a&4097&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let nn="pollution",Gi="Pollution";function zi(o){return o.show?`${o.pollutant}/${o.opacity}`:null}function qi(o){let[e,l]=o.split("/");return{show:!0,pollutant:e,opacity:parseInt(l)}}function Hi(o,e,l){let t,n,r,f=Ht(nn,{show:!1,pollutant:"PM25_viridis",opacity:50},zi,qi);W(o,f,C=>l(0,r=C));function i(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${r.pollutant}/MapServer/WMSServer`}function a(C){return t[1]}function u(C){let T=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${i()}?bbox={bbox-epsg-3857}&${T}`}function c(C){let T=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${i()}?${T}`}function p(C){o.$$.not_equal(r.pollutant,C)&&(r.pollutant=C,f.set(r))}function m(){r.opacity=Kt(this.value),f.set(r)}function k(C){o.$$.not_equal(r.show,C)&&(r.show=C,f.set(r))}return o.$$.update=()=>{o.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[r.pollutant]),o.$$.dirty&1&&l(1,n=u(r.pollutant))},[r,n,f,a,c,p,m,k]}class Ei extends K{constructor(e){super(),X(this,e,Hi,Ai,J,{})}}function Bi(o){let e;return{c(){e=y(`DEFRA
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ui(o){let e,l,t,n,r,s,f,i,a,u;return s=new re({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[Bi]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),l.textContent=`This is the LAeq,16h dataset showing annual average noise levels in units
      of decibels for the 16-hour period between 7am and 11pm. Only roads in
      areas with at least 100,000 people are included.`,t=L(),n=S("p"),r=y("Data from June 2019, produced by "),b(s.$$.fragment),f=y(". See there for methodology details"),i=L(),b(a.$$.fragment),A(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(e,t),$(e,n),$(n,r),w(s,n,null),$(n,f),$(e,i),w(a,e,null),u=!0},p(c,p){const m={};p&32&&(m.$$scope={dirty:p,ctx:c}),s.$set(m)},i(c){u||(_(s.$$.fragment,c),_(a.$$.fragment,c),u=!0)},o(c){g(s.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(s),v(a)}}}function Wi(o){let e,l,t;return l=new qe({props:{colorScale:o[1],limits:["55","65","75",">"]}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Yi(o){let e,l=o[4].noiseclass+"",t,n,r=cl(o[4].noiseclass)+"",s,f;return{c(){e=S("p"),t=y(l),n=y(" dB ("),s=y(r),f=y(")")},m(i,a){d(i,e,a),$(e,t),$(e,n),$(e,s),$(e,f)},p(i,a){a&16&&l!==(l=i[4].noiseclass+"")&&G(t,l),a&16&&r!==(r=cl(i[4].noiseclass)+"")&&G(s,r)},d(i){i&&h(e)}}}function Ji(o){let e,l;return e=new fe({props:{$$slots:{default:[Yi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Vi(o){let e,l;const t=[z(bt),{sourceLayer:bt},{paint:{"fill-color":xe(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":te(.5,.8)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Ji]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Fe({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&3?le(t,[s&0&&oe(z(bt)),s&0&&{sourceLayer:bt},s&2&&{paint:{"fill-color":xe(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":te(.5,.8)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Zi(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:bt,title:Qi,$$slots:{controls:[Wi],help:[Ui]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${bt}.pmtiles`,$$slots:{default:[Vi]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let bt="road_noise",Qi="Road noise";function cl(o){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[o]}function Ki(o,e,l){let t,n=[ee.sequential_low_to_high[0],ee.sequential_low_to_high[2],ee.sequential_low_to_high[4]],r=pe(bt);W(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Xi extends K{constructor(e){super(),X(this,e,Ki,Zi,J,{})}}function xi(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function ea(o){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ta(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[ea]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(", as of May 2023."),s=L(),b(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(_(n.$$.fragment,a),_(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function na(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&h(e)}}}function la(o){let e,l;return e=new fe({props:{$$slots:{default:[na,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ra(o){let e,l,t,n;const r=[z(Ye),{sourceLayer:Ye},{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[la]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new Fe({props:s}),e.$on("click",ia);const f=[z(`${Ye}-outline`),{sourceLayer:Ye},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(z(Ye)),u&0&&{sourceLayer:Ye},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?le(f,[u&0&&oe(z(`${Ye}-outline`)),u&0&&{sourceLayer:Ye},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(_(e.$$.fragment,a),_(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function oa(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ye,title:sa,$$slots:{help:[ta],icon:[xi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Ye}.pmtiles`,$$slots:{default:[ra]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ye="wards",sa="Wards";function ia(o){let e=encodeURIComponent(o.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function aa(o,e,l){let t,n=ee.wards,r=pe(Ye);W(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class fa extends K{constructor(e){super(),X(this,e,aa,oa,J,{})}}function ua(o){let e;return{c(){e=y("Open Data Commons Open Database License")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ca(o){let e,l,t,n;return t=new re({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[ua]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=y("License: "),b(t.$$.fragment)},m(r,s){d(r,e,s),$(e,l),w(t,e,null),n=!0},p(r,[s]){const f={};s&1&&(f.$$scope={dirty:s,ctx:r}),t.$set(f)},i(r){n||(_(t.$$.fragment,r),n=!0)},o(r){g(t.$$.fragment,r),n=!1},d(r){r&&h(e),v(t)}}}class et extends K{constructor(e){super(),X(this,e,null,ca,J,{})}}function $a(o){let e,l,t;return l=new Se({props:{color:ee.bus_route_with_lane}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function pa(o){let e;return{c(){e=y(`GTFS
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ma(o){let e,l,t,n,r,s,f,i,a,u;return s=new re({props:{href:"https://gtfs.org",$$slots:{default:[pa]},$$scope:{ctx:o}}}),a=new et({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows all roads with at least one bus route crossing them. It also
      shows whether the road has a bus lane or not.`,t=L(),n=S("p"),r=y("Note this data is from OpenStreetMap (as of 20 October 2024), not "),b(s.$$.fragment),f=y(`, and doesn't include which routes are run or the frequency
      of service.`),i=L(),b(a.$$.fragment),A(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(e,t),$(e,n),$(n,r),w(s,n,null),$(n,f),$(e,i),w(a,e,null),u=!0},p(c,p){const m={};p&16&&(m.$$scope={dirty:p,ctx:c}),s.$set(m)},i(c){u||(_(s.$$.fragment,c),_(a.$$.fragment,c),u=!0)},o(c){g(s.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(s),v(a)}}}function _a(o){let e;return{c(){e=S("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ga(o){let e;return{c(){e=S("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function da(o){let e;function l(r,s){return r[3].has_bus_lane?ga:_a}let t=l(o),n=t(o);return{c(){n.c(),e=ve()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function ha(o){let e,l;return e=new fe({props:{$$slots:{default:[da,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ba(o){let e,l;const t=[z(wt),{sourceLayer:wt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],ee.bus_route_with_lane,ee.bus_route_without_lane],"line-width":5,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[ha]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(z(wt)),s&0&&{sourceLayer:wt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function wa(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:wt,title:va,$$slots:{help:[ma],icon:[$a]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${wt}.pmtiles`,$$slots:{default:[ba]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let wt="bus_routes",va="Bus routes";function ka(o,e,l){let t,n=pe(wt);W(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class ya extends K{constructor(e){super(),X(this,e,ka,wa,J,{})}}function $l(o){const e=Ra(o[9]);o[10]=e[0],o[11]=e[1],o[12]=e[2]}function pl(o,e,l){const t=o.slice();return t[10]=e[l][0],t[13]=e[l][1],t[14]=e[l][2],t[15]=e,t[16]=l,t}function Sa(o){let e,l,t,n,r,s,f,i,a;return i=new et({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
      of 20 October 2024).`,t=L(),n=S("ul"),n.innerHTML=`<li><b>Separated tracks</b>
        include fully or partly segregated cycletracks alongside a carriageway, stepped
        cycletracks, and tracks off the carriageway entirely. They&#39;re also separated
        from foot traffic.</li> <li><b>Unprotected lanes</b>
        are mandatory or advisory lanes on the carriageway, without any physical
        protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
        paths are split between cycle and foot traffic, and are separated from motor
        traffic somehow. There can be segregation between cyclists and pedestrians
        or not.</li>`,r=L(),s=S("p"),s.textContent=`Note there are many known limitations with this layer. Data in
      OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
      processing is also imperfect. You can click a segment to see full
      OpenStreetMap data. Please do report issues with the classification or
      data.`,f=L(),b(i.$$.fragment),A(e,"slot","help")},m(u,c){d(u,e,c),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(e,f),w(i,e,null),a=!0},p:Z,i(u){a||(_(i.$$.fragment,u),a=!0)},o(u){g(i.$$.fragment,u),a=!1},d(u){u&&h(e),v(i)}}}function Ta(o){let e,l,t=o[13]+"",n,r,s;return e=new Se({props:{color:o[14]}}),{c(){b(e.$$.fragment),l=L(),n=y(t),r=L()},m(f,i){w(e,f,i),d(f,l,i),d(f,n,i),d(f,r,i),s=!0},p:Z,i(f){s||(_(e.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),s=!1},d(f){f&&(h(l),h(n),h(r)),v(e,f)}}}function ml(o){let e,l,t;function n(s){o[4](s,o[10])}let r={$$slots:{default:[Ta]},$$scope:{ctx:o}};return o[0][o[10]]!==void 0&&(r.checked=o[0][o[10]]),e=new Ve({props:r}),H.push(()=>E(e,"checked",n)),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,f){o=s;const i={};f&131072&&(i.$$scope={dirty:f,ctx:o}),!l&&f&5&&(l=!0,i.checked=o[0][o[10]],B(()=>l=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Ca(o){let e,l,t=he(o[2]),n=[];for(let s=0;s<t.length;s+=1)n[s]=ml(pl(o,t,s));const r=s=>g(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ve()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);d(s,e,f),l=!0},p(s,f){if(f&5){t=he(s[2]);let i;for(i=0;i<t.length;i+=1){const a=pl(s,t,i);n[i]?(n[i].p(a,f),_(n[i],1)):(n[i]=ml(a),n[i].c(),_(n[i],1),n[i].m(e.parentNode,e))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)_(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(s){s&&h(e),Xe(n,s)}}}function La(o){let e,l,t;return l=new ze({props:{small:!0,$$slots:{default:[Ca]},$$scope:{ctx:o}}}),{c(){e=S("div"),b(l.$$.fragment),A(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const s={};r&131073&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ma(o){$l(o);let e,l=o[10]+"",t,n,r,s,f,i=o[11]+"",a,u,c,p,m=o[12]+"",k;return{c(){e=S("h2"),t=y(l),n=L(),r=S("p"),s=y("Direction: "),f=S("b"),a=L(),u=S("p"),c=y("Width: "),p=S("b"),k=y(m)},m(C,T){d(C,e,T),$(e,t),d(C,n,T),d(C,r,T),$(r,s),$(r,f),f.innerHTML=i,d(C,a,T),d(C,u,T),$(u,c),$(u,p),$(p,k)},p(C,T){$l(C),T&512&&l!==(l=C[10]+"")&&G(t,l),T&512&&i!==(i=C[11]+"")&&(f.innerHTML=i),T&512&&m!==(m=C[12]+"")&&G(k,m)},d(C){C&&(h(e),h(n),h(r),h(a),h(u))}}}function Ia(o){let e,l;return e=new fe({props:{$$slots:{default:[Ma,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&131584&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Oa(o){let e,l;const t=[z(vt),{sourceLayer:vt},{paint:{"line-color":xe(["get","kind"],{track:ee.cycle_paths.track,lane:ee.cycle_paths.lane,shared_use_segregated:ee.cycle_paths.shared_use_segregated,shared_use_unsegregated:ee.cycle_paths.shared_use_unsegregated},"red"),"line-width":De,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[Ia]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),e.$on("click",Da),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&9?le(t,[s&0&&oe(z(vt)),s&0&&{sourceLayer:vt},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&9&&{filter:r[3](r[0])},t[5],t[6],t[7]]):{};s&131072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ja(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:vt,title:Na,$$slots:{controls:[La],help:[Sa]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${vt}.pmtiles`,$$slots:{default:[Oa]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&131073&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&131073&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let vt="cycle_paths",Na="Cycle paths";function Pa(o){return{show:!0,track:o.includes("track"),lane:o.includes("lane"),shared_use_segregated:o.includes("shared_use_segregated"),shared_use_unsegregated:o.includes("shared_use_unsegregated")}}function Ra(o){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[o.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[o.direction],t=o.width=="unknown"?"unknown":`${o.width} meters`;return[e,`${l} ${o.direction}`,t]}function Da(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function Fa(o,e,l){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],r={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(p){return p.show?n.filter(m=>p[m]).join(","):null}let f=Ht(vt,r,s,Pa);W(o,f,p=>l(0,t=p));let i=[["track","Separated tracks",ee.cycle_paths.track],["lane","Unprotected lanes",ee.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",ee.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",ee.cycle_paths.shared_use_unsegregated]];function a(p){let m=n.filter(k=>p[k]);return["in",["get","kind"],["literal",m]]}function u(p,m){o.$$.not_equal(t[m],p)&&(t[m]=p,f.set(t))}function c(p){o.$$.not_equal(t.show,p)&&(t.show=p,f.set(t))}return[t,f,i,a,u,c]}class Aa extends K{constructor(e){super(),X(this,e,Fa,ja,J,{})}}function Ga(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function za(o){let e;return{c(){e=y(`Major Road Network
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function qa(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[za]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from the "),b(n.$$.fragment),r=y(", as of September 2021."),s=L(),b(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(_(n.$$.fragment,a),_(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Ha(o){let e,l=(o[4].name??"Unknown MRN road")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown MRN road")+"")&&G(t,l)},d(n){n&&h(e)}}}function Ea(o){let e,l;return e=new fe({props:{$$slots:{default:[Ha,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ba(o){let e,l;const t=[z(kt),{sourceLayer:kt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Ea]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&3?le(t,[s&0&&oe(z(kt)),s&0&&{sourceLayer:kt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Ua(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:kt,title:Wa,$$slots:{help:[qa],icon:[Ga]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${kt}.pmtiles`,$$slots:{default:[Ba]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let kt="mrn",Wa="Major Road Network";function Ya(o,e,l){let t,n=ee.mrn,r=pe(kt);W(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Ja extends K{constructor(e){super(),X(this,e,Ya,Ua,J,{})}}function Va(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Za(o){let e;return{c(){e=y(`OS Open Roads
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Qa(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[Za]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(`, as of December 2023. The SRN is equivalent to trunk
      roads.`),s=L(),b(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(_(n.$$.fragment,a),_(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Ka(o){let e,l=(o[4].name??"Unknown SRN road")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown SRN road")+"")&&G(t,l)},d(n){n&&h(e)}}}function Xa(o){let e,l;return e=new fe({props:{$$slots:{default:[Ka,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function xa(o){let e,l;const t=[z(yt),{sourceLayer:yt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Xa]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&3?le(t,[s&0&&oe(z(yt)),s&0&&{sourceLayer:yt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ef(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:yt,title:tf,$$slots:{help:[Qa],icon:[Va]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${yt}.pmtiles`,$$slots:{default:[xa]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let yt="srn",tf="Strategic Road Network";function nf(o,e,l){let t,n=ee.srn,r=pe(yt);W(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class lf extends K{constructor(e){super(),X(this,e,nf,ef,J,{})}}function rf(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function of(o){let e;return{c(){e=y(`National Cycle Network
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function sf(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[of]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from Sustrans about the "),b(n.$$.fragment),r=y(", downloaded on 22/01/2024."),s=L(),b(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(_(n.$$.fragment,a),_(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function _l(o){let e,l,t,n=o[4].Desc_+"",r;return{c(){e=S("li"),l=y("Description: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Desc_+"")&&G(r,n)},d(s){s&&h(e)}}}function gl(o){let e,l,t,n=o[4].Greenway+"",r;return{c(){e=S("li"),l=y("Is greenway: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Greenway+"")&&G(r,n)},d(s){s&&h(e)}}}function dl(o){let e,l,t,n=o[4].RouteType+"",r;return{c(){e=S("li"),l=y("Route type: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteType+"")&&G(r,n)},d(s){s&&h(e)}}}function hl(o){let e,l,t,n=o[4].RouteNo+"",r;return{c(){e=S("li"),l=y("Route number: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteNo+"")&&G(r,n)},d(s){s&&h(e)}}}function bl(o){let e,l,t,n=o[4].RouteCat+"",r;return{c(){e=S("li"),l=y("Route Category: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteCat+"")&&G(r,n)},d(s){s&&h(e)}}}function wl(o){let e,l,t,n=o[4].OpenStatus+"",r;return{c(){e=S("li"),l=y("Open Status: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].OpenStatus+"")&&G(r,n)},d(s){s&&h(e)}}}function vl(o){let e,l,t,n=o[4].Surface+"",r;return{c(){e=S("li"),l=y("Surface: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Surface+"")&&G(r,n)},d(s){s&&h(e)}}}function kl(o){let e,l,t,n=o[4].Quality+"",r;return{c(){e=S("li"),l=y("Quality: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Quality+"")&&G(r,n)},d(s){s&&h(e)}}}function yl(o){let e,l,t,n=o[4].RoadClass+"",r;return{c(){e=S("li"),l=y("Road Class: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RoadClass+"")&&G(r,n)},d(s){s&&h(e)}}}function af(o){let e,l,t,n,r,s,f,i,a,u=o[4].Desc_&&_l(o),c=o[4].Greenway&&gl(o),p=o[4].RouteType&&dl(o),m=o[4].RouteNo&&hl(o),k=o[4].RouteCat&&bl(o),C=o[4].OpenStatus&&wl(o),T=o[4].Surface&&vl(o),j=o[4].Quality&&kl(o),D=o[4].RoadClass&&yl(o);return{c(){e=S("ul"),u&&u.c(),l=L(),c&&c.c(),t=L(),p&&p.c(),n=L(),m&&m.c(),r=L(),k&&k.c(),s=L(),C&&C.c(),f=L(),T&&T.c(),i=L(),j&&j.c(),a=L(),D&&D.c()},m(N,M){d(N,e,M),u&&u.m(e,null),$(e,l),c&&c.m(e,null),$(e,t),p&&p.m(e,null),$(e,n),m&&m.m(e,null),$(e,r),k&&k.m(e,null),$(e,s),C&&C.m(e,null),$(e,f),T&&T.m(e,null),$(e,i),j&&j.m(e,null),$(e,a),D&&D.m(e,null)},p(N,M){N[4].Desc_?u?u.p(N,M):(u=_l(N),u.c(),u.m(e,l)):u&&(u.d(1),u=null),N[4].Greenway?c?c.p(N,M):(c=gl(N),c.c(),c.m(e,t)):c&&(c.d(1),c=null),N[4].RouteType?p?p.p(N,M):(p=dl(N),p.c(),p.m(e,n)):p&&(p.d(1),p=null),N[4].RouteNo?m?m.p(N,M):(m=hl(N),m.c(),m.m(e,r)):m&&(m.d(1),m=null),N[4].RouteCat?k?k.p(N,M):(k=bl(N),k.c(),k.m(e,s)):k&&(k.d(1),k=null),N[4].OpenStatus?C?C.p(N,M):(C=wl(N),C.c(),C.m(e,f)):C&&(C.d(1),C=null),N[4].Surface?T?T.p(N,M):(T=vl(N),T.c(),T.m(e,i)):T&&(T.d(1),T=null),N[4].Quality?j?j.p(N,M):(j=kl(N),j.c(),j.m(e,a)):j&&(j.d(1),j=null),N[4].RoadClass?D?D.p(N,M):(D=yl(N),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(N){N&&h(e),u&&u.d(),c&&c.d(),p&&p.d(),m&&m.d(),k&&k.d(),C&&C.d(),T&&T.d(),j&&j.d(),D&&D.d()}}}function ff(o){let e,l;return e=new fe({props:{$$slots:{default:[af,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function uf(o){let e,l;const t=[z(St),{sourceLayer:St},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":4,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[ff]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&3?le(t,[s&0&&oe(z(St)),s&0&&{sourceLayer:St},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":4,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function cf(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:St,title:$f,$$slots:{help:[sf],icon:[rf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${St}.pmtiles`,$$slots:{default:[uf]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let St="national_cycle_network",$f="National Cycle Network";function pf(o,e,l){let t,n=ee.national_cycle_network,r=pe(St);W(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class mf extends K{constructor(e){super(),X(this,e,pf,cf,J,{})}}function Sl(o,e,l){const t=o.slice();return t[7]=e[l][0],t[8]=e[l][1],t[9]=e[l][2],t}function _f(o){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function gf(o){let e,l,t,n,r,s,f,i,a,u,c,p;return u=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[_f]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows the average and minimum pavement width (in meters) from
      Ordnance Survey. Because the shape of pavement may vary along a road, both
      average and minimum are reported. Measurements may be available for the
      left side of the road, the right, or both. The coloring shows the larger
      of the two average widths, and the line thickness has no meaning. Hover
      over a line to see if there's pavement on one or both sides of the road.
      (You won't be able to distinguish left and right though; use the OS Road
      basemap instead.)`,t=L(),n=S("p"),n.textContent=`Note these measurements are difficult to interpret near dual carriageways
      (shown as parallel lines).`,r=L(),s=S("p"),s.textContent="Data valid as of 1 January, 2024",f=L(),i=S("p"),a=y(`License: Contains OS data Â© Crown copyright and database right 2023.
      Made available under the `),b(u.$$.fragment),c=y("."),A(e,"slot","help")},m(m,k){d(m,e,k),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(e,f),$(e,i),$(i,a),w(u,i,null),$(i,c),p=!0},p(m,k){const C={};k&4096&&(C.$$scope={dirty:k,ctx:m}),u.$set(C)},i(m){p||(_(u.$$.fragment,m),p=!0)},o(m){g(u.$$.fragment,m),p=!1},d(m){m&&h(e),v(u)}}}function df(o){let e,l,t;return l=new qe({props:{colorScale:o[1],limits:o[3]}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function hf(o){let e,l,t=ln(o[6].angle+o[9])+"",n;return{c(){e=S("p"),l=new At(!1),n=y(` side of the road: no pavement
          `),l.a=n},m(r,s){d(r,e,s),l.m(t,e),$(e,n)},p(r,s){s&64&&t!==(t=ln(r[6].angle+r[9])+"")&&l.p(t)},d(r){r&&h(e)}}}function bf(o){let e,l,t=ln(o[6].angle+o[9])+"",n,r,s=o[7]+"",f,i,a,u=o[8]+"",c,p;return{c(){e=S("p"),l=new At(!1),n=y(` side of the road:
            `),r=S("b"),f=y(s),i=y(`
            m average,
            `),a=S("b"),c=y(u),p=y(`
            m minimum
          `),l.a=n},m(m,k){d(m,e,k),l.m(t,e),$(e,n),$(e,r),$(r,f),$(e,i),$(e,a),$(a,c),$(e,p)},p(m,k){k&64&&t!==(t=ln(m[6].angle+m[9])+"")&&l.p(t),k&64&&s!==(s=m[7]+"")&&G(f,s),k&64&&u!==(u=m[8]+"")&&G(c,u)},d(m){m&&h(e)}}}function Tl(o){let e;function l(r,s){return r[7]?bf:hf}let t=l(o),n=t(o);return{c(){n.c(),e=ve()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function wf(o){let e,l=he([[o[6].left_average,o[6].left_minimum,-90],[o[6].right_average,o[6].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=Tl(Sl(o,l,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=ve()},m(n,r){for(let s=0;s<2;s+=1)t[s]&&t[s].m(n,r);d(n,e,r)},p(n,r){if(r&64){l=he([[n[6].left_average,n[6].left_minimum,-90],[n[6].right_average,n[6].right_minimum,90]]);let s;for(s=0;s<2;s+=1){const f=Sl(n,l,s);t[s]?t[s].p(f,r):(t[s]=Tl(f),t[s].c(),t[s].m(e.parentNode,e))}for(;s<2;s+=1)t[s].d(1)}},d(n){n&&h(e),Xe(t,n)}}}function vf(o){let e,l;return e=new fe({props:{openOn:"hover",$$slots:{default:[wf,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&4160&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function kf(o){let e,l;const t=[z(Tt),{sourceLayer:Tt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":me(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],o[2],o[1]),"line-width":De,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[vf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(z(Tt)),s&0&&{sourceLayer:Tt},t[2],t[3],s&6&&{paint:{"line-color":me(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":De,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&4096&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function yf(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Tt,title:Sf,$$slots:{controls:[df],help:[gf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${xt()}/v1/${Tt}.pmtiles`,$$slots:{default:[kf]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&4096&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&4097&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Tt="pavement_widths",Sf="OS Pavement widths";function Tf(o){let e=Math.floor((o+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function ln(o){return`${Tf(o)} <span style="display: inline-block; rotate: ${o}deg">â¬†</span>`}function Cf(o,e,l){let t,n=["black","red","orange","green"],r=[0,1.5,2,3,100],s=["0-1.5m","1.5-2m","2-3m",">3m"],f=pe(Tt);W(o,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,s,f,i]}class Lf extends K{constructor(e){super(),X(this,e,Cf,yf,J,{})}}function Mf(o){let e;return{c(){e=y("the PCT website")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function If(o){let e;return{c(){e=y("2017 journal article")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Of(o){let e,l,t,n,r,s,f,i,a,u,c,p;return i=new re({props:{href:"https://www.pct.bike",$$slots:{default:[Mf]},$$scope:{ctx:o}}}),u=new re({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[If]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),l.textContent=`The PCT shows major links on the transport network on which there is high
      latent demand for cycling under scenarios of change, based on the
      "fastest" routes from CycleStreets. Counts approximate daily rush hour
      traffic levels.`,t=L(),n=S("p"),n.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
      Please use this layer with caution.`,r=L(),s=S("p"),f=y("See "),b(i.$$.fragment),a=y(" and "),b(u.$$.fragment),c=y(" for details on methodology and data sources."),A(e,"slot","help")},m(m,k){d(m,e,k),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),w(i,s,null),$(s,a),w(u,s,null),$(s,c),p=!0},p(m,k){const C={};k&1024&&(C.$$scope={dirty:k,ctx:m}),i.$set(C);const T={};k&1024&&(T.$$scope={dirty:k,ctx:m}),u.$set(T)},i(m){p||(_(i.$$.fragment,m),_(u.$$.fragment,m),p=!0)},o(m){g(i.$$.fragment,m),g(u.$$.fragment,m),p=!1},d(m){m&&h(e),v(i),v(u)}}}function jf(o){let e,l,t,n,r,s,f,i,a;l=new qe({props:{colorScale:o[1],limits:o[2]}});function u(k){o[5](k)}let c={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};o[0].tripPurpose!==void 0&&(c.value=o[0].tripPurpose),n=new vn({props:c}),H.push(()=>E(n,"value",u));function p(k){o[6](k)}let m={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return o[0].scenario!==void 0&&(m.value=o[0].scenario),f=new Gt({props:m}),H.push(()=>E(f,"value",p)),{c(){e=S("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),s=L(),b(f.$$.fragment),A(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(k,C){d(k,e,C),w(l,e,null),$(e,t),w(n,e,null),$(e,s),w(f,e,null),a=!0},p(k,C){const T={};!r&&C&1&&(r=!0,T.value=k[0].tripPurpose,B(()=>r=!1)),n.$set(T);const j={};!i&&C&1&&(i=!0,j.value=k[0].scenario,B(()=>i=!1)),f.$set(j)},i(k){a||(_(l.$$.fragment,k),_(n.$$.fragment,k),_(f.$$.fragment,k),a=!0)},o(k){g(l.$$.fragment,k),g(n.$$.fragment,k),g(f.$$.fragment,k),a=!1},d(k){k&&h(e),v(l),v(n),v(f)}}}function Nf(o){let e,l=o[4](o[9])+"",t;return{c(){e=new At(!1),t=ve(),e.a=t},m(n,r){e.m(l,n,r),d(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(h(t),e.d())}}}function Pf(o){let e,l;return e=new fe({props:{$$slots:{default:[Nf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Rf(o){let e,l;const t=[z(lt),{sourceLayer:lt},{paint:{"line-color":me(["get",o[0].scenario],o[2],o[1]),"line-width":De,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==lt?"visible":"none"}}];let n={$$slots:{default:[Pf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(z(lt)),s&0&&{sourceLayer:lt},s&7&&{paint:{"line-color":me(["get",r[0].scenario],r[2],r[1]),"line-width":De,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==lt?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Df(o){let e,l=o[4](o[9])+"",t;return{c(){e=new At(!1),t=ve(),e.a=t},m(n,r){e.m(l,n,r),d(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(h(t),e.d())}}}function Ff(o){let e,l;return e=new fe({props:{$$slots:{default:[Df,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Af(o){let e,l;const t=[z(gt),{sourceLayer:gt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":me(["get",o[0].scenario],o[2],o[1]),"line-width":De,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==gt?"visible":"none"}}];let n={$$slots:{default:[Ff]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(z(gt)),s&0&&{sourceLayer:gt},t[2],t[3],s&7&&{paint:{"line-color":me(["get",r[0].scenario],r[2],r[1]),"line-width":De,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==gt?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Gf(o){let e,l,t,n,r,s,f;function i(u){o[7](u)}let a={name:Mr,title:zf,$$slots:{controls:[jf],help:[Of]},$$scope:{ctx:o}};return o[0].show!==void 0&&(a.show=o[0].show),e=new ue({props:a}),H.push(()=>E(e,"show",i)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${lt}.pmtiles`,$$slots:{default:[Rf]},$$scope:{ctx:o}}}),s=new $e({props:{url:`pmtiles://${ce()}/v1/${gt}.pmtiles`,$$slots:{default:[Af]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),r=L(),b(s.$$.fragment)},m(u,c){w(e,u,c),d(u,t,c),w(n,u,c),d(u,r,c),w(s,u,c),f=!0},p(u,[c]){const p={};c&1025&&(p.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,p.show=u[0].show,B(()=>l=!1)),e.$set(p);const m={};c&1025&&(m.$$scope={dirty:c,ctx:u}),n.$set(m);const k={};c&1025&&(k.$$scope={dirty:c,ctx:u}),s.$set(k)},i(u){f||(_(e.$$.fragment,u),_(n.$$.fragment,u),_(s.$$.fragment,u),f=!0)},o(u){g(e.$$.fragment,u),g(n.$$.fragment,u),g(s.$$.fragment,u),f=!1},d(u){u&&(h(t),h(r)),v(e,u),v(n,u),v(s,u)}}}let Mr="pct",lt="pct_commute",gt="pct_school",zf="Propensity to Cycle Tool";function qf(o){return o.show?`${o.tripPurpose}/${o.scenario}`:null}function Hf(o){let[e,l]=o.split("/");return{show:!0,tripPurpose:e,scenario:l}}function Ef(o,e,l){let t,n=ee.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],f=Ht(Mr,{show:!1,tripPurpose:lt,scenario:"baseline"},qf,Hf);W(o,f,p=>l(0,t=p));function i(p){let m=p.baseline,k=p.gov_target,C=p.go_dutch,T=`<h2>Trip purpose: ${t.tripPurpose==lt?"commuting":"school"}</h2>`;if(T+=`<p>Baseline (2011): <b>${m.toLocaleString()}</b></p>`,m==0)T+=`<p>Government target (2025): <b>${k.toLocaleString()}</b></p>`,T+=`<p>Go Dutch: <b>${C.toLocaleString()}</b></p>`;else{let j=(k/m).toFixed(1),D=(C/m).toFixed(1);T+=`<p>Government target (2025): ${k.toLocaleString()} (<b>${j}x</b> of baseline)</p>`,T+=`<p>Go Dutch: ${C.toLocaleString()} (<b>${D}x</b> of baseline)</p>`}return T}function a(p){o.$$.not_equal(t.tripPurpose,p)&&(t.tripPurpose=p,f.set(t))}function u(p){o.$$.not_equal(t.scenario,p)&&(t.scenario=p,f.set(t))}function c(p){o.$$.not_equal(t.show,p)&&(t.show=p,f.set(t))}return[t,n,r,f,i,a,u,c]}class Bf extends K{constructor(e){super(),X(this,e,Ef,Gf,J,{})}}function Uf(o){let e;return{c(){e=y("Basemap")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Wf(o){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Yf(o){let e,l,t,n,r,s,f,i,a,u,c,p,m;return n=new re({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Uf]},$$scope:{ctx:o}}}),c=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Wf]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),t=y("The average speed data is collected over a six-month period by "),b(n.$$.fragment),r=y(` from 135,000 vehicle telematic systems and provided through
      Ordnance Survey. The averages are grouped by different time periods for weekdays
      and weekends. This map shows the highest average.`),s=L(),f=S("p"),f.textContent="Data valid as of 1 September, 2023",i=L(),a=S("p"),u=y(`License: Contains OS data Â© Crown copyright and database right 2023.
      Made available under the `),b(c.$$.fragment),p=y("."),A(e,"slot","help")},m(k,C){d(k,e,C),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),$(e,f),$(e,i),$(e,a),$(a,u),w(c,a,null),$(a,p),m=!0},p(k,C){const T={};C&512&&(T.$$scope={dirty:C,ctx:k}),n.$set(T);const j={};C&512&&(j.$$scope={dirty:C,ctx:k}),c.$set(j)},i(k){m||(_(n.$$.fragment,k),_(c.$$.fragment,k),m=!0)},o(k){g(n.$$.fragment,k),g(c.$$.fragment,k),m=!1},d(k){k&&h(e),v(n),v(c)}}}function Jf(o){let e,l,t,n,r,s;l=new qe({props:{colorScale:o[1],limits:o[2]}});function f(a){o[5](a)}let i={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return o[0].kind!==void 0&&(i.value=o[0].kind),n=new vn({props:i}),H.push(()=>E(n,"value",f)),{c(){e=S("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),A(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(a,u){d(a,e,u),w(l,e,null),$(e,t),w(n,e,null),s=!0},p(a,u){const c={};!r&&u&1&&(r=!0,c.value=a[0].kind,B(()=>r=!1)),n.$set(c)},i(a){s||(_(l.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){g(l.$$.fragment,a),g(n.$$.fragment,a),s=!1},d(a){a&&h(e),v(l),v(n)}}}function Vf(o){let e,l,t=o[8].indicative_mph+"",n,r,s,f,i,a=o[8].highest_mph+"",u,c,p=o[4][o[8].highest_description]+"",m,k;return{c(){e=S("p"),l=y("Posted speed limit: "),n=y(t),r=y(" mph"),s=L(),f=S("p"),i=y("Highest average speed: "),u=y(a),c=y(" mph (during "),m=y(p),k=y(")")},m(C,T){d(C,e,T),$(e,l),$(e,n),$(e,r),d(C,s,T),d(C,f,T),$(f,i),$(f,u),$(f,c),$(f,m),$(f,k)},p(C,T){T&256&&t!==(t=C[8].indicative_mph+"")&&G(n,t),T&256&&a!==(a=C[8].highest_mph+"")&&G(u,a),T&256&&p!==(p=C[4][C[8].highest_description]+"")&&G(m,p)},d(C){C&&(h(e),h(s),h(f))}}}function Zf(o){let e,l;return e=new fe({props:{$$slots:{default:[Vf,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&768&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Qf(o){let e,l;const t=[z(Ct),{sourceLayer:Ct},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":me(["get",o[0].kind],o[2],o[1]),"line-width":De,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}}];let n={$$slots:{default:[Zf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(z(Ct)),s&0&&{sourceLayer:Ct},t[2],t[3],s&7&&{paint:{"line-color":me(["get",r[0].kind],r[2],r[1]),"line-width":De,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Kf(o){let e,l,t,n,r;function s(i){o[6](i)}let f={name:Ct,title:Xf,$$slots:{controls:[Jf],help:[Yf]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${xt()}/v1/${Ct}.pmtiles`,$$slots:{default:[Qf]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&513&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ct="road_speeds",Xf="OS Speeds";function xf(o){return o.show?o.kind:null}function eu(o){return{show:!0,kind:o}}function tu(o,e,l){let t,n=ee.sequential_low_to_high,r=[0,20,30,40,50,90],f=Ht(Ct,{show:!1,kind:"indicative_mph"},xf,eu);W(o,f,c=>l(0,t=c));let i={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function a(c){o.$$.not_equal(t.kind,c)&&(t.kind=c,f.set(t))}function u(c){o.$$.not_equal(t.show,c)&&(t.show=c,f.set(t))}return[t,n,r,f,i,a,u]}class nu extends K{constructor(e){super(),X(this,e,tu,Kf,J,{})}}function lu(o){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ru(o){let e,l,t,n,r,s,f,i,a,u;return i=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[lu]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),l.textContent=`This is average and minimum road carriageway width (in meters) from
      Ordnance Survey. The coloring shows the average width, and the line
      thickness has no meaning. Be careful interpreting the data near dual
      carriageways and crossing islands.`,t=L(),n=S("p"),n.textContent="Data valid as of 1 September, 2023",r=L(),s=S("p"),f=y(`License: Contains OS data Â© Crown copyright and database right 2023.
      Made available under the `),b(i.$$.fragment),a=y("."),A(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),w(i,s,null),$(s,a),u=!0},p(c,p){const m={};p&64&&(m.$$scope={dirty:p,ctx:c}),i.$set(m)},i(c){u||(_(i.$$.fragment,c),u=!0)},o(c){g(i.$$.fragment,c),u=!1},d(c){c&&h(e),v(i)}}}function ou(o){let e,l,t;return l=new qe({props:{colorScale:o[1],limits:o[2]}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function su(o){let e,l,t,n=o[5].average+"",r,s,f,i,a,u,c=o[5].minimum+"",p,m;return{c(){e=S("p"),l=y("Average width: "),t=S("b"),r=y(n),s=y(`
        meters`),f=L(),i=S("p"),a=y("Minimum width: "),u=S("b"),p=y(c),m=y(`
        meters`)},m(k,C){d(k,e,C),$(e,l),$(e,t),$(t,r),$(e,s),d(k,f,C),d(k,i,C),$(i,a),$(i,u),$(u,p),$(i,m)},p(k,C){C&32&&n!==(n=k[5].average+"")&&G(r,n),C&32&&c!==(c=k[5].minimum+"")&&G(p,c)},d(k){k&&(h(e),h(f),h(i))}}}function iu(o){let e,l;return e=new fe({props:{$$slots:{default:[su,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function au(o){let e,l;const t=[z(Lt),{sourceLayer:Lt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":me(["get","average"],o[2],o[1]),"line-width":De,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[iu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(z(Lt)),s&0&&{sourceLayer:Lt},t[2],t[3],s&6&&{paint:{"line-color":me(["get","average"],r[2],r[1]),"line-width":De,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function fu(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Lt,title:uu,$$slots:{controls:[ou],help:[ru]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${xt()}/v1/${Lt}.pmtiles`,$$slots:{default:[au]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Lt="road_widths",uu="OS Road widths";function cu(o,e,l){let t,n=ee.sequential_low_to_high,r=[0,5,10,15,20,100],s=pe(Lt);W(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class $u extends K{constructor(e){super(),X(this,e,cu,fu,J,{})}}function pu(o){let e,l,t;return l=new Se({props:{color:ee.trams}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function mu(o){let e,l,t,n,r;return n=new et({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows all trams and light rail lines, according to OpenStreetMap (as
      of 20 October 2024). When these are close to a scheme, interactions
      between the modes must be designed carefully.`,t=L(),b(n.$$.fragment),A(e,"slot","help")},m(s,f){d(s,e,f),$(e,l),$(e,t),w(n,e,null),r=!0},p:Z,i(s){r||(_(n.$$.fragment,s),r=!0)},o(s){g(n.$$.fragment,s),r=!1},d(s){s&&h(e),v(n)}}}function _u(o){let e,l;const t=[z(Mt),{sourceLayer:Mt},{paint:{"line-color":ee.trams,"line-width":5,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),e.$on("click",hu),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(z(Mt)),s&0&&{sourceLayer:Mt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function gu(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Mt,title:du,$$slots:{help:[mu],icon:[pu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Mt}.pmtiles`,$$slots:{default:[_u]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Mt="trams",du="Trams";function hu(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function bu(o,e,l){let t,n=pe(Mt);W(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class wu extends K{constructor(e){super(),X(this,e,bu,gu,J,{})}}function vu(o){let e;return{c(){e=y(`Bus Open Data Service
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ku(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[vu]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from the "),b(n.$$.fragment),r=y(`, as of 7 February 2024. To calculate frequency, every
      scheduled arrival time per stop is considered, grouped by day of the week.
      The total daily count is just the number of scheduled arrivals for a day.
      The peak hour frequency is the highest number of buses in any one hour
      window. That window might not lined up perfectly on the hour -- a peak
      hour might occur from 8:25 to 9:25,for example.`),s=L(),f=S("p"),f.textContent=`There are known limitations with this layer, so please use caution when
      using these numbers. Some stops may not be shown at all. Frequency could
      be over- or under-counted, due to exceptions to the regular daily schedule
      of a service.`,i=L(),b(a.$$.fragment),A(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),$(e,f),$(e,i),w(a,e,null),u=!0},p(c,p){const m={};p&64&&(m.$$scope={dirty:p,ctx:c}),n.$set(m)},i(c){u||(_(n.$$.fragment,c),_(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(a)}}}function yu(o){let e,l,t,n,r;return n=new qe({props:{colorScale:o[1],limits:o[2]}}),{c(){e=S("div"),l=S("p"),l.textContent="Peak hourly frequency:",t=L(),b(n.$$.fragment),A(e,"slot","controls")},m(s,f){d(s,e,f),$(e,l),$(e,t),w(n,e,null),r=!0},p:Z,i(s){r||(_(n.$$.fragment,s),r=!0)},o(s){g(n.$$.fragment,s),r=!1},d(s){s&&h(e),v(n)}}}function Su(o){let e,l,t,n=o[5].stop_name+"",r,s,f,i,a,u=o[5].peak+"",c,p,m,k,C,T=o[5].peak_description+"",j,D,N,M,O,I=o[5].total+"",R,P,q=o[5].total_description+"",Q,ae;return{c(){e=S("p"),l=y("Stop name: "),t=S("b"),r=y(n),s=L(),f=S("p"),i=y("Peak: "),a=S("b"),c=y(u),p=y(`
        buses during the busiest hour of any day`),m=L(),k=S("p"),C=y("The peak hour is "),j=y(T),D=L(),N=S("p"),M=y("Total buses per day: "),O=S("b"),R=y(I),P=y(`
        (for `),Q=y(q),ae=y(", the busiest day of the week)")},m(F,x){d(F,e,x),$(e,l),$(e,t),$(t,r),d(F,s,x),d(F,f,x),$(f,i),$(f,a),$(a,c),$(f,p),d(F,m,x),d(F,k,x),$(k,C),$(k,j),d(F,D,x),d(F,N,x),$(N,M),$(N,O),$(O,R),$(N,P),$(N,Q),$(N,ae)},p(F,x){x&32&&n!==(n=F[5].stop_name+"")&&G(r,n),x&32&&u!==(u=F[5].peak+"")&&G(c,u),x&32&&T!==(T=F[5].peak_description+"")&&G(j,T),x&32&&I!==(I=F[5].total+"")&&G(R,I),x&32&&q!==(q=F[5].total_description+"")&&G(Q,q)},d(F){F&&(h(e),h(s),h(f),h(m),h(k),h(D),h(N))}}}function Tu(o){let e,l;return e=new fe({props:{$$slots:{default:[Su,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Cu(o){let e,l;const t=[z(It),{sourceLayer:It},{paint:{"circle-color":me(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Tu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new zt({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(z(It)),s&0&&{sourceLayer:It},s&6&&{paint:{"circle-color":me(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Lu(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:It,title:Mu,$$slots:{controls:[yu],help:[ku]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${It}.pmtiles`,$$slots:{default:[Cu]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let It="bus_stops",Mu="Bus stops";function Iu(o,e,l){let t,n=ee.sequential_low_to_high,r=[0,3,10,20,30,100],s=pe(It);W(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Ou extends K{constructor(e){super(),X(this,e,Iu,Lu,J,{})}}function ju(o){let e;return{c(){e=y("crossing")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Nu(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[ju]},$$scope:{ctx:o}}}),f=new et({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),b(n.$$.fragment),r=y(" data from OpenStreetMap (as of 20 October 2024)."),s=L(),b(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(_(n.$$.fragment,a),_(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Pu(o){let e,l,t;return l=new en({props:{rows:o[2]}}),{c(){e=S("div"),b(l.$$.fragment),A(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ru(o){let e,l=Cl(o[4])+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=Cl(n[4])+"")&&G(t,l)},d(n){n&&h(e)}}}function Du(o){let e,l;return e=new fe({props:{$$slots:{default:[Ru,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Fu(o){let e,l;const t=[z(Ot),{sourceLayer:Ot},{paint:{"circle-color":xe(["get","crossing"],{traffic_signals:ee.signalized_crossing},ee.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Du]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new zt({props:n}),e.$on("click",zu),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(z(Ot)),s&0&&{sourceLayer:Ot},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Au(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ot,title:Gu,$$slots:{controls:[Pu],help:[Nu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Ot}.pmtiles`,$$slots:{default:[Fu]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ot="crossings",Gu="Crossings";function Cl(o){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[o.crossing]??`Unknown crossing type (${o.crossing})`}function zu(o){window.open(`http://openstreetmap.org/node/${o.detail.features[0].properties.osm_id}`,"_blank")}function qu(o,e,l){let t,n=pe(Ot);W(o,n,f=>l(0,t=f));let r=[["Signalized",ee.signalized_crossing],["Other",ee.other_crossing]];function s(f){t=f,n.set(t)}return[t,n,r,s]}class Hu extends K{constructor(e){super(),X(this,e,qu,Au,J,{})}}function Eu(o){let e;return{c(){e=y("OS Terrain 50")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Bu(o){let e,l,t,n,r,s,f,i,a,u,c,p,m,k;return i=new re({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[Eu]},$$scope:{ctx:o}}}),c=new Te({}),m=new et({}),{c(){e=S("span"),l=S("p"),l.textContent=`This layer shows the steepness of roads, with the arrows pointing uphill.
      You have to zoom in to see all roads.`,t=L(),n=S("p"),n.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending on
      the underlying Digital Elevation Model used.`,r=L(),s=S("p"),f=y("This layer is built from "),b(i.$$.fragment),a=y(` and roads from OpenStreetMap. The data is valid as of 18 February
      2024.`),u=L(),b(c.$$.fragment),p=L(),b(m.$$.fragment),A(e,"slot","help")},m(C,T){d(C,e,T),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),w(i,s,null),$(s,a),$(e,u),w(c,e,null),$(e,p),w(m,e,null),k=!0},p(C,T){const j={};T&64&&(j.$$scope={dirty:T,ctx:C}),i.$set(j)},i(C){k||(_(i.$$.fragment,C),_(c.$$.fragment,C),_(m.$$.fragment,C),k=!0)},o(C){g(i.$$.fragment,C),g(c.$$.fragment,C),g(m.$$.fragment,C),k=!1},d(C){C&&h(e),v(i),v(c),v(m)}}}function Uu(o){let e,l,t,n,r;return l=new qe({props:{colorScale:o[1],limits:o[2]}}),{c(){e=S("span"),b(l.$$.fragment),t=L(),n=S("p"),n.innerHTML=`<img src="${ro}" alt="arrow"/>
      Arrows point uphill`,A(e,"slot","controls")},m(s,f){d(s,e,f),w(l,e,null),$(e,t),$(e,n),r=!0},p:Z,i(s){r||(_(l.$$.fragment,s),r=!0)},o(s){g(l.$$.fragment,s),r=!1},d(s){s&&h(e),v(l)}}}function Wu(o){let e,l,t,n=Math.abs(o[5].gradient)/100+"",r,s;return{c(){e=S("p"),l=y("Gradient: "),t=S("b"),r=y(n),s=y(`
        %`)},m(f,i){d(f,e,i),$(e,l),$(e,t),$(t,r),$(e,s)},p(f,i){i&32&&n!==(n=Math.abs(f[5].gradient)/100+"")&&G(r,n)},d(f){f&&h(e)}}}function Yu(o){let e,l;return e=new fe({props:{$$slots:{default:[Wu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ju(o){let e,l,t,n;const r=[z(Je),{sourceLayer:Je},{manageHoverState:!0},{paint:{"line-color":me(["/",["abs",["get","gradient"]],100],o[2],o[1]),"line-width":De,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let s={$$slots:{default:[Yu]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new _e({props:s});const f=[z(Je+"_arrows"),{sourceLayer:Je},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new yn({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&7?le(r,[u&0&&oe(z(Je)),u&0&&{sourceLayer:Je},r[2],u&6&&{paint:{"line-color":me(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":De,"line-opacity":te(1,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?le(f,[u&0&&oe(z(Je+"_arrows")),u&0&&{sourceLayer:Je},f[2],f[3],u&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(_(e.$$.fragment,a),_(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Vu(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Je,title:Zu,$$slots:{controls:[Uu],help:[Bu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Je}.pmtiles`,$$slots:{default:[Ju]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Je="gradient",Zu="Gradients";function Qu(o,e,l){let t,n=ee.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],s=pe(Je);W(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Ku extends K{constructor(e){super(),X(this,e,Qu,Vu,J,{})}}function Xu(o){let e,l;return{c(){e=S("img"),A(e,"slot","icon"),Qt(e.src,l=oo)||A(e,"src",l),A(e,"alt","a logo representing cycle parking")},m(t,n){d(t,e,n)},p:Z,d(t){t&&h(e)}}}function xu(o){let e;return{c(){e=y("OpenStreetMap")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ec(o){let e;return{c(){e=y("OpenStreetMap Carto")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function tc(o){let e,l,t,n,r,s,f,i,a,u,c,p;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[xu]},$$scope:{ctx:o}}}),a=new re({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[ec]},$$scope:{ctx:o}}}),c=new et({}),{c(){e=S("span"),l=S("p"),t=y("Cycle parking, according to "),b(n.$$.fragment),r=y(` (as of 20 October 2024). The type of parking, public/private
      access, and whether it's covered are not shown.`),s=L(),f=S("p"),i=y("Icon from "),b(a.$$.fragment),u=L(),b(c.$$.fragment),A(e,"slot","help")},m(m,k){d(m,e,k),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),w(a,f,null),$(e,u),w(c,e,null),p=!0},p(m,k){const C={};k&16&&(C.$$scope={dirty:k,ctx:m}),n.$set(C);const T={};k&16&&(T.$$scope={dirty:k,ctx:m}),a.$set(T)},i(m){p||(_(n.$$.fragment,m),_(a.$$.fragment,m),_(c.$$.fragment,m),p=!0)},o(m){g(n.$$.fragment,m),g(a.$$.fragment,m),g(c.$$.fragment,m),p=!1},d(m){m&&h(e),v(n),v(a),v(c)}}}function nc(o){let e,l,t,n=(o[3].capacity??"unknown")+"",r;return{c(){e=S("p"),l=y("Capacity: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&8&&n!==(n=(s[3].capacity??"unknown")+"")&&G(r,n)},d(s){s&&h(e)}}}function lc(o){let e,l;return e=new fe({props:{$$slots:{default:[nc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function rc(o){let e,l;const t=[z(jt),{sourceLayer:jt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[lc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new yn({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(z(jt)),s&0&&{sourceLayer:jt},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function oc(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:jt,title:sc,$$slots:{help:[tc],icon:[Xu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${jt}.pmtiles`,$$slots:{default:[rc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let jt="cycle_parking",sc="Cycle parking";function ic(o,e,l){let t,n=pe(jt);W(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class ac extends K{constructor(e){super(),X(this,e,ic,oc,J,{})}}function fc(o){let e,l,t,n,r;return n=new et({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows different places of education according to OpenStreetMap (as of
      20 October 2024).`,t=L(),b(n.$$.fragment),A(e,"slot","help")},m(s,f){d(s,e,f),$(e,l),$(e,t),w(n,e,null),r=!0},p:Z,i(s){r||(_(n.$$.fragment,s),r=!0)},o(s){g(n.$$.fragment,s),r=!1},d(s){s&&h(e),v(n)}}}function uc(o){let e,l,t;return e=new Se({props:{color:ee.education.schools}}),{c(){b(e.$$.fragment),l=y(`
        Schools`)},m(n,r){w(e,n,r),d(n,l,r),t=!0},p:Z,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function cc(o){let e,l,t;return e=new Se({props:{color:ee.education.colleges}}),{c(){b(e.$$.fragment),l=y(`
        Colleges`)},m(n,r){w(e,n,r),d(n,l,r),t=!0},p:Z,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function $c(o){let e,l,t;return e=new Se({props:{color:ee.education.universities}}),{c(){b(e.$$.fragment),l=y(`
        Universities`)},m(n,r){w(e,n,r),d(n,l,r),t=!0},p:Z,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function pc(o){let e,l,t,n,r,s,f,i,a;function u(T){o[3](T)}let c={$$slots:{default:[uc]},$$scope:{ctx:o}};o[0].school!==void 0&&(c.checked=o[0].school),e=new Ve({props:c}),H.push(()=>E(e,"checked",u));function p(T){o[4](T)}let m={$$slots:{default:[cc]},$$scope:{ctx:o}};o[0].college!==void 0&&(m.checked=o[0].college),n=new Ve({props:m}),H.push(()=>E(n,"checked",p));function k(T){o[5](T)}let C={$$slots:{default:[$c]},$$scope:{ctx:o}};return o[0].university!==void 0&&(C.checked=o[0].university),f=new Ve({props:C}),H.push(()=>E(f,"checked",k)),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),s=L(),b(f.$$.fragment)},m(T,j){w(e,T,j),d(T,t,j),w(n,T,j),d(T,s,j),w(f,T,j),a=!0},p(T,j){const D={};j&2048&&(D.$$scope={dirty:j,ctx:T}),!l&&j&1&&(l=!0,D.checked=T[0].school,B(()=>l=!1)),e.$set(D);const N={};j&2048&&(N.$$scope={dirty:j,ctx:T}),!r&&j&1&&(r=!0,N.checked=T[0].college,B(()=>r=!1)),n.$set(N);const M={};j&2048&&(M.$$scope={dirty:j,ctx:T}),!i&&j&1&&(i=!0,M.checked=T[0].university,B(()=>i=!1)),f.$set(M)},i(T){a||(_(e.$$.fragment,T),_(n.$$.fragment,T),_(f.$$.fragment,T),a=!0)},o(T){g(e.$$.fragment,T),g(n.$$.fragment,T),g(f.$$.fragment,T),a=!1},d(T){T&&(h(t),h(s)),v(e,T),v(n,T),v(f,T)}}}function mc(o){let e,l,t;return l=new ze({props:{small:!0,$$slots:{default:[pc]},$$scope:{ctx:o}}}),{c(){e=S("div"),b(l.$$.fragment),A(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const s={};r&2049&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function _c(o){let e,l=(o[10].name??"Unnamed institution")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=(n[10].name??"Unnamed institution")+"")&&G(t,l)},d(n){n&&h(e)}}}function gc(o){let e,l;return e=new fe({props:{$$slots:{default:[_c,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&3072&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function dc(o){let e,l;const t=[z(Nt),{sourceLayer:Nt},{paint:{"fill-color":xe(["get","type"],{school:ee.education.schools,college:ee.education.colleges,university:ee.education.universities},"grey"),"fill-opacity":te(.7,1)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[2](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[gc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Fe({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&5?le(t,[s&0&&oe(z(Nt)),s&0&&{sourceLayer:Nt},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&5&&{filter:r[2](r[0])},t[5],t[6]]):{};s&2048&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function hc(o){let e,l,t,n,r;function s(i){o[6](i)}let f={name:Nt,title:bc,$$slots:{controls:[mc],help:[fc]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Nt}.pmtiles`,$$slots:{default:[dc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&2049&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Nt="education",bc="Education";function wc(o){return{show:!0,school:o.includes("school"),college:o.includes("college"),university:o.includes("university")}}function vc(o,e,l){let t,n=["school","college","university"],r={show:!1,school:!0,college:!0,university:!0};function s(m){return m.show?n.filter(k=>m[k]).join(","):null}let f=Ht(Nt,r,s,wc);W(o,f,m=>l(0,t=m));function i(m){let k=n.filter(C=>m[C]);return["in",["get","type"],["literal",k]]}function a(m){o.$$.not_equal(t.school,m)&&(t.school=m,f.set(t))}function u(m){o.$$.not_equal(t.college,m)&&(t.college=m,f.set(t))}function c(m){o.$$.not_equal(t.university,m)&&(t.university=m,f.set(t))}function p(m){o.$$.not_equal(t.show,m)&&(t.show=m,f.set(t))}return[t,f,i,a,u,c,p]}class kc extends K{constructor(e){super(),X(this,e,vc,hc,J,{})}}function yc(o){let e,l,t;return l=new Se({props:{color:ee.hospitals}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Sc(o){let e;return{c(){e=y("hospital")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Tc(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Sc]},$$scope:{ctx:o}}}),f=new et({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),b(n.$$.fragment),r=y(` data from OpenStreetMap (as of 20 October 2024). It doesn't
      include outpatient clinics or individual doctor's offices.`),s=L(),b(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&16&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(_(n.$$.fragment,a),_(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Cc(o){let e,l=(o[3].name??"Unnamed hospital")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed hospital")+"")&&G(t,l)},d(n){n&&h(e)}}}function Lc(o){let e,l;return e=new fe({props:{$$slots:{default:[Cc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Mc(o){let e,l;const t=[z(Pt),{sourceLayer:Pt},{paint:{"fill-color":ee.hospitals,"fill-opacity":te(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Lc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Fe({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(z(Pt)),s&0&&{sourceLayer:Pt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Ic(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Pt,title:Oc,$$slots:{help:[Tc],icon:[yc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Pt}.pmtiles`,$$slots:{default:[Mc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Pt="hospitals",Oc="Hospitals";function jc(o,e,l){let t,n=pe(Pt);W(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Nc extends K{constructor(e){super(),X(this,e,jc,Ic,J,{})}}function Pc(o){let e,l;return{c(){e=S("img"),A(e,"slot","icon"),Qt(e.src,l=so)||A(e,"src",l),A(e,"alt","A logo representing a train")},m(t,n){d(t,e,n)},p:Z,d(t){t&&h(e)}}}function Rc(o){let e;return{c(){e=y("railway station")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Dc(o){let e;return{c(){e=y(`National Rail
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Fc(o){let e,l,t,n,r,s,f,i,a,u,c,p,m;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Rc]},$$scope:{ctx:o}}}),a=new re({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[Dc]},$$scope:{ctx:o}}}),p=new et({}),{c(){e=S("div"),l=S("p"),t=y("This shows "),b(n.$$.fragment),r=y(" data from OpenStreetMap (as of 20 October 2024)."),s=L(),f=S("p"),i=y("Icon from "),b(a.$$.fragment),u=y(". (Note that not all stations shown are National Rail.)"),c=L(),b(p.$$.fragment),A(e,"slot","help")},m(k,C){d(k,e,C),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),w(a,f,null),$(f,u),$(e,c),w(p,e,null),m=!0},p(k,C){const T={};C&16&&(T.$$scope={dirty:C,ctx:k}),n.$set(T);const j={};C&16&&(j.$$scope={dirty:C,ctx:k}),a.$set(j)},i(k){m||(_(n.$$.fragment,k),_(a.$$.fragment,k),_(p.$$.fragment,k),m=!0)},o(k){g(n.$$.fragment,k),g(a.$$.fragment,k),g(p.$$.fragment,k),m=!1},d(k){k&&h(e),v(n),v(a),v(p)}}}function Ac(o){let e,l=(o[3].name??"Unnamed railway station")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed railway station")+"")&&G(t,l)},d(n){n&&h(e)}}}function Gc(o){let e,l;return e=new fe({props:{$$slots:{default:[Ac,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function zc(o){let e,l;const t=[z(Xt),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Gc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new yn({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(z(Xt)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function qc(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Xt,title:Hc,$$slots:{help:[Fc],icon:[Pc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new qt({props:{data:`${ce()}/v1/${Xt}.geojson`,$$slots:{default:[zc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Xt="railway_stations",Hc="Railway stations";function Ec(o,e,l){let t,n=pe(Xt);W(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Bc extends K{constructor(e){super(),X(this,e,Ec,qc,J,{})}}function Uc(o){let e,l,t;return l=new Se({props:{color:ee.sports_spaces}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Wc(o){let e;return{c(){e=y("sports pitches")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Yc(o){let e;return{c(){e=y("sports centres")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Jc(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Wc]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Yc]},$$scope:{ctx:o}}}),a=new et({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),b(n.$$.fragment),r=y(" and "),b(s.$$.fragment),f=y(" data from OpenStreetMap (as of 20 October 2024)."),i=L(),b(a.$$.fragment),A(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(l,t),w(n,l,null),$(l,r),w(s,l,null),$(l,f),$(e,i),w(a,e,null),u=!0},p(c,p){const m={};p&16&&(m.$$scope={dirty:p,ctx:c}),n.$set(m);const k={};p&16&&(k.$$scope={dirty:p,ctx:c}),s.$set(k)},i(c){u||(_(n.$$.fragment,c),_(s.$$.fragment,c),_(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(s.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(s),v(a)}}}function Vc(o){let e,l=(o[3].name??"Unnamed sports space")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed sports space")+"")&&G(t,l)},d(n){n&&h(e)}}}function Zc(o){let e,l;return e=new fe({props:{$$slots:{default:[Vc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Qc(o){let e,l;const t=[z(Rt),{sourceLayer:Rt},{paint:{"fill-color":ee.sports_spaces,"fill-opacity":te(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Zc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Fe({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(z(Rt)),s&0&&{sourceLayer:Rt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Kc(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Rt,title:Xc,$$slots:{help:[Jc],icon:[Uc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Rt}.pmtiles`,$$slots:{default:[Qc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Rt="sports_spaces",Xc="Sports spaces";function xc(o,e,l){let t,n=pe(Rt);W(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class e$ extends K{constructor(e){super(),X(this,e,xc,Kc,J,{})}}function t$(o){let e;return{c(){e=y("DfT stats19")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function n$(o){let e;return{c(){e=y("documented by DfT")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function l$(o){let e,l,t,n,r,s,f,i,a,u,c,p,m,k,C,T,j,D,N,M,O,I,R,P;return n=new re({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[t$]},$$scope:{ctx:o}}}),D=new re({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[n$]},$$scope:{ctx:o}}}),R=new Te({}),{c(){e=S("span"),l=S("p"),t=y("This layer shows collisions recorded in the "),b(n.$$.fragment),r=y(" dataset, as of 30 September 2024. Please note these limitations:"),s=L(),f=S("ul"),i=S("li"),i.textContent="Only collisions between 2017 and 2023 are included",a=L(),u=S("li"),u.textContent=`This tool is intended to be used at high-zoom levels, while inspecting a
        scheme or development area. Not all points are shown at lower zoom
        levels. Do not use this to look for trends across a city or region
        scale.`,c=L(),p=S("li"),p.textContent=`Approximately 150 collisions from the source data aren't included, due
        to problems with the recorded location`,m=L(),k=S("li"),k.textContent='The "pedestrians" category also include mobility scooters',C=L(),T=S("li"),j=y("All limitations "),b(D.$$.fragment),N=y(` also apply. Not all collisions or near misses are reported.
        There's nuance with the severity categories.`),M=L(),O=S("p"),O.textContent="You can click a point to open the full report, thanks to CycleStreets.",I=L(),b(R.$$.fragment),A(e,"slot","help")},m(q,Q){d(q,e,Q),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),$(f,a),$(f,u),$(f,c),$(f,p),$(f,m),$(f,k),$(f,C),$(f,T),$(T,j),w(D,T,null),$(T,N),$(e,M),$(e,O),$(e,I),w(R,e,null),P=!0},p(q,Q){const ae={};Q&4194304&&(ae.$$scope={dirty:Q,ctx:q}),n.$set(ae);const F={};Q&4194304&&(F.$$scope={dirty:Q,ctx:q}),D.$set(F)},i(q){P||(_(n.$$.fragment,q),_(D.$$.fragment,q),_(R.$$.fragment,q),P=!0)},o(q){g(n.$$.fragment,q),g(D.$$.fragment,q),g(R.$$.fragment,q),P=!1},d(q){q&&h(e),v(n),v(D),v(R)}}}function r$(o){let e;return{c(){e=y("Pedestrians")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function o$(o){let e;return{c(){e=y("Cyclists")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function s$(o){let e;return{c(){e=y("Horse riders")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function i$(o){let e;return{c(){e=y("Other")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function a$(o){let e,l,t,n,r,s,f,i,a,u,c,p;function m(O){o[10](O)}let k={$$slots:{default:[r$]},$$scope:{ctx:o}};o[0].pedestrians!==void 0&&(k.checked=o[0].pedestrians),e=new Ve({props:k}),H.push(()=>E(e,"checked",m));function C(O){o[11](O)}let T={$$slots:{default:[o$]},$$scope:{ctx:o}};o[0].cyclists!==void 0&&(T.checked=o[0].cyclists),n=new Ve({props:T}),H.push(()=>E(n,"checked",C));function j(O){o[12](O)}let D={$$slots:{default:[s$]},$$scope:{ctx:o}};o[0].horseRiders!==void 0&&(D.checked=o[0].horseRiders),f=new Ve({props:D}),H.push(()=>E(f,"checked",j));function N(O){o[13](O)}let M={$$slots:{default:[i$]},$$scope:{ctx:o}};return o[0].other!==void 0&&(M.checked=o[0].other),u=new Ve({props:M}),H.push(()=>E(u,"checked",N)),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),s=L(),b(f.$$.fragment),a=L(),b(u.$$.fragment)},m(O,I){w(e,O,I),d(O,t,I),w(n,O,I),d(O,s,I),w(f,O,I),d(O,a,I),w(u,O,I),p=!0},p(O,I){const R={};I&4194304&&(R.$$scope={dirty:I,ctx:O}),!l&&I&1&&(l=!0,R.checked=O[0].pedestrians,B(()=>l=!1)),e.$set(R);const P={};I&4194304&&(P.$$scope={dirty:I,ctx:O}),!r&&I&1&&(r=!0,P.checked=O[0].cyclists,B(()=>r=!1)),n.$set(P);const q={};I&4194304&&(q.$$scope={dirty:I,ctx:O}),!i&&I&1&&(i=!0,q.checked=O[0].horseRiders,B(()=>i=!1)),f.$set(q);const Q={};I&4194304&&(Q.$$scope={dirty:I,ctx:O}),!c&&I&1&&(c=!0,Q.checked=O[0].other,B(()=>c=!1)),u.$set(Q)},i(O){p||(_(e.$$.fragment,O),_(n.$$.fragment,O),_(f.$$.fragment,O),_(u.$$.fragment,O),p=!0)},o(O){g(e.$$.fragment,O),g(n.$$.fragment,O),g(f.$$.fragment,O),g(u.$$.fragment,O),p=!1},d(O){O&&(h(t),h(s),h(a)),v(e,O),v(n,O),v(f,O),v(u,O)}}}function f$(o){let e,l,t,n,r,s,f,i,a,u,c,p,m;return l=new ze({props:{small:!0,$$slots:{default:[a$]},$$scope:{ctx:o}}}),u=new en({props:{rows:o[9]}}),{c(){e=S("div"),b(l.$$.fragment),t=L(),n=S("div"),r=y(`Filter years:
      `),s=S("input"),f=y(`
      -
      `),i=S("input"),a=L(),b(u.$$.fragment),A(s,"type","number"),A(s,"min",2017),A(s,"max",2023),A(s,"class","svelte-1ft65rw"),A(i,"type","number"),A(i,"min",2017),A(i,"max",2023),A(i,"class","svelte-1ft65rw"),A(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(k,C){d(k,e,C),w(l,e,null),$(e,t),$(e,n),$(n,r),$(n,s),Qe(s,o[0].minYear),$(n,f),$(n,i),Qe(i,o[0].maxYear),$(e,a),w(u,e,null),c=!0,p||(m=[ut(s,"input",o[14]),ut(i,"input",o[15])],p=!0)},p(k,C){const T={};C&4194305&&(T.$$scope={dirty:C,ctx:k}),l.$set(T),C&1&&Kt(s.value)!==k[0].minYear&&Qe(s,k[0].minYear),C&1&&Kt(i.value)!==k[0].maxYear&&Qe(i,k[0].maxYear)},i(k){c||(_(l.$$.fragment,k),_(u.$$.fragment,k),c=!0)},o(k){g(l.$$.fragment,k),g(u.$$.fragment,k),c=!1},d(k){k&&h(e),v(l),v(u),p=!1,hr(m)}}}function Ll(o){let e,l,t,n=o[3][o[21].pedestrian_location]+"",r;return{c(){e=S("p"),l=y("Pedestrian location: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&2097152&&n!==(n=s[3][s[21].pedestrian_location]+"")&&G(r,n)},d(s){s&&h(e)}}}function Ml(o){let e,l,t,n=o[4][o[21].pedestrian_movement]+"",r;return{c(){e=S("p"),l=y("Pedestrian movement: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&2097152&&n!==(n=s[4][s[21].pedestrian_movement]+"")&&G(r,n)},d(s){s&&h(e)}}}function u$(o){let e,l,t,n=o[21].year+"",r,s,f,i,a,u=o[5][o[21].severity]+"",c,p,m,k,C,T=Il(o[21])+"",j,D,N,M,O,I=o[21].pedestrian_location&&Ll(o),R=o[21].pedestrian_movement&&Ml(o);return{c(){e=S("p"),l=y("Year: "),t=S("b"),r=y(n),s=L(),f=S("p"),i=y("Severity: "),a=S("b"),c=y(u),p=L(),m=S("p"),k=y("Casualties: "),C=S("b"),j=y(T),D=L(),I&&I.c(),N=L(),R&&R.c(),M=L(),O=S("p"),O.textContent="Click to open full report in CycleStreets"},m(P,q){d(P,e,q),$(e,l),$(e,t),$(t,r),d(P,s,q),d(P,f,q),$(f,i),$(f,a),$(a,c),d(P,p,q),d(P,m,q),$(m,k),$(m,C),$(C,j),d(P,D,q),I&&I.m(P,q),d(P,N,q),R&&R.m(P,q),d(P,M,q),d(P,O,q)},p(P,q){q&2097152&&n!==(n=P[21].year+"")&&G(r,n),q&2097152&&u!==(u=P[5][P[21].severity]+"")&&G(c,u),q&2097152&&T!==(T=Il(P[21])+"")&&G(j,T),P[21].pedestrian_location?I?I.p(P,q):(I=Ll(P),I.c(),I.m(N.parentNode,N)):I&&(I.d(1),I=null),P[21].pedestrian_movement?R?R.p(P,q):(R=Ml(P),R.c(),R.m(M.parentNode,M)):R&&(R.d(1),R=null)},d(P){P&&(h(e),h(s),h(f),h(p),h(m),h(D),h(N),h(M),h(O)),I&&I.d(P),R&&R.d(P)}}}function c$(o){let e,l;return e=new fe({props:{$$slots:{default:[u$,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&6291456&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function $$(o){let e,l;const t=[z(Dt),{sourceLayer:Dt},{paint:{"circle-color":me(["get","severity"],[1,2,3],[o[6],o[7],o[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:o[1]},{layout:{visibility:o[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[c$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new zt({props:n}),e.$on("click",g$),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&451?le(t,[s&0&&oe(z(Dt)),s&0&&{sourceLayer:Dt},s&448&&{paint:{"circle-color":me(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&2&&{filter:r[1]},s&1&&{layout:{visibility:r[0].show?"visible":"none"}},t[5],t[6]]):{};s&4194304&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function p$(o){let e,l,t,n,r;function s(i){o[16](i)}let f={name:Dt,title:m$,$$slots:{controls:[f$],help:[l$]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Dt}.pmtiles`,$$slots:{default:[$$]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&4194305&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&4194307&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Dt="stats19",m$="Stats19";function _$(o){let[e,l,t]=o.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function Il(o){let e=[];return o.pedestrian&&e.push("pedestrian"),o.cyclist&&e.push("cyclist"),o.horse_rider&&e.push("horse rider"),o.other&&e.push("other"),e.join(", ")}function g$(o){window.open(`https://www.cyclestreets.net/collisions/reports/${o.detail.features[0].properties.accident_index}`,"_blank")}function d$(o,e,l){let t,n,r=["pedestrians","cyclists","horseRiders","other"],s={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2023};function f(P){return P.show?`${r.filter(Q=>P[Q]).join(",")}/${P.minYear}/${P.maxYear}`:null}let i=Ht(Dt,s,f,_$);W(o,i,P=>l(0,n=P));function a(P,q,Q,ae,F,x){let V=["any"];return n.pedestrians&&V.push(["get","pedestrian"]),n.cyclists&&V.push(["get","cyclist"]),n.horseRiders&&V.push(["get","horse_rider"]),n.other&&V.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],V]}let u={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},p={1:"Fatal",2:"Serious",3:"Slight"},m=ee.sequential_low_to_high[4],k=ee.sequential_low_to_high[2],C=ee.sequential_low_to_high[0],T=[["Fatal",m],["Serious",k],["Slight",C]];function j(P){o.$$.not_equal(n.pedestrians,P)&&(n.pedestrians=P,i.set(n))}function D(P){o.$$.not_equal(n.cyclists,P)&&(n.cyclists=P,i.set(n))}function N(P){o.$$.not_equal(n.horseRiders,P)&&(n.horseRiders=P,i.set(n))}function M(P){o.$$.not_equal(n.other,P)&&(n.other=P,i.set(n))}function O(){n.minYear=Kt(this.value),i.set(n)}function I(){n.maxYear=Kt(this.value),i.set(n)}function R(P){o.$$.not_equal(n.show,P)&&(n.show=P,i.set(n))}return o.$$.update=()=>{o.$$.dirty&1&&l(1,t=a(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,i,u,c,p,m,k,C,T,j,D,N,M,O,I,R]}class h$ extends K{constructor(e){super(),X(this,e,d$,p$,J,{})}}function b$(o){let e;return{c(){e=y(`DfT road statistics
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function w$(o){let e;return{c(){e=y("methodology")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function v$(o){let e,l,t,n,r,s,f,i,a,u,c,p;return n=new re({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[b$]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[w$]},$$scope:{ctx:o}}}),c=new Te({}),{c(){e=S("span"),l=S("p"),t=y("AADF (annual average daily flow) data from "),b(n.$$.fragment),r=y(`. This counts the total daily number of vehicles traveling
      past a count point (in both directions) on an average day of the year.
      Data from the latest year available is shown. See `),b(s.$$.fragment),f=y(" for details and caveats about the measurements."),i=L(),a=S("p"),a.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
      thicker when the latest data is a manual or automatic count, and thinner
      when it's an estimate from previous years or nearby counters. Click a
      point for full data.`,u=L(),b(c.$$.fragment),A(e,"slot","help")},m(m,k){d(m,e,k),$(e,l),$(l,t),w(n,l,null),$(l,r),w(s,l,null),$(l,f),$(e,i),$(e,a),$(e,u),w(c,e,null),p=!0},p(m,k){const C={};k&128&&(C.$$scope={dirty:k,ctx:m}),n.$set(C);const T={};k&128&&(T.$$scope={dirty:k,ctx:m}),s.$set(T)},i(m){p||(_(n.$$.fragment,m),_(s.$$.fragment,m),_(c.$$.fragment,m),p=!0)},o(m){g(n.$$.fragment,m),g(s.$$.fragment,m),g(c.$$.fragment,m),p=!1},d(m){m&&h(e),v(n),v(s),v(c)}}}function k$(o){let e,l,t;return l=new qe({props:{colorScale:o[1],limits:o[3]}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function y$(o){let e,l=o[6].location+"",t,n,r,s,f=o[6].year+"",i,a,u,c=o[6].motor_vehicles.toLocaleString()+"",p,m,k,C,T=o[6].year+"",j,D,N,M=o[6].pedal_cycles.toLocaleString()+"",O,I,R,P,q,Q=o[6].method+"",ae;return{c(){e=S("h2"),t=y(l),n=L(),r=S("p"),s=y("Total motor vehicles ("),i=y(f),a=y(` AADF):
        `),u=S("b"),p=y(c),m=L(),k=S("p"),C=y("Total pedal cycles ("),j=y(T),D=y(` AADF):
        `),N=S("b"),O=y(M),I=L(),R=S("p"),P=y("Count method: "),q=S("b"),ae=y(Q)},m(F,x){d(F,e,x),$(e,t),d(F,n,x),d(F,r,x),$(r,s),$(r,i),$(r,a),$(r,u),$(u,p),d(F,m,x),d(F,k,x),$(k,C),$(k,j),$(k,D),$(k,N),$(N,O),d(F,I,x),d(F,R,x),$(R,P),$(R,q),$(q,ae)},p(F,x){x&64&&l!==(l=F[6].location+"")&&G(t,l),x&64&&f!==(f=F[6].year+"")&&G(i,f),x&64&&c!==(c=F[6].motor_vehicles.toLocaleString()+"")&&G(p,c),x&64&&T!==(T=F[6].year+"")&&G(j,T),x&64&&M!==(M=F[6].pedal_cycles.toLocaleString()+"")&&G(O,M),x&64&&Q!==(Q=F[6].method+"")&&G(ae,Q)},d(F){F&&(h(e),h(n),h(r),h(m),h(k),h(I),h(R))}}}function S$(o){let e,l;return e=new fe({props:{$$slots:{default:[y$,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&192&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function T$(o){let e,l;const t=[z(Ft),{sourceLayer:Ft},{paint:{"circle-color":me(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[S$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new zt({props:n}),e.$on("click",M$),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(z(Ft)),s&0&&{sourceLayer:Ft},s&6&&{paint:{"circle-color":me(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&128&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function C$(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Ft,title:L$,$$slots:{controls:[k$],help:[v$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Ft}.pmtiles`,$$slots:{default:[T$]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&128&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&129&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ft="vehicle_counts",L$="Vehicle counts";function M$(o){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${o.detail.features[0].properties.count_point}`,"_blank")}function I$(o,e,l){let t,n=["green","orange","red","black"],r=[0,2500,8e3,15e3,205e3],s=["0-2.5k","2.5-8k","8-15k",">15k"],f=pe(Ft);W(o,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,s,f,i]}class O$ extends K{constructor(e){super(),X(this,e,I$,C$,J,{})}}function Ol(o,e,l){const t=o.slice();return t[6]=e[l],t}function j$(o){let e;return{c(){e=S("span"),e.innerHTML=`<p>Critical issues and policy conflicts from the Design Assistance Log. This
      is internally collected data.</p> <p>This layer is manually copied from a copy of the DA Log. The data is
      recent as of 10 June 2024.</p>`,A(e,"slot","help")},m(l,t){d(l,e,t)},p:Z,d(l){l&&h(e)}}}function N$(o){let e,l,t;return l=new en({props:{rows:o[3]}}),{c(){e=S("div"),b(l.$$.fragment),A(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function P$(o){let e,l=o[5]["Issue ID"]+"",t,n,r=o[5].Code+"",s,f,i,a=o[5]["Issue Stage"]+"",u;return{c(){e=S("h2"),t=y(l),n=y(" - "),s=y(r),f=L(),i=S("p"),u=y(a)},m(c,p){d(c,e,p),$(e,t),$(e,n),$(e,s),d(c,f,p),d(c,i,p),$(i,u)},p(c,p){p&32&&l!==(l=c[5]["Issue ID"]+"")&&G(t,l),p&32&&r!==(r=c[5].Code+"")&&G(s,r),p&32&&a!==(a=c[5]["Issue Stage"]+"")&&G(u,a)},d(c){c&&(h(e),h(f),h(i))}}}function jl(o){let e,l=o[6]+"",t,n,r,s=o[5][o[6]]+"",f,i;return{c(){e=S("p"),t=y(l),n=y(`:
            `),r=S("b"),f=y(s),i=L()},m(a,u){d(a,e,u),$(e,t),$(e,n),$(e,r),$(r,f),$(e,i)},p(a,u){u&32&&s!==(s=a[5][a[6]]+"")&&G(f,s)},d(a){a&&h(e)}}}function R$(o){let e,l=he(o[2]),t=[];for(let n=0;n<l.length;n+=1)t[n]=jl(Ol(o,l,n));return{c(){e=S("div");for(let n=0;n<t.length;n+=1)t[n].c();ie(e,"max-width","30vw"),ie(e,"max-height","60vh"),ie(e,"overflow","auto")},m(n,r){d(n,e,r);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(n,r){if(r&36){l=he(n[2]);let s;for(s=0;s<l.length;s+=1){const f=Ol(n,l,s);t[s]?t[s].p(f,r):(t[s]=jl(f),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=l.length}},d(n){n&&h(e),Xe(t,n)}}}function D$(o){let e,l,t,n;return e=new fe({props:{openOn:"hover",$$slots:{default:[P$,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[R$,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,s){w(e,r,s),d(r,l,s),w(t,r,s),n=!0},p(r,s){const f={};s&544&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&544&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(_(e.$$.fragment,r),_(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function F$(o){let e,l;const t=[z(rn),{paint:{"circle-color":xe(["get","Design Review Status"],Object.fromEntries(o[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[D$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new zt({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&9?le(t,[s&0&&oe(z(rn)),s&8&&{paint:{"circle-color":xe(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[3],t[4]]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function A$(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:rn,title:G$,$$slots:{controls:[N$],help:[j$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new qt({props:{data:`${xt()}/v1/problems.geojson.gz`,$$slots:{default:[F$]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&512&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let rn="problems",G$="Issues & Conflicts";function z$(o,e,l){let t,n=pe(rn);W(o,n,i=>l(0,t=i));let r=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],s=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function f(i){t=i,n.set(t)}return[t,n,r,s,f]}class q$ extends K{constructor(e){super(),X(this,e,z$,A$,J,{})}}function H$(o){let e;function l(r,s){return r[2]<=100?U$:B$}let t=l(o),n=t(o);return{c(){n.c(),e=ve()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},i:Z,o:Z,d(r){r&&h(e),n.d(r)}}}function E$(o){let e,l;return e=new Ge({props:{$$slots:{default:[W$]},$$scope:{ctx:o}}}),e.$on("click",o[3]),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function B$(o){let e;return{c(){e=S("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){d(l,e,t)},p:Z,d(l){l&&h(e)}}}function U$(o){let e,l,t;return{c(){e=S("label"),l=y(`Downloading scheme data
      `),t=S("progress"),t.value=o[2],A(t,"class","svelte-q3473n")},m(n,r){d(n,e,r),$(e,l),$(e,t)},p(n,r){r&4&&(t.value=n[2])},d(n){n&&h(e)}}}function W$(o){let e;return{c(){e=y("Load latest scheme data")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Y$(o){let e,l,t,n;const r=[E$,H$],s=[];function f(i,a){return i[0]?i[1]?1:-1:0}return~(e=f(o))&&(l=s[e]=r[e](o)),{c(){l&&l.c(),t=ve()},m(i,a){~e&&s[e].m(i,a),d(i,t,a),n=!0},p(i,[a]){let u=e;e=f(i),e===u?~e&&s[e].p(i,a):(l&&(be(),g(s[u],1,1,()=>{s[u]=null}),we()),~e?(l=s[e],l?l.p(i,a):(l=s[e]=r[e](i),l.c()),_(l,1),l.m(t.parentNode,t)):l=null)},i(i){n||(_(l),n=!0)},o(i){g(l),n=!1},d(i){i&&h(t),~e&&s[e].d(i)}}}function J$(o,e,l){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),r=!0,s=0;async function f(){let a=await Dr(`${xt()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,s=c)});l(2,s=100);let u=new TextDecoder().decode(a);t("all_schemes_output.geojson",u),l(1,r=!1)}br(async()=>{n&&await f()});async function i(){l(0,n=!0),await f()}return o.$$set=a=>{"loadFile"in a&&l(4,t=a.loadFile)},[n,r,s,i,t]}class V$ extends K{constructor(e){super(),X(this,e,J$,Y$,J,{loadFile:4})}}const on=Pe({type:"FeatureCollection",features:[],schemes:{}}),_n=Pe(new Map),Nl=Pe(""),Pl=Pe(""),gn=Pe({type:"FeatureCollection",features:[],schemes:{}}),dn=Pe(new Map),Rl=Pe(""),Dl=Pe("");function Fl(o){let e={type:"FeatureCollection",features:[],schemes:{},notes:o.notes},l=new Map,t={type:"FeatureCollection",features:[],schemes:{},notes:o.notes},n=new Map;for(let[r,s]of Object.entries(o.schemes))s.pipeline?(n.set(r,s),t.schemes[r]=s):(l.set(r,s),e.schemes[r]=s);for(let r of o.features){if(!Z$(r))continue;let s=r.properties.scheme_reference,f=l.has(s),a=(f?l:n).get(s);a.browse&&(r.properties.funding_programme=a.browse.funding_programme,r.properties.current_milestone=a.browse.current_milestone);let u=f?e:t;r.id=u.features.length+1,u.features.push(r)}on.set(e),_n.set(l),gn.set(t),dn.set(n)}function Z$(o){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(o.properties.id)}function Q$(){let o={type:"FeatureCollection",features:[],schemes:{},notes:["These schemes are everything you've drawn in this browser using Scheme Sketcher. The data source and accuracy depend on whatever files you imported, created, or edited yourself."]};for(let l=0;l<window.localStorage.length;l++){let t=window.localStorage.key(l),n=t.split("/");if(!(n.length!=3||n[0]!="sketch"))try{let r=JSON.parse(window.localStorage.getItem(t));if(r.features.length==0)continue;for(let s of Object.values(r.schemes))s.browse={authority_or_region:n[1]};o.schemes={...o.schemes,...r.schemes},o.features=[...o.features,...r.features]}catch{}}let e=1;for(let l of o.features)l.id=e++;return o}let Jt={ATF2:"#66c2a5","ATF2 or ATF3":"#fc8d62",ATF3:"#8da0cb",ATF4:"#e78ac3",ATF4E:"#a6d854"},hn={removed:"grey","no data":"grey","not progressed":"red",superseded:"red","preliminary design completed":"#fbb862","feasability design completed":"#eddc76","detailed design completed":"#dafd9d","consruction started":"#76c384","construction completed":"#488f31"};function Al(o,e,l){const t=o.slice();return t[28]=e[l],t[29]=e,t[30]=l,t}function K$(o){let e;return{c(){e=y("Filters")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function X$(o){let e;return{c(){e=y("Reset all filters")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function x$(o){let e,l,t,n,r,s,f,i;e=new $n({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[np]},$$scope:{ctx:o}}});function a(m){o[23](m)}let u={label:"Scheme name or reference",options:sn(o[3])};o[0]!==void 0&&(u.value=o[0]),t=new Lr({props:u}),H.push(()=>E(t,"value",a));function c(m){o[24](m)}let p={label:"Authority or region",choices:o[10],emptyOption:!0};return o[4]!==void 0&&(p.value=o[4]),s=new Gt({props:p}),H.push(()=>E(s,"value",c)),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),r=L(),b(s.$$.fragment)},m(m,k){w(e,m,k),d(m,l,k),w(t,m,k),d(m,r,k),w(s,m,k),i=!0},p(m,k){const C={};k[0]&2|k[1]&1&&(C.$$scope={dirty:k,ctx:m}),e.$set(C);const T={};k[0]&8&&(T.options=sn(m[3])),!n&&k[0]&1&&(n=!0,T.value=m[0],B(()=>n=!1)),t.$set(T);const j={};k[0]&1024&&(j.choices=m[10]),!f&&k[0]&16&&(f=!0,j.value=m[4],B(()=>f=!1)),s.$set(j)},i(m){i||(_(e.$$.fragment,m),_(t.$$.fragment,m),_(s.$$.fragment,m),i=!0)},o(m){g(e.$$.fragment,m),g(t.$$.fragment,m),g(s.$$.fragment,m),i=!1},d(m){m&&(h(l),h(r)),v(e,m),v(t,m),v(s,m)}}}function ep(o){let e,l,t,n,r,s,f,i,a,u,c,p,m,k,C,T;t=new $n({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[rp]},$$scope:{ctx:o}}});function j(R){o[17](R)}let D={label:"Scheme name or reference",options:sn(o[3])};o[0]!==void 0&&(D.value=o[0]),r=new Lr({props:D}),H.push(()=>E(r,"value",j));function N(R){o[18](R)}let M={label:"Authority or region",choices:o[10],emptyOption:!0};o[4]!==void 0&&(M.value=o[4]),i=new Gt({props:M}),H.push(()=>E(i,"value",N)),p=new $n({props:{label:"Funding programmes",id:"filterFundingProgrammes",$$slots:{default:[ip]},$$scope:{ctx:o}}});function O(R){o[20](R)}let I={label:"Current milestone",choices:o[11],emptyOption:!0};return o[6]!==void 0&&(I.value=o[6]),k=new Gt({props:I}),H.push(()=>E(k,"value",O)),{c(){e=S("div"),l=S("div"),b(t.$$.fragment),n=L(),b(r.$$.fragment),f=L(),b(i.$$.fragment),u=L(),c=S("div"),b(p.$$.fragment),m=L(),b(k.$$.fragment),A(l,"class","govuk-grid-column-one-half"),A(c,"class","govuk-grid-column-one-half"),A(e,"class","govuk-grid-row")},m(R,P){d(R,e,P),$(e,l),w(t,l,null),$(l,n),w(r,l,null),$(l,f),w(i,l,null),$(e,u),$(e,c),w(p,c,null),$(c,m),w(k,c,null),T=!0},p(R,P){const q={};P[0]&2|P[1]&1&&(q.$$scope={dirty:P,ctx:R}),t.$set(q);const Q={};P[0]&8&&(Q.options=sn(R[3])),!s&&P[0]&1&&(s=!0,Q.value=R[0],B(()=>s=!1)),r.$set(Q);const ae={};P[0]&1024&&(ae.choices=R[10]),!a&&P[0]&16&&(a=!0,ae.value=R[4],B(()=>a=!1)),i.$set(ae);const F={};P[0]&32|P[1]&1&&(F.$$scope={dirty:P,ctx:R}),p.$set(F);const x={};!C&&P[0]&64&&(C=!0,x.value=R[6],B(()=>C=!1)),k.$set(x)},i(R){T||(_(t.$$.fragment,R),_(r.$$.fragment,R),_(i.$$.fragment,R),_(p.$$.fragment,R),_(k.$$.fragment,R),T=!0)},o(R){g(t.$$.fragment,R),g(r.$$.fragment,R),g(i.$$.fragment,R),g(p.$$.fragment,R),g(k.$$.fragment,R),T=!1},d(R){R&&h(e),v(t),v(r),v(i),v(p),v(k)}}}function tp(o){let e;return{c(){e=y("Clear")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function np(o){let e,l,t,n,r,s;return t=new Ge({props:{$$slots:{default:[tp]},$$scope:{ctx:o}}}),t.$on("click",o[22]),{c(){e=S("input"),l=L(),b(t.$$.fragment),A(e,"type","text"),A(e,"class","govuk-input govuk-input--width-10"),A(e,"id","filterInterventionText")},m(f,i){d(f,e,i),Qe(e,o[1]),d(f,l,i),w(t,f,i),n=!0,r||(s=ut(e,"input",o[21]),r=!0)},p(f,i){i[0]&2&&e.value!==f[1]&&Qe(e,f[1]);const a={};i[1]&1&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(_(t.$$.fragment,f),n=!0)},o(f){g(t.$$.fragment,f),n=!1},d(f){f&&(h(e),h(l)),v(t,f),r=!1,s()}}}function lp(o){let e;return{c(){e=y("Clear")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function rp(o){let e,l,t,n,r,s;return t=new Ge({props:{$$slots:{default:[lp]},$$scope:{ctx:o}}}),t.$on("click",o[16]),{c(){e=S("input"),l=L(),b(t.$$.fragment),A(e,"type","text"),A(e,"class","govuk-input govuk-input--width-10"),A(e,"id","filterInterventionText")},m(f,i){d(f,e,i),Qe(e,o[1]),d(f,l,i),w(t,f,i),n=!0,r||(s=ut(e,"input",o[15]),r=!0)},p(f,i){i[0]&2&&e.value!==f[1]&&Qe(e,f[1]);const a={};i[1]&1&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(_(t.$$.fragment,f),n=!0)},o(f){g(t.$$.fragment,f),n=!1},d(f){f&&(h(e),h(l)),v(t,f),r=!1,s()}}}function op(o){let e=o[28]+"",l,t;return{c(){l=y(e),t=L()},m(n,r){d(n,l,r),d(n,t,r)},p:Z,d(n){n&&(h(l),h(t))}}}function Gl(o){let e,l,t;function n(s){o[19](s,o[28])}let r={$$slots:{default:[op]},$$scope:{ctx:o}};return o[5][o[28]]!==void 0&&(r.checked=o[5][o[28]]),e=new Ve({props:r}),H.push(()=>E(e,"checked",n)),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,f){o=s;const i={};f[1]&1&&(i.$$scope={dirty:f,ctx:o}),!l&&f[0]&32&&(l=!0,i.checked=o[5][o[28]],B(()=>l=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function sp(o){let e,l,t=he(Object.keys(Jt)),n=[];for(let s=0;s<t.length;s+=1)n[s]=Gl(Al(o,t,s));const r=s=>g(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ve()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);d(s,e,f),l=!0},p(s,f){if(f[0]&32){t=he(Object.keys(Jt));let i;for(i=0;i<t.length;i+=1){const a=Al(s,t,i);n[i]?(n[i].p(a,f),_(n[i],1)):(n[i]=Gl(a),n[i].c(),_(n[i],1),n[i].m(e.parentNode,e))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)_(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(s){s&&h(e),Xe(n,s)}}}function ip(o){let e,l;return e=new ze({props:{small:!0,$$slots:{default:[sp]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n[0]&32|n[1]&1&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ap(o){let e;return{c(){e=y("Done")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function fp(o){let e,l,t,n,r=o[9].interventions.toLocaleString()+"",s,f,i,a,u=o[8].size.toLocaleString()+"",c,p,m,k,C,T=zl(o[9].totalLength).toFixed(1)+"",j,D,N,M,O,I,R,P,q,Q;M=new Ge({props:{$$slots:{default:[X$]},$$scope:{ctx:o}}}),M.$on("click",o[12]);const ae=[ep,x$],F=[];function x(V,U){return V[2]=="ATF"?0:1}return I=x(o),R=F[I]=ae[I](o),q=new io({props:{$$slots:{default:[ap]},$$scope:{ctx:o}}}),q.$on("click",o[25]),{c(){e=S("p"),e.textContent="Showing:",l=L(),t=S("ul"),n=S("li"),s=y(r),f=y(" interventions"),i=L(),a=S("li"),c=y(u),p=y(" schemes"),m=L(),k=S("li"),C=y("total route length of "),j=y(T),D=y(" miles"),N=L(),b(M.$$.fragment),O=L(),R.c(),P=L(),b(q.$$.fragment)},m(V,U){d(V,e,U),d(V,l,U),d(V,t,U),$(t,n),$(n,s),$(n,f),$(t,i),$(t,a),$(a,c),$(a,p),$(t,m),$(t,k),$(k,C),$(k,j),$(k,D),d(V,N,U),w(M,V,U),d(V,O,U),F[I].m(V,U),d(V,P,U),w(q,V,U),Q=!0},p(V,U){(!Q||U[0]&512)&&r!==(r=V[9].interventions.toLocaleString()+"")&&G(s,r),(!Q||U[0]&256)&&u!==(u=V[8].size.toLocaleString()+"")&&G(c,u),(!Q||U[0]&512)&&T!==(T=zl(V[9].totalLength).toFixed(1)+"")&&G(j,T);const Ce={};U[1]&1&&(Ce.$$scope={dirty:U,ctx:V}),M.$set(Ce);let Re=I;I=x(V),I===Re?F[I].p(V,U):(be(),g(F[Re],1,1,()=>{F[Re]=null}),we(),R=F[I],R?R.p(V,U):(R=F[I]=ae[I](V),R.c()),_(R,1),R.m(P.parentNode,P));const He={};U[1]&1&&(He.$$scope={dirty:U,ctx:V}),q.$set(He)},i(V){Q||(_(M.$$.fragment,V),_(R),_(q.$$.fragment,V),Q=!0)},o(V){g(M.$$.fragment,V),g(R),g(q.$$.fragment,V),Q=!1},d(V){V&&(h(e),h(l),h(t),h(N),h(O),h(P)),v(M,V),F[I].d(V),v(q,V)}}}function up(o){let e,l,t,n,r;e=new Ge({props:{$$slots:{default:[K$]},$$scope:{ctx:o}}}),e.$on("click",o[14]);function s(i){o[26](i)}let f={title:`Filter ${o[2]} schemes`,$$slots:{default:[fp]},$$scope:{ctx:o}};return o[7]!==void 0&&(f.open=o[7]),t=new Fr({props:f}),H.push(()=>E(t,"open",s)),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(i,a){w(e,i,a),d(i,l,a),w(t,i,a),r=!0},p(i,a){const u={};a[1]&1&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a[0]&4&&(c.title=`Filter ${i[2]} schemes`),a[0]&2047|a[1]&1&&(c.$$scope={dirty:a,ctx:i}),!n&&a[0]&128&&(n=!0,c.open=i[7],B(()=>n=!1)),t.$set(c)},i(i){r||(_(e.$$.fragment,i),_(t.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),r=!1},d(i){i&&h(l),v(e,i),v(t,i)}}}function cp(o){var t;let e=new Set;for(let n of o.values())(t=n.browse)!=null&&t.authority_or_region&&e.add(n.browse.authority_or_region);let l=Array.from(e.entries());return l.sort(),l}function zl(o){return o*621371e-9}function sn(o){let e=[];for(let l of o.values())e.push([l.scheme_reference,l.scheme_reference]),l.scheme_name&&e.push([l.scheme_name,l.scheme_name]);return e}function $p(o,e,l){let t,{source:n}=e,{schemes:r}=e,{schemesGj:s}=e,{filterSchemeText:f}=e,{filterInterventionText:i}=e,a=!1,u=new Set,c={interventions:0,totalLength:0},p=Object.keys(hn).map(U=>[U,U]),m="",k=Object.fromEntries(Object.keys(Jt).map(U=>[U,!0])),C="";function T(U,Ce,Re,He,_t){let Le=U.toLowerCase(),Y=Ce.toLowerCase(),Et=de=>{var tt,Bt,Ut,Wt;if(Le&&!((tt=de.properties.name)!=null&&tt.toLowerCase().includes(Le))&&!((Bt=de.properties.description)!=null&&Bt.toLowerCase().includes(Le)))return!1;let Ae=r.get(de.properties.scheme_reference);return!(Re&&((Ut=Ae.browse)==null?void 0:Ut.authority_or_region)!=Re||n=="ATF"&&Ae.browse.funding_programme&&!He[Ae.browse.funding_programme]||_t&&((Wt=Ae.browse)==null?void 0:Wt.current_milestone)!=_t||Y&&!Ae.scheme_reference.toLowerCase().includes(Y)&&!(Ae.scheme_name??"").toLowerCase().includes(Y))};l(8,u=new Set(s.features.filter(Et).map(de=>de.properties.scheme_reference))),l(9,c={interventions:0,totalLength:0});let rt=de=>{var Ae,tt;return!(!u.has(de.properties.scheme_reference)||Le&&!((Ae=de.properties.name)!=null&&Ae.toLowerCase().includes(Le))&&!((tt=de.properties.description)!=null&&tt.toLowerCase().includes(Le)))};for(let de of s.features)rt(de)?(delete de.properties.hide_while_editing,l(9,c.interventions++,c),de.geometry.type=="LineString"&&de.properties.length_meters&&l(9,c.totalLength+=de.properties.length_meters,c)):de.properties.hide_while_editing=!0;l(13,s),l(9,c)}function j(){l(4,m=""),l(5,k=Object.fromEntries(Object.keys(Jt).map(U=>[U,!0]))),l(6,C=""),l(1,i=""),l(0,f="")}const D=()=>l(7,a=!0);function N(){i=this.value,l(1,i)}const M=()=>l(1,i="");function O(U){f=U,l(0,f)}function I(U){m=U,l(4,m)}function R(U,Ce){o.$$.not_equal(k[Ce],U)&&(k[Ce]=U,l(5,k))}function P(U){C=U,l(6,C)}function q(){i=this.value,l(1,i)}const Q=()=>l(1,i="");function ae(U){f=U,l(0,f)}function F(U){m=U,l(4,m)}const x=()=>l(7,a=!1);function V(U){a=U,l(7,a)}return o.$$set=U=>{"source"in U&&l(2,n=U.source),"schemes"in U&&l(3,r=U.schemes),"schemesGj"in U&&l(13,s=U.schemesGj),"filterSchemeText"in U&&l(0,f=U.filterSchemeText),"filterInterventionText"in U&&l(1,i=U.filterInterventionText)},o.$$.update=()=>{o.$$.dirty[0]&8&&l(10,t=cp(r)),o.$$.dirty[0]&115&&T(i,f,m,k,C)},[f,i,n,r,m,k,C,a,u,c,t,p,j,s,D,N,M,O,I,R,P,q,Q,ae,F,x,V]}class Ir extends K{constructor(e){super(),X(this,e,$p,up,J,{source:2,schemes:3,schemesGj:13,filterSchemeText:0,filterInterventionText:1},null,[-1,-1])}}function ql(o){let e,l,t,n=o[0].status+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Status",t=y(`
    : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].status+"")&&G(r,n)},d(s){s&&h(e)}}}function Hl(o){let e,l,t,n=o[0].timescale+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Timescale",t=y(`
    : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].timescale+"")&&G(r,n)},d(s){s&&h(e)}}}function El(o){let e,l,t,n=o[0].timescale_year+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Estimated completion year",t=y(`
    : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].timescale_year+"")&&G(r,n)},d(s){s&&h(e)}}}function Bl(o){let e,l,t,n=o[0].year_published+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme most recently published",t=y(`
    : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].year_published+"")&&G(r,n)},d(s){s&&h(e)}}}function Ul(o){let e,l,t,n=o[0].year_consulted+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme most recently consulted on",t=y(`
    : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].year_consulted+"")&&G(r,n)},d(s){s&&h(e)}}}function pp(o){let e,l,t,n,r,s=o[0].status&&ql(o),f=o[0].timescale&&Hl(o),i=o[0].timescale_year&&El(o),a=o[0].year_published&&Bl(o),u=o[0].year_consulted&&Ul(o);return{c(){s&&s.c(),e=L(),f&&f.c(),l=L(),i&&i.c(),t=L(),a&&a.c(),n=L(),u&&u.c(),r=ve()},m(c,p){s&&s.m(c,p),d(c,e,p),f&&f.m(c,p),d(c,l,p),i&&i.m(c,p),d(c,t,p),a&&a.m(c,p),d(c,n,p),u&&u.m(c,p),d(c,r,p)},p(c,[p]){c[0].status?s?s.p(c,p):(s=ql(c),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c[0].timescale?f?f.p(c,p):(f=Hl(c),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),c[0].timescale_year?i?i.p(c,p):(i=El(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,p):(a=Bl(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[0].year_consulted?u?u.p(c,p):(u=Ul(c),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},i:Z,o:Z,d(c){c&&(h(e),h(l),h(t),h(n),h(r)),s&&s.d(c),f&&f.d(c),i&&i.d(c),a&&a.d(c),u&&u.d(c)}}}function mp(o,e,l){let{props:t}=e;return o.$$set=n=>{"props"in n&&l(0,t=n.props)},[t]}class Or extends K{constructor(e){super(),X(this,e,mp,pp,J,{props:0})}}function Wl(o){let e,l,t,n=o[0].budget.toLocaleString()+"",r,s;return{c(){e=S("p"),l=S("b"),l.textContent="Cost",t=y(`
    : `),r=y(n),s=y(`
    GBP`)},m(f,i){d(f,e,i),$(e,l),$(e,t),$(e,r),$(e,s)},p(f,i){i&1&&n!==(n=f[0].budget.toLocaleString()+"")&&G(r,n)},d(f){f&&h(e)}}}function Yl(o){let e;return{c(){e=S("p"),e.textContent="Development is fully funded"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Jl(o){let e;return{c(){e=S("p"),e.textContent="Construction is fully funded"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Vl(o){let e,l,t,n;return{c(){e=S("p"),l=S("b"),l.textContent="Funding sources",t=y(`
    : `),n=y(o[1])},m(r,s){d(r,e,s),$(e,l),$(e,t),$(e,n)},p(r,s){s&2&&G(n,r[1])},d(r){r&&h(e)}}}function _p(o){let e,l,t,n,r=o[0].budget&&Wl(o),s=o[0].development_funded&&Yl(),f=o[0].construction_funded&&Jl(),i=o[1]&&Vl(o);return{c(){r&&r.c(),e=L(),s&&s.c(),l=L(),f&&f.c(),t=L(),i&&i.c(),n=ve()},m(a,u){r&&r.m(a,u),d(a,e,u),s&&s.m(a,u),d(a,l,u),f&&f.m(a,u),d(a,t,u),i&&i.m(a,u),d(a,n,u)},p(a,[u]){a[0].budget?r?r.p(a,u):(r=Wl(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),a[0].development_funded?s||(s=Yl(),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null),a[0].construction_funded?f||(f=Jl(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),a[1]?i?i.p(a,u):(i=Vl(a),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:Z,o:Z,d(a){a&&(h(e),h(l),h(t),h(n)),r&&r.d(a),s&&s.d(a),f&&f.d(a),i&&i.d(a)}}}function gp(o){if(!o.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])o.funding_sources[l]&&e.push(l.toUpperCase());return o.funding_sources.other&&e.push(o.funding_sources.other),e.join(", ")}function dp(o,e,l){let t,{props:n}=e;return o.$$set=r=>{"props"in r&&l(0,n=r.props)},o.$$.update=()=>{o.$$.dirty&1&&l(1,t=gp(n))},[n,t]}class jr extends K{constructor(e){super(),X(this,e,dp,_p,J,{props:0})}}function fn(o){const e=o.slice(),l=e[5].pipeline;return e[12]=l,e}function un(o){const e=o.slice(),l=e[1].pipeline;return e[12]=l,e}function Zl(o){let e,l,t,n=Gn(o[1].length_meters)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Length",t=y(`
        : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=Gn(s[1].length_meters)+"")&&G(r,n)},d(s){s&&h(e)}}}function Ql(o){let e,l=it(o[1].description,o[3])+"";return{c(){e=S("p")},m(t,n){d(t,e,n),e.innerHTML=l},p(t,n){n&10&&l!==(l=it(t[1].description,t[3])+"")&&(e.innerHTML=l)},d(t){t&&h(e)}}}function Kl(o){let e,l,t,n,r,s,f,i=o[12].atf4_type&&Xl(o),a=o[12].accuracy&&xl(o),u=o[12].is_alternative&&er();return n=new jr({props:{props:o[12]}}),s=new Or({props:{props:o[12]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),b(n.$$.fragment),r=L(),b(s.$$.fragment)},m(c,p){i&&i.m(c,p),d(c,e,p),a&&a.m(c,p),d(c,l,p),u&&u.m(c,p),d(c,t,p),w(n,c,p),d(c,r,p),w(s,c,p),f=!0},p(c,p){c[12].atf4_type?i?i.p(c,p):(i=Xl(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[12].accuracy?a?a.p(c,p):(a=xl(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[12].is_alternative?u||(u=er(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const m={};p&2&&(m.props=c[12]),n.$set(m);const k={};p&2&&(k.props=c[12]),s.$set(k)},i(c){f||(_(n.$$.fragment,c),_(s.$$.fragment,c),f=!0)},o(c){g(n.$$.fragment,c),g(s.$$.fragment,c),f=!1},d(c){c&&(h(e),h(l),h(t),h(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(s,c)}}}function Xl(o){let e,l,t,n=o[12].atf4_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="ATF4 type",t=y(`
          : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[12].atf4_type+"")&&G(r,n)},d(s){s&&h(e)}}}function xl(o){let e,l,t,n=o[12].accuracy+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Accuracy",t=y(`
          : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[12].accuracy+"")&&G(r,n)},d(s){s&&h(e)}}}function er(o){let e;return{c(){e=S("p"),e.textContent="Represents an alternative route"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function tr(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.capital_scheme_id)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Capital scheme ID",t=y(`
        : `),r=y(n)},m(f,i){d(f,e,i),$(e,l),$(e,t),$(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.capital_scheme_id)+"")&&G(r,n)},d(f){f&&h(e)}}}function nr(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.funding_programme)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Funding programme",t=y(`
        : `),r=y(n)},m(f,i){d(f,e,i),$(e,l),$(e,t),$(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.funding_programme)+"")&&G(r,n)},d(f){f&&h(e)}}}function lr(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.current_milestone)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Current milestone",t=y(`
        : `),r=y(n)},m(f,i){d(f,e,i),$(e,l),$(e,t),$(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.current_milestone)+"")&&G(r,n)},d(f){f&&h(e)}}}function rr(o){let e,l,t,n,r,s,f,i=o[12].scheme_type&&or(o),a=o[12].atf4_lead_type&&sr(o),u=o[12].scheme_description&&ir(o);return n=new jr({props:{props:o[12]}}),s=new Or({props:{props:o[12]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),b(n.$$.fragment),r=L(),b(s.$$.fragment)},m(c,p){i&&i.m(c,p),d(c,e,p),a&&a.m(c,p),d(c,l,p),u&&u.m(c,p),d(c,t,p),w(n,c,p),d(c,r,p),w(s,c,p),f=!0},p(c,p){c[12].scheme_type?i?i.p(c,p):(i=or(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[12].atf4_lead_type?a?a.p(c,p):(a=sr(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[12].scheme_description?u?u.p(c,p):(u=ir(c),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const m={};p&32&&(m.props=c[12]),n.$set(m);const k={};p&32&&(k.props=c[12]),s.$set(k)},i(c){f||(_(n.$$.fragment,c),_(s.$$.fragment,c),f=!0)},o(c){g(n.$$.fragment,c),g(s.$$.fragment,c),f=!1},d(c){c&&(h(e),h(l),h(t),h(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(s,c)}}}function or(o){let e,l,t,n=o[12].scheme_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme type",t=y(`
          : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[12].scheme_type+"")&&G(r,n)},d(s){s&&h(e)}}}function sr(o){let e,l,t,n=o[12].atf4_lead_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="ATF4 lead type",t=y(`
          : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[12].atf4_lead_type+"")&&G(r,n)},d(s){s&&h(e)}}}function ir(o){let e,l,t,n=o[12].scheme_description+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Descripton",t=y(`
          : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[12].scheme_description+"")&&G(r,n)},d(s){s&&h(e)}}}function hp(o){let e;return{c(){e=y("Zoom to show entire scheme")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function bp(o){let e;return{c(){e=y("Edit a copy of this scheme")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ar(o){var Cn,Ln,Mn,In;let e,l,t,n,r,s,f,i=it(o[1].name,o[3])+"",a,u=o[1].intervention_type+"",c,p,m,k,C,T,j,D,N,M=o[0].toUpperCase()+"",O,I,R,P,q,Q,ae,F=it(o[5].scheme_name??"",o[2])+"",x,V,U,Ce,Re,He=it(o[1].scheme_reference,o[2])+"",_t,Le,Y,Et,rt=((Cn=o[5].browse)==null?void 0:Cn.authority_or_region)+"",de,Ae,tt,Bt,Ut,Wt,ot,Tn,st,Ze,Me=o[1].length_meters&&Zl(o),Ie=o[1].description&&Ql(o),ke=o[1].pipeline&&Kl(un(o)),Oe=((Ln=o[5].browse)==null?void 0:Ln.capital_scheme_id)&&tr(o),je=((Mn=o[5].browse)==null?void 0:Mn.funding_programme)&&nr(o),Ne=((In=o[5].browse)==null?void 0:In.current_milestone)&&lr(o),ye=o[5].pipeline&&rr(fn(o));return ot=new Ge({props:{$$slots:{default:[hp]},$$scope:{ctx:o}}}),ot.$on("click",o[6]),st=new Ge({props:{$$slots:{default:[bp]},$$scope:{ctx:o}}}),st.$on("click",o[7]),{c(){e=S("div"),l=S("h2"),l.textContent="Intervention",t=L(),n=S("p"),r=S("b"),r.textContent="Name",s=y(`
      : `),f=new At(!1),a=y(" ("),c=y(u),p=y(")"),m=L(),Me&&Me.c(),k=L(),Ie&&Ie.c(),C=L(),ke&&ke.c(),T=L(),j=S("hr"),D=L(),N=S("h2"),O=y(M),I=y(" Scheme"),R=L(),P=S("p"),q=S("b"),q.textContent="Scheme name",Q=y(`
      : `),ae=new At(!1),x=L(),V=S("p"),U=S("b"),U.textContent="Scheme reference",Ce=y(`
      : `),Re=new At(!1),_t=L(),Le=S("p"),Y=S("b"),Y.textContent="Authority or region",Et=y(`
      : `),de=y(rt),Ae=L(),Oe&&Oe.c(),tt=L(),je&&je.c(),Bt=L(),Ne&&Ne.c(),Ut=L(),ye&&ye.c(),Wt=L(),b(ot.$$.fragment),Tn=L(),b(st.$$.fragment),f.a=a,ae.a=null,Re.a=null,ie(e,"max-width","30vw"),ie(e,"max-height","60vh"),ie(e,"overflow","auto")},m(se,ge){d(se,e,ge),$(e,l),$(e,t),$(e,n),$(n,r),$(n,s),f.m(i,n),$(n,a),$(n,c),$(n,p),$(e,m),Me&&Me.m(e,null),$(e,k),Ie&&Ie.m(e,null),$(e,C),ke&&ke.m(e,null),$(e,T),$(e,j),$(e,D),$(e,N),$(N,O),$(N,I),$(e,R),$(e,P),$(P,q),$(P,Q),ae.m(F,P),$(e,x),$(e,V),$(V,U),$(V,Ce),Re.m(He,V),$(e,_t),$(e,Le),$(Le,Y),$(Le,Et),$(Le,de),$(e,Ae),Oe&&Oe.m(e,null),$(e,tt),je&&je.m(e,null),$(e,Bt),Ne&&Ne.m(e,null),$(e,Ut),ye&&ye.m(e,null),$(e,Wt),w(ot,e,null),$(e,Tn),w(st,e,null),o[10](e),Ze=!0},p(se,ge){var Nn,Pn,Rn,Dn;(!Ze||ge&10)&&i!==(i=it(se[1].name,se[3])+"")&&f.p(i),(!Ze||ge&2)&&u!==(u=se[1].intervention_type+"")&&G(c,u),se[1].length_meters?Me?Me.p(se,ge):(Me=Zl(se),Me.c(),Me.m(e,k)):Me&&(Me.d(1),Me=null),se[1].description?Ie?Ie.p(se,ge):(Ie=Ql(se),Ie.c(),Ie.m(e,C)):Ie&&(Ie.d(1),Ie=null),se[1].pipeline?ke?(ke.p(un(se),ge),ge&2&&_(ke,1)):(ke=Kl(un(se)),ke.c(),_(ke,1),ke.m(e,T)):ke&&(be(),g(ke,1,1,()=>{ke=null}),we()),(!Ze||ge&1)&&M!==(M=se[0].toUpperCase()+"")&&G(O,M),(!Ze||ge&36)&&F!==(F=it(se[5].scheme_name??"",se[2])+"")&&ae.p(F),(!Ze||ge&6)&&He!==(He=it(se[1].scheme_reference,se[2])+"")&&Re.p(He),(!Ze||ge&32)&&rt!==(rt=((Nn=se[5].browse)==null?void 0:Nn.authority_or_region)+"")&&G(de,rt),(Pn=se[5].browse)!=null&&Pn.capital_scheme_id?Oe?Oe.p(se,ge):(Oe=tr(se),Oe.c(),Oe.m(e,tt)):Oe&&(Oe.d(1),Oe=null),(Rn=se[5].browse)!=null&&Rn.funding_programme?je?je.p(se,ge):(je=nr(se),je.c(),je.m(e,Bt)):je&&(je.d(1),je=null),(Dn=se[5].browse)!=null&&Dn.current_milestone?Ne?Ne.p(se,ge):(Ne=lr(se),Ne.c(),Ne.m(e,Ut)):Ne&&(Ne.d(1),Ne=null),se[5].pipeline?ye?(ye.p(fn(se),ge),ge&32&&_(ye,1)):(ye=rr(fn(se)),ye.c(),_(ye,1),ye.m(e,Wt)):ye&&(be(),g(ye,1,1,()=>{ye=null}),we());const On={};ge&8192&&(On.$$scope={dirty:ge,ctx:se}),ot.$set(On);const jn={};ge&8192&&(jn.$$scope={dirty:ge,ctx:se}),st.$set(jn)},i(se){Ze||(_(ke),_(ye),_(ot.$$.fragment,se),_(st.$$.fragment,se),Ze=!0)},o(se){g(ke),g(ye),g(ot.$$.fragment,se),g(st.$$.fragment,se),Ze=!1},d(se){se&&h(e),Me&&Me.d(),Ie&&Ie.d(),ke&&ke.d(),Oe&&Oe.d(),je&&je.d(),Ne&&Ne.d(),ye&&ye.d(),v(ot),v(st),o[10](null)}}}function wp(o){let e=o[1],l,t,n=ar(o);return{c(){n.c(),l=ve()},m(r,s){n.m(r,s),d(r,l,s),t=!0},p(r,[s]){s&2&&J(e,e=r[1])?(be(),g(n,1,1,Z),we(),n=ar(r),n.c(),_(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(_(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function it(o,e){return e?o.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):o}function vp(o,e,l){let t,n;W(o,an,C=>l(11,n=C));let{source:r}=e,{props:s}=e,{schemes:f}=e,{schemesGj:i}=e,{filterSchemeText:a}=e,{filterInterventionText:u}=e,c;Ar(()=>{c&&l(4,c.scrollTop=0,c)});function p(){let C={type:"FeatureCollection",features:i.features.filter(T=>T.properties.scheme_reference==t.scheme_reference)};n==null||n.fitBounds(vr(C),{padding:20,animate:!1})}function m(){var N;let C={type:"FeatureCollection",features:i.features.filter(M=>M.properties.scheme_reference==t.scheme_reference),schemes:{}};C.schemes[t.scheme_reference]=t;let T=(N=t.browse)==null?void 0:N.authority_or_region;if(!T){window.alert("This scheme has no authority specified, you can't edit this");return}let j=t.pipeline?"pipeline":"v1",D=`browse_copy_${t.scheme_reference}`;Gr(qr(T,D),JSON.stringify(zr(T,C))),window.open(Hr(T,D,j),"_blank")}function k(C){H[C?"unshift":"push"](()=>{c=C,l(4,c)})}return o.$$set=C=>{"source"in C&&l(0,r=C.source),"props"in C&&l(1,s=C.props),"schemes"in C&&l(8,f=C.schemes),"schemesGj"in C&&l(9,i=C.schemesGj),"filterSchemeText"in C&&l(2,a=C.filterSchemeText),"filterInterventionText"in C&&l(3,u=C.filterInterventionText)},o.$$.update=()=>{o.$$.dirty&258&&l(5,t=f.get(s.scheme_reference))},[r,s,a,u,c,t,p,m,f,i,k]}class Sn extends K{constructor(e){super(),X(this,e,vp,wp,J,{source:0,props:1,schemes:8,schemesGj:9,filterSchemeText:2,filterInterventionText:3})}}function kp(o){let e,l=o[10].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&G(t,l)},d(n){n&&h(e)}}}function yp(o){let e,l;return e=new Sn({props:{source:o[0],props:o[10],schemesGj:o[3],schemes:o[2],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.source=t[0]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&4&&(r.schemes=t[2]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Sp(o){let e,l,t,n;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[kp,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[yp,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,s){w(e,r,s),d(r,l,s),w(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3133&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(_(e.$$.fragment,r),_(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function Tp(o){let e,l=o[10].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&G(t,l)},d(n){n&&h(e)}}}function Cp(o){let e,l;return e=new Sn({props:{source:o[0],props:o[10],schemesGj:o[3],schemes:o[2],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.source=t[0]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&4&&(r.schemes=t[2]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Lp(o){let e,l,t,n;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Tp,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Cp,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,s){w(e,r,s),d(r,l,s),w(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3133&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(_(e.$$.fragment,r),_(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function Mp(o){let e,l=o[10].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&G(t,l)},d(n){n&&h(e)}}}function Ip(o){let e,l;return e=new Sn({props:{source:o[0],props:o[10],schemesGj:o[3],schemes:o[2],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.source=t[0]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&4&&(r.schemes=t[2]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Op(o){let e,l,t,n;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Mp,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Ip,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,s){w(e,r,s),d(r,l,s),w(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3133&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(_(e.$$.fragment,r),_(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function jp(o){let e,l,t,n,r,s,f,i,a,u;const c=[z(`${o[0]}-interventions-points`),{filter:["all",En,o[8],o[9]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":o[6],"circle-radius":zn,"circle-opacity":te(1,.5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"}];let p={$$slots:{default:[Sp]},$$scope:{ctx:o}};for(let O=0;O<c.length;O+=1)p=ne(p,c[O]);e=new zt({props:p});const m=[z(`${o[0]}-interventions-lines`),{filter:["all",Bn,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[6],"line-width":Vt,"line-opacity":te(1,.5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"}];let k={$$slots:{default:[Lp]},$$scope:{ctx:o}};for(let O=0;O<m.length;O+=1)k=ne(k,m[O]);t=new _e({props:k});const C=[z(`${o[0]}-interventions-lines-endpoints`),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Vt,"circle-opacity":0,"circle-stroke-color":Ke.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:o[1]?"visible":"none"}}];let T={};for(let O=0;O<C.length;O+=1)T=ne(T,C[O]);r=new zt({props:T});const j=[z(`${o[0]}-interventions-polygons`),{filter:["all",tn,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":o[6],"fill-opacity":te(.2,.5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"}];let D={$$slots:{default:[Op]},$$scope:{ctx:o}};for(let O=0;O<j.length;O+=1)D=ne(D,j[O]);f=new Fe({props:D});const N=[z(`${o[0]}-interventions-polygons-outlines`),{filter:["all",tn,o[8]]},{paint:{"line-color":o[6],"line-opacity":.5,"line-width":.7*Vt}},{layout:{visibility:o[1]?"visible":"none"}}];let M={};for(let O=0;O<N.length;O+=1)M=ne(M,N[O]);return a=new _e({props:M}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment)},m(O,I){w(e,O,I),d(O,l,I),w(t,O,I),d(O,n,I),w(r,O,I),d(O,s,I),w(f,O,I),d(O,i,I),w(a,O,I),u=!0},p(O,I){const R=I&835?le(c,[I&1&&oe(z(`${O[0]}-interventions-points`)),I&768&&{filter:["all",En,O[8],O[9]]},c[2],c[3],I&64&&{paint:{"circle-color":O[6],"circle-radius":zn,"circle-opacity":te(1,.5)}},I&2&&{layout:{visibility:O[1]?"visible":"none"}},c[6]]):{};I&2109&&(R.$$scope={dirty:I,ctx:O}),e.$set(R);const P=I&323?le(m,[I&1&&oe(z(`${O[0]}-interventions-lines`)),I&256&&{filter:["all",Bn,O[8]]},m[2],m[3],I&64&&{paint:{"line-color":O[6],"line-width":Vt,"line-opacity":te(1,.5)}},I&2&&{layout:{visibility:O[1]?"visible":"none"}},m[6]]):{};I&2109&&(P.$$scope={dirty:I,ctx:O}),t.$set(P);const q=I&3?le(C,[I&1&&oe(z(`${O[0]}-interventions-lines-endpoints`)),C[1],C[2],I&2&&{layout:{visibility:O[1]?"visible":"none"}}]):{};r.$set(q);const Q=I&323?le(j,[I&1&&oe(z(`${O[0]}-interventions-polygons`)),I&256&&{filter:["all",tn,O[8]]},j[2],j[3],I&64&&{paint:{"fill-color":O[6],"fill-opacity":te(.2,.5)}},I&2&&{layout:{visibility:O[1]?"visible":"none"}},j[6]]):{};I&2109&&(Q.$$scope={dirty:I,ctx:O}),f.$set(Q);const ae=I&323?le(N,[I&1&&oe(z(`${O[0]}-interventions-polygons-outlines`)),I&256&&{filter:["all",tn,O[8]]},I&64&&{paint:{"line-color":O[6],"line-opacity":.5,"line-width":.7*Vt}},I&2&&{layout:{visibility:O[1]?"visible":"none"}}]):{};a.$set(ae)},i(O){u||(_(e.$$.fragment,O),_(t.$$.fragment,O),_(r.$$.fragment,O),_(f.$$.fragment,O),_(a.$$.fragment,O),u=!0)},o(O){g(e.$$.fragment,O),g(t.$$.fragment,O),g(r.$$.fragment,O),g(f.$$.fragment,O),g(a.$$.fragment,O),u=!1},d(O){O&&(h(l),h(n),h(s),h(i)),v(e,O),v(t,O),v(r,O),v(f,O),v(a,O)}}}function Np(o){let e,l;return e=new qt({props:{data:o[7],$$slots:{default:[jp]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,[n]){const r={};n&128&&(r.data=t[7]),n&2175&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Pp(o,e,l){let t,{source:n}=e,{show:r}=e,{schemes:s}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,{color:u}=e;const c=["!=",["get","hide_while_editing"],!0],p=["!=",["get","endpoint"],!0];return o.$$set=m=>{"source"in m&&l(0,n=m.source),"show"in m&&l(1,r=m.show),"schemes"in m&&l(2,s=m.schemes),"schemesGj"in m&&l(3,f=m.schemesGj),"filterSchemeText"in m&&l(4,i=m.filterSchemeText),"filterInterventionText"in m&&l(5,a=m.filterInterventionText),"color"in m&&l(6,u=m.color)},o.$$.update=()=>{o.$$.dirty&8&&l(7,t=Xr(f))},[n,r,s,f,i,a,u,t,c,p]}class fr extends K{constructor(e){super(),X(this,e,Pp,Np,J,{source:0,show:1,schemes:2,schemesGj:3,filterSchemeText:4,filterInterventionText:5,color:6})}}function Rp(o){return xe(["get","intervention_type"],{area:Ke.area,route:Ke.route,crossing:Ke.crossing,other:Ke.other},"white")}function Dp(o){return[["Areas",Ke.area],["Routes",Ke.route],["Crossings",Ke.crossing],["Other",Ke.other]]}function ur(o,e,l){const t=o.slice();return t[34]=e[l],t}function cr(o,e,l){const t=o.slice();return t[34]=e[l],t}function Fp(o){let e,l;return e=new V$({props:{loadFile:o[19]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p:Z,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function $r(o){let e,l,t;function n(s){o[26](s)}let r={name:Nr,title:Wp,$$slots:{controls:[Gp],help:[Ap]},$$scope:{ctx:o}};return o[8]!==void 0&&(r.show=o[8]),e=new ue({props:r}),H.push(()=>E(e,"show",n)),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,f){const i={};f[0]&7713|f[1]&256&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&256&&(l=!0,i.show=s[8],B(()=>l=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function pr(o){let e,l,t=o[34]+"",n;return{c(){e=S("li"),l=S("p"),n=y(t)},m(r,s){d(r,e,s),$(e,l),$(l,n)},p(r,s){s[0]&1024&&t!==(t=r[34]+"")&&G(n,t)},d(r){r&&h(e)}}}function Ap(o){let e,l,t,n,r,s,f;t=new kr({props:{text:"Scheme data caveats"}});let i=he(o[10].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=pr(cr(o,i,u));return{c(){e=S("span"),l=S("p"),b(t.$$.fragment),n=y(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();A(e,"slot","help")},m(u,c){d(u,e,c),$(e,l),w(t,l,null),$(l,n),$(e,r),$(e,s);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,null);f=!0},p(u,c){if(c[0]&1024){i=he(u[10].notes??[]);let p;for(p=0;p<i.length;p+=1){const m=cr(u,i,p);a[p]?a[p].p(m,c):(a[p]=pr(m),a[p].c(),a[p].m(s,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=i.length}},i(u){f||(_(t.$$.fragment,u),f=!0)},o(u){g(t.$$.fragment,u),f=!1},d(u){u&&h(e),v(t),Xe(a,u)}}}function Gp(o){let e,l,t,n,r,s,f,i,a,u,c,p;function m(M){o[21](M)}function k(M){o[22](M)}function C(M){o[23](M)}function T(M){o[24](M)}let j={source:"ATF"};o[10]!==void 0&&(j.schemesGj=o[10]),o[9]!==void 0&&(j.schemes=o[9]),o[11]!==void 0&&(j.filterSchemeText=o[11]),o[12]!==void 0&&(j.filterInterventionText=o[12]),l=new Ir({props:j}),H.push(()=>E(l,"schemesGj",m)),H.push(()=>E(l,"schemes",k)),H.push(()=>E(l,"filterSchemeText",C)),H.push(()=>E(l,"filterInterventionText",T));function D(M){o[25](M)}let N={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return o[0]!==void 0&&(N.value=o[0]),i=new Gt({props:N}),H.push(()=>E(i,"value",D)),c=new en({props:{rows:o[5]}}),{c(){e=S("div"),b(l.$$.fragment),f=L(),b(i.$$.fragment),u=L(),b(c.$$.fragment),A(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(M,O){d(M,e,O),w(l,e,null),$(e,f),w(i,e,null),$(e,u),w(c,e,null),p=!0},p(M,O){const I={};!t&&O[0]&1024&&(t=!0,I.schemesGj=M[10],B(()=>t=!1)),!n&&O[0]&512&&(n=!0,I.schemes=M[9],B(()=>n=!1)),!r&&O[0]&2048&&(r=!0,I.filterSchemeText=M[11],B(()=>r=!1)),!s&&O[0]&4096&&(s=!0,I.filterInterventionText=M[12],B(()=>s=!1)),l.$set(I);const R={};!a&&O[0]&1&&(a=!0,R.value=M[0],B(()=>a=!1)),i.$set(R);const P={};O[0]&32&&(P.rows=M[5]),c.$set(P)},i(M){p||(_(l.$$.fragment,M),_(i.$$.fragment,M),_(c.$$.fragment,M),p=!0)},o(M){g(l.$$.fragment,M),g(i.$$.fragment,M),g(c.$$.fragment,M),p=!1},d(M){M&&h(e),v(l),v(i),v(c)}}}function mr(o){let e,l,t;function n(s){o[32](s)}let r={name:Pr,title:Yp,$$slots:{controls:[qp],help:[zp]},$$scope:{ctx:o}};return o[7]!==void 0&&(r.show=o[7]),e=new ue({props:r}),H.push(()=>E(e,"show",n)),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,f){const i={};f[0]&122890|f[1]&256&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&128&&(l=!0,i.show=s[7],B(()=>l=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function _r(o){let e,l,t=o[34]+"",n;return{c(){e=S("li"),l=S("p"),n=y(t)},m(r,s){d(r,e,s),$(e,l),$(l,n)},p(r,s){s[0]&16384&&t!==(t=r[34]+"")&&G(n,t)},d(r){r&&h(e)}}}function zp(o){let e,l,t,n,r,s,f;t=new kr({props:{text:"Scheme data caveats"}});let i=he(o[14].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=_r(ur(o,i,u));return{c(){e=S("span"),l=S("p"),b(t.$$.fragment),n=y(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();A(e,"slot","help")},m(u,c){d(u,e,c),$(e,l),w(t,l,null),$(l,n),$(e,r),$(e,s);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,null);f=!0},p(u,c){if(c[0]&16384){i=he(u[14].notes??[]);let p;for(p=0;p<i.length;p+=1){const m=ur(u,i,p);a[p]?a[p].p(m,c):(a[p]=_r(m),a[p].c(),a[p].m(s,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=i.length}},i(u){f||(_(t.$$.fragment,u),f=!0)},o(u){g(t.$$.fragment,u),f=!1},d(u){u&&h(e),v(t),Xe(a,u)}}}function qp(o){let e,l,t,n,r,s,f,i,a,u,c,p;function m(M){o[27](M)}function k(M){o[28](M)}function C(M){o[29](M)}function T(M){o[30](M)}let j={source:"LCWIP"};o[14]!==void 0&&(j.schemesGj=o[14]),o[13]!==void 0&&(j.schemes=o[13]),o[15]!==void 0&&(j.filterSchemeText=o[15]),o[16]!==void 0&&(j.filterInterventionText=o[16]),l=new Ir({props:j}),H.push(()=>E(l,"schemesGj",m)),H.push(()=>E(l,"schemes",k)),H.push(()=>E(l,"filterSchemeText",C)),H.push(()=>E(l,"filterInterventionText",T));function D(M){o[31](M)}let N={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return o[1]!==void 0&&(N.value=o[1]),i=new Gt({props:N}),H.push(()=>E(i,"value",D)),c=new en({props:{rows:o[3]}}),{c(){e=S("div"),b(l.$$.fragment),f=L(),b(i.$$.fragment),u=L(),b(c.$$.fragment),A(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(M,O){d(M,e,O),w(l,e,null),$(e,f),w(i,e,null),$(e,u),w(c,e,null),p=!0},p(M,O){const I={};!t&&O[0]&16384&&(t=!0,I.schemesGj=M[14],B(()=>t=!1)),!n&&O[0]&8192&&(n=!0,I.schemes=M[13],B(()=>n=!1)),!r&&O[0]&32768&&(r=!0,I.filterSchemeText=M[15],B(()=>r=!1)),!s&&O[0]&65536&&(s=!0,I.filterInterventionText=M[16],B(()=>s=!1)),l.$set(I);const R={};!a&&O[0]&2&&(a=!0,R.value=M[1],B(()=>a=!1)),i.$set(R);const P={};O[0]&8&&(P.rows=M[3]),c.$set(P)},i(M){p||(_(l.$$.fragment,M),_(i.$$.fragment,M),_(c.$$.fragment,M),p=!0)},o(M){g(l.$$.fragment,M),g(i.$$.fragment,M),g(c.$$.fragment,M),p=!1},d(M){M&&h(e),v(l),v(i),v(c)}}}function Hp(o){let e,l,t,n=o[9].size>0&&$r(o),r=o[13].size>0&&mr(o);return{c(){n&&n.c(),e=L(),r&&r.c(),l=ve()},m(s,f){n&&n.m(s,f),d(s,e,f),r&&r.m(s,f),d(s,l,f),t=!0},p(s,f){s[9].size>0?n?(n.p(s,f),f[0]&512&&_(n,1)):(n=$r(s),n.c(),_(n,1),n.m(e.parentNode,e)):n&&(be(),g(n,1,1,()=>{n=null}),we()),s[13].size>0?r?(r.p(s,f),f[0]&8192&&_(r,1)):(r=mr(s),r.c(),_(r,1),r.m(l.parentNode,l)):r&&(be(),g(r,1,1,()=>{r=null}),we())},i(s){t||(_(n),_(r),t=!0)},o(s){g(n),g(r),t=!1},d(s){s&&(h(e),h(l)),n&&n.d(s),r&&r.d(s)}}}function Ep(o){let e;return{c(){e=y("Show your sketches")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Bp(o){let e=wr()=="Private (development)",l,t,n,r,s,f,i,a,u,c=e&&Fp(o);return t=new ze({props:{small:!0,$$slots:{default:[Hp]},$$scope:{ctx:o}}}),r=new Er({props:{label:"Load schemes from GeoJSON",onLoad:o[19]}}),f=new Br({props:{errorMessage:o[2]}}),a=new Ge({props:{$$slots:{default:[Ep]},$$scope:{ctx:o}}}),a.$on("click",o[20]),{c(){c&&c.c(),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment)},m(p,m){c&&c.m(p,m),d(p,l,m),w(t,p,m),d(p,n,m),w(r,p,m),d(p,s,m),w(f,p,m),d(p,i,m),w(a,p,m),u=!0},p(p,m){e&&c.p(p,m);const k={};m[0]&130987|m[1]&256&&(k.$$scope={dirty:m,ctx:p}),t.$set(k);const C={};m[0]&4&&(C.errorMessage=p[2]),f.$set(C);const T={};m[1]&256&&(T.$$scope={dirty:m,ctx:p}),a.$set(T)},i(p){u||(_(c),_(t.$$.fragment,p),_(r.$$.fragment,p),_(f.$$.fragment,p),_(a.$$.fragment,p),u=!0)},o(p){g(c),g(t.$$.fragment,p),g(r.$$.fragment,p),g(f.$$.fragment,p),g(a.$$.fragment,p),u=!1},d(p){p&&(h(l),h(n),h(s),h(i)),c&&c.d(p),v(t,p),v(r,p),v(f,p),v(a,p)}}}function Up(o){let e,l,t,n,r,s;return e=new nt({props:{label:"Schemes",open:!0,$$slots:{default:[Bp]},$$scope:{ctx:o}}}),t=new fr({props:{source:"atf",show:o[8],schemesGj:o[10],schemes:o[9],filterSchemeText:o[11],filterInterventionText:o[12],color:o[6]}}),r=new fr({props:{source:"lcwip",show:o[7],schemesGj:o[14],schemes:o[13],filterSchemeText:o[15],filterInterventionText:o[16],color:o[4]}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment)},m(f,i){w(e,f,i),d(f,l,i),w(t,f,i),d(f,n,i),w(r,f,i),s=!0},p(f,i){const a={};i[0]&130991|i[1]&256&&(a.$$scope={dirty:i,ctx:f}),e.$set(a);const u={};i[0]&256&&(u.show=f[8]),i[0]&1024&&(u.schemesGj=f[10]),i[0]&512&&(u.schemes=f[9]),i[0]&2048&&(u.filterSchemeText=f[11]),i[0]&4096&&(u.filterInterventionText=f[12]),i[0]&64&&(u.color=f[6]),t.$set(u);const c={};i[0]&128&&(c.show=f[7]),i[0]&16384&&(c.schemesGj=f[14]),i[0]&8192&&(c.schemes=f[13]),i[0]&32768&&(c.filterSchemeText=f[15]),i[0]&65536&&(c.filterInterventionText=f[16]),i[0]&16&&(c.color=f[4]),r.$set(c)},i(f){s||(_(e.$$.fragment,f),_(t.$$.fragment,f),_(r.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(r.$$.fragment,f),s=!1},d(f){f&&(h(l),h(n)),v(e,f),v(t,f),v(r,f)}}}let Nr="atf_schemes",Wp="ATF schemes",Pr="lcwip_schemes",Yp="LCWIP schemes";function Jp(o,e,l){let t,n,r,s,f,i,a,u,c,p,m,k,C,T;W(o,_n,Y=>l(9,a=Y)),W(o,on,Y=>l(10,u=Y)),W(o,Pl,Y=>l(11,c=Y)),W(o,Nl,Y=>l(12,p=Y)),W(o,dn,Y=>l(13,m=Y)),W(o,gn,Y=>l(14,k=Y)),W(o,Dl,Y=>l(15,C=Y)),W(o,Rl,Y=>l(16,T=Y));let j="",D=pe(Nr);W(o,D,Y=>l(8,i=Y));let N="fundingProgramme",M=pe(Pr);W(o,M,Y=>l(7,f=Y));let O="interventionType";function I(Y,Et){try{Fl(JSON.parse(Et)),at(D,i=!0,i),at(M,f=!0,f),l(2,j="")}catch(rt){l(2,j=`The file you loaded is broken: ${rt}`)}}function R(Y){return Y=="interventionType"?[Rp(),Dp()]:Y=="fundingProgramme"?[xe(["get","funding_programme"],Jt,"grey"),Object.entries(Jt)]:Y=="currentMilestone"?[xe(["get","current_milestone"],hn,"grey"),Object.entries(hn)]:["red",[]]}function P(){Fl(Q$()),at(D,i=!0,i),at(M,f=!0,f),l(2,j="")}function q(Y){u=Y,on.set(u)}function Q(Y){a=Y,_n.set(a)}function ae(Y){c=Y,Pl.set(c)}function F(Y){p=Y,Nl.set(p)}function x(Y){N=Y,l(0,N)}function V(Y){i=Y,D.set(i)}function U(Y){k=Y,gn.set(k)}function Ce(Y){m=Y,dn.set(m)}function Re(Y){C=Y,Dl.set(C)}function He(Y){T=Y,Rl.set(T)}function _t(Y){O=Y,l(1,O)}function Le(Y){f=Y,M.set(f)}return o.$$.update=()=>{o.$$.dirty[0]&1&&l(6,[t,n]=R(N),t,(l(5,n),l(0,N))),o.$$.dirty[0]&2&&l(4,[r,s]=R(O),r,(l(3,s),l(1,O)))},[N,O,j,s,r,n,t,f,i,a,u,c,p,m,k,C,T,D,M,I,P,q,Q,ae,F,x,V,U,Ce,Re,He,_t,Le]}class Vp extends K{constructor(e){super(),X(this,e,Jp,Up,J,{},null,[-1,-1])}}const gr=Pe(!0);let bn=Pe(null);function Zp(o){let e,l,t,n,r,s,f,i;return e=new kc({}),t=new Nc({}),r=new e$({}),f=new Bc({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),d(a,n,u),w(r,a,u),d(a,s,u),w(f,a,u),i=!0},i(a){i||(_(e.$$.fragment,a),_(t.$$.fragment,a),_(r.$$.fragment,a),_(f.$$.fragment,a),i=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(r.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&(h(l),h(n),h(s)),v(e,a),v(t,a),v(r,a),v(f,a)}}}function Qp(o){let e,l;return e=new ze({props:{small:!0,$$slots:{default:[Zp]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Kp(o){let e,l,t,n,r,s,f,i,a,u,c,p;return e=new Aa({}),t=new mf({}),r=new Ja({}),f=new lf({}),a=new ac({}),c=new Hu({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment),u=L(),b(c.$$.fragment)},m(m,k){w(e,m,k),d(m,l,k),w(t,m,k),d(m,n,k),w(r,m,k),d(m,s,k),w(f,m,k),d(m,i,k),w(a,m,k),d(m,u,k),w(c,m,k),p=!0},i(m){p||(_(e.$$.fragment,m),_(t.$$.fragment,m),_(r.$$.fragment,m),_(f.$$.fragment,m),_(a.$$.fragment,m),_(c.$$.fragment,m),p=!0)},o(m){g(e.$$.fragment,m),g(t.$$.fragment,m),g(r.$$.fragment,m),g(f.$$.fragment,m),g(a.$$.fragment,m),g(c.$$.fragment,m),p=!1},d(m){m&&(h(l),h(n),h(s),h(i),h(u)),v(e,m),v(t,m),v(r,m),v(f,m),v(a,m),v(c,m)}}}function Xp(o){let e,l;return e=new ze({props:{small:!0,$$slots:{default:[Kp]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function xp(o){let e,l,t,n,r,s;return e=new ya({}),t=new wu({}),r=new Ou({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment)},m(f,i){w(e,f,i),d(f,l,i),w(t,f,i),d(f,n,i),w(r,f,i),s=!0},i(f){s||(_(e.$$.fragment,f),_(t.$$.fragment,f),_(r.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(r.$$.fragment,f),s=!1},d(f){f&&(h(l),h(n)),v(e,f),v(t,f),v(r,f)}}}function em(o){let e,l;return e=new ze({props:{small:!0,$$slots:{default:[xp]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function tm(o){let e,l,t,n,r,s,f,i,a,u;return e=new Ni({}),t=new fa({}),r=new zs({}),f=new ii({}),a=new vi({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment)},m(c,p){w(e,c,p),d(c,l,p),w(t,c,p),d(c,n,p),w(r,c,p),d(c,s,p),w(f,c,p),d(c,i,p),w(a,c,p),u=!0},i(c){u||(_(e.$$.fragment,c),_(t.$$.fragment,c),_(r.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(r.$$.fragment,c),g(f.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&(h(l),h(n),h(s),h(i)),v(e,c),v(t,c),v(r,c),v(f,c),v(a,c)}}}function nm(o){let e,l;return e=new ze({props:{small:!0,$$slots:{default:[tm]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function lm(o){let e,l,t,n;return e=new Ms({}),t=new Qs({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,s){w(e,r,s),d(r,l,s),w(t,r,s),n=!0},i(r){n||(_(e.$$.fragment,r),_(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function rm(o){let e,l;return e=new ze({props:{small:!0,$$slots:{default:[lm]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function om(o){let e,l,t,n,r,s,f,i;return e=new $u({}),t=new Lf({}),r=new nu({}),f=new q$({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),d(a,n,u),w(r,a,u),d(a,s,u),w(f,a,u),i=!0},i(a){i||(_(e.$$.fragment,a),_(t.$$.fragment,a),_(r.$$.fragment,a),_(f.$$.fragment,a),i=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(r.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&(h(l),h(n),h(s)),v(e,a),v(t,a),v(r,a),v(f,a)}}}function sm(o){let e,l,t,n,r,s,f,i,a=wr()=="Private (development)",u,c,p,m,k;e=new O$({}),t=new h$({}),r=new Bf({}),f=new Ku({});let C=a&&om();return c=new Ei({}),m=new Xi({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L(),C&&C.c(),u=L(),b(c.$$.fragment),p=L(),b(m.$$.fragment)},m(T,j){w(e,T,j),d(T,l,j),w(t,T,j),d(T,n,j),w(r,T,j),d(T,s,j),w(f,T,j),d(T,i,j),C&&C.m(T,j),d(T,u,j),w(c,T,j),d(T,p,j),w(m,T,j),k=!0},p:Z,i(T){k||(_(e.$$.fragment,T),_(t.$$.fragment,T),_(r.$$.fragment,T),_(f.$$.fragment,T),_(C),_(c.$$.fragment,T),_(m.$$.fragment,T),k=!0)},o(T){g(e.$$.fragment,T),g(t.$$.fragment,T),g(r.$$.fragment,T),g(f.$$.fragment,T),g(C),g(c.$$.fragment,T),g(m.$$.fragment,T),k=!1},d(T){T&&(h(l),h(n),h(s),h(i),h(u),h(p)),v(e,T),v(t,T),v(r,T),v(f,T),C&&C.d(T),v(c,T),v(m,T)}}}function im(o){let e,l;return e=new ze({props:{small:!0,$$slots:{default:[sm]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function am(o){let e,l,t,n,r;function s(i){o[6](i)}let f={cfg:o[5],map:o[3]};return o[0]!==void 0&&(f.enabled=o[0]),e=new eo({props:f}),H.push(()=>E(e,"enabled",s)),n=new Go({}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,a){const u={};a&8&&(u.map=i[3]),!l&&a&1&&(l=!0,u.enabled=i[0],B(()=>l=!1)),e.$set(u)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}function fm(o){let e,l;const t=[z("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:o[1]?"none":"visible"}}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Fe({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&2?le(t,[t[0],t[1],{layout:{visibility:r[1]?"none":"visible"}}]):{};e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function um(o){let e,l,t,n,r,s,f,i,a,u,c,p,m,k,C,T,j,D,N,M,O;return l=new Vp({}),n=new nt({props:{label:"Trip generators",$$slots:{default:[Qp]},$$scope:{ctx:o}}}),s=new nt({props:{label:"Existing infrastructure",$$slots:{default:[Xp]},$$scope:{ctx:o}}}),i=new nt({props:{label:"Public transport",$$slots:{default:[em]},$$scope:{ctx:o}}}),u=new nt({props:{label:"Boundaries",$$slots:{default:[nm]},$$scope:{ctx:o}}}),p=new nt({props:{label:"Census",$$slots:{default:[rm]},$$scope:{ctx:o}}}),k=new nt({props:{label:"Other",$$slots:{default:[im]},$$scope:{ctx:o}}}),T=new nt({props:{label:"Tools",$$slots:{default:[am]},$$scope:{ctx:o}}}),D=new xr({props:{disabled:!o[1]}}),M=new qt({props:{data:o[4],$$slots:{default:[fm]},$$scope:{ctx:o}}}),{c(){e=S("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),r=L(),b(s.$$.fragment),f=L(),b(i.$$.fragment),a=L(),b(u.$$.fragment),c=L(),b(p.$$.fragment),m=L(),b(k.$$.fragment),C=L(),b(T.$$.fragment),j=L(),b(D.$$.fragment),N=L(),b(M.$$.fragment)},m(I,R){d(I,e,R),w(l,e,null),$(e,t),w(n,e,null),$(e,r),w(s,e,null),$(e,f),w(i,e,null),$(e,a),w(u,e,null),$(e,c),w(p,e,null),$(e,m),w(k,e,null),$(e,C),w(T,e,null),$(e,j),w(D,e,null),o[7](e),d(I,N,R),w(M,I,R),O=!0},p(I,[R]){const P={};R&256&&(P.$$scope={dirty:R,ctx:I}),n.$set(P);const q={};R&256&&(q.$$scope={dirty:R,ctx:I}),s.$set(q);const Q={};R&256&&(Q.$$scope={dirty:R,ctx:I}),i.$set(Q);const ae={};R&256&&(ae.$$scope={dirty:R,ctx:I}),u.$set(ae);const F={};R&256&&(F.$$scope={dirty:R,ctx:I}),p.$set(F);const x={};R&256&&(x.$$scope={dirty:R,ctx:I}),k.$set(x);const V={};R&265&&(V.$$scope={dirty:R,ctx:I}),T.$set(V);const U={};R&2&&(U.disabled=!I[1]),D.$set(U);const Ce={};R&258&&(Ce.$$scope={dirty:R,ctx:I}),M.$set(Ce)},i(I){O||(_(l.$$.fragment,I),_(n.$$.fragment,I),_(s.$$.fragment,I),_(i.$$.fragment,I),_(u.$$.fragment,I),_(p.$$.fragment,I),_(k.$$.fragment,I),_(T.$$.fragment,I),_(D.$$.fragment,I),_(M.$$.fragment,I),O=!0)},o(I){g(l.$$.fragment,I),g(n.$$.fragment,I),g(s.$$.fragment,I),g(i.$$.fragment,I),g(u.$$.fragment,I),g(p.$$.fragment,I),g(k.$$.fragment,I),g(T.$$.fragment,I),g(D.$$.fragment,I),g(M.$$.fragment,I),O=!1},d(I){I&&(h(e),h(N)),v(l),v(n),v(s),v(i),v(u),v(p),v(k),v(T),v(D),o[7](null),v(M,I)}}}function cm(o,e,l){let t,n,r,s;W(o,gr,c=>l(1,n=c)),W(o,bn,c=>l(2,r=c)),W(o,an,c=>l(3,s=c));let f={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},i={getStreetViewRoadLayerNames:c=>Jr(c,Ur(pn))};function a(c){t=c,l(0,t),l(1,n)}function u(c){H[c?"unshift":"push"](()=>{r=c,bn.set(r)})}return o.$$.update=()=>{o.$$.dirty&2&&l(0,t=!n),o.$$.dirty&1&&gr.set(!t)},[t,n,r,s,f,i,a,u]}class $m extends K{constructor(e){super(),X(this,e,cm,um,J,{})}}function pm(o){let e,l,t;return{c(){e=S("p"),e.innerHTML="<b>Selected layers</b>",l=L(),t=S("div")},m(n,r){d(n,e,r),d(n,l,r),d(n,t,r),o[3](t)},p:Z,i:Z,o:Z,d(n){n&&(h(e),h(l),h(t)),o[3](null)}}}function mm(o,e,l){if(o){o.innerHTML="";for(let t of e){let n=l.get(t);n&&(n.style.display="block",o.appendChild(n))}}}function _m(o,e,l){let t,n;W(o,mn,f=>l(1,t=f)),W(o,Zt,f=>l(2,n=f));let r=null;function s(f){H[f?"unshift":"push"](()=>{r=f,l(0,r)})}return o.$$.update=()=>{o.$$.dirty&7&&mm(r,n,t)},[r,t,n,s]}class gm extends K{constructor(e){super(),X(this,e,_m,pm,J,{})}}function dm(o){let e,l,t,n,r,s,f,i,a,u,c,p,m,k,C;return l=new Vr({}),n=new ao({}),f=new fo({}),p=new Bo({props:{boundaryGeojson:o[3]}}),{c(){e=S("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),r=L(),s=S("div"),b(f.$$.fragment),i=L(),a=S("div"),u=S("h1"),u.textContent="Scheme Browser",c=L(),b(p.$$.fragment),m=L(),k=S("div"),ie(s,"border-bottom","1px solid #b1b4b6"),ie(a,"display","flex"),ie(a,"justify-content","space-between"),A(e,"slot","sidebar"),A(e,"class","govuk-prose")},m(T,j){d(T,e,j),w(l,e,null),$(e,t),w(n,e,null),$(e,r),$(e,s),w(f,s,null),$(e,i),$(e,a),$(a,u),$(a,c),w(p,a,null),$(e,m),$(e,k),o[6](k),C=!0},p(T,j){const D={};j&8&&(D.boundaryGeojson=T[3]),p.$set(D)},i(T){C||(_(l.$$.fragment,T),_(n.$$.fragment,T),_(f.$$.fragment,T),_(p.$$.fragment,T),C=!0)},o(T){g(l.$$.fragment,T),g(n.$$.fragment,T),g(f.$$.fragment,T),g(p.$$.fragment,T),C=!1},d(T){T&&h(e),v(l),v(n),v(f),v(p),o[6](null)}}}function dr(o){let e,l;return e=new $m({}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function hm(o){let e,l,t,n;e=new to({});let r=o[2]&&dr();return{c(){b(e.$$.fragment),l=L(),r&&r.c(),t=ve()},m(s,f){w(e,s,f),d(s,l,f),r&&r.m(s,f),d(s,t,f),n=!0},p(s,f){s[2]?r?f&4&&_(r,1):(r=dr(),r.c(),_(r,1),r.m(t.parentNode,t)):r&&(be(),g(r,1,1,()=>{r=null}),we())},i(s){n||(_(e.$$.fragment,s),_(r),n=!0)},o(s){g(e.$$.fragment,s),g(r),n=!1},d(s){s&&(h(l),h(t)),v(e,s),r&&r.d(s)}}}function bm(o){let e,l,t;return l=new uo({props:{style:o[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[hm]},$$scope:{ctx:o}}}),{c(){e=S("div"),b(l.$$.fragment),A(e,"slot","main")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const s={};r&2&&(s.style=n[1]),r&260&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function wm(o){let e,l,t,n,r;return e=new ho({props:{$$slots:{main:[bm],sidebar:[dm]},$$scope:{ctx:o}}}),n=new gm({}),{c(){b(e.$$.fragment),l=L(),t=S("div"),b(n.$$.fragment),A(t,"class","top-right govuk-prose svelte-u44ed2")},m(s,f){w(e,s,f),d(s,l,f),d(s,t,f),w(n,t,null),r=!0},p(s,[f]){const i={};f&271&&(i.$$scope={dirty:f,ctx:s}),e.$set(i)},i(s){r||(_(e.$$.fragment,s),_(n.$$.fragment,s),r=!0)},o(s){g(e.$$.fragment,s),g(n.$$.fragment,s),r=!1},d(s){s&&(h(l),h(t)),v(e,s),v(n)}}}function vm(o,e,l){let t,n,r,s,f;W(o,bn,c=>l(4,t=c)),W(o,an,c=>l(5,n=c)),W(o,pn,c=>l(1,r=c)),W(o,qn,c=>l(2,s=c)),W(o,on,c=>l(3,f=c)),br(()=>{Wr()});const i=new URLSearchParams(window.location.search);pn.set(i.get("style")||"dataviz");let a;function u(c){H[c?"unshift":"push"](()=>{a=c,l(0,a),l(4,t)})}return o.$$.update=()=>{o.$$.dirty&32&&n&&qn.set(n),o.$$.dirty&17&&a&&t&&(l(0,a.innerHTML="",a),a.appendChild(t))},[a,r,s,f,t,n,u]}class km extends K{constructor(e){super(),X(this,e,vm,wm,J,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new km({target:document.getElementById("app")});
