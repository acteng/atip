import{S as K,i as X,s as V,e as S,d as F,b as ne,f as d,q as Q,j as h,G as $t,a as C,ao as Gn,g as p,a3 as mt,H as _t,I as gt,J as dt,t as m,h as g,A as _e,v as ge,y as He,c as b,l as T,m as v,z as q,k,D as be,x as Y,E as Cn,F as pt,r as E,u as U,w as W,a5 as Wt,ap as Fn,aq as Vr,P as te,ak as $n,ag as Qt,N as Se,Q as le,R as oe,ac as Zt,a2 as et,a4 as Ir,ar as zt,o as Mr,as as Qr,an as Zr,aj as vn,n as Kr}from"./stores-7a4e39e8.js";import{e as $e,z as kn,S as Be,G as ce,R as In,H as Xt,I as Xr,M as xr,o as yn,s as eo,f as to,h as no,j as lo,J as jr,F as ro,E as oo}from"./files-99737b22.js";import{c as H,d as tt,t as so,a as Ke,C as Ge,e as de,S as st,p as qn,f as zn,h as Jt,g as io,m as Hn}from"./colors-98f9f3a0.js";import{e as Bn,h as rt,M as ao,b as Or,H as fo,R as uo,f as nt,C as Ht,d as co,c as En,a as Un,i as on,W as mn,B as po,S as $o,G as mo}from"./WarningIcon-b89ac22a.js";import{g as Mn,u as Nr,r as Pr,b as Ar,c as Rr,e as _o,G as Bt,a as he,d as go,E as re,h as ee,F as qe,f as ho,i as wo,j as bo,A as vo,L as ko,M as yo}from"./MapLibreMap-ff01f28a.js";import{P as ae,A as Dr}from"./Popup-150812fd.js";import{D as So}from"./DefaultButton-41c11675.js";import{H as To}from"./Header-e9c8e6ba.js";function Lo(o){let e;return{c(){e=S("span"),F(e,"class","svelte-kzgqtg"),ne(e,"background",o[0])},m(n,t){d(n,e,t)},p(n,[t]){t&1&&ne(e,"background",n[0])},i:Q,o:Q,d(n){n&&h(e)}}}function Co(o,e,n){let{color:t}=e;return o.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class Te extends K{constructor(e){super(),X(this,e,Co,Lo,V,{color:0})}}const Io=o=>({}),Wn=o=>({}),Mo=o=>({}),Yn=o=>({});function jo(o){let e,n,t,l,r,s,f,i,a,u,c;const $=o[4].sidebar,_=$t($,o,o[3],Yn),w=o[4].main,L=$t(w,o,o[3],Wn);return{c(){e=S("div"),n=S("aside"),t=S("div"),_&&_.c(),l=C(),r=S("button"),r.textContent="→",f=C(),i=S("main"),L&&L.c(),F(t,"class","sidebar-content content-container svelte-1n0etgd"),F(r,"type","button"),F(r,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),F(n,"class",s=Gn(o[1]?"":"collapsed")+" svelte-1n0etgd"),ne(n,"--sidebarWidth",o[0]),F(i,"class","svelte-1n0etgd"),F(e,"class","overall-layout svelte-1n0etgd")},m(y,M){d(y,e,M),p(e,n),p(n,t),_&&_.m(t,null),p(n,l),p(n,r),p(e,f),p(e,i),L&&L.m(i,null),a=!0,u||(c=mt(r,"click",o[2]),u=!0)},p(y,[M]){_&&_.p&&(!a||M&8)&&_t(_,$,y,y[3],a?dt($,y[3],M,Mo):gt(y[3]),Yn),(!a||M&2&&s!==(s=Gn(y[1]?"":"collapsed")+" svelte-1n0etgd"))&&F(n,"class",s),(!a||M&1)&&ne(n,"--sidebarWidth",y[0]),L&&L.p&&(!a||M&8)&&_t(L,w,y,y[3],a?dt(w,y[3],M,Io):gt(y[3]),Wn)},i(y){a||(m(_,y),m(L,y),a=!0)},o(y){g(_,y),g(L,y),a=!1},d(y){y&&h(e),_&&_.d(y),L&&L.d(y),u=!1,c()}}}function Oo(o,e,n){let{$$slots:t={},$$scope:l}=e,{sidebarWidth:r="25rem"}=e,s=!0;function f(){n(1,s=!s)}return o.$$set=i=>{"sidebarWidth"in i&&n(0,r=i.sidebarWidth),"$$scope"in i&&n(3,l=i.$$scope)},[r,s,f,l,t]}class No extends K{constructor(e){super(),X(this,e,Oo,jo,V,{sidebarWidth:0})}}function Jn(o,e,n){const t=o.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function Vn(o){let e,n,t,l=o[1]+"",r,s,f;return n=new Te({props:{color:o[2]}}),{c(){e=S("li"),b(n.$$.fragment),t=C(),r=T(l),s=C()},m(i,a){d(i,e,a),v(n,e,null),p(e,t),p(e,r),p(e,s),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),n.$set(u),(!f||a&1)&&l!==(l=i[1]+"")&&q(r,l)},i(i){f||(m(n.$$.fragment,i),f=!0)},o(i){g(n.$$.fragment,i),f=!1},d(i){i&&h(e),k(n)}}}function Po(o){let e,n,t=$e(o[0]),l=[];for(let s=0;s<t.length;s+=1)l[s]=Vn(Jn(o,t,s));const r=s=>g(l[s],1,1,()=>{l[s]=null});return{c(){e=S("ul");for(let s=0;s<l.length;s+=1)l[s].c()},m(s,f){d(s,e,f);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(s,[f]){if(f&1){t=$e(s[0]);let i;for(i=0;i<t.length;i+=1){const a=Jn(s,t,i);l[i]?(l[i].p(a,f),m(l[i],1)):(l[i]=Vn(a),l[i].c(),m(l[i],1),l[i].m(e,null))}for(_e(),i=t.length;i<l.length;i+=1)r(i);ge()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)m(l[f]);n=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)g(l[f]);n=!1},d(s){s&&h(e),He(l,s)}}}function Ao(o,e,n){let{rows:t}=e;return o.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class Et extends K{constructor(e){super(),X(this,e,Ao,Po,V,{rows:0})}}function Qn(o){let e=o[0],n,t,l=Zn(o);return{c(){l.c(),n=be()},m(r,s){l.m(r,s),d(r,n,s),t=!0},p(r,s){s&1&&V(e,e=r[0])?(_e(),g(l,1,1,Q),ge(),l=Zn(r),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(r,s)},i(r){t||(m(l),t=!0)},o(r){g(l),t=!1},d(r){r&&h(n),l.d(r)}}}function Zn(o){let e;const n=o[16].default,t=$t(n,o,o[15],null);return{c(){t&&t.c()},m(l,r){t&&t.m(l,r),e=!0},p(l,r){t&&t.p&&(!e||r&32768)&&_t(t,n,l,l[15],e?dt(n,l[15],r,null):gt(l[15]),null)},i(l){e||(m(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function Ro(o){let e,n,t=o[0]&&Qn(o);return{c(){t&&t.c(),e=be()},m(l,r){t&&t.m(l,r),d(l,e,r),n=!0},p(l,[r]){l[0]?t?(t.p(l,r),r&1&&m(t,1)):(t=Qn(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(_e(),g(t,1,1,()=>{t=null}),ge())},i(l){n||(m(t),n=!0)},o(l){g(t),n=!1},d(l){l&&h(e),t&&t.d(l)}}}function Do(o,e,n){let t,l,{$$slots:r={},$$scope:s}=e,{id:f=Mn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e,{bounds:u=null}=e,{scheme:c=null}=e,{attribution:$=null}=e,{minzoom:_=null}=e,{maxzoom:w=null}=e,{volatile:L=null}=e;const{map:y,self:M}=Nr();Y(o,y,N=>n(14,l=N)),Y(o,M,N=>n(0,t=N));let I,P=!0;return Cn(()=>{t&&I&&l&&(Pr(y,t,I),pt(M,t=null,t),n(12,I=void 0))}),o.$$set=N=>{"id"in N&&n(3,f=N.id),"tiles"in N&&n(4,i=N.tiles),"tileSize"in N&&n(5,a=N.tileSize),"bounds"in N&&n(6,u=N.bounds),"scheme"in N&&n(7,c=N.scheme),"attribution"in N&&n(8,$=N.attribution),"minzoom"in N&&n(9,_=N.minzoom),"maxzoom"in N&&n(10,w=N.maxzoom),"volatile"in N&&n(11,L=N.volatile),"$$scope"in N&&n(15,s=N.$$scope)},o.$$.update=()=>{o.$$.dirty&24569&&l&&t!==f&&(pt(M,t=f,t),Ar(l,t,Rr({type:"raster",tiles:i,tileSize:a,bounds:u,scheme:c,attribution:$,minzoom:_,maxzoom:w,volatile:L}),N=>l&&N===t,()=>{t&&(n(12,I=l==null?void 0:l.getSource(t)),n(13,P=!0))})),o.$$.dirty&16392&&(l==null||l.on("style.load",()=>{n(12,I=l==null?void 0:l.getSource(f))})),o.$$.dirty&12304&&I&&(P?n(13,P=!1):I.setTiles(i))},[t,y,M,f,i,a,u,c,$,_,w,L,I,P,l,s,r]}class Go extends K{constructor(e){super(),X(this,e,Do,Ro,V,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function Fo(o){let e;const n=o[16].default,t=$t(n,o,o[24],null);return{c(){t&&t.c()},m(l,r){t&&t.m(l,r),e=!0},p(l,r){t&&t.p&&(!e||r&16777216)&&_t(t,n,l,l[24],e?dt(n,l[24],r,null):gt(l[24]),null)},i(l){e||(m(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function qo(o){let e,n,t;function l(s){o[17](s)}let r={id:o[1],type:"symbol",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],applyToClusters:o[9],minzoom:o[10],maxzoom:o[11],hoverCursor:o[12],manageHoverState:o[13],eventsIfTopMost:o[14],interactive:o[15],$$slots:{default:[Fo]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.hovered=o[0]),e=new _o({props:r}),E.push(()=>U(e,"hovered",l)),e.$on("click",o[18]),e.$on("dblclick",o[19]),e.$on("contextmenu",o[20]),e.$on("mouseenter",o[21]),e.$on("mousemove",o[22]),e.$on("mouseleave",o[23]),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,[f]){const i={};f&2&&(i.id=s[1]),f&4&&(i.source=s[2]),f&8&&(i.sourceLayer=s[3]),f&16&&(i.beforeId=s[4]),f&32&&(i.beforeLayerType=s[5]),f&64&&(i.paint=s[6]),f&128&&(i.layout=s[7]),f&256&&(i.filter=s[8]),f&512&&(i.applyToClusters=s[9]),f&1024&&(i.minzoom=s[10]),f&2048&&(i.maxzoom=s[11]),f&4096&&(i.hoverCursor=s[12]),f&8192&&(i.manageHoverState=s[13]),f&16384&&(i.eventsIfTopMost=s[14]),f&32768&&(i.interactive=s[15]),f&16777216&&(i.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,i.hovered=s[0],W(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function zo(o,e,n){let{$$slots:t={},$$scope:l}=e,{id:r=Mn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:$=void 0}=e,{applyToClusters:_=void 0}=e,{minzoom:w=void 0}=e,{maxzoom:L=void 0}=e,{hoverCursor:y=void 0}=e,{manageHoverState:M=!1}=e,{hovered:I=null}=e,{eventsIfTopMost:P=!1}=e,{interactive:N=!0}=e;function O(G){I=G,n(0,I)}function j(G){Wt.call(this,o,G)}function A(G){Wt.call(this,o,G)}function R(G){Wt.call(this,o,G)}function z(G){Wt.call(this,o,G)}function J(G){Wt.call(this,o,G)}function ie(G){Wt.call(this,o,G)}return o.$$set=G=>{"id"in G&&n(1,r=G.id),"source"in G&&n(2,s=G.source),"sourceLayer"in G&&n(3,f=G.sourceLayer),"beforeId"in G&&n(4,i=G.beforeId),"beforeLayerType"in G&&n(5,a=G.beforeLayerType),"paint"in G&&n(6,u=G.paint),"layout"in G&&n(7,c=G.layout),"filter"in G&&n(8,$=G.filter),"applyToClusters"in G&&n(9,_=G.applyToClusters),"minzoom"in G&&n(10,w=G.minzoom),"maxzoom"in G&&n(11,L=G.maxzoom),"hoverCursor"in G&&n(12,y=G.hoverCursor),"manageHoverState"in G&&n(13,M=G.manageHoverState),"hovered"in G&&n(0,I=G.hovered),"eventsIfTopMost"in G&&n(14,P=G.eventsIfTopMost),"interactive"in G&&n(15,N=G.interactive),"$$scope"in G&&n(24,l=G.$$scope)},[I,r,s,f,i,a,u,c,$,_,w,L,y,M,P,N,t,O,j,A,R,z,J,ie,l]}class jn extends K{constructor(e){super(),X(this,e,zo,qo,V,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Kn(o){let e=o[0],n,t,l=Xn(o);return{c(){l.c(),n=be()},m(r,s){l.m(r,s),d(r,n,s),t=!0},p(r,s){s&1&&V(e,e=r[0])?(_e(),g(l,1,1,Q),ge(),l=Xn(r),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(r,s)},i(r){t||(m(l),t=!0)},o(r){g(l),t=!1},d(r){r&&h(n),l.d(r)}}}function Xn(o){let e;const n=o[15].default,t=$t(n,o,o[14],null);return{c(){t&&t.c()},m(l,r){t&&t.m(l,r),e=!0},p(l,r){t&&t.p&&(!e||r&16384)&&_t(t,n,l,l[14],e?dt(n,l[14],r,null):gt(l[14]),null)},i(l){e||(m(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function Ho(o){let e,n,t=o[0]&&Kn(o);return{c(){t&&t.c(),e=be()},m(l,r){t&&t.m(l,r),d(l,e,r),n=!0},p(l,[r]){l[0]?t?(t.p(l,r),r&1&&m(t,1)):(t=Kn(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(_e(),g(t,1,1,()=>{t=null}),ge())},i(l){n||(m(t),n=!0)},o(l){g(t),n=!1},d(l){l&&h(e),t&&t.d(l)}}}function Bo(o,e,n){let t,l,{$$slots:r={},$$scope:s}=e,{id:f=Mn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e,{bounds:c=null}=e,{scheme:$=null}=e,{attribution:_=null}=e,{minzoom:w=null}=e,{maxzoom:L=null}=e,{volatile:y=null}=e;if(i&&i.includes("pmtiles://")&&!Fn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let N=new Vr;Fn.addProtocol("pmtiles",N.tile)}const{map:M,self:I}=Nr();Y(o,M,N=>n(13,l=N)),Y(o,I,N=>n(0,t=N));let P;return Cn(()=>{t&&l&&(Pr(M,t,P),pt(I,t=null,t),P=void 0)}),o.$$set=N=>{"id"in N&&n(3,f=N.id),"url"in N&&n(4,i=N.url),"tiles"in N&&n(5,a=N.tiles),"promoteId"in N&&n(6,u=N.promoteId),"bounds"in N&&n(7,c=N.bounds),"scheme"in N&&n(8,$=N.scheme),"attribution"in N&&n(9,_=N.attribution),"minzoom"in N&&n(10,w=N.minzoom),"maxzoom"in N&&n(11,L=N.maxzoom),"volatile"in N&&n(12,y=N.volatile),"$$scope"in N&&n(14,s=N.$$scope)},o.$$.update=()=>{o.$$.dirty&16377&&l&&t!==f&&(pt(I,t=f,t),Ar(l,t,Rr({type:"vector",url:i,tiles:a,promoteId:u,bounds:c,scheme:$,attribution:_,minzoom:w,maxzoom:L,volatile:y}),N=>l&&N===t,()=>{t&&(P=l==null?void 0:l.getSource(t))})),o.$$.dirty&8200&&(l==null||l.on("style.load",()=>{P=l==null?void 0:l.getSource(f)}))},[t,M,I,f,i,a,u,c,$,_,w,L,y,l,s,r]}class pe extends K{constructor(e){super(),X(this,e,Bo,Ho,V,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function xn(o,e,n){const t=o.slice();return t[11]=e[n],t[12]=e,t[13]=n,t}function Eo(o){let e,n,t;return n=new Be({props:{$$slots:{default:[Wo]},$$scope:{ctx:o}}}),n.$on("click",o[9]),{c(){e=S("div"),b(n.$$.fragment)},m(l,r){d(l,e,r),v(n,e,null),t=!0},p(l,r){const s={};r&16384&&(s.$$scope={dirty:r,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&h(e),k(n)}}}function Uo(o){let e,n,t,l,r,s,f,i,a,u;n=new Be({props:{$$slots:{default:[Yo]},$$scope:{ctx:o}}}),n.$on("click",o[4]);let c=o[2]&&el(o);r=new rt({props:{label:"Help",$$slots:{default:[Jo]},$$scope:{ctx:o}}}),f=new go({}),f.$on("click",o[3]);let $=$e(o[0]),_=[];for(let L=0;L<$.length;L+=1)_[L]=tl(xn(o,$,L));const w=L=>g(_[L],1,1,()=>{_[L]=null});return{c(){e=S("div"),b(n.$$.fragment),t=C(),c&&c.c(),l=C(),b(r.$$.fragment),s=C(),b(f.$$.fragment),i=C();for(let L=0;L<_.length;L+=1)_[L].c();a=be()},m(L,y){d(L,e,y),v(n,e,null),d(L,t,y),c&&c.m(L,y),d(L,l,y),v(r,L,y),d(L,s,y),v(f,L,y),d(L,i,y);for(let M=0;M<_.length;M+=1)_[M]&&_[M].m(L,y);d(L,a,y),u=!0},p(L,y){const M={};y&16384&&(M.$$scope={dirty:y,ctx:L}),n.$set(M),L[2]?c?c.p(L,y):(c=el(L),c.c(),c.m(l.parentNode,l)):c&&(c.d(1),c=null);const I={};if(y&16384&&(I.$$scope={dirty:y,ctx:L}),r.$set(I),y&65){$=$e(L[0]);let P;for(P=0;P<$.length;P+=1){const N=xn(L,$,P);_[P]?(_[P].p(N,y),m(_[P],1)):(_[P]=tl(N),_[P].c(),m(_[P],1),_[P].m(a.parentNode,a))}for(_e(),P=$.length;P<_.length;P+=1)w(P);ge()}},i(L){if(!u){m(n.$$.fragment,L),m(r.$$.fragment,L),m(f.$$.fragment,L);for(let y=0;y<$.length;y+=1)m(_[y]);u=!0}},o(L){g(n.$$.fragment,L),g(r.$$.fragment,L),g(f.$$.fragment,L),_=_.filter(Boolean);for(let y=0;y<_.length;y+=1)g(_[y]);u=!1},d(L){L&&(h(e),h(t),h(l),h(s),h(i),h(a)),k(n),c&&c.d(L),k(r,L),k(f,L),He(_,L)}}}function Wo(o){let e;return{c(){e=T("Measure lines")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function Yo(o){let e;return{c(){e=T("Stop measuring")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function el(o){let e,n,t=o[2].toFixed(2)+"",l,r;return{c(){e=S("p"),n=T("Length: "),l=T(t),r=T(" meters")},m(s,f){d(s,e,f),p(e,n),p(e,l),p(e,r)},p(s,f){f&4&&t!==(t=s[2].toFixed(2)+"")&&q(l,t)},d(s){s&&h(e)}}}function Jo(o){let e;return{c(){e=S("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(n,t){d(n,e,t)},p:Q,d(n){n&&h(e)}}}function Vo(o){let e,n;return{c(){e=S("span"),n=C(),F(e,"class","dot svelte-1tzt432")},m(t,l){d(t,e,l),d(t,n,l)},p:Q,d(t){t&&(h(e),h(n))}}}function tl(o){let e,n,t;function l(f){o[7](f,o[11],o[12],o[13])}function r(){return o[8](o[13])}let s={draggable:!0,$$slots:{default:[Vo]},$$scope:{ctx:o}};return o[11]!==void 0&&(s.lngLat=o[11]),e=new ao({props:s}),E.push(()=>U(e,"lngLat",l)),e.$on("click",r),{c(){b(e.$$.fragment)},m(f,i){v(e,f,i),t=!0},p(f,i){o=f;const a={};i&16384&&(a.$$scope={dirty:i,ctx:o}),!n&&i&1&&(n=!0,a.lngLat=o[11],W(()=>n=!1)),e.$set(a)},i(f){t||(m(e.$$.fragment,f),t=!0)},o(f){g(e.$$.fragment,f),t=!1},d(f){k(e,f)}}}function Qo(o){let e,n;const t=[H("measurement-line"),{paint:{"line-color":tt.measuringLine,"line-width":5}}];let l={};for(let r=0;r<t.length;r+=1)l=te(l,t[r]);return e=new he({props:l}),{c(){b(e.$$.fragment)},m(r,s){v(e,r,s),n=!0},p(r,s){const f={};e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function Zo(o){let e,n,t,l,r,s,f;const i=[Uo,Eo],a=[];function u(c,$){return c[1]?0:1}return e=u(o),n=a[e]=i[e](o),l=new Bt({props:{data:o[0].length<2?Bn():kn(o[0]),$$slots:{default:[Qo]},$$scope:{ctx:o}}}),{c(){n.c(),t=C(),b(l.$$.fragment)},m(c,$){a[e].m(c,$),d(c,t,$),v(l,c,$),r=!0,s||(f=mt(window,"keydown",o[5]),s=!0)},p(c,[$]){let _=e;e=u(c),e===_?a[e].p(c,$):(_e(),g(a[_],1,1,()=>{a[_]=null}),ge(),n=a[e],n?n.p(c,$):(n=a[e]=i[e](c),n.c()),m(n,1),n.m(t.parentNode,t));const w={};$&1&&(w.data=c[0].length<2?Bn():kn(c[0])),$&16384&&(w.$$scope={dirty:$,ctx:c}),l.$set(w)},i(c){r||(m(n),m(l.$$.fragment,c),r=!0)},o(c){g(n),g(l.$$.fragment,c),r=!1},d(c){c&&h(t),a[e].d(c),k(l,c),s=!1,f()}}}function Ko(o,e,n){let t,l=!1,r=[];function s(w){return w.length<2?null:1e3*so(kn(w),{units:"kilometers"})}function f(w){n(0,r=[...r,w.detail.lngLat.toArray()])}function i(){n(1,l=!1),n(0,r=[])}function a(w){l&&w.key==="Escape"&&(w.stopPropagation(),i())}function u(w){r.splice(w,1),n(0,r)}function c(w,L,y,M){y[M]=w,n(0,r)}const $=w=>u(w),_=()=>n(1,l=!0);return o.$$.update=()=>{o.$$.dirty&1&&n(2,t=s(r))},[r,l,t,f,i,a,u,c,$,_]}class Xo extends K{constructor(e){super(),X(this,e,Ko,Zo,V,{})}}const xo="/atip/ss_sb_integration/assets/zoom_out_map-b2e1091a.svg";function es(o){let e,n;return{c(){e=S("img"),Qt(e.src,n=xo)||F(e,"src",n),F(e,"alt","Zoom to show entire boundary")},m(t,l){d(t,e,l)},p:Q,d(t){t&&h(e)}}}function ts(o){let e,n;return e=new Be({props:{title:"Zoom to show entire boundary",$$slots:{default:[es]},$$scope:{ctx:o}}}),e.$on("click",o[0]),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const r={};l&8&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function ns(o,e,n){let t;Y(o,$n,s=>n(2,t=s));let{boundaryGeojson:l}=e;function r(){let s=Or(l);Number.isFinite(s[0])&&t.fitBounds(s,{padding:20,animate:!0,duration:500})}return o.$$set=s=>{"boundaryGeojson"in s&&n(1,l=s.boundaryGeojson)},[r,l]}class ls extends K{constructor(e){super(),X(this,e,ns,ts,V,{boundaryGeojson:1})}}const x={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},Fe=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function rs(o){let e;return{c(){e=T(`Open Government License
  `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function os(o){let e,n,t,l,r;return t=new re({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[rs]},$$scope:{ctx:o}}}),{c(){e=S("p"),n=T("License: "),b(t.$$.fragment),l=T(`. Contains OS data © Crown copyright and database right
  2023.`)},m(s,f){d(s,e,f),p(e,n),v(t,e,null),p(e,l),r=!0},p(s,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){r||(m(t.$$.fragment,s),r=!0)},o(s){g(t.$$.fragment,s),r=!1},d(s){s&&h(e),k(t)}}}class Pe extends K{constructor(e){super(),X(this,e,null,os,V,{})}}function nl(o,e,n){const t=o.slice();return t[2]=e[n],t}function ll(o,e,n){const t=o.slice();return t[5]=e[n],t}function rl(o){let e,n;return{c(){e=S("span"),n=T(` 
    `),ne(e,"background",o[5]),ne(e,"width","100%"),ne(e,"border","1px solid black")},m(t,l){d(t,e,l),p(e,n)},p(t,l){l&1&&ne(e,"background",t[5])},d(t){t&&h(e)}}}function ol(o){let e,n=o[2]+"",t;return{c(){e=S("span"),t=T(n)},m(l,r){d(l,e,r),p(e,t)},p(l,r){r&2&&n!==(n=l[2]+"")&&q(t,n)},d(l){l&&h(e)}}}function ss(o){let e,n,t,l=$e(o[0]),r=[];for(let i=0;i<l.length;i+=1)r[i]=rl(ll(o,l,i));let s=$e(o[1]),f=[];for(let i=0;i<s.length;i+=1)f[i]=ol(nl(o,s,i));return{c(){e=S("div");for(let i=0;i<r.length;i+=1)r[i].c();n=C(),t=S("div");for(let i=0;i<f.length;i+=1)f[i].c();ne(e,"display","flex"),ne(t,"display","flex"),ne(t,"justify-content","space-between")},m(i,a){d(i,e,a);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);d(i,n,a),d(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){l=$e(i[0]);let u;for(u=0;u<l.length;u+=1){const c=ll(i,l,u);r[u]?r[u].p(c,a):(r[u]=rl(c),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=l.length}if(a&2){s=$e(i[1]);let u;for(u=0;u<s.length;u+=1){const c=nl(i,s,u);f[u]?f[u].p(c,a):(f[u]=ol(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=s.length}},i:Q,o:Q,d(i){i&&(h(e),h(n),h(t)),He(r,i),He(f,i)}}}function is(o,e,n){let{colorScale:t}=e,{limits:l}=e;return o.$$set=r=>{"colorScale"in r&&n(0,t=r.colorScale),"limits"in r&&n(1,l=r.limits)},[t,l]}class Ee extends K{constructor(e){super(),X(this,e,is,ss,V,{colorScale:0,limits:1})}}function ue(o){let e=new URLSearchParams(window.location.search).has(o),n=Se(e);return n.subscribe(t=>{let l=new URL(window.location.href);t?l.searchParams.set(o,"1"):l.searchParams.delete(o),window.history.replaceState(null,"",l.toString())}),n}function Ut(o,e,n,t){let l=e,r=new URLSearchParams(window.location.search).get(o);if(r!=null)try{l=t(r)}catch(f){console.warn(`Parsing URL parameter ${o}=${r} failed, using default value: ${f}`)}let s=Se(l);return s.subscribe(f=>{let i=new URL(window.location.href),a=n(f);a==null?i.searchParams.delete(o):i.searchParams.set(o,a),window.history.replaceState(null,"",i.toString())}),s}let Sn=Se(new Map),Vt=Se(new Set);const as=o=>({}),sl=o=>({}),fs=o=>({}),il=o=>({}),us=o=>({}),al=o=>({});function cs(o){let e;return{c(){e=T(o[2])},m(n,t){d(n,e,t)},p(n,t){t&4&&q(e,n[2])},d(n){n&&h(e)}}}function ps(o){let e,n,t;const l=o[7].icon,r=$t(l,o,o[10],al);return{c(){r&&r.c(),e=C(),n=T(o[2])},m(s,f){r&&r.m(s,f),d(s,e,f),d(s,n,f),t=!0},p(s,f){r&&r.p&&(!t||f&1024)&&_t(r,l,s,s[10],t?dt(l,s[10],f,us):gt(s[10]),al),(!t||f&4)&&q(n,s[2])},i(s){t||(m(r,s),t=!0)},o(s){g(r,s),t=!1},d(s){s&&(h(e),h(n)),r&&r.d(s)}}}function $s(o){let e;const n=o[7].help,t=$t(n,o,o[10],il);return{c(){t&&t.c()},m(l,r){t&&t.m(l,r),e=!0},p(l,r){t&&t.p&&(!e||r&1024)&&_t(t,n,l,l[10],e?dt(n,l[10],r,fs):gt(l[10]),il)},i(l){e||(m(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function ms(o){let e;return{c(){e=T("X")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function _s(o){let e,n,t,l,r,s,f,i,a;function u($){o[8]($)}let c={$$slots:{default:[ps]},$$scope:{ctx:o}};return o[0]!==void 0&&(c.checked=o[0]),n=new Ke({props:c}),E.push(()=>U(n,"checked",u)),s=new fo({props:{$$slots:{default:[$s]},$$scope:{ctx:o}}}),i=new Be({props:{$$slots:{default:[ms]},$$scope:{ctx:o}}}),i.$on("click",o[6]),{c(){e=S("div"),b(n.$$.fragment),l=C(),r=S("span"),b(s.$$.fragment),f=C(),b(i.$$.fragment),ne(e,"display","flex"),ne(e,"justify-content","space-between")},m($,_){d($,e,_),v(n,e,null),p(e,l),p(e,r),v(s,r,null),p(r,f),v(i,r,null),a=!0},p($,_){const w={};_&1028&&(w.$$scope={dirty:_,ctx:$}),!t&&_&1&&(t=!0,w.checked=$[0],W(()=>t=!1)),n.$set(w);const L={};_&1024&&(L.$$scope={dirty:_,ctx:$}),s.$set(L);const y={};_&1024&&(y.$$scope={dirty:_,ctx:$}),i.$set(y)},i($){a||(m(n.$$.fragment,$),m(s.$$.fragment,$),m(i.$$.fragment,$),a=!0)},o($){g(n.$$.fragment,$),g(s.$$.fragment,$),g(i.$$.fragment,$),a=!1},d($){$&&h(e),k(n),k(s),k(i)}}}function fl(o){let e;const n=o[7].controls,t=$t(n,o,o[10],sl);return{c(){t&&t.c()},m(l,r){t&&t.m(l,r),e=!0},p(l,r){t&&t.p&&(!e||r&1024)&&_t(t,n,l,l[10],e?dt(n,l[10],r,as):gt(l[10]),sl)},i(l){e||(m(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function gs(o){let e,n,t,l,r,s;e=new Ke({props:{checked:o[4].has(o[1]),$$slots:{default:[cs]},$$scope:{ctx:o}}}),e.$on("change",o[5]),l=new Ge({props:{small:!0,$$slots:{default:[_s]},$$scope:{ctx:o}}});let f=o[0]&&fl(o);return{c(){b(e.$$.fragment),n=C(),t=S("div"),b(l.$$.fragment),r=C(),f&&f.c()},m(i,a){v(e,i,a),d(i,n,a),d(i,t,a),v(l,t,null),p(t,r),f&&f.m(t,null),o[9](t),s=!0},p(i,[a]){const u={};a&18&&(u.checked=i[4].has(i[1])),a&1028&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&1029&&(c.$$scope={dirty:a,ctx:i}),l.$set(c),i[0]?f?(f.p(i,a),a&1&&m(f,1)):(f=fl(i),f.c(),m(f,1),f.m(t,null)):f&&(_e(),g(f,1,1,()=>{f=null}),ge())},i(i){s||(m(e.$$.fragment,i),m(l.$$.fragment,i),m(f),s=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),g(f),s=!1},d(i){i&&(h(n),h(t)),k(e,i),k(l),f&&f.d(),o[9](null)}}}function ds(o,e,n){let t;Y(o,Vt,w=>n(4,t=w));let{$$slots:l={},$$scope:r}=e,{name:s}=e,{title:f}=e,{show:i}=e;i&&(t.add(s),Vt.set(t));let a=null;Cn(()=>{Sn.update(w=>(w.delete(s),w))});function u(){Vt.update(w=>(w.has(s)?(w.delete(s),n(0,i=!1)):(w.add(s),n(0,i=!0)),w))}function c(){t.delete(s),Vt.set(t),n(0,i=!1)}function $(w){i=w,n(0,i)}function _(w){E[w?"unshift":"push"](()=>{a=w,n(3,a),n(1,s)})}return o.$$set=w=>{"name"in w&&n(1,s=w.name),"title"in w&&n(2,f=w.title),"show"in w&&n(0,i=w.show),"$$scope"in w&&n(10,r=w.$$scope)},o.$$.update=()=>{o.$$.dirty&10&&a&&Sn.update(w=>(n(3,a.style.display="none",a),w.set(s,a),w))},[i,s,f,a,t,u,c,l,$,_,r]}class fe extends K{constructor(e){super(),X(this,e,ds,gs,V,{name:1,title:2,show:0})}}function ul(o){const e=o[7].OA21CD;o[8]=e;const n=o[7][o[0].kind];o[9]=n}function hs(o){let e,n,t,l,r,s,f;return t=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[vs]},$$scope:{ctx:o}}}),r=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ks]},$$scope:{ctx:o}}}),{c(){e=S("p"),n=T("Population density data is from the 2021 census, via "),b(t.$$.fragment),l=T(". Output area boundaries from "),b(r.$$.fragment),s=T(".")},m(i,a){d(i,e,a),p(e,n),v(t,e,null),p(e,l),v(r,e,null),p(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(r.$$.fragment,i),f=!1},d(i){i&&h(e),k(t),k(r)}}}function ws(o){let e,n,t,l,r,s,f,i,a;return r=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ys]},$$scope:{ctx:o}}}),f=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ss]},$$scope:{ctx:o}}}),{c(){e=S("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=C(),t=S("p"),l=T("Car/van availability data is from the 2021 census, via "),b(r.$$.fragment),s=T(". Output area boundaries from "),b(f.$$.fragment),i=T(".")},m(u,c){d(u,e,c),d(u,n,c),d(u,t,c),p(t,l),v(r,t,null),p(t,s),v(f,t,null),p(t,i),a=!0},i(u){a||(m(r.$$.fragment,u),m(f.$$.fragment,u),a=!0)},o(u){g(r.$$.fragment,u),g(f.$$.fragment,u),a=!1},d(u){u&&(h(e),h(n),h(t)),k(r),k(f)}}}function bs(o){let e,n,t,l,r,s,f;return t=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ts]},$$scope:{ctx:o}}}),r=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ls]},$$scope:{ctx:o}}}),{c(){e=S("p"),n=T("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),l=T(". Output area boundaries from "),b(r.$$.fragment),s=T(".")},m(i,a){d(i,e,a),p(e,n),v(t,e,null),p(e,l),v(r,e,null),p(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(r.$$.fragment,i),f=!1},d(i){i&&h(e),k(t),k(r)}}}function vs(o){let e;return{c(){e=T(`NOMIS TS006
        `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function ks(o){let e;return{c(){e=T(`ONS Geography
        `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function ys(o){let e;return{c(){e=T(`NOMIS TS045
        `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function Ss(o){let e;return{c(){e=T(`ONS Geography
        `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function Ts(o){let e;return{c(){e=T(`NOMIS TS045
        `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function Ls(o){let e;return{c(){e=T(`ONS Geography
        `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function Cs(o){let e,n,t,l,r,s;const f=[bs,ws,hs],i=[];function a(u,c){return u[0].kind=="percent_households_with_car"?0:u[0].kind=="average_cars_per_household"?1:2}return n=a(o),t=i[n]=f[n](o),r=new Pe({}),{c(){e=S("span"),t.c(),l=C(),b(r.$$.fragment),F(e,"slot","help")},m(u,c){d(u,e,c),i[n].m(e,null),p(e,l),v(r,e,null),s=!0},p(u,c){let $=n;n=a(u),n!==$&&(_e(),g(i[$],1,1,()=>{i[$]=null}),ge(),t=i[n],t||(t=i[n]=f[n](u),t.c()),m(t,1),t.m(e,l))},i(u){s||(m(t),m(r.$$.fragment,u),s=!0)},o(u){g(t),g(r.$$.fragment,u),s=!1},d(u){u&&h(e),i[n].d(),k(r)}}}function Is(o){let e,n,t,l;return t=new Ee({props:{colorScale:o[1],limits:ht(o[0].kind).map(cl)}}),{c(){e=S("p"),e.textContent="(people per square kilometres)",n=C(),b(t.$$.fragment)},m(r,s){d(r,e,s),d(r,n,s),v(t,r,s),l=!0},p(r,s){const f={};s&1&&(f.limits=ht(r[0].kind).map(cl)),t.$set(f)},i(r){l||(m(t.$$.fragment,r),l=!0)},o(r){g(t.$$.fragment,r),l=!1},d(r){r&&(h(e),h(n)),k(t,r)}}}function Ms(o){let e,n;return e=new Ee({props:{colorScale:o[1],limits:ht(o[0].kind)}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&1&&(r.limits=ht(t[0].kind)),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function js(o){let e,n;return e=new Ee({props:{colorScale:o[1],limits:ht(o[0].kind)}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&1&&(r.limits=ht(t[0].kind)),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Os(o){let e,n,t,l,r,s,f;function i(_){o[4](_)}let a={label:"Dataset",choices:[["percent_households_with_car","Percent of households with a car"],["average_cars_per_household","Average cars per household"],["population_density","Population density"]],inlineSmall:!0};o[0].kind!==void 0&&(a.value=o[0].kind),n=new In({props:a}),E.push(()=>U(n,"value",i));const u=[js,Ms,Is],c=[];function $(_,w){return _[0].kind=="percent_households_with_car"?0:_[0].kind=="average_cars_per_household"?1:_[0].kind=="population_density"?2:-1}return~(r=$(o))&&(s=c[r]=u[r](o)),{c(){e=S("div"),b(n.$$.fragment),l=C(),s&&s.c(),F(e,"slot","controls"),ne(e,"border","1px solid black"),ne(e,"padding","8px")},m(_,w){d(_,e,w),v(n,e,null),p(e,l),~r&&c[r].m(e,null),f=!0},p(_,w){const L={};!t&&w&1&&(t=!0,L.value=_[0].kind,W(()=>t=!1)),n.$set(L);let y=r;r=$(_),r===y?~r&&c[r].p(_,w):(s&&(_e(),g(c[y],1,1,()=>{c[y]=null}),ge()),~r?(s=c[r],s?s.p(_,w):(s=c[r]=u[r](_),s.c()),m(s,1),s.m(e,null)):s=null)},i(_){f||(m(n.$$.fragment,_),m(s),f=!0)},o(_){g(n.$$.fragment,_),g(s),f=!1},d(_){_&&h(e),k(n),~r&&c[r].d()}}}function Ns(o){let e,n,t,l=o[9].toLocaleString()+"",r,s,f=o[8]+"",i;return{c(){e=S("p"),n=T("There are "),t=S("b"),r=T(l),s=T(`
          people per square kilometre in `),i=T(f)},m(a,u){d(a,e,u),p(e,n),p(e,t),p(t,r),p(e,s),p(e,i)},p(a,u){u&129&&l!==(l=a[9].toLocaleString()+"")&&q(r,l),u&128&&f!==(f=a[8]+"")&&q(i,f)},d(a){a&&h(e)}}}function Ps(o){let e,n,t=o[8]+"",l,r,s,f=o[9]+"",i,a;return{c(){e=S("p"),n=T("Households in "),l=T(t),r=T(` have an average of
          `),s=S("b"),i=T(f),a=T(`
          cars`)},m(u,c){d(u,e,c),p(e,n),p(e,l),p(e,r),p(e,s),p(s,i),p(e,a)},p(u,c){c&128&&t!==(t=u[8]+"")&&q(l,t),c&129&&f!==(f=u[9]+"")&&q(i,f)},d(u){u&&h(e)}}}function As(o){let e,n,t=o[9]+"",l,r,s,f=o[8]+"",i,a;return{c(){e=S("p"),n=S("b"),l=T(t),r=T("%"),s=T(`
          of households in `),i=T(f),a=T(" have 1 or more cars")},m(u,c){d(u,e,c),p(e,n),p(n,l),p(n,r),p(e,s),p(e,i),p(e,a)},p(u,c){c&129&&t!==(t=u[9]+"")&&q(l,t),c&128&&f!==(f=u[8]+"")&&q(i,f)},d(u){u&&h(e)}}}function Rs(o){ul(o);let e;function n(r,s){return r[0].kind=="percent_households_with_car"?As:r[0].kind=="average_cars_per_household"?Ps:Ns}let t=n(o),l=t(o);return{c(){l.c(),e=be()},m(r,s){l.m(r,s),d(r,e,s)},p(r,s){ul(r),t===(t=n(r))&&l?l.p(r,s):(l.d(1),l=t(r),l&&(l.c(),l.m(e.parentNode,e)))},d(r){r&&h(e),l.d(r)}}}function Ds(o){let e,n;return e=new ae({props:{$$slots:{default:[Rs,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&1153&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Gs(o){let e,n,t,l;const r=[H(We),{sourceLayer:We},{paint:{"fill-color":de(["get",o[0].kind],ht(o[0].kind),o[1]),"fill-opacity":ee(.5,.7)}},{layout:{visibility:o[0].show?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Ds]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new qe({props:s}),e.$on("click",o[3]);const f=[H(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0].show?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new he({props:i}),{c(){b(e.$$.fragment),n=C(),b(t.$$.fragment)},m(a,u){v(e,a,u),d(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(H(We)),u&0&&{sourceLayer:We},u&3&&{paint:{"fill-color":de(["get",a[0].kind],ht(a[0].kind),a[1]),"fill-opacity":ee(.5,.7)}},u&1&&{layout:{visibility:a[0].show?"visible":"none"}},r[4],r[5],r[6]]):{};u&1025&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&1?le(f,[u&0&&oe(H(`${We}-outline`)),u&0&&{sourceLayer:We},f[2],u&1&&{layout:{visibility:a[0].show?"visible":"none"}}]):{};t.$set($)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&h(n),k(e,a),k(t,a)}}}function Fs(o){let e,n,t,l,r;function s(i){o[5](i)}let f={name:We,title:"2021 census",$$slots:{controls:[Os],help:[Cs]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${We}.pmtiles`,$$slots:{default:[Gs]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&1025&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0].show,W(()=>n=!1)),e.$set(u);const c={};a&1025&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let We="census_output_areas";function qs(o){return o.show?o.kind:null}function zs(o){return{show:!0,kind:o}}function ht(o){return o=="percent_households_with_car"?[0,20,40,60,80,100]:o=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const cl=o=>o.toLocaleString();function Hs(o,e,n){let t,l=x.sequential_low_to_high,s=Ut(We,{show:!1,kind:"percent_households_with_car"},qs,zs);Y(o,s,u=>n(0,t=u));function f(u){let c=u.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${c}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${c}`,"_blank")}function i(u){o.$$.not_equal(t.kind,u)&&(t.kind=u,s.set(t))}function a(u){o.$$.not_equal(t.show,u)&&(t.show=u,s.set(t))}return[t,l,s,f,i,a]}class Bs extends K{constructor(e){super(),X(this,e,Hs,Fs,V,{})}}function Es(o){let e,n,t;return n=new Te({props:{color:o[1]}}),{c(){e=S("span"),b(n.$$.fragment),F(e,"slot","icon")},m(l,r){d(l,e,r),v(n,e,null),t=!0},p:Q,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&h(e),k(n)}}}function Us(o){let e;return{c(){e=T(`ONS Geography
      `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function Ws(o){let e,n,t,l,r,s,f,i;return l=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/8369f71423ba474ebdbac60a539b53c8_0/explore",$$slots:{default:[Us]},$$scope:{ctx:o}}}),f=new Pe({}),{c(){e=S("span"),n=S("p"),t=T("Data from "),b(l.$$.fragment),r=T(", as of May 2024."),s=C(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,n),p(n,t),v(l,n,null),p(n,r),p(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),l.$set(c)},i(a){i||(m(l.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(l.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(l),k(f)}}}function Ys(o){let e,n=o[4].name+"",t;return{c(){e=S("p"),t=T(n)},m(l,r){d(l,e,r),p(e,t)},p(l,r){r&16&&n!==(n=l[4].name+"")&&q(t,n)},d(l){l&&h(e)}}}function Js(o){let e,n;return e=new ae({props:{$$slots:{default:[Ys,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&48&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Vs(o){let e,n,t,l;const r=[H(bt),{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Js]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new qe({props:s}),e.$on("click",Ks);const f=[H(`${bt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new he({props:i}),{c(){b(e.$$.fragment),n=C(),b(t.$$.fragment)},m(a,u){v(e,a,u),d(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(H(bt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?le(f,[u&0&&oe(H(`${bt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&h(n),k(e,a),k(t,a)}}}function Qs(o){let e,n,t,l,r;function s(i){o[3](i)}let f={name:bt,title:Zs,$$slots:{help:[Ws],icon:[Es]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new Bt({props:{data:`${ce()}/v1/${bt}.geojson`,$$slots:{default:[Vs]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let bt="combined_authorities",Zs="Combined authorities";function Ks(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.CAUTH24CD}`,"_blank")}function Xs(o,e,n){let t,l=x.combined_authorities,r=ue(bt);Y(o,r,f=>n(0,t=f));function s(f){t=f,r.set(t)}return[t,l,r,s]}class xs extends K{constructor(e){super(),X(this,e,Xs,Qs,V,{})}}function ei(o){let e;return{c(){e=T(`DLUCH GIS
      `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function ti(o){let e;return{c(){e=T(`here
      `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function ni(o){let e,n,t,l,r,s,f,i,a,u;return l=new re({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[ei]},$$scope:{ctx:o}}}),s=new re({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[ti]},$$scope:{ctx:o}}}),a=new Pe({}),{c(){e=S("span"),n=S("p"),t=T("The 2019 English IMD scores come from "),b(l.$$.fragment),r=T(`. Note the LSOAs identified are from the 2011 census. A
      detailed breakdown of the score across different categories can be found `),b(s.$$.fragment),f=T("."),i=C(),b(a.$$.fragment),F(e,"slot","help")},m(c,$){d(c,e,$),p(e,n),p(n,t),v(l,n,null),p(n,r),v(s,n,null),p(n,f),p(e,i),v(a,e,null),u=!0},p(c,$){const _={};$&64&&(_.$$scope={dirty:$,ctx:c}),l.$set(_);const w={};$&64&&(w.$$scope={dirty:$,ctx:c}),s.$set(w)},i(c){u||(m(l.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(l.$$.fragment,c),g(s.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),k(l),k(s),k(a)}}}function li(o){let e,n,t;return n=new Ee({props:{colorScale:o[1],limits:["Least deprived","Most deprived"]}}),{c(){e=S("span"),b(n.$$.fragment),F(e,"slot","controls")},m(l,r){d(l,e,r),v(n,e,null),t=!0},p:Q,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&h(e),k(n)}}}function ri(o){let e,n=o[5].LSOA11CD+"",t,l,r,s=o[5].score+"",f,i,a,u,c,$=o[5].rank.toLocaleString()+"",_,w;return{c(){e=S("p"),t=T(n),l=T(` has an IMD score of
        `),r=S("b"),f=T(s),i=C(),a=S("p"),u=T("Rank: "),c=S("b"),_=T($),w=T(`
        / 32,844 LSOAs`)},m(L,y){d(L,e,y),p(e,t),p(e,l),p(e,r),p(r,f),d(L,i,y),d(L,a,y),p(a,u),p(a,c),p(c,_),p(a,w)},p(L,y){y&32&&n!==(n=L[5].LSOA11CD+"")&&q(t,n),y&32&&s!==(s=L[5].score+"")&&q(f,s),y&32&&$!==($=L[5].rank.toLocaleString()+"")&&q(_,$)},d(L){L&&(h(e),h(i),h(a))}}}function oi(o){let e,n;return e=new ae({props:{$$slots:{default:[ri,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&96&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function si(o){let e,n,t,l;const r=[H(Ye),{sourceLayer:Ye},{paint:{"fill-color":de(["-",10,["get","decile"]],o[2],o[1]),"fill-opacity":ee(.5,.7)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[oi]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new qe({props:s});const f=[H(`${Ye}-outline`),{sourceLayer:Ye},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new he({props:i}),{c(){b(e.$$.fragment),n=C(),b(t.$$.fragment)},m(a,u){v(e,a,u),d(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&7?le(r,[u&0&&oe(H(Ye)),u&0&&{sourceLayer:Ye},u&6&&{paint:{"fill-color":de(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":ee(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&1?le(f,[u&0&&oe(H(`${Ye}-outline`)),u&0&&{sourceLayer:Ye},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&h(n),k(e,a),k(t,a)}}}function ii(o){let e,n,t,l,r;function s(i){o[4](i)}let f={name:Ye,title:ai,$$slots:{controls:[li],help:[ni]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Ye}.pmtiles`,$$slots:{default:[si]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let Ye="imd",ai="Indices of Multiple Deprivation";function fi(o,e,n){let t,l=x.sequential_low_to_high,r=[0,2,4,6,8,10],s=ue(Ye);Y(o,s,i=>n(0,t=i));function f(i){t=i,s.set(t)}return[t,l,r,s,f]}class ui extends K{constructor(e){super(),X(this,e,fi,ii,V,{})}}function ci(o){let e,n,t;return n=new Te({props:{color:o[1]}}),{c(){e=S("span"),b(n.$$.fragment),F(e,"slot","icon")},m(l,r){d(l,e,r),v(n,e,null),t=!0},p:Q,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&h(e),k(n)}}}function pi(o){let e;return{c(){e=T(`ONS Geography
      `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function $i(o){let e,n,t,l,r,s,f,i;return l=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/fb6ab0ce776243339e45e33444f431c8_0/explore",$$slots:{default:[pi]},$$scope:{ctx:o}}}),f=new Pe({}),{c(){e=S("span"),n=S("p"),t=T("Data from "),b(l.$$.fragment),r=T(", as of May 2024."),s=C(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,n),p(n,t),v(l,n,null),p(n,r),p(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),l.$set(c)},i(a){i||(m(l.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(l.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(l),k(f)}}}function mi(o){let e,n=o[4].name+"",t;return{c(){e=S("p"),t=T(n)},m(l,r){d(l,e,r),p(e,t)},p(l,r){r&16&&n!==(n=l[4].name+"")&&q(t,n)},d(l){l&&h(e)}}}function _i(o){let e,n;return e=new ae({props:{$$slots:{default:[mi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&48&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function gi(o){let e,n,t,l;const r=[H(vt),{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[_i]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new qe({props:s}),e.$on("click",wi);const f=[H(`${vt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new he({props:i}),{c(){b(e.$$.fragment),n=C(),b(t.$$.fragment)},m(a,u){v(e,a,u),d(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(H(vt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?le(f,[u&0&&oe(H(`${vt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&h(n),k(e,a),k(t,a)}}}function di(o){let e,n,t,l,r;function s(i){o[3](i)}let f={name:vt,title:hi,$$slots:{help:[$i],icon:[ci]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new Bt({props:{data:`${ce()}/v1/${vt}.geojson`,$$slots:{default:[gi]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let vt="local_authority_districts",hi="Local Authority Districts";function wi(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.LAD24CD}`,"_blank")}function bi(o,e,n){let t,l=x.local_authority_districts,r=ue(vt);Y(o,r,f=>n(0,t=f));function s(f){t=f,r.set(t)}return[t,l,r,s]}class vi extends K{constructor(e){super(),X(this,e,bi,di,V,{})}}function ki(o){let e,n,t;return n=new Te({props:{color:o[1]}}),{c(){e=S("span"),b(n.$$.fragment),F(e,"slot","icon")},m(l,r){d(l,e,r),v(n,e,null),t=!0},p:Q,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&h(e),k(n)}}}function yi(o){let e;return{c(){e=T(`local authority
      `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function Si(o){let e;return{c(){e=T(`national park authorit
      `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function Ti(o){let e;return{c(){e=T(`development corporation
      `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function Li(o){let e;return{c(){e=T("this map")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function Ci(o){let e;return{c(){e=T(`planning.data.gov.uk
      `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function Ii(o){let e,n,t,l,r,s,f,i,a,u,c,$,_,w,L,y,M,I,P,N,O,j,A;return l=new re({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[yi]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Si]},$$scope:{ctx:o}}}),i=new re({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Ti]},$$scope:{ctx:o}}}),w=new re({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Li]},$$scope:{ctx:o}}}),P=new re({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Ci]},$$scope:{ctx:o}}}),j=new Pe({}),{c(){e=S("span"),n=S("p"),t=T("LPAs may be a "),b(l.$$.fragment),r=T(", "),b(s.$$.fragment),f=T("y, or "),b(i.$$.fragment),a=T("."),u=C(),c=S("p"),$=S("strong"),_=T(`Note there are overlapping LPAs near Northhamptonshire. Only one
        authority name is shown when hovering. Use `),b(w.$$.fragment),L=T(" to get more details."),y=C(),M=S("p"),I=T("Data from ONS Geography via "),b(P.$$.fragment),N=T(", as of November 2022."),O=C(),b(j.$$.fragment),F(e,"slot","help")},m(R,z){d(R,e,z),p(e,n),p(n,t),v(l,n,null),p(n,r),v(s,n,null),p(n,f),v(i,n,null),p(n,a),p(e,u),p(e,c),p(c,$),p($,_),v(w,$,null),p($,L),p(e,y),p(e,M),p(M,I),v(P,M,null),p(M,N),p(e,O),v(j,e,null),A=!0},p(R,z){const J={};z&32&&(J.$$scope={dirty:z,ctx:R}),l.$set(J);const ie={};z&32&&(ie.$$scope={dirty:z,ctx:R}),s.$set(ie);const G={};z&32&&(G.$$scope={dirty:z,ctx:R}),i.$set(G);const Z={};z&32&&(Z.$$scope={dirty:z,ctx:R}),w.$set(Z);const B={};z&32&&(B.$$scope={dirty:z,ctx:R}),P.$set(B)},i(R){A||(m(l.$$.fragment,R),m(s.$$.fragment,R),m(i.$$.fragment,R),m(w.$$.fragment,R),m(P.$$.fragment,R),m(j.$$.fragment,R),A=!0)},o(R){g(l.$$.fragment,R),g(s.$$.fragment,R),g(i.$$.fragment,R),g(w.$$.fragment,R),g(P.$$.fragment,R),g(j.$$.fragment,R),A=!1},d(R){R&&h(e),k(l),k(s),k(i),k(w),k(P),k(j)}}}function Mi(o){let e,n=o[4].name+"",t;return{c(){e=S("p"),t=T(n)},m(l,r){d(l,e,r),p(e,t)},p(l,r){r&16&&n!==(n=l[4].name+"")&&q(t,n)},d(l){l&&h(e)}}}function ji(o){let e,n;return e=new ae({props:{$$slots:{default:[Mi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&48&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Oi(o){let e,n,t,l;const r=[H(Je),{sourceLayer:Je},{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[ji]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new qe({props:s});const f=[H(`${Je}-outline`),{sourceLayer:Je},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new he({props:i}),{c(){b(e.$$.fragment),n=C(),b(t.$$.fragment)},m(a,u){v(e,a,u),d(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(H(Je)),u&0&&{sourceLayer:Je},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?le(f,[u&0&&oe(H(`${Je}-outline`)),u&0&&{sourceLayer:Je},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&h(n),k(e,a),k(t,a)}}}function Ni(o){let e,n,t,l,r;function s(i){o[3](i)}let f={name:Je,title:Pi,$$slots:{help:[Ii],icon:[ki]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Je}.pmtiles`,$$slots:{default:[Oi]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let Je="local_planning_authorities",Pi="Local Planning Authorities";function Ai(o,e,n){let t,l=x.local_planning_authorities,r=ue(Je);Y(o,r,f=>n(0,t=f));function s(f){t=f,r.set(t)}return[t,l,r,s]}class Ri extends K{constructor(e){super(),X(this,e,Ai,Ni,V,{})}}function Di(o){let e,n,t;return n=new Te({props:{color:o[1]}}),{c(){e=S("span"),b(n.$$.fragment),F(e,"slot","icon")},m(l,r){d(l,e,r),v(n,e,null),t=!0},p:Q,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&h(e),k(n)}}}function Gi(o){let e;return{c(){e=T(`Ordnance Survey Boundary-Line
      `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function Fi(o){let e,n,t,l,r,s,f,i;return l=new re({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Gi]},$$scope:{ctx:o}}}),f=new Pe({}),{c(){e=S("span"),n=S("p"),t=T("Data from "),b(l.$$.fragment),r=T(", as of October 2024."),s=C(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,n),p(n,t),v(l,n,null),p(n,r),p(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),l.$set(c)},i(a){i||(m(l.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(l.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(l),k(f)}}}function qi(o){let e,n=o[4].Name+"",t;return{c(){e=S("p"),t=T(n)},m(l,r){d(l,e,r),p(e,t)},p(l,r){r&16&&n!==(n=l[4].Name+"")&&q(t,n)},d(l){l&&h(e)}}}function zi(o){let e,n;return e=new ae({props:{$$slots:{default:[qi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&48&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Hi(o){let e,n,t,l;const r=[H(Ve),{sourceLayer:Ve},{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[zi]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new qe({props:s}),e.$on("click",Ui);const f=[H(`${Ve}-outline`),{sourceLayer:Ve},{paint:{"line-color":o[1],"line-width":5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new he({props:i}),{c(){b(e.$$.fragment),n=C(),b(t.$$.fragment)},m(a,u){v(e,a,u),d(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(H(Ve)),u&0&&{sourceLayer:Ve},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?le(f,[u&0&&oe(H(`${Ve}-outline`)),u&0&&{sourceLayer:Ve},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&h(n),k(e,a),k(t,a)}}}function Bi(o){let e,n,t,l,r;function s(i){o[3](i)}let f={name:Ve,title:Ei,$$slots:{help:[Fi],icon:[Di]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Ve}.pmtiles`,$$slots:{default:[Hi]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let Ve="parliamentary_constituencies",Ei="Parliamentary constituencies";function Ui(o){let e=o.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Wi(o,e,n){let t,l=x.parliamentary_constituencies,r=ue(Ve);Y(o,r,f=>n(0,t=f));function s(f){t=f,r.set(t)}return[t,l,r,s]}class Yi extends K{constructor(e){super(),X(this,e,Wi,Bi,V,{})}}function Ji(o){let e;return{c(){e=T(`DEFRA
      `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function Vi(o){let e,n,t,l,r,s,f,i,a,u;return l=new re({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Ji]},$$scope:{ctx:o}}}),a=new Pe({}),{c(){e=S("span"),n=S("p"),t=T("Most layers show air quality data from "),b(l.$$.fragment),r=T(`. The measurements are annual means, in units of µgm
      `),s=S("sup"),s.textContent="3",f=T(`
      . Note the particulate matter layers are not corrected for natural sources.`),i=C(),b(a.$$.fragment),F(e,"slot","help")},m(c,$){d(c,e,$),p(e,n),p(n,t),v(l,n,null),p(n,r),p(n,s),p(n,f),p(e,i),v(a,e,null),u=!0},p(c,$){const _={};$&4096&&(_.$$scope={dirty:$,ctx:c}),l.$set(_)},i(c){u||(m(l.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(l.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),k(l),k(a)}}}function Qi(o){let e,n,t,l,r,s=o[3](o[0].pollutant)+"",f,i,a,u,c,$,_,w,L,y,M,I,P;function N(j){o[5](j)}let O={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return o[0].pollutant!==void 0&&(O.value=o[0].pollutant),n=new st({props:O}),E.push(()=>U(n,"value",N)),{c(){e=S("div"),b(n.$$.fragment),l=C(),r=S("p"),f=T(s),i=C(),a=S("div"),u=S("label"),c=T(`Opacity
        `),$=S("input"),_=C(),w=S("img"),F($,"type","range"),F($,"min","0"),F($,"max","100"),Qt(w.src,L=o[4](o[0].pollutant))||F(w,"src",L),F(w,"width",150),F(w,"alt",y=`Legend for ${o[0].pollutant} layer`),F(e,"slot","controls"),ne(e,"border","1px solid black"),ne(e,"padding","8px")},m(j,A){d(j,e,A),v(n,e,null),p(e,l),p(e,r),p(r,f),p(e,i),p(e,a),p(a,u),p(u,c),p(u,$),et($,o[0].opacity),p(e,_),p(e,w),M=!0,I||(P=[mt($,"change",o[6]),mt($,"input",o[6])],I=!0)},p(j,A){const R={};!t&&A&1&&(t=!0,R.value=j[0].pollutant,W(()=>t=!1)),n.$set(R),(!M||A&1)&&s!==(s=j[3](j[0].pollutant)+"")&&q(f,s),A&1&&et($,j[0].opacity),(!M||A&1&&!Qt(w.src,L=j[4](j[0].pollutant)))&&F(w,"src",L),(!M||A&1&&y!==(y=`Legend for ${j[0].pollutant} layer`))&&F(w,"alt",y)},i(j){M||(m(n.$$.fragment,j),M=!0)},o(j){g(n.$$.fragment,j),M=!1},d(j){j&&h(e),k(n),I=!1,Ir(P)}}}function Zi(o){let e,n;const t=[H(fn),{paint:{"raster-opacity":o[0].opacity/100}},{layout:{visibility:o[0].show?"visible":"none"}}];let l={};for(let r=0;r<t.length;r+=1)l=te(l,t[r]);return e=new uo({props:l}),{c(){b(e.$$.fragment)},m(r,s){v(e,r,s),n=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(H(fn)),s&1&&{paint:{"raster-opacity":r[0].opacity/100}},s&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function Ki(o){let e,n,t,l,r;function s(i){o[7](i)}let f={name:fn,title:Xi,$$slots:{controls:[Qi],help:[Vi]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new Go({props:{tiles:[o[1]],tileSize:256,$$slots:{default:[Zi]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&4097&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0].show,W(()=>n=!1)),e.$set(u);const c={};a&2&&(c.tiles=[i[1]]),a&4097&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let fn="pollution",Xi="Pollution";function xi(o){return o.show?`${o.pollutant}/${o.opacity}`:null}function ea(o){let[e,n]=o.split("/");return{show:!0,pollutant:e,opacity:parseInt(n)}}function ta(o,e,n){let t,l,r,f=Ut(fn,{show:!1,pollutant:"PM25_viridis",opacity:50},xi,ea);Y(o,f,L=>n(0,r=L));function i(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${r.pollutant}/MapServer/WMSServer`}function a(L){return t[1]}function u(L){let y=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${i()}?bbox={bbox-epsg-3857}&${y}`}function c(L){let y=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${i()}?${y}`}function $(L){o.$$.not_equal(r.pollutant,L)&&(r.pollutant=L,f.set(r))}function _(){r.opacity=Zt(this.value),f.set(r)}function w(L){o.$$.not_equal(r.show,L)&&(r.show=L,f.set(r))}return o.$$.update=()=>{o.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[r.pollutant]),o.$$.dirty&1&&n(1,l=u(r.pollutant))},[r,l,f,a,c,$,_,w]}class na extends K{constructor(e){super(),X(this,e,ta,Ki,V,{})}}function la(o){let e;return{c(){e=T(`DEFRA
      `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function ra(o){let e,n,t,l,r,s,f,i,a,u;return s=new re({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[la]},$$scope:{ctx:o}}}),a=new Pe({}),{c(){e=S("span"),n=S("p"),n.textContent=`This is the LAeq,16h dataset showing annual average noise levels in units
      of decibels for the 16-hour period between 7am and 11pm. Only roads in
      areas with at least 100,000 people are included.`,t=C(),l=S("p"),r=T("Data from June 2019, produced by "),b(s.$$.fragment),f=T(". See there for methodology details"),i=C(),b(a.$$.fragment),F(e,"slot","help")},m(c,$){d(c,e,$),p(e,n),p(e,t),p(e,l),p(l,r),v(s,l,null),p(l,f),p(e,i),v(a,e,null),u=!0},p(c,$){const _={};$&32&&(_.$$scope={dirty:$,ctx:c}),s.$set(_)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(s.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),k(s),k(a)}}}function oa(o){let e,n,t;return n=new Ee({props:{colorScale:o[1],limits:["55","65","75",">"]}}),{c(){e=S("span"),b(n.$$.fragment),F(e,"slot","controls")},m(l,r){d(l,e,r),v(n,e,null),t=!0},p:Q,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&h(e),k(n)}}}function sa(o){let e,n=o[4].noiseclass+"",t,l,r=pl(o[4].noiseclass)+"",s,f;return{c(){e=S("p"),t=T(n),l=T(" dB ("),s=T(r),f=T(")")},m(i,a){d(i,e,a),p(e,t),p(e,l),p(e,s),p(e,f)},p(i,a){a&16&&n!==(n=i[4].noiseclass+"")&&q(t,n),a&16&&r!==(r=pl(i[4].noiseclass)+"")&&q(s,r)},d(i){i&&h(e)}}}function ia(o){let e,n;return e=new ae({props:{$$slots:{default:[sa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&48&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function aa(o){let e,n;const t=[H(kt),{sourceLayer:kt},{paint:{"fill-color":nt(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":ee(.5,.8)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[ia]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=te(l,t[r]);return e=new qe({props:l}),{c(){b(e.$$.fragment)},m(r,s){v(e,r,s),n=!0},p(r,s){const f=s&3?le(t,[s&0&&oe(H(kt)),s&0&&{sourceLayer:kt},s&2&&{paint:{"fill-color":nt(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":ee(.5,.8)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function fa(o){let e,n,t,l,r;function s(i){o[3](i)}let f={name:kt,title:ua,$$slots:{controls:[oa],help:[ra]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${kt}.pmtiles`,$$slots:{default:[aa]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let kt="road_noise",ua="Road noise";function pl(o){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[o]}function ca(o,e,n){let t,l=[x.sequential_low_to_high[0],x.sequential_low_to_high[2],x.sequential_low_to_high[4]],r=ue(kt);Y(o,r,f=>n(0,t=f));function s(f){t=f,r.set(t)}return[t,l,r,s]}class pa extends K{constructor(e){super(),X(this,e,ca,fa,V,{})}}function $a(o){let e,n,t;return n=new Te({props:{color:o[1]}}),{c(){e=S("span"),b(n.$$.fragment),F(e,"slot","icon")},m(l,r){d(l,e,r),v(n,e,null),t=!0},p:Q,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&h(e),k(n)}}}function ma(o){let e;return{c(){e=T(`ONS Geography
      `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function _a(o){let e,n,t,l,r,s,f,i;return l=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[ma]},$$scope:{ctx:o}}}),f=new Pe({}),{c(){e=S("span"),n=S("p"),t=T("Data from "),b(l.$$.fragment),r=T(", as of May 2023."),s=C(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,n),p(n,t),v(l,n,null),p(n,r),p(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),l.$set(c)},i(a){i||(m(l.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(l.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(l),k(f)}}}function ga(o){let e,n=o[4].name+"",t;return{c(){e=S("p"),t=T(n)},m(l,r){d(l,e,r),p(e,t)},p(l,r){r&16&&n!==(n=l[4].name+"")&&q(t,n)},d(l){l&&h(e)}}}function da(o){let e,n;return e=new ae({props:{$$slots:{default:[ga,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&48&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function ha(o){let e,n,t,l;const r=[H(Qe),{sourceLayer:Qe},{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[da]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new qe({props:s}),e.$on("click",va);const f=[H(`${Qe}-outline`),{sourceLayer:Qe},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new he({props:i}),{c(){b(e.$$.fragment),n=C(),b(t.$$.fragment)},m(a,u){v(e,a,u),d(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(H(Qe)),u&0&&{sourceLayer:Qe},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?le(f,[u&0&&oe(H(`${Qe}-outline`)),u&0&&{sourceLayer:Qe},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&h(n),k(e,a),k(t,a)}}}function wa(o){let e,n,t,l,r;function s(i){o[3](i)}let f={name:Qe,title:ba,$$slots:{help:[_a],icon:[$a]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Qe}.pmtiles`,$$slots:{default:[ha]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let Qe="wards",ba="Wards";function va(o){let e=encodeURIComponent(o.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function ka(o,e,n){let t,l=x.wards,r=ue(Qe);Y(o,r,f=>n(0,t=f));function s(f){t=f,r.set(t)}return[t,l,r,s]}class ya extends K{constructor(e){super(),X(this,e,ka,wa,V,{})}}function Sa(o){let e;return{c(){e=T("Open Data Commons Open Database License")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function Ta(o){let e,n,t,l;return t=new re({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Sa]},$$scope:{ctx:o}}}),{c(){e=S("p"),n=T("License: "),b(t.$$.fragment)},m(r,s){d(r,e,s),p(e,n),v(t,e,null),l=!0},p(r,[s]){const f={};s&1&&(f.$$scope={dirty:s,ctx:r}),t.$set(f)},i(r){l||(m(t.$$.fragment,r),l=!0)},o(r){g(t.$$.fragment,r),l=!1},d(r){r&&h(e),k(t)}}}class lt extends K{constructor(e){super(),X(this,e,null,Ta,V,{})}}function La(o){let e,n,t;return n=new Te({props:{color:x.bus_route_with_lane}}),{c(){e=S("span"),b(n.$$.fragment),F(e,"slot","icon")},m(l,r){d(l,e,r),v(n,e,null),t=!0},p:Q,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&h(e),k(n)}}}function Ca(o){let e;return{c(){e=T(`GTFS
      `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function Ia(o){let e,n,t,l,r,s,f,i,a,u;return s=new re({props:{href:"https://gtfs.org",$$slots:{default:[Ca]},$$scope:{ctx:o}}}),a=new lt({}),{c(){e=S("span"),n=S("p"),n.textContent=`This shows all roads with at least one bus route crossing them. It also
      shows whether the road has a bus lane or not.`,t=C(),l=S("p"),r=T("Note this data is from OpenStreetMap (as of 20 October 2024), not "),b(s.$$.fragment),f=T(`, and doesn't include which routes are run or the frequency
      of service.`),i=C(),b(a.$$.fragment),F(e,"slot","help")},m(c,$){d(c,e,$),p(e,n),p(e,t),p(e,l),p(l,r),v(s,l,null),p(l,f),p(e,i),v(a,e,null),u=!0},p(c,$){const _={};$&16&&(_.$$scope={dirty:$,ctx:c}),s.$set(_)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(s.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),k(s),k(a)}}}function Ma(o){let e;return{c(){e=S("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function ja(o){let e;return{c(){e=S("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function Oa(o){let e;function n(r,s){return r[3].has_bus_lane?ja:Ma}let t=n(o),l=t(o);return{c(){l.c(),e=be()},m(r,s){l.m(r,s),d(r,e,s)},p(r,s){t!==(t=n(r))&&(l.d(1),l=t(r),l&&(l.c(),l.m(e.parentNode,e)))},d(r){r&&h(e),l.d(r)}}}function Na(o){let e,n;return e=new ae({props:{$$slots:{default:[Oa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&24&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Pa(o){let e,n;const t=[H(yt),{sourceLayer:yt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],x.bus_route_with_lane,x.bus_route_without_lane],"line-width":5,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Na]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=te(l,t[r]);return e=new he({props:l}),{c(){b(e.$$.fragment)},m(r,s){v(e,r,s),n=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(H(yt)),s&0&&{sourceLayer:yt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function Aa(o){let e,n,t,l,r;function s(i){o[2](i)}let f={name:yt,title:Ra,$$slots:{help:[Ia],icon:[La]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${yt}.pmtiles`,$$slots:{default:[Pa]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let yt="bus_routes",Ra="Bus routes";function Da(o,e,n){let t,l=ue(yt);Y(o,l,s=>n(0,t=s));function r(s){t=s,l.set(t)}return[t,l,r]}class Ga extends K{constructor(e){super(),X(this,e,Da,Aa,V,{})}}function $l(o){const e=Va(o[9]);o[10]=e[0],o[11]=e[1],o[12]=e[2]}function ml(o,e,n){const t=o.slice();return t[10]=e[n][0],t[13]=e[n][1],t[14]=e[n][2],t[15]=e,t[16]=n,t}function Fa(o){let e,n,t,l,r,s,f,i,a;return i=new lt({}),{c(){e=S("span"),n=S("p"),n.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
      of 20 October 2024).`,t=C(),l=S("ul"),l.innerHTML=`<li><b>Separated tracks</b>
        include fully or partly segregated cycletracks alongside a carriageway, stepped
        cycletracks, and tracks off the carriageway entirely. They&#39;re also separated
        from foot traffic.</li> <li><b>Unprotected lanes</b>
        are mandatory or advisory lanes on the carriageway, without any physical
        protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
        paths are split between cycle and foot traffic, and are separated from motor
        traffic somehow. There can be segregation between cyclists and pedestrians
        or not.</li>`,r=C(),s=S("p"),s.textContent=`Note there are many known limitations with this layer. Data in
      OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
      processing is also imperfect. You can click a segment to see full
      OpenStreetMap data. Please do report issues with the classification or
      data.`,f=C(),b(i.$$.fragment),F(e,"slot","help")},m(u,c){d(u,e,c),p(e,n),p(e,t),p(e,l),p(e,r),p(e,s),p(e,f),v(i,e,null),a=!0},p:Q,i(u){a||(m(i.$$.fragment,u),a=!0)},o(u){g(i.$$.fragment,u),a=!1},d(u){u&&h(e),k(i)}}}function qa(o){let e,n,t=o[13]+"",l,r,s;return e=new Te({props:{color:o[14]}}),{c(){b(e.$$.fragment),n=C(),l=T(t),r=C()},m(f,i){v(e,f,i),d(f,n,i),d(f,l,i),d(f,r,i),s=!0},p:Q,i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),s=!1},d(f){f&&(h(n),h(l),h(r)),k(e,f)}}}function _l(o){let e,n,t;function l(s){o[4](s,o[10])}let r={$$slots:{default:[qa]},$$scope:{ctx:o}};return o[0][o[10]]!==void 0&&(r.checked=o[0][o[10]]),e=new Ke({props:r}),E.push(()=>U(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){o=s;const i={};f&131072&&(i.$$scope={dirty:f,ctx:o}),!n&&f&5&&(n=!0,i.checked=o[0][o[10]],W(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function za(o){let e,n,t=$e(o[2]),l=[];for(let s=0;s<t.length;s+=1)l[s]=_l(ml(o,t,s));const r=s=>g(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=be()},m(s,f){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,f);d(s,e,f),n=!0},p(s,f){if(f&5){t=$e(s[2]);let i;for(i=0;i<t.length;i+=1){const a=ml(s,t,i);l[i]?(l[i].p(a,f),m(l[i],1)):(l[i]=_l(a),l[i].c(),m(l[i],1),l[i].m(e.parentNode,e))}for(_e(),i=t.length;i<l.length;i+=1)r(i);ge()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)m(l[f]);n=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)g(l[f]);n=!1},d(s){s&&h(e),He(l,s)}}}function Ha(o){let e,n,t;return n=new Ge({props:{small:!0,$$slots:{default:[za]},$$scope:{ctx:o}}}),{c(){e=S("div"),b(n.$$.fragment),F(e,"slot","controls"),ne(e,"border","1px solid black"),ne(e,"padding","8px")},m(l,r){d(l,e,r),v(n,e,null),t=!0},p(l,r){const s={};r&131073&&(s.$$scope={dirty:r,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&h(e),k(n)}}}function Ba(o){$l(o);let e,n=o[10]+"",t,l,r,s,f,i=o[11]+"",a,u,c,$,_=o[12]+"",w;return{c(){e=S("h2"),t=T(n),l=C(),r=S("p"),s=T("Direction: "),f=S("b"),a=C(),u=S("p"),c=T("Width: "),$=S("b"),w=T(_)},m(L,y){d(L,e,y),p(e,t),d(L,l,y),d(L,r,y),p(r,s),p(r,f),f.innerHTML=i,d(L,a,y),d(L,u,y),p(u,c),p(u,$),p($,w)},p(L,y){$l(L),y&512&&n!==(n=L[10]+"")&&q(t,n),y&512&&i!==(i=L[11]+"")&&(f.innerHTML=i),y&512&&_!==(_=L[12]+"")&&q(w,_)},d(L){L&&(h(e),h(l),h(r),h(a),h(u))}}}function Ea(o){let e,n;return e=new ae({props:{$$slots:{default:[Ba,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&131584&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Ua(o){let e,n;const t=[H(St),{sourceLayer:St},{paint:{"line-color":nt(["get","kind"],{track:x.cycle_paths.track,lane:x.cycle_paths.lane,shared_use_segregated:x.cycle_paths.shared_use_segregated,shared_use_unsegregated:x.cycle_paths.shared_use_unsegregated},"red"),"line-width":Fe,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[Ea]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=te(l,t[r]);return e=new he({props:l}),e.$on("click",Qa),{c(){b(e.$$.fragment)},m(r,s){v(e,r,s),n=!0},p(r,s){const f=s&9?le(t,[s&0&&oe(H(St)),s&0&&{sourceLayer:St},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&9&&{filter:r[3](r[0])},t[5],t[6],t[7]]):{};s&131072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function Wa(o){let e,n,t,l,r;function s(i){o[5](i)}let f={name:St,title:Ya,$$slots:{controls:[Ha],help:[Fa]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${St}.pmtiles`,$$slots:{default:[Ua]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&131073&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0].show,W(()=>n=!1)),e.$set(u);const c={};a&131073&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let St="cycle_paths",Ya="Cycle paths";function Ja(o){return{show:!0,track:o.includes("track"),lane:o.includes("lane"),shared_use_segregated:o.includes("shared_use_segregated"),shared_use_unsegregated:o.includes("shared_use_unsegregated")}}function Va(o){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[o.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[o.direction],t=o.width=="unknown"?"unknown":`${o.width} meters`;return[e,`${n} ${o.direction}`,t]}function Qa(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function Za(o,e,n){let t,l=["track","lane","shared_use_segregated","shared_use_unsegregated"],r={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s($){return $.show?l.filter(_=>$[_]).join(","):null}let f=Ut(St,r,s,Ja);Y(o,f,$=>n(0,t=$));let i=[["track","Separated tracks",x.cycle_paths.track],["lane","Unprotected lanes",x.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",x.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",x.cycle_paths.shared_use_unsegregated]];function a($){let _=l.filter(w=>$[w]);return["in",["get","kind"],["literal",_]]}function u($,_){o.$$.not_equal(t[_],$)&&(t[_]=$,f.set(t))}function c($){o.$$.not_equal(t.show,$)&&(t.show=$,f.set(t))}return[t,f,i,a,u,c]}class Ka extends K{constructor(e){super(),X(this,e,Za,Wa,V,{})}}function Xa(o){let e,n,t;return n=new Te({props:{color:o[1]}}),{c(){e=S("span"),b(n.$$.fragment),F(e,"slot","icon")},m(l,r){d(l,e,r),v(n,e,null),t=!0},p:Q,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&h(e),k(n)}}}function xa(o){let e;return{c(){e=T(`Major Road Network
      `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function ef(o){let e,n,t,l,r,s,f,i;return l=new re({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[xa]},$$scope:{ctx:o}}}),f=new Pe({}),{c(){e=S("span"),n=S("p"),t=T("Data from the "),b(l.$$.fragment),r=T(", as of September 2021."),s=C(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,n),p(n,t),v(l,n,null),p(n,r),p(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),l.$set(c)},i(a){i||(m(l.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(l.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(l),k(f)}}}function tf(o){let e,n=(o[4].name??"Unknown MRN road")+"",t;return{c(){e=S("p"),t=T(n)},m(l,r){d(l,e,r),p(e,t)},p(l,r){r&16&&n!==(n=(l[4].name??"Unknown MRN road")+"")&&q(t,n)},d(l){l&&h(e)}}}function nf(o){let e,n;return e=new ae({props:{$$slots:{default:[tf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&48&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function lf(o){let e,n;const t=[H(Tt),{sourceLayer:Tt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let l={$$slots:{default:[nf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=te(l,t[r]);return e=new he({props:l}),{c(){b(e.$$.fragment)},m(r,s){v(e,r,s),n=!0},p(r,s){const f=s&3?le(t,[s&0&&oe(H(Tt)),s&0&&{sourceLayer:Tt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function rf(o){let e,n,t,l,r;function s(i){o[3](i)}let f={name:Tt,title:of,$$slots:{help:[ef],icon:[Xa]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Tt}.pmtiles`,$$slots:{default:[lf]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let Tt="mrn",of="Major Road Network";function sf(o,e,n){let t,l=x.mrn,r=ue(Tt);Y(o,r,f=>n(0,t=f));function s(f){t=f,r.set(t)}return[t,l,r,s]}class af extends K{constructor(e){super(),X(this,e,sf,rf,V,{})}}function ff(o){let e,n,t;return n=new Te({props:{color:o[1]}}),{c(){e=S("span"),b(n.$$.fragment),F(e,"slot","icon")},m(l,r){d(l,e,r),v(n,e,null),t=!0},p:Q,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&h(e),k(n)}}}function uf(o){let e;return{c(){e=T(`OS Open Roads
      `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function cf(o){let e,n,t,l,r,s,f,i;return l=new re({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[uf]},$$scope:{ctx:o}}}),f=new Pe({}),{c(){e=S("span"),n=S("p"),t=T("Data from "),b(l.$$.fragment),r=T(`, as of December 2023. The SRN is equivalent to trunk
      roads.`),s=C(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,n),p(n,t),v(l,n,null),p(n,r),p(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),l.$set(c)},i(a){i||(m(l.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(l.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(l),k(f)}}}function pf(o){let e,n=(o[4].name??"Unknown SRN road")+"",t;return{c(){e=S("p"),t=T(n)},m(l,r){d(l,e,r),p(e,t)},p(l,r){r&16&&n!==(n=(l[4].name??"Unknown SRN road")+"")&&q(t,n)},d(l){l&&h(e)}}}function $f(o){let e,n;return e=new ae({props:{$$slots:{default:[pf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&48&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function mf(o){let e,n;const t=[H(Lt),{sourceLayer:Lt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let l={$$slots:{default:[$f]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=te(l,t[r]);return e=new he({props:l}),{c(){b(e.$$.fragment)},m(r,s){v(e,r,s),n=!0},p(r,s){const f=s&3?le(t,[s&0&&oe(H(Lt)),s&0&&{sourceLayer:Lt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function _f(o){let e,n,t,l,r;function s(i){o[3](i)}let f={name:Lt,title:gf,$$slots:{help:[cf],icon:[ff]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Lt}.pmtiles`,$$slots:{default:[mf]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let Lt="srn",gf="Strategic Road Network";function df(o,e,n){let t,l=x.srn,r=ue(Lt);Y(o,r,f=>n(0,t=f));function s(f){t=f,r.set(t)}return[t,l,r,s]}class hf extends K{constructor(e){super(),X(this,e,df,_f,V,{})}}function wf(o){let e,n,t;return n=new Te({props:{color:o[1]}}),{c(){e=S("span"),b(n.$$.fragment),F(e,"slot","icon")},m(l,r){d(l,e,r),v(n,e,null),t=!0},p:Q,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&h(e),k(n)}}}function bf(o){let e;return{c(){e=T(`National Cycle Network
      `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function vf(o){let e,n,t,l,r,s,f,i;return l=new re({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[bf]},$$scope:{ctx:o}}}),f=new Pe({}),{c(){e=S("span"),n=S("p"),t=T("Data from Sustrans about the "),b(l.$$.fragment),r=T(", downloaded on 22/01/2024."),s=C(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,n),p(n,t),v(l,n,null),p(n,r),p(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),l.$set(c)},i(a){i||(m(l.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(l.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(l),k(f)}}}function gl(o){let e,n,t,l=o[4].Desc_+"",r;return{c(){e=S("li"),n=T("Description: "),t=S("b"),r=T(l)},m(s,f){d(s,e,f),p(e,n),p(e,t),p(t,r)},p(s,f){f&16&&l!==(l=s[4].Desc_+"")&&q(r,l)},d(s){s&&h(e)}}}function dl(o){let e,n,t,l=o[4].Greenway+"",r;return{c(){e=S("li"),n=T("Is greenway: "),t=S("b"),r=T(l)},m(s,f){d(s,e,f),p(e,n),p(e,t),p(t,r)},p(s,f){f&16&&l!==(l=s[4].Greenway+"")&&q(r,l)},d(s){s&&h(e)}}}function hl(o){let e,n,t,l=o[4].RouteType+"",r;return{c(){e=S("li"),n=T("Route type: "),t=S("b"),r=T(l)},m(s,f){d(s,e,f),p(e,n),p(e,t),p(t,r)},p(s,f){f&16&&l!==(l=s[4].RouteType+"")&&q(r,l)},d(s){s&&h(e)}}}function wl(o){let e,n,t,l=o[4].RouteNo+"",r;return{c(){e=S("li"),n=T("Route number: "),t=S("b"),r=T(l)},m(s,f){d(s,e,f),p(e,n),p(e,t),p(t,r)},p(s,f){f&16&&l!==(l=s[4].RouteNo+"")&&q(r,l)},d(s){s&&h(e)}}}function bl(o){let e,n,t,l=o[4].RouteCat+"",r;return{c(){e=S("li"),n=T("Route Category: "),t=S("b"),r=T(l)},m(s,f){d(s,e,f),p(e,n),p(e,t),p(t,r)},p(s,f){f&16&&l!==(l=s[4].RouteCat+"")&&q(r,l)},d(s){s&&h(e)}}}function vl(o){let e,n,t,l=o[4].OpenStatus+"",r;return{c(){e=S("li"),n=T("Open Status: "),t=S("b"),r=T(l)},m(s,f){d(s,e,f),p(e,n),p(e,t),p(t,r)},p(s,f){f&16&&l!==(l=s[4].OpenStatus+"")&&q(r,l)},d(s){s&&h(e)}}}function kl(o){let e,n,t,l=o[4].Surface+"",r;return{c(){e=S("li"),n=T("Surface: "),t=S("b"),r=T(l)},m(s,f){d(s,e,f),p(e,n),p(e,t),p(t,r)},p(s,f){f&16&&l!==(l=s[4].Surface+"")&&q(r,l)},d(s){s&&h(e)}}}function yl(o){let e,n,t,l=o[4].Quality+"",r;return{c(){e=S("li"),n=T("Quality: "),t=S("b"),r=T(l)},m(s,f){d(s,e,f),p(e,n),p(e,t),p(t,r)},p(s,f){f&16&&l!==(l=s[4].Quality+"")&&q(r,l)},d(s){s&&h(e)}}}function Sl(o){let e,n,t,l=o[4].RoadClass+"",r;return{c(){e=S("li"),n=T("Road Class: "),t=S("b"),r=T(l)},m(s,f){d(s,e,f),p(e,n),p(e,t),p(t,r)},p(s,f){f&16&&l!==(l=s[4].RoadClass+"")&&q(r,l)},d(s){s&&h(e)}}}function kf(o){let e,n,t,l,r,s,f,i,a,u=o[4].Desc_&&gl(o),c=o[4].Greenway&&dl(o),$=o[4].RouteType&&hl(o),_=o[4].RouteNo&&wl(o),w=o[4].RouteCat&&bl(o),L=o[4].OpenStatus&&vl(o),y=o[4].Surface&&kl(o),M=o[4].Quality&&yl(o),I=o[4].RoadClass&&Sl(o);return{c(){e=S("ul"),u&&u.c(),n=C(),c&&c.c(),t=C(),$&&$.c(),l=C(),_&&_.c(),r=C(),w&&w.c(),s=C(),L&&L.c(),f=C(),y&&y.c(),i=C(),M&&M.c(),a=C(),I&&I.c()},m(P,N){d(P,e,N),u&&u.m(e,null),p(e,n),c&&c.m(e,null),p(e,t),$&&$.m(e,null),p(e,l),_&&_.m(e,null),p(e,r),w&&w.m(e,null),p(e,s),L&&L.m(e,null),p(e,f),y&&y.m(e,null),p(e,i),M&&M.m(e,null),p(e,a),I&&I.m(e,null)},p(P,N){P[4].Desc_?u?u.p(P,N):(u=gl(P),u.c(),u.m(e,n)):u&&(u.d(1),u=null),P[4].Greenway?c?c.p(P,N):(c=dl(P),c.c(),c.m(e,t)):c&&(c.d(1),c=null),P[4].RouteType?$?$.p(P,N):($=hl(P),$.c(),$.m(e,l)):$&&($.d(1),$=null),P[4].RouteNo?_?_.p(P,N):(_=wl(P),_.c(),_.m(e,r)):_&&(_.d(1),_=null),P[4].RouteCat?w?w.p(P,N):(w=bl(P),w.c(),w.m(e,s)):w&&(w.d(1),w=null),P[4].OpenStatus?L?L.p(P,N):(L=vl(P),L.c(),L.m(e,f)):L&&(L.d(1),L=null),P[4].Surface?y?y.p(P,N):(y=kl(P),y.c(),y.m(e,i)):y&&(y.d(1),y=null),P[4].Quality?M?M.p(P,N):(M=yl(P),M.c(),M.m(e,a)):M&&(M.d(1),M=null),P[4].RoadClass?I?I.p(P,N):(I=Sl(P),I.c(),I.m(e,null)):I&&(I.d(1),I=null)},d(P){P&&h(e),u&&u.d(),c&&c.d(),$&&$.d(),_&&_.d(),w&&w.d(),L&&L.d(),y&&y.d(),M&&M.d(),I&&I.d()}}}function yf(o){let e,n;return e=new ae({props:{$$slots:{default:[kf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&48&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Sf(o){let e,n;const t=[H(Ct),{sourceLayer:Ct},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":4,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let l={$$slots:{default:[yf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=te(l,t[r]);return e=new he({props:l}),{c(){b(e.$$.fragment)},m(r,s){v(e,r,s),n=!0},p(r,s){const f=s&3?le(t,[s&0&&oe(H(Ct)),s&0&&{sourceLayer:Ct},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":4,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function Tf(o){let e,n,t,l,r;function s(i){o[3](i)}let f={name:Ct,title:Lf,$$slots:{help:[vf],icon:[wf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Ct}.pmtiles`,$$slots:{default:[Sf]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let Ct="national_cycle_network",Lf="National Cycle Network";function Cf(o,e,n){let t,l=x.national_cycle_network,r=ue(Ct);Y(o,r,f=>n(0,t=f));function s(f){t=f,r.set(t)}return[t,l,r,s]}class If extends K{constructor(e){super(),X(this,e,Cf,Tf,V,{})}}function Tl(o,e,n){const t=o.slice();return t[7]=e[n][0],t[8]=e[n][1],t[9]=e[n][2],t}function Mf(o){let e;return{c(){e=T(`Public Sector Geospatial Agreement
      `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function jf(o){let e,n,t,l,r,s,f,i,a,u,c,$;return u=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Mf]},$$scope:{ctx:o}}}),{c(){e=S("span"),n=S("p"),n.textContent=`This shows the average and minimum pavement width (in meters) from
      Ordnance Survey. Because the shape of pavement may vary along a road, both
      average and minimum are reported. Measurements may be available for the
      left side of the road, the right, or both. The coloring shows the larger
      of the two average widths, and the line thickness has no meaning. Hover
      over a line to see if there's pavement on one or both sides of the road.
      (You won't be able to distinguish left and right though; use the OS Road
      basemap instead.)`,t=C(),l=S("p"),l.textContent=`Note these measurements are difficult to interpret near dual carriageways
      (shown as parallel lines).`,r=C(),s=S("p"),s.textContent="Data valid as of 1 January, 2024",f=C(),i=S("p"),a=T(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),b(u.$$.fragment),c=T("."),F(e,"slot","help")},m(_,w){d(_,e,w),p(e,n),p(e,t),p(e,l),p(e,r),p(e,s),p(e,f),p(e,i),p(i,a),v(u,i,null),p(i,c),$=!0},p(_,w){const L={};w&4096&&(L.$$scope={dirty:w,ctx:_}),u.$set(L)},i(_){$||(m(u.$$.fragment,_),$=!0)},o(_){g(u.$$.fragment,_),$=!1},d(_){_&&h(e),k(u)}}}function Of(o){let e,n,t;return n=new Ee({props:{colorScale:o[1],limits:o[3]}}),{c(){e=S("span"),b(n.$$.fragment),F(e,"slot","controls")},m(l,r){d(l,e,r),v(n,e,null),t=!0},p:Q,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&h(e),k(n)}}}function Nf(o){let e,n,t=un(o[6].angle+o[9])+"",l;return{c(){e=S("p"),n=new zt(!1),l=T(` side of the road: no pavement
          `),n.a=l},m(r,s){d(r,e,s),n.m(t,e),p(e,l)},p(r,s){s&64&&t!==(t=un(r[6].angle+r[9])+"")&&n.p(t)},d(r){r&&h(e)}}}function Pf(o){let e,n,t=un(o[6].angle+o[9])+"",l,r,s=o[7]+"",f,i,a,u=o[8]+"",c,$;return{c(){e=S("p"),n=new zt(!1),l=T(` side of the road:
            `),r=S("b"),f=T(s),i=T(`
            m average,
            `),a=S("b"),c=T(u),$=T(`
            m minimum
          `),n.a=l},m(_,w){d(_,e,w),n.m(t,e),p(e,l),p(e,r),p(r,f),p(e,i),p(e,a),p(a,c),p(e,$)},p(_,w){w&64&&t!==(t=un(_[6].angle+_[9])+"")&&n.p(t),w&64&&s!==(s=_[7]+"")&&q(f,s),w&64&&u!==(u=_[8]+"")&&q(c,u)},d(_){_&&h(e)}}}function Ll(o){let e;function n(r,s){return r[7]?Pf:Nf}let t=n(o),l=t(o);return{c(){l.c(),e=be()},m(r,s){l.m(r,s),d(r,e,s)},p(r,s){t===(t=n(r))&&l?l.p(r,s):(l.d(1),l=t(r),l&&(l.c(),l.m(e.parentNode,e)))},d(r){r&&h(e),l.d(r)}}}function Af(o){let e,n=$e([[o[6].left_average,o[6].left_minimum,-90],[o[6].right_average,o[6].right_minimum,90]]),t=[];for(let l=0;l<2;l+=1)t[l]=Ll(Tl(o,n,l));return{c(){for(let l=0;l<2;l+=1)t[l].c();e=be()},m(l,r){for(let s=0;s<2;s+=1)t[s]&&t[s].m(l,r);d(l,e,r)},p(l,r){if(r&64){n=$e([[l[6].left_average,l[6].left_minimum,-90],[l[6].right_average,l[6].right_minimum,90]]);let s;for(s=0;s<2;s+=1){const f=Tl(l,n,s);t[s]?t[s].p(f,r):(t[s]=Ll(f),t[s].c(),t[s].m(e.parentNode,e))}for(;s<2;s+=1)t[s].d(1)}},d(l){l&&h(e),He(t,l)}}}function Rf(o){let e,n;return e=new ae({props:{openOn:"hover",$$slots:{default:[Af,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&4160&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Df(o){let e,n;const t=[H(It),{sourceLayer:It},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":de(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],o[2],o[1]),"line-width":Fe,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let l={$$slots:{default:[Rf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=te(l,t[r]);return e=new he({props:l}),{c(){b(e.$$.fragment)},m(r,s){v(e,r,s),n=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(H(It)),s&0&&{sourceLayer:It},t[2],t[3],s&6&&{paint:{"line-color":de(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":Fe,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&4096&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function Gf(o){let e,n,t,l,r;function s(i){o[5](i)}let f={name:It,title:Ff,$$slots:{controls:[Of],help:[jf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${Xt()}/v1/${It}.pmtiles`,$$slots:{default:[Df]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&4096&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&4097&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let It="pavement_widths",Ff="OS Pavement widths";function qf(o){let e=Math.floor((o+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function un(o){return`${qf(o)} <span style="display: inline-block; rotate: ${o}deg">⬆</span>`}function zf(o,e,n){let t,l=["black","red","orange","green"],r=[0,1.5,2,3,100],s=["0-1.5m","1.5-2m","2-3m",">3m"],f=ue(It);Y(o,f,a=>n(0,t=a));function i(a){t=a,f.set(t)}return[t,l,r,s,f,i]}class Hf extends K{constructor(e){super(),X(this,e,zf,Gf,V,{})}}function Bf(o){let e;return{c(){e=T("the PCT website")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function Ef(o){let e;return{c(){e=T("2017 journal article")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function Uf(o){let e,n,t,l,r,s,f,i,a,u,c,$;return i=new re({props:{href:"https://www.pct.bike",$$slots:{default:[Bf]},$$scope:{ctx:o}}}),u=new re({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Ef]},$$scope:{ctx:o}}}),{c(){e=S("span"),n=S("p"),n.textContent=`The PCT shows major links on the transport network on which there is high
      latent demand for cycling under scenarios of change, based on the
      "fastest" routes from CycleStreets. Counts approximate daily rush hour
      traffic levels.`,t=C(),l=S("p"),l.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
      Please use this layer with caution.`,r=C(),s=S("p"),f=T("See "),b(i.$$.fragment),a=T(" and "),b(u.$$.fragment),c=T(" for details on methodology and data sources."),F(e,"slot","help")},m(_,w){d(_,e,w),p(e,n),p(e,t),p(e,l),p(e,r),p(e,s),p(s,f),v(i,s,null),p(s,a),v(u,s,null),p(s,c),$=!0},p(_,w){const L={};w&1024&&(L.$$scope={dirty:w,ctx:_}),i.$set(L);const y={};w&1024&&(y.$$scope={dirty:w,ctx:_}),u.$set(y)},i(_){$||(m(i.$$.fragment,_),m(u.$$.fragment,_),$=!0)},o(_){g(i.$$.fragment,_),g(u.$$.fragment,_),$=!1},d(_){_&&h(e),k(i),k(u)}}}function Wf(o){let e,n,t,l,r,s,f,i,a;n=new Ee({props:{colorScale:o[1],limits:o[2]}});function u(w){o[5](w)}let c={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};o[0].tripPurpose!==void 0&&(c.value=o[0].tripPurpose),l=new In({props:c}),E.push(()=>U(l,"value",u));function $(w){o[6](w)}let _={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return o[0].scenario!==void 0&&(_.value=o[0].scenario),f=new st({props:_}),E.push(()=>U(f,"value",$)),{c(){e=S("div"),b(n.$$.fragment),t=C(),b(l.$$.fragment),s=C(),b(f.$$.fragment),F(e,"slot","controls"),ne(e,"border","1px solid black"),ne(e,"padding","8px")},m(w,L){d(w,e,L),v(n,e,null),p(e,t),v(l,e,null),p(e,s),v(f,e,null),a=!0},p(w,L){const y={};!r&&L&1&&(r=!0,y.value=w[0].tripPurpose,W(()=>r=!1)),l.$set(y);const M={};!i&&L&1&&(i=!0,M.value=w[0].scenario,W(()=>i=!1)),f.$set(M)},i(w){a||(m(n.$$.fragment,w),m(l.$$.fragment,w),m(f.$$.fragment,w),a=!0)},o(w){g(n.$$.fragment,w),g(l.$$.fragment,w),g(f.$$.fragment,w),a=!1},d(w){w&&h(e),k(n),k(l),k(f)}}}function Yf(o){let e,n=o[4](o[9])+"",t;return{c(){e=new zt(!1),t=be(),e.a=t},m(l,r){e.m(n,l,r),d(l,t,r)},p(l,r){r&512&&n!==(n=l[4](l[9])+"")&&e.p(n)},d(l){l&&(h(t),e.d())}}}function Jf(o){let e,n;return e=new ae({props:{$$slots:{default:[Yf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&1536&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Vf(o){let e,n;const t=[H(ot),{sourceLayer:ot},{paint:{"line-color":de(["get",o[0].scenario],o[2],o[1]),"line-width":Fe,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==ot?"visible":"none"}}];let l={$$slots:{default:[Jf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=te(l,t[r]);return e=new he({props:l}),{c(){b(e.$$.fragment)},m(r,s){v(e,r,s),n=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(H(ot)),s&0&&{sourceLayer:ot},s&7&&{paint:{"line-color":de(["get",r[0].scenario],r[2],r[1]),"line-width":Fe,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==ot?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function Qf(o){let e,n=o[4](o[9])+"",t;return{c(){e=new zt(!1),t=be(),e.a=t},m(l,r){e.m(n,l,r),d(l,t,r)},p(l,r){r&512&&n!==(n=l[4](l[9])+"")&&e.p(n)},d(l){l&&(h(t),e.d())}}}function Zf(o){let e,n;return e=new ae({props:{$$slots:{default:[Qf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&1536&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Kf(o){let e,n;const t=[H(wt),{sourceLayer:wt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":de(["get",o[0].scenario],o[2],o[1]),"line-width":Fe,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==wt?"visible":"none"}}];let l={$$slots:{default:[Zf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=te(l,t[r]);return e=new he({props:l}),{c(){b(e.$$.fragment)},m(r,s){v(e,r,s),n=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(H(wt)),s&0&&{sourceLayer:wt},t[2],t[3],s&7&&{paint:{"line-color":de(["get",r[0].scenario],r[2],r[1]),"line-width":Fe,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==wt?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function Xf(o){let e,n,t,l,r,s,f;function i(u){o[7](u)}let a={name:Gr,title:xf,$$slots:{controls:[Wf],help:[Uf]},$$scope:{ctx:o}};return o[0].show!==void 0&&(a.show=o[0].show),e=new fe({props:a}),E.push(()=>U(e,"show",i)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${ot}.pmtiles`,$$slots:{default:[Vf]},$$scope:{ctx:o}}}),s=new pe({props:{url:`pmtiles://${ce()}/v1/${wt}.pmtiles`,$$slots:{default:[Kf]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment),r=C(),b(s.$$.fragment)},m(u,c){v(e,u,c),d(u,t,c),v(l,u,c),d(u,r,c),v(s,u,c),f=!0},p(u,[c]){const $={};c&1025&&($.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,$.show=u[0].show,W(()=>n=!1)),e.$set($);const _={};c&1025&&(_.$$scope={dirty:c,ctx:u}),l.$set(_);const w={};c&1025&&(w.$$scope={dirty:c,ctx:u}),s.$set(w)},i(u){f||(m(e.$$.fragment,u),m(l.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){g(e.$$.fragment,u),g(l.$$.fragment,u),g(s.$$.fragment,u),f=!1},d(u){u&&(h(t),h(r)),k(e,u),k(l,u),k(s,u)}}}let Gr="pct",ot="pct_commute",wt="pct_school",xf="Propensity to Cycle Tool";function eu(o){return o.show?`${o.tripPurpose}/${o.scenario}`:null}function tu(o){let[e,n]=o.split("/");return{show:!0,tripPurpose:e,scenario:n}}function nu(o,e,n){let t,l=x.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],f=Ut(Gr,{show:!1,tripPurpose:ot,scenario:"baseline"},eu,tu);Y(o,f,$=>n(0,t=$));function i($){let _=$.baseline,w=$.gov_target,L=$.go_dutch,y=`<h2>Trip purpose: ${t.tripPurpose==ot?"commuting":"school"}</h2>`;if(y+=`<p>Baseline (2011): <b>${_.toLocaleString()}</b></p>`,_==0)y+=`<p>Government target (2025): <b>${w.toLocaleString()}</b></p>`,y+=`<p>Go Dutch: <b>${L.toLocaleString()}</b></p>`;else{let M=(w/_).toFixed(1),I=(L/_).toFixed(1);y+=`<p>Government target (2025): ${w.toLocaleString()} (<b>${M}x</b> of baseline)</p>`,y+=`<p>Go Dutch: ${L.toLocaleString()} (<b>${I}x</b> of baseline)</p>`}return y}function a($){o.$$.not_equal(t.tripPurpose,$)&&(t.tripPurpose=$,f.set(t))}function u($){o.$$.not_equal(t.scenario,$)&&(t.scenario=$,f.set(t))}function c($){o.$$.not_equal(t.show,$)&&(t.show=$,f.set(t))}return[t,l,r,f,i,a,u,c]}class lu extends K{constructor(e){super(),X(this,e,nu,Xf,V,{})}}function ru(o){let e;return{c(){e=T("Basemap")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function ou(o){let e;return{c(){e=T(`Public Sector Geospatial Agreement
      `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function su(o){let e,n,t,l,r,s,f,i,a,u,c,$,_;return l=new re({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[ru]},$$scope:{ctx:o}}}),c=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[ou]},$$scope:{ctx:o}}}),{c(){e=S("span"),n=S("p"),t=T("The average speed data is collected over a six-month period by "),b(l.$$.fragment),r=T(` from 135,000 vehicle telematic systems and provided through
      Ordnance Survey. The averages are grouped by different time periods for weekdays
      and weekends. This map shows the highest average.`),s=C(),f=S("p"),f.textContent="Data valid as of 1 September, 2023",i=C(),a=S("p"),u=T(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),b(c.$$.fragment),$=T("."),F(e,"slot","help")},m(w,L){d(w,e,L),p(e,n),p(n,t),v(l,n,null),p(n,r),p(e,s),p(e,f),p(e,i),p(e,a),p(a,u),v(c,a,null),p(a,$),_=!0},p(w,L){const y={};L&512&&(y.$$scope={dirty:L,ctx:w}),l.$set(y);const M={};L&512&&(M.$$scope={dirty:L,ctx:w}),c.$set(M)},i(w){_||(m(l.$$.fragment,w),m(c.$$.fragment,w),_=!0)},o(w){g(l.$$.fragment,w),g(c.$$.fragment,w),_=!1},d(w){w&&h(e),k(l),k(c)}}}function iu(o){let e,n,t,l,r,s;n=new Ee({props:{colorScale:o[1],limits:o[2]}});function f(a){o[5](a)}let i={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return o[0].kind!==void 0&&(i.value=o[0].kind),l=new In({props:i}),E.push(()=>U(l,"value",f)),{c(){e=S("div"),b(n.$$.fragment),t=C(),b(l.$$.fragment),F(e,"slot","controls"),ne(e,"border","1px solid black"),ne(e,"padding","8px")},m(a,u){d(a,e,u),v(n,e,null),p(e,t),v(l,e,null),s=!0},p(a,u){const c={};!r&&u&1&&(r=!0,c.value=a[0].kind,W(()=>r=!1)),l.$set(c)},i(a){s||(m(n.$$.fragment,a),m(l.$$.fragment,a),s=!0)},o(a){g(n.$$.fragment,a),g(l.$$.fragment,a),s=!1},d(a){a&&h(e),k(n),k(l)}}}function au(o){let e,n,t=o[8].indicative_mph+"",l,r,s,f,i,a=o[8].highest_mph+"",u,c,$=o[4][o[8].highest_description]+"",_,w;return{c(){e=S("p"),n=T("Posted speed limit: "),l=T(t),r=T(" mph"),s=C(),f=S("p"),i=T("Highest average speed: "),u=T(a),c=T(" mph (during "),_=T($),w=T(")")},m(L,y){d(L,e,y),p(e,n),p(e,l),p(e,r),d(L,s,y),d(L,f,y),p(f,i),p(f,u),p(f,c),p(f,_),p(f,w)},p(L,y){y&256&&t!==(t=L[8].indicative_mph+"")&&q(l,t),y&256&&a!==(a=L[8].highest_mph+"")&&q(u,a),y&256&&$!==($=L[4][L[8].highest_description]+"")&&q(_,$)},d(L){L&&(h(e),h(s),h(f))}}}function fu(o){let e,n;return e=new ae({props:{$$slots:{default:[au,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&768&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function uu(o){let e,n;const t=[H(Mt),{sourceLayer:Mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":de(["get",o[0].kind],o[2],o[1]),"line-width":Fe,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}}];let l={$$slots:{default:[fu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=te(l,t[r]);return e=new he({props:l}),{c(){b(e.$$.fragment)},m(r,s){v(e,r,s),n=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(H(Mt)),s&0&&{sourceLayer:Mt},t[2],t[3],s&7&&{paint:{"line-color":de(["get",r[0].kind],r[2],r[1]),"line-width":Fe,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function cu(o){let e,n,t,l,r;function s(i){o[6](i)}let f={name:Mt,title:pu,$$slots:{controls:[iu],help:[su]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${Xt()}/v1/${Mt}.pmtiles`,$$slots:{default:[uu]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&513&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0].show,W(()=>n=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let Mt="road_speeds",pu="OS Speeds";function $u(o){return o.show?o.kind:null}function mu(o){return{show:!0,kind:o}}function _u(o,e,n){let t,l=x.sequential_low_to_high,r=[0,20,30,40,50,90],f=Ut(Mt,{show:!1,kind:"indicative_mph"},$u,mu);Y(o,f,c=>n(0,t=c));let i={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function a(c){o.$$.not_equal(t.kind,c)&&(t.kind=c,f.set(t))}function u(c){o.$$.not_equal(t.show,c)&&(t.show=c,f.set(t))}return[t,l,r,f,i,a,u]}class gu extends K{constructor(e){super(),X(this,e,_u,cu,V,{})}}function du(o){let e;return{c(){e=T(`Public Sector Geospatial Agreement
      `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function hu(o){let e,n,t,l,r,s,f,i,a,u;return i=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[du]},$$scope:{ctx:o}}}),{c(){e=S("span"),n=S("p"),n.textContent=`This is average and minimum road carriageway width (in meters) from
      Ordnance Survey. The coloring shows the average width, and the line
      thickness has no meaning. Be careful interpreting the data near dual
      carriageways and crossing islands.`,t=C(),l=S("p"),l.textContent="Data valid as of 1 September, 2023",r=C(),s=S("p"),f=T(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),b(i.$$.fragment),a=T("."),F(e,"slot","help")},m(c,$){d(c,e,$),p(e,n),p(e,t),p(e,l),p(e,r),p(e,s),p(s,f),v(i,s,null),p(s,a),u=!0},p(c,$){const _={};$&64&&(_.$$scope={dirty:$,ctx:c}),i.$set(_)},i(c){u||(m(i.$$.fragment,c),u=!0)},o(c){g(i.$$.fragment,c),u=!1},d(c){c&&h(e),k(i)}}}function wu(o){let e,n,t;return n=new Ee({props:{colorScale:o[1],limits:o[2]}}),{c(){e=S("span"),b(n.$$.fragment),F(e,"slot","controls")},m(l,r){d(l,e,r),v(n,e,null),t=!0},p:Q,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&h(e),k(n)}}}function bu(o){let e,n,t,l=o[5].average+"",r,s,f,i,a,u,c=o[5].minimum+"",$,_;return{c(){e=S("p"),n=T("Average width: "),t=S("b"),r=T(l),s=T(`
        meters`),f=C(),i=S("p"),a=T("Minimum width: "),u=S("b"),$=T(c),_=T(`
        meters`)},m(w,L){d(w,e,L),p(e,n),p(e,t),p(t,r),p(e,s),d(w,f,L),d(w,i,L),p(i,a),p(i,u),p(u,$),p(i,_)},p(w,L){L&32&&l!==(l=w[5].average+"")&&q(r,l),L&32&&c!==(c=w[5].minimum+"")&&q($,c)},d(w){w&&(h(e),h(f),h(i))}}}function vu(o){let e,n;return e=new ae({props:{$$slots:{default:[bu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&96&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function ku(o){let e,n;const t=[H(jt),{sourceLayer:jt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":de(["get","average"],o[2],o[1]),"line-width":Fe,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let l={$$slots:{default:[vu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=te(l,t[r]);return e=new he({props:l}),{c(){b(e.$$.fragment)},m(r,s){v(e,r,s),n=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(H(jt)),s&0&&{sourceLayer:jt},t[2],t[3],s&6&&{paint:{"line-color":de(["get","average"],r[2],r[1]),"line-width":Fe,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function yu(o){let e,n,t,l,r;function s(i){o[4](i)}let f={name:jt,title:Su,$$slots:{controls:[wu],help:[hu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${Xt()}/v1/${jt}.pmtiles`,$$slots:{default:[ku]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let jt="road_widths",Su="OS Road widths";function Tu(o,e,n){let t,l=x.sequential_low_to_high,r=[0,5,10,15,20,100],s=ue(jt);Y(o,s,i=>n(0,t=i));function f(i){t=i,s.set(t)}return[t,l,r,s,f]}class Lu extends K{constructor(e){super(),X(this,e,Tu,yu,V,{})}}function Cu(o){let e,n,t;return n=new Te({props:{color:x.trams}}),{c(){e=S("span"),b(n.$$.fragment),F(e,"slot","icon")},m(l,r){d(l,e,r),v(n,e,null),t=!0},p:Q,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&h(e),k(n)}}}function Iu(o){let e,n,t,l,r;return l=new lt({}),{c(){e=S("span"),n=S("p"),n.textContent=`This shows all trams and light rail lines, according to OpenStreetMap (as
      of 20 October 2024). When these are close to a scheme, interactions
      between the modes must be designed carefully.`,t=C(),b(l.$$.fragment),F(e,"slot","help")},m(s,f){d(s,e,f),p(e,n),p(e,t),v(l,e,null),r=!0},p:Q,i(s){r||(m(l.$$.fragment,s),r=!0)},o(s){g(l.$$.fragment,s),r=!1},d(s){s&&h(e),k(l)}}}function Mu(o){let e,n;const t=[H(Ot),{sourceLayer:Ot},{paint:{"line-color":x.trams,"line-width":5,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={};for(let r=0;r<t.length;r+=1)l=te(l,t[r]);return e=new he({props:l}),e.$on("click",Nu),{c(){b(e.$$.fragment)},m(r,s){v(e,r,s),n=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(H(Ot)),s&0&&{sourceLayer:Ot},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function ju(o){let e,n,t,l,r;function s(i){o[2](i)}let f={name:Ot,title:Ou,$$slots:{help:[Iu],icon:[Cu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Ot}.pmtiles`,$$slots:{default:[Mu]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let Ot="trams",Ou="Trams";function Nu(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function Pu(o,e,n){let t,l=ue(Ot);Y(o,l,s=>n(0,t=s));function r(s){t=s,l.set(t)}return[t,l,r]}class Au extends K{constructor(e){super(),X(this,e,Pu,ju,V,{})}}function Ru(o){let e;return{c(){e=T(`Bus Open Data Service
      `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function Du(o){let e,n,t,l,r,s,f,i,a,u;return l=new re({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[Ru]},$$scope:{ctx:o}}}),a=new Pe({}),{c(){e=S("span"),n=S("p"),t=T("Data from the "),b(l.$$.fragment),r=T(`, as of 7 February 2024. To calculate frequency, every
      scheduled arrival time per stop is considered, grouped by day of the week.
      The total daily count is just the number of scheduled arrivals for a day.
      The peak hour frequency is the highest number of buses in any one hour
      window. That window might not lined up perfectly on the hour -- a peak
      hour might occur from 8:25 to 9:25,for example.`),s=C(),f=S("p"),f.textContent=`There are known limitations with this layer, so please use caution when
      using these numbers. Some stops may not be shown at all. Frequency could
      be over- or under-counted, due to exceptions to the regular daily schedule
      of a service.`,i=C(),b(a.$$.fragment),F(e,"slot","help")},m(c,$){d(c,e,$),p(e,n),p(n,t),v(l,n,null),p(n,r),p(e,s),p(e,f),p(e,i),v(a,e,null),u=!0},p(c,$){const _={};$&64&&(_.$$scope={dirty:$,ctx:c}),l.$set(_)},i(c){u||(m(l.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(l.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),k(l),k(a)}}}function Gu(o){let e,n,t,l,r;return l=new Ee({props:{colorScale:o[1],limits:o[2]}}),{c(){e=S("div"),n=S("p"),n.textContent="Peak hourly frequency:",t=C(),b(l.$$.fragment),F(e,"slot","controls")},m(s,f){d(s,e,f),p(e,n),p(e,t),v(l,e,null),r=!0},p:Q,i(s){r||(m(l.$$.fragment,s),r=!0)},o(s){g(l.$$.fragment,s),r=!1},d(s){s&&h(e),k(l)}}}function Fu(o){let e,n,t,l=o[5].stop_name+"",r,s,f,i,a,u=o[5].peak+"",c,$,_,w,L,y=o[5].peak_description+"",M,I,P,N,O,j=o[5].total+"",A,R,z=o[5].total_description+"",J,ie;return{c(){e=S("p"),n=T("Stop name: "),t=S("b"),r=T(l),s=C(),f=S("p"),i=T("Peak: "),a=S("b"),c=T(u),$=T(`
        buses during the busiest hour of any day`),_=C(),w=S("p"),L=T("The peak hour is "),M=T(y),I=C(),P=S("p"),N=T("Total buses per day: "),O=S("b"),A=T(j),R=T(`
        (for `),J=T(z),ie=T(", the busiest day of the week)")},m(G,Z){d(G,e,Z),p(e,n),p(e,t),p(t,r),d(G,s,Z),d(G,f,Z),p(f,i),p(f,a),p(a,c),p(f,$),d(G,_,Z),d(G,w,Z),p(w,L),p(w,M),d(G,I,Z),d(G,P,Z),p(P,N),p(P,O),p(O,A),p(P,R),p(P,J),p(P,ie)},p(G,Z){Z&32&&l!==(l=G[5].stop_name+"")&&q(r,l),Z&32&&u!==(u=G[5].peak+"")&&q(c,u),Z&32&&y!==(y=G[5].peak_description+"")&&q(M,y),Z&32&&j!==(j=G[5].total+"")&&q(A,j),Z&32&&z!==(z=G[5].total_description+"")&&q(J,z)},d(G){G&&(h(e),h(s),h(f),h(_),h(w),h(I),h(P))}}}function qu(o){let e,n;return e=new ae({props:{$$slots:{default:[Fu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&96&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function zu(o){let e,n;const t=[H(Nt),{sourceLayer:Nt},{paint:{"circle-color":de(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[qu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=te(l,t[r]);return e=new Ht({props:l}),{c(){b(e.$$.fragment)},m(r,s){v(e,r,s),n=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(H(Nt)),s&0&&{sourceLayer:Nt},s&6&&{paint:{"circle-color":de(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function Hu(o){let e,n,t,l,r;function s(i){o[4](i)}let f={name:Nt,title:Bu,$$slots:{controls:[Gu],help:[Du]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Nt}.pmtiles`,$$slots:{default:[zu]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let Nt="bus_stops",Bu="Bus stops";function Eu(o,e,n){let t,l=x.sequential_low_to_high,r=[0,3,10,20,30,100],s=ue(Nt);Y(o,s,i=>n(0,t=i));function f(i){t=i,s.set(t)}return[t,l,r,s,f]}class Uu extends K{constructor(e){super(),X(this,e,Eu,Hu,V,{})}}function Wu(o){let e;return{c(){e=T("crossing")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function Yu(o){let e,n,t,l,r,s,f,i;return l=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Wu]},$$scope:{ctx:o}}}),f=new lt({}),{c(){e=S("span"),n=S("p"),t=T("This shows "),b(l.$$.fragment),r=T(" data from OpenStreetMap (as of 20 October 2024)."),s=C(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,n),p(n,t),v(l,n,null),p(n,r),p(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),l.$set(c)},i(a){i||(m(l.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(l.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(l),k(f)}}}function Ju(o){let e,n,t;return n=new Et({props:{rows:o[2]}}),{c(){e=S("div"),b(n.$$.fragment),F(e,"slot","controls")},m(l,r){d(l,e,r),v(n,e,null),t=!0},p:Q,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&h(e),k(n)}}}function Vu(o){let e,n=Cl(o[4])+"",t;return{c(){e=S("p"),t=T(n)},m(l,r){d(l,e,r),p(e,t)},p(l,r){r&16&&n!==(n=Cl(l[4])+"")&&q(t,n)},d(l){l&&h(e)}}}function Qu(o){let e,n;return e=new ae({props:{$$slots:{default:[Vu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&48&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Zu(o){let e,n;const t=[H(Pt),{sourceLayer:Pt},{paint:{"circle-color":nt(["get","crossing"],{traffic_signals:x.signalized_crossing},x.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Qu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=te(l,t[r]);return e=new Ht({props:l}),e.$on("click",xu),{c(){b(e.$$.fragment)},m(r,s){v(e,r,s),n=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(H(Pt)),s&0&&{sourceLayer:Pt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function Ku(o){let e,n,t,l,r;function s(i){o[3](i)}let f={name:Pt,title:Xu,$$slots:{controls:[Ju],help:[Yu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Pt}.pmtiles`,$$slots:{default:[Zu]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let Pt="crossings",Xu="Crossings";function Cl(o){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[o.crossing]??`Unknown crossing type (${o.crossing})`}function xu(o){window.open(`http://openstreetmap.org/node/${o.detail.features[0].properties.osm_id}`,"_blank")}function ec(o,e,n){let t,l=ue(Pt);Y(o,l,f=>n(0,t=f));let r=[["Signalized",x.signalized_crossing],["Other",x.other_crossing]];function s(f){t=f,l.set(t)}return[t,l,r,s]}class tc extends K{constructor(e){super(),X(this,e,ec,Ku,V,{})}}function nc(o){let e;return{c(){e=T("OS Terrain 50")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function lc(o){let e,n,t,l,r,s,f,i,a,u,c,$,_,w;return i=new re({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[nc]},$$scope:{ctx:o}}}),c=new Pe({}),_=new lt({}),{c(){e=S("span"),n=S("p"),n.textContent=`This layer shows the steepness of roads, with the arrows pointing uphill.
      You have to zoom in to see all roads.`,t=C(),l=S("p"),l.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending on
      the underlying Digital Elevation Model used.`,r=C(),s=S("p"),f=T("This layer is built from "),b(i.$$.fragment),a=T(` and roads from OpenStreetMap. The data is valid as of 18 February
      2024.`),u=C(),b(c.$$.fragment),$=C(),b(_.$$.fragment),F(e,"slot","help")},m(L,y){d(L,e,y),p(e,n),p(e,t),p(e,l),p(e,r),p(e,s),p(s,f),v(i,s,null),p(s,a),p(e,u),v(c,e,null),p(e,$),v(_,e,null),w=!0},p(L,y){const M={};y&64&&(M.$$scope={dirty:y,ctx:L}),i.$set(M)},i(L){w||(m(i.$$.fragment,L),m(c.$$.fragment,L),m(_.$$.fragment,L),w=!0)},o(L){g(i.$$.fragment,L),g(c.$$.fragment,L),g(_.$$.fragment,L),w=!1},d(L){L&&h(e),k(i),k(c),k(_)}}}function rc(o){let e,n,t,l,r;return n=new Ee({props:{colorScale:o[1],limits:o[2]}}),{c(){e=S("span"),b(n.$$.fragment),t=C(),l=S("p"),l.innerHTML=`<img src="${ho}" alt="arrow"/>
      Arrows point uphill`,F(e,"slot","controls")},m(s,f){d(s,e,f),v(n,e,null),p(e,t),p(e,l),r=!0},p:Q,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){g(n.$$.fragment,s),r=!1},d(s){s&&h(e),k(n)}}}function oc(o){let e,n,t,l=Math.abs(o[5].gradient)/100+"",r,s;return{c(){e=S("p"),n=T("Gradient: "),t=S("b"),r=T(l),s=T(`
        %`)},m(f,i){d(f,e,i),p(e,n),p(e,t),p(t,r),p(e,s)},p(f,i){i&32&&l!==(l=Math.abs(f[5].gradient)/100+"")&&q(r,l)},d(f){f&&h(e)}}}function sc(o){let e,n;return e=new ae({props:{$$slots:{default:[oc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&96&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function ic(o){let e,n,t,l;const r=[H(Ze),{sourceLayer:Ze},{manageHoverState:!0},{paint:{"line-color":de(["/",["abs",["get","gradient"]],100],o[2],o[1]),"line-width":Fe,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let s={$$slots:{default:[sc]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new he({props:s});const f=[H(Ze+"_arrows"),{sourceLayer:Ze},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new jn({props:i}),{c(){b(e.$$.fragment),n=C(),b(t.$$.fragment)},m(a,u){v(e,a,u),d(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&7?le(r,[u&0&&oe(H(Ze)),u&0&&{sourceLayer:Ze},r[2],u&6&&{paint:{"line-color":de(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":Fe,"line-opacity":ee(1,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&1?le(f,[u&0&&oe(H(Ze+"_arrows")),u&0&&{sourceLayer:Ze},f[2],f[3],u&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&h(n),k(e,a),k(t,a)}}}function ac(o){let e,n,t,l,r;function s(i){o[4](i)}let f={name:Ze,title:fc,$$slots:{controls:[rc],help:[lc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Ze}.pmtiles`,$$slots:{default:[ic]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let Ze="gradient",fc="Gradients";function uc(o,e,n){let t,l=x.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],s=ue(Ze);Y(o,s,i=>n(0,t=i));function f(i){t=i,s.set(t)}return[t,l,r,s,f]}class cc extends K{constructor(e){super(),X(this,e,uc,ac,V,{})}}function pc(o){let e,n;return{c(){e=S("img"),F(e,"slot","icon"),Qt(e.src,n=wo)||F(e,"src",n),F(e,"alt","a logo representing cycle parking")},m(t,l){d(t,e,l)},p:Q,d(t){t&&h(e)}}}function $c(o){let e;return{c(){e=T("OpenStreetMap")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function mc(o){let e;return{c(){e=T("OpenStreetMap Carto")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function _c(o){let e,n,t,l,r,s,f,i,a,u,c,$;return l=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[$c]},$$scope:{ctx:o}}}),a=new re({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[mc]},$$scope:{ctx:o}}}),c=new lt({}),{c(){e=S("span"),n=S("p"),t=T("Cycle parking, according to "),b(l.$$.fragment),r=T(` (as of 20 October 2024). The type of parking, public/private
      access, and whether it's covered are not shown.`),s=C(),f=S("p"),i=T("Icon from "),b(a.$$.fragment),u=C(),b(c.$$.fragment),F(e,"slot","help")},m(_,w){d(_,e,w),p(e,n),p(n,t),v(l,n,null),p(n,r),p(e,s),p(e,f),p(f,i),v(a,f,null),p(e,u),v(c,e,null),$=!0},p(_,w){const L={};w&16&&(L.$$scope={dirty:w,ctx:_}),l.$set(L);const y={};w&16&&(y.$$scope={dirty:w,ctx:_}),a.$set(y)},i(_){$||(m(l.$$.fragment,_),m(a.$$.fragment,_),m(c.$$.fragment,_),$=!0)},o(_){g(l.$$.fragment,_),g(a.$$.fragment,_),g(c.$$.fragment,_),$=!1},d(_){_&&h(e),k(l),k(a),k(c)}}}function gc(o){let e,n,t,l=(o[3].capacity??"unknown")+"",r;return{c(){e=S("p"),n=T("Capacity: "),t=S("b"),r=T(l)},m(s,f){d(s,e,f),p(e,n),p(e,t),p(t,r)},p(s,f){f&8&&l!==(l=(s[3].capacity??"unknown")+"")&&q(r,l)},d(s){s&&h(e)}}}function dc(o){let e,n;return e=new ae({props:{$$slots:{default:[gc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&24&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function hc(o){let e,n;const t=[H(At),{sourceLayer:At},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let l={$$slots:{default:[dc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=te(l,t[r]);return e=new jn({props:l}),{c(){b(e.$$.fragment)},m(r,s){v(e,r,s),n=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(H(At)),s&0&&{sourceLayer:At},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function wc(o){let e,n,t,l,r;function s(i){o[2](i)}let f={name:At,title:bc,$$slots:{help:[_c],icon:[pc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${At}.pmtiles`,$$slots:{default:[hc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let At="cycle_parking",bc="Cycle parking";function vc(o,e,n){let t,l=ue(At);Y(o,l,s=>n(0,t=s));function r(s){t=s,l.set(t)}return[t,l,r]}class kc extends K{constructor(e){super(),X(this,e,vc,wc,V,{})}}function yc(o){let e,n,t,l,r;return l=new lt({}),{c(){e=S("span"),n=S("p"),n.textContent=`This shows different places of education according to OpenStreetMap (as of
      20 October 2024).`,t=C(),b(l.$$.fragment),F(e,"slot","help")},m(s,f){d(s,e,f),p(e,n),p(e,t),v(l,e,null),r=!0},p:Q,i(s){r||(m(l.$$.fragment,s),r=!0)},o(s){g(l.$$.fragment,s),r=!1},d(s){s&&h(e),k(l)}}}function Sc(o){let e,n,t;return e=new Te({props:{color:x.education.schools}}),{c(){b(e.$$.fragment),n=T(`
        Schools`)},m(l,r){v(e,l,r),d(l,n,r),t=!0},p:Q,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&h(n),k(e,l)}}}function Tc(o){let e,n,t;return e=new Te({props:{color:x.education.colleges}}),{c(){b(e.$$.fragment),n=T(`
        Colleges`)},m(l,r){v(e,l,r),d(l,n,r),t=!0},p:Q,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&h(n),k(e,l)}}}function Lc(o){let e,n,t;return e=new Te({props:{color:x.education.universities}}),{c(){b(e.$$.fragment),n=T(`
        Universities`)},m(l,r){v(e,l,r),d(l,n,r),t=!0},p:Q,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&h(n),k(e,l)}}}function Cc(o){let e,n,t,l,r,s,f,i,a;function u(y){o[3](y)}let c={$$slots:{default:[Sc]},$$scope:{ctx:o}};o[0].school!==void 0&&(c.checked=o[0].school),e=new Ke({props:c}),E.push(()=>U(e,"checked",u));function $(y){o[4](y)}let _={$$slots:{default:[Tc]},$$scope:{ctx:o}};o[0].college!==void 0&&(_.checked=o[0].college),l=new Ke({props:_}),E.push(()=>U(l,"checked",$));function w(y){o[5](y)}let L={$$slots:{default:[Lc]},$$scope:{ctx:o}};return o[0].university!==void 0&&(L.checked=o[0].university),f=new Ke({props:L}),E.push(()=>U(f,"checked",w)),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment),s=C(),b(f.$$.fragment)},m(y,M){v(e,y,M),d(y,t,M),v(l,y,M),d(y,s,M),v(f,y,M),a=!0},p(y,M){const I={};M&2048&&(I.$$scope={dirty:M,ctx:y}),!n&&M&1&&(n=!0,I.checked=y[0].school,W(()=>n=!1)),e.$set(I);const P={};M&2048&&(P.$$scope={dirty:M,ctx:y}),!r&&M&1&&(r=!0,P.checked=y[0].college,W(()=>r=!1)),l.$set(P);const N={};M&2048&&(N.$$scope={dirty:M,ctx:y}),!i&&M&1&&(i=!0,N.checked=y[0].university,W(()=>i=!1)),f.$set(N)},i(y){a||(m(e.$$.fragment,y),m(l.$$.fragment,y),m(f.$$.fragment,y),a=!0)},o(y){g(e.$$.fragment,y),g(l.$$.fragment,y),g(f.$$.fragment,y),a=!1},d(y){y&&(h(t),h(s)),k(e,y),k(l,y),k(f,y)}}}function Ic(o){let e,n,t;return n=new Ge({props:{small:!0,$$slots:{default:[Cc]},$$scope:{ctx:o}}}),{c(){e=S("div"),b(n.$$.fragment),F(e,"slot","controls"),ne(e,"border","1px solid black"),ne(e,"padding","8px")},m(l,r){d(l,e,r),v(n,e,null),t=!0},p(l,r){const s={};r&2049&&(s.$$scope={dirty:r,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&h(e),k(n)}}}function Mc(o){let e,n=(o[10].name??"Unnamed institution")+"",t;return{c(){e=S("p"),t=T(n)},m(l,r){d(l,e,r),p(e,t)},p(l,r){r&1024&&n!==(n=(l[10].name??"Unnamed institution")+"")&&q(t,n)},d(l){l&&h(e)}}}function jc(o){let e,n;return e=new ae({props:{$$slots:{default:[Mc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&3072&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Oc(o){let e,n;const t=[H(Rt),{sourceLayer:Rt},{paint:{"fill-color":nt(["get","type"],{school:x.education.schools,college:x.education.colleges,university:x.education.universities},"grey"),"fill-opacity":ee(.7,1)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[2](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[jc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=te(l,t[r]);return e=new qe({props:l}),{c(){b(e.$$.fragment)},m(r,s){v(e,r,s),n=!0},p(r,s){const f=s&5?le(t,[s&0&&oe(H(Rt)),s&0&&{sourceLayer:Rt},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&5&&{filter:r[2](r[0])},t[5],t[6]]):{};s&2048&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function Nc(o){let e,n,t,l,r;function s(i){o[6](i)}let f={name:Rt,title:Pc,$$slots:{controls:[Ic],help:[yc]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Rt}.pmtiles`,$$slots:{default:[Oc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0].show,W(()=>n=!1)),e.$set(u);const c={};a&2049&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let Rt="education",Pc="Education";function Ac(o){return{show:!0,school:o.includes("school"),college:o.includes("college"),university:o.includes("university")}}function Rc(o,e,n){let t,l=["school","college","university"],r={show:!1,school:!0,college:!0,university:!0};function s(_){return _.show?l.filter(w=>_[w]).join(","):null}let f=Ut(Rt,r,s,Ac);Y(o,f,_=>n(0,t=_));function i(_){let w=l.filter(L=>_[L]);return["in",["get","type"],["literal",w]]}function a(_){o.$$.not_equal(t.school,_)&&(t.school=_,f.set(t))}function u(_){o.$$.not_equal(t.college,_)&&(t.college=_,f.set(t))}function c(_){o.$$.not_equal(t.university,_)&&(t.university=_,f.set(t))}function $(_){o.$$.not_equal(t.show,_)&&(t.show=_,f.set(t))}return[t,f,i,a,u,c,$]}class Dc extends K{constructor(e){super(),X(this,e,Rc,Nc,V,{})}}function Gc(o){let e,n,t;return n=new Te({props:{color:x.hospitals}}),{c(){e=S("span"),b(n.$$.fragment),F(e,"slot","icon")},m(l,r){d(l,e,r),v(n,e,null),t=!0},p:Q,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&h(e),k(n)}}}function Fc(o){let e;return{c(){e=T("hospital")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function qc(o){let e,n,t,l,r,s,f,i;return l=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Fc]},$$scope:{ctx:o}}}),f=new lt({}),{c(){e=S("span"),n=S("p"),t=T("This shows "),b(l.$$.fragment),r=T(` data from OpenStreetMap (as of 20 October 2024). It doesn't
      include outpatient clinics or individual doctor's offices.`),s=C(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,n),p(n,t),v(l,n,null),p(n,r),p(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&16&&(c.$$scope={dirty:u,ctx:a}),l.$set(c)},i(a){i||(m(l.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(l.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(l),k(f)}}}function zc(o){let e,n=(o[3].name??"Unnamed hospital")+"",t;return{c(){e=S("p"),t=T(n)},m(l,r){d(l,e,r),p(e,t)},p(l,r){r&8&&n!==(n=(l[3].name??"Unnamed hospital")+"")&&q(t,n)},d(l){l&&h(e)}}}function Hc(o){let e,n;return e=new ae({props:{$$slots:{default:[zc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&24&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Bc(o){let e,n;const t=[H(Dt),{sourceLayer:Dt},{paint:{"fill-color":x.hospitals,"fill-opacity":ee(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Hc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=te(l,t[r]);return e=new qe({props:l}),{c(){b(e.$$.fragment)},m(r,s){v(e,r,s),n=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(H(Dt)),s&0&&{sourceLayer:Dt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function Ec(o){let e,n,t,l,r;function s(i){o[2](i)}let f={name:Dt,title:Uc,$$slots:{help:[qc],icon:[Gc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Dt}.pmtiles`,$$slots:{default:[Bc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let Dt="hospitals",Uc="Hospitals";function Wc(o,e,n){let t,l=ue(Dt);Y(o,l,s=>n(0,t=s));function r(s){t=s,l.set(t)}return[t,l,r]}class Yc extends K{constructor(e){super(),X(this,e,Wc,Ec,V,{})}}function Jc(o){let e,n;return{c(){e=S("img"),F(e,"slot","icon"),Qt(e.src,n=bo)||F(e,"src",n),F(e,"alt","A logo representing a train")},m(t,l){d(t,e,l)},p:Q,d(t){t&&h(e)}}}function Vc(o){let e;return{c(){e=T("railway station")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function Qc(o){let e;return{c(){e=T(`National Rail
      `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function Zc(o){let e,n,t,l,r,s,f,i,a,u,c,$,_;return l=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Vc]},$$scope:{ctx:o}}}),a=new re({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[Qc]},$$scope:{ctx:o}}}),$=new lt({}),{c(){e=S("div"),n=S("p"),t=T("This shows "),b(l.$$.fragment),r=T(" data from OpenStreetMap (as of 20 October 2024)."),s=C(),f=S("p"),i=T("Icon from "),b(a.$$.fragment),u=T(". (Note that not all stations shown are National Rail.)"),c=C(),b($.$$.fragment),F(e,"slot","help")},m(w,L){d(w,e,L),p(e,n),p(n,t),v(l,n,null),p(n,r),p(e,s),p(e,f),p(f,i),v(a,f,null),p(f,u),p(e,c),v($,e,null),_=!0},p(w,L){const y={};L&16&&(y.$$scope={dirty:L,ctx:w}),l.$set(y);const M={};L&16&&(M.$$scope={dirty:L,ctx:w}),a.$set(M)},i(w){_||(m(l.$$.fragment,w),m(a.$$.fragment,w),m($.$$.fragment,w),_=!0)},o(w){g(l.$$.fragment,w),g(a.$$.fragment,w),g($.$$.fragment,w),_=!1},d(w){w&&h(e),k(l),k(a),k($)}}}function Kc(o){let e,n=(o[3].name??"Unnamed railway station")+"",t;return{c(){e=S("p"),t=T(n)},m(l,r){d(l,e,r),p(e,t)},p(l,r){r&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&q(t,n)},d(l){l&&h(e)}}}function Xc(o){let e,n;return e=new ae({props:{$$slots:{default:[Kc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&24&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function xc(o){let e,n;const t=[H(Kt),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let l={$$slots:{default:[Xc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=te(l,t[r]);return e=new jn({props:l}),{c(){b(e.$$.fragment)},m(r,s){v(e,r,s),n=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(H(Kt)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function ep(o){let e,n,t,l,r;function s(i){o[2](i)}let f={name:Kt,title:tp,$$slots:{help:[Zc],icon:[Jc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new Bt({props:{data:`${ce()}/v1/${Kt}.geojson`,$$slots:{default:[xc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let Kt="railway_stations",tp="Railway stations";function np(o,e,n){let t,l=ue(Kt);Y(o,l,s=>n(0,t=s));function r(s){t=s,l.set(t)}return[t,l,r]}class lp extends K{constructor(e){super(),X(this,e,np,ep,V,{})}}function rp(o){let e,n,t;return n=new Te({props:{color:x.sports_spaces}}),{c(){e=S("span"),b(n.$$.fragment),F(e,"slot","icon")},m(l,r){d(l,e,r),v(n,e,null),t=!0},p:Q,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&h(e),k(n)}}}function op(o){let e;return{c(){e=T("sports pitches")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function sp(o){let e;return{c(){e=T("sports centres")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function ip(o){let e,n,t,l,r,s,f,i,a,u;return l=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[op]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[sp]},$$scope:{ctx:o}}}),a=new lt({}),{c(){e=S("span"),n=S("p"),t=T("This shows "),b(l.$$.fragment),r=T(" and "),b(s.$$.fragment),f=T(" data from OpenStreetMap (as of 20 October 2024)."),i=C(),b(a.$$.fragment),F(e,"slot","help")},m(c,$){d(c,e,$),p(e,n),p(n,t),v(l,n,null),p(n,r),v(s,n,null),p(n,f),p(e,i),v(a,e,null),u=!0},p(c,$){const _={};$&16&&(_.$$scope={dirty:$,ctx:c}),l.$set(_);const w={};$&16&&(w.$$scope={dirty:$,ctx:c}),s.$set(w)},i(c){u||(m(l.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(l.$$.fragment,c),g(s.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),k(l),k(s),k(a)}}}function ap(o){let e,n=(o[3].name??"Unnamed sports space")+"",t;return{c(){e=S("p"),t=T(n)},m(l,r){d(l,e,r),p(e,t)},p(l,r){r&8&&n!==(n=(l[3].name??"Unnamed sports space")+"")&&q(t,n)},d(l){l&&h(e)}}}function fp(o){let e,n;return e=new ae({props:{$$slots:{default:[ap,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&24&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function up(o){let e,n;const t=[H(Gt),{sourceLayer:Gt},{paint:{"fill-color":x.sports_spaces,"fill-opacity":ee(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[fp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=te(l,t[r]);return e=new qe({props:l}),{c(){b(e.$$.fragment)},m(r,s){v(e,r,s),n=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(H(Gt)),s&0&&{sourceLayer:Gt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function cp(o){let e,n,t,l,r;function s(i){o[2](i)}let f={name:Gt,title:pp,$$slots:{help:[ip],icon:[rp]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Gt}.pmtiles`,$$slots:{default:[up]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let Gt="sports_spaces",pp="Sports spaces";function $p(o,e,n){let t,l=ue(Gt);Y(o,l,s=>n(0,t=s));function r(s){t=s,l.set(t)}return[t,l,r]}class mp extends K{constructor(e){super(),X(this,e,$p,cp,V,{})}}function _p(o){let e;return{c(){e=T("DfT stats19")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function gp(o){let e;return{c(){e=T("documented by DfT")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function dp(o){let e,n,t,l,r,s,f,i,a,u,c,$,_,w,L,y,M,I,P,N,O,j,A,R;return l=new re({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[_p]},$$scope:{ctx:o}}}),I=new re({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[gp]},$$scope:{ctx:o}}}),A=new Pe({}),{c(){e=S("span"),n=S("p"),t=T("This layer shows collisions recorded in the "),b(l.$$.fragment),r=T(" dataset, as of 30 September 2024. Please note these limitations:"),s=C(),f=S("ul"),i=S("li"),i.textContent="Only collisions between 2017 and 2023 are included",a=C(),u=S("li"),u.textContent=`This tool is intended to be used at high-zoom levels, while inspecting a
        scheme or development area. Not all points are shown at lower zoom
        levels. Do not use this to look for trends across a city or region
        scale.`,c=C(),$=S("li"),$.textContent=`Approximately 150 collisions from the source data aren't included, due
        to problems with the recorded location`,_=C(),w=S("li"),w.textContent='The "pedestrians" category also include mobility scooters',L=C(),y=S("li"),M=T("All limitations "),b(I.$$.fragment),P=T(` also apply. Not all collisions or near misses are reported.
        There's nuance with the severity categories.`),N=C(),O=S("p"),O.textContent="You can click a point to open the full report, thanks to CycleStreets.",j=C(),b(A.$$.fragment),F(e,"slot","help")},m(z,J){d(z,e,J),p(e,n),p(n,t),v(l,n,null),p(n,r),p(e,s),p(e,f),p(f,i),p(f,a),p(f,u),p(f,c),p(f,$),p(f,_),p(f,w),p(f,L),p(f,y),p(y,M),v(I,y,null),p(y,P),p(e,N),p(e,O),p(e,j),v(A,e,null),R=!0},p(z,J){const ie={};J&4194304&&(ie.$$scope={dirty:J,ctx:z}),l.$set(ie);const G={};J&4194304&&(G.$$scope={dirty:J,ctx:z}),I.$set(G)},i(z){R||(m(l.$$.fragment,z),m(I.$$.fragment,z),m(A.$$.fragment,z),R=!0)},o(z){g(l.$$.fragment,z),g(I.$$.fragment,z),g(A.$$.fragment,z),R=!1},d(z){z&&h(e),k(l),k(I),k(A)}}}function hp(o){let e;return{c(){e=T("Pedestrians")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function wp(o){let e;return{c(){e=T("Cyclists")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function bp(o){let e;return{c(){e=T("Horse riders")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function vp(o){let e;return{c(){e=T("Other")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function kp(o){let e,n,t,l,r,s,f,i,a,u,c,$;function _(O){o[10](O)}let w={$$slots:{default:[hp]},$$scope:{ctx:o}};o[0].pedestrians!==void 0&&(w.checked=o[0].pedestrians),e=new Ke({props:w}),E.push(()=>U(e,"checked",_));function L(O){o[11](O)}let y={$$slots:{default:[wp]},$$scope:{ctx:o}};o[0].cyclists!==void 0&&(y.checked=o[0].cyclists),l=new Ke({props:y}),E.push(()=>U(l,"checked",L));function M(O){o[12](O)}let I={$$slots:{default:[bp]},$$scope:{ctx:o}};o[0].horseRiders!==void 0&&(I.checked=o[0].horseRiders),f=new Ke({props:I}),E.push(()=>U(f,"checked",M));function P(O){o[13](O)}let N={$$slots:{default:[vp]},$$scope:{ctx:o}};return o[0].other!==void 0&&(N.checked=o[0].other),u=new Ke({props:N}),E.push(()=>U(u,"checked",P)),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment),s=C(),b(f.$$.fragment),a=C(),b(u.$$.fragment)},m(O,j){v(e,O,j),d(O,t,j),v(l,O,j),d(O,s,j),v(f,O,j),d(O,a,j),v(u,O,j),$=!0},p(O,j){const A={};j&4194304&&(A.$$scope={dirty:j,ctx:O}),!n&&j&1&&(n=!0,A.checked=O[0].pedestrians,W(()=>n=!1)),e.$set(A);const R={};j&4194304&&(R.$$scope={dirty:j,ctx:O}),!r&&j&1&&(r=!0,R.checked=O[0].cyclists,W(()=>r=!1)),l.$set(R);const z={};j&4194304&&(z.$$scope={dirty:j,ctx:O}),!i&&j&1&&(i=!0,z.checked=O[0].horseRiders,W(()=>i=!1)),f.$set(z);const J={};j&4194304&&(J.$$scope={dirty:j,ctx:O}),!c&&j&1&&(c=!0,J.checked=O[0].other,W(()=>c=!1)),u.$set(J)},i(O){$||(m(e.$$.fragment,O),m(l.$$.fragment,O),m(f.$$.fragment,O),m(u.$$.fragment,O),$=!0)},o(O){g(e.$$.fragment,O),g(l.$$.fragment,O),g(f.$$.fragment,O),g(u.$$.fragment,O),$=!1},d(O){O&&(h(t),h(s),h(a)),k(e,O),k(l,O),k(f,O),k(u,O)}}}function yp(o){let e,n,t,l,r,s,f,i,a,u,c,$,_;return n=new Ge({props:{small:!0,$$slots:{default:[kp]},$$scope:{ctx:o}}}),u=new Et({props:{rows:o[9]}}),{c(){e=S("div"),b(n.$$.fragment),t=C(),l=S("div"),r=T(`Filter years:
      `),s=S("input"),f=T(`
      -
      `),i=S("input"),a=C(),b(u.$$.fragment),F(s,"type","number"),F(s,"min",2017),F(s,"max",2023),F(s,"class","svelte-1ft65rw"),F(i,"type","number"),F(i,"min",2017),F(i,"max",2023),F(i,"class","svelte-1ft65rw"),F(e,"slot","controls"),ne(e,"border","1px solid black"),ne(e,"padding","8px")},m(w,L){d(w,e,L),v(n,e,null),p(e,t),p(e,l),p(l,r),p(l,s),et(s,o[0].minYear),p(l,f),p(l,i),et(i,o[0].maxYear),p(e,a),v(u,e,null),c=!0,$||(_=[mt(s,"input",o[14]),mt(i,"input",o[15])],$=!0)},p(w,L){const y={};L&4194305&&(y.$$scope={dirty:L,ctx:w}),n.$set(y),L&1&&Zt(s.value)!==w[0].minYear&&et(s,w[0].minYear),L&1&&Zt(i.value)!==w[0].maxYear&&et(i,w[0].maxYear)},i(w){c||(m(n.$$.fragment,w),m(u.$$.fragment,w),c=!0)},o(w){g(n.$$.fragment,w),g(u.$$.fragment,w),c=!1},d(w){w&&h(e),k(n),k(u),$=!1,Ir(_)}}}function Il(o){let e,n,t,l=o[3][o[21].pedestrian_location]+"",r;return{c(){e=S("p"),n=T("Pedestrian location: "),t=S("b"),r=T(l)},m(s,f){d(s,e,f),p(e,n),p(e,t),p(t,r)},p(s,f){f&2097152&&l!==(l=s[3][s[21].pedestrian_location]+"")&&q(r,l)},d(s){s&&h(e)}}}function Ml(o){let e,n,t,l=o[4][o[21].pedestrian_movement]+"",r;return{c(){e=S("p"),n=T("Pedestrian movement: "),t=S("b"),r=T(l)},m(s,f){d(s,e,f),p(e,n),p(e,t),p(t,r)},p(s,f){f&2097152&&l!==(l=s[4][s[21].pedestrian_movement]+"")&&q(r,l)},d(s){s&&h(e)}}}function Sp(o){let e,n,t,l=o[21].year+"",r,s,f,i,a,u=o[5][o[21].severity]+"",c,$,_,w,L,y=jl(o[21])+"",M,I,P,N,O,j=o[21].pedestrian_location&&Il(o),A=o[21].pedestrian_movement&&Ml(o);return{c(){e=S("p"),n=T("Year: "),t=S("b"),r=T(l),s=C(),f=S("p"),i=T("Severity: "),a=S("b"),c=T(u),$=C(),_=S("p"),w=T("Casualties: "),L=S("b"),M=T(y),I=C(),j&&j.c(),P=C(),A&&A.c(),N=C(),O=S("p"),O.textContent="Click to open full report in CycleStreets"},m(R,z){d(R,e,z),p(e,n),p(e,t),p(t,r),d(R,s,z),d(R,f,z),p(f,i),p(f,a),p(a,c),d(R,$,z),d(R,_,z),p(_,w),p(_,L),p(L,M),d(R,I,z),j&&j.m(R,z),d(R,P,z),A&&A.m(R,z),d(R,N,z),d(R,O,z)},p(R,z){z&2097152&&l!==(l=R[21].year+"")&&q(r,l),z&2097152&&u!==(u=R[5][R[21].severity]+"")&&q(c,u),z&2097152&&y!==(y=jl(R[21])+"")&&q(M,y),R[21].pedestrian_location?j?j.p(R,z):(j=Il(R),j.c(),j.m(P.parentNode,P)):j&&(j.d(1),j=null),R[21].pedestrian_movement?A?A.p(R,z):(A=Ml(R),A.c(),A.m(N.parentNode,N)):A&&(A.d(1),A=null)},d(R){R&&(h(e),h(s),h(f),h($),h(_),h(I),h(P),h(N),h(O)),j&&j.d(R),A&&A.d(R)}}}function Tp(o){let e,n;return e=new ae({props:{$$slots:{default:[Sp,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&6291456&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Lp(o){let e,n;const t=[H(Ft),{sourceLayer:Ft},{paint:{"circle-color":de(["get","severity"],[1,2,3],[o[6],o[7],o[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:o[1]},{layout:{visibility:o[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Tp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=te(l,t[r]);return e=new Ht({props:l}),e.$on("click",jp),{c(){b(e.$$.fragment)},m(r,s){v(e,r,s),n=!0},p(r,s){const f=s&451?le(t,[s&0&&oe(H(Ft)),s&0&&{sourceLayer:Ft},s&448&&{paint:{"circle-color":de(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&2&&{filter:r[1]},s&1&&{layout:{visibility:r[0].show?"visible":"none"}},t[5],t[6]]):{};s&4194304&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function Cp(o){let e,n,t,l,r;function s(i){o[16](i)}let f={name:Ft,title:Ip,$$slots:{controls:[yp],help:[dp]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Ft}.pmtiles`,$$slots:{default:[Lp]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&4194305&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0].show,W(()=>n=!1)),e.$set(u);const c={};a&4194307&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let Ft="stats19",Ip="Stats19";function Mp(o){let[e,n,t]=o.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(n),maxYear:parseInt(t)}}function jl(o){let e=[];return o.pedestrian&&e.push("pedestrian"),o.cyclist&&e.push("cyclist"),o.horse_rider&&e.push("horse rider"),o.other&&e.push("other"),e.join(", ")}function jp(o){window.open(`https://www.cyclestreets.net/collisions/reports/${o.detail.features[0].properties.accident_index}`,"_blank")}function Op(o,e,n){let t,l,r=["pedestrians","cyclists","horseRiders","other"],s={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2023};function f(R){return R.show?`${r.filter(J=>R[J]).join(",")}/${R.minYear}/${R.maxYear}`:null}let i=Ut(Ft,s,f,Mp);Y(o,i,R=>n(0,l=R));function a(R,z,J,ie,G,Z){let B=["any"];return l.pedestrians&&B.push(["get","pedestrian"]),l.cyclists&&B.push(["get","cyclist"]),l.horseRiders&&B.push(["get","horse_rider"]),l.other&&B.push(["get","other"]),["all",[">=",["get","year"],l.minYear],["<=",["get","year"],l.maxYear],B]}let u={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},$={1:"Fatal",2:"Serious",3:"Slight"},_=x.sequential_low_to_high[4],w=x.sequential_low_to_high[2],L=x.sequential_low_to_high[0],y=[["Fatal",_],["Serious",w],["Slight",L]];function M(R){o.$$.not_equal(l.pedestrians,R)&&(l.pedestrians=R,i.set(l))}function I(R){o.$$.not_equal(l.cyclists,R)&&(l.cyclists=R,i.set(l))}function P(R){o.$$.not_equal(l.horseRiders,R)&&(l.horseRiders=R,i.set(l))}function N(R){o.$$.not_equal(l.other,R)&&(l.other=R,i.set(l))}function O(){l.minYear=Zt(this.value),i.set(l)}function j(){l.maxYear=Zt(this.value),i.set(l)}function A(R){o.$$.not_equal(l.show,R)&&(l.show=R,i.set(l))}return o.$$.update=()=>{o.$$.dirty&1&&n(1,t=a(l.minYear,l.maxYear,l.pedestrians,l.cyclists,l.horseRiders,l.other))},[l,t,i,u,c,$,_,w,L,y,M,I,P,N,O,j,A]}class Np extends K{constructor(e){super(),X(this,e,Op,Cp,V,{})}}function Pp(o){let e;return{c(){e=T(`DfT road statistics
      `)},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function Ap(o){let e;return{c(){e=T("methodology")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function Rp(o){let e,n,t,l,r,s,f,i,a,u,c,$;return l=new re({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Pp]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Ap]},$$scope:{ctx:o}}}),c=new Pe({}),{c(){e=S("span"),n=S("p"),t=T("AADF (annual average daily flow) data from "),b(l.$$.fragment),r=T(`. This counts the total daily number of vehicles traveling
      past a count point (in both directions) on an average day of the year.
      Data from the latest year available is shown. See `),b(s.$$.fragment),f=T(" for details and caveats about the measurements."),i=C(),a=S("p"),a.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
      thicker when the latest data is a manual or automatic count, and thinner
      when it's an estimate from previous years or nearby counters. Click a
      point for full data.`,u=C(),b(c.$$.fragment),F(e,"slot","help")},m(_,w){d(_,e,w),p(e,n),p(n,t),v(l,n,null),p(n,r),v(s,n,null),p(n,f),p(e,i),p(e,a),p(e,u),v(c,e,null),$=!0},p(_,w){const L={};w&128&&(L.$$scope={dirty:w,ctx:_}),l.$set(L);const y={};w&128&&(y.$$scope={dirty:w,ctx:_}),s.$set(y)},i(_){$||(m(l.$$.fragment,_),m(s.$$.fragment,_),m(c.$$.fragment,_),$=!0)},o(_){g(l.$$.fragment,_),g(s.$$.fragment,_),g(c.$$.fragment,_),$=!1},d(_){_&&h(e),k(l),k(s),k(c)}}}function Dp(o){let e,n,t;return n=new Ee({props:{colorScale:o[1],limits:o[3]}}),{c(){e=S("span"),b(n.$$.fragment),F(e,"slot","controls")},m(l,r){d(l,e,r),v(n,e,null),t=!0},p:Q,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&h(e),k(n)}}}function Gp(o){let e,n=o[6].location+"",t,l,r,s,f=o[6].year+"",i,a,u,c=o[6].motor_vehicles.toLocaleString()+"",$,_,w,L,y=o[6].year+"",M,I,P,N=o[6].pedal_cycles.toLocaleString()+"",O,j,A,R,z,J=o[6].method+"",ie;return{c(){e=S("h2"),t=T(n),l=C(),r=S("p"),s=T("Total motor vehicles ("),i=T(f),a=T(` AADF):
        `),u=S("b"),$=T(c),_=C(),w=S("p"),L=T("Total pedal cycles ("),M=T(y),I=T(` AADF):
        `),P=S("b"),O=T(N),j=C(),A=S("p"),R=T("Count method: "),z=S("b"),ie=T(J)},m(G,Z){d(G,e,Z),p(e,t),d(G,l,Z),d(G,r,Z),p(r,s),p(r,i),p(r,a),p(r,u),p(u,$),d(G,_,Z),d(G,w,Z),p(w,L),p(w,M),p(w,I),p(w,P),p(P,O),d(G,j,Z),d(G,A,Z),p(A,R),p(A,z),p(z,ie)},p(G,Z){Z&64&&n!==(n=G[6].location+"")&&q(t,n),Z&64&&f!==(f=G[6].year+"")&&q(i,f),Z&64&&c!==(c=G[6].motor_vehicles.toLocaleString()+"")&&q($,c),Z&64&&y!==(y=G[6].year+"")&&q(M,y),Z&64&&N!==(N=G[6].pedal_cycles.toLocaleString()+"")&&q(O,N),Z&64&&J!==(J=G[6].method+"")&&q(ie,J)},d(G){G&&(h(e),h(l),h(r),h(_),h(w),h(j),h(A))}}}function Fp(o){let e,n;return e=new ae({props:{$$slots:{default:[Gp,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&192&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function qp(o){let e,n;const t=[H(qt),{sourceLayer:qt},{paint:{"circle-color":de(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Fp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=te(l,t[r]);return e=new Ht({props:l}),e.$on("click",Bp),{c(){b(e.$$.fragment)},m(r,s){v(e,r,s),n=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(H(qt)),s&0&&{sourceLayer:qt},s&6&&{paint:{"circle-color":de(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&128&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function zp(o){let e,n,t,l,r;function s(i){o[5](i)}let f={name:qt,title:Hp,$$slots:{controls:[Dp],help:[Rp]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${qt}.pmtiles`,$$slots:{default:[qp]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&128&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&129&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let qt="vehicle_counts",Hp="Vehicle counts";function Bp(o){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${o.detail.features[0].properties.count_point}`,"_blank")}function Ep(o,e,n){let t,l=["green","orange","red","black"],r=[0,2500,8e3,15e3,205e3],s=["0-2.5k","2.5-8k","8-15k",">15k"],f=ue(qt);Y(o,f,a=>n(0,t=a));function i(a){t=a,f.set(t)}return[t,l,r,s,f,i]}class Up extends K{constructor(e){super(),X(this,e,Ep,zp,V,{})}}function Ol(o,e,n){const t=o.slice();return t[6]=e[n],t}function Wp(o){let e;return{c(){e=S("span"),e.innerHTML=`<p>Critical issues and policy conflicts from the Design Assistance Log. This
      is internally collected data.</p> <p>This layer is manually copied from a copy of the DA Log. The data is
      recent as of 10 June 2024.</p>`,F(e,"slot","help")},m(n,t){d(n,e,t)},p:Q,d(n){n&&h(e)}}}function Yp(o){let e,n,t;return n=new Et({props:{rows:o[3]}}),{c(){e=S("div"),b(n.$$.fragment),F(e,"slot","controls"),ne(e,"border","1px solid black"),ne(e,"padding","8px")},m(l,r){d(l,e,r),v(n,e,null),t=!0},p:Q,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&h(e),k(n)}}}function Jp(o){let e,n=o[5]["Issue ID"]+"",t,l,r=o[5].Code+"",s,f,i,a=o[5]["Issue Stage"]+"",u;return{c(){e=S("h2"),t=T(n),l=T(" - "),s=T(r),f=C(),i=S("p"),u=T(a)},m(c,$){d(c,e,$),p(e,t),p(e,l),p(e,s),d(c,f,$),d(c,i,$),p(i,u)},p(c,$){$&32&&n!==(n=c[5]["Issue ID"]+"")&&q(t,n),$&32&&r!==(r=c[5].Code+"")&&q(s,r),$&32&&a!==(a=c[5]["Issue Stage"]+"")&&q(u,a)},d(c){c&&(h(e),h(f),h(i))}}}function Nl(o){let e,n=o[6]+"",t,l,r,s=o[5][o[6]]+"",f,i;return{c(){e=S("p"),t=T(n),l=T(`:
            `),r=S("b"),f=T(s),i=C()},m(a,u){d(a,e,u),p(e,t),p(e,l),p(e,r),p(r,f),p(e,i)},p(a,u){u&32&&s!==(s=a[5][a[6]]+"")&&q(f,s)},d(a){a&&h(e)}}}function Vp(o){let e,n=$e(o[2]),t=[];for(let l=0;l<n.length;l+=1)t[l]=Nl(Ol(o,n,l));return{c(){e=S("div");for(let l=0;l<t.length;l+=1)t[l].c();ne(e,"max-width","30vw"),ne(e,"max-height","60vh"),ne(e,"overflow","auto")},m(l,r){d(l,e,r);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(l,r){if(r&36){n=$e(l[2]);let s;for(s=0;s<n.length;s+=1){const f=Ol(l,n,s);t[s]?t[s].p(f,r):(t[s]=Nl(f),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=n.length}},d(l){l&&h(e),He(t,l)}}}function Qp(o){let e,n,t,l;return e=new ae({props:{openOn:"hover",$$slots:{default:[Jp,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Vp,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),n=C(),b(t.$$.fragment)},m(r,s){v(e,r,s),d(r,n,s),v(t,r,s),l=!0},p(r,s){const f={};s&544&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&544&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){l||(m(e.$$.fragment,r),m(t.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),l=!1},d(r){r&&h(n),k(e,r),k(t,r)}}}function Zp(o){let e,n;const t=[H(cn),{paint:{"circle-color":nt(["get","Design Review Status"],Object.fromEntries(o[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Qp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=te(l,t[r]);return e=new Ht({props:l}),{c(){b(e.$$.fragment)},m(r,s){v(e,r,s),n=!0},p(r,s){const f=s&9?le(t,[s&0&&oe(H(cn)),s&8&&{paint:{"circle-color":nt(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[3],t[4]]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function Kp(o){let e,n,t,l,r;function s(i){o[4](i)}let f={name:cn,title:Xp,$$slots:{controls:[Yp],help:[Wp]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>U(e,"show",s)),l=new Bt({props:{data:`${Xt()}/v1/problems.geojson.gz`,$$slots:{default:[Zp]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,[a]){const u={};a&512&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}let cn="problems",Xp="Issues & Conflicts";function xp(o,e,n){let t,l=ue(cn);Y(o,l,i=>n(0,t=i));let r=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],s=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function f(i){t=i,l.set(t)}return[t,l,r,s,f]}class e$ extends K{constructor(e){super(),X(this,e,xp,Kp,V,{})}}function t$(o){let e;function n(r,s){return r[2]<=100?r$:l$}let t=n(o),l=t(o);return{c(){l.c(),e=be()},m(r,s){l.m(r,s),d(r,e,s)},p(r,s){t===(t=n(r))&&l?l.p(r,s):(l.d(1),l=t(r),l&&(l.c(),l.m(e.parentNode,e)))},i:Q,o:Q,d(r){r&&h(e),l.d(r)}}}function n$(o){let e,n;return e=new Be({props:{$$slots:{default:[o$]},$$scope:{ctx:o}}}),e.$on("click",o[3]),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&64&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function l$(o){let e;return{c(){e=S("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(n,t){d(n,e,t)},p:Q,d(n){n&&h(e)}}}function r$(o){let e,n,t;return{c(){e=S("label"),n=T(`Downloading scheme data
      `),t=S("progress"),t.value=o[2],F(t,"class","svelte-q3473n")},m(l,r){d(l,e,r),p(e,n),p(e,t)},p(l,r){r&4&&(t.value=l[2])},d(l){l&&h(e)}}}function o$(o){let e;return{c(){e=T("Load latest scheme data")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function s$(o){let e,n,t,l;const r=[n$,t$],s=[];function f(i,a){return i[0]?i[1]?1:-1:0}return~(e=f(o))&&(n=s[e]=r[e](o)),{c(){n&&n.c(),t=be()},m(i,a){~e&&s[e].m(i,a),d(i,t,a),l=!0},p(i,[a]){let u=e;e=f(i),e===u?~e&&s[e].p(i,a):(n&&(_e(),g(s[u],1,1,()=>{s[u]=null}),ge()),~e?(n=s[e],n?n.p(i,a):(n=s[e]=r[e](i),n.c()),m(n,1),n.m(t.parentNode,t)):n=null)},i(i){l||(m(n),l=!0)},o(i){g(n),l=!1},d(i){i&&h(t),~e&&s[e].d(i)}}}function i$(o,e,n){let{loadFile:t}=e,l=!new URLSearchParams(window.location.search).has("disable_schemes"),r=!0,s=0;async function f(){let a=await Xr(`${Xt()}/v1/all_schemes_output.geojson.gz`,c=>{n(2,s=c)});n(2,s=100);let u=new TextDecoder().decode(a);t("all_schemes_output.geojson",u),n(1,r=!1)}Mr(async()=>{l&&await f()});async function i(){n(0,l=!0),await f()}return o.$$set=a=>{"loadFile"in a&&n(4,t=a.loadFile)},[l,r,s,i,t]}class a$ extends K{constructor(e){super(),X(this,e,i$,s$,V,{loadFile:4})}}function Pl(o,e,n){let t={type:"FeatureCollection",features:[],schemes:{},notes:o.notes},l={type:"FeatureCollection",features:[],schemes:{},notes:o.notes};for(let[r,s]of Object.entries(o.schemes))s.pipeline?l.schemes[r]=s:t.schemes[r]=s;for(let r of o.features){if(!f$(r))continue;let s=r.properties.scheme_reference,f=Object.hasOwn(t.schemes,s),i=f?t.schemes[s]:l.schemes[s];i.browse&&(r.properties.funding_programme=i.browse.funding_programme,r.properties.current_milestone=i.browse.current_milestone);let a=f?t:l;r.id=a.features.length+1,a.features.push(r)}e.set(t),n.set(l)}function f$(o){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(o.properties.id)}function u$(){let o={type:"FeatureCollection",features:[],schemes:{},notes:["These schemes are everything you've drawn in this browser using Scheme Sketcher. The data source and accuracy depend on whatever files you imported, created, or edited yourself."]};for(let n=0;n<window.localStorage.length;n++){let t=window.localStorage.key(n),l=t.split("/");if(!(l.length!=3||l[0]!="sketch"))try{let r=JSON.parse(window.localStorage.getItem(t));if(r.features.length==0)continue;for(let s of Object.values(r.schemes))s.browse={authority_or_region:l[1]};o.schemes={...o.schemes,...r.schemes},o.features=[...o.features,...r.features]}catch{}}let e=1;for(let n of o.features)n.id=e++;return o}let Yt={ATF2:"#66c2a5","ATF2 or ATF3":"#fc8d62",ATF3:"#8da0cb",ATF4:"#e78ac3",ATF4E:"#a6d854"},Tn={removed:"grey","no data":"grey","not progressed":"red",superseded:"red","preliminary design completed":"#fbb862","feasability design completed":"#eddc76","detailed design completed":"#dafd9d","consruction started":"#76c384","construction completed":"#488f31"};function Al(o,e,n){const t=o.slice();return t[27]=e[n],t[28]=e,t[29]=n,t}function c$(o){let e;return{c(){e=T("Filters")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function p$(o){let e;return{c(){e=T("Reset all filters")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function $$(o){let e,n,t,l,r,s,f,i;e=new yn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[g$]},$$scope:{ctx:o}}});function a(_){o[22](_)}let u={label:"Scheme name or reference",options:pn(o[0])};o[1]!==void 0&&(u.value=o[1]),t=new Dr({props:u}),E.push(()=>U(t,"value",a));function c(_){o[23](_)}let $={label:"Authority or region",choices:o[10],emptyOption:!0};return o[4]!==void 0&&($.value=o[4]),s=new st({props:$}),E.push(()=>U(s,"value",c)),{c(){b(e.$$.fragment),n=C(),b(t.$$.fragment),r=C(),b(s.$$.fragment)},m(_,w){v(e,_,w),d(_,n,w),v(t,_,w),d(_,r,w),v(s,_,w),i=!0},p(_,w){const L={};w&1073741828&&(L.$$scope={dirty:w,ctx:_}),e.$set(L);const y={};w&1&&(y.options=pn(_[0])),!l&&w&2&&(l=!0,y.value=_[1],W(()=>l=!1)),t.$set(y);const M={};w&1024&&(M.choices=_[10]),!f&&w&16&&(f=!0,M.value=_[4],W(()=>f=!1)),s.$set(M)},i(_){i||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(s.$$.fragment,_),i=!0)},o(_){g(e.$$.fragment,_),g(t.$$.fragment,_),g(s.$$.fragment,_),i=!1},d(_){_&&(h(n),h(r)),k(e,_),k(t,_),k(s,_)}}}function m$(o){let e,n,t,l,r,s,f,i,a,u,c,$,_,w,L,y;t=new yn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[h$]},$$scope:{ctx:o}}});function M(A){o[16](A)}let I={label:"Scheme name or reference",options:pn(o[0])};o[1]!==void 0&&(I.value=o[1]),r=new Dr({props:I}),E.push(()=>U(r,"value",M));function P(A){o[17](A)}let N={label:"Authority or region",choices:o[10],emptyOption:!0};o[4]!==void 0&&(N.value=o[4]),i=new st({props:N}),E.push(()=>U(i,"value",P)),$=new yn({props:{label:"Funding programmes",id:"filterFundingProgrammes",$$slots:{default:[v$]},$$scope:{ctx:o}}});function O(A){o[19](A)}let j={label:"Current milestone",choices:o[11],emptyOption:!0};return o[6]!==void 0&&(j.value=o[6]),w=new st({props:j}),E.push(()=>U(w,"value",O)),{c(){e=S("div"),n=S("div"),b(t.$$.fragment),l=C(),b(r.$$.fragment),f=C(),b(i.$$.fragment),u=C(),c=S("div"),b($.$$.fragment),_=C(),b(w.$$.fragment),F(n,"class","govuk-grid-column-one-half"),F(c,"class","govuk-grid-column-one-half"),F(e,"class","govuk-grid-row")},m(A,R){d(A,e,R),p(e,n),v(t,n,null),p(n,l),v(r,n,null),p(n,f),v(i,n,null),p(e,u),p(e,c),v($,c,null),p(c,_),v(w,c,null),y=!0},p(A,R){const z={};R&1073741828&&(z.$$scope={dirty:R,ctx:A}),t.$set(z);const J={};R&1&&(J.options=pn(A[0])),!s&&R&2&&(s=!0,J.value=A[1],W(()=>s=!1)),r.$set(J);const ie={};R&1024&&(ie.choices=A[10]),!a&&R&16&&(a=!0,ie.value=A[4],W(()=>a=!1)),i.$set(ie);const G={};R&1073741856&&(G.$$scope={dirty:R,ctx:A}),$.$set(G);const Z={};!L&&R&64&&(L=!0,Z.value=A[6],W(()=>L=!1)),w.$set(Z)},i(A){y||(m(t.$$.fragment,A),m(r.$$.fragment,A),m(i.$$.fragment,A),m($.$$.fragment,A),m(w.$$.fragment,A),y=!0)},o(A){g(t.$$.fragment,A),g(r.$$.fragment,A),g(i.$$.fragment,A),g($.$$.fragment,A),g(w.$$.fragment,A),y=!1},d(A){A&&h(e),k(t),k(r),k(i),k($),k(w)}}}function _$(o){let e;return{c(){e=T("Clear")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function g$(o){let e,n,t,l,r,s;return t=new Be({props:{$$slots:{default:[_$]},$$scope:{ctx:o}}}),t.$on("click",o[21]),{c(){e=S("input"),n=C(),b(t.$$.fragment),F(e,"type","text"),F(e,"class","govuk-input govuk-input--width-10"),F(e,"id","filterInterventionText")},m(f,i){d(f,e,i),et(e,o[2]),d(f,n,i),v(t,f,i),l=!0,r||(s=mt(e,"input",o[20]),r=!0)},p(f,i){i&4&&e.value!==f[2]&&et(e,f[2]);const a={};i&1073741824&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){l||(m(t.$$.fragment,f),l=!0)},o(f){g(t.$$.fragment,f),l=!1},d(f){f&&(h(e),h(n)),k(t,f),r=!1,s()}}}function d$(o){let e;return{c(){e=T("Clear")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function h$(o){let e,n,t,l,r,s;return t=new Be({props:{$$slots:{default:[d$]},$$scope:{ctx:o}}}),t.$on("click",o[15]),{c(){e=S("input"),n=C(),b(t.$$.fragment),F(e,"type","text"),F(e,"class","govuk-input govuk-input--width-10"),F(e,"id","filterInterventionText")},m(f,i){d(f,e,i),et(e,o[2]),d(f,n,i),v(t,f,i),l=!0,r||(s=mt(e,"input",o[14]),r=!0)},p(f,i){i&4&&e.value!==f[2]&&et(e,f[2]);const a={};i&1073741824&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){l||(m(t.$$.fragment,f),l=!0)},o(f){g(t.$$.fragment,f),l=!1},d(f){f&&(h(e),h(n)),k(t,f),r=!1,s()}}}function w$(o){let e=o[27]+"",n,t;return{c(){n=T(e),t=C()},m(l,r){d(l,n,r),d(l,t,r)},p:Q,d(l){l&&(h(n),h(t))}}}function Rl(o){let e,n,t;function l(s){o[18](s,o[27])}let r={$$slots:{default:[w$]},$$scope:{ctx:o}};return o[5][o[27]]!==void 0&&(r.checked=o[5][o[27]]),e=new Ke({props:r}),E.push(()=>U(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){o=s;const i={};f&1073741824&&(i.$$scope={dirty:f,ctx:o}),!n&&f&32&&(n=!0,i.checked=o[5][o[27]],W(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function b$(o){let e,n,t=$e(Object.keys(Yt)),l=[];for(let s=0;s<t.length;s+=1)l[s]=Rl(Al(o,t,s));const r=s=>g(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=be()},m(s,f){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,f);d(s,e,f),n=!0},p(s,f){if(f&32){t=$e(Object.keys(Yt));let i;for(i=0;i<t.length;i+=1){const a=Al(s,t,i);l[i]?(l[i].p(a,f),m(l[i],1)):(l[i]=Rl(a),l[i].c(),m(l[i],1),l[i].m(e.parentNode,e))}for(_e(),i=t.length;i<l.length;i+=1)r(i);ge()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)m(l[f]);n=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)g(l[f]);n=!1},d(s){s&&h(e),He(l,s)}}}function v$(o){let e,n;return e=new Ge({props:{small:!0,$$slots:{default:[b$]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&1073741856&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function k$(o){let e;return{c(){e=T("Done")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function y$(o){let e,n,t,l,r=o[9].interventions.toLocaleString()+"",s,f,i,a,u=o[8].size.toLocaleString()+"",c,$,_,w,L,y=Dl(o[9].totalLength).toFixed(1)+"",M,I,P,N,O,j,A,R,z,J;N=new Be({props:{$$slots:{default:[p$]},$$scope:{ctx:o}}}),N.$on("click",o[12]);const ie=[m$,$$],G=[];function Z(B,se){return B[3]=="ATF"?0:1}return j=Z(o),A=G[j]=ie[j](o),z=new So({props:{$$slots:{default:[k$]},$$scope:{ctx:o}}}),z.$on("click",o[24]),{c(){e=S("p"),e.textContent="Showing:",n=C(),t=S("ul"),l=S("li"),s=T(r),f=T(" interventions"),i=C(),a=S("li"),c=T(u),$=T(" schemes"),_=C(),w=S("li"),L=T("total route length of "),M=T(y),I=T(" miles"),P=C(),b(N.$$.fragment),O=C(),A.c(),R=C(),b(z.$$.fragment)},m(B,se){d(B,e,se),d(B,n,se),d(B,t,se),p(t,l),p(l,s),p(l,f),p(t,i),p(t,a),p(a,c),p(a,$),p(t,_),p(t,w),p(w,L),p(w,M),p(w,I),d(B,P,se),v(N,B,se),d(B,O,se),G[j].m(B,se),d(B,R,se),v(z,B,se),J=!0},p(B,se){(!J||se&512)&&r!==(r=B[9].interventions.toLocaleString()+"")&&q(s,r),(!J||se&256)&&u!==(u=B[8].size.toLocaleString()+"")&&q(c,u),(!J||se&512)&&y!==(y=Dl(B[9].totalLength).toFixed(1)+"")&&q(M,y);const ye={};se&1073741824&&(ye.$$scope={dirty:se,ctx:B}),N.$set(ye);let Re=j;j=Z(B),j===Re?G[j].p(B,se):(_e(),g(G[Re],1,1,()=>{G[Re]=null}),ge(),A=G[j],A?A.p(B,se):(A=G[j]=ie[j](B),A.c()),m(A,1),A.m(R.parentNode,R));const Le={};se&1073741824&&(Le.$$scope={dirty:se,ctx:B}),z.$set(Le)},i(B){J||(m(N.$$.fragment,B),m(A),m(z.$$.fragment,B),J=!0)},o(B){g(N.$$.fragment,B),g(A),g(z.$$.fragment,B),J=!1},d(B){B&&(h(e),h(n),h(t),h(P),h(O),h(R)),k(N,B),G[j].d(B),k(z,B)}}}function S$(o){let e,n,t,l,r;e=new Be({props:{$$slots:{default:[c$]},$$scope:{ctx:o}}}),e.$on("click",o[13]);function s(i){o[25](i)}let f={title:`Filter ${o[3]} schemes`,$$slots:{default:[y$]},$$scope:{ctx:o}};return o[7]!==void 0&&(f.open=o[7]),t=new xr({props:f}),E.push(()=>U(t,"open",s)),{c(){b(e.$$.fragment),n=C(),b(t.$$.fragment)},m(i,a){v(e,i,a),d(i,n,a),v(t,i,a),r=!0},p(i,[a]){const u={};a&1073741824&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&8&&(c.title=`Filter ${i[3]} schemes`),a&1073743871&&(c.$$scope={dirty:a,ctx:i}),!l&&a&128&&(l=!0,c.open=i[7],W(()=>l=!1)),t.$set(c)},i(i){r||(m(e.$$.fragment,i),m(t.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),r=!1},d(i){i&&h(n),k(e,i),k(t,i)}}}function T$(o){var t;let e=new Set;for(let l of Object.values(o.schemes))(t=l.browse)!=null&&t.authority_or_region&&e.add(l.browse.authority_or_region);let n=Array.from(e.entries());return n.sort(),n}function Dl(o){return o*621371e-9}function pn(o){let e=[];for(let n of Object.values(o.schemes))e.push([n.scheme_reference,n.scheme_reference]),n.scheme_name&&e.push([n.scheme_name,n.scheme_name]);return e}function L$(o,e,n){let t,{source:l}=e,{schemesGj:r}=e,{filterSchemeText:s}=e,{filterInterventionText:f}=e,i=!1,a=new Set,u={interventions:0,totalLength:0},c=Object.keys(Tn).map(B=>[B,B]),$="",_=Object.fromEntries(Object.keys(Yt).map(B=>[B,!0])),w="";function L(B,se,ye,Re,Le){let Ce=B.toLowerCase(),it=se.toLowerCase(),at=we=>{var Ue,ft,ut,De;if(Ce&&!((Ue=we.properties.name)!=null&&Ue.toLowerCase().includes(Ce))&&!((ft=we.properties.description)!=null&&ft.toLowerCase().includes(Ce)))return!1;let Ae=r.schemes[we.properties.scheme_reference];return!(ye&&((ut=Ae.browse)==null?void 0:ut.authority_or_region)!=ye||l=="ATF"&&Ae.browse.funding_programme&&!Re[Ae.browse.funding_programme]||Le&&((De=Ae.browse)==null?void 0:De.current_milestone)!=Le||it&&!Ae.scheme_reference.toLowerCase().includes(it)&&!(Ae.scheme_name??"").toLowerCase().includes(it))};n(8,a=new Set(r.features.filter(at).map(we=>we.properties.scheme_reference))),n(9,u={interventions:0,totalLength:0});let Xe=we=>{var Ae,Ue;return!(!a.has(we.properties.scheme_reference)||Ce&&!((Ae=we.properties.name)!=null&&Ae.toLowerCase().includes(Ce))&&!((Ue=we.properties.description)!=null&&Ue.toLowerCase().includes(Ce)))};for(let we of r.features)Xe(we)?(delete we.properties.hide_while_editing,n(9,u.interventions++,u),we.geometry.type=="LineString"&&we.properties.length_meters&&n(9,u.totalLength+=we.properties.length_meters,u)):we.properties.hide_while_editing=!0;n(0,r),n(9,u)}function y(){n(4,$=""),n(5,_=Object.fromEntries(Object.keys(Yt).map(B=>[B,!0]))),n(6,w=""),n(2,f=""),n(1,s="")}const M=()=>n(7,i=!0);function I(){f=this.value,n(2,f)}const P=()=>n(2,f="");function N(B){s=B,n(1,s)}function O(B){$=B,n(4,$)}function j(B,se){o.$$.not_equal(_[se],B)&&(_[se]=B,n(5,_))}function A(B){w=B,n(6,w)}function R(){f=this.value,n(2,f)}const z=()=>n(2,f="");function J(B){s=B,n(1,s)}function ie(B){$=B,n(4,$)}const G=()=>n(7,i=!1);function Z(B){i=B,n(7,i)}return o.$$set=B=>{"source"in B&&n(3,l=B.source),"schemesGj"in B&&n(0,r=B.schemesGj),"filterSchemeText"in B&&n(1,s=B.filterSchemeText),"filterInterventionText"in B&&n(2,f=B.filterInterventionText)},o.$$.update=()=>{o.$$.dirty&1&&n(10,t=T$(r)),o.$$.dirty&118&&L(f,s,$,_,w)},[r,s,f,l,$,_,w,i,a,u,t,c,y,M,I,P,N,O,j,A,R,z,J,ie,G,Z]}class _n extends K{constructor(e){super(),X(this,e,L$,S$,V,{source:3,schemesGj:0,filterSchemeText:1,filterInterventionText:2})}}const an=Se({type:"FeatureCollection",features:[],schemes:{}}),Gl=Se(""),Fl=Se(""),gn=Se({type:"FeatureCollection",features:[],schemes:{}}),ql=Se(""),zl=Se(""),dn=Se({type:"FeatureCollection",features:[],schemes:{}}),Hl=Se(""),Bl=Se(""),hn=Se({type:"FeatureCollection",features:[],schemes:{}}),El=Se(""),Ul=Se("");function Wl(o){let e,n,t,l=o[0].status+"",r;return{c(){e=S("p"),n=S("b"),n.textContent="Status",t=T(`
    : `),r=T(l)},m(s,f){d(s,e,f),p(e,n),p(e,t),p(e,r)},p(s,f){f&1&&l!==(l=s[0].status+"")&&q(r,l)},d(s){s&&h(e)}}}function Yl(o){let e,n,t,l=o[0].timescale+"",r;return{c(){e=S("p"),n=S("b"),n.textContent="Timescale",t=T(`
    : `),r=T(l)},m(s,f){d(s,e,f),p(e,n),p(e,t),p(e,r)},p(s,f){f&1&&l!==(l=s[0].timescale+"")&&q(r,l)},d(s){s&&h(e)}}}function Jl(o){let e,n,t,l=o[0].timescale_year+"",r;return{c(){e=S("p"),n=S("b"),n.textContent="Estimated completion year",t=T(`
    : `),r=T(l)},m(s,f){d(s,e,f),p(e,n),p(e,t),p(e,r)},p(s,f){f&1&&l!==(l=s[0].timescale_year+"")&&q(r,l)},d(s){s&&h(e)}}}function Vl(o){let e,n,t,l=o[0].year_published+"",r;return{c(){e=S("p"),n=S("b"),n.textContent="Scheme most recently published",t=T(`
    : `),r=T(l)},m(s,f){d(s,e,f),p(e,n),p(e,t),p(e,r)},p(s,f){f&1&&l!==(l=s[0].year_published+"")&&q(r,l)},d(s){s&&h(e)}}}function Ql(o){let e,n,t,l=o[0].year_consulted+"",r;return{c(){e=S("p"),n=S("b"),n.textContent="Scheme most recently consulted on",t=T(`
    : `),r=T(l)},m(s,f){d(s,e,f),p(e,n),p(e,t),p(e,r)},p(s,f){f&1&&l!==(l=s[0].year_consulted+"")&&q(r,l)},d(s){s&&h(e)}}}function C$(o){let e,n,t,l,r,s=o[0].status&&Wl(o),f=o[0].timescale&&Yl(o),i=o[0].timescale_year&&Jl(o),a=o[0].year_published&&Vl(o),u=o[0].year_consulted&&Ql(o);return{c(){s&&s.c(),e=C(),f&&f.c(),n=C(),i&&i.c(),t=C(),a&&a.c(),l=C(),u&&u.c(),r=be()},m(c,$){s&&s.m(c,$),d(c,e,$),f&&f.m(c,$),d(c,n,$),i&&i.m(c,$),d(c,t,$),a&&a.m(c,$),d(c,l,$),u&&u.m(c,$),d(c,r,$)},p(c,[$]){c[0].status?s?s.p(c,$):(s=Wl(c),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c[0].timescale?f?f.p(c,$):(f=Yl(c),f.c(),f.m(n.parentNode,n)):f&&(f.d(1),f=null),c[0].timescale_year?i?i.p(c,$):(i=Jl(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,$):(a=Vl(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[0].year_consulted?u?u.p(c,$):(u=Ql(c),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},i:Q,o:Q,d(c){c&&(h(e),h(n),h(t),h(l),h(r)),s&&s.d(c),f&&f.d(c),i&&i.d(c),a&&a.d(c),u&&u.d(c)}}}function I$(o,e,n){let{props:t}=e;return o.$$set=l=>{"props"in l&&n(0,t=l.props)},[t]}class Fr extends K{constructor(e){super(),X(this,e,I$,C$,V,{props:0})}}function Zl(o){let e,n,t,l=o[0].budget.toLocaleString()+"",r,s;return{c(){e=S("p"),n=S("b"),n.textContent="Cost",t=T(`
    : `),r=T(l),s=T(`
    GBP`)},m(f,i){d(f,e,i),p(e,n),p(e,t),p(e,r),p(e,s)},p(f,i){i&1&&l!==(l=f[0].budget.toLocaleString()+"")&&q(r,l)},d(f){f&&h(e)}}}function Kl(o){let e;return{c(){e=S("p"),e.textContent="Development is fully funded"},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function Xl(o){let e;return{c(){e=S("p"),e.textContent="Construction is fully funded"},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function xl(o){let e,n,t,l;return{c(){e=S("p"),n=S("b"),n.textContent="Funding sources",t=T(`
    : `),l=T(o[1])},m(r,s){d(r,e,s),p(e,n),p(e,t),p(e,l)},p(r,s){s&2&&q(l,r[1])},d(r){r&&h(e)}}}function M$(o){let e,n,t,l,r=o[0].budget&&Zl(o),s=o[0].development_funded&&Kl(),f=o[0].construction_funded&&Xl(),i=o[1]&&xl(o);return{c(){r&&r.c(),e=C(),s&&s.c(),n=C(),f&&f.c(),t=C(),i&&i.c(),l=be()},m(a,u){r&&r.m(a,u),d(a,e,u),s&&s.m(a,u),d(a,n,u),f&&f.m(a,u),d(a,t,u),i&&i.m(a,u),d(a,l,u)},p(a,[u]){a[0].budget?r?r.p(a,u):(r=Zl(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),a[0].development_funded?s||(s=Kl(),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),a[0].construction_funded?f||(f=Xl(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),a[1]?i?i.p(a,u):(i=xl(a),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null)},i:Q,o:Q,d(a){a&&(h(e),h(n),h(t),h(l)),r&&r.d(a),s&&s.d(a),f&&f.d(a),i&&i.d(a)}}}function j$(o){if(!o.funding_sources)return"";let e=[];for(let n of["atf2","atf3","atf4","atf4e","crsts","luf"])o.funding_sources[n]&&e.push(n.toUpperCase());return o.funding_sources.other&&e.push(o.funding_sources.other),e.join(", ")}function O$(o,e,n){let t,{props:l}=e;return o.$$set=r=>{"props"in r&&n(0,l=r.props)},o.$$.update=()=>{o.$$.dirty&1&&n(1,t=j$(l))},[l,t]}class qr extends K{constructor(e){super(),X(this,e,O$,M$,V,{props:0})}}function wn(o){const e=o.slice(),n=e[5].pipeline;return e[11]=n,e}function bn(o){const e=o.slice(),n=e[1].pipeline;return e[11]=n,e}function er(o){let e,n,t,l=qn(o[1].length_meters)+"",r;return{c(){e=S("p"),n=S("b"),n.textContent="Length",t=T(`
        : `),r=T(l)},m(s,f){d(s,e,f),p(e,n),p(e,t),p(e,r)},p(s,f){f&2&&l!==(l=qn(s[1].length_meters)+"")&&q(r,l)},d(s){s&&h(e)}}}function tr(o){let e,n=ct(o[1].description,o[3])+"";return{c(){e=S("p")},m(t,l){d(t,e,l),e.innerHTML=n},p(t,l){l&10&&n!==(n=ct(t[1].description,t[3])+"")&&(e.innerHTML=n)},d(t){t&&h(e)}}}function nr(o){let e,n,t,l,r,s,f,i=o[11].atf4_type&&lr(o),a=o[11].accuracy&&rr(o),u=o[11].is_alternative&&or();return l=new qr({props:{props:o[11]}}),s=new Fr({props:{props:o[11]}}),{c(){i&&i.c(),e=C(),a&&a.c(),n=C(),u&&u.c(),t=C(),b(l.$$.fragment),r=C(),b(s.$$.fragment)},m(c,$){i&&i.m(c,$),d(c,e,$),a&&a.m(c,$),d(c,n,$),u&&u.m(c,$),d(c,t,$),v(l,c,$),d(c,r,$),v(s,c,$),f=!0},p(c,$){c[11].atf4_type?i?i.p(c,$):(i=lr(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[11].accuracy?a?a.p(c,$):(a=rr(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[11].is_alternative?u||(u=or(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const _={};$&2&&(_.props=c[11]),l.$set(_);const w={};$&2&&(w.props=c[11]),s.$set(w)},i(c){f||(m(l.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){g(l.$$.fragment,c),g(s.$$.fragment,c),f=!1},d(c){c&&(h(e),h(n),h(t),h(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),k(l,c),k(s,c)}}}function lr(o){let e,n,t,l=o[11].atf4_type+"",r;return{c(){e=S("p"),n=S("b"),n.textContent="ATF4 type",t=T(`
          : `),r=T(l)},m(s,f){d(s,e,f),p(e,n),p(e,t),p(e,r)},p(s,f){f&2&&l!==(l=s[11].atf4_type+"")&&q(r,l)},d(s){s&&h(e)}}}function rr(o){let e,n,t,l=o[11].accuracy+"",r;return{c(){e=S("p"),n=S("b"),n.textContent="Accuracy",t=T(`
          : `),r=T(l)},m(s,f){d(s,e,f),p(e,n),p(e,t),p(e,r)},p(s,f){f&2&&l!==(l=s[11].accuracy+"")&&q(r,l)},d(s){s&&h(e)}}}function or(o){let e;return{c(){e=S("p"),e.textContent="Represents an alternative route"},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function sr(o){var s;let e,n,t,l=((s=o[5].browse)==null?void 0:s.capital_scheme_id)+"",r;return{c(){e=S("p"),n=S("b"),n.textContent="Capital scheme ID",t=T(`
        : `),r=T(l)},m(f,i){d(f,e,i),p(e,n),p(e,t),p(e,r)},p(f,i){var a;i&32&&l!==(l=((a=f[5].browse)==null?void 0:a.capital_scheme_id)+"")&&q(r,l)},d(f){f&&h(e)}}}function ir(o){var s;let e,n,t,l=((s=o[5].browse)==null?void 0:s.funding_programme)+"",r;return{c(){e=S("p"),n=S("b"),n.textContent="Funding programme",t=T(`
        : `),r=T(l)},m(f,i){d(f,e,i),p(e,n),p(e,t),p(e,r)},p(f,i){var a;i&32&&l!==(l=((a=f[5].browse)==null?void 0:a.funding_programme)+"")&&q(r,l)},d(f){f&&h(e)}}}function ar(o){var s;let e,n,t,l=((s=o[5].browse)==null?void 0:s.current_milestone)+"",r;return{c(){e=S("p"),n=S("b"),n.textContent="Current milestone",t=T(`
        : `),r=T(l)},m(f,i){d(f,e,i),p(e,n),p(e,t),p(e,r)},p(f,i){var a;i&32&&l!==(l=((a=f[5].browse)==null?void 0:a.current_milestone)+"")&&q(r,l)},d(f){f&&h(e)}}}function fr(o){let e,n,t,l,r,s,f,i=o[11].scheme_type&&ur(o),a=o[11].atf4_lead_type&&cr(o),u=o[11].scheme_description&&pr(o);return l=new qr({props:{props:o[11]}}),s=new Fr({props:{props:o[11]}}),{c(){i&&i.c(),e=C(),a&&a.c(),n=C(),u&&u.c(),t=C(),b(l.$$.fragment),r=C(),b(s.$$.fragment)},m(c,$){i&&i.m(c,$),d(c,e,$),a&&a.m(c,$),d(c,n,$),u&&u.m(c,$),d(c,t,$),v(l,c,$),d(c,r,$),v(s,c,$),f=!0},p(c,$){c[11].scheme_type?i?i.p(c,$):(i=ur(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[11].atf4_lead_type?a?a.p(c,$):(a=cr(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[11].scheme_description?u?u.p(c,$):(u=pr(c),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const _={};$&32&&(_.props=c[11]),l.$set(_);const w={};$&32&&(w.props=c[11]),s.$set(w)},i(c){f||(m(l.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){g(l.$$.fragment,c),g(s.$$.fragment,c),f=!1},d(c){c&&(h(e),h(n),h(t),h(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),k(l,c),k(s,c)}}}function ur(o){let e,n,t,l=o[11].scheme_type+"",r;return{c(){e=S("p"),n=S("b"),n.textContent="Scheme type",t=T(`
          : `),r=T(l)},m(s,f){d(s,e,f),p(e,n),p(e,t),p(e,r)},p(s,f){f&32&&l!==(l=s[11].scheme_type+"")&&q(r,l)},d(s){s&&h(e)}}}function cr(o){let e,n,t,l=o[11].atf4_lead_type+"",r;return{c(){e=S("p"),n=S("b"),n.textContent="ATF4 lead type",t=T(`
          : `),r=T(l)},m(s,f){d(s,e,f),p(e,n),p(e,t),p(e,r)},p(s,f){f&32&&l!==(l=s[11].atf4_lead_type+"")&&q(r,l)},d(s){s&&h(e)}}}function pr(o){let e,n,t,l=o[11].scheme_description+"",r;return{c(){e=S("p"),n=S("b"),n.textContent="Descripton",t=T(`
          : `),r=T(l)},m(s,f){d(s,e,f),p(e,n),p(e,t),p(e,r)},p(s,f){f&32&&l!==(l=s[11].scheme_description+"")&&q(r,l)},d(s){s&&h(e)}}}function N$(o){let e;return{c(){e=T("Zoom to show entire scheme")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function P$(o){let e;return{c(){e=T("Edit a copy of this scheme")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function $r(o){var en,tn,nn,ln;let e,n,t,l,r,s,f,i=ct(o[1].name,o[3])+"",a,u=o[1].intervention_type+"",c,$,_,w,L,y,M,I,P,N,O,j,A,R,z,J=ct(o[5].scheme_name??"",o[2])+"",ie,G,Z,B,se,ye=ct(o[1].scheme_reference,o[2])+"",Re,Le,Ce,it,at=((en=o[5].browse)==null?void 0:en.authority_or_region)+"",Xe,we,Ae,Ue,ft,ut,De,xt,xe,ze,Ie=o[1].length_meters&&er(o),Me=o[1].description&&tr(o),ve=o[1].pipeline&&nr(bn(o)),je=((tn=o[5].browse)==null?void 0:tn.capital_scheme_id)&&sr(o),Oe=((nn=o[5].browse)==null?void 0:nn.funding_programme)&&ir(o),Ne=((ln=o[5].browse)==null?void 0:ln.current_milestone)&&ar(o),ke=o[5].pipeline&&fr(wn(o));return De=new Be({props:{$$slots:{default:[N$]},$$scope:{ctx:o}}}),De.$on("click",o[6]),xe=new Be({props:{$$slots:{default:[P$]},$$scope:{ctx:o}}}),xe.$on("click",o[7]),{c(){e=S("div"),n=S("h2"),n.textContent="Intervention",t=C(),l=S("p"),r=S("b"),r.textContent="Name",s=T(`
      : `),f=new zt(!1),a=T(" ("),c=T(u),$=T(")"),_=C(),Ie&&Ie.c(),w=C(),Me&&Me.c(),L=C(),ve&&ve.c(),y=C(),M=S("hr"),I=C(),P=S("h2"),N=T(o[0]),O=C(),j=S("p"),A=S("b"),A.textContent="Scheme name",R=T(`
      : `),z=new zt(!1),ie=C(),G=S("p"),Z=S("b"),Z.textContent="Scheme reference",B=T(`
      : `),se=new zt(!1),Re=C(),Le=S("p"),Ce=S("b"),Ce.textContent="Authority or region",it=T(`
      : `),Xe=T(at),we=C(),je&&je.c(),Ae=C(),Oe&&Oe.c(),Ue=C(),Ne&&Ne.c(),ft=C(),ke&&ke.c(),ut=C(),b(De.$$.fragment),xt=C(),b(xe.$$.fragment),f.a=a,z.a=null,se.a=null,ne(e,"max-width","30vw"),ne(e,"max-height","60vh"),ne(e,"overflow","auto")},m(D,me){d(D,e,me),p(e,n),p(e,t),p(e,l),p(l,r),p(l,s),f.m(i,l),p(l,a),p(l,c),p(l,$),p(e,_),Ie&&Ie.m(e,null),p(e,w),Me&&Me.m(e,null),p(e,L),ve&&ve.m(e,null),p(e,y),p(e,M),p(e,I),p(e,P),p(P,N),p(e,O),p(e,j),p(j,A),p(j,R),z.m(J,j),p(e,ie),p(e,G),p(G,Z),p(G,B),se.m(ye,G),p(e,Re),p(e,Le),p(Le,Ce),p(Le,it),p(Le,Xe),p(e,we),je&&je.m(e,null),p(e,Ae),Oe&&Oe.m(e,null),p(e,Ue),Ne&&Ne.m(e,null),p(e,ft),ke&&ke.m(e,null),p(e,ut),v(De,e,null),p(e,xt),v(xe,e,null),o[9](e),ze=!0},p(D,me){var Pn,An,Rn,Dn;(!ze||me&10)&&i!==(i=ct(D[1].name,D[3])+"")&&f.p(i),(!ze||me&2)&&u!==(u=D[1].intervention_type+"")&&q(c,u),D[1].length_meters?Ie?Ie.p(D,me):(Ie=er(D),Ie.c(),Ie.m(e,w)):Ie&&(Ie.d(1),Ie=null),D[1].description?Me?Me.p(D,me):(Me=tr(D),Me.c(),Me.m(e,L)):Me&&(Me.d(1),Me=null),D[1].pipeline?ve?(ve.p(bn(D),me),me&2&&m(ve,1)):(ve=nr(bn(D)),ve.c(),m(ve,1),ve.m(e,y)):ve&&(_e(),g(ve,1,1,()=>{ve=null}),ge()),(!ze||me&1)&&q(N,D[0]),(!ze||me&36)&&J!==(J=ct(D[5].scheme_name??"",D[2])+"")&&z.p(J),(!ze||me&6)&&ye!==(ye=ct(D[1].scheme_reference,D[2])+"")&&se.p(ye),(!ze||me&32)&&at!==(at=((Pn=D[5].browse)==null?void 0:Pn.authority_or_region)+"")&&q(Xe,at),(An=D[5].browse)!=null&&An.capital_scheme_id?je?je.p(D,me):(je=sr(D),je.c(),je.m(e,Ae)):je&&(je.d(1),je=null),(Rn=D[5].browse)!=null&&Rn.funding_programme?Oe?Oe.p(D,me):(Oe=ir(D),Oe.c(),Oe.m(e,Ue)):Oe&&(Oe.d(1),Oe=null),(Dn=D[5].browse)!=null&&Dn.current_milestone?Ne?Ne.p(D,me):(Ne=ar(D),Ne.c(),Ne.m(e,ft)):Ne&&(Ne.d(1),Ne=null),D[5].pipeline?ke?(ke.p(wn(D),me),me&32&&m(ke,1)):(ke=fr(wn(D)),ke.c(),m(ke,1),ke.m(e,ut)):ke&&(_e(),g(ke,1,1,()=>{ke=null}),ge());const rn={};me&4096&&(rn.$$scope={dirty:me,ctx:D}),De.$set(rn);const Nn={};me&4096&&(Nn.$$scope={dirty:me,ctx:D}),xe.$set(Nn)},i(D){ze||(m(ve),m(ke),m(De.$$.fragment,D),m(xe.$$.fragment,D),ze=!0)},o(D){g(ve),g(ke),g(De.$$.fragment,D),g(xe.$$.fragment,D),ze=!1},d(D){D&&h(e),Ie&&Ie.d(),Me&&Me.d(),ve&&ve.d(),je&&je.d(),Oe&&Oe.d(),Ne&&Ne.d(),ke&&ke.d(),k(De),k(xe),o[9](null)}}}function A$(o){let e=o[1],n,t,l=$r(o);return{c(){l.c(),n=be()},m(r,s){l.m(r,s),d(r,n,s),t=!0},p(r,[s]){s&2&&V(e,e=r[1])?(_e(),g(l,1,1,Q),ge(),l=$r(r),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(r,s)},i(r){t||(m(l),t=!0)},o(r){g(l),t=!1},d(r){r&&h(n),l.d(r)}}}function ct(o,e){return e?o.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):o}function R$(o,e,n){let t,l;Y(o,$n,w=>n(10,l=w));let{description:r}=e,{props:s}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,u;Qr(()=>{u&&n(4,u.scrollTop=0,u)});function c(){let w={type:"FeatureCollection",features:f.features.filter(L=>L.properties.scheme_reference==t.scheme_reference)};l==null||l.fitBounds(Or(w),{padding:20,animate:!1})}function $(){var I;let w={type:"FeatureCollection",features:f.features.filter(P=>P.properties.scheme_reference==t.scheme_reference),schemes:{}};w.schemes[t.scheme_reference]=t;let L=(I=t.browse)==null?void 0:I.authority_or_region;if(!L){window.alert("This scheme has no authority specified, you can't edit this");return}let y=t.pipeline?"pipeline":"v1",M=`browse_copy_${t.scheme_reference}`;eo(no(L,M),JSON.stringify(to(L,w))),window.open(lo(L,M,y),"_blank")}function _(w){E[w?"unshift":"push"](()=>{u=w,n(4,u)})}return o.$$set=w=>{"description"in w&&n(0,r=w.description),"props"in w&&n(1,s=w.props),"schemesGj"in w&&n(8,f=w.schemesGj),"filterSchemeText"in w&&n(2,i=w.filterSchemeText),"filterInterventionText"in w&&n(3,a=w.filterInterventionText)},o.$$.update=()=>{o.$$.dirty&258&&n(5,t=f.schemes[s.scheme_reference])},[r,s,i,a,u,t,c,$,f,_]}class On extends K{constructor(e){super(),X(this,e,R$,A$,V,{description:0,props:1,schemesGj:8,filterSchemeText:2,filterInterventionText:3})}}function D$(o){let e,n=o[10].name+"",t;return{c(){e=S("p"),t=T(n)},m(l,r){d(l,e,r),p(e,t)},p(l,r){r&1024&&n!==(n=l[10].name+"")&&q(t,n)},d(l){l&&h(e)}}}function G$(o){let e,n;return e=new On({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&2&&(r.description=t[1]),l&1024&&(r.props=t[10]),l&8&&(r.schemesGj=t[3]),l&16&&(r.filterSchemeText=t[4]),l&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function F$(o){let e,n,t,l;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[D$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[G$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),n=C(),b(t.$$.fragment)},m(r,s){v(e,r,s),d(r,n,s),v(t,r,s),l=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){l||(m(e.$$.fragment,r),m(t.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),l=!1},d(r){r&&h(n),k(e,r),k(t,r)}}}function q$(o){let e,n=o[10].name+"",t;return{c(){e=S("p"),t=T(n)},m(l,r){d(l,e,r),p(e,t)},p(l,r){r&1024&&n!==(n=l[10].name+"")&&q(t,n)},d(l){l&&h(e)}}}function z$(o){let e,n;return e=new On({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&2&&(r.description=t[1]),l&1024&&(r.props=t[10]),l&8&&(r.schemesGj=t[3]),l&16&&(r.filterSchemeText=t[4]),l&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function H$(o){let e,n,t,l;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[q$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[z$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),n=C(),b(t.$$.fragment)},m(r,s){v(e,r,s),d(r,n,s),v(t,r,s),l=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){l||(m(e.$$.fragment,r),m(t.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),l=!1},d(r){r&&h(n),k(e,r),k(t,r)}}}function B$(o){let e,n=o[10].name+"",t;return{c(){e=S("p"),t=T(n)},m(l,r){d(l,e,r),p(e,t)},p(l,r){r&1024&&n!==(n=l[10].name+"")&&q(t,n)},d(l){l&&h(e)}}}function E$(o){let e,n;return e=new On({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&2&&(r.description=t[1]),l&1024&&(r.props=t[10]),l&8&&(r.schemesGj=t[3]),l&16&&(r.filterSchemeText=t[4]),l&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function U$(o){let e,n,t,l;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[B$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[E$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),n=C(),b(t.$$.fragment)},m(r,s){v(e,r,s),d(r,n,s),v(t,r,s),l=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){l||(m(e.$$.fragment,r),m(t.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),l=!1},d(r){r&&h(n),k(e,r),k(t,r)}}}function W$(o){let e,n,t,l,r,s,f,i,a,u;const c=[H(`${o[0]}-interventions-points`),{filter:["all",En,o[8],o[9]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":o[6],"circle-radius":zn,"circle-opacity":ee(1,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let $={$$slots:{default:[F$]},$$scope:{ctx:o}};for(let O=0;O<c.length;O+=1)$=te($,c[O]);e=new Ht({props:$});const _=[H(`${o[0]}-interventions-lines`),{filter:["all",Un,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[6],"line-width":Jt,"line-opacity":ee(1,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let w={$$slots:{default:[H$]},$$scope:{ctx:o}};for(let O=0;O<_.length;O+=1)w=te(w,_[O]);t=new he({props:w});const L=[H(`${o[0]}-interventions-lines-endpoints`),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Jt,"circle-opacity":0,"circle-stroke-color":tt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:o[2]?"visible":"none"}}];let y={};for(let O=0;O<L.length;O+=1)y=te(y,L[O]);r=new Ht({props:y});const M=[H(`${o[0]}-interventions-polygons`),{filter:["all",on,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":o[6],"fill-opacity":ee(.2,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let I={$$slots:{default:[U$]},$$scope:{ctx:o}};for(let O=0;O<M.length;O+=1)I=te(I,M[O]);f=new qe({props:I});const P=[H(`${o[0]}-interventions-polygons-outlines`),{filter:["all",on,o[8]]},{paint:{"line-color":o[6],"line-opacity":.5,"line-width":.7*Jt}},{layout:{visibility:o[2]?"visible":"none"}}];let N={};for(let O=0;O<P.length;O+=1)N=te(N,P[O]);return a=new he({props:N}),{c(){b(e.$$.fragment),n=C(),b(t.$$.fragment),l=C(),b(r.$$.fragment),s=C(),b(f.$$.fragment),i=C(),b(a.$$.fragment)},m(O,j){v(e,O,j),d(O,n,j),v(t,O,j),d(O,l,j),v(r,O,j),d(O,s,j),v(f,O,j),d(O,i,j),v(a,O,j),u=!0},p(O,j){const A=j&837?le(c,[j&1&&oe(H(`${O[0]}-interventions-points`)),j&768&&{filter:["all",En,O[8],O[9]]},c[2],c[3],j&64&&{paint:{"circle-color":O[6],"circle-radius":zn,"circle-opacity":ee(1,.5)}},j&4&&{layout:{visibility:O[2]?"visible":"none"}},c[6]]):{};j&2106&&(A.$$scope={dirty:j,ctx:O}),e.$set(A);const R=j&325?le(_,[j&1&&oe(H(`${O[0]}-interventions-lines`)),j&256&&{filter:["all",Un,O[8]]},_[2],_[3],j&64&&{paint:{"line-color":O[6],"line-width":Jt,"line-opacity":ee(1,.5)}},j&4&&{layout:{visibility:O[2]?"visible":"none"}},_[6]]):{};j&2106&&(R.$$scope={dirty:j,ctx:O}),t.$set(R);const z=j&5?le(L,[j&1&&oe(H(`${O[0]}-interventions-lines-endpoints`)),L[1],L[2],j&4&&{layout:{visibility:O[2]?"visible":"none"}}]):{};r.$set(z);const J=j&325?le(M,[j&1&&oe(H(`${O[0]}-interventions-polygons`)),j&256&&{filter:["all",on,O[8]]},M[2],M[3],j&64&&{paint:{"fill-color":O[6],"fill-opacity":ee(.2,.5)}},j&4&&{layout:{visibility:O[2]?"visible":"none"}},M[6]]):{};j&2106&&(J.$$scope={dirty:j,ctx:O}),f.$set(J);const ie=j&325?le(P,[j&1&&oe(H(`${O[0]}-interventions-polygons-outlines`)),j&256&&{filter:["all",on,O[8]]},j&64&&{paint:{"line-color":O[6],"line-opacity":.5,"line-width":.7*Jt}},j&4&&{layout:{visibility:O[2]?"visible":"none"}}]):{};a.$set(ie)},i(O){u||(m(e.$$.fragment,O),m(t.$$.fragment,O),m(r.$$.fragment,O),m(f.$$.fragment,O),m(a.$$.fragment,O),u=!0)},o(O){g(e.$$.fragment,O),g(t.$$.fragment,O),g(r.$$.fragment,O),g(f.$$.fragment,O),g(a.$$.fragment,O),u=!1},d(O){O&&(h(n),h(l),h(s),h(i)),k(e,O),k(t,O),k(r,O),k(f,O),k(a,O)}}}function Y$(o){let e,n;return e=new Bt({props:{data:o[7],$$slots:{default:[W$]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const r={};l&128&&(r.data=t[7]),l&2175&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function J$(o,e,n){let t,{name:l}=e,{description:r}=e,{show:s}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,{color:u}=e;const c=["!=",["get","hide_while_editing"],!0],$=["!=",["get","endpoint"],!0];return o.$$set=_=>{"name"in _&&n(0,l=_.name),"description"in _&&n(1,r=_.description),"show"in _&&n(2,s=_.show),"schemesGj"in _&&n(3,f=_.schemesGj),"filterSchemeText"in _&&n(4,i=_.filterSchemeText),"filterInterventionText"in _&&n(5,a=_.filterInterventionText),"color"in _&&n(6,u=_.color)},o.$$.update=()=>{o.$$.dirty&8&&n(7,t=co(f))},[l,r,s,f,i,a,u,t,c,$]}class sn extends K{constructor(e){super(),X(this,e,J$,Y$,V,{name:0,description:1,show:2,schemesGj:3,filterSchemeText:4,filterInterventionText:5,color:6})}}function V$(o){return nt(["get","intervention_type"],{area:tt.area,route:tt.route,crossing:tt.crossing,other:tt.other},"white")}function Q$(o){return[["Areas",tt.area],["Routes",tt.route],["Crossings",tt.crossing],["Other",tt.other]]}function mr(o,e,n){const t=o.slice();return t[56]=e[n],t}function _r(o,e,n){const t=o.slice();return t[56]=e[n],t}function gr(o,e,n){const t=o.slice();return t[56]=e[n],t}function dr(o,e,n){const t=o.slice();return t[56]=e[n],t}function Z$(o){let e,n;return e=new a$({props:{loadFile:o[33]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:Q,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function hr(o){let e,n,t;function l(s){o[39](s)}let r={name:zr,title:Hr,$$slots:{controls:[X$],help:[K$]},$$scope:{ctx:o}};return o[16]!==void 0&&(r.show=o[16]),e=new fe({props:r}),E.push(()=>U(e,"show",l)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f[0]&919553|f[2]&8&&(i.$$scope={dirty:f,ctx:s}),!n&&f[0]&65536&&(n=!0,i.show=s[16],W(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function wr(o){let e,n,t=o[56]+"",l;return{c(){e=S("li"),n=S("p"),l=T(t)},m(r,s){d(r,e,s),p(e,n),p(n,l)},p(r,s){s[0]&131072&&t!==(t=r[56]+"")&&q(l,t)},d(r){r&&h(e)}}}function K$(o){let e,n,t,l,r,s,f;t=new mn({props:{text:"Scheme data caveats"}});let i=$e(o[17].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=wr(dr(o,i,u));return{c(){e=S("span"),n=S("p"),b(t.$$.fragment),l=T(`Please note there are data
            quality caveats for all scheme data:`),r=C(),s=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();F(e,"slot","help")},m(u,c){d(u,e,c),p(e,n),v(t,n,null),p(n,l),p(e,r),p(e,s);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(s,null);f=!0},p(u,c){if(c[0]&131072){i=$e(u[17].notes??[]);let $;for($=0;$<i.length;$+=1){const _=dr(u,i,$);a[$]?a[$].p(_,c):(a[$]=wr(_),a[$].c(),a[$].m(s,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){g(t.$$.fragment,u),f=!1},d(u){u&&h(e),k(t),He(a,u)}}}function X$(o){let e,n,t,l,r,s,f,i,a,u,c;function $(I){o[35](I)}function _(I){o[36](I)}function w(I){o[37](I)}let L={source:"ATF"};o[17]!==void 0&&(L.schemesGj=o[17]),o[18]!==void 0&&(L.filterSchemeText=o[18]),o[19]!==void 0&&(L.filterInterventionText=o[19]),n=new _n({props:L}),E.push(()=>U(n,"schemesGj",$)),E.push(()=>U(n,"filterSchemeText",_)),E.push(()=>U(n,"filterInterventionText",w));function y(I){o[38](I)}let M={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return o[0]!==void 0&&(M.value=o[0]),f=new st({props:M}),E.push(()=>U(f,"value",y)),u=new Et({props:{rows:o[11]}}),{c(){e=S("div"),b(n.$$.fragment),s=C(),b(f.$$.fragment),a=C(),b(u.$$.fragment),F(e,"slot","controls"),ne(e,"border","1px solid black"),ne(e,"padding","8px")},m(I,P){d(I,e,P),v(n,e,null),p(e,s),v(f,e,null),p(e,a),v(u,e,null),c=!0},p(I,P){const N={};!t&&P[0]&131072&&(t=!0,N.schemesGj=I[17],W(()=>t=!1)),!l&&P[0]&262144&&(l=!0,N.filterSchemeText=I[18],W(()=>l=!1)),!r&&P[0]&524288&&(r=!0,N.filterInterventionText=I[19],W(()=>r=!1)),n.$set(N);const O={};!i&&P[0]&1&&(i=!0,O.value=I[0],W(()=>i=!1)),f.$set(O);const j={};P[0]&2048&&(j.rows=I[11]),u.$set(j)},i(I){c||(m(n.$$.fragment,I),m(f.$$.fragment,I),m(u.$$.fragment,I),c=!0)},o(I){g(n.$$.fragment,I),g(f.$$.fragment,I),g(u.$$.fragment,I),c=!1},d(I){I&&h(e),k(n),k(f),k(u)}}}function br(o){let e,n,t;function l(s){o[44](s)}let r={name:Br,title:Er,$$slots:{controls:[em],help:[x$]},$$scope:{ctx:o}};return o[15]!==void 0&&(r.show=o[15]),e=new fe({props:r}),E.push(()=>U(e,"show",l)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f[0]&7340546|f[2]&8&&(i.$$scope={dirty:f,ctx:s}),!n&&f[0]&32768&&(n=!0,i.show=s[15],W(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function vr(o){let e,n,t=o[56]+"",l;return{c(){e=S("li"),n=S("p"),l=T(t)},m(r,s){d(r,e,s),p(e,n),p(n,l)},p(r,s){s[0]&1048576&&t!==(t=r[56]+"")&&q(l,t)},d(r){r&&h(e)}}}function x$(o){let e,n,t,l,r,s,f;t=new mn({props:{text:"Scheme data caveats"}});let i=$e(o[20].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=vr(gr(o,i,u));return{c(){e=S("span"),n=S("p"),b(t.$$.fragment),l=T(`Please note there are data
            quality caveats for all scheme data:`),r=C(),s=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();F(e,"slot","help")},m(u,c){d(u,e,c),p(e,n),v(t,n,null),p(n,l),p(e,r),p(e,s);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(s,null);f=!0},p(u,c){if(c[0]&1048576){i=$e(u[20].notes??[]);let $;for($=0;$<i.length;$+=1){const _=gr(u,i,$);a[$]?a[$].p(_,c):(a[$]=vr(_),a[$].c(),a[$].m(s,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){g(t.$$.fragment,u),f=!1},d(u){u&&h(e),k(t),He(a,u)}}}function em(o){let e,n,t,l,r,s,f,i,a,u,c;function $(I){o[40](I)}function _(I){o[41](I)}function w(I){o[42](I)}let L={source:"LCWIP"};o[20]!==void 0&&(L.schemesGj=o[20]),o[21]!==void 0&&(L.filterSchemeText=o[21]),o[22]!==void 0&&(L.filterInterventionText=o[22]),n=new _n({props:L}),E.push(()=>U(n,"schemesGj",$)),E.push(()=>U(n,"filterSchemeText",_)),E.push(()=>U(n,"filterInterventionText",w));function y(I){o[43](I)}let M={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return o[1]!==void 0&&(M.value=o[1]),f=new st({props:M}),E.push(()=>U(f,"value",y)),u=new Et({props:{rows:o[9]}}),{c(){e=S("div"),b(n.$$.fragment),s=C(),b(f.$$.fragment),a=C(),b(u.$$.fragment),F(e,"slot","controls"),ne(e,"border","1px solid black"),ne(e,"padding","8px")},m(I,P){d(I,e,P),v(n,e,null),p(e,s),v(f,e,null),p(e,a),v(u,e,null),c=!0},p(I,P){const N={};!t&&P[0]&1048576&&(t=!0,N.schemesGj=I[20],W(()=>t=!1)),!l&&P[0]&2097152&&(l=!0,N.filterSchemeText=I[21],W(()=>l=!1)),!r&&P[0]&4194304&&(r=!0,N.filterInterventionText=I[22],W(()=>r=!1)),n.$set(N);const O={};!i&&P[0]&2&&(i=!0,O.value=I[1],W(()=>i=!1)),f.$set(O);const j={};P[0]&512&&(j.rows=I[9]),u.$set(j)},i(I){c||(m(n.$$.fragment,I),m(f.$$.fragment,I),m(u.$$.fragment,I),c=!0)},o(I){g(n.$$.fragment,I),g(f.$$.fragment,I),g(u.$$.fragment,I),c=!1},d(I){I&&h(e),k(n),k(f),k(u)}}}function tm(o){let e=Object.entries(o[17].schemes).length>0,n,t=Object.entries(o[20].schemes).length>0,l,r,s=e&&hr(o),f=t&&br(o);return{c(){s&&s.c(),n=C(),f&&f.c(),l=be()},m(i,a){s&&s.m(i,a),d(i,n,a),f&&f.m(i,a),d(i,l,a),r=!0},p(i,a){a[0]&131072&&(e=Object.entries(i[17].schemes).length>0),e?s?(s.p(i,a),a[0]&131072&&m(s,1)):(s=hr(i),s.c(),m(s,1),s.m(n.parentNode,n)):s&&(_e(),g(s,1,1,()=>{s=null}),ge()),a[0]&1048576&&(t=Object.entries(i[20].schemes).length>0),t?f?(f.p(i,a),a[0]&1048576&&m(f,1)):(f=br(i),f.c(),m(f,1),f.m(l.parentNode,l)):f&&(_e(),g(f,1,1,()=>{f=null}),ge())},i(i){r||(m(s),m(f),r=!0)},o(i){g(s),g(f),r=!1},d(i){i&&(h(n),h(l)),s&&s.d(i),f&&f.d(i)}}}function nm(o){let e;return{c(){e=T("Show your sketches")},m(n,t){d(n,e,t)},d(n){n&&h(e)}}}function kr(o){let e,n,t;function l(s){o[49](s)}let r={name:Ur,title:Wr,$$slots:{controls:[rm],help:[lm]},$$scope:{ctx:o}};return o[14]!==void 0&&(r.show=o[14]),e=new fe({props:r}),E.push(()=>U(e,"show",l)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f[0]&58720388|f[2]&8&&(i.$$scope={dirty:f,ctx:s}),!n&&f[0]&16384&&(n=!0,i.show=s[14],W(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function yr(o){let e,n,t=o[56]+"",l;return{c(){e=S("li"),n=S("p"),l=T(t)},m(r,s){d(r,e,s),p(e,n),p(n,l)},p(r,s){s[0]&8388608&&t!==(t=r[56]+"")&&q(l,t)},d(r){r&&h(e)}}}function lm(o){let e,n,t,l,r,s,f;t=new mn({props:{text:"Scheme data caveats"}});let i=$e(o[23].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=yr(_r(o,i,u));return{c(){e=S("span"),n=S("p"),b(t.$$.fragment),l=T(`Please note there are data
            quality caveats for all scheme data:`),r=C(),s=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();F(e,"slot","help")},m(u,c){d(u,e,c),p(e,n),v(t,n,null),p(n,l),p(e,r),p(e,s);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(s,null);f=!0},p(u,c){if(c[0]&8388608){i=$e(u[23].notes??[]);let $;for($=0;$<i.length;$+=1){const _=_r(u,i,$);a[$]?a[$].p(_,c):(a[$]=yr(_),a[$].c(),a[$].m(s,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){g(t.$$.fragment,u),f=!1},d(u){u&&h(e),k(t),He(a,u)}}}function rm(o){let e,n,t,l,r,s,f,i,a,u,c;function $(I){o[45](I)}function _(I){o[46](I)}function w(I){o[47](I)}let L={source:"ATF"};o[23]!==void 0&&(L.schemesGj=o[23]),o[24]!==void 0&&(L.filterSchemeText=o[24]),o[25]!==void 0&&(L.filterInterventionText=o[25]),n=new _n({props:L}),E.push(()=>U(n,"schemesGj",$)),E.push(()=>U(n,"filterSchemeText",_)),E.push(()=>U(n,"filterInterventionText",w));function y(I){o[48](I)}let M={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return o[2]!==void 0&&(M.value=o[2]),f=new st({props:M}),E.push(()=>U(f,"value",y)),u=new Et({props:{rows:o[7]}}),{c(){e=S("div"),b(n.$$.fragment),s=C(),b(f.$$.fragment),a=C(),b(u.$$.fragment),F(e,"slot","controls"),ne(e,"border","1px solid black"),ne(e,"padding","8px")},m(I,P){d(I,e,P),v(n,e,null),p(e,s),v(f,e,null),p(e,a),v(u,e,null),c=!0},p(I,P){const N={};!t&&P[0]&8388608&&(t=!0,N.schemesGj=I[23],W(()=>t=!1)),!l&&P[0]&16777216&&(l=!0,N.filterSchemeText=I[24],W(()=>l=!1)),!r&&P[0]&33554432&&(r=!0,N.filterInterventionText=I[25],W(()=>r=!1)),n.$set(N);const O={};!i&&P[0]&4&&(i=!0,O.value=I[2],W(()=>i=!1)),f.$set(O);const j={};P[0]&128&&(j.rows=I[7]),u.$set(j)},i(I){c||(m(n.$$.fragment,I),m(f.$$.fragment,I),m(u.$$.fragment,I),c=!0)},o(I){g(n.$$.fragment,I),g(f.$$.fragment,I),g(u.$$.fragment,I),c=!1},d(I){I&&h(e),k(n),k(f),k(u)}}}function Sr(o){let e,n,t;function l(s){o[54](s)}let r={name:Yr,title:Jr,$$slots:{controls:[sm],help:[om]},$$scope:{ctx:o}};return o[13]!==void 0&&(r.show=o[13]),e=new fe({props:r}),E.push(()=>U(e,"show",l)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f[0]&469762088|f[2]&8&&(i.$$scope={dirty:f,ctx:s}),!n&&f[0]&8192&&(n=!0,i.show=s[13],W(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function Tr(o){let e,n,t=o[56]+"",l;return{c(){e=S("li"),n=S("p"),l=T(t)},m(r,s){d(r,e,s),p(e,n),p(n,l)},p(r,s){s[0]&67108864&&t!==(t=r[56]+"")&&q(l,t)},d(r){r&&h(e)}}}function om(o){let e,n,t,l,r,s,f;t=new mn({props:{text:"Scheme data caveats"}});let i=$e(o[26].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Tr(mr(o,i,u));return{c(){e=S("span"),n=S("p"),b(t.$$.fragment),l=T(`Please note there are data
            quality caveats for all scheme data:`),r=C(),s=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();F(e,"slot","help")},m(u,c){d(u,e,c),p(e,n),v(t,n,null),p(n,l),p(e,r),p(e,s);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(s,null);f=!0},p(u,c){if(c[0]&67108864){i=$e(u[26].notes??[]);let $;for($=0;$<i.length;$+=1){const _=mr(u,i,$);a[$]?a[$].p(_,c):(a[$]=Tr(_),a[$].c(),a[$].m(s,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){g(t.$$.fragment,u),f=!1},d(u){u&&h(e),k(t),He(a,u)}}}function sm(o){let e,n,t,l,r,s,f,i,a,u,c;function $(I){o[50](I)}function _(I){o[51](I)}function w(I){o[52](I)}let L={source:"LCWIP"};o[26]!==void 0&&(L.schemesGj=o[26]),o[27]!==void 0&&(L.filterSchemeText=o[27]),o[28]!==void 0&&(L.filterInterventionText=o[28]),n=new _n({props:L}),E.push(()=>U(n,"schemesGj",$)),E.push(()=>U(n,"filterSchemeText",_)),E.push(()=>U(n,"filterInterventionText",w));function y(I){o[53](I)}let M={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return o[3]!==void 0&&(M.value=o[3]),f=new st({props:M}),E.push(()=>U(f,"value",y)),u=new Et({props:{rows:o[5]}}),{c(){e=S("div"),b(n.$$.fragment),s=C(),b(f.$$.fragment),a=C(),b(u.$$.fragment),F(e,"slot","controls"),ne(e,"border","1px solid black"),ne(e,"padding","8px")},m(I,P){d(I,e,P),v(n,e,null),p(e,s),v(f,e,null),p(e,a),v(u,e,null),c=!0},p(I,P){const N={};!t&&P[0]&67108864&&(t=!0,N.schemesGj=I[26],W(()=>t=!1)),!l&&P[0]&134217728&&(l=!0,N.filterSchemeText=I[27],W(()=>l=!1)),!r&&P[0]&268435456&&(r=!0,N.filterInterventionText=I[28],W(()=>r=!1)),n.$set(N);const O={};!i&&P[0]&8&&(i=!0,O.value=I[3],W(()=>i=!1)),f.$set(O);const j={};P[0]&32&&(j.rows=I[5]),u.$set(j)},i(I){c||(m(n.$$.fragment,I),m(f.$$.fragment,I),m(u.$$.fragment,I),c=!0)},o(I){g(n.$$.fragment,I),g(f.$$.fragment,I),g(u.$$.fragment,I),c=!1},d(I){I&&h(e),k(n),k(f),k(u)}}}function im(o){let e=Object.entries(o[23].schemes).length>0,n,t=Object.entries(o[26].schemes).length>0,l,r,s=e&&kr(o),f=t&&Sr(o);return{c(){s&&s.c(),n=C(),f&&f.c(),l=be()},m(i,a){s&&s.m(i,a),d(i,n,a),f&&f.m(i,a),d(i,l,a),r=!0},p(i,a){a[0]&8388608&&(e=Object.entries(i[23].schemes).length>0),e?s?(s.p(i,a),a[0]&8388608&&m(s,1)):(s=kr(i),s.c(),m(s,1),s.m(n.parentNode,n)):s&&(_e(),g(s,1,1,()=>{s=null}),ge()),a[0]&67108864&&(t=Object.entries(i[26].schemes).length>0),t?f?(f.p(i,a),a[0]&67108864&&m(f,1)):(f=Sr(i),f.c(),m(f,1),f.m(l.parentNode,l)):f&&(_e(),g(f,1,1,()=>{f=null}),ge())},i(i){r||(m(s),m(f),r=!0)},o(i){g(s),g(f),r=!1},d(i){i&&(h(n),h(l)),s&&s.d(i),f&&f.d(i)}}}function am(o){let e=jr()=="Private (development)",n,t,l,r,s,f,i,a,u,c,$,_,w,L=e&&Z$(o);return t=new Ge({props:{small:!0,$$slots:{default:[tm]},$$scope:{ctx:o}}}),r=new ro({props:{label:"Load schemes from GeoJSON",onLoad:o[33]}}),f=new oo({props:{errorMessage:o[4]}}),c=new Be({props:{$$slots:{default:[nm]},$$scope:{ctx:o}}}),c.$on("click",o[34]),_=new Ge({props:{small:!0,$$slots:{default:[im]},$$scope:{ctx:o}}}),{c(){L&&L.c(),n=C(),b(t.$$.fragment),l=C(),b(r.$$.fragment),s=C(),b(f.$$.fragment),i=C(),a=S("hr"),u=C(),b(c.$$.fragment),$=C(),b(_.$$.fragment)},m(y,M){L&&L.m(y,M),d(y,n,M),v(t,y,M),d(y,l,M),v(r,y,M),d(y,s,M),v(f,y,M),d(y,i,M),d(y,a,M),d(y,u,M),v(c,y,M),d(y,$,M),v(_,y,M),w=!0},p(y,M){e&&L.p(y,M);const I={};M[0]&8358403|M[2]&8&&(I.$$scope={dirty:M,ctx:y}),t.$set(I);const P={};M[0]&16&&(P.errorMessage=y[4]),f.$set(P);const N={};M[2]&8&&(N.$$scope={dirty:M,ctx:y}),c.$set(N);const O={};M[0]&528507052|M[2]&8&&(O.$$scope={dirty:M,ctx:y}),_.$set(O)},i(y){w||(m(L),m(t.$$.fragment,y),m(r.$$.fragment,y),m(f.$$.fragment,y),m(c.$$.fragment,y),m(_.$$.fragment,y),w=!0)},o(y){g(L),g(t.$$.fragment,y),g(r.$$.fragment,y),g(f.$$.fragment,y),g(c.$$.fragment,y),g(_.$$.fragment,y),w=!1},d(y){y&&(h(n),h(l),h(s),h(i),h(a),h(u),h($)),L&&L.d(y),k(t,y),k(r,y),k(f,y),k(c,y),k(_,y)}}}function fm(o){let e,n,t,l,r,s,f,i,a,u;return e=new rt({props:{label:"Schemes",open:!0,$$slots:{default:[am]},$$scope:{ctx:o}}}),t=new sn({props:{name:"main_atf",description:Hr,show:o[16],schemesGj:o[17],filterSchemeText:o[18],filterInterventionText:o[19],color:o[12]}}),r=new sn({props:{name:"main_lcwip",description:Er,show:o[15],schemesGj:o[20],filterSchemeText:o[21],filterInterventionText:o[22],color:o[10]}}),f=new sn({props:{name:"local_atf",description:Wr,show:o[14],schemesGj:o[23],filterSchemeText:o[24],filterInterventionText:o[25],color:o[8]}}),a=new sn({props:{name:"local_lcwip",description:Jr,show:o[13],schemesGj:o[26],filterSchemeText:o[27],filterInterventionText:o[28],color:o[6]}}),{c(){b(e.$$.fragment),n=C(),b(t.$$.fragment),l=C(),b(r.$$.fragment),s=C(),b(f.$$.fragment),i=C(),b(a.$$.fragment)},m(c,$){v(e,c,$),d(c,n,$),v(t,c,$),d(c,l,$),v(r,c,$),d(c,s,$),v(f,c,$),d(c,i,$),v(a,c,$),u=!0},p(c,$){const _={};$[0]&536865471|$[2]&8&&(_.$$scope={dirty:$,ctx:c}),e.$set(_);const w={};$[0]&65536&&(w.show=c[16]),$[0]&131072&&(w.schemesGj=c[17]),$[0]&262144&&(w.filterSchemeText=c[18]),$[0]&524288&&(w.filterInterventionText=c[19]),$[0]&4096&&(w.color=c[12]),t.$set(w);const L={};$[0]&32768&&(L.show=c[15]),$[0]&1048576&&(L.schemesGj=c[20]),$[0]&2097152&&(L.filterSchemeText=c[21]),$[0]&4194304&&(L.filterInterventionText=c[22]),$[0]&1024&&(L.color=c[10]),r.$set(L);const y={};$[0]&16384&&(y.show=c[14]),$[0]&8388608&&(y.schemesGj=c[23]),$[0]&16777216&&(y.filterSchemeText=c[24]),$[0]&33554432&&(y.filterInterventionText=c[25]),$[0]&256&&(y.color=c[8]),f.$set(y);const M={};$[0]&8192&&(M.show=c[13]),$[0]&67108864&&(M.schemesGj=c[26]),$[0]&134217728&&(M.filterSchemeText=c[27]),$[0]&268435456&&(M.filterInterventionText=c[28]),$[0]&64&&(M.color=c[6]),a.$set(M)},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(r.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(r.$$.fragment,c),g(f.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&(h(n),h(l),h(s),h(i)),k(e,c),k(t,c),k(r,c),k(f,c),k(a,c)}}}let zr="main_atf_schemes",Hr="ATF schemes",Br="main_lcwip_schemes",Er="LCWIP schemes",Ur="local_atf_schemes",Wr="Your ATF schemes",Yr="local_lcwip_schemes",Jr="Your LCWIP schemes";function um(o,e,n){let t,l,r,s,f,i,a,u,c,$,_,w,L,y,M,I,P,N,O,j,A,R,z,J;Y(o,an,D=>n(17,L=D)),Y(o,Fl,D=>n(18,y=D)),Y(o,Gl,D=>n(19,M=D)),Y(o,gn,D=>n(20,I=D)),Y(o,zl,D=>n(21,P=D)),Y(o,ql,D=>n(22,N=D)),Y(o,dn,D=>n(23,O=D)),Y(o,Bl,D=>n(24,j=D)),Y(o,Hl,D=>n(25,A=D)),Y(o,hn,D=>n(26,R=D)),Y(o,Ul,D=>n(27,z=D)),Y(o,El,D=>n(28,J=D));let ie="",G=ue(zr);Y(o,G,D=>n(16,w=D));let Z="fundingProgramme",B=ue(Br);Y(o,B,D=>n(15,_=D));let se="interventionType",ye=ue(Ur);Y(o,ye,D=>n(14,$=D));let Re="fundingProgramme",Le=ue(Yr);Y(o,Le,D=>n(13,c=D));let Ce="interventionType";function it(D,me){try{Pl(JSON.parse(me),an,gn),pt(G,w=!0,w),pt(B,_=!0,_),n(4,ie="")}catch(rn){n(4,ie=`The file you loaded is broken: ${rn}`)}}function at(){Pl(u$(),dn,hn),pt(ye,$=!0,$),pt(Le,c=!0,c)}function Xe(D){return D=="interventionType"?[V$(),Q$()]:D=="fundingProgramme"?[nt(["get","funding_programme"],Yt,"grey"),Object.entries(Yt)]:D=="currentMilestone"?[nt(["get","current_milestone"],Tn,"grey"),Object.entries(Tn)]:["red",[]]}function we(D){L=D,an.set(L)}function Ae(D){y=D,Fl.set(y)}function Ue(D){M=D,Gl.set(M)}function ft(D){Z=D,n(0,Z)}function ut(D){w=D,G.set(w)}function De(D){I=D,gn.set(I)}function xt(D){P=D,zl.set(P)}function xe(D){N=D,ql.set(N)}function ze(D){se=D,n(1,se)}function Ie(D){_=D,B.set(_)}function Me(D){O=D,dn.set(O)}function ve(D){j=D,Bl.set(j)}function je(D){A=D,Hl.set(A)}function Oe(D){Re=D,n(2,Re)}function Ne(D){$=D,ye.set($)}function ke(D){R=D,hn.set(R)}function en(D){z=D,Ul.set(z)}function tn(D){J=D,El.set(J)}function nn(D){Ce=D,n(3,Ce)}function ln(D){c=D,Le.set(c)}return o.$$.update=()=>{o.$$.dirty[0]&1&&n(12,[t,l]=Xe(Z),t,(n(11,l),n(0,Z))),o.$$.dirty[0]&2&&n(10,[r,s]=Xe(se),r,(n(9,s),n(1,se))),o.$$.dirty[0]&4&&n(8,[f,i]=Xe(Re),f,(n(7,i),n(2,Re))),o.$$.dirty[0]&8&&n(6,[a,u]=Xe(Ce),a,(n(5,u),n(3,Ce)))},[Z,se,Re,Ce,ie,u,a,i,f,s,r,l,t,c,$,_,w,L,y,M,I,P,N,O,j,A,R,z,J,G,B,ye,Le,it,at,we,Ae,Ue,ft,ut,De,xt,xe,ze,Ie,Me,ve,je,Oe,Ne,ke,en,tn,nn,ln]}class cm extends K{constructor(e){super(),X(this,e,um,fm,V,{},null,[-1,-1,-1])}}const Lr=Se(!0);let Ln=Se(null);function pm(o){let e,n,t,l,r,s,f,i;return e=new Dc({}),t=new Yc({}),r=new mp({}),f=new lp({}),{c(){b(e.$$.fragment),n=C(),b(t.$$.fragment),l=C(),b(r.$$.fragment),s=C(),b(f.$$.fragment)},m(a,u){v(e,a,u),d(a,n,u),v(t,a,u),d(a,l,u),v(r,a,u),d(a,s,u),v(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(r.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&(h(n),h(l),h(s)),k(e,a),k(t,a),k(r,a),k(f,a)}}}function $m(o){let e,n;return e=new Ge({props:{small:!0,$$slots:{default:[pm]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&256&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function mm(o){let e,n,t,l,r,s,f,i,a,u,c,$;return e=new Ka({}),t=new If({}),r=new af({}),f=new hf({}),a=new kc({}),c=new tc({}),{c(){b(e.$$.fragment),n=C(),b(t.$$.fragment),l=C(),b(r.$$.fragment),s=C(),b(f.$$.fragment),i=C(),b(a.$$.fragment),u=C(),b(c.$$.fragment)},m(_,w){v(e,_,w),d(_,n,w),v(t,_,w),d(_,l,w),v(r,_,w),d(_,s,w),v(f,_,w),d(_,i,w),v(a,_,w),d(_,u,w),v(c,_,w),$=!0},i(_){$||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(r.$$.fragment,_),m(f.$$.fragment,_),m(a.$$.fragment,_),m(c.$$.fragment,_),$=!0)},o(_){g(e.$$.fragment,_),g(t.$$.fragment,_),g(r.$$.fragment,_),g(f.$$.fragment,_),g(a.$$.fragment,_),g(c.$$.fragment,_),$=!1},d(_){_&&(h(n),h(l),h(s),h(i),h(u)),k(e,_),k(t,_),k(r,_),k(f,_),k(a,_),k(c,_)}}}function _m(o){let e,n;return e=new Ge({props:{small:!0,$$slots:{default:[mm]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&256&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function gm(o){let e,n,t,l,r,s;return e=new Ga({}),t=new Au({}),r=new Uu({}),{c(){b(e.$$.fragment),n=C(),b(t.$$.fragment),l=C(),b(r.$$.fragment)},m(f,i){v(e,f,i),d(f,n,i),v(t,f,i),d(f,l,i),v(r,f,i),s=!0},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(r.$$.fragment,f),s=!1},d(f){f&&(h(n),h(l)),k(e,f),k(t,f),k(r,f)}}}function dm(o){let e,n;return e=new Ge({props:{small:!0,$$slots:{default:[gm]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&256&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function hm(o){let e,n,t,l,r,s,f,i,a,u;return e=new Yi({}),t=new ya({}),r=new xs({}),f=new vi({}),a=new Ri({}),{c(){b(e.$$.fragment),n=C(),b(t.$$.fragment),l=C(),b(r.$$.fragment),s=C(),b(f.$$.fragment),i=C(),b(a.$$.fragment)},m(c,$){v(e,c,$),d(c,n,$),v(t,c,$),d(c,l,$),v(r,c,$),d(c,s,$),v(f,c,$),d(c,i,$),v(a,c,$),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(r.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(r.$$.fragment,c),g(f.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&(h(n),h(l),h(s),h(i)),k(e,c),k(t,c),k(r,c),k(f,c),k(a,c)}}}function wm(o){let e,n;return e=new Ge({props:{small:!0,$$slots:{default:[hm]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&256&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function bm(o){let e,n,t,l;return e=new Bs({}),t=new ui({}),{c(){b(e.$$.fragment),n=C(),b(t.$$.fragment)},m(r,s){v(e,r,s),d(r,n,s),v(t,r,s),l=!0},i(r){l||(m(e.$$.fragment,r),m(t.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),l=!1},d(r){r&&h(n),k(e,r),k(t,r)}}}function vm(o){let e,n;return e=new Ge({props:{small:!0,$$slots:{default:[bm]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&256&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function km(o){let e,n,t,l,r,s,f,i;return e=new Lu({}),t=new Hf({}),r=new gu({}),f=new e$({}),{c(){b(e.$$.fragment),n=C(),b(t.$$.fragment),l=C(),b(r.$$.fragment),s=C(),b(f.$$.fragment)},m(a,u){v(e,a,u),d(a,n,u),v(t,a,u),d(a,l,u),v(r,a,u),d(a,s,u),v(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(r.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&(h(n),h(l),h(s)),k(e,a),k(t,a),k(r,a),k(f,a)}}}function ym(o){let e,n,t,l,r,s,f,i,a=jr()=="Private (development)",u,c,$,_,w;e=new Up({}),t=new Np({}),r=new lu({}),f=new cc({});let L=a&&km();return c=new na({}),_=new pa({}),{c(){b(e.$$.fragment),n=C(),b(t.$$.fragment),l=C(),b(r.$$.fragment),s=C(),b(f.$$.fragment),i=C(),L&&L.c(),u=C(),b(c.$$.fragment),$=C(),b(_.$$.fragment)},m(y,M){v(e,y,M),d(y,n,M),v(t,y,M),d(y,l,M),v(r,y,M),d(y,s,M),v(f,y,M),d(y,i,M),L&&L.m(y,M),d(y,u,M),v(c,y,M),d(y,$,M),v(_,y,M),w=!0},p:Q,i(y){w||(m(e.$$.fragment,y),m(t.$$.fragment,y),m(r.$$.fragment,y),m(f.$$.fragment,y),m(L),m(c.$$.fragment,y),m(_.$$.fragment,y),w=!0)},o(y){g(e.$$.fragment,y),g(t.$$.fragment,y),g(r.$$.fragment,y),g(f.$$.fragment,y),g(L),g(c.$$.fragment,y),g(_.$$.fragment,y),w=!1},d(y){y&&(h(n),h(l),h(s),h(i),h(u),h($)),k(e,y),k(t,y),k(r,y),k(f,y),L&&L.d(y),k(c,y),k(_,y)}}}function Sm(o){let e,n;return e=new Ge({props:{small:!0,$$slots:{default:[ym]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const r={};l&256&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Tm(o){let e,n,t,l,r;function s(i){o[6](i)}let f={cfg:o[5],map:o[3]};return o[0]!==void 0&&(f.enabled=o[0]),e=new $o({props:f}),E.push(()=>U(e,"enabled",s)),l=new Xo({}),{c(){b(e.$$.fragment),t=C(),b(l.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(l,i,a),r=!0},p(i,a){const u={};a&8&&(u.map=i[3]),!n&&a&1&&(n=!0,u.enabled=i[0],W(()=>n=!1)),e.$set(u)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(l,i)}}}function Lm(o){let e,n;const t=[H("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:o[1]?"none":"visible"}}];let l={};for(let r=0;r<t.length;r+=1)l=te(l,t[r]);return e=new qe({props:l}),{c(){b(e.$$.fragment)},m(r,s){v(e,r,s),n=!0},p(r,s){const f=s&2?le(t,[t[0],t[1],{layout:{visibility:r[1]?"none":"visible"}}]):{};e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function Cm(o){let e,n,t,l,r,s,f,i,a,u,c,$,_,w,L,y,M,I,P,N,O;return n=new cm({}),l=new rt({props:{label:"Trip generators",$$slots:{default:[$m]},$$scope:{ctx:o}}}),s=new rt({props:{label:"Existing infrastructure",$$slots:{default:[_m]},$$scope:{ctx:o}}}),i=new rt({props:{label:"Public transport",$$slots:{default:[dm]},$$scope:{ctx:o}}}),u=new rt({props:{label:"Boundaries",$$slots:{default:[wm]},$$scope:{ctx:o}}}),$=new rt({props:{label:"Census",$$slots:{default:[vm]},$$scope:{ctx:o}}}),w=new rt({props:{label:"Other",$$slots:{default:[Sm]},$$scope:{ctx:o}}}),y=new rt({props:{label:"Tools",$$slots:{default:[Tm]},$$scope:{ctx:o}}}),I=new po({props:{disabled:!o[1]}}),N=new Bt({props:{data:o[4],$$slots:{default:[Lm]},$$scope:{ctx:o}}}),{c(){e=S("div"),b(n.$$.fragment),t=C(),b(l.$$.fragment),r=C(),b(s.$$.fragment),f=C(),b(i.$$.fragment),a=C(),b(u.$$.fragment),c=C(),b($.$$.fragment),_=C(),b(w.$$.fragment),L=C(),b(y.$$.fragment),M=C(),b(I.$$.fragment),P=C(),b(N.$$.fragment)},m(j,A){d(j,e,A),v(n,e,null),p(e,t),v(l,e,null),p(e,r),v(s,e,null),p(e,f),v(i,e,null),p(e,a),v(u,e,null),p(e,c),v($,e,null),p(e,_),v(w,e,null),p(e,L),v(y,e,null),p(e,M),v(I,e,null),o[7](e),d(j,P,A),v(N,j,A),O=!0},p(j,[A]){const R={};A&256&&(R.$$scope={dirty:A,ctx:j}),l.$set(R);const z={};A&256&&(z.$$scope={dirty:A,ctx:j}),s.$set(z);const J={};A&256&&(J.$$scope={dirty:A,ctx:j}),i.$set(J);const ie={};A&256&&(ie.$$scope={dirty:A,ctx:j}),u.$set(ie);const G={};A&256&&(G.$$scope={dirty:A,ctx:j}),$.$set(G);const Z={};A&256&&(Z.$$scope={dirty:A,ctx:j}),w.$set(Z);const B={};A&265&&(B.$$scope={dirty:A,ctx:j}),y.$set(B);const se={};A&2&&(se.disabled=!j[1]),I.$set(se);const ye={};A&258&&(ye.$$scope={dirty:A,ctx:j}),N.$set(ye)},i(j){O||(m(n.$$.fragment,j),m(l.$$.fragment,j),m(s.$$.fragment,j),m(i.$$.fragment,j),m(u.$$.fragment,j),m($.$$.fragment,j),m(w.$$.fragment,j),m(y.$$.fragment,j),m(I.$$.fragment,j),m(N.$$.fragment,j),O=!0)},o(j){g(n.$$.fragment,j),g(l.$$.fragment,j),g(s.$$.fragment,j),g(i.$$.fragment,j),g(u.$$.fragment,j),g($.$$.fragment,j),g(w.$$.fragment,j),g(y.$$.fragment,j),g(I.$$.fragment,j),g(N.$$.fragment,j),O=!1},d(j){j&&(h(e),h(P)),k(n),k(l),k(s),k(i),k(u),k($),k(w),k(y),k(I),o[7](null),k(N,j)}}}function Im(o,e,n){let t,l,r,s;Y(o,Lr,c=>n(1,l=c)),Y(o,Ln,c=>n(2,r=c)),Y(o,$n,c=>n(3,s=c));let f={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},i={getStreetViewRoadLayerNames:c=>io(c,Zr(vn))};function a(c){t=c,n(0,t),n(1,l)}function u(c){E[c?"unshift":"push"](()=>{r=c,Ln.set(r)})}return o.$$.update=()=>{o.$$.dirty&2&&n(0,t=!l),o.$$.dirty&1&&Lr.set(!t)},[t,l,r,s,f,i,a,u]}class Mm extends K{constructor(e){super(),X(this,e,Im,Cm,V,{})}}function jm(o){let e,n,t;return{c(){e=S("p"),e.innerHTML="<b>Selected layers</b>",n=C(),t=S("div")},m(l,r){d(l,e,r),d(l,n,r),d(l,t,r),o[3](t)},p:Q,i:Q,o:Q,d(l){l&&(h(e),h(n),h(t)),o[3](null)}}}function Om(o,e,n){if(o){o.innerHTML="";for(let t of e){let l=n.get(t);l&&(l.style.display="block",o.appendChild(l))}}}function Nm(o,e,n){let t,l;Y(o,Sn,f=>n(1,t=f)),Y(o,Vt,f=>n(2,l=f));let r=null;function s(f){E[f?"unshift":"push"](()=>{r=f,n(0,r)})}return o.$$.update=()=>{o.$$.dirty&7&&Om(r,l,t)},[r,t,l,s]}class Pm extends K{constructor(e){super(),X(this,e,Nm,jm,V,{})}}function Am(o){let e,n,t,l,r,s,f,i,a,u,c,$,_,w,L;return n=new To({}),l=new vo({}),f=new ko({}),$=new ls({props:{boundaryGeojson:o[3]}}),{c(){e=S("div"),b(n.$$.fragment),t=C(),b(l.$$.fragment),r=C(),s=S("div"),b(f.$$.fragment),i=C(),a=S("div"),u=S("h1"),u.textContent="Scheme Browser",c=C(),b($.$$.fragment),_=C(),w=S("div"),ne(s,"border-bottom","1px solid #b1b4b6"),ne(a,"display","flex"),ne(a,"justify-content","space-between"),F(e,"slot","sidebar"),F(e,"class","govuk-prose")},m(y,M){d(y,e,M),v(n,e,null),p(e,t),v(l,e,null),p(e,r),p(e,s),v(f,s,null),p(e,i),p(e,a),p(a,u),p(a,c),v($,a,null),p(e,_),p(e,w),o[6](w),L=!0},p(y,M){const I={};M&8&&(I.boundaryGeojson=y[3]),$.$set(I)},i(y){L||(m(n.$$.fragment,y),m(l.$$.fragment,y),m(f.$$.fragment,y),m($.$$.fragment,y),L=!0)},o(y){g(n.$$.fragment,y),g(l.$$.fragment,y),g(f.$$.fragment,y),g($.$$.fragment,y),L=!1},d(y){y&&h(e),k(n),k(l),k(f),k($),o[6](null)}}}function Cr(o){let e,n;return e=new Mm({}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Rm(o){let e,n,t,l;e=new mo({});let r=o[2]&&Cr();return{c(){b(e.$$.fragment),n=C(),r&&r.c(),t=be()},m(s,f){v(e,s,f),d(s,n,f),r&&r.m(s,f),d(s,t,f),l=!0},p(s,f){s[2]?r?f&4&&m(r,1):(r=Cr(),r.c(),m(r,1),r.m(t.parentNode,t)):r&&(_e(),g(r,1,1,()=>{r=null}),ge())},i(s){l||(m(e.$$.fragment,s),m(r),l=!0)},o(s){g(e.$$.fragment,s),g(r),l=!1},d(s){s&&(h(n),h(t)),k(e,s),r&&r.d(s)}}}function Dm(o){let e,n,t;return n=new yo({props:{style:o[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Rm]},$$scope:{ctx:o}}}),{c(){e=S("div"),b(n.$$.fragment),F(e,"slot","main")},m(l,r){d(l,e,r),v(n,e,null),t=!0},p(l,r){const s={};r&2&&(s.style=l[1]),r&260&&(s.$$scope={dirty:r,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&h(e),k(n)}}}function Gm(o){let e,n,t,l,r;return e=new No({props:{$$slots:{main:[Dm],sidebar:[Am]},$$scope:{ctx:o}}}),l=new Pm({}),{c(){b(e.$$.fragment),n=C(),t=S("div"),b(l.$$.fragment),F(t,"class","top-right govuk-prose svelte-u44ed2")},m(s,f){v(e,s,f),d(s,n,f),d(s,t,f),v(l,t,null),r=!0},p(s,[f]){const i={};f&271&&(i.$$scope={dirty:f,ctx:s}),e.$set(i)},i(s){r||(m(e.$$.fragment,s),m(l.$$.fragment,s),r=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),r=!1},d(s){s&&(h(n),h(t)),k(e,s),k(l)}}}function Fm(o,e,n){let t,l,r,s,f;Y(o,Ln,c=>n(4,t=c)),Y(o,$n,c=>n(5,l=c)),Y(o,vn,c=>n(1,r=c)),Y(o,Hn,c=>n(2,s=c)),Y(o,an,c=>n(3,f=c)),Mr(()=>{Kr()});const i=new URLSearchParams(window.location.search);vn.set(i.get("style")||"dataviz");let a;function u(c){E[c?"unshift":"push"](()=>{a=c,n(0,a),n(4,t)})}return o.$$.update=()=>{o.$$.dirty&32&&l&&Hn.set(l),o.$$.dirty&17&&a&&t&&(n(0,a.innerHTML="",a),a.appendChild(t))},[a,r,s,f,t,l,u]}class qm extends K{constructor(e){super(),X(this,e,Fm,Gm,V,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new qm({target:document.getElementById("app")});
