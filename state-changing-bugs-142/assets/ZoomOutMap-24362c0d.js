import{S as j,i as q,s as F,e as b,t as L,au as x,f as _,g as y,h as v,av as J,l as E,G as T,p as g,r as le,at as ne,x as R,c as M,aF as D,y as W,z as $,A as G,n as S,o as B,J as Z,K as N,O as oe,M as ae,U as I,T as ie,N as re,Y as ce,X as ue,W as fe,aB as A,Z as pe,E as de,ah as ee,ai as te,ay as H,aG as P,aq as se,d as _e,m as me,q as be,B as O,aH as ve,u as ye,b as ge,ao as he,w as we}from"./FileInput-12524b96.js";function ke(a){let e,l,t,s,n,o,r;return{c(){e=b("div"),l=L(`Basemap:
  `),t=b("select"),s=b("option"),s.textContent="Streets",n=b("option"),n.textContent="Satellite",s.__value="streets",s.value=s.__value,n.__value="hybrid",n.value=n.__value,a[0]===void 0&&x(()=>a[2].call(t)),_(e,"class","svelte-1tbnm6i")},m(c,u){y(c,e,u),v(e,l),v(e,t),v(t,s),v(t,n),J(t,a[0]),o||(r=[E(t,"change",a[2]),E(t,"change",a[1])],o=!0)},p(c,[u]){u&1&&J(t,c[0])},i:T,o:T,d(c){c&&g(e),o=!1,le(r)}}}function Ce(a,e,l){let{style:t}=e;function s(){let o=new URLSearchParams(window.location.search);o.set("style",t);let r=`${window.location.pathname}?${o.toString()}${window.location.hash}`;window.location.href=r}function n(){t=ne(this),l(0,t)}return a.$$set=o=>{"style"in o&&l(0,t=o.style)},[t,s,n]}class He extends j{constructor(e){super(),q(this,e,Ce,ke,F,{style:0})}}const Se=a=>({}),U=a=>({}),Le=a=>({}),K=a=>({});function Me(a){let e,l,t,s,n,o,r,c,u,p,m;const d=a[3].sidebar,f=R(d,a,a[2],K),C=a[3].main,w=R(C,a,a[2],U);return{c(){e=b("div"),l=b("aside"),t=b("div"),f&&f.c(),s=M(),n=b("button"),n.textContent="â†’",r=M(),c=b("main"),w&&w.c(),_(t,"class","sidebar-content content-container svelte-ect12w"),_(n,"type","button"),_(n,"class","sidebar-toggle rounded-rect svelte-ect12w"),_(l,"class",o=D(a[0]?"":"collapsed")+" svelte-ect12w"),_(c,"class","svelte-ect12w"),_(e,"class","overall-layout svelte-ect12w")},m(i,h){y(i,e,h),v(e,l),v(l,t),f&&f.m(t,null),v(l,s),v(l,n),v(e,r),v(e,c),w&&w.m(c,null),u=!0,p||(m=E(n,"click",a[1]),p=!0)},p(i,[h]){f&&f.p&&(!u||h&4)&&W(f,d,i,i[2],u?G(d,i[2],h,Le):$(i[2]),K),(!u||h&1&&o!==(o=D(i[0]?"":"collapsed")+" svelte-ect12w"))&&_(l,"class",o),w&&w.p&&(!u||h&4)&&W(w,C,i,i[2],u?G(C,i[2],h,Se):$(i[2]),U)},i(i){u||(S(f,i),S(w,i),u=!0)},o(i){B(f,i),B(w,i),u=!1},d(i){i&&g(e),f&&f.d(i),w&&w.d(i),p=!1,m()}}}function Be(a,e,l){let{$$slots:t={},$$scope:s}=e,n=!0;function o(){l(0,n=!n)}return a.$$set=r=>{"$$scope"in r&&l(2,s=r.$$scope)},[n,o,s,t]}class Ue extends j{constructor(e){super(),q(this,e,Be,Me,F,{})}}const k={area:"#e41a1c",route:"#377eb8",crossing:"#4daf4a",other:"#984ea3",preapp:"#e41a1c",outline:"#377eb8","reserved matters":"#4daf4a","local plan":"#984ea3",hovering:"black",lineEndpointColor:"black"},Oe=10,X=10;let z="interventions";function je(a,e,l){let t,s;Z(a,N,p=>l(1,t=p)),Z(a,oe,p=>l(2,s=p));let{schema:n}=e;ae(t,z,s);const o=["match",["get","intervention_type"],"area",k.area,"route",k.route,"crossing",k.crossing,"other",k.other,"white"],r=["match",["get","reference_type",["get","planning"]],"preapp",k.preapp,"outline",k.outline,"reserved matters",k["reserved matters"],"local plan",k["local plan"],"white"],c=["!=","hide_while_editing",!0];return I(t,{id:"interventions-points",source:z,filter:["all",ce,c,["!=","endpoint",!0]],color:o,radius:Oe}),ie(t,{id:"interventions-lines",source:z,filter:["all",ue,c],color:o,width:X}),I(t,{id:"interventions-lines-endpoints",source:z,filter:["==","endpoint",!0],radius:.5*X,opacity:0,strokeColor:k.lineEndpointColor,strokeWidth:2}),re(t,{id:"interventions-polygons",source:z,filter:["all",fe,c],color:n=="planning"?r:o,opacity:.5}),a.$$set=p=>{"schema"in p&&l(0,n=p.schema)},a.$$.update=()=>{if(a.$$.dirty&6){let p=JSON.parse(JSON.stringify(s)),m=[];for(let d of p.features)if(d.geometry.type=="LineString"&&!d.properties.hide_while_editing)for(let f of[d.geometry.coordinates[0],d.geometry.coordinates[d.geometry.coordinates.length-1]])m.push({type:"Feature",properties:{endpoint:!0},geometry:{type:"Point",coordinates:f}});p.features=p.features.concat(m),t.getSource(z).setData(p)}},[n,t,s]}class Ke extends j{constructor(e){super(),q(this,e,je,null,F,{schema:0})}}function qe(a){const e=a-1;return e*e*e+1}function Y(a,{delay:e=0,duration:l=400,easing:t=qe}={}){const s=getComputedStyle(a),n=+s.opacity,o=parseFloat(s.height),r=parseFloat(s.paddingTop),c=parseFloat(s.paddingBottom),u=parseFloat(s.marginTop),p=parseFloat(s.marginBottom),m=parseFloat(s.borderTopWidth),d=parseFloat(s.borderBottomWidth);return{delay:e,duration:l,easing:t,css:f=>`overflow: hidden;opacity: ${Math.min(f*20,1)*n};height: ${f*o}px;padding-top: ${f*r}px;padding-bottom: ${f*c}px;margin-top: ${f*u}px;margin-bottom: ${f*p}px;border-top-width: ${f*m}px;border-bottom-width: ${f*d}px;`}}function Q(a){let e,l,t;const s=a[3].default,n=R(s,a,a[2],null);return{c(){e=b("div"),n&&n.c()},m(o,r){y(o,e,r),n&&n.m(e,null),t=!0},p(o,r){n&&n.p&&(!t||r&4)&&W(n,s,o,o[2],t?G(s,o[2],r,null):$(o[2]),null)},i(o){t||(S(n,o),x(()=>{l||(l=H(e,Y,{duration:100},!0)),l.run(1)}),t=!0)},o(o){B(n,o),l||(l=H(e,Y,{duration:100},!1)),l.run(0),t=!1},d(o){o&&g(e),n&&n.d(o),o&&l&&l.end()}}}function Fe(a){let e,l,t,s,n,o,r,c,u,p,m=a[0]&&Q(a);return{c(){e=b("button"),l=A("svg"),t=A("path"),s=M(),n=L(a[1]),o=M(),m&&m.c(),r=pe(),_(t,"d","M9 5l7 7-7 7"),_(l,"style","tran"),_(l,"width","20"),_(l,"height","20"),_(l,"fill","none"),_(l,"stroke-linecap","round"),_(l,"stroke-linejoin","round"),_(l,"stroke-width","2"),_(l,"viewBox","0 0 24 24"),_(l,"stroke","currentColor"),_(l,"class","svelte-una9lq"),_(e,"aria-expanded",a[0]),_(e,"class","svelte-una9lq")},m(d,f){y(d,e,f),v(e,l),v(l,t),v(e,s),v(e,n),y(d,o,f),m&&m.m(d,f),y(d,r,f),c=!0,u||(p=E(e,"click",a[4]),u=!0)},p(d,[f]){(!c||f&2)&&de(n,d[1]),(!c||f&1)&&_(e,"aria-expanded",d[0]),d[0]?m?(m.p(d,f),f&1&&S(m,1)):(m=Q(d),m.c(),S(m,1),m.m(r.parentNode,r)):m&&(ee(),B(m,1,1,()=>{m=null}),te())},i(d){c||(S(m),c=!0)},o(d){B(m),c=!1},d(d){d&&g(e),d&&g(o),m&&m.d(d),d&&g(r),u=!1,p()}}}function Te(a,e,l){let{$$slots:t={},$$scope:s}=e,{label:n}=e,{open:o=!1}=e;const r=()=>l(0,o=!o);return a.$$set=c=>{"label"in c&&l(1,n=c.label),"open"in c&&l(0,o=c.open),"$$scope"in c&&l(2,s=c.$$scope)},[o,n,s,t,r]}class ze extends j{constructor(e){super(),q(this,e,Te,Fe,F,{label:1,open:0})}}function Ee(a,e,l){let t;Z(a,N,u=>l(2,t=u));let{layers:s}=e,{contents:n}=e,o=new P.Popup({closeButton:!1,closeOnClick:!1,maxWidth:"none"});t.on("mousemove",r),t.on("mouseout",c),se(()=>{t.off("mousemove",r),t.off("mouseout",c),o.remove()});function r(u){if(!s.every(m=>t.getLayer(m))){o.remove();return}let p=t.queryRenderedFeatures(u.point,{layers:s});p.length>0?o.setLngLat(u.lngLat).setHTML(n(p[0].properties)).addTo(t):o.remove()}function c(){o.remove()}return a.$$set=u=>{"layers"in u&&l(0,s=u.layers),"contents"in u&&l(1,n=u.contents)},[s,n]}class Xe extends j{constructor(e){super(),q(this,e,Ee,null,F,{layers:0,contents:1})}}function Pe(a){let e,l,t,s,n,o,r,c,u,p,m,d,f,C,w;return{c(){e=b("li"),l=b("span"),t=L("Areas"),s=M(),n=b("li"),o=b("span"),r=L("Routes"),c=M(),u=b("li"),p=b("span"),m=L("Crossings"),d=M(),f=b("li"),C=b("span"),w=L("Other"),_(l,"class","svelte-l42ea0"),O(l,"background",k.area),_(o,"class","svelte-l42ea0"),O(o,"background",k.route),_(p,"class","svelte-l42ea0"),O(p,"background",k.crossing),_(C,"class","svelte-l42ea0"),O(C,"background",k.other)},m(i,h){y(i,e,h),v(e,l),v(e,t),y(i,s,h),y(i,n,h),v(n,o),v(n,r),y(i,c,h),y(i,u,h),v(u,p),v(u,m),y(i,d,h),y(i,f,h),v(f,C),v(f,w)},p:T,d(i){i&&g(e),i&&g(s),i&&g(n),i&&g(c),i&&g(u),i&&g(d),i&&g(f)}}}function Re(a){let e,l,t,s,n,o,r,c,u,p,m,d,f,C,w;return{c(){e=b("li"),l=b("span"),t=L("Preapp"),s=M(),n=b("li"),o=b("span"),r=L("Outline"),c=M(),u=b("li"),p=b("span"),m=L("Reserved matters"),d=M(),f=b("li"),C=b("span"),w=L("Local plan"),_(l,"class","svelte-l42ea0"),O(l,"background",k.preapp),_(o,"class","svelte-l42ea0"),O(o,"background",k.outline),_(p,"class","svelte-l42ea0"),O(p,"background",k["reserved matters"]),_(C,"class","svelte-l42ea0"),O(C,"background",k["local plan"])},m(i,h){y(i,e,h),v(e,l),v(e,t),y(i,s,h),y(i,n,h),v(n,o),v(n,r),y(i,c,h),y(i,u,h),v(u,p),v(u,m),y(i,d,h),y(i,f,h),v(f,C),v(f,w)},p:T,d(i){i&&g(e),i&&g(s),i&&g(n),i&&g(c),i&&g(u),i&&g(d),i&&g(f)}}}function We(a){let e;function l(n,o){return n[0]=="planning"?Re:Pe}let t=l(a),s=t(a);return{c(){e=b("ul"),s.c()},m(n,o){y(n,e,o),s.m(e,null)},p(n,o){t===(t=l(n))&&s?s.p(n,o):(s.d(1),s=t(n),s&&(s.c(),s.m(e,null)))},d(n){n&&g(e),s.d()}}}function $e(a){let e,l,t;return l=new ze({props:{label:"Objects",open:!0,$$slots:{default:[We]},$$scope:{ctx:a}}}),{c(){e=b("div"),_e(l.$$.fragment),_(e,"class","svelte-l42ea0")},m(s,n){y(s,e,n),me(l,e,null),t=!0},p(s,[n]){const o={};n&3&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(S(l.$$.fragment,s),t=!0)},o(s){B(l.$$.fragment,s),t=!1},d(s){s&&g(e),be(l)}}}function Ge(a,e,l){let{schema:t}=e;return a.$$set=s=>{"schema"in s&&l(0,t=s.schema)},[t]}class Ye extends j{constructor(e){super(),q(this,e,Ge,$e,F,{schema:0})}}function V(a){let e;const l=a[4].default,t=R(l,a,a[3],null);return{c(){t&&t.c()},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&8)&&W(t,l,s,s[3],e?G(l,s[3],n,null):$(s[3]),null)},i(s){e||(S(t,s),e=!0)},o(s){B(t,s),e=!1},d(s){t&&t.d(s)}}}function Ze(a){let e,l,t=a[1]&&V(a);return{c(){e=b("div"),t&&t.c(),_(e,"class","map svelte-12dpf1u")},m(s,n){y(s,e,n),t&&t.m(e,null),a[5](e),l=!0},p(s,[n]){s[1]?t?(t.p(s,n),n&2&&S(t,1)):(t=V(s),t.c(),S(t,1),t.m(e,null)):t&&(ee(),B(t,1,1,()=>{t=null}),te())},i(s){l||(S(t),l=!0)},o(s){B(t),l=!1},d(s){s&&g(e),t&&t.d(),a[5](null)}}}function Ne(a,e,l){let{$$slots:t={},$$scope:s}=e,{style:n}=e,o,r,c=!1;ve("setCamera",!window.location.hash),ye(()=>{o=new P.Map({container:r,style:`https://api.maptiler.com/maps/${n}/style.json?key=MZEJTanw3WpxRvt7qDfo`,hash:!0}),o.addControl(new P.ScaleControl({})),o.addControl(new P.NavigationControl({visualizePitch:!0}),"bottom-right"),o.on("load",()=>{l(1,c=!0),N.set(o)}),new ResizeObserver(()=>{o.resize()}).observe(r)}),se(()=>{o.remove()});function u(p){ge[p?"unshift":"push"](()=>{r=p,l(0,r)})}return a.$$set=p=>{"style"in p&&l(2,n=p.style),"$$scope"in p&&l(3,s=p.$$scope)},[r,c,n,s,t,u]}class Qe extends j{constructor(e){super(),q(this,e,Ne,Ze,F,{style:2})}}const Je="/atip/state-changing-bugs-142/assets/zoom_out_map-b2e1091a.svg";function De(a){let e,l,t,s,n;return{c(){e=b("button"),l=b("img"),he(l.src,t=Je)||_(l,"src",t),_(l,"alt","Zoom to show entire boundary"),_(e,"type","button"),_(e,"title","Zoom to show entire boundary"),_(e,"class","svelte-qzjsqo")},m(o,r){y(o,e,r),v(e,l),s||(n=E(e,"click",a[0]),s=!0)},p:T,i:T,o:T,d(o){o&&g(e),s=!1,n()}}}function Ie(a,e,l){let t;Z(a,N,o=>l(2,t=o));let{boundaryGeojson:s}=e;function n(){t.fitBounds(we(s),{padding:20,animate:!0,duration:500})}return a.$$set=o=>{"boundaryGeojson"in o&&l(1,s=o.boundaryGeojson)},[n,s]}class Ve extends j{constructor(e){super(),q(this,e,Ie,De,F,{boundaryGeojson:1})}}export{He as B,ze as C,Ke as I,Ue as L,Xe as M,Ve as Z,Oe as a,Qe as b,k as c,Ye as d,X as l,Y as s};
