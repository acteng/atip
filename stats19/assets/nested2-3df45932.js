import{S as X,i as Y,s as G,e as A,h as z,$ as ve,j as $,W as ee,o as p,aP as il,b as V,c as J,d as L,g as h,m as b,w as at,l as K,t as m,n as d,p as v,X as Dt,Y as jt,Z as Rt,_ as Bt,a7 as We,J as fe,K as ue,aQ as Lt,u as w,k,D as B,I as Ae,N as pn,O as Nr,q as _e,P as Er,Q as Fr,T as It,U as Dr,V as jr,aX as al,aY as ut,a4 as wn,aZ as fl,f as mn,aO as ul,ar as Vt,aj as Kt,ae as _n,r as gn,F as Rr,a as on,v as lt,aW as W,a_ as ge,a$ as he,B as Z,ah as Q,C as we,ak as x,b0 as ne,G as Ct,H as Br,aS as Pt,ab as kn,b1 as Zt,R as Hr,b2 as dn,E as zr,as as cl,ag as $l,aU as yn,al as pl,am as Sn,an as Cn,ao as Ut,aV as On,L as ml,M as _l,y as gl}from"./index-a7ad109c.js";import{d as Qe,j as Mt,C as Ne,f as et,h as re,l as H,c as Xt,k as dl,S as hl,B as bl,b as Ot,G as vl}from"./StreetViewTool-4c2751f7.js";import{a as Xe,F as wl}from"./Popup-0e4cca68.js";import{P as oe}from"./Popup-5e3a05dd.js";import{R as kl,C as xe,Z as yl}from"./ZoomOutMap-ca11aacc.js";import{L as Sl,a as Cl}from"./LineMeasureController-823bc1e2.js";function Ol(r){let e;return{c(){e=A("span"),z(e,"class","svelte-kzgqtg"),ve(e,"background",r[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&ve(e,"background",n[0])},i:ee,o:ee,d(n){n&&p(e)}}}function Tl(r,e,n){let{color:t}=e;return r.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class ye extends X{constructor(e){super(),Y(this,e,Tl,Ol,G,{color:0})}}const Al="/atip/stats19/assets/help-d011708a.svg";function Ll(r){let e,n;const t=r[1].default,l=Dt(t,r,r[4],null);return{c(){e=A("div"),l&&l.c(),z(e,"class","govuk-prose")},m(o,s){$(o,e,s),l&&l.m(e,null),n=!0},p(o,s){l&&l.p&&(!n||s&16)&&jt(l,t,o,o[4],n?Bt(t,o[4],s,null):Rt(o[4]),null)},i(o){n||(m(l,o),n=!0)},o(o){d(l,o),n=!1},d(o){o&&p(e),l&&l.d(o)}}}function Il(r){let e,n,t,l,o,s,u;function i(f){r[3](f)}let a={title:"Help",$$slots:{default:[Ll]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new il({props:a}),V.push(()=>J(t,"open",i)),{c(){e=A("button"),e.innerHTML=`<img src="${Al}" title="Help" alt="Help"/>`,n=L(),h(t.$$.fragment),z(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),b(t,f,c),o=!0,s||(u=at(e,"click",r[2]),s=!0)},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,_.open=f[0],K(()=>l=!1)),t.$set(_)},i(f){o||(m(t.$$.fragment,f),o=!0)},o(f){d(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),v(t,f),s=!1,u()}}}function Pl(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const s=()=>n(0,o=!0);function u(i){o=i,n(0,o)}return r.$$set=i=>{"$$scope"in i&&n(4,l=i.$$scope)},[o,t,s,u,l]}class ae extends X{constructor(e){super(),Y(this,e,Pl,Il,G,{})}}function Tn(r,e,n){const t=r.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function An(r){let e,n,t,l=r[1]+"",o,s,u;return n=new ye({props:{color:r[2]}}),{c(){e=A("li"),h(n.$$.fragment),t=L(),o=w(l),s=L()},m(i,a){$(i,e,a),b(n,e,null),k(e,t),k(e,o),k(e,s),u=!0},p(i,a){const f={};a&1&&(f.color=i[2]),n.$set(f),(!u||a&1)&&l!==(l=i[1]+"")&&B(o,l)},i(i){u||(m(n.$$.fragment,i),u=!0)},o(i){d(n.$$.fragment,i),u=!1},d(i){i&&p(e),v(n)}}}function Ml(r){let e,n,t=We(r[0]),l=[];for(let s=0;s<t.length;s+=1)l[s]=An(Tn(r,t,s));const o=s=>d(l[s],1,1,()=>{l[s]=null});return{c(){e=A("ul");for(let s=0;s<l.length;s+=1)l[s].c()},m(s,u){$(s,e,u);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(s,[u]){if(u&1){t=We(s[0]);let i;for(i=0;i<t.length;i+=1){const a=Tn(s,t,i);l[i]?(l[i].p(a,u),m(l[i],1)):(l[i]=An(a),l[i].c(),m(l[i],1),l[i].m(e,null))}for(fe(),i=t.length;i<l.length;i+=1)o(i);ue()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)m(l[u]);n=!0}},o(s){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)d(l[u]);n=!1},d(s){s&&p(e),Lt(l,s)}}}function Nl(r,e,n){let{rows:t}=e;return r.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class Ur extends X{constructor(e){super(),Y(this,e,Nl,Ml,G,{rows:0})}}function Ln(r){let e=r[0],n,t,l=In(r);return{c(){l.c(),n=Ae()},m(o,s){l.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&G(e,e=o[0])?(fe(),d(l,1,1,ee),ue(),l=In(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(m(l),t=!0)},o(o){d(l),t=!1},d(o){o&&p(n),l.d(o)}}}function In(r){let e;const n=r[10].default,t=Dt(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&jt(t,n,l,l[9],e?Bt(n,l[9],o,null):Rt(l[9]),null)},i(l){e||(m(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function El(r){let e,n,t=r[0]&&Ln(r);return{c(){t&&t.c(),e=Ae()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=Ln(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(fe(),d(t,1,1,()=>{t=null}),ue())},i(l){n||(m(t),n=!0)},o(l){d(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function Fl(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:u=pn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=Nr();_e(r,f,y=>n(8,l=y)),_e(r,c,y=>n(0,t=y));let _,g=!0;return Er(()=>{t&&_&&l&&(Fr(f,t,_),It(c,t=null,t),n(6,_=void 0))}),r.$$set=y=>{"id"in y&&n(3,u=y.id),"tiles"in y&&n(4,i=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,s=y.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==u&&(It(c,t=u,t),Dr(l,t,jr({type:"raster",tiles:i,tileSize:a}),y=>l&&y===t,()=>{t&&(n(6,_=l==null?void 0:l.getSource(t)),n(7,g=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,_=l==null?void 0:l.getSource(u))})),r.$$.dirty&208&&_&&(g?n(7,g=!1):_.setTiles(i))},[t,f,c,u,i,a,_,g,l,s,o]}class Dl extends X{constructor(e){super(),Y(this,e,Fl,El,G,{id:3,tiles:4,tileSize:5})}}function jl(r){let e;const n=r[16].default,t=Dt(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&jt(t,n,l,l[24],e?Bt(n,l[24],o,null):Rt(l[24]),null)},i(l){e||(m(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function Rl(r){let e,n,t;function l(s){r[17](s)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[jl]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new al({props:o}),V.push(()=>J(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,[u]){const i={};u&2&&(i.id=s[1]),u&4&&(i.source=s[2]),u&8&&(i.sourceLayer=s[3]),u&16&&(i.beforeId=s[4]),u&32&&(i.beforeLayerType=s[5]),u&64&&(i.paint=s[6]),u&128&&(i.layout=s[7]),u&256&&(i.filter=s[8]),u&512&&(i.applyToClusters=s[9]),u&1024&&(i.minzoom=s[10]),u&2048&&(i.maxzoom=s[11]),u&4096&&(i.hoverCursor=s[12]),u&8192&&(i.manageHoverState=s[13]),u&16384&&(i.eventsIfTopMost=s[14]),u&32768&&(i.interactive=s[15]),u&16777216&&(i.$$scope={dirty:u,ctx:s}),!n&&u&1&&(n=!0,i.hovered=s[0],K(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Bl(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=pn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:_=void 0}=e,{applyToClusters:g=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:S=void 0}=e,{hoverCursor:I=void 0}=e,{manageHoverState:T=!1}=e,{hovered:E=null}=e,{eventsIfTopMost:D=!1}=e,{interactive:F=!0}=e;function O(j){E=j,n(0,E)}function M(j){ut.call(this,r,j)}function N(j){ut.call(this,r,j)}function C(j){ut.call(this,r,j)}function P(j){ut.call(this,r,j)}function R(j){ut.call(this,r,j)}function q(j){ut.call(this,r,j)}return r.$$set=j=>{"id"in j&&n(1,o=j.id),"source"in j&&n(2,s=j.source),"sourceLayer"in j&&n(3,u=j.sourceLayer),"beforeId"in j&&n(4,i=j.beforeId),"beforeLayerType"in j&&n(5,a=j.beforeLayerType),"paint"in j&&n(6,f=j.paint),"layout"in j&&n(7,c=j.layout),"filter"in j&&n(8,_=j.filter),"applyToClusters"in j&&n(9,g=j.applyToClusters),"minzoom"in j&&n(10,y=j.minzoom),"maxzoom"in j&&n(11,S=j.maxzoom),"hoverCursor"in j&&n(12,I=j.hoverCursor),"manageHoverState"in j&&n(13,T=j.manageHoverState),"hovered"in j&&n(0,E=j.hovered),"eventsIfTopMost"in j&&n(14,D=j.eventsIfTopMost),"interactive"in j&&n(15,F=j.interactive),"$$scope"in j&&n(24,l=j.$$scope)},[E,o,s,u,i,a,f,c,_,g,y,S,I,T,D,F,t,O,M,N,C,P,R,q,l]}class Hl extends X{constructor(e){super(),Y(this,e,Bl,Rl,G,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Pn(r){let e=r[0],n,t,l=Mn(r);return{c(){l.c(),n=Ae()},m(o,s){l.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&G(e,e=o[0])?(fe(),d(l,1,1,ee),ue(),l=Mn(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(m(l),t=!0)},o(o){d(l),t=!1},d(o){o&&p(n),l.d(o)}}}function Mn(r){let e;const n=r[9].default,t=Dt(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&jt(t,n,l,l[8],e?Bt(n,l[8],o,null):Rt(l[8]),null)},i(l){e||(m(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function zl(r){let e,n,t=r[0]&&Pn(r);return{c(){t&&t.c(),e=Ae()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=Pn(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(fe(),d(t,1,1,()=>{t=null}),ue())},i(l){n||(m(t),n=!0)},o(l){d(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function Ul(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:u=pn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(i&&i.includes("pmtiles://")&&!wn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new fl;wn.addProtocol("pmtiles",y.tile)}const{map:c,self:_}=Nr();_e(r,c,y=>n(7,l=y)),_e(r,_,y=>n(0,t=y));let g;return Er(()=>{t&&l&&(Fr(c,t,g),It(_,t=null,t),g=void 0)}),r.$$set=y=>{"id"in y&&n(3,u=y.id),"url"in y&&n(4,i=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,f=y.promoteId),"$$scope"in y&&n(8,s=y.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==u&&(It(_,t=u,t),Dr(l,t,jr({type:"vector",url:i,tiles:a,promoteId:f}),y=>l&&y===t,()=>{t&&(g=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{g=l==null?void 0:l.getSource(u)}))},[t,c,_,u,i,a,f,l,s,o]}class be extends X{constructor(e){super(),Y(this,e,Ul,zl,G,{id:3,url:4,tiles:5,promoteId:6})}}function Gl(r){let e;return{c(){e=A("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ql(r){let e,n,t=r[0]=="Private (development)"&&Gl();return{c(){t&&t.c(),e=L(),n=A("p"),n.textContent="Note the ATF scheme data has not been validated."},m(l,o){t&&t.m(l,o),$(l,e,o),$(l,n,o)},p:ee,d(l){l&&(p(e),p(n)),t&&t.d(l)}}}function Wl(r){let e,n,t,l,o,s;return o=new ae({props:{$$slots:{default:[ql]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("App version: "),t=w(r[0]),l=L(),h(o.$$.fragment)},m(u,i){$(u,e,i),k(e,n),k(e,t),k(e,l),b(o,e,null),s=!0},p(u,[i]){const a={};i&2&&(a.$$scope={dirty:i,ctx:u}),o.$set(a)},i(u){s||(m(o.$$.fragment,u),s=!0)},o(u){d(o.$$.fragment,u),s=!1},d(u){u&&p(e),v(o)}}}function Vl(r){return[mn()]}class Xl extends X{constructor(e){super(),Y(this,e,Vl,Wl,G,{})}}const Yl={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Ce=Uint8Array,it=Uint16Array,Gr=Uint32Array,qr=new Ce([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Wr=new Ce([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Jl=new Ce([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Vr=function(r,e){for(var n=new it(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new Gr(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},Xr=Vr(qr,2),Yr=Xr[0],Kl=Xr[1];Yr[28]=258,Kl[258]=28;var Zl=Vr(Wr,0),Ql=Zl[0],sn=new it(32768);for(var ie=0;ie<32768;++ie){var nt=(ie&43690)>>>1|(ie&21845)<<1;nt=(nt&52428)>>>2|(nt&13107)<<2,nt=(nt&61680)>>>4|(nt&3855)<<4,sn[ie]=((nt&65280)>>>8|(nt&255)<<8)>>>1}var At=function(r,e,n){for(var t=r.length,l=0,o=new it(e);l<t;++l)r[l]&&++o[r[l]-1];var s=new it(e);for(l=0;l<e;++l)s[l]=s[l-1]+o[l-1]<<1;var u;if(n){u=new it(1<<e);var i=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],f=e-r[l],c=s[r[l]-1]++<<f,_=c|(1<<f)-1;c<=_;++c)u[sn[c]>>>i]=a}else for(u=new it(t),l=0;l<t;++l)r[l]&&(u[l]=sn[s[r[l]-1]++]>>>15-r[l]);return u},Ht=new Ce(288);for(var ie=0;ie<144;++ie)Ht[ie]=8;for(var ie=144;ie<256;++ie)Ht[ie]=9;for(var ie=256;ie<280;++ie)Ht[ie]=7;for(var ie=280;ie<288;++ie)Ht[ie]=8;var Jr=new Ce(32);for(var ie=0;ie<32;++ie)Jr[ie]=5;var xl=At(Ht,9,1),eo=At(Jr,5,1),Qt=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},Pe=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},xt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},to=function(r){return(r+7)/8|0},hn=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?it:r.BYTES_PER_ELEMENT==4?Gr:Ce)(n-e);return t.set(r.subarray(e,n)),t},no=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Me=function(r,e,n){var t=new Error(e||no[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Me),!n)throw t;return t},ro=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new Ce(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new Ce(t*3));var s=function(de){var Re=e.length;if(de>Re){var Ke=new Ce(Math.max(Re*2,de));Ke.set(e),e=Ke}},u=n.f||0,i=n.p||0,a=n.b||0,f=n.l,c=n.d,_=n.m,g=n.n,y=t*8;do{if(!f){u=Pe(r,i,1);var S=Pe(r,i+1,3);if(i+=3,S)if(S==1)f=xl,c=eo,_=9,g=5;else if(S==2){var D=Pe(r,i,31)+257,F=Pe(r,i+10,15)+4,O=D+Pe(r,i+5,31)+1;i+=14;for(var M=new Ce(O),N=new Ce(19),C=0;C<F;++C)N[Jl[C]]=Pe(r,i+C*3,7);i+=F*3;for(var P=Qt(N),R=(1<<P)-1,q=At(N,P,1),C=0;C<O;){var j=q[Pe(r,i,R)];i+=j&15;var I=j>>>4;if(I<16)M[C++]=I;else{var U=0,$e=0;for(I==16?($e=3+Pe(r,i,3),i+=2,U=M[C-1]):I==17?($e=3+Pe(r,i,7),i+=3):I==18&&($e=11+Pe(r,i,127),i+=7);$e--;)M[C++]=U}}var Le=M.subarray(0,D),ce=M.subarray(D);_=Qt(Le),g=Qt(ce),f=At(Le,_,1),c=At(ce,g,1)}else Me(1);else{var I=to(i)+4,T=r[I-4]|r[I-3]<<8,E=I+T;if(E>t){o&&Me(0);break}l&&s(a+T),e.set(r.subarray(I,E),a),n.b=a+=T,n.p=i=E*8,n.f=u;continue}if(i>y){o&&Me(0);break}}l&&s(a+131072);for(var Je=(1<<_)-1,me=(1<<g)-1,pe=i;;pe=i){var U=f[xt(r,i)&Je],le=U>>>4;if(i+=U&15,i>y){o&&Me(0);break}if(U||Me(2),le<256)e[a++]=le;else if(le==256){pe=i,f=null;break}else{var tt=le-254;if(le>264){var C=le-257,Te=qr[C];tt=Pe(r,i,(1<<Te)-1)+Yr[C],i+=Te}var Ie=c[xt(r,i)&me],je=Ie>>>4;Ie||Me(3),i+=Ie&15;var ce=Ql[je];if(je>3){var Te=Wr[je];ce+=xt(r,i)&(1<<Te)-1,i+=Te}if(i>y){o&&Me(0);break}l&&s(a+131072);for(var se=a+tt;a<se;a+=4)e[a]=e[a-ce],e[a+1]=e[a+1-ce],e[a+2]=e[a+2-ce],e[a+3]=e[a+3-ce];a=se}}n.l=f,n.p=pe,n.b=a,n.f=u,f&&(u=1,n.m=_,n.d=c,n.n=g)}while(!u);return a==e.length?e:hn(e,0,a)},lo=new Ce(0),qe=function(r,e){return r[e]|r[e+1]<<8},Ee=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},en=function(r,e){return Ee(r,e)+Ee(r,e+4)*4294967296};function oo(r,e){return ro(r,e)}var an=typeof TextDecoder<"u"&&new TextDecoder,so=0;try{an.decode(lo,{stream:!0}),so=1}catch{}var io=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,hn(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function Kr(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(an)return an.decode(r);var l=io(r),o=l[0],s=l[1];return s.length&&Me(8),o}}var ao=function(r,e){return e+30+qe(r,e+26)+qe(r,e+28)},fo=function(r,e,n){var t=qe(r,e+28),l=Kr(r.subarray(e+46,e+46+t),!(qe(r,e+8)&2048)),o=e+46+t,s=Ee(r,e+20),u=n&&s==4294967295?uo(r,o):[s,Ee(r,e+24),Ee(r,e+42)],i=u[0],a=u[1],f=u[2];return[qe(r,e+10),i,a,l,o+qe(r,e+30)+qe(r,e+32),f]},uo=function(r,e){for(;qe(r,e)!=1;e+=4+qe(r,e+2));return[en(r,e+12),en(r,e+4),en(r,e+20)]};function co(r,e){for(var n={},t=r.length-22;Ee(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Me(13);var l=qe(r,t+8);if(!l)return{};var o=Ee(r,t+16),s=o==4294967295||l==65535;if(s){var u=Ee(r,t-12);s=Ee(r,u)==101075792,s&&(l=Ee(r,u+32),o=Ee(r,u+48))}for(var i=e&&e.filter,a=0;a<l;++a){var f=fo(r,o,s),c=f[0],_=f[1],g=f[2],y=f[3],S=f[4],I=f[5],T=ao(r,I);o=S,(!i||i({name:y,size:_,originalSize:g,compression:c}))&&(c?c==8?n[y]=oo(r.subarray(T,T+_),new Ce(g)):Me(14,"unknown compression type "+c):n[y]=hn(r,T,T+_))}return n}function $o(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(tn):tn(r)}function tn(r){var e=new Uint8Array(r),n=co(e);return Promise.resolve(po(n))}function po(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=Kr(r[l])}return e}function Ve(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&ft(t)===e)return t;n++}}function zt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&ft(l)===e&&n.push(l),t++}return n}function Yt(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&ft(l)===e&&n(l,t):n(l,t),t++}}function mo(r,e,n){var t=[];return Yt(r,e,function(l,o){t.push(n(l,o))}),t}var _o=/.+\:/;function ft(r){return r.tagName.replace(_o,"")}function Zr(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+ft(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=Zr(r.childNodes[t]),t++;return e+="</"+ft(r)+">",e}function go(r){var e=r.documentElement,n=Ve(e,"sheetData"),t=[];return Yt(n,"row",function(l){Yt(l,"c",function(o){t.push(o)})}),t}function ho(r,e){return Ve(e,"v")}function bo(r,e){if(e.firstChild&&ft(e.firstChild)==="is"&&e.firstChild.firstChild&&ft(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function vo(r){var e=r.documentElement,n=Ve(e,"dimension");if(n)return n.getAttribute("ref")}function wo(r){var e=r.documentElement,n=Ve(e,"cellStyleXfs");return n?zt(n,"xf"):[]}function ko(r){var e=r.documentElement,n=Ve(e,"cellXfs");return n?zt(n,"xf"):[]}function yo(r){var e=r.documentElement,n=Ve(e,"numFmts");return n?zt(n,"numFmt"):[]}function So(r){var e=r.documentElement;return mo(e,"si",function(n){var t=Ve(n,"t");if(t)return t.textContent;var l="";return Yt(n,"r",function(o){l+=Ve(o,"t").textContent}),l})}function Co(r){var e=r.documentElement;return Ve(e,"workbookPr")}function Oo(r){var e=r.documentElement;return zt(e,"Relationship")}function To(r){var e=r.documentElement,n=Ve(e,"sheets");return zt(n,"sheet")}function Ao(r,e){var n=e.createDocument(r),t={},l=Co(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return To(n).forEach(o),t}function Lo(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(s){var u=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=nn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=nn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=nn(u);break}};return Oo(n).forEach(l),t}function nn(r){return r[0]==="/"?r.slice(1):"xl/"+r}function Nn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function En(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nn(Object(n),!0).forEach(function(t){Io(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Io(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Po(r,e){if(!r)return{};var n=e.createDocument(r),t=wo(n).map(rn),l=yo(n).map(Mo).reduce(function(s,u){return s[u.id]=u,s},[]),o=function(u){return u.hasAttribute("xfId")?En(En({},t[u.xfId]),rn(u,l)):rn(u,l)};return ko(n).map(o)}function Mo(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function rn(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function No(r,e){return r?So(e.createDocument(r)):[]}function Qr(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function Eo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Fo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fo(r,e){if(r){if(typeof r=="string")return Fn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fn(r,e)}}function Fn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Do(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(jo.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&Ho(l.numberFormat.template))return!0}}var jo=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],Ro=/^\[\$-414\]/,Bo=/;@$/;function Ho(r){r=r.toLowerCase(),r=r.replace(Ro,""),r=r.replace(Bo,"");for(var e=r.split(/\W+/),n=Eo(e),t;!(t=n()).done;){var l=t.value;if(zo.indexOf(l)<0)return!1}return!0}var zo=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function Uo(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,s=n.styles,u=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=ln(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=ln(r,a);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=ln(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=Go(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var _=Number(r);if(isNaN(_))throw new Error('Invalid "numeric" cell value: '.concat(r));r=_,Do(r,o(),s,a)&&(r=Qr(r,i));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function Go(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function ln(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var qo=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function Wo(r){var e=function(a,f){return a-f},n=r.map(function(i){return i.row}).sort(e),t=r.map(function(i){return i.column}).sort(e),l=n[0],o=n[n.length-1],s=t[0],u=t[t.length-1];return[{row:l,column:s},{row:o,column:u}]}function Vo(r){for(var e=0,n=0;n<r.length;)e*=26,e+=qo.indexOf(r[n]),n++;return e}function xr(r){return r=r.split(/(\d+)/),[parseInt(r[1]),Vo(r[0].trim())]}function Xo(r,e,n,t,l,o,s){var u=xr(r.getAttribute("r")),i=ho(e,r),a=i&&i.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:Uo(a,f,{getInlineStringValue:function(){return bo(e,r)},getInlineStringXml:function(){return Zr(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:s})}}function Yo(r,e,n,t,l,o){var s=go(r);return s.length===0?[]:s.map(function(u){return Xo(u,r,e,n,t,l,o)})}function Jo(r,e){return xo(r)||Qo(r,e)||Zo(r,e)||Ko()}function Ko(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zo(r,e){if(r){if(typeof r=="string")return Dn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dn(r,e)}}function Dn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Qo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,u;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,u=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function xo(r){if(Array.isArray(r))return r}function es(r){var e=vo(r);if(e)return e=e.split(":").map(xr).map(function(n){var t=Jo(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function ts(r,e,n,t,l,o){var s=e.createDocument(r),u=Yo(s,e,n,t,l,o),i=es(s)||Wo(u);return{cells:u,dimensions:i}}function ns(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=rs(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rs(r,e){if(r){if(typeof r=="string")return jn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jn(r,e)}}function jn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ls(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=r.length-1;s>=0;){for(var u=!0,i=ns(r[s]),a;!(a=i()).done;){var f=a.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return r}function os(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ss(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ss(r,e){if(r){if(typeof r=="string")return Rn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rn(r,e)}}function Rn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function is(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var s=!0,u=os(r),i;!(i=u()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function as(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=el(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fs(r,e){return $s(r)||cs(r,e)||el(r,e)||us()}function us(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function el(r,e){if(r){if(typeof r=="string")return Bn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bn(r,e)}}function Bn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function cs(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,u;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,u=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function $s(r){if(Array.isArray(r))return r}function ps(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=fs(n,2);l[0];for(var o=l[1],s=o.column,u=o.row,i=new Array(u),a=0;a<u;){i[a]=new Array(s);for(var f=0;f<s;)i[a][f]=null,f++;a++}for(var c=as(t),_;!(_=c()).done;){var g=_.value,y=g.row-1,S=g.column-1;S<s&&y<u&&(i[y][S]=g.value)}var I=e.rowMap;if(I)for(var T=0;T<i.length;)I[T]=T,T++;return i=ls(is(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:I}),e.transformData&&(i=e.transformData(i)),i}function ms(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=_s(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _s(r,e){if(r){if(typeof r=="string")return Hn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hn(r,e)}}function Hn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function zn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function gs(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zn(Object(n),!0).forEach(function(t){ds(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):zn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function ds(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function hs(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=gs({sheet:1},n));var t=function(_){if(!r[_])throw new Error('"'.concat(_,'" file not found inside the *.xlsx file zip archive'));return r[_]},l=Lo(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?No(t(l.sharedStrings),e):[],s=l.styles?Po(t(l.styles),e):{},u=Ao(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var _=c.name;return{name:_}});var i=bs(n.sheet,u.sheets);if(!i||!l.sheets[i])throw vs(n.sheet,u.sheets);var a=ts(t(l.sheets[i]),e,o,s,u,n),f=ps(a,n);return n.properties?{data:f,properties:u}:f}function bs(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=ms(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function vs(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function fn(r){"@babel/helpers - typeof";return fn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fn(r)}function Un(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function ws(r,e,n){return e&&Un(r.prototype,e),n&&Un(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function ks(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ys(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Nt(r,e)}function Ss(r){var e=tl();return function(){var t=Et(r),l;if(e){var o=Et(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return Cs(this,l)}}function Cs(r,e){if(e&&(fn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Os(r)}function Os(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function un(r){var e=typeof Map=="function"?new Map:void 0;return un=function(t){if(t===null||!Ts(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return qt(t,arguments,Et(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Nt(l,t)},un(r)}function qt(r,e,n){return tl()?qt=Reflect.construct:qt=function(l,o,s){var u=[null];u.push.apply(u,o);var i=Function.bind.apply(l,u),a=new i;return s&&Nt(a,s.prototype),a},qt.apply(null,arguments)}function tl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ts(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Nt(r,e){return Nt=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},Nt(r,e)}function Et(r){return Et=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Et(r)}var Oe=function(r){ys(n,r);var e=Ss(n);function n(t){var l;return ks(this,n),l=e.call(this,"invalid"),l.reason=t,l}return ws(n)}(un(Error));function As(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new Oe("not_a_number")}if(typeof r!="number")throw new Oe("not_a_number");if(isNaN(r))throw new Oe("invalid_number");if(!isFinite(r))throw new Oe("out_of_bounds");return r}function Ls(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new Oe("invalid_number");if(!isFinite(r))throw new Oe("out_of_bounds");return String(r)}throw new Oe("not_a_string")}function Is(r){if(typeof r=="boolean")return r;throw new Oe("not_a_boolean")}function Ps(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new Oe("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new Oe("invalid_number");if(!isFinite(r))throw new Oe("out_of_bounds");var t=Qr(r,n);if(isNaN(t.valueOf()))throw new Oe("out_of_bounds");return t}throw new Oe("not_a_date")}function Ms(r,e){return Fs(r)||Es(r,e)||nl(r,e)||Ns()}function Ns(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Es(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,u;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,u=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Fs(r){if(Array.isArray(r))return r}function cn(r){"@babel/helpers - typeof";return cn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cn(r)}function Ds(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=nl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nl(r,e){if(r){if(typeof r=="string")return Gn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gn(r,e)}}function Gn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function qn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Wn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qn(Object(n),!0).forEach(function(t){js(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):qn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function js(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Vn={isColumnOriented:!1};function Rs(r,e,n){n?n=Wn(Wn({},Vn),n):n=Vn;var t=n,l=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;Us(e),l&&(r=zs(r));for(var u=r[0],i=[],a=[],f=1;f<r.length;f++){var c=rl(e,r[f],f,u,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var _=Ds(a),g;!(g=_()).done;){var y=g.value;y.row=o[y.row-1]+1}return{rows:i,errors:a}}function rl(r,e,n,t,l,o){for(var s={},u=!0,i=function(){var _=f[a],g=r[_],y=cn(g.type)==="object"&&!Array.isArray(g.type),S=e[t.indexOf(_)];S===void 0&&(S=null);var I=void 0,T=void 0,E=void 0;if(y)I=rl(g.type,e,n,t,l,o);else if(S===null)I=null;else if(Array.isArray(g.type)){var D=!1,F=Hs(S).map(function(M){var N=Xn(M,g,o);return N.error&&(I=M,T=N.error,E=N.reason),N.value!==null&&(D=!0),N.value});T||(I=D?F:null)}else{var O=Xn(S,g,o);T=O.error,E=O.reason,I=T?S:O.value}!T&&I===null&&g.required&&(T="required"),T?(T={error:T,row:n+1,column:_,value:I},E&&(T.reason=E),g.type&&(T.type=g.type),l.push(T)):(u&&I!==null&&(u=!1),(I!==null||o.includeNullValues)&&(s[g.prop]=I))},a=0,f=Object.keys(r);a<f.length;a++)i();return u?null:s}function Xn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=ct(r,e.parse):e.type?t=Bs(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function ct(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function Bs(r,e,n){switch(e){case String:return ct(r,Ls);case Number:return ct(r,As);case Date:return ct(r,function(t){return Ps(t,{properties:n.properties})});case Boolean:return ct(r,Is);default:if(typeof e=="function")return ct(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function ll(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var s=ll(r,'"',n+t+1);l+=s[0],t+=1+s[1]+1}else l+=o,t++}return[l,t]}function Hs(r){for(var e=[],n=0;n<r.length;){var t=ll(r,",",n),l=Ms(t,2),o=l[0],s=l[1];n+=s+1,e.push(o.trim())}return e}var zs=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function Us(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function $n(r){"@babel/helpers - typeof";return $n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$n(r)}function ol(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],s=void 0;$n(o)==="object"&&(o=Object.keys(r[l])[0],s=ol(r[l][o])),e[l]={prop:o},s&&(e[l].type=s)}return e}var Gs=["schema","map"];function Yn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Gt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Yn(Object(n),!0).forEach(function(t){qs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Yn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function qs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Ws(r,e){if(r==null)return{};var n=Vs(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function Vs(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function Xs(r,e,n){var t=n.schema,l=n.map,o=Ws(n,Gs);!t&&l&&(t=ol(l));var s=hs(r,e,Gt(Gt({},o),{},{properties:t||o.properties}));return t?Rs(s.data,t,Gt(Gt({},o),{},{properties:s.properties})):s}function Ys(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return $o(r).then(function(n){return Xs(n,Yl,e)})}function Js(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,l);r.features=r.features.filter(t=>Ks(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.browse&&(l.browse.num_features=l.browse.num_features!==void 0?l.browse.num_features+1:1,t.properties.funding_programme=l.browse.funding_programme,t.properties.current_milestone=l.browse.current_milestone,t.id=n++)}return e}function Ks(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function Zs(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Ys(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=ul(l.lat_lon.split(",").map(parseFloat).reverse()),s=l;s.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}function sl(r){return Vt(["get","intervention_type"],{area:Qe.area,route:Qe.route,crossing:Qe.crossing,other:Qe.other},"white")}function Jn(r){return[["Areas",Qe.area],["Routes",Qe.route],["Crossings",Qe.crossing],["Other",Qe.other]]}const te={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"]},Fe=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20],St=Kt({type:"FeatureCollection",features:[],schemes:{}}),Ft=Kt(new Map),Kn=Kt(!0),Wt=Kt("");function Qs(r){let e,n;return e=new Ur({props:{rows:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xs(r){let e,n,t,l,o;function s(i){r[3](i)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(u.value=r[0]),e=new Mt({props:u}),V.push(()=>J(e,"value",s)),e.$on("change",r[2]),l=new Ne({props:{label:"Legend",$$slots:{default:[Qs]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const f={};!n&&a&1&&(n=!0,f.value=i[0],K(()=>n=!1)),e.$set(f);const c={};a&258&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}function Zn(r,e){let n=[],t={},l=0;for(let o of r){let s=e[l++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function ei(r,e,n){let t,l;_e(r,Ft,c=>n(4,t=c)),_e(r,_n,c=>n(5,l=c));let o="interventionType",s=Jn();function u(){let c;o=="interventionType"?(c=sl(),n(1,s=Jn())):o=="fundingProgramme"?c=i():o=="currentMilestone"&&(c=a()),l.setPaintProperty("interventions-points","circle-color",c),l.setPaintProperty("interventions-lines","line-color",c),l.setPaintProperty("interventions-polygons","fill-color",c),l.setPaintProperty("interventions-polygons-outlines","line-color",c)}function i(){var I;let c=new Set;for(let T of t.values())(I=T.browse)!=null&&I.funding_programme&&c.add(T.browse.funding_programme);let _=Array.from(c);_.sort();let[g,y]=Zn(_,te.funding_programmes),S=Vt(["get","funding_programme"],g,"grey");return n(1,s=y),S}function a(){let c=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[_,g]=Zn(c,te.current_milestone),y=Vt(["get","current_milestone"],_,"grey");return n(1,s=g),y}function f(c){o=c,n(0,o)}return[o,s,u,f]}class ti extends X{constructor(e){super(),Y(this,e,ei,xs,G,{})}}function ni(r){let e;return{c(){e=w("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ri(r){let e,n,t,l,o,s;return t=new on({props:{$$slots:{default:[ni]},$$scope:{ctx:r}}}),t.$on("click",r[11]),{c(){e=A("input"),n=L(),h(t.$$.fragment),z(e,"type","text"),z(e,"class","govuk-input govuk-input--width-10"),z(e,"id","filterText")},m(u,i){$(u,e,i),lt(e,r[4]),$(u,n,i),b(t,u,i),l=!0,o||(s=at(e,"input",r[10]),o=!0)},p(u,i){i&16&&e.value!==u[4]&&lt(e,u[4]);const a={};i&65536&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){l||(m(t.$$.fragment,u),l=!0)},o(u){d(t.$$.fragment,u),l=!1},d(u){u&&(p(e),p(n)),v(t,u),o=!1,s()}}}function li(r){let e,n,t,l,o,s,u,i,a,f;function c(S){r[8](S)}let _={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[2]!==void 0&&(_.value=r[2]),e=new Mt({props:_}),V.push(()=>J(e,"value",c));function g(S){r[9](S)}let y={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[3]!==void 0&&(y.value=r[3]),l=new Mt({props:y}),V.push(()=>J(l,"value",g)),u=new Rr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[ri]},$$scope:{ctx:r}}}),a=new ti({}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment),s=L(),h(u.$$.fragment),i=L(),h(a.$$.fragment)},m(S,I){b(e,S,I),$(S,t,I),b(l,S,I),$(S,s,I),b(u,S,I),$(S,i,I),b(a,S,I),f=!0},p(S,I){const T={};I&32&&(T.choices=S[5]),!n&&I&4&&(n=!0,T.value=S[2],K(()=>n=!1)),e.$set(T);const E={};I&64&&(E.choices=S[6]),!o&&I&8&&(o=!0,E.value=S[3],K(()=>o=!1)),l.$set(E);const D={};I&65552&&(D.$$scope={dirty:I,ctx:S}),u.$set(D)},i(S){f||(m(e.$$.fragment,S),m(l.$$.fragment,S),m(u.$$.fragment,S),m(a.$$.fragment,S),f=!0)},o(S){d(e.$$.fragment,S),d(l.$$.fragment,S),d(u.$$.fragment,S),d(a.$$.fragment,S),f=!1},d(S){S&&(p(t),p(s),p(i)),v(e,S),v(l,S),v(u,S),v(a,S)}}}function oi(r){let e,n=r[0].size.toLocaleString()+"",t,l,o=r[7].route.toLocaleString()+"",s,u,i=r[7].area.toLocaleString()+"",a,f,c=r[7].crossing.toLocaleString()+"",_,g,y=r[7].other.toLocaleString()+"",S,I,T=Qn(r[7].totalLength).toFixed(1)+"",E,D;return{c(){e=w("Showing "),t=w(n),l=w(" schemes ("),s=w(o),u=w(`
    routes, `),a=w(i),f=w(` areas,
    `),_=w(c),g=w(" crossings, "),S=w(y),I=w(`
    other, with total LineString length of `),E=w(T),D=w(" miles)")},m(F,O){$(F,e,O),$(F,t,O),$(F,l,O),$(F,s,O),$(F,u,O),$(F,a,O),$(F,f,O),$(F,_,O),$(F,g,O),$(F,S,O),$(F,I,O),$(F,E,O),$(F,D,O)},p(F,O){O&1&&n!==(n=F[0].size.toLocaleString()+"")&&B(t,n),O&128&&o!==(o=F[7].route.toLocaleString()+"")&&B(s,o),O&128&&i!==(i=F[7].area.toLocaleString()+"")&&B(a,i),O&128&&c!==(c=F[7].crossing.toLocaleString()+"")&&B(_,c),O&128&&y!==(y=F[7].other.toLocaleString()+"")&&B(S,y),O&128&&T!==(T=Qn(F[7].totalLength).toFixed(1)+"")&&B(E,T)},d(F){F&&(p(e),p(t),p(l),p(s),p(u),p(a),p(f),p(_),p(g),p(S),p(I),p(E),p(D))}}}function si(r){let e,n,t;function l(s){r[12](s)}let o={id:"show-schemes",$$slots:{default:[oi]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new re({props:o}),V.push(()=>J(e,"checked",l)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){const i={};u&65665&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],K(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function ii(r){let e,n,t,l;return e=new Ne({props:{label:"Filters",$$slots:{default:[li]},$$scope:{ctx:r}}}),t=new et({props:{small:!0,$$slots:{default:[si]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),l=!0},p(o,[s]){const u={};s&65660&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&65667&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Qn(r){return r*621371e-9}function ai(r,e,n){let t,l,o;_e(r,Wt,D=>n(4,t=D)),_e(r,St,D=>n(13,l=D)),_e(r,Ft,D=>n(14,o=D));let{schemesToBeShown:s=new Set}=e,{show:u=!0}=e,i=[],a="",f=[],c="",_={area:0,route:0,crossing:0,other:0,totalLength:0};gn(()=>{var O,M;let D=new Set,F=new Set;for(let N of o.values())(O=N.browse)!=null&&O.authority_or_region&&D.add(N.browse.authority_or_region),(M=N.browse)!=null&&M.funding_programme&&F.add(N.browse.funding_programme);n(5,i=Array.from(D.entries())),i.sort(),n(6,f=Array.from(F.entries())),f.sort()});function g(D,F,O){let M=D.toLowerCase(),N=P=>{var R,q,j,U;if(M&&!((R=P.properties.name)!=null&&R.toLowerCase().includes(M))&&!((q=P.properties.description)!=null&&q.toLowerCase().includes(M)))return!1;if(F||O){let $e=o.get(P.properties.scheme_reference);if(F&&((j=$e.browse)==null?void 0:j.authority_or_region)!=F||O&&((U=$e.browse)==null?void 0:U.funding_programme)!=O)return!1}return!0};n(0,s=new Set(l.features.filter(N).map(P=>P.properties.scheme_reference))),n(7,_={area:0,route:0,crossing:0,other:0,totalLength:0});let C=P=>{var R,q;return!(!s.has(P.properties.scheme_reference)||M&&!((R=P.properties.name)!=null&&R.toLowerCase().includes(M))&&!((q=P.properties.description)!=null&&q.toLowerCase().includes(M)))};for(let P of l.features)C(P)?(delete P.properties.hide_while_editing,n(7,_[P.properties.intervention_type]++,_),P.geometry.type=="LineString"&&P.properties.length_meters&&n(7,_.totalLength+=P.properties.length_meters,_)):P.properties.hide_while_editing=!0;St.set(l),n(7,_)}function y(D){a=D,n(2,a)}function S(D){c=D,n(3,c)}function I(){t=this.value,Wt.set(t)}const T=()=>It(Wt,t="",t);function E(D){u=D,n(1,u)}return r.$$set=D=>{"schemesToBeShown"in D&&n(0,s=D.schemesToBeShown),"show"in D&&n(1,u=D.show)},r.$$.update=()=>{r.$$.dirty&28&&g(t,a,c)},[s,u,a,c,t,i,f,_,y,S,I,T,E]}class fi extends X{constructor(e){super(),Y(this,e,ai,ii,G,{schemesToBeShown:0,show:1})}}function ui(r){let e;return{c(){e=w(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ci(r){let e,n,t,l,o;return t=new W({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ui]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment),l=w(`. Contains OS data  Crown copyright and database right
  2023.`)},m(s,u){$(s,e,u),k(e,n),b(t,e,null),k(e,l),o=!0},p(s,[u]){const i={};u&1&&(i.$$scope={dirty:u,ctx:s}),t.$set(i)},i(s){o||(m(t.$$.fragment,s),o=!0)},o(s){d(t.$$.fragment,s),o=!1},d(s){s&&p(e),v(t)}}}class De extends X{constructor(e){super(),Y(this,e,null,ci,G,{})}}function xn(r,e,n){const t=r.slice();return t[2]=e[n],t}function er(r,e,n){const t=r.slice();return t[5]=e[n],t}function tr(r){let e,n;return{c(){e=A("span"),n=w(`
    `),ve(e,"background",r[5]),ve(e,"width","100%"),ve(e,"border","1px solid black")},m(t,l){$(t,e,l),k(e,n)},p(t,l){l&1&&ve(e,"background",t[5])},d(t){t&&p(e)}}}function nr(r){let e,n=r[2]+"",t;return{c(){e=A("span"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&B(t,n)},d(l){l&&p(e)}}}function $i(r){let e,n,t,l=We(r[0]),o=[];for(let i=0;i<l.length;i+=1)o[i]=tr(er(r,l,i));let s=We(r[1]),u=[];for(let i=0;i<s.length;i+=1)u[i]=nr(xn(r,s,i));return{c(){e=A("div");for(let i=0;i<o.length;i+=1)o[i].c();n=L(),t=A("div");for(let i=0;i<u.length;i+=1)u[i].c();ve(e,"display","flex"),ve(t,"display","flex"),ve(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(i,n,a),$(i,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(i,[a]){if(a&1){l=We(i[0]);let f;for(f=0;f<l.length;f+=1){const c=er(i,l,f);o[f]?o[f].p(c,a):(o[f]=tr(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(a&2){s=We(i[1]);let f;for(f=0;f<s.length;f+=1){const c=xn(i,s,f);u[f]?u[f].p(c,a):(u[f]=nr(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=s.length}},i:ee,o:ee,d(i){i&&(p(e),p(n),p(t)),Lt(o,i),Lt(u,i)}}}function pi(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class Ye extends X{constructor(e){super(),Y(this,e,pi,$i,G,{colorScale:0,limits:1})}}function rr(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function mi(r){let e;return{c(){e=w("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _i(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function di(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function hi(r){let e,n,t,l,o,s,u,i,a,f,c,_;return t=new W({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[_i]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[gi]},$$scope:{ctx:r}}}),f=new W({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[di]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),s=w("."),u=L(),i=A("p"),a=w("License: "),h(f.$$.fragment),c=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(g,y){$(g,e,y),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,s),$(g,u,y),$(g,i,y),k(i,a),b(f,i,null),k(i,c),_=!0},p(g,y){const S={};y&65536&&(S.$$scope={dirty:y,ctx:g}),t.$set(S);const I={};y&65536&&(I.$$scope={dirty:y,ctx:g}),o.$set(I);const T={};y&65536&&(T.$$scope={dirty:y,ctx:g}),f.$set(T)},i(g){_||(m(t.$$.fragment,g),m(o.$$.fragment,g),m(f.$$.fragment,g),_=!0)},o(g){d(t.$$.fragment,g),d(o.$$.fragment,g),d(f.$$.fragment,g),_=!1},d(g){g&&(p(e),p(u),p(i)),v(t),v(o),v(f)}}}function bi(r){let e,n,t;return n=new ae({props:{$$slots:{default:[hi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function lr(r){let e,n;return e=new Ye({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vi(r){let e;return{c(){e=w("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wi(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ki(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function yi(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Si(r){let e,n,t,l,o,s,u,i,a,f,c,_,g,y;return o=new W({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[wi]},$$scope:{ctx:r}}}),u=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ki]},$$scope:{ctx:r}}}),_=new W({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[yi]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=L(),t=A("p"),l=w("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),s=w(". Output area boundaries from "),h(u.$$.fragment),i=w("."),a=L(),f=A("p"),c=w("License: "),h(_.$$.fragment),g=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(S,I){$(S,e,I),$(S,n,I),$(S,t,I),k(t,l),b(o,t,null),k(t,s),b(u,t,null),k(t,i),$(S,a,I),$(S,f,I),k(f,c),b(_,f,null),k(f,g),y=!0},p(S,I){const T={};I&65536&&(T.$$scope={dirty:I,ctx:S}),o.$set(T);const E={};I&65536&&(E.$$scope={dirty:I,ctx:S}),u.$set(E);const D={};I&65536&&(D.$$scope={dirty:I,ctx:S}),_.$set(D)},i(S){y||(m(o.$$.fragment,S),m(u.$$.fragment,S),m(_.$$.fragment,S),y=!0)},o(S){d(o.$$.fragment,S),d(u.$$.fragment,S),d(_.$$.fragment,S),y=!1},d(S){S&&(p(e),p(n),p(t),p(a),p(f)),v(o),v(u),v(_)}}}function Ci(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Si]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function or(r){let e,n;return e=new Ye({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Oi(r){let e;return{c(){e=w("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ti(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ai(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Li(r){let e,n,t,l,o,s,u,i,a;return t=new W({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ti]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ai]},$$scope:{ctx:r}}}),i=new De({}),{c(){e=A("p"),n=w("Population density data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),s=w("."),u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const _={};c&65536&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const g={};c&65536&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function Ii(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Li]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function sr(r){let e,n,t,l;return t=new Ye({props:{colorScale:r[4],limits:r[6]().map(Ri)}}),{c(){e=A("p"),e.textContent="(people per square kilometres)",n=L(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),l=!0},p:ee,i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function Pi(r){let e,n,t,l=r[15].toLocaleString()+"",o,s,u=r[14]+"",i;return{c(){e=A("p"),n=w("There are "),t=A("b"),o=w(l),s=w(`
          people per square kilometre in `),i=w(u)},m(a,f){$(a,e,f),k(e,n),k(e,t),k(t,o),k(e,s),k(e,i)},p(a,f){f&8200&&l!==(l=a[15].toLocaleString()+"")&&B(o,l),f&8192&&u!==(u=a[14]+"")&&B(i,u)},d(a){a&&p(e)}}}function Mi(r){let e,n,t=r[14]+"",l,o,s,u=r[15]+"",i,a;return{c(){e=A("p"),n=w("Households in "),l=w(t),o=w(` have an average of
          `),s=A("b"),i=w(u),a=w(`
          cars`)},m(f,c){$(f,e,c),k(e,n),k(e,l),k(e,o),k(e,s),k(s,i),k(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&B(l,t),c&8200&&u!==(u=f[15]+"")&&B(i,u)},d(f){f&&p(e)}}}function Ni(r){let e,n,t=r[15]+"",l,o,s,u=r[14]+"",i,a;return{c(){e=A("p"),n=A("b"),l=w(t),o=w("%"),s=w(`
          of households in `),i=w(u),a=w(" have 1 or more cars")},m(f,c){$(f,e,c),k(e,n),k(n,l),k(n,o),k(e,s),k(e,i),k(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&B(l,t),c&8192&&u!==(u=f[14]+"")&&B(i,u)},d(f){f&&p(e)}}}function Ei(r){rr(r);let e;function n(o,s){return o[3]=="percent_households_with_car"?Ni:o[3]=="average_cars_per_household"?Mi:Pi}let t=n(r),l=t(r);return{c(){l.c(),e=Ae()},m(o,s){l.m(o,s),$(o,e,s)},p(o,s){rr(o),t===(t=n(o))&&l?l.p(o,s):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function Fi(r){let e,n;return e=new oe({props:{$$slots:{default:[Ei,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Di(r){let e,n,t,l;const o=[H(Ze),{sourceLayer:Ze},{paint:{"fill-color":he(["get",r[3]],r[6](),r[4]),"fill-opacity":Z(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Fi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=Q(s,o[a]);e=new Xe({props:s}),e.$on("click",r[5]);const u=[H(`${Ze}-outline`),{sourceLayer:Ze},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=Q(i,u[a]);return t=new we({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&88?x(o,[f&0&&ne(H(Ze)),f&0&&{sourceLayer:Ze},f&88&&{paint:{"fill-color":he(["get",a[3]],a[6](),a[4]),"fill-opacity":Z(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&8?x(u,[f&0&&ne(H(`${Ze}-outline`)),f&0&&{sourceLayer:Ze},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(_)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function ji(r){let e,n,t,l,o,s,u,i,a,f,c,_,g,y;function S(C){r[7](C)}let I={id:"percent_households_with_car",$$slots:{right:[bi],default:[mi]},$$scope:{ctx:r}};r[0]!==void 0&&(I.checked=r[0]),e=new re({props:I}),V.push(()=>J(e,"checked",S)),e.$on("change",r[8]);let T=r[3]=="percent_households_with_car"&&lr(r);function E(C){r[9](C)}let D={id:"average_cars_per_household",$$slots:{right:[Ci],default:[vi]},$$scope:{ctx:r}};r[1]!==void 0&&(D.checked=r[1]),o=new re({props:D}),V.push(()=>J(o,"checked",E)),o.$on("change",r[10]);let F=r[3]=="average_cars_per_household"&&or(r);function O(C){r[11](C)}let M={id:"population_density",$$slots:{right:[Ii],default:[Oi]},$$scope:{ctx:r}};r[2]!==void 0&&(M.checked=r[2]),a=new re({props:M}),V.push(()=>J(a,"checked",O)),a.$on("change",r[12]);let N=r[3]=="population_density"&&sr(r);return g=new be({props:{url:`pmtiles://${ge()}/v1/${Ze}.pmtiles`,$$slots:{default:[Di]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),T&&T.c(),l=L(),h(o.$$.fragment),u=L(),F&&F.c(),i=L(),h(a.$$.fragment),c=L(),N&&N.c(),_=L(),h(g.$$.fragment)},m(C,P){b(e,C,P),$(C,t,P),T&&T.m(C,P),$(C,l,P),b(o,C,P),$(C,u,P),F&&F.m(C,P),$(C,i,P),b(a,C,P),$(C,c,P),N&&N.m(C,P),$(C,_,P),b(g,C,P),y=!0},p(C,[P]){const R={};P&65536&&(R.$$scope={dirty:P,ctx:C}),!n&&P&1&&(n=!0,R.checked=C[0],K(()=>n=!1)),e.$set(R),C[3]=="percent_households_with_car"?T?(T.p(C,P),P&8&&m(T,1)):(T=lr(C),T.c(),m(T,1),T.m(l.parentNode,l)):T&&(fe(),d(T,1,1,()=>{T=null}),ue());const q={};P&65536&&(q.$$scope={dirty:P,ctx:C}),!s&&P&2&&(s=!0,q.checked=C[1],K(()=>s=!1)),o.$set(q),C[3]=="average_cars_per_household"?F?(F.p(C,P),P&8&&m(F,1)):(F=or(C),F.c(),m(F,1),F.m(i.parentNode,i)):F&&(fe(),d(F,1,1,()=>{F=null}),ue());const j={};P&65536&&(j.$$scope={dirty:P,ctx:C}),!f&&P&4&&(f=!0,j.checked=C[2],K(()=>f=!1)),a.$set(j),C[3]=="population_density"?N?(N.p(C,P),P&8&&m(N,1)):(N=sr(C),N.c(),m(N,1),N.m(_.parentNode,_)):N&&(fe(),d(N,1,1,()=>{N=null}),ue());const U={};P&65544&&(U.$$scope={dirty:P,ctx:C}),g.$set(U)},i(C){y||(m(e.$$.fragment,C),m(T),m(o.$$.fragment,C),m(F),m(a.$$.fragment,C),m(N),m(g.$$.fragment,C),y=!0)},o(C){d(e.$$.fragment,C),d(T),d(o.$$.fragment,C),d(F),d(a.$$.fragment,C),d(N),d(g.$$.fragment,C),y=!1},d(C){C&&(p(t),p(l),p(u),p(i),p(c),p(_)),v(e,C),T&&T.d(C),v(o,C),F&&F.d(C),v(a,C),N&&N.d(C),v(g,C)}}}let Ze="census_output_areas";const Ri=r=>r.toLocaleString();function Bi(r,e,n){let t=te.sequential_low_to_high,l=!1,o=!1,s=!1,u="";function i(I){let T=I.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${T}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${T}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(I){l=I,n(0,l)}const c=()=>{n(1,o=!1),n(2,s=!1)};function _(I){o=I,n(1,o)}const g=()=>{n(0,l=!1),n(2,s=!1)};function y(I){s=I,n(2,s)}const S=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):s?n(3,u="population_density"):n(3,u=""))},[l,o,s,u,t,i,a,f,c,_,g,y,S]}class Hi extends X{constructor(e){super(),Y(this,e,Bi,ji,G,{})}}function zi(r){let e,n,t;return e=new ye({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Combined authorities`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Ui(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gi(r){let e,n,t,l,o,s,u;return t=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Ui]},$$scope:{ctx:r}}}),s=new De({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of December 2022."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),k(e,n),b(t,e,null),k(e,l),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function qi(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Gi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Wi(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function Vi(r){let e,n;return e=new oe({props:{$$slots:{default:[Wi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xi(r){let e,n,t,l;const o=[H($t),{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Vi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=Q(s,o[a]);e=new Xe({props:s}),e.$on("click",Ji);const u=[H(`${$t}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=Q(i,u[a]);return t=new we({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?x(o,[f&0&&ne(H($t)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?x(u,[f&0&&ne(H(`${$t}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Yi(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:$t,$$slots:{right:[qi],default:[zi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),V.push(()=>J(e,"checked",s)),l=new Ct({props:{data:`${ge()}/v1/${$t}.geojson`,$$slots:{default:[Xi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let $t="combined_authorities";function Ji(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Ki(r,e,n){let t=te.combined_authorities,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Zi extends X{constructor(e){super(),Y(this,e,Ki,Yi,G,{})}}function Qi(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xi(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ea(r){let e;return{c(){e=w(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ta(r){let e,n,t,l,o,s,u,i,a;return t=new W({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[xi]},$$scope:{ctx:r}}}),o=new W({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[ea]},$$scope:{ctx:r}}}),i=new De({}),{c(){e=A("p"),n=w("The 2019 English IMD scores come from "),h(t.$$.fragment),l=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),s=w("."),u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function na(r){let e,n,t;return n=new ae({props:{$$slots:{default:[ta]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ir(r){let e,n;return e=new Ye({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ra(r){let e,n=r[4].LSOA11CD+"",t,l,o,s=r[4].score+"",u,i,a,f,c,_=r[4].rank.toLocaleString()+"",g,y;return{c(){e=A("p"),t=w(n),l=w(` has an IMD score of
        `),o=A("b"),u=w(s),i=L(),a=A("p"),f=w("Rank: "),c=A("b"),g=w(_),y=w(`
        / 32,844 LSOAs`)},m(S,I){$(S,e,I),k(e,t),k(e,l),k(e,o),k(o,u),$(S,i,I),$(S,a,I),k(a,f),k(a,c),k(c,g),k(a,y)},p(S,I){I&16&&n!==(n=S[4].LSOA11CD+"")&&B(t,n),I&16&&s!==(s=S[4].score+"")&&B(u,s),I&16&&_!==(_=S[4].rank.toLocaleString()+"")&&B(g,_)},d(S){S&&(p(e),p(i),p(a))}}}function la(r){let e,n;return e=new oe({props:{$$slots:{default:[ra,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function oa(r){let e,n,t,l;const o=[H(Be),{sourceLayer:Be},{paint:{"fill-color":he(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":Z(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[la]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=Q(s,o[a]);e=new Xe({props:s});const u=[H(`${Be}-outline`),{sourceLayer:Be},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=Q(i,u[a]);return t=new we({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&7?x(o,[f&0&&ne(H(Be)),f&0&&{sourceLayer:Be},f&6&&{paint:{"fill-color":he(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":Z(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&1?x(u,[f&0&&ne(H(`${Be}-outline`)),f&0&&{sourceLayer:Be},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function sa(r){let e,n,t,l,o,s;function u(f){r[3](f)}let i={id:Be,$$slots:{right:[na],default:[Qi]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new re({props:i}),V.push(()=>J(e,"checked",u));let a=r[0]&&ir(r);return o=new be({props:{url:`pmtiles://${ge()}/v1/${Be}.pmtiles`,$$slots:{default:[oa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),l=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],K(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=ir(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(fe(),d(a,1,1,()=>{a=null}),ue());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let Be="imd";function ia(r,e,n){let t=te.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function s(u){o=u,n(0,o)}return[o,t,l,s]}class aa extends X{constructor(e){super(),Y(this,e,ia,sa,G,{})}}function fa(r){let e,n,t;return e=new ye({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function ua(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ca(r){let e,n,t,l,o,s,u;return t=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[ua]},$$scope:{ctx:r}}}),s=new De({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),k(e,n),b(t,e,null),k(e,l),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function $a(r){let e,n,t;return n=new ae({props:{$$slots:{default:[ca]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function pa(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function ma(r){let e,n;return e=new oe({props:{$$slots:{default:[pa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _a(r){let e,n,t,l;const o=[H(pt),{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ma]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=Q(s,o[a]);e=new Xe({props:s}),e.$on("click",da);const u=[H(`${pt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=Q(i,u[a]);return t=new we({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?x(o,[f&0&&ne(H(pt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?x(u,[f&0&&ne(H(`${pt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function ga(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:pt,$$slots:{right:[$a],default:[fa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),V.push(()=>J(e,"checked",s)),l=new Ct({props:{data:`${ge()}/v1/${pt}.geojson`,$$slots:{default:[_a]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let pt="local_authority_districts";function da(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function ha(r,e,n){let t=te.local_authority_districts,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class ba extends X{constructor(e){super(),Y(this,e,ha,ga,G,{})}}function va(r){let e,n,t;return e=new ye({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function wa(r){let e;return{c(){e=w(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ka(r){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ya(r){let e;return{c(){e=w(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Sa(r){let e;return{c(){e=w("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ca(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Oa(r){let e,n,t,l,o,s,u,i,a,f,c,_,g,y,S,I,T,E,D,F,O,M;return t=new W({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[wa]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ka]},$$scope:{ctx:r}}}),u=new W({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[ya]},$$scope:{ctx:r}}}),g=new W({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Sa]},$$scope:{ctx:r}}}),E=new W({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Ca]},$$scope:{ctx:r}}}),O=new De({}),{c(){e=A("p"),n=w("LPAs may be a "),h(t.$$.fragment),l=w(", "),h(o.$$.fragment),s=w("y, or "),h(u.$$.fragment),i=w("."),a=L(),f=A("p"),c=A("strong"),_=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(g.$$.fragment),y=w(" to get more details."),S=L(),I=A("p"),T=w("Data from ONS Geography via "),h(E.$$.fragment),D=w(", as of November 2022."),F=L(),h(O.$$.fragment)},m(N,C){$(N,e,C),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,s),b(u,e,null),k(e,i),$(N,a,C),$(N,f,C),k(f,c),k(c,_),b(g,c,null),k(c,y),$(N,S,C),$(N,I,C),k(I,T),b(E,I,null),k(I,D),$(N,F,C),b(O,N,C),M=!0},p(N,C){const P={};C&16&&(P.$$scope={dirty:C,ctx:N}),t.$set(P);const R={};C&16&&(R.$$scope={dirty:C,ctx:N}),o.$set(R);const q={};C&16&&(q.$$scope={dirty:C,ctx:N}),u.$set(q);const j={};C&16&&(j.$$scope={dirty:C,ctx:N}),g.$set(j);const U={};C&16&&(U.$$scope={dirty:C,ctx:N}),E.$set(U)},i(N){M||(m(t.$$.fragment,N),m(o.$$.fragment,N),m(u.$$.fragment,N),m(g.$$.fragment,N),m(E.$$.fragment,N),m(O.$$.fragment,N),M=!0)},o(N){d(t.$$.fragment,N),d(o.$$.fragment,N),d(u.$$.fragment,N),d(g.$$.fragment,N),d(E.$$.fragment,N),d(O.$$.fragment,N),M=!1},d(N){N&&(p(e),p(a),p(f),p(S),p(I),p(F)),v(t),v(o),v(u),v(g),v(E),v(O,N)}}}function Ta(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Oa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Aa(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function La(r){let e,n;return e=new oe({props:{$$slots:{default:[Aa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ia(r){let e,n,t,l;const o=[H(He),{sourceLayer:He},{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[La]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=Q(s,o[a]);e=new Xe({props:s});const u=[H(`${He}-outline`),{sourceLayer:He},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=Q(i,u[a]);return t=new we({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?x(o,[f&0&&ne(H(He)),f&0&&{sourceLayer:He},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?x(u,[f&0&&ne(H(`${He}-outline`)),f&0&&{sourceLayer:He},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Pa(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:He,$$slots:{right:[Ta],default:[va]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),V.push(()=>J(e,"checked",s)),l=new be({props:{url:`pmtiles://${ge()}/v1/${He}.pmtiles`,$$slots:{default:[Ia]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let He="local_planning_authorities";function Ma(r,e,n){let t=te.local_planning_authorities,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Na extends X{constructor(e){super(),Y(this,e,Ma,Pa,G,{})}}function Ea(r){let e,n,t;return e=new ye({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Fa(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Da(r){let e,n,t,l,o,s,u;return t=new W({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Fa]},$$scope:{ctx:r}}}),s=new De({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),k(e,n),b(t,e,null),k(e,l),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function ja(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Da]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Ra(r){let e,n=r[3].Name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&B(t,n)},d(l){l&&p(e)}}}function Ba(r){let e,n;return e=new oe({props:{$$slots:{default:[Ra,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ha(r){let e,n,t,l;const o=[H(ze),{sourceLayer:ze},{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Ba]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=Q(s,o[a]);e=new Xe({props:s}),e.$on("click",Ua);const u=[H(`${ze}-outline`),{sourceLayer:ze},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=Q(i,u[a]);return t=new we({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?x(o,[f&0&&ne(H(ze)),f&0&&{sourceLayer:ze},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?x(u,[f&0&&ne(H(`${ze}-outline`)),f&0&&{sourceLayer:ze},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function za(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:ze,$$slots:{right:[ja],default:[Ea]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),V.push(()=>J(e,"checked",s)),l=new be({props:{url:`pmtiles://${ge()}/v1/${ze}.pmtiles`,$$slots:{default:[Ha]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let ze="parliamentary_constituencies";function Ua(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Ga(r,e,n){let t=te.parliamentary_constituencies,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class qa extends X{constructor(e){super(),Y(this,e,Ga,za,G,{})}}function Wa(r){let e;return{c(){e=w("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Va(r){let e;return{c(){e=w(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xa(r){let e;return{c(){e=w(`Extrium
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ya(r){let e;return{c(){e=w(`FAQ
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ja(r){let e,n,t,l,o,s,u,i,a,f,c,_,g,y,S,I;return t=new W({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Va]},$$scope:{ctx:r}}}),f=new W({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[Xa]},$$scope:{ctx:r}}}),_=new W({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[Ya]},$$scope:{ctx:r}}}),S=new De({}),{c(){e=A("p"),n=w("Most layers show air quality data from "),h(t.$$.fragment),l=w(`. The measurements are annual means, in units of
        gm
        `),o=A("sup"),o.textContent="3",s=w(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=L(),i=A("p"),a=w("The noise layer is from "),h(f.$$.fragment),c=w(", using 2017 data. See their "),h(_.$$.fragment),g=w("."),y=L(),h(S.$$.fragment)},m(T,E){$(T,e,E),k(e,n),b(t,e,null),k(e,l),k(e,o),k(e,s),$(T,u,E),$(T,i,E),k(i,a),b(f,i,null),k(i,c),b(_,i,null),k(i,g),$(T,y,E),b(S,T,E),I=!0},p(T,E){const D={};E&2048&&(D.$$scope={dirty:E,ctx:T}),t.$set(D);const F={};E&2048&&(F.$$scope={dirty:E,ctx:T}),f.$set(F);const O={};E&2048&&(O.$$scope={dirty:E,ctx:T}),_.$set(O)},i(T){I||(m(t.$$.fragment,T),m(f.$$.fragment,T),m(_.$$.fragment,T),m(S.$$.fragment,T),I=!0)},o(T){d(t.$$.fragment,T),d(f.$$.fragment,T),d(_.$$.fragment,T),d(S.$$.fragment,T),I=!1},d(T){T&&(p(e),p(u),p(i),p(y)),v(t),v(f),v(_),v(S,T)}}}function Ka(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Ja]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ar(r){let e,n,t,l,o=r[3](r[0])+"",s,u,i,a,f,c,_,g,y,S,I,T,E;function D(C){r[7](C)}let F={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};r[0]!==void 0&&(F.value=r[0]),e=new Mt({props:F}),V.push(()=>J(e,"value",D));const O=[Qa,Za],M=[];function N(C,P){return C[0]=="Noise"?0:1}return g=N(r),y=M[g]=O[g](r),{c(){h(e.$$.fragment),t=L(),l=A("p"),s=w(o),u=L(),i=A("div"),a=A("label"),f=w(`Opacity
      `),c=A("input"),_=L(),y.c(),S=Ae(),z(c,"type","range"),z(c,"min","0"),z(c,"max","100")},m(C,P){b(e,C,P),$(C,t,P),$(C,l,P),k(l,s),$(C,u,P),$(C,i,P),k(i,a),k(a,f),k(a,c),lt(c,r[2]),$(C,_,P),M[g].m(C,P),$(C,S,P),I=!0,T||(E=[at(c,"change",r[8]),at(c,"input",r[8])],T=!0)},p(C,P){const R={};!n&&P&1&&(n=!0,R.value=C[0],K(()=>n=!1)),e.$set(R),(!I||P&1)&&o!==(o=C[3](C[0])+"")&&B(s,o),P&4&&lt(c,C[2]);let q=g;g=N(C),g===q?M[g].p(C,P):(fe(),d(M[q],1,1,()=>{M[q]=null}),ue(),y=M[g],y?y.p(C,P):(y=M[g]=O[g](C),y.c()),m(y,1),y.m(S.parentNode,S))},i(C){I||(m(e.$$.fragment,C),m(y),I=!0)},o(C){d(e.$$.fragment,C),d(y),I=!1},d(C){C&&(p(t),p(l),p(u),p(i),p(_),p(S)),v(e,C),M[g].d(C),T=!1,Br(E)}}}function Za(r){let e,n,t;return{c(){e=A("img"),kn(e.src,n=r[5](r[0]))||z(e,"src",n),z(e,"width",150),z(e,"alt",t=`Legend for ${r[0]} layer`)},m(l,o){$(l,e,o)},p(l,o){o&1&&!kn(e.src,n=l[5](l[0]))&&z(e,"src",n),o&1&&t!==(t=`Legend for ${l[0]} layer`)&&z(e,"alt",t)},i:ee,o:ee,d(l){l&&p(e)}}}function Qa(r){let e,n;return e=new Ye({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xa(r){let e,n;const t=[H("pollution"),{paint:{"raster-opacity":r[2]/100}},{layout:{visibility:r[1]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new kl({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&6?x(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ef(r){let e,n,t,l,o,s;function u(f){r[6](f)}let i={id:"pollution",$$slots:{right:[Ka],default:[Wa]},$$scope:{ctx:r}};r[1]!==void 0&&(i.checked=r[1]),e=new re({props:i}),V.push(()=>J(e,"checked",u));let a=r[1]&&ar(r);return o=new Dl({props:{tiles:[r[4](r[0])],tileSize:256,$$slots:{default:[xa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),l=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),s=!0},p(f,[c]){const _={};c&2048&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],K(()=>n=!1)),e.$set(_),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=ar(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(fe(),d(a,1,1,()=>{a=null}),ue());const g={};c&1&&(g.tiles=[f[4](f[0])]),c&2054&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}function tf(r,e,n){let t,l=!1,o=50,s="PM25_viridis";function u(){return s=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(y){return t[1]}function a(y){let S=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${S}`}function f(y){let S=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${S}`}function c(y){l=y,n(1,l)}function _(y){s=y,n(0,s)}function g(){o=Pt(this.value),n(2,o)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[s])},[s,l,o,i,a,f,c,_,g]}class nf extends X{constructor(e){super(),Y(this,e,tf,ef,G,{})}}function rf(r){let e,n,t;return e=new ye({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Wards`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function lf(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function of(r){let e,n,t,l,o,s,u;return t=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[lf]},$$scope:{ctx:r}}}),s=new De({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),k(e,n),b(t,e,null),k(e,l),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function sf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[of]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function af(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function ff(r){let e,n;return e=new oe({props:{$$slots:{default:[af,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function uf(r){let e,n,t,l;const o=[H(Ue),{sourceLayer:Ue},{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ff]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=Q(s,o[a]);e=new Xe({props:s}),e.$on("click",$f);const u=[H(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=Q(i,u[a]);return t=new we({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?x(o,[f&0&&ne(H(Ue)),f&0&&{sourceLayer:Ue},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?x(u,[f&0&&ne(H(`${Ue}-outline`)),f&0&&{sourceLayer:Ue},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function cf(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:Ue,$$slots:{right:[sf],default:[rf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),V.push(()=>J(e,"checked",s)),l=new be({props:{url:`pmtiles://${ge()}/v1/${Ue}.pmtiles`,$$slots:{default:[uf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let Ue="wards";function $f(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function pf(r,e,n){let t=te.wards,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class mf extends X{constructor(e){super(),Y(this,e,pf,cf,G,{})}}function _f(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gf(r){let e,n,t,l;return t=new W({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[_f]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment)},m(o,s){$(o,e,s),k(e,n),b(t,e,null),l=!0},p(o,[s]){const u={};s&1&&(u.$$scope={dirty:s,ctx:o}),t.$set(u)},i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&p(e),v(t)}}}class ot extends X{constructor(e){super(),Y(this,e,null,gf,G,{})}}function df(r){let e,n,t;return e=new ye({props:{color:te.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=w(`
  Bus routes`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function hf(r){let e;return{c(){e=w(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bf(r){let e,n,t,l,o,s,u,i,a;return o=new W({props:{href:"https://gtfs.org",$$slots:{default:[hf]},$$scope:{ctx:r}}}),i=new ot({}),{c(){e=A("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=L(),t=A("p"),l=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),s=w(`, and doesn't include which routes are run or the
        frequency of service.`),u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),k(t,l),b(o,t,null),k(t,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const _={};c&8&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),v(o),v(i,f)}}}function vf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[bf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function wf(r){let e;return{c(){e=A("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function kf(r){let e;return{c(){e=A("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function yf(r){let e;function n(o,s){return o[2].has_bus_lane?kf:wf}let t=n(r),l=t(r);return{c(){l.c(),e=Ae()},m(o,s){l.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function Sf(r){let e,n;return e=new oe({props:{$$slots:{default:[yf,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Cf(r){let e,n;const t=[H(mt),{sourceLayer:mt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],te.bus_route_with_lane,te.bus_route_without_lane],"line-width":5,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Sf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new we({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?x(t,[s&0&&ne(H(mt)),s&0&&{sourceLayer:mt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Of(r){let e,n,t,l,o;function s(i){r[1](i)}let u={id:mt,$$slots:{right:[vf],default:[df]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),V.push(()=>J(e,"checked",s)),l=new be({props:{url:`pmtiles://${ge()}/v1/${mt}.pmtiles`,$$slots:{default:[Cf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],K(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let mt="bus_routes";function Tf(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class Af extends X{constructor(e){super(),Y(this,e,Tf,Of,G,{})}}function fr(r){const e=Rf(r[5]);r[6]=e[0],r[7]=e[1],r[8]=e[2]}function ur(r,e,n){const t=r.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function Lf(r){let e;return{c(){e=w("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function If(r){let e,n,t,l,o,s,u,i;return u=new ot({}),{c(){e=A("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=L(),t=A("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=L(),o=A("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=L(),h(u.$$.fragment)},m(a,f){$(a,e,f),$(a,n,f),$(a,t,f),$(a,l,f),$(a,o,f),$(a,s,f),b(u,a,f),i=!0},p:ee,i(a){i||(m(u.$$.fragment,a),i=!0)},o(a){d(u.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(l),p(o),p(s)),v(u,a)}}}function Pf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[If]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function cr(r){let e,n,t;return n=new et({props:{$$slots:{default:[Nf]},$$scope:{ctx:r}}}),{c(){e=A("div"),h(n.$$.fragment),ve(e,"border","1px solid black"),ve(e,"padding","8px")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Mf(r){let e,n,t=r[9]+"",l,o,s;return e=new ye({props:{color:r[10]}}),{c(){h(e.$$.fragment),n=L(),l=w(t),o=L()},m(u,i){b(e,u,i),$(u,n,i),$(u,l,i),$(u,o,i),s=!0},p:ee,i(u){s||(m(e.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(l),p(o)),v(e,u)}}}function $r(r){let e,n,t;function l(s){r[4](s,r[6])}let o={id:r[6],$$slots:{default:[Mf]},$$scope:{ctx:r}};return r[1][r[6]]!==void 0&&(o.checked=r[1][r[6]]),e=new re({props:o}),V.push(()=>J(e,"checked",l)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){r=s;const i={};u&8192&&(i.$$scope={dirty:u,ctx:r}),!n&&u&6&&(n=!0,i.checked=r[1][r[6]],K(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Nf(r){let e,n,t=We(r[2]),l=[];for(let s=0;s<t.length;s+=1)l[s]=$r(ur(r,t,s));const o=s=>d(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Ae()},m(s,u){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,u);$(s,e,u),n=!0},p(s,u){if(u&6){t=We(s[2]);let i;for(i=0;i<t.length;i+=1){const a=ur(s,t,i);l[i]?(l[i].p(a,u),m(l[i],1)):(l[i]=$r(a),l[i].c(),m(l[i],1),l[i].m(e.parentNode,e))}for(fe(),i=t.length;i<l.length;i+=1)o(i);ue()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)m(l[u]);n=!0}},o(s){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)d(l[u]);n=!1},d(s){s&&p(e),Lt(l,s)}}}function Ef(r){fr(r);let e,n=r[6]+"",t,l,o,s,u,i=r[7]+"",a,f,c,_,g=r[8]+"",y;return{c(){e=A("h2"),t=w(n),l=L(),o=A("p"),s=w("Direction: "),u=A("b"),a=L(),f=A("p"),c=w("Width: "),_=A("b"),y=w(g)},m(S,I){$(S,e,I),k(e,t),$(S,l,I),$(S,o,I),k(o,s),k(o,u),u.innerHTML=i,$(S,a,I),$(S,f,I),k(f,c),k(f,_),k(_,y)},p(S,I){fr(S),I&32&&n!==(n=S[6]+"")&&B(t,n),I&32&&i!==(i=S[7]+"")&&(u.innerHTML=i),I&32&&g!==(g=S[8]+"")&&B(y,g)},d(S){S&&(p(e),p(l),p(o),p(a),p(f))}}}function Ff(r){let e,n;return e=new oe({props:{$$slots:{default:[Ef,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8224&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Df(r){let e,n;const t=[H(_t),{sourceLayer:_t},{paint:{"line-color":Vt(["get","kind"],{track:te.cycle_paths.track,lane:te.cycle_paths.lane,shared_use_segregated:te.cycle_paths.shared_use_segregated,shared_use_unsegregated:te.cycle_paths.shared_use_unsegregated},"red"),"line-width":Fe,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{filter:pr(r[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[Ff]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new we({props:l}),e.$on("click",Bf),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?x(t,[s&0&&ne(H(_t)),s&0&&{sourceLayer:_t},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:pr(o[1])},t[5],t[6],t[7]]):{};s&8192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function jf(r){let e,n,t,l,o,s;function u(f){r[3](f)}let i={id:_t,$$slots:{right:[Pf],default:[Lf]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new re({props:i}),V.push(()=>J(e,"checked",u));let a=r[0]&&cr(r);return o=new be({props:{url:`pmtiles://${ge()}/v1/${_t}.pmtiles`,$$slots:{default:[Df]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),l=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),s=!0},p(f,[c]){const _={};c&8192&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],K(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=cr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(fe(),d(a,1,1,()=>{a=null}),ue());const g={};c&8195&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let _t="cycle_paths";function Rf(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function Bf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function pr(r){let e=Object.keys(r).filter(n=>r[n]);return["in",["get","kind"],["literal",e]]}function Hf(r,e,n){let t=[["track","Separated tracks",te.cycle_paths.track],["lane","Unprotected lanes",te.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",te.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",te.cycle_paths.shared_use_unsegregated]],l=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){l=i,n(0,l)}function u(i,a){r.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[l,o,t,s,u]}class zf extends X{constructor(e){super(),Y(this,e,Hf,jf,G,{})}}function Uf(r){let e,n,t;return e=new ye({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Major Road Network`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Gf(r){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qf(r){let e,n,t,l,o,s,u;return t=new W({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Gf]},$$scope:{ctx:r}}}),s=new De({}),{c(){e=A("p"),n=w("Data from the "),h(t.$$.fragment),l=w(", as of September 2021."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),k(e,n),b(t,e,null),k(e,l),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Wf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[qf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Vf(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&B(t,n)},d(l){l&&p(e)}}}function Xf(r){let e,n;return e=new oe({props:{$$slots:{default:[Vf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Yf(r){let e,n;const t=[H(gt),{sourceLayer:gt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Xf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new we({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?x(t,[s&0&&ne(H(gt)),s&0&&{sourceLayer:gt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Jf(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:gt,$$slots:{right:[Wf],default:[Uf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),V.push(()=>J(e,"checked",s)),l=new be({props:{url:`pmtiles://${ge()}/v1/${gt}.pmtiles`,$$slots:{default:[Yf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let gt="mrn";function Kf(r,e,n){let t=te.mrn,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Zf extends X{constructor(e){super(),Y(this,e,Kf,Jf,G,{})}}function Qf(r){let e;return{c(){e=w("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function eu(r){let e,n,t,l,o,s,u,i,a;return u=new W({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[xf]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road. (You won't be able to distinguish left and right
        though; use the OS Road basemap instead.)`,n=L(),t=A("p"),t.textContent="Data valid as of 1 January, 2024",l=L(),o=A("p"),s=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),i=w(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,l,c),$(f,o,c),k(o,s),b(u,o,null),k(o,i),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),u.$set(_)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){d(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(l),p(o)),v(u)}}}function tu(r){let e,n,t;return n=new ae({props:{$$slots:{default:[eu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function mr(r){let e,n;return e=new Ye({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function nu(r){let e,n,t,l=r[4].side+"",o,s,u,i,a,f=r[4].average+"",c,_,g,y,S,I,T=r[4].minimum+"",E,D;return{c(){e=A("p"),n=w("Side of the road: "),t=A("b"),o=w(l),s=L(),u=A("p"),i=w("Average width: "),a=A("b"),c=w(f),_=w(`
        meters`),g=L(),y=A("p"),S=w("Minimum width: "),I=A("b"),E=w(T),D=w(`
        meters`)},m(F,O){$(F,e,O),k(e,n),k(e,t),k(t,o),$(F,s,O),$(F,u,O),k(u,i),k(u,a),k(a,c),k(u,_),$(F,g,O),$(F,y,O),k(y,S),k(y,I),k(I,E),k(y,D)},p(F,O){O&16&&l!==(l=F[4].side+"")&&B(o,l),O&16&&f!==(f=F[4].average+"")&&B(c,f),O&16&&T!==(T=F[4].minimum+"")&&B(E,T)},d(F){F&&(p(e),p(s),p(u),p(g),p(y))}}}function ru(r){let e,n;return e=new oe({props:{$$slots:{default:[nu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function lu(r){let e,n;const t=[H(dt),{sourceLayer:dt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":he(["get","average"],r[2],r[1]),"line-width":Fe,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[ru]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new we({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?x(t,[s&0&&ne(H(dt)),s&0&&{sourceLayer:dt},t[2],t[3],s&6&&{paint:{"line-color":he(["get","average"],o[2],o[1]),"line-width":Fe,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ou(r){let e,n,t,l,o,s;function u(f){r[3](f)}let i={id:dt,$$slots:{right:[tu],default:[Qf]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new re({props:i}),V.push(()=>J(e,"checked",u));let a=r[0]&&mr(r);return o=new be({props:{url:`pmtiles://${Zt()}/v1/${dt}.pmtiles`,$$slots:{default:[lu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),l=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],K(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=mr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(fe(),d(a,1,1,()=>{a=null}),ue());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let dt="pavement_widths";function su(r,e,n){let t=te.sequential_low_to_high,l=[0,2,4,6,8,13],o=!1;function s(u){o=u,n(0,o)}return[o,t,l,s]}class iu extends X{constructor(e){super(),Y(this,e,su,ou,G,{})}}function au(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fu(r){let e;return{c(){e=w("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uu(r){let e;return{c(){e=w("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cu(r){let e,n,t,l,o,s,u,i,a,f,c;return u=new W({props:{href:"https://www.pct.bike",$$slots:{default:[fu]},$$scope:{ctx:r}}}),a=new W({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[uu]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=L(),t=A("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=L(),o=A("p"),s=w("See "),h(u.$$.fragment),i=w(" and "),h(a.$$.fragment),f=w(" for details on methodology and data sources.")},m(_,g){$(_,e,g),$(_,n,g),$(_,t,g),$(_,l,g),$(_,o,g),k(o,s),b(u,o,null),k(o,i),b(a,o,null),k(o,f),c=!0},p(_,g){const y={};g&1024&&(y.$$scope={dirty:g,ctx:_}),u.$set(y);const S={};g&1024&&(S.$$scope={dirty:g,ctx:_}),a.$set(S)},i(_){c||(m(u.$$.fragment,_),m(a.$$.fragment,_),c=!0)},o(_){d(u.$$.fragment,_),d(a.$$.fragment,_),c=!1},d(_){_&&(p(e),p(n),p(t),p(l),p(o)),v(u),v(a)}}}function $u(r){let e,n,t;return n=new ae({props:{$$slots:{default:[cu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function _r(r){let e,n,t,l,o,s,u,i;e=new Ye({props:{colorScale:r[3],limits:r[4]}});function a(g){r[7](g)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new Hr({props:f}),V.push(()=>J(t,"value",a));function c(g){r[8](g)}let _={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(_.value=r[1]),s=new Mt({props:_}),V.push(()=>J(s,"value",c)),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),o=L(),h(s.$$.fragment)},m(g,y){b(e,g,y),$(g,n,y),b(t,g,y),$(g,o,y),b(s,g,y),i=!0},p(g,y){const S={};!l&&y&1&&(l=!0,S.value=g[0],K(()=>l=!1)),t.$set(S);const I={};!u&&y&2&&(u=!0,I.value=g[1],K(()=>u=!1)),s.$set(I)},i(g){i||(m(e.$$.fragment,g),m(t.$$.fragment,g),m(s.$$.fragment,g),i=!0)},o(g){d(e.$$.fragment,g),d(t.$$.fragment,g),d(s.$$.fragment,g),i=!1},d(g){g&&(p(n),p(o)),v(e,g),v(t,g),v(s,g)}}}function pu(r){let e,n=r[5](r[9])+"",t;return{c(){e=new dn(!1),t=Ae(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function mu(r){let e,n;return e=new oe({props:{$$slots:{default:[pu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _u(r){let e,n;const t=[H(Ge),{sourceLayer:Ge},{paint:{"line-color":he(["get",r[1]],r[4],r[3]),"line-width":Fe,"line-opacity":Z(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ge?"visible":"none"}}];let l={$$slots:{default:[mu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new we({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&31?x(t,[s&0&&ne(H(Ge)),s&0&&{sourceLayer:Ge},s&26&&{paint:{"line-color":he(["get",o[1]],o[4],o[3]),"line-width":Fe,"line-opacity":Z(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==Ge?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function gu(r){let e,n=r[5](r[9])+"",t;return{c(){e=new dn(!1),t=Ae(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function du(r){let e,n;return e=new oe({props:{$$slots:{default:[gu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function hu(r){let e,n;const t=[H(st),{sourceLayer:st},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":he(["get",r[1]],r[4],r[3]),"line-width":Fe,"line-opacity":Z(1,.5)}},{layout:{visibility:r[2]&&r[0]==st?"visible":"none"}}];let l={$$slots:{default:[du]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new we({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&31?x(t,[s&0&&ne(H(st)),s&0&&{sourceLayer:st},t[2],t[3],s&26&&{paint:{"line-color":he(["get",o[1]],o[4],o[3]),"line-width":Fe,"line-opacity":Z(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==st?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function bu(r){let e,n,t,l,o,s,u,i;function a(_){r[6](_)}let f={id:Ge,$$slots:{right:[$u],default:[au]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new re({props:f}),V.push(()=>J(e,"checked",a));let c=r[2]&&_r(r);return o=new be({props:{url:`pmtiles://${ge()}/v1/${Ge}.pmtiles`,$$slots:{default:[_u]},$$scope:{ctx:r}}}),u=new be({props:{url:`pmtiles://${ge()}/v1/${st}.pmtiles`,$$slots:{default:[hu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),c&&c.c(),l=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment)},m(_,g){b(e,_,g),$(_,t,g),c&&c.m(_,g),$(_,l,g),b(o,_,g),$(_,s,g),b(u,_,g),i=!0},p(_,[g]){const y={};g&1024&&(y.$$scope={dirty:g,ctx:_}),!n&&g&4&&(n=!0,y.checked=_[2],K(()=>n=!1)),e.$set(y),_[2]?c?(c.p(_,g),g&4&&m(c,1)):(c=_r(_),c.c(),m(c,1),c.m(l.parentNode,l)):c&&(fe(),d(c,1,1,()=>{c=null}),ue());const S={};g&1031&&(S.$$scope={dirty:g,ctx:_}),o.$set(S);const I={};g&1031&&(I.$$scope={dirty:g,ctx:_}),u.$set(I)},i(_){i||(m(e.$$.fragment,_),m(c),m(o.$$.fragment,_),m(u.$$.fragment,_),i=!0)},o(_){d(e.$$.fragment,_),d(c),d(o.$$.fragment,_),d(u.$$.fragment,_),i=!1},d(_){_&&(p(t),p(l),p(s)),v(e,_),c&&c.d(_),v(o,_),v(u,_)}}}let Ge="pct_commute",st="pct_school";function vu(r,e,n){let t=te.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Ge,s="baseline",u=!1;function i(_){let g=_.baseline,y=_.gov_target,S=_.go_dutch,I=`<h2>Trip purpose: ${o==Ge?"commuting":"school"}</h2>`;if(I+=`<p>Baseline (2011): <b>${g.toLocaleString()}</b></p>`,g==0)I+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,I+=`<p>Go Dutch: <b>${S.toLocaleString()}</b></p>`;else{let T=(y/g).toFixed(1),E=(S/g).toFixed(1);I+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${T}x</b> of baseline)</p>`,I+=`<p>Go Dutch: ${S.toLocaleString()} (<b>${E}x</b> of baseline)</p>`}return I}function a(_){u=_,n(2,u)}function f(_){o=_,n(0,o)}function c(_){s=_,n(1,s)}return[o,s,u,t,l,i,a,f,c]}class wu extends X{constructor(e){super(),Y(this,e,vu,bu,G,{})}}function ku(r){let e;return{c(){e=w("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function yu(r){let e;return{c(){e=w("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Su(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Cu(r){let e,n,t,l,o,s,u,i,a,f,c,_;return t=new W({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[yu]},$$scope:{ctx:r}}}),f=new W({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Su]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("The average speed data is collected over a six-month period by "),h(t.$$.fragment),l=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=L(),s=A("p"),s.textContent="Data valid as of 1 September, 2023",u=L(),i=A("p"),a=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=w(".")},m(g,y){$(g,e,y),k(e,n),b(t,e,null),k(e,l),$(g,o,y),$(g,s,y),$(g,u,y),$(g,i,y),k(i,a),b(f,i,null),k(i,c),_=!0},p(g,y){const S={};y&256&&(S.$$scope={dirty:y,ctx:g}),t.$set(S);const I={};y&256&&(I.$$scope={dirty:y,ctx:g}),f.$set(I)},i(g){_||(m(t.$$.fragment,g),m(f.$$.fragment,g),_=!0)},o(g){d(t.$$.fragment,g),d(f.$$.fragment,g),_=!1},d(g){g&&(p(e),p(o),p(s),p(u),p(i)),v(t),v(f)}}}function Ou(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Cu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function gr(r){let e,n,t,l,o;e=new Ye({props:{colorScale:r[2],limits:r[3]}});function s(i){r[6](i)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new Hr({props:u}),V.push(()=>J(t,"value",s)),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),o=!0},p(i,a){const f={};!l&&a&1&&(l=!0,f.value=i[0],K(()=>l=!1)),t.$set(f)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),v(e,i),v(t,i)}}}function Tu(r){let e,n,t=r[7].indicative_mph+"",l,o,s,u,i,a=r[7].highest_mph+"",f,c,_=r[4][r[7].highest_description]+"",g,y;return{c(){e=A("p"),n=w("Posted speed limit: "),l=w(t),o=w(" mph"),s=L(),u=A("p"),i=w("Highest average speed: "),f=w(a),c=w(" mph (during "),g=w(_),y=w(")")},m(S,I){$(S,e,I),k(e,n),k(e,l),k(e,o),$(S,s,I),$(S,u,I),k(u,i),k(u,f),k(u,c),k(u,g),k(u,y)},p(S,I){I&128&&t!==(t=S[7].indicative_mph+"")&&B(l,t),I&128&&a!==(a=S[7].highest_mph+"")&&B(f,a),I&128&&_!==(_=S[4][S[7].highest_description]+"")&&B(g,_)},d(S){S&&(p(e),p(s),p(u))}}}function Au(r){let e,n;return e=new oe({props:{$$slots:{default:[Tu,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Lu(r){let e,n;const t=[H(ht),{sourceLayer:ht},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":he(["get",r[0]],r[3],r[2]),"line-width":Fe,"line-opacity":Z(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[Au]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new we({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&15?x(t,[s&0&&ne(H(ht)),s&0&&{sourceLayer:ht},t[2],t[3],s&13&&{paint:{"line-color":he(["get",o[0]],o[3],o[2]),"line-width":Fe,"line-opacity":Z(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Iu(r){let e,n,t,l,o,s;function u(f){r[5](f)}let i={id:ht,$$slots:{right:[Ou],default:[ku]},$$scope:{ctx:r}};r[1]!==void 0&&(i.checked=r[1]),e=new re({props:i}),V.push(()=>J(e,"checked",u));let a=r[1]&&gr(r);return o=new be({props:{url:`pmtiles://${Zt()}/v1/${ht}.pmtiles`,$$slots:{default:[Lu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),l=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),s=!0},p(f,[c]){const _={};c&256&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],K(()=>n=!1)),e.$set(_),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=gr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(fe(),d(a,1,1,()=>{a=null}),ue());const g={};c&259&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ht="road_speeds";function Pu(r,e,n){let t=te.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",s=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(f){s=f,n(1,s)}function a(f){o=f,n(0,o)}return[o,s,t,l,u,i,a]}class Mu extends X{constructor(e){super(),Y(this,e,Pu,Iu,G,{})}}function Nu(r){let e;return{c(){e=w("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Eu(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fu(r){let e,n,t,l,o,s,u,i,a;return u=new W({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Eu]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=L(),t=A("p"),t.textContent="Data valid as of 1 September, 2023",l=L(),o=A("p"),s=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),i=w(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,l,c),$(f,o,c),k(o,s),b(u,o,null),k(o,i),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),u.$set(_)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){d(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(l),p(o)),v(u)}}}function Du(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Fu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function dr(r){let e,n;return e=new Ye({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ju(r){let e,n,t,l=r[4].average+"",o,s,u,i,a,f,c=r[4].minimum+"",_,g;return{c(){e=A("p"),n=w("Average width: "),t=A("b"),o=w(l),s=w(`
        meters`),u=L(),i=A("p"),a=w("Minimum width: "),f=A("b"),_=w(c),g=w(`
        meters`)},m(y,S){$(y,e,S),k(e,n),k(e,t),k(t,o),k(e,s),$(y,u,S),$(y,i,S),k(i,a),k(i,f),k(f,_),k(i,g)},p(y,S){S&16&&l!==(l=y[4].average+"")&&B(o,l),S&16&&c!==(c=y[4].minimum+"")&&B(_,c)},d(y){y&&(p(e),p(u),p(i))}}}function Ru(r){let e,n;return e=new oe({props:{$$slots:{default:[ju,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Bu(r){let e,n;const t=[H(bt),{sourceLayer:bt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":he(["get","average"],r[2],r[1]),"line-width":Fe,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Ru]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new we({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?x(t,[s&0&&ne(H(bt)),s&0&&{sourceLayer:bt},t[2],t[3],s&6&&{paint:{"line-color":he(["get","average"],o[2],o[1]),"line-width":Fe,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Hu(r){let e,n,t,l,o,s;function u(f){r[3](f)}let i={id:bt,$$slots:{right:[Du],default:[Nu]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new re({props:i}),V.push(()=>J(e,"checked",u));let a=r[0]&&dr(r);return o=new be({props:{url:`pmtiles://${Zt()}/v1/${bt}.pmtiles`,$$slots:{default:[Bu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),l=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],K(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=dr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(fe(),d(a,1,1,()=>{a=null}),ue());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let bt="road_widths";function zu(r,e,n){let t=te.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,l,s]}class Uu extends X{constructor(e){super(),Y(this,e,zu,Hu,G,{})}}function Gu(r){let e,n,t;return{c(){e=A("input"),z(e,"class","govuk-file-upload"),z(e,"id","load-criticals"),z(e,"type","file")},m(l,o){$(l,e,o),r[7](e),n||(t=at(e,"change",r[5]),n=!0)},p:ee,d(l){l&&p(e),r[7](null),n=!1,t()}}}function hr(r){let e,n;return e=new et({props:{small:!0,$$slots:{default:[Wu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qu(r){let e,n,t=r[2].toLocaleString()+"",l,o,s;return e=new ye({props:{color:Tt}}),{c(){h(e.$$.fragment),n=w(`
        Show `),l=w(t),o=w(" issues")},m(u,i){b(e,u,i),$(u,n,i),$(u,l,i),$(u,o,i),s=!0},p(u,i){(!s||i&4)&&t!==(t=u[2].toLocaleString()+"")&&B(l,t)},i(u){s||(m(e.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(l),p(o)),v(e,u)}}}function Wu(r){let e,n,t;function l(s){r[8](s)}let o={id:"show-criticals",$$slots:{default:[qu]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new re({props:o}),V.push(()=>J(e,"checked",l)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){const i={};u&2052&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],K(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Vu(r){let e,n,t,l,o,s;e=new Rr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[Gu]},$$scope:{ctx:r}}}),t=new zr({props:{errorMessage:r[3]}});let u=r[2]>0&&hr(r);return{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),u&&u.c(),o=Ae()},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),$(i,l,a),u&&u.m(i,a),$(i,o,a),s=!0},p(i,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?u?(u.p(i,a),a&4&&m(u,1)):(u=hr(i),u.c(),m(u,1),u.m(o.parentNode,o)):u&&(fe(),d(u,1,1,()=>{u=null}),ue())},i(i){s||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(u),s=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(u),s=!1},d(i){i&&(p(n),p(l),p(o)),v(e,i),v(t,i),u&&u.d(i)}}}function Xu(r){let e,n,t=r[10].critical_type+"",l,o,s,u,i,a=r[10].location_description+"",f,c,_,g,y,S=r[10].notes+"",I,T,E,D,F,O,M,N=r[10].id+"",C,P,R,q,j,U=(r[10].inspector??"???")+"",$e,Le,ce,Je=r[10].submission_time+"",me,pe,le,tt,Te,Ie=r[10].scheme_reference+"",je,se,de,Re=r[10].current_design_stage+"",Ke;return{c(){e=A("div"),n=A("h2"),l=w(t),o=L(),s=A("p"),u=A("u"),u.textContent="Location",i=w(`
          : `),f=w(a),c=L(),_=A("p"),g=A("u"),g.textContent="Notes",y=w(`
          : `),I=w(S),T=L(),E=A("hr"),D=L(),F=A("p"),O=w("Critical issue ID: "),M=A("b"),C=w(N),P=L(),R=A("p"),q=w("Submitted by "),j=A("b"),$e=w(U),Le=w(`
          at
          `),ce=A("b"),me=w(Je),pe=L(),le=A("p"),tt=w("For scheme "),Te=A("b"),je=w(Ie),se=w(`
          in stage
          `),de=A("b"),Ke=w(Re),ve(e,"max-width","30vw")},m(ke,Se){$(ke,e,Se),k(e,n),k(n,l),k(e,o),k(e,s),k(s,u),k(s,i),k(s,f),k(e,c),k(e,_),k(_,g),k(_,y),k(_,I),k(e,T),k(e,E),k(e,D),k(e,F),k(F,O),k(F,M),k(M,C),k(e,P),k(e,R),k(R,q),k(R,j),k(j,$e),k(R,Le),k(R,ce),k(ce,me),k(e,pe),k(e,le),k(le,tt),k(le,Te),k(Te,je),k(le,se),k(le,de),k(de,Ke)},p(ke,Se){Se&1024&&t!==(t=ke[10].critical_type+"")&&B(l,t),Se&1024&&a!==(a=ke[10].location_description+"")&&B(f,a),Se&1024&&S!==(S=ke[10].notes+"")&&B(I,S),Se&1024&&N!==(N=ke[10].id+"")&&B(C,N),Se&1024&&U!==(U=(ke[10].inspector??"???")+"")&&B($e,U),Se&1024&&Je!==(Je=ke[10].submission_time+"")&&B(me,Je),Se&1024&&Ie!==(Ie=ke[10].scheme_reference+"")&&B(je,Ie),Se&1024&&Re!==(Re=ke[10].current_design_stage+"")&&B(Ke,Re)},d(ke){ke&&p(e)}}}function Yu(r){let e,n;return e=new oe({props:{$$slots:{default:[Xu,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ju(r){let e,n,t,l,o,s;const u=[H(`${rt}-clusters`),{applyToClusters:!0},{paint:{"circle-color":Tt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let g=0;g<u.length;g+=1)i=Q(i,u[g]);e=new xe({props:i}),e.$on("click",r[6]);const a=[H(`${rt}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let g=0;g<a.length;g+=1)f=Q(f,a[g]);t=new Hl({props:f});const c=[H(`${rt}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Tt,"circle-opacity":Z(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let _={$$slots:{default:[Yu]},$$scope:{ctx:r}};for(let g=0;g<c.length;g+=1)_=Q(_,c[g]);return o=new xe({props:_}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(o.$$.fragment)},m(g,y){b(e,g,y),$(g,n,y),b(t,g,y),$(g,l,y),b(o,g,y),s=!0},p(g,y){const S=y&2?x(u,[y&0&&ne(H(`${rt}-clusters`)),u[1],y&0&&{paint:{"circle-color":Tt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:g[1]?"visible":"none"}},u[4]]):{};e.$set(S);const I=y&2?x(a,[y&0&&ne(H(`${rt}-counts`)),a[1],y&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:g[1]?"visible":"none"}}]):{};t.$set(I);const T=y&2?x(c,[y&0&&ne(H(`${rt}-points`)),c[1],c[2],c[3],y&0&&{paint:{"circle-color":Tt,"circle-opacity":Z(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:g[1]?"visible":"none"}}]):{};y&2048&&(T.$$scope={dirty:y,ctx:g}),o.$set(T)},i(g){s||(m(e.$$.fragment,g),m(t.$$.fragment,g),m(o.$$.fragment,g),s=!0)},o(g){d(e.$$.fragment,g),d(t.$$.fragment,g),d(o.$$.fragment,g),s=!1},d(g){g&&(p(n),p(l)),v(e,g),v(t,g),v(o,g)}}}function Ku(r){let e,n,t,l;return e=new Ne({props:{label:"Critical Issues",$$slots:{default:[Vu]},$$scope:{ctx:r}}}),t=new Ct({props:{id:rt,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Ju]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),l=!0},p(o,[s]){const u={};s&2063&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}let rt="criticals",Tt="red";function Zu(r,e,n){let t;_e(r,_n,g=>n(9,t=g));let l,o=!0,s=0,u="",i=cl();async function a(g){try{n(4,i=await Zs(l.files[0])),n(2,s=i.features.length),n(3,u="")}catch(y){n(3,u=`The file you loaded is broken: ${y}`)}}function f(g){t.getSource(rt).getClusterExpansionZoom(g.detail.features[0].properties.cluster_id,(y,S)=>{y||t.easeTo({center:g.detail.features[0].geometry.coordinates,zoom:S})})}function c(g){V[g?"unshift":"push"](()=>{l=g,n(0,l)})}function _(g){o=g,n(1,o)}return[l,o,s,u,i,a,f,c,_]}class Qu extends X{constructor(e){super(),Y(this,e,Zu,Ku,G,{})}}function xu(r){let e,n,t;return e=new ye({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Crossings`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function ec(r){let e;return{c(){e=w("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tc(r){let e,n,t,l,o,s,u;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[ec]},$$scope:{ctx:r}}}),s=new ot({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),k(e,n),b(t,e,null),k(e,l),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function nc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[tc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function rc(r){let e,n=br(r[3])+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=br(l[3])+"")&&B(t,n)},d(l){l&&p(e)}}}function lc(r){let e,n;return e=new oe({props:{$$slots:{default:[rc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function oc(r){let e,n;const t=[H(vt),{sourceLayer:vt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[lc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new xe({props:l}),e.$on("click",ic),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?x(t,[s&0&&ne(H(vt)),s&0&&{sourceLayer:vt},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function sc(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:vt,$$slots:{right:[nc],default:[xu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),V.push(()=>J(e,"checked",s)),l=new be({props:{url:`pmtiles://${ge()}/v1/${vt}.pmtiles`,$$slots:{default:[oc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let vt="crossings";function br(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function ic(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function ac(r,e,n){let t=te.crossings,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class fc extends X{constructor(e){super(),Y(this,e,ac,sc,G,{})}}function uc(r){let e,n,t;return e=new ye({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Cycle parking`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function cc(r){let e;return{c(){e=w("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $c(r){let e,n,t,l,o,s,u;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[cc]},$$scope:{ctx:r}}}),s=new ot({}),{c(){e=A("p"),n=w("Cycle parking, according to "),h(t.$$.fragment),l=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),k(e,n),b(t,e,null),k(e,l),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function pc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[$c]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function mc(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=A("p"),n=w("Capacity: "),t=A("b"),o=w(l)},m(s,u){$(s,e,u),k(e,n),k(e,t),k(t,o)},p(s,u){u&8&&l!==(l=(s[3].capacity??"unknown")+"")&&B(o,l)},d(s){s&&p(e)}}}function _c(r){let e,n;return e=new oe({props:{$$slots:{default:[mc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gc(r){let e,n;const t=[H(wt),{sourceLayer:wt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[_c]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new xe({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?x(t,[s&0&&ne(H(wt)),s&0&&{sourceLayer:wt},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function dc(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:wt,$$slots:{right:[pc],default:[uc]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),V.push(()=>J(e,"checked",s)),l=new be({props:{url:`pmtiles://${ge()}/v1/${wt}.pmtiles`,$$slots:{default:[gc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let wt="cycle_parking";function hc(r,e,n){let t=te.cycle_parking,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class bc extends X{constructor(e){super(),Y(this,e,hc,dc,G,{})}}function vc(r){let e,n,t,l;return e=new ye({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=L(),t=w(r[2])},m(o,s){b(e,o,s),$(o,n,s),$(o,t,s),l=!0},p(o,s){(!l||s&4)&&B(t,o[2])},i(o){l||(m(e.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),l=!1},d(o){o&&(p(n),p(t)),v(e,o)}}}function wc(r){let e;const n=r[5].default,t=Dt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&jt(t,n,l,l[7],e?Bt(n,l[7],o,null):Rt(l[7]),null)},i(l){e||(m(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function kc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[wc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function yc(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&B(t,n)},d(l){l&&p(e)}}}function Sc(r){let e,n;return e=new oe({props:{$$slots:{default:[yc,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Cc(r){let e,n;const t=[H(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":Z(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Sc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new Xe({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&25?x(t,[s&1&&ne(H(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":Z(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Oc(r){let e,n,t,l,o;function s(i){r[6](i)}let u={id:r[0],$$slots:{right:[kc],default:[vc]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new re({props:u}),V.push(()=>J(e,"checked",s)),l=new be({props:{url:`pmtiles://${ge()}/v1/${r[0]}.pmtiles`,$$slots:{default:[Cc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const f={};a&1&&(f.id=i[0]),a&132&&(f.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,f.checked=i[3],K(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${ge()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}function Tc(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:u}=e,i=te[o],a=!1;function f(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,s,u,a,i,t,f,l]}class bn extends X{constructor(e){super(),Y(this,e,Tc,Oc,G,{name:0,singularNoun:1,pluralNoun:2})}}function Ac(r){let e;return{c(){e=w("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Lc(r){let e,n,t,l,o,s,u;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Ac]},$$scope:{ctx:r}}}),s=new ot({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),k(e,n),b(t,e,null),k(e,l),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Ic(r){let e,n;return e=new bn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Lc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Pc extends X{constructor(e){super(),Y(this,e,null,Ic,G,{})}}function Mc(r){let e,n,t;return e=new ye({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Railway Stations`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Nc(r){let e;return{c(){e=w("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ec(r){let e,n,t,l,o,s,u;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Nc]},$$scope:{ctx:r}}}),s=new ot({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),k(e,n),b(t,e,null),k(e,l),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Fc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Ec]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Dc(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&B(t,n)},d(l){l&&p(e)}}}function jc(r){let e,n;return e=new oe({props:{$$slots:{default:[Dc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Rc(r){let e,n;const t=[H(Jt),{paint:{"circle-color":r[1],"circle-radius":Xt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[jc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new xe({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?x(t,[s&0&&ne(H(Jt)),s&2&&{paint:{"circle-color":o[1],"circle-radius":Xt/2}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Bc(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:Jt,$$slots:{right:[Fc],default:[Mc]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),V.push(()=>J(e,"checked",s)),l=new Ct({props:{data:`${ge()}/v1/${Jt}.geojson`,$$slots:{default:[Rc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let Jt="railway_stations";function Hc(r,e,n){let t=te.railway_stations,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class zc extends X{constructor(e){super(),Y(this,e,Hc,Bc,G,{})}}function Uc(r){let e;return{c(){e=w("primary and secondary schools")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gc(r){let e,n,t,l,o,s,u;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[Uc]},$$scope:{ctx:r}}}),s=new ot({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),k(e,n),b(t,e,null),k(e,l),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function qc(r){let e,n;return e=new bn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[Gc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Wc extends X{constructor(e){super(),Y(this,e,null,qc,G,{})}}function Vc(r){let e;return{c(){e=w("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xc(r){let e;return{c(){e=w("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Yc(r){let e,n,t,l,o,s,u,i,a;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Vc]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Xc]},$$scope:{ctx:r}}}),i=new ot({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" and "),h(o.$$.fragment),s=w(" data from OpenStreetMap (as of 9 August 2023)."),u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const _={};c&1&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const g={};c&1&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function Jc(r){let e,n;return e=new bn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Yc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Kc extends X{constructor(e){super(),Y(this,e,null,Jc,G,{})}}function Zc(r){let e;return{c(){e=w("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qc(r){let e;return{c(){e=w("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xc(r){let e;return{c(){e=w("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function e$(r){let e,n,t,l,o,s,u,i,a,f,c,_,g,y,S,I,T,E,D,F,O,M,N;return t=new W({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[Qc]},$$scope:{ctx:r}}}),T=new W({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[xc]},$$scope:{ctx:r}}}),M=new De({}),{c(){e=A("p"),n=w("This layer shows collisions recorded in the "),h(t.$$.fragment),l=w(" dataset. Please note these limitations:"),o=L(),s=A("ul"),u=A("li"),u.textContent="Only collisions between 2017 and 2022 are included",i=L(),a=A("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,f=L(),c=A("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,_=L(),g=A("li"),g.textContent='The "pedestrians" category also include mobility scooters',y=L(),S=A("li"),I=w("All limitations "),h(T.$$.fragment),E=w(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),D=L(),F=A("p"),F.textContent="You can click a point to open the full report, thanks to CycleStreets.",O=L(),h(M.$$.fragment)},m(C,P){$(C,e,P),k(e,n),b(t,e,null),k(e,l),$(C,o,P),$(C,s,P),k(s,u),k(s,i),k(s,a),k(s,f),k(s,c),k(s,_),k(s,g),k(s,y),k(s,S),k(S,I),b(T,S,null),k(S,E),$(C,D,P),$(C,F,P),$(C,O,P),b(M,C,P),N=!0},p(C,P){const R={};P&16777216&&(R.$$scope={dirty:P,ctx:C}),t.$set(R);const q={};P&16777216&&(q.$$scope={dirty:P,ctx:C}),T.$set(q)},i(C){N||(m(t.$$.fragment,C),m(T.$$.fragment,C),m(M.$$.fragment,C),N=!0)},o(C){d(t.$$.fragment,C),d(T.$$.fragment,C),d(M.$$.fragment,C),N=!1},d(C){C&&(p(e),p(o),p(s),p(D),p(F),p(O)),v(t),v(T),v(M,C)}}}function t$(r){let e,n,t;return n=new ae({props:{$$slots:{default:[e$]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function vr(r){let e,n,t,l,o,s,u,i,a,f,c,_,g;return n=new et({props:{small:!0,$$slots:{default:[s$]},$$scope:{ctx:r}}}),f=new Ur({props:{rows:r[14]}}),{c(){e=A("div"),h(n.$$.fragment),t=L(),l=A("div"),o=w(`Filter years:
      `),s=A("input"),u=w(`
      -
      `),i=A("input"),a=L(),h(f.$$.fragment),z(s,"type","number"),z(s,"min",2017),z(s,"max",2022),z(s,"class","svelte-1ft65rw"),z(i,"type","number"),z(i,"min",2017),z(i,"max",2022),z(i,"class","svelte-1ft65rw"),ve(e,"border","1px solid black"),ve(e,"padding","8px")},m(y,S){$(y,e,S),b(n,e,null),k(e,t),k(e,l),k(l,o),k(l,s),lt(s,r[4]),k(l,u),k(l,i),lt(i,r[5]),k(e,a),b(f,e,null),c=!0,_||(g=[at(s,"input",r[20]),at(i,"input",r[21])],_=!0)},p(y,S){const I={};S&16777231&&(I.$$scope={dirty:S,ctx:y}),n.$set(I),S&16&&Pt(s.value)!==y[4]&&lt(s,y[4]),S&32&&Pt(i.value)!==y[5]&&lt(i,y[5])},i(y){c||(m(n.$$.fragment,y),m(f.$$.fragment,y),c=!0)},o(y){d(n.$$.fragment,y),d(f.$$.fragment,y),c=!1},d(y){y&&p(e),v(n),v(f),_=!1,Br(g)}}}function n$(r){let e;return{c(){e=w("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function r$(r){let e;return{c(){e=w("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function l$(r){let e;return{c(){e=w("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function o$(r){let e;return{c(){e=w("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function s$(r){let e,n,t,l,o,s,u,i,a,f,c,_;function g(O){r[16](O)}let y={id:"stats19-pedestrians",$$slots:{default:[n$]},$$scope:{ctx:r}};r[0]!==void 0&&(y.checked=r[0]),e=new re({props:y}),V.push(()=>J(e,"checked",g));function S(O){r[17](O)}let I={id:"stats19-cyclists",$$slots:{default:[r$]},$$scope:{ctx:r}};r[1]!==void 0&&(I.checked=r[1]),l=new re({props:I}),V.push(()=>J(l,"checked",S));function T(O){r[18](O)}let E={id:"stats19-horse-riders",$$slots:{default:[l$]},$$scope:{ctx:r}};r[2]!==void 0&&(E.checked=r[2]),u=new re({props:E}),V.push(()=>J(u,"checked",T));function D(O){r[19](O)}let F={id:"stats19-other",$$slots:{default:[o$]},$$scope:{ctx:r}};return r[3]!==void 0&&(F.checked=r[3]),f=new re({props:F}),V.push(()=>J(f,"checked",D)),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment),s=L(),h(u.$$.fragment),a=L(),h(f.$$.fragment)},m(O,M){b(e,O,M),$(O,t,M),b(l,O,M),$(O,s,M),b(u,O,M),$(O,a,M),b(f,O,M),_=!0},p(O,M){const N={};M&16777216&&(N.$$scope={dirty:M,ctx:O}),!n&&M&1&&(n=!0,N.checked=O[0],K(()=>n=!1)),e.$set(N);const C={};M&16777216&&(C.$$scope={dirty:M,ctx:O}),!o&&M&2&&(o=!0,C.checked=O[1],K(()=>o=!1)),l.$set(C);const P={};M&16777216&&(P.$$scope={dirty:M,ctx:O}),!i&&M&4&&(i=!0,P.checked=O[2],K(()=>i=!1)),u.$set(P);const R={};M&16777216&&(R.$$scope={dirty:M,ctx:O}),!c&&M&8&&(c=!0,R.checked=O[3],K(()=>c=!1)),f.$set(R)},i(O){_||(m(e.$$.fragment,O),m(l.$$.fragment,O),m(u.$$.fragment,O),m(f.$$.fragment,O),_=!0)},o(O){d(e.$$.fragment,O),d(l.$$.fragment,O),d(u.$$.fragment,O),d(f.$$.fragment,O),_=!1},d(O){O&&(p(t),p(s),p(a)),v(e,O),v(l,O),v(u,O),v(f,O)}}}function wr(r){let e,n,t,l=r[8][r[23].pedestrian_location]+"",o;return{c(){e=A("p"),n=w("Pedestrian location: "),t=A("b"),o=w(l)},m(s,u){$(s,e,u),k(e,n),k(e,t),k(t,o)},p(s,u){u&8388608&&l!==(l=s[8][s[23].pedestrian_location]+"")&&B(o,l)},d(s){s&&p(e)}}}function kr(r){let e,n,t,l=r[9][r[23].pedestrian_movement]+"",o;return{c(){e=A("p"),n=w("Pedestrian movement: "),t=A("b"),o=w(l)},m(s,u){$(s,e,u),k(e,n),k(e,t),k(t,o)},p(s,u){u&8388608&&l!==(l=s[9][s[23].pedestrian_movement]+"")&&B(o,l)},d(s){s&&p(e)}}}function i$(r){let e,n,t,l=r[23].year+"",o,s,u,i,a,f=r[10][r[23].severity]+"",c,_,g,y,S,I=yr(r[23])+"",T,E,D,F,O,M=r[23].pedestrian_location&&wr(r),N=r[23].pedestrian_movement&&kr(r);return{c(){e=A("p"),n=w("Year: "),t=A("b"),o=w(l),s=L(),u=A("p"),i=w("Severity: "),a=A("b"),c=w(f),_=L(),g=A("p"),y=w("Casualties: "),S=A("b"),T=w(I),E=L(),M&&M.c(),D=L(),N&&N.c(),F=L(),O=A("p"),O.textContent="Click to open full report in CycleStreets"},m(C,P){$(C,e,P),k(e,n),k(e,t),k(t,o),$(C,s,P),$(C,u,P),k(u,i),k(u,a),k(a,c),$(C,_,P),$(C,g,P),k(g,y),k(g,S),k(S,T),$(C,E,P),M&&M.m(C,P),$(C,D,P),N&&N.m(C,P),$(C,F,P),$(C,O,P)},p(C,P){P&8388608&&l!==(l=C[23].year+"")&&B(o,l),P&8388608&&f!==(f=C[10][C[23].severity]+"")&&B(c,f),P&8388608&&I!==(I=yr(C[23])+"")&&B(T,I),C[23].pedestrian_location?M?M.p(C,P):(M=wr(C),M.c(),M.m(D.parentNode,D)):M&&(M.d(1),M=null),C[23].pedestrian_movement?N?N.p(C,P):(N=kr(C),N.c(),N.m(F.parentNode,F)):N&&(N.d(1),N=null)},d(C){C&&(p(e),p(s),p(u),p(_),p(g),p(E),p(D),p(F),p(O)),M&&M.d(C),N&&N.d(C)}}}function a$(r){let e,n;return e=new oe({props:{$$slots:{default:[i$,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&25165824&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function f$(r){let e,n;const t=[H(kt),{sourceLayer:kt},{paint:{"circle-color":he(["get","severity"],[1,2,3],[r[11],r[12],r[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:r[7]},{layout:{visibility:r[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[a$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new xe({props:l}),e.$on("click",c$),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&14528?x(t,[s&0&&ne(H(kt)),s&0&&{sourceLayer:kt},s&14336&&{paint:{"circle-color":he(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function u$(r){let e,n,t,l,o,s;function u(f){r[15](f)}let i={id:kt,$$slots:{right:[t$],default:[Zc]},$$scope:{ctx:r}};r[6]!==void 0&&(i.checked=r[6]),e=new re({props:i}),V.push(()=>J(e,"checked",u));let a=r[6]&&vr(r);return o=new be({props:{url:`pmtiles://${ge()}/v1/${kt}.pmtiles`,$$slots:{default:[f$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),l=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),s=!0},p(f,[c]){const _={};c&16777216&&(_.$$scope={dirty:c,ctx:f}),!n&&c&64&&(n=!0,_.checked=f[6],K(()=>n=!1)),e.$set(_),f[6]?a?(a.p(f,c),c&64&&m(a,1)):(a=vr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(fe(),d(a,1,1,()=>{a=null}),ue());const g={};c&16777408&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let kt="stats19";function yr(r){let e=[];return r.pedestrian&&e.push("pedestrian"),r.cyclist&&e.push("cyclist"),r.horse_rider&&e.push("horse rider"),r.other&&e.push("other"),e.join(", ")}function c$(r){window.open(`https://www.cyclestreets.net/collisions/reports/${r.detail.features[0].properties.accident_index}`,"_blank")}function $$(r,e,n){let t,l=!1,o=!0,s=!0,u=!0,i=!1,a=2017,f=2022;function c(R,q,j,U,$e,Le){let ce=["any"];return o&&ce.push(["get","pedestrian"]),s&&ce.push(["get","cyclist"]),u&&ce.push(["get","horse_rider"]),i&&ce.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],f],ce]}let _={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},g={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},y={1:"Fatal",2:"Serious",3:"Slight"},S=te.sequential_low_to_high[4],I=te.sequential_low_to_high[2],T=te.sequential_low_to_high[0],E=[["Fatal",S],["Serious",I],["Slight",T]];function D(R){l=R,n(6,l)}function F(R){o=R,n(0,o)}function O(R){s=R,n(1,s)}function M(R){u=R,n(2,u)}function N(R){i=R,n(3,i)}function C(){a=Pt(this.value),n(4,a)}function P(){f=Pt(this.value),n(5,f)}return r.$$.update=()=>{r.$$.dirty&63&&n(7,t=c())},[o,s,u,i,a,f,l,t,_,g,y,S,I,T,E,D,F,O,M,N,C,P]}class p$ extends X{constructor(e){super(),Y(this,e,$$,u$,G,{})}}function m$(r){let e;return{c(){e=w("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _$(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function g$(r){let e;return{c(){e=w("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function d$(r){let e,n,t,l,o,s,u,i,a,f,c;return t=new W({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[_$]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[g$]},$$scope:{ctx:r}}}),f=new De({}),{c(){e=A("p"),n=w("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),l=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),s=w(" for details and caveats about the measurements."),u=L(),i=A("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=L(),h(f.$$.fragment)},m(_,g){$(_,e,g),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,s),$(_,u,g),$(_,i,g),$(_,a,g),b(f,_,g),c=!0},p(_,g){const y={};g&64&&(y.$$scope={dirty:g,ctx:_}),t.$set(y);const S={};g&64&&(S.$$scope={dirty:g,ctx:_}),o.$set(S)},i(_){c||(m(t.$$.fragment,_),m(o.$$.fragment,_),m(f.$$.fragment,_),c=!0)},o(_){d(t.$$.fragment,_),d(o.$$.fragment,_),d(f.$$.fragment,_),c=!1},d(_){_&&(p(e),p(u),p(i),p(a)),v(t),v(o),v(f,_)}}}function h$(r){let e,n,t;return n=new ae({props:{$$slots:{default:[d$]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Sr(r){let e,n;return e=new Ye({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function b$(r){let e,n=r[5].location+"",t,l,o,s,u,i=r[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,_,g,y=r[5].pedal_cycles_2022.toLocaleString()+"",S,I,T,E,D,F=r[5].method+"",O;return{c(){e=A("h2"),t=w(n),l=L(),o=A("p"),s=w("Total motor vehicles (2022 AADF): "),u=A("b"),a=w(i),f=L(),c=A("p"),_=w("Total pedal cycles (2022 AADF): "),g=A("b"),S=w(y),I=L(),T=A("p"),E=w("Count method: "),D=A("b"),O=w(F)},m(M,N){$(M,e,N),k(e,t),$(M,l,N),$(M,o,N),k(o,s),k(o,u),k(u,a),$(M,f,N),$(M,c,N),k(c,_),k(c,g),k(g,S),$(M,I,N),$(M,T,N),k(T,E),k(T,D),k(D,O)},p(M,N){N&32&&n!==(n=M[5].location+"")&&B(t,n),N&32&&i!==(i=M[5].motor_vehicles_2022.toLocaleString()+"")&&B(a,i),N&32&&y!==(y=M[5].pedal_cycles_2022.toLocaleString()+"")&&B(S,y),N&32&&F!==(F=M[5].method+"")&&B(O,F)},d(M){M&&(p(e),p(l),p(o),p(f),p(c),p(I),p(T))}}}function v$(r){let e,n;return e=new oe({props:{$$slots:{default:[b$,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function w$(r){let e,n;const t=[H(yt),{sourceLayer:yt},{paint:{"circle-color":he(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[v$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new xe({props:l}),e.$on("click",y$),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?x(t,[s&0&&ne(H(yt)),s&0&&{sourceLayer:yt},s&6&&{paint:{"circle-color":he(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function k$(r){let e,n,t,l,o,s;function u(f){r[4](f)}let i={id:yt,$$slots:{right:[h$],default:[m$]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new re({props:i}),V.push(()=>J(e,"checked",u));let a=r[0]&&Sr(r);return o=new be({props:{url:`pmtiles://${ge()}/v1/${yt}.pmtiles`,$$slots:{default:[w$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),l=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),s=!0},p(f,[c]){const _={};c&64&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],K(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Sr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(fe(),d(a,1,1,()=>{a=null}),ue());const g={};c&65&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let yt="vehicle_counts";function y$(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function S$(r,e,n){let t=te.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function u(i){s=i,n(0,s)}return[s,t,l,o,u]}class C$ extends X{constructor(e){super(),Y(this,e,S$,k$,G,{})}}function O$(r){let e,n,t,l,o,s,u,i;return e=new Wc({}),t=new Pc({}),o=new Kc({}),u=new zc({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),$(a,l,f),b(o,a,f),$(a,s,f),b(u,a,f),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(u.$$.fragment,a),i=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(o.$$.fragment,a),d(u.$$.fragment,a),i=!1},d(a){a&&(p(n),p(l),p(s)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function T$(r){let e,n;return e=new et({props:{small:!0,$$slots:{default:[O$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function A$(r){let e,n,t,l,o,s,u,i,a,f;return e=new zf({}),t=new Zf({}),o=new Af({}),u=new bc({}),a=new fc({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment),i=L(),h(a.$$.fragment)},m(c,_){b(e,c,_),$(c,n,_),b(t,c,_),$(c,l,_),b(o,c,_),$(c,s,_),b(u,c,_),$(c,i,_),b(a,c,_),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(u.$$.fragment,c),d(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(l),p(s),p(i)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function L$(r){let e,n;return e=new et({props:{small:!0,$$slots:{default:[A$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function I$(r){let e,n,t,l,o,s,u,i,a,f;return e=new qa({}),t=new mf({}),o=new Zi({}),u=new ba({}),a=new Na({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment),i=L(),h(a.$$.fragment)},m(c,_){b(e,c,_),$(c,n,_),b(t,c,_),$(c,l,_),b(o,c,_),$(c,s,_),b(u,c,_),$(c,i,_),b(a,c,_),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(u.$$.fragment,c),d(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(l),p(s),p(i)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function P$(r){let e,n;return e=new et({props:{small:!0,$$slots:{default:[I$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function M$(r){let e,n,t,l;return e=new Hi({}),t=new aa({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function N$(r){let e,n;return e=new et({props:{small:!0,$$slots:{default:[M$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function E$(r){let e,n,t,l,o,s;return e=new Uu({}),t=new iu({}),o=new Mu({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(o.$$.fragment)},m(u,i){b(e,u,i),$(u,n,i),b(t,u,i),$(u,l,i),b(o,u,i),s=!0},i(u){s||(m(e.$$.fragment,u),m(t.$$.fragment,u),m(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(l)),v(e,u),v(t,u),v(o,u)}}}function F$(r){let e,n,t,l,o,s,u=mn()=="Private (development)",i,a,f;e=new C$({}),t=new p$({}),o=new wu({});let c=u&&E$();return a=new nf({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(o.$$.fragment),s=L(),c&&c.c(),i=L(),h(a.$$.fragment)},m(_,g){b(e,_,g),$(_,n,g),b(t,_,g),$(_,l,g),b(o,_,g),$(_,s,g),c&&c.m(_,g),$(_,i,g),b(a,_,g),f=!0},p:ee,i(_){f||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(o.$$.fragment,_),m(c),m(a.$$.fragment,_),f=!0)},o(_){d(e.$$.fragment,_),d(t.$$.fragment,_),d(o.$$.fragment,_),d(c),d(a.$$.fragment,_),f=!1},d(_){_&&(p(n),p(l),p(s),p(i)),v(e,_),v(t,_),v(o,_),c&&c.d(_),v(a,_)}}}function D$(r){let e,n;return e=new et({props:{small:!0,$$slots:{default:[F$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function j$(r){let e,n,t,l,o;function s(i){r[3](i)}let u={};return r[0]!==void 0&&(u.enabled=r[0]),e=new hl({props:u}),V.push(()=>J(e,"enabled",s)),l=new Sl({}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,a){const f={};!n&&a&1&&(n=!0,f.enabled=i[0],K(()=>n=!1)),e.$set(f)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}function R$(r){let e,n,t,l,o,s,u,i,a,f,c,_,g,y,S,I;return e=new Qu({}),t=new Ne({props:{label:"Trip generators",$$slots:{default:[T$]},$$scope:{ctx:r}}}),o=new Ne({props:{label:"Existing infrastructure",$$slots:{default:[L$]},$$scope:{ctx:r}}}),u=new Ne({props:{label:"Boundaries",$$slots:{default:[P$]},$$scope:{ctx:r}}}),a=new Ne({props:{label:"Census",$$slots:{default:[N$]},$$scope:{ctx:r}}}),c=new Ne({props:{label:"Other",$$slots:{default:[D$]},$$scope:{ctx:r}}}),g=new Ne({props:{label:"Tools",$$slots:{default:[j$]},$$scope:{ctx:r}}}),S=new dl({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment),i=L(),h(a.$$.fragment),f=L(),h(c.$$.fragment),_=L(),h(g.$$.fragment),y=L(),h(S.$$.fragment)},m(T,E){b(e,T,E),$(T,n,E),b(t,T,E),$(T,l,E),b(o,T,E),$(T,s,E),b(u,T,E),$(T,i,E),b(a,T,E),$(T,f,E),b(c,T,E),$(T,_,E),b(g,T,E),$(T,y,E),b(S,T,E),I=!0},p(T,E){const D={};E&16&&(D.$$scope={dirty:E,ctx:T}),t.$set(D);const F={};E&16&&(F.$$scope={dirty:E,ctx:T}),o.$set(F);const O={};E&16&&(O.$$scope={dirty:E,ctx:T}),u.$set(O);const M={};E&16&&(M.$$scope={dirty:E,ctx:T}),a.$set(M);const N={};E&16&&(N.$$scope={dirty:E,ctx:T}),c.$set(N);const C={};E&17&&(C.$$scope={dirty:E,ctx:T}),g.$set(C);const P={};E&2&&(P.disabled=!T[1]),S.$set(P)},i(T){I||(m(e.$$.fragment,T),m(t.$$.fragment,T),m(o.$$.fragment,T),m(u.$$.fragment,T),m(a.$$.fragment,T),m(c.$$.fragment,T),m(g.$$.fragment,T),m(S.$$.fragment,T),I=!0)},o(T){d(e.$$.fragment,T),d(t.$$.fragment,T),d(o.$$.fragment,T),d(u.$$.fragment,T),d(a.$$.fragment,T),d(c.$$.fragment,T),d(g.$$.fragment,T),d(S.$$.fragment,T),I=!1},d(T){T&&(p(n),p(l),p(s),p(i),p(f),p(_),p(y)),v(e,T),v(t,T),v(o,T),v(u,T),v(a,T),v(c,T),v(g,T),v(S,T)}}}function B$(r){let e,n;const t=[H("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:r[1]?"none":"visible"}}];let l={};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new Xe({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&2?x(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function H$(r){let e,n,t,l;return e=new Ne({props:{label:"Layers",open:!0,$$slots:{default:[R$]},$$scope:{ctx:r}}}),t=new Ct({props:{data:r[2],$$slots:{default:[B$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),l=!0},p(o,[s]){const u={};s&19&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function z$(r,e,n){let t,l;_e(r,Kn,u=>n(1,l=u));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(u){t=u,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&Kn.set(!t)},[t,l,o,s]}class U$ extends X{constructor(e){super(),Y(this,e,z$,H$,G,{})}}function G$(r,e,n){let{loadFile:t}=e;return gn(async()=>{let o=await(await fetch(`${Zt()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class q$ extends X{constructor(e){super(),Y(this,e,G$,null,G,{loadFile:0})}}function Cr(r){var o;let e,n,t=((o=r[0].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=A("p"),n=w("Current milestone: "),l=w(t)},m(s,u){$(s,e,u),k(e,n),k(e,l)},p(s,u){var i;u&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&B(l,t)},d(s){s&&p(e)}}}function W$(r){let e;return{c(){e=w("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function V$(r){let e;return{c(){e=w("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function X$(r){let e,n,t,l;return e=new on({props:{$$slots:{default:[W$]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new on({props:{$$slots:{default:[V$]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),l=!0},p(o,s){const u={};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Y$(r){var F,O,M,N;let e,n,t=((F=r[0].browse)==null?void 0:F.authority_or_region)+"",l,o,s,u,i=((O=r[0].browse)==null?void 0:O.capital_scheme_id)+"",a,f,c,_,g=((M=r[0].browse)==null?void 0:M.funding_programme)+"",y,S,I,T,E,D=((N=r[0].browse)==null?void 0:N.current_milestone)&&Cr(r);return T=new bl({props:{$$slots:{default:[X$]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Authority or region: "),l=w(t),o=L(),s=A("p"),u=w("Capital scheme ID: "),a=w(i),f=L(),c=A("p"),_=w("Funding programme: "),y=w(g),S=L(),D&&D.c(),I=L(),h(T.$$.fragment)},m(C,P){$(C,e,P),k(e,n),k(e,l),$(C,o,P),$(C,s,P),k(s,u),k(s,a),$(C,f,P),$(C,c,P),k(c,_),k(c,y),$(C,S,P),D&&D.m(C,P),$(C,I,P),b(T,C,P),E=!0},p(C,P){var q,j,U,$e;(!E||P&1)&&t!==(t=((q=C[0].browse)==null?void 0:q.authority_or_region)+"")&&B(l,t),(!E||P&1)&&i!==(i=((j=C[0].browse)==null?void 0:j.capital_scheme_id)+"")&&B(a,i),(!E||P&1)&&g!==(g=((U=C[0].browse)==null?void 0:U.funding_programme)+"")&&B(y,g),($e=C[0].browse)!=null&&$e.current_milestone?D?D.p(C,P):(D=Cr(C),D.c(),D.m(I.parentNode,I)):D&&(D.d(1),D=null);const R={};P&32&&(R.$$scope={dirty:P,ctx:C}),T.$set(R)},i(C){E||(m(T.$$.fragment,C),E=!0)},o(C){d(T.$$.fragment,C),E=!1},d(C){C&&(p(e),p(o),p(s),p(f),p(c),p(S),p(I)),D&&D.d(C),v(T,C)}}}function J$(r){var t;let e,n;return e=new Ne({props:{label:`${r[0].scheme_reference}: ${(t=r[0].browse)==null?void 0:t.num_features} features`,$$slots:{default:[Y$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),n=!0},p(l,[o]){var u;const s={};o&1&&(s.label=`${l[0].scheme_reference}: ${(u=l[0].browse)==null?void 0:u.num_features} features`),o&33&&(s.$$scope={dirty:o,ctx:l}),e.$set(s)},i(l){n||(m(e.$$.fragment,l),n=!0)},o(l){d(e.$$.fragment,l),n=!1},d(l){v(e,l)}}}function K$(r,e,n){let t,l;_e(r,St,i=>n(3,t=i)),_e(r,_n,i=>n(4,l=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};l==null||l.fitBounds($l(i),{padding:20,animate:!1})}function u(){var f,c;let i={type:"FeatureCollection",features:t.features.filter(_=>_.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return r.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,u]}class Z$ extends X{constructor(e){super(),Y(this,e,K$,J$,G,{scheme:0})}}function Or(r){let e,n,t=yn(r[0].length_meters)+"",l;return{c(){e=A("p"),n=w("Length: "),l=w(t)},m(o,s){$(o,e,s),k(e,n),k(e,l)},p(o,s){s&1&&t!==(t=yn(o[0].length_meters)+"")&&B(l,t)},d(o){o&&p(e)}}}function Tr(r){let e,n=r[2](r[0].description)+"";return{c(){e=A("p")},m(t,l){$(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[2](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Ar(r){var o;let e,n,t=((o=r[1].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=A("p"),n=w("Current milestone: "),l=w(t)},m(s,u){$(s,e,u),k(e,n),k(e,l)},p(s,u){var i;u&2&&t!==(t=((i=s[1].browse)==null?void 0:i.current_milestone)+"")&&B(l,t)},d(s){s&&p(e)}}}function Q$(r){var tt,Te,Ie,je;let e,n,t,l=r[2](r[0].name)+"",o,s=r[0].intervention_type+"",u,i,a,f,c,_,g,y,S,I=r[0].scheme_reference+"",T,E,D,F,O=((tt=r[1].browse)==null?void 0:tt.authority_or_region)+"",M,N,C,P,R=((Te=r[1].browse)==null?void 0:Te.capital_scheme_id)+"",q,j,U,$e,Le=((Ie=r[1].browse)==null?void 0:Ie.funding_programme)+"",ce,Je,me=r[0].length_meters&&Or(r),pe=r[0].description&&Tr(r),le=((je=r[1].browse)==null?void 0:je.current_milestone)&&Ar(r);return{c(){e=A("div"),n=A("h2"),t=new dn(!1),o=w(" ("),u=w(s),i=w(")"),a=L(),me&&me.c(),f=L(),pe&&pe.c(),c=L(),_=A("hr"),g=L(),y=A("p"),S=w("Part of scheme: "),T=w(I),E=L(),D=A("p"),F=w("Authority or region: "),M=w(O),N=L(),C=A("p"),P=w("Capital scheme ID: "),q=w(R),j=L(),U=A("p"),$e=w("Funding programme: "),ce=w(Le),Je=L(),le&&le.c(),t.a=o,ve(e,"max-width","30vw")},m(se,de){$(se,e,de),k(e,n),t.m(l,n),k(n,o),k(n,u),k(n,i),k(e,a),me&&me.m(e,null),k(e,f),pe&&pe.m(e,null),k(e,c),k(e,_),k(e,g),k(e,y),k(y,S),k(y,T),k(e,E),k(e,D),k(D,F),k(D,M),k(e,N),k(e,C),k(C,P),k(C,q),k(e,j),k(e,U),k(U,$e),k(U,ce),k(e,Je),le&&le.m(e,null)},p(se,[de]){var Re,Ke,ke,Se;de&1&&l!==(l=se[2](se[0].name)+"")&&t.p(l),de&1&&s!==(s=se[0].intervention_type+"")&&B(u,s),se[0].length_meters?me?me.p(se,de):(me=Or(se),me.c(),me.m(e,f)):me&&(me.d(1),me=null),se[0].description?pe?pe.p(se,de):(pe=Tr(se),pe.c(),pe.m(e,c)):pe&&(pe.d(1),pe=null),de&1&&I!==(I=se[0].scheme_reference+"")&&B(T,I),de&2&&O!==(O=((Re=se[1].browse)==null?void 0:Re.authority_or_region)+"")&&B(M,O),de&2&&R!==(R=((Ke=se[1].browse)==null?void 0:Ke.capital_scheme_id)+"")&&B(q,R),de&2&&Le!==(Le=((ke=se[1].browse)==null?void 0:ke.funding_programme)+"")&&B(ce,Le),(Se=se[1].browse)!=null&&Se.current_milestone?le?le.p(se,de):(le=Ar(se),le.c(),le.m(e,null)):le&&(le.d(1),le=null)},i:ee,o:ee,d(se){se&&p(e),me&&me.d(),pe&&pe.d(),le&&le.d()}}}function x$(r,e,n){let t,l,o;_e(r,Wt,i=>n(4,l=i)),_e(r,Ft,i=>n(3,o=i));let{props:s}=e;function u(i){return l?i.replace(new RegExp(l,"gi"),a=>`<mark>${a}</mark>`):i}return r.$$set=i=>{"props"in i&&n(0,s=i.props)},r.$$.update=()=>{r.$$.dirty&9&&n(1,t=o.get(s.scheme_reference))},[s,t,u,o]}class vn extends X{constructor(e){super(),Y(this,e,x$,Q$,G,{props:0})}}function ep(r){let e,n=r[6].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&B(t,n)},d(l){l&&p(e)}}}function tp(r){let e,n;return e=new vn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function np(r){let e,n,t,l;return e=new oe({props:{popupClass:"border-popup",$$slots:{default:[ep,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new oe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[tp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),l=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function rp(r){let e,n=r[6].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&B(t,n)},d(l){l&&p(e)}}}function lp(r){let e,n;return e=new vn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function op(r){let e,n,t,l;return e=new oe({props:{popupClass:"border-popup",$$slots:{default:[rp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new oe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[lp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),l=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function sp(r){let e,n=r[6].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&B(t,n)},d(l){l&&p(e)}}}function ip(r){let e,n;return e=new vn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ap(r){let e,n,t,l;return e=new oe({props:{popupClass:"border-popup",$$slots:{default:[sp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new oe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[ip,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),l=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function fp(r){let e,n,t,l,o,s,u,i,a,f;const c=[H("interventions-points"),{filter:["all",Sn,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":Xt,"circle-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let _={$$slots:{default:[np]},$$scope:{ctx:r}};for(let O=0;O<c.length;O+=1)_=Q(_,c[O]);e=new xe({props:_});const g=[H("interventions-lines"),{filter:["all",Cn,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":Ot,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[op]},$$scope:{ctx:r}};for(let O=0;O<g.length;O+=1)y=Q(y,g[O]);t=new we({props:y});const S=[H("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Ot,"circle-opacity":0,"circle-stroke-color":Qe.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let I={};for(let O=0;O<S.length;O+=1)I=Q(I,S[O]);o=new xe({props:I});const T=[H("interventions-polygons"),{filter:["all",Ut,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":Z(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let E={$$slots:{default:[ap]},$$scope:{ctx:r}};for(let O=0;O<T.length;O+=1)E=Q(E,T[O]);u=new Xe({props:E});const D=[H("interventions-polygons-outlines"),{filter:["all",Ut,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*Ot}},{layout:{visibility:r[0]?"visible":"none"}}];let F={};for(let O=0;O<D.length;O+=1)F=Q(F,D[O]);return a=new we({props:F}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment),i=L(),h(a.$$.fragment)},m(O,M){b(e,O,M),$(O,n,M),b(t,O,M),$(O,l,M),b(o,O,M),$(O,s,M),b(u,O,M),$(O,i,M),b(a,O,M),f=!0},p(O,M){const N=M&29?x(c,[c[0],M&24&&{filter:["all",Sn,O[3],O[4]]},c[2],c[3],M&4&&{paint:{"circle-color":O[2],"circle-radius":Xt,"circle-opacity":Z(1,.5)}},M&1&&{layout:{visibility:O[0]?"visible":"none"}},c[6]]):{};M&128&&(N.$$scope={dirty:M,ctx:O}),e.$set(N);const C=M&13?x(g,[g[0],M&8&&{filter:["all",Cn,O[3]]},g[2],g[3],M&4&&{paint:{"line-color":O[2],"line-width":Ot,"line-opacity":Z(1,.5)}},M&1&&{layout:{visibility:O[0]?"visible":"none"}},g[6]]):{};M&128&&(C.$$scope={dirty:M,ctx:O}),t.$set(C);const P=M&1?x(S,[S[0],S[1],S[2],{layout:{visibility:O[0]?"visible":"none"}}]):{};o.$set(P);const R=M&13?x(T,[T[0],M&8&&{filter:["all",Ut,O[3]]},T[2],T[3],M&4&&{paint:{"fill-color":O[2],"fill-opacity":Z(.2,.5)}},M&1&&{layout:{visibility:O[0]?"visible":"none"}},T[6]]):{};M&128&&(R.$$scope={dirty:M,ctx:O}),u.$set(R);const q=M&13?x(D,[D[0],M&8&&{filter:["all",Ut,O[3]]},M&4&&{paint:{"line-color":O[2],"line-opacity":.5,"line-width":.7*Ot}},M&1&&{layout:{visibility:O[0]?"visible":"none"}}]):{};a.$set(q)},i(O){f||(m(e.$$.fragment,O),m(t.$$.fragment,O),m(o.$$.fragment,O),m(u.$$.fragment,O),m(a.$$.fragment,O),f=!0)},o(O){d(e.$$.fragment,O),d(t.$$.fragment,O),d(o.$$.fragment,O),d(u.$$.fragment,O),d(a.$$.fragment,O),f=!1},d(O){O&&(p(n),p(l),p(s),p(i)),v(e,O),v(t,O),v(o,O),v(u,O),v(a,O)}}}function up(r){let e,n;return e=new Ct({props:{data:r[1],$$slots:{default:[fp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.data=t[1]),l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function cp(r,e,n){let t,l;_e(r,St,a=>n(5,l=a));let{showSchemes:o}=e,s=sl();const u=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return r.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&n(1,t=pl(l))},[o,t,s,u,i,l]}class $p extends X{constructor(e){super(),Y(this,e,cp,up,G,{showSchemes:0})}}function Lr(r,e,n){const t=r.slice();return t[10]=e[n],t}function pp(r){let e,n;return e=new q$({props:{loadFile:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ir(r){let e,n,t,l;function o(i){r[7](i)}function s(i){r[8](i)}let u={};return r[1]!==void 0&&(u.schemesToBeShown=r[1]),r[2]!==void 0&&(u.show=r[2]),e=new fi({props:u}),V.push(()=>J(e,"schemesToBeShown",o)),V.push(()=>J(e,"show",s)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),l=!0},p(i,a){const f={};!n&&a&2&&(n=!0,f.schemesToBeShown=i[1],K(()=>n=!1)),!t&&a&4&&(t=!0,f.show=i[2],K(()=>t=!1)),e.$set(f)},i(i){l||(m(e.$$.fragment,i),l=!0)},o(i){d(e.$$.fragment,i),l=!1},d(i){v(e,i)}}}function Pr(r){let e,n;return e=new Z$({props:{scheme:r[10]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.scheme=t[10]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mr(r){let e=r[1].has(r[10].scheme_reference),n,t,l=e&&Pr(r);return{c(){l&&l.c(),n=Ae()},m(o,s){l&&l.m(o,s),$(o,n,s),t=!0},p(o,s){s&34&&(e=o[1].has(o[10].scheme_reference)),e?l?(l.p(o,s),s&34&&m(l,1)):(l=Pr(o),l.c(),m(l,1),l.m(n.parentNode,n)):l&&(fe(),d(l,1,1,()=>{l=null}),ue())},i(o){t||(m(l),t=!0)},o(o){d(l),t=!1},d(o){o&&p(n),l&&l.d(o)}}}function mp(r){let e,n,t,l,o,s,u,i,a,f,c=mn()=="Private (development)",_,g,y,S,I,T,E,D;o=new yl({props:{boundaryGeojson:r[3]}}),u=new Xl({}),a=new ml({});let F=c&&pp(r);g=new wl({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[6]}}),S=new zr({props:{errorMessage:r[0]}});let O=r[5].size>0&&Ir(r),M=We(r[5].values()),N=[];for(let P=0;P<M.length;P+=1)N[P]=Mr(Lr(r,M,P));const C=P=>d(N[P],1,1,()=>{N[P]=null});return{c(){e=A("div"),n=A("div"),t=A("h1"),t.textContent="Browse schemes",l=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment),i=L(),h(a.$$.fragment),f=L(),F&&F.c(),_=L(),h(g.$$.fragment),y=L(),h(S.$$.fragment),I=L(),O&&O.c(),T=L(),E=A("ul");for(let P=0;P<N.length;P+=1)N[P].c();ve(n,"display","flex"),ve(n,"justify-content","space-between"),z(e,"slot","sidebar"),z(e,"class","govuk-prose")},m(P,R){$(P,e,R),k(e,n),k(n,t),k(n,l),b(o,n,null),k(e,s),b(u,e,null),k(e,i),b(a,e,null),k(e,f),F&&F.m(e,null),k(e,_),b(g,e,null),k(e,y),b(S,e,null),k(e,I),O&&O.m(e,null),k(e,T),k(e,E);for(let q=0;q<N.length;q+=1)N[q]&&N[q].m(E,null);D=!0},p(P,R){const q={};R&8&&(q.boundaryGeojson=P[3]),o.$set(q),c&&F.p(P,R);const j={};if(R&1&&(j.errorMessage=P[0]),S.$set(j),P[5].size>0?O?(O.p(P,R),R&32&&m(O,1)):(O=Ir(P),O.c(),m(O,1),O.m(e,T)):O&&(fe(),d(O,1,1,()=>{O=null}),ue()),R&34){M=We(P[5].values());let U;for(U=0;U<M.length;U+=1){const $e=Lr(P,M,U);N[U]?(N[U].p($e,R),m(N[U],1)):(N[U]=Mr($e),N[U].c(),m(N[U],1),N[U].m(E,null))}for(fe(),U=M.length;U<N.length;U+=1)C(U);ue()}},i(P){if(!D){m(o.$$.fragment,P),m(u.$$.fragment,P),m(a.$$.fragment,P),m(F),m(g.$$.fragment,P),m(S.$$.fragment,P),m(O);for(let R=0;R<M.length;R+=1)m(N[R]);D=!0}},o(P){d(o.$$.fragment,P),d(u.$$.fragment,P),d(a.$$.fragment,P),d(F),d(g.$$.fragment,P),d(S.$$.fragment,P),d(O),N=N.filter(Boolean);for(let R=0;R<N.length;R+=1)d(N[R]);D=!1},d(P){P&&p(e),v(o),v(u),v(a),F&&F.d(),v(g),v(S),O&&O.d(),Lt(N,P)}}}function _p(r){let e,n,t,l,o,s,u;return e=new vl({}),t=new $p({props:{showSchemes:r[2]}}),s=new U$({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),o=A("div"),h(s.$$.fragment),z(o,"class","top-right svelte-u44ed2")},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),$(i,l,a),$(i,o,a),b(s,o,null),u=!0},p(i,a){const f={};a&4&&(f.showSchemes=i[2]),t.$set(f)},i(i){u||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(n),p(l),p(o)),v(e,i),v(t,i),v(s)}}}function gp(r){let e,n,t;return n=new _l({props:{style:r[4],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[_p]},$$scope:{ctx:r}}}),{c(){e=A("div"),h(n.$$.fragment),z(e,"slot","main")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.style=l[4]),o&8196&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function dp(r){let e,n;return e=new Cl({props:{$$slots:{main:[gp],sidebar:[mp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&8255&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function hp(r,e,n){let t,l,o;_e(r,St,g=>n(3,t=g)),_e(r,On,g=>n(4,l=g)),_e(r,Ft,g=>n(5,o=g)),gn(()=>{gl()});const s=new URLSearchParams(window.location.search);On.set(s.get("style")||"dataviz");let u="",i=new Set,a=!0;function f(g){try{St.set(JSON.parse(g)),Ft.set(Js(t)),n(0,u="")}catch(y){n(0,u=`The file you loaded is broken: ${y}`)}}function c(g){i=g,n(1,i)}function _(g){a=g,n(2,a)}return[u,i,a,t,l,o,f,c,_]}class bp extends X{constructor(e){super(),Y(this,e,hp,dp,G,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new bp({target:document.getElementById("app")});
