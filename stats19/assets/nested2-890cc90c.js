import{S as q,i as W,s as U,e as A,h as G,_ as Te,j as $,V as ee,o as p,aP as nl,b as X,c as Y,d as C,g as h,m as b,w as Ct,l as K,t as m,n as g,p as v,W as Et,X as Ft,Y as Dt,Z as jt,a7 as qe,I as fe,J as ue,aQ as At,u as w,k,D as R,H as Ae,K as $n,N as Ir,q as me,O as Pr,P as Mr,Q as Lt,T as Nr,U as Er,aX as rl,aY as at,a4 as vn,aZ as ll,f as pn,aO as ol,ar as qt,aj as Yt,ae as mn,r as _n,F as Fr,a as ln,v as Wt,aW as V,a_ as _e,a$ as ve,B as Z,ah as Q,C as he,ak as x,b0 as te,G as yt,a1 as sl,aS as il,ab as wn,b1 as Kt,R as Dr,b2 as gn,E as jr,as as al,ag as fl,aU as kn,al as ul,am as yn,an as Sn,ao as Ht,aV as On,L as cl,M as $l,y as pl}from"./index-806ff7a3.js";import{C as Me,d as Qe,j as It,f as rt,h as se,l as B,c as Vt,k as ml,S as _l,B as gl,b as St,G as dl}from"./StreetViewTool-3cfdb43b.js";import{a as Ve,F as hl}from"./Popup-1cfee45c.js";import{P as le}from"./Popup-bafec024.js";import{R as bl,C as xe,N as Tn,Z as vl}from"./ZoomOutMap-6a98b784.js";import{L as wl,a as kl}from"./LineMeasureController-6f8f5d7f.js";function yl(r){let e;return{c(){e=A("span"),G(e,"class","svelte-kzgqtg"),Te(e,"background",r[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Te(e,"background",n[0])},i:ee,o:ee,d(n){n&&p(e)}}}function Sl(r,e,n){let{color:t}=e;return r.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class ke extends q{constructor(e){super(),W(this,e,Sl,yl,U,{color:0})}}const Ol="/atip/stats19/assets/help-d011708a.svg";function Tl(r){let e,n;const t=r[1].default,l=Et(t,r,r[4],null);return{c(){e=A("div"),l&&l.c(),G(e,"class","govuk-prose")},m(o,i){$(o,e,i),l&&l.m(e,null),n=!0},p(o,i){l&&l.p&&(!n||i&16)&&Ft(l,t,o,o[4],n?jt(t,o[4],i,null):Dt(o[4]),null)},i(o){n||(m(l,o),n=!0)},o(o){g(l,o),n=!1},d(o){o&&p(e),l&&l.d(o)}}}function Cl(r){let e,n,t,l,o,i,u;function s(f){r[3](f)}let a={title:"Help",$$slots:{default:[Tl]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new nl({props:a}),X.push(()=>Y(t,"open",s)),{c(){e=A("button"),e.innerHTML=`<img src="${Ol}" title="Help" alt="Help"/>`,n=C(),h(t.$$.fragment),G(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),b(t,f,c),o=!0,i||(u=Ct(e,"click",r[2]),i=!0)},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,_.open=f[0],K(()=>l=!1)),t.$set(_)},i(f){o||(m(t.$$.fragment,f),o=!0)},o(f){g(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),v(t,f),i=!1,u()}}}function Al(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const i=()=>n(0,o=!0);function u(s){o=s,n(0,o)}return r.$$set=s=>{"$$scope"in s&&n(4,l=s.$$scope)},[o,t,i,u,l]}class ae extends q{constructor(e){super(),W(this,e,Al,Cl,U,{})}}function Cn(r,e,n){const t=r.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function An(r){let e,n,t,l=r[1]+"",o,i,u;return n=new ke({props:{color:r[2]}}),{c(){e=A("li"),h(n.$$.fragment),t=C(),o=w(l),i=C()},m(s,a){$(s,e,a),b(n,e,null),k(e,t),k(e,o),k(e,i),u=!0},p(s,a){const f={};a&1&&(f.color=s[2]),n.$set(f),(!u||a&1)&&l!==(l=s[1]+"")&&R(o,l)},i(s){u||(m(n.$$.fragment,s),u=!0)},o(s){g(n.$$.fragment,s),u=!1},d(s){s&&p(e),v(n)}}}function Ll(r){let e,n,t=qe(r[0]),l=[];for(let i=0;i<t.length;i+=1)l[i]=An(Cn(r,t,i));const o=i=>g(l[i],1,1,()=>{l[i]=null});return{c(){e=A("ul");for(let i=0;i<l.length;i+=1)l[i].c()},m(i,u){$(i,e,u);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null);n=!0},p(i,u){if(u&1){t=qe(i[0]);let s;for(s=0;s<t.length;s+=1){const a=Cn(i,t,s);l[s]?(l[s].p(a,u),m(l[s],1)):(l[s]=An(a),l[s].c(),m(l[s],1),l[s].m(e,null))}for(fe(),s=t.length;s<l.length;s+=1)o(s);ue()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)m(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)g(l[u]);n=!1},d(i){i&&p(e),At(l,i)}}}function Il(r){let e,n;return e=new Me({props:{label:"Legend",$$slots:{default:[Ll]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Pl(r,e,n){let{rows:t}=e;return r.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class Ml extends q{constructor(e){super(),W(this,e,Pl,Il,U,{rows:0})}}function Ln(r){let e=r[0],n,t,l=In(r);return{c(){l.c(),n=Ae()},m(o,i){l.m(o,i),$(o,n,i),t=!0},p(o,i){i&1&&U(e,e=o[0])?(fe(),g(l,1,1,ee),ue(),l=In(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||(m(l),t=!0)},o(o){g(l),t=!1},d(o){o&&p(n),l.d(o)}}}function In(r){let e;const n=r[10].default,t=Et(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&Ft(t,n,l,l[9],e?jt(n,l[9],o,null):Dt(l[9]),null)},i(l){e||(m(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function Nl(r){let e,n,t=r[0]&&Ln(r);return{c(){t&&t.c(),e=Ae()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=Ln(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(fe(),g(t,1,1,()=>{t=null}),ue())},i(l){n||(m(t),n=!0)},o(l){g(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function El(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=$n("raster-source")}=e,{tiles:s}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=Ir();me(r,f,S=>n(8,l=S)),me(r,c,S=>n(0,t=S));let _,d=!0;return Pr(()=>{t&&_&&l&&(Mr(f,t,_),Lt(c,t=null,t),n(6,_=void 0))}),r.$$set=S=>{"id"in S&&n(3,u=S.id),"tiles"in S&&n(4,s=S.tiles),"tileSize"in S&&n(5,a=S.tileSize),"$$scope"in S&&n(9,i=S.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==u&&(Lt(c,t=u,t),Nr(l,t,Er({type:"raster",tiles:s,tileSize:a}),S=>l&&S===t,()=>{t&&(n(6,_=l==null?void 0:l.getSource(t)),n(7,d=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,_=l==null?void 0:l.getSource(u))})),r.$$.dirty&208&&_&&(d?n(7,d=!1):_.setTiles(s))},[t,f,c,u,s,a,_,d,l,i,o]}class Fl extends q{constructor(e){super(),W(this,e,El,Nl,U,{id:3,tiles:4,tileSize:5})}}function Dl(r){let e;const n=r[16].default,t=Et(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&Ft(t,n,l,l[24],e?jt(n,l[24],o,null):Dt(l[24]),null)},i(l){e||(m(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function jl(r){let e,n,t;function l(i){r[17](i)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[Dl]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new rl({props:o}),X.push(()=>Y(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,[u]){const s={};u&2&&(s.id=i[1]),u&4&&(s.source=i[2]),u&8&&(s.sourceLayer=i[3]),u&16&&(s.beforeId=i[4]),u&32&&(s.beforeLayerType=i[5]),u&64&&(s.paint=i[6]),u&128&&(s.layout=i[7]),u&256&&(s.filter=i[8]),u&512&&(s.applyToClusters=i[9]),u&1024&&(s.minzoom=i[10]),u&2048&&(s.maxzoom=i[11]),u&4096&&(s.hoverCursor=i[12]),u&8192&&(s.manageHoverState=i[13]),u&16384&&(s.eventsIfTopMost=i[14]),u&32768&&(s.interactive=i[15]),u&16777216&&(s.$$scope={dirty:u,ctx:i}),!n&&u&1&&(n=!0,s.hovered=i[0],K(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Rl(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=$n("symbol")}=e,{source:i=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:_=void 0}=e,{applyToClusters:d=void 0}=e,{minzoom:S=void 0}=e,{maxzoom:y=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:O=!1}=e,{hovered:N=null}=e,{eventsIfTopMost:D=!1}=e,{interactive:E=!0}=e;function L(j){N=j,n(0,N)}function F(j){at.call(this,r,j)}function M(j){at.call(this,r,j)}function I(j){at.call(this,r,j)}function P(j){at.call(this,r,j)}function H(j){at.call(this,r,j)}function J(j){at.call(this,r,j)}return r.$$set=j=>{"id"in j&&n(1,o=j.id),"source"in j&&n(2,i=j.source),"sourceLayer"in j&&n(3,u=j.sourceLayer),"beforeId"in j&&n(4,s=j.beforeId),"beforeLayerType"in j&&n(5,a=j.beforeLayerType),"paint"in j&&n(6,f=j.paint),"layout"in j&&n(7,c=j.layout),"filter"in j&&n(8,_=j.filter),"applyToClusters"in j&&n(9,d=j.applyToClusters),"minzoom"in j&&n(10,S=j.minzoom),"maxzoom"in j&&n(11,y=j.maxzoom),"hoverCursor"in j&&n(12,T=j.hoverCursor),"manageHoverState"in j&&n(13,O=j.manageHoverState),"hovered"in j&&n(0,N=j.hovered),"eventsIfTopMost"in j&&n(14,D=j.eventsIfTopMost),"interactive"in j&&n(15,E=j.interactive),"$$scope"in j&&n(24,l=j.$$scope)},[N,o,i,u,s,a,f,c,_,d,S,y,T,O,D,E,t,L,F,M,I,P,H,J,l]}class Bl extends q{constructor(e){super(),W(this,e,Rl,jl,U,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Pn(r){let e=r[0],n,t,l=Mn(r);return{c(){l.c(),n=Ae()},m(o,i){l.m(o,i),$(o,n,i),t=!0},p(o,i){i&1&&U(e,e=o[0])?(fe(),g(l,1,1,ee),ue(),l=Mn(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||(m(l),t=!0)},o(o){g(l),t=!1},d(o){o&&p(n),l.d(o)}}}function Mn(r){let e;const n=r[9].default,t=Et(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&Ft(t,n,l,l[8],e?jt(n,l[8],o,null):Dt(l[8]),null)},i(l){e||(m(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function Hl(r){let e,n,t=r[0]&&Pn(r);return{c(){t&&t.c(),e=Ae()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=Pn(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(fe(),g(t,1,1,()=>{t=null}),ue())},i(l){n||(m(t),n=!0)},o(l){g(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function Ul(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=$n("vector")}=e,{url:s=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(s&&s.includes("pmtiles://")&&!vn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let S=new ll;vn.addProtocol("pmtiles",S.tile)}const{map:c,self:_}=Ir();me(r,c,S=>n(7,l=S)),me(r,_,S=>n(0,t=S));let d;return Pr(()=>{t&&l&&(Mr(c,t,d),Lt(_,t=null,t),d=void 0)}),r.$$set=S=>{"id"in S&&n(3,u=S.id),"url"in S&&n(4,s=S.url),"tiles"in S&&n(5,a=S.tiles),"promoteId"in S&&n(6,f=S.promoteId),"$$scope"in S&&n(8,i=S.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==u&&(Lt(_,t=u,t),Nr(l,t,Er({type:"vector",url:s,tiles:a,promoteId:f}),S=>l&&S===t,()=>{t&&(d=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{d=l==null?void 0:l.getSource(u)}))},[t,c,_,u,s,a,f,l,i,o]}class de extends q{constructor(e){super(),W(this,e,Ul,Hl,U,{id:3,url:4,tiles:5,promoteId:6})}}function zl(r){let e;return{c(){e=A("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gl(r){let e,n,t=r[0]=="Private (development)"&&zl();return{c(){t&&t.c(),e=C(),n=A("p"),n.textContent="Note the ATF scheme data has not been validated."},m(l,o){t&&t.m(l,o),$(l,e,o),$(l,n,o)},p:ee,d(l){l&&(p(e),p(n)),t&&t.d(l)}}}function ql(r){let e,n,t,l,o,i;return o=new ae({props:{$$slots:{default:[Gl]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("App version: "),t=w(r[0]),l=C(),h(o.$$.fragment)},m(u,s){$(u,e,s),k(e,n),k(e,t),k(e,l),b(o,e,null),i=!0},p(u,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:u}),o.$set(a)},i(u){i||(m(o.$$.fragment,u),i=!0)},o(u){g(o.$$.fragment,u),i=!1},d(u){u&&p(e),v(o)}}}function Wl(r){return[pn()]}class Vl extends q{constructor(e){super(),W(this,e,Wl,ql,U,{})}}const Xl={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Se=Uint8Array,st=Uint16Array,Rr=Uint32Array,Br=new Se([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Hr=new Se([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Jl=new Se([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ur=function(r,e){for(var n=new st(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new Rr(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},zr=Ur(Br,2),Gr=zr[0],Yl=zr[1];Gr[28]=258,Yl[258]=28;var Kl=Ur(Hr,0),Zl=Kl[0],on=new st(32768);for(var ie=0;ie<32768;++ie){var tt=(ie&43690)>>>1|(ie&21845)<<1;tt=(tt&52428)>>>2|(tt&13107)<<2,tt=(tt&61680)>>>4|(tt&3855)<<4,on[ie]=((tt&65280)>>>8|(tt&255)<<8)>>>1}var Tt=function(r,e,n){for(var t=r.length,l=0,o=new st(e);l<t;++l)r[l]&&++o[r[l]-1];var i=new st(e);for(l=0;l<e;++l)i[l]=i[l-1]+o[l-1]<<1;var u;if(n){u=new st(1<<e);var s=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],f=e-r[l],c=i[r[l]-1]++<<f,_=c|(1<<f)-1;c<=_;++c)u[on[c]>>>s]=a}else for(u=new st(t),l=0;l<t;++l)r[l]&&(u[l]=on[i[r[l]-1]++]>>>15-r[l]);return u},Rt=new Se(288);for(var ie=0;ie<144;++ie)Rt[ie]=8;for(var ie=144;ie<256;++ie)Rt[ie]=9;for(var ie=256;ie<280;++ie)Rt[ie]=7;for(var ie=280;ie<288;++ie)Rt[ie]=8;var qr=new Se(32);for(var ie=0;ie<32;++ie)qr[ie]=5;var Ql=Tt(Rt,9,1),xl=Tt(qr,5,1),Zt=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},Ie=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},Qt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},eo=function(r){return(r+7)/8|0},dn=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?st:r.BYTES_PER_ELEMENT==4?Rr:Se)(n-e);return t.set(r.subarray(e,n)),t},to=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Pe=function(r,e,n){var t=new Error(e||to[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Pe),!n)throw t;return t},no=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new Se(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new Se(t*3));var i=function(ge){var je=e.length;if(ge>je){var Ke=new Se(Math.max(je*2,ge));Ke.set(e),e=Ke}},u=n.f||0,s=n.p||0,a=n.b||0,f=n.l,c=n.d,_=n.m,d=n.n,S=t*8;do{if(!f){u=Ie(r,s,1);var y=Ie(r,s+1,3);if(s+=3,y)if(y==1)f=Ql,c=xl,_=9,d=5;else if(y==2){var D=Ie(r,s,31)+257,E=Ie(r,s+10,15)+4,L=D+Ie(r,s+5,31)+1;s+=14;for(var F=new Se(L),M=new Se(19),I=0;I<E;++I)M[Jl[I]]=Ie(r,s+I*3,7);s+=E*3;for(var P=Zt(M),H=(1<<P)-1,J=Tt(M,P,1),I=0;I<L;){var j=J[Ie(r,s,H)];s+=j&15;var T=j>>>4;if(T<16)F[I++]=T;else{var z=0,$e=0;for(T==16?($e=3+Ie(r,s,3),s+=2,z=F[I-1]):T==17?($e=3+Ie(r,s,7),s+=3):T==18&&($e=11+Ie(r,s,127),s+=7);$e--;)F[I++]=z}}var Fe=F.subarray(0,D),be=F.subarray(D);_=Zt(Fe),d=Zt(be),f=Tt(Fe,_,1),c=Tt(be,d,1)}else Pe(1);else{var T=eo(s)+4,O=r[T-4]|r[T-3]<<8,N=T+O;if(N>t){o&&Pe(0);break}l&&i(a+O),e.set(r.subarray(T,N),a),n.b=a+=O,n.p=s=N*8,n.f=u;continue}if(s>S){o&&Pe(0);break}}l&&i(a+131072);for(var Ye=(1<<_)-1,pe=(1<<d)-1,ce=s;;ce=s){var z=f[Qt(r,s)&Ye],re=z>>>4;if(s+=z&15,s>S){o&&Pe(0);break}if(z||Pe(2),re<256)e[a++]=re;else if(re==256){ce=s,f=null;break}else{var et=re-254;if(re>264){var I=re-257,Ce=Br[I];et=Ie(r,s,(1<<Ce)-1)+Gr[I],s+=Ce}var Le=c[Qt(r,s)&pe],De=Le>>>4;Le||Pe(3),s+=Le&15;var be=Zl[De];if(De>3){var Ce=Hr[De];be+=Qt(r,s)&(1<<Ce)-1,s+=Ce}if(s>S){o&&Pe(0);break}l&&i(a+131072);for(var oe=a+et;a<oe;a+=4)e[a]=e[a-be],e[a+1]=e[a+1-be],e[a+2]=e[a+2-be],e[a+3]=e[a+3-be];a=oe}}n.l=f,n.p=ce,n.b=a,n.f=u,f&&(u=1,n.m=_,n.d=c,n.n=d)}while(!u);return a==e.length?e:dn(e,0,a)},ro=new Se(0),Ge=function(r,e){return r[e]|r[e+1]<<8},Ne=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},xt=function(r,e){return Ne(r,e)+Ne(r,e+4)*4294967296};function lo(r,e){return no(r,e)}var sn=typeof TextDecoder<"u"&&new TextDecoder,oo=0;try{sn.decode(ro,{stream:!0}),oo=1}catch{}var so=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,dn(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function Wr(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(sn)return sn.decode(r);var l=so(r),o=l[0],i=l[1];return i.length&&Pe(8),o}}var io=function(r,e){return e+30+Ge(r,e+26)+Ge(r,e+28)},ao=function(r,e,n){var t=Ge(r,e+28),l=Wr(r.subarray(e+46,e+46+t),!(Ge(r,e+8)&2048)),o=e+46+t,i=Ne(r,e+20),u=n&&i==4294967295?fo(r,o):[i,Ne(r,e+24),Ne(r,e+42)],s=u[0],a=u[1],f=u[2];return[Ge(r,e+10),s,a,l,o+Ge(r,e+30)+Ge(r,e+32),f]},fo=function(r,e){for(;Ge(r,e)!=1;e+=4+Ge(r,e+2));return[xt(r,e+12),xt(r,e+4),xt(r,e+20)]};function uo(r,e){for(var n={},t=r.length-22;Ne(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Pe(13);var l=Ge(r,t+8);if(!l)return{};var o=Ne(r,t+16),i=o==4294967295||l==65535;if(i){var u=Ne(r,t-12);i=Ne(r,u)==101075792,i&&(l=Ne(r,u+32),o=Ne(r,u+48))}for(var s=e&&e.filter,a=0;a<l;++a){var f=ao(r,o,i),c=f[0],_=f[1],d=f[2],S=f[3],y=f[4],T=f[5],O=io(r,T);o=y,(!s||s({name:S,size:_,originalSize:d,compression:c}))&&(c?c==8?n[S]=lo(r.subarray(O,O+_),new Se(d)):Pe(14,"unknown compression type "+c):n[S]=dn(r,O,O+_))}return n}function co(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(en):en(r)}function en(r){var e=new Uint8Array(r),n=uo(e);return Promise.resolve($o(n))}function $o(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=Wr(r[l])}return e}function We(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&it(t)===e)return t;n++}}function Bt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&it(l)===e&&n.push(l),t++}return n}function Xt(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&it(l)===e&&n(l,t):n(l,t),t++}}function po(r,e,n){var t=[];return Xt(r,e,function(l,o){t.push(n(l,o))}),t}var mo=/.+\:/;function it(r){return r.tagName.replace(mo,"")}function Vr(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+it(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=Vr(r.childNodes[t]),t++;return e+="</"+it(r)+">",e}function _o(r){var e=r.documentElement,n=We(e,"sheetData"),t=[];return Xt(n,"row",function(l){Xt(l,"c",function(o){t.push(o)})}),t}function go(r,e){return We(e,"v")}function ho(r,e){if(e.firstChild&&it(e.firstChild)==="is"&&e.firstChild.firstChild&&it(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function bo(r){var e=r.documentElement,n=We(e,"dimension");if(n)return n.getAttribute("ref")}function vo(r){var e=r.documentElement,n=We(e,"cellStyleXfs");return n?Bt(n,"xf"):[]}function wo(r){var e=r.documentElement,n=We(e,"cellXfs");return n?Bt(n,"xf"):[]}function ko(r){var e=r.documentElement,n=We(e,"numFmts");return n?Bt(n,"numFmt"):[]}function yo(r){var e=r.documentElement;return po(e,"si",function(n){var t=We(n,"t");if(t)return t.textContent;var l="";return Xt(n,"r",function(o){l+=We(o,"t").textContent}),l})}function So(r){var e=r.documentElement;return We(e,"workbookPr")}function Oo(r){var e=r.documentElement;return Bt(e,"Relationship")}function To(r){var e=r.documentElement,n=We(e,"sheets");return Bt(n,"sheet")}function Co(r,e){var n=e.createDocument(r),t={},l=So(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return To(n).forEach(o),t}function Ao(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(i){var u=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=tn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=tn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=tn(u);break}};return Oo(n).forEach(l),t}function tn(r){return r[0]==="/"?r.slice(1):"xl/"+r}function Nn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function En(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nn(Object(n),!0).forEach(function(t){Lo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Lo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Io(r,e){if(!r)return{};var n=e.createDocument(r),t=vo(n).map(nn),l=ko(n).map(Po).reduce(function(i,u){return i[u.id]=u,i},[]),o=function(u){return u.hasAttribute("xfId")?En(En({},t[u.xfId]),nn(u,l)):nn(u,l)};return wo(n).map(o)}function Po(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function nn(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function Mo(r,e){return r?yo(e.createDocument(r)):[]}function Xr(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function No(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Eo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eo(r,e){if(r){if(typeof r=="string")return Fn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fn(r,e)}}function Fn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Fo(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(Do.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&Bo(l.numberFormat.template))return!0}}var Do=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],jo=/^\[\$-414\]/,Ro=/;@$/;function Bo(r){r=r.toLowerCase(),r=r.replace(jo,""),r=r.replace(Ro,"");for(var e=r.split(/\W+/),n=No(e),t;!(t=n()).done;){var l=t.value;if(Ho.indexOf(l)<0)return!1}return!0}var Ho=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function Uo(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,i=n.styles,u=n.values,s=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=rn(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=rn(r,a);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=rn(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=zo(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var _=Number(r);if(isNaN(_))throw new Error('Invalid "numeric" cell value: '.concat(r));r=_,Fo(r,o(),i,a)&&(r=Xr(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function zo(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function rn(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var Go=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function qo(r){var e=function(a,f){return a-f},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),l=n[0],o=n[n.length-1],i=t[0],u=t[t.length-1];return[{row:l,column:i},{row:o,column:u}]}function Wo(r){for(var e=0,n=0;n<r.length;)e*=26,e+=Go.indexOf(r[n]),n++;return e}function Jr(r){return r=r.split(/(\d+)/),[parseInt(r[1]),Wo(r[0].trim())]}function Vo(r,e,n,t,l,o,i){var u=Jr(r.getAttribute("r")),s=go(e,r),a=s&&s.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:Uo(a,f,{getInlineStringValue:function(){return ho(e,r)},getInlineStringXml:function(){return Vr(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:i})}}function Xo(r,e,n,t,l,o){var i=_o(r);return i.length===0?[]:i.map(function(u){return Vo(u,r,e,n,t,l,o)})}function Jo(r,e){return Qo(r)||Zo(r,e)||Ko(r,e)||Yo()}function Yo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ko(r,e){if(r){if(typeof r=="string")return Dn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dn(r,e)}}function Dn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Zo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Qo(r){if(Array.isArray(r))return r}function xo(r){var e=bo(r);if(e)return e=e.split(":").map(Jr).map(function(n){var t=Jo(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function es(r,e,n,t,l,o){var i=e.createDocument(r),u=Xo(i,e,n,t,l,o),s=xo(i)||qo(u);return{cells:u,dimensions:s}}function ts(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ns(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ns(r,e){if(r){if(typeof r=="string")return jn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jn(r,e)}}function jn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function rs(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var u=!0,s=ts(r[i]),a;!(a=s()).done;){var f=a.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(i,1),n&&n.splice(i,1);else if(o)break;i--}return r}function ls(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=os(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function os(r,e){if(r){if(typeof r=="string")return Rn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rn(r,e)}}function Rn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ss(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var i=!0,u=ls(r),s;!(s=u()).done;){var a=s.value;if(t(a[o])!==null){i=!1;break}}if(i)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function is(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Yr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function as(r,e){return cs(r)||us(r,e)||Yr(r,e)||fs()}function fs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yr(r,e){if(r){if(typeof r=="string")return Bn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bn(r,e)}}function Bn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function us(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function cs(r){if(Array.isArray(r))return r}function $s(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=as(n,2);l[0];for(var o=l[1],i=o.column,u=o.row,s=new Array(u),a=0;a<u;){s[a]=new Array(i);for(var f=0;f<i;)s[a][f]=null,f++;a++}for(var c=is(t),_;!(_=c()).done;){var d=_.value,S=d.row-1,y=d.column-1;y<i&&S<u&&(s[S][y]=d.value)}var T=e.rowMap;if(T)for(var O=0;O<s.length;)T[O]=O,O++;return s=rs(ss(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:T}),e.transformData&&(s=e.transformData(s)),s}function ps(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ms(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ms(r,e){if(r){if(typeof r=="string")return Hn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hn(r,e)}}function Hn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Un(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function _s(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Un(Object(n),!0).forEach(function(t){gs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function gs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ds(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=_s({sheet:1},n));var t=function(_){if(!r[_])throw new Error('"'.concat(_,'" file not found inside the *.xlsx file zip archive'));return r[_]},l=Ao(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?Mo(t(l.sharedStrings),e):[],i=l.styles?Io(t(l.styles),e):{},u=Co(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var _=c.name;return{name:_}});var s=hs(n.sheet,u.sheets);if(!s||!l.sheets[s])throw bs(n.sheet,u.sheets);var a=es(t(l.sheets[s]),e,o,i,u,n),f=$s(a,n);return n.properties?{data:f,properties:u}:f}function hs(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=ps(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function bs(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function an(r){"@babel/helpers - typeof";return an=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},an(r)}function zn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function vs(r,e,n){return e&&zn(r.prototype,e),n&&zn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function ws(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ks(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Pt(r,e)}function ys(r){var e=Kr();return function(){var t=Mt(r),l;if(e){var o=Mt(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return Ss(this,l)}}function Ss(r,e){if(e&&(an(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Os(r)}function Os(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function fn(r){var e=typeof Map=="function"?new Map:void 0;return fn=function(t){if(t===null||!Ts(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return zt(t,arguments,Mt(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Pt(l,t)},fn(r)}function zt(r,e,n){return Kr()?zt=Reflect.construct:zt=function(l,o,i){var u=[null];u.push.apply(u,o);var s=Function.bind.apply(l,u),a=new s;return i&&Pt(a,i.prototype),a},zt.apply(null,arguments)}function Kr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ts(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Pt(r,e){return Pt=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},Pt(r,e)}function Mt(r){return Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Mt(r)}var Oe=function(r){ks(n,r);var e=ys(n);function n(t){var l;return ws(this,n),l=e.call(this,"invalid"),l.reason=t,l}return vs(n)}(fn(Error));function Cs(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new Oe("not_a_number")}if(typeof r!="number")throw new Oe("not_a_number");if(isNaN(r))throw new Oe("invalid_number");if(!isFinite(r))throw new Oe("out_of_bounds");return r}function As(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new Oe("invalid_number");if(!isFinite(r))throw new Oe("out_of_bounds");return String(r)}throw new Oe("not_a_string")}function Ls(r){if(typeof r=="boolean")return r;throw new Oe("not_a_boolean")}function Is(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new Oe("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new Oe("invalid_number");if(!isFinite(r))throw new Oe("out_of_bounds");var t=Xr(r,n);if(isNaN(t.valueOf()))throw new Oe("out_of_bounds");return t}throw new Oe("not_a_date")}function Ps(r,e){return Es(r)||Ns(r,e)||Zr(r,e)||Ms()}function Ms(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ns(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Es(r){if(Array.isArray(r))return r}function un(r){"@babel/helpers - typeof";return un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},un(r)}function Fs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Zr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zr(r,e){if(r){if(typeof r=="string")return Gn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gn(r,e)}}function Gn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function qn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Wn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qn(Object(n),!0).forEach(function(t){Ds(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):qn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ds(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Vn={isColumnOriented:!1};function js(r,e,n){n?n=Wn(Wn({},Vn),n):n=Vn;var t=n,l=t.isColumnOriented,o=t.rowMap,i=t.ignoreEmptyRows;Us(e),l&&(r=Hs(r));for(var u=r[0],s=[],a=[],f=1;f<r.length;f++){var c=Qr(e,r[f],f,u,a,n);(c!==null||i===!1)&&s.push(c)}if(o)for(var _=Fs(a),d;!(d=_()).done;){var S=d.value;S.row=o[S.row-1]+1}return{rows:s,errors:a}}function Qr(r,e,n,t,l,o){for(var i={},u=!0,s=function(){var _=f[a],d=r[_],S=un(d.type)==="object"&&!Array.isArray(d.type),y=e[t.indexOf(_)];y===void 0&&(y=null);var T=void 0,O=void 0,N=void 0;if(S)T=Qr(d.type,e,n,t,l,o);else if(y===null)T=null;else if(Array.isArray(d.type)){var D=!1,E=Bs(y).map(function(F){var M=Xn(F,d,o);return M.error&&(T=F,O=M.error,N=M.reason),M.value!==null&&(D=!0),M.value});O||(T=D?E:null)}else{var L=Xn(y,d,o);O=L.error,N=L.reason,T=O?y:L.value}!O&&T===null&&d.required&&(O="required"),O?(O={error:O,row:n+1,column:_,value:T},N&&(O.reason=N),d.type&&(O.type=d.type),l.push(O)):(u&&T!==null&&(u=!1),(T!==null||o.includeNullValues)&&(i[d.prop]=T))},a=0,f=Object.keys(r);a<f.length;a++)s();return u?null:i}function Xn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=ft(r,e.parse):e.type?t=Rs(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function ft(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function Rs(r,e,n){switch(e){case String:return ft(r,As);case Number:return ft(r,Cs);case Date:return ft(r,function(t){return Is(t,{properties:n.properties})});case Boolean:return ft(r,Ls);default:if(typeof e=="function")return ft(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function xr(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var i=xr(r,'"',n+t+1);l+=i[0],t+=1+i[1]+1}else l+=o,t++}return[l,t]}function Bs(r){for(var e=[],n=0;n<r.length;){var t=xr(r,",",n),l=Ps(t,2),o=l[0],i=l[1];n+=i+1,e.push(o.trim())}return e}var Hs=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function Us(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function cn(r){"@babel/helpers - typeof";return cn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cn(r)}function el(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],i=void 0;cn(o)==="object"&&(o=Object.keys(r[l])[0],i=el(r[l][o])),e[l]={prop:o},i&&(e[l].type=i)}return e}var zs=["schema","map"];function Jn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Ut(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jn(Object(n),!0).forEach(function(t){Gs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Jn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Gs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function qs(r,e){if(r==null)return{};var n=Ws(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function Ws(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function Vs(r,e,n){var t=n.schema,l=n.map,o=qs(n,zs);!t&&l&&(t=el(l));var i=ds(r,e,Ut(Ut({},o),{},{properties:t||o.properties}));return t?js(i.data,t,Ut(Ut({},o),{},{properties:i.properties})):i}function Xs(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return co(r).then(function(n){return Vs(n,Xl,e)})}function Js(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,l);r.features=r.features.filter(t=>Ys(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.browse&&(l.browse.num_features=l.browse.num_features!==void 0?l.browse.num_features+1:1,t.properties.funding_programme=l.browse.funding_programme,t.properties.current_milestone=l.browse.current_milestone,t.id=n++)}return e}function Ys(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function Ks(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Xs(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=ol(l.lat_lon.split(",").map(parseFloat).reverse()),i=l;i.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}function tl(r){return qt(["get","intervention_type"],{area:Qe.area,route:Qe.route,crossing:Qe.crossing,other:Qe.other},"white")}function Yn(r){return[["Areas",Qe.area],["Routes",Qe.route],["Crossings",Qe.crossing],["Other",Qe.other]]}const ne={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"]},Ee=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20],kt=Yt({type:"FeatureCollection",features:[],schemes:{}}),Nt=Yt(new Map),Kn=Yt(!0),Gt=Yt("");function Zs(r){let e,n,t,l,o;function i(s){r[3](s)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(u.value=r[0]),e=new It({props:u}),X.push(()=>Y(e,"value",i)),e.$on("change",r[2]),l=new Ml({props:{rows:r[1]}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};!n&&a&1&&(n=!0,f.value=s[0],K(()=>n=!1)),e.$set(f);const c={};a&2&&(c.rows=s[1]),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}function Zn(r,e){let n=[],t={},l=0;for(let o of r){let i=e[l++%e.length];t[o]=i,n.push([o,i])}return[t,n]}function Qs(r,e,n){let t,l;me(r,Nt,c=>n(4,t=c)),me(r,mn,c=>n(5,l=c));let o="interventionType",i=Yn();function u(){let c;o=="interventionType"?(c=tl(),n(1,i=Yn())):o=="fundingProgramme"?c=s():o=="currentMilestone"&&(c=a()),l.setPaintProperty("interventions-points","circle-color",c),l.setPaintProperty("interventions-lines","line-color",c),l.setPaintProperty("interventions-polygons","fill-color",c),l.setPaintProperty("interventions-polygons-outlines","line-color",c)}function s(){var T;let c=new Set;for(let O of t.values())(T=O.browse)!=null&&T.funding_programme&&c.add(O.browse.funding_programme);let _=Array.from(c);_.sort();let[d,S]=Zn(_,ne.funding_programmes),y=qt(["get","funding_programme"],d,"grey");return n(1,i=S),y}function a(){let c=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[_,d]=Zn(c,ne.current_milestone),S=qt(["get","current_milestone"],_,"grey");return n(1,i=d),S}function f(c){o=c,n(0,o)}return[o,i,u,f]}class xs extends q{constructor(e){super(),W(this,e,Qs,Zs,U,{})}}function ei(r){let e;return{c(){e=w("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ti(r){let e,n,t,l,o,i;return t=new ln({props:{$$slots:{default:[ei]},$$scope:{ctx:r}}}),t.$on("click",r[11]),{c(){e=A("input"),n=C(),h(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterText")},m(u,s){$(u,e,s),Wt(e,r[4]),$(u,n,s),b(t,u,s),l=!0,o||(i=Ct(e,"input",r[10]),o=!0)},p(u,s){s&16&&e.value!==u[4]&&Wt(e,u[4]);const a={};s&65536&&(a.$$scope={dirty:s,ctx:u}),t.$set(a)},i(u){l||(m(t.$$.fragment,u),l=!0)},o(u){g(t.$$.fragment,u),l=!1},d(u){u&&(p(e),p(n)),v(t,u),o=!1,i()}}}function ni(r){let e,n,t,l,o,i,u,s,a,f;function c(y){r[8](y)}let _={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[2]!==void 0&&(_.value=r[2]),e=new It({props:_}),X.push(()=>Y(e,"value",c));function d(y){r[9](y)}let S={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[3]!==void 0&&(S.value=r[3]),l=new It({props:S}),X.push(()=>Y(l,"value",d)),u=new Fr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[ti]},$$scope:{ctx:r}}}),a=new xs({}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(y,T){b(e,y,T),$(y,t,T),b(l,y,T),$(y,i,T),b(u,y,T),$(y,s,T),b(a,y,T),f=!0},p(y,T){const O={};T&32&&(O.choices=y[5]),!n&&T&4&&(n=!0,O.value=y[2],K(()=>n=!1)),e.$set(O);const N={};T&64&&(N.choices=y[6]),!o&&T&8&&(o=!0,N.value=y[3],K(()=>o=!1)),l.$set(N);const D={};T&65552&&(D.$$scope={dirty:T,ctx:y}),u.$set(D)},i(y){f||(m(e.$$.fragment,y),m(l.$$.fragment,y),m(u.$$.fragment,y),m(a.$$.fragment,y),f=!0)},o(y){g(e.$$.fragment,y),g(l.$$.fragment,y),g(u.$$.fragment,y),g(a.$$.fragment,y),f=!1},d(y){y&&(p(t),p(i),p(s)),v(e,y),v(l,y),v(u,y),v(a,y)}}}function ri(r){let e,n=r[0].size.toLocaleString()+"",t,l,o=r[7].route.toLocaleString()+"",i,u,s=r[7].area.toLocaleString()+"",a,f,c=r[7].crossing.toLocaleString()+"",_,d,S=r[7].other.toLocaleString()+"",y,T,O=Qn(r[7].totalLength).toFixed(1)+"",N,D;return{c(){e=w("Showing "),t=w(n),l=w(" schemes ("),i=w(o),u=w(`
    routes, `),a=w(s),f=w(` areas,
    `),_=w(c),d=w(" crossings, "),y=w(S),T=w(`
    other, with total LineString length of `),N=w(O),D=w(" miles)")},m(E,L){$(E,e,L),$(E,t,L),$(E,l,L),$(E,i,L),$(E,u,L),$(E,a,L),$(E,f,L),$(E,_,L),$(E,d,L),$(E,y,L),$(E,T,L),$(E,N,L),$(E,D,L)},p(E,L){L&1&&n!==(n=E[0].size.toLocaleString()+"")&&R(t,n),L&128&&o!==(o=E[7].route.toLocaleString()+"")&&R(i,o),L&128&&s!==(s=E[7].area.toLocaleString()+"")&&R(a,s),L&128&&c!==(c=E[7].crossing.toLocaleString()+"")&&R(_,c),L&128&&S!==(S=E[7].other.toLocaleString()+"")&&R(y,S),L&128&&O!==(O=Qn(E[7].totalLength).toFixed(1)+"")&&R(N,O)},d(E){E&&(p(e),p(t),p(l),p(i),p(u),p(a),p(f),p(_),p(d),p(y),p(T),p(N),p(D))}}}function li(r){let e,n,t;function l(i){r[12](i)}let o={id:"show-schemes",$$slots:{default:[ri]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new se({props:o}),X.push(()=>Y(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&65665&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],K(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function oi(r){let e,n,t,l;return e=new Me({props:{label:"Filters",$$slots:{default:[ni]},$$scope:{ctx:r}}}),t=new rt({props:{small:!0,$$slots:{default:[li]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&65660&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&65667&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Qn(r){return r*621371e-9}function si(r,e,n){let t,l,o;me(r,Gt,D=>n(4,t=D)),me(r,kt,D=>n(13,l=D)),me(r,Nt,D=>n(14,o=D));let{schemesToBeShown:i=new Set}=e,{show:u=!0}=e,s=[],a="",f=[],c="",_={area:0,route:0,crossing:0,other:0,totalLength:0};_n(()=>{var L,F;let D=new Set,E=new Set;for(let M of o.values())(L=M.browse)!=null&&L.authority_or_region&&D.add(M.browse.authority_or_region),(F=M.browse)!=null&&F.funding_programme&&E.add(M.browse.funding_programme);n(5,s=Array.from(D.entries())),s.sort(),n(6,f=Array.from(E.entries())),f.sort()});function d(D,E,L){let F=D.toLowerCase(),M=P=>{var H,J,j,z;if(F&&!((H=P.properties.name)!=null&&H.toLowerCase().includes(F))&&!((J=P.properties.description)!=null&&J.toLowerCase().includes(F)))return!1;if(E||L){let $e=o.get(P.properties.scheme_reference);if(E&&((j=$e.browse)==null?void 0:j.authority_or_region)!=E||L&&((z=$e.browse)==null?void 0:z.funding_programme)!=L)return!1}return!0};n(0,i=new Set(l.features.filter(M).map(P=>P.properties.scheme_reference))),n(7,_={area:0,route:0,crossing:0,other:0,totalLength:0});let I=P=>{var H,J;return!(!i.has(P.properties.scheme_reference)||F&&!((H=P.properties.name)!=null&&H.toLowerCase().includes(F))&&!((J=P.properties.description)!=null&&J.toLowerCase().includes(F)))};for(let P of l.features)I(P)?(delete P.properties.hide_while_editing,n(7,_[P.properties.intervention_type]++,_),P.geometry.type=="LineString"&&P.properties.length_meters&&n(7,_.totalLength+=P.properties.length_meters,_)):P.properties.hide_while_editing=!0;kt.set(l),n(7,_)}function S(D){a=D,n(2,a)}function y(D){c=D,n(3,c)}function T(){t=this.value,Gt.set(t)}const O=()=>Lt(Gt,t="",t);function N(D){u=D,n(1,u)}return r.$$set=D=>{"schemesToBeShown"in D&&n(0,i=D.schemesToBeShown),"show"in D&&n(1,u=D.show)},r.$$.update=()=>{r.$$.dirty&28&&d(t,a,c)},[i,u,a,c,t,s,f,_,S,y,T,O,N]}class ii extends q{constructor(e){super(),W(this,e,si,oi,U,{schemesToBeShown:0,show:1})}}function ai(r){let e;return{c(){e=w(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fi(r){let e,n,t,l,o;return t=new V({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ai]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment),l=w(`. Contains OS data © Crown copyright and database right
  2023.`)},m(i,u){$(i,e,u),k(e,n),b(t,e,null),k(e,l),o=!0},p(i,[u]){const s={};u&1&&(s.$$scope={dirty:u,ctx:i}),t.$set(s)},i(i){o||(m(t.$$.fragment,i),o=!0)},o(i){g(t.$$.fragment,i),o=!1},d(i){i&&p(e),v(t)}}}class Xe extends q{constructor(e){super(),W(this,e,null,fi,U,{})}}function xn(r,e,n){const t=r.slice();return t[2]=e[n],t}function er(r,e,n){const t=r.slice();return t[5]=e[n],t}function tr(r){let e,n;return{c(){e=A("span"),n=w(` 
    `),Te(e,"background",r[5]),Te(e,"width","100%"),Te(e,"border","1px solid black")},m(t,l){$(t,e,l),k(e,n)},p(t,l){l&1&&Te(e,"background",t[5])},d(t){t&&p(e)}}}function nr(r){let e,n=r[2]+"",t;return{c(){e=A("span"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&R(t,n)},d(l){l&&p(e)}}}function ui(r){let e,n,t,l=qe(r[0]),o=[];for(let s=0;s<l.length;s+=1)o[s]=tr(er(r,l,s));let i=qe(r[1]),u=[];for(let s=0;s<i.length;s+=1)u[s]=nr(xn(r,i,s));return{c(){e=A("div");for(let s=0;s<o.length;s+=1)o[s].c();n=C(),t=A("div");for(let s=0;s<u.length;s+=1)u[s].c();Te(e,"display","flex"),Te(t,"display","flex"),Te(t,"justify-content","space-between")},m(s,a){$(s,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(s,n,a),$(s,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(s,[a]){if(a&1){l=qe(s[0]);let f;for(f=0;f<l.length;f+=1){const c=er(s,l,f);o[f]?o[f].p(c,a):(o[f]=tr(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(a&2){i=qe(s[1]);let f;for(f=0;f<i.length;f+=1){const c=xn(s,i,f);u[f]?u[f].p(c,a):(u[f]=nr(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=i.length}},i:ee,o:ee,d(s){s&&(p(e),p(n),p(t)),At(o,s),At(u,s)}}}function ci(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class Je extends q{constructor(e){super(),W(this,e,ci,ui,U,{colorScale:0,limits:1})}}function rr(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function $i(r){let e;return{c(){e=w("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pi(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function mi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _i(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gi(r){let e,n,t,l,o,i,u,s,a,f,c,_;return t=new V({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[pi]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[mi]},$$scope:{ctx:r}}}),f=new V({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[_i]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=C(),s=A("p"),a=w("License: "),h(f.$$.fragment),c=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(d,S){$(d,e,S),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(d,u,S),$(d,s,S),k(s,a),b(f,s,null),k(s,c),_=!0},p(d,S){const y={};S&65536&&(y.$$scope={dirty:S,ctx:d}),t.$set(y);const T={};S&65536&&(T.$$scope={dirty:S,ctx:d}),o.$set(T);const O={};S&65536&&(O.$$scope={dirty:S,ctx:d}),f.$set(O)},i(d){_||(m(t.$$.fragment,d),m(o.$$.fragment,d),m(f.$$.fragment,d),_=!0)},o(d){g(t.$$.fragment,d),g(o.$$.fragment,d),g(f.$$.fragment,d),_=!1},d(d){d&&(p(e),p(u),p(s)),v(t),v(o),v(f)}}}function di(r){let e,n,t;return n=new ae({props:{$$slots:{default:[gi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function lr(r){let e,n;return e=new Je({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function hi(r){let e;return{c(){e=w("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bi(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wi(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ki(r){let e,n,t,l,o,i,u,s,a,f,c,_,d,S;return o=new V({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[bi]},$$scope:{ctx:r}}}),u=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[vi]},$$scope:{ctx:r}}}),_=new V({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[wi]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=C(),t=A("p"),l=w("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),i=w(". Output area boundaries from "),h(u.$$.fragment),s=w("."),a=C(),f=A("p"),c=w("License: "),h(_.$$.fragment),d=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(y,T){$(y,e,T),$(y,n,T),$(y,t,T),k(t,l),b(o,t,null),k(t,i),b(u,t,null),k(t,s),$(y,a,T),$(y,f,T),k(f,c),b(_,f,null),k(f,d),S=!0},p(y,T){const O={};T&65536&&(O.$$scope={dirty:T,ctx:y}),o.$set(O);const N={};T&65536&&(N.$$scope={dirty:T,ctx:y}),u.$set(N);const D={};T&65536&&(D.$$scope={dirty:T,ctx:y}),_.$set(D)},i(y){S||(m(o.$$.fragment,y),m(u.$$.fragment,y),m(_.$$.fragment,y),S=!0)},o(y){g(o.$$.fragment,y),g(u.$$.fragment,y),g(_.$$.fragment,y),S=!1},d(y){y&&(p(e),p(n),p(t),p(a),p(f)),v(o),v(u),v(_)}}}function yi(r){let e,n,t;return n=new ae({props:{$$slots:{default:[ki]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function or(r){let e,n;return e=new Je({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Si(r){let e;return{c(){e=w("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Oi(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ti(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ci(r){let e,n,t,l,o,i,u,s,a;return t=new V({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Oi]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ti]},$$scope:{ctx:r}}}),s=new Xe({}),{c(){e=A("p"),n=w("Population density data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=C(),h(s.$$.fragment)},m(f,c){$(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const _={};c&65536&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const d={};c&65536&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(s,f)}}}function Ai(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Ci]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function sr(r){let e,n,t,l;return t=new Je({props:{colorScale:r[4],limits:r[6]().map(Di)}}),{c(){e=A("p"),e.textContent="(people per square kilometres)",n=C(),h(t.$$.fragment)},m(o,i){$(o,e,i),$(o,n,i),b(t,o,i),l=!0},p:ee,i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){g(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function Li(r){let e,n,t,l=r[15].toLocaleString()+"",o,i,u=r[14]+"",s;return{c(){e=A("p"),n=w("There are "),t=A("b"),o=w(l),i=w(`
          people per square kilometre in `),s=w(u)},m(a,f){$(a,e,f),k(e,n),k(e,t),k(t,o),k(e,i),k(e,s)},p(a,f){f&8200&&l!==(l=a[15].toLocaleString()+"")&&R(o,l),f&8192&&u!==(u=a[14]+"")&&R(s,u)},d(a){a&&p(e)}}}function Ii(r){let e,n,t=r[14]+"",l,o,i,u=r[15]+"",s,a;return{c(){e=A("p"),n=w("Households in "),l=w(t),o=w(` have an average of
          `),i=A("b"),s=w(u),a=w(`
          cars`)},m(f,c){$(f,e,c),k(e,n),k(e,l),k(e,o),k(e,i),k(i,s),k(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&R(l,t),c&8200&&u!==(u=f[15]+"")&&R(s,u)},d(f){f&&p(e)}}}function Pi(r){let e,n,t=r[15]+"",l,o,i,u=r[14]+"",s,a;return{c(){e=A("p"),n=A("b"),l=w(t),o=w("%"),i=w(`
          of households in `),s=w(u),a=w(" have 1 or more cars")},m(f,c){$(f,e,c),k(e,n),k(n,l),k(n,o),k(e,i),k(e,s),k(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&R(l,t),c&8192&&u!==(u=f[14]+"")&&R(s,u)},d(f){f&&p(e)}}}function Mi(r){rr(r);let e;function n(o,i){return o[3]=="percent_households_with_car"?Pi:o[3]=="average_cars_per_household"?Ii:Li}let t=n(r),l=t(r);return{c(){l.c(),e=Ae()},m(o,i){l.m(o,i),$(o,e,i)},p(o,i){rr(o),t===(t=n(o))&&l?l.p(o,i):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function Ni(r){let e,n;return e=new le({props:{$$slots:{default:[Mi,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ei(r){let e,n,t,l;const o=[B(Ze),{sourceLayer:Ze},{paint:{"fill-color":ve(["get",r[3]],r[6](),r[4]),"fill-opacity":Z(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ni]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Q(i,o[a]);e=new Ve({props:i}),e.$on("click",r[5]);const u=[B(`${Ze}-outline`),{sourceLayer:Ze},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Q(s,u[a]);return t=new he({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&88?x(o,[f&0&&te(B(Ze)),f&0&&{sourceLayer:Ze},f&88&&{paint:{"fill-color":ve(["get",a[3]],a[6](),a[4]),"fill-opacity":Z(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&8?x(u,[f&0&&te(B(`${Ze}-outline`)),f&0&&{sourceLayer:Ze},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(_)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Fi(r){let e,n,t,l,o,i,u,s,a,f,c,_,d,S;function y(I){r[7](I)}let T={id:"percent_households_with_car",$$slots:{right:[di],default:[$i]},$$scope:{ctx:r}};r[0]!==void 0&&(T.checked=r[0]),e=new se({props:T}),X.push(()=>Y(e,"checked",y)),e.$on("change",r[8]);let O=r[3]=="percent_households_with_car"&&lr(r);function N(I){r[9](I)}let D={id:"average_cars_per_household",$$slots:{right:[yi],default:[hi]},$$scope:{ctx:r}};r[1]!==void 0&&(D.checked=r[1]),o=new se({props:D}),X.push(()=>Y(o,"checked",N)),o.$on("change",r[10]);let E=r[3]=="average_cars_per_household"&&or(r);function L(I){r[11](I)}let F={id:"population_density",$$slots:{right:[Ai],default:[Si]},$$scope:{ctx:r}};r[2]!==void 0&&(F.checked=r[2]),a=new se({props:F}),X.push(()=>Y(a,"checked",L)),a.$on("change",r[12]);let M=r[3]=="population_density"&&sr(r);return d=new de({props:{url:`pmtiles://${_e()}/v1/${Ze}.pmtiles`,$$slots:{default:[Ei]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),O&&O.c(),l=C(),h(o.$$.fragment),u=C(),E&&E.c(),s=C(),h(a.$$.fragment),c=C(),M&&M.c(),_=C(),h(d.$$.fragment)},m(I,P){b(e,I,P),$(I,t,P),O&&O.m(I,P),$(I,l,P),b(o,I,P),$(I,u,P),E&&E.m(I,P),$(I,s,P),b(a,I,P),$(I,c,P),M&&M.m(I,P),$(I,_,P),b(d,I,P),S=!0},p(I,[P]){const H={};P&65536&&(H.$$scope={dirty:P,ctx:I}),!n&&P&1&&(n=!0,H.checked=I[0],K(()=>n=!1)),e.$set(H),I[3]=="percent_households_with_car"?O?(O.p(I,P),P&8&&m(O,1)):(O=lr(I),O.c(),m(O,1),O.m(l.parentNode,l)):O&&(fe(),g(O,1,1,()=>{O=null}),ue());const J={};P&65536&&(J.$$scope={dirty:P,ctx:I}),!i&&P&2&&(i=!0,J.checked=I[1],K(()=>i=!1)),o.$set(J),I[3]=="average_cars_per_household"?E?(E.p(I,P),P&8&&m(E,1)):(E=or(I),E.c(),m(E,1),E.m(s.parentNode,s)):E&&(fe(),g(E,1,1,()=>{E=null}),ue());const j={};P&65536&&(j.$$scope={dirty:P,ctx:I}),!f&&P&4&&(f=!0,j.checked=I[2],K(()=>f=!1)),a.$set(j),I[3]=="population_density"?M?(M.p(I,P),P&8&&m(M,1)):(M=sr(I),M.c(),m(M,1),M.m(_.parentNode,_)):M&&(fe(),g(M,1,1,()=>{M=null}),ue());const z={};P&65544&&(z.$$scope={dirty:P,ctx:I}),d.$set(z)},i(I){S||(m(e.$$.fragment,I),m(O),m(o.$$.fragment,I),m(E),m(a.$$.fragment,I),m(M),m(d.$$.fragment,I),S=!0)},o(I){g(e.$$.fragment,I),g(O),g(o.$$.fragment,I),g(E),g(a.$$.fragment,I),g(M),g(d.$$.fragment,I),S=!1},d(I){I&&(p(t),p(l),p(u),p(s),p(c),p(_)),v(e,I),O&&O.d(I),v(o,I),E&&E.d(I),v(a,I),M&&M.d(I),v(d,I)}}}let Ze="census_output_areas";const Di=r=>r.toLocaleString();function ji(r,e,n){let t=ne.sequential_low_to_high,l=!1,o=!1,i=!1,u="";function s(T){let O=T.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${O}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${O}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(T){l=T,n(0,l)}const c=()=>{n(1,o=!1),n(2,i=!1)};function _(T){o=T,n(1,o)}const d=()=>{n(0,l=!1),n(2,i=!1)};function S(T){i=T,n(2,i)}const y=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):i?n(3,u="population_density"):n(3,u=""))},[l,o,i,u,t,s,a,f,c,_,d,S,y]}class Ri extends q{constructor(e){super(),W(this,e,ji,Fi,U,{})}}function Bi(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Combined authorities`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Hi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ui(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Hi]},$$scope:{ctx:r}}}),i=new Xe({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of December 2022."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function zi(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Ui]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Gi(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&p(e)}}}function qi(r){let e,n;return e=new le({props:{$$slots:{default:[Gi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wi(r){let e,n,t,l;const o=[B(ut),{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[qi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Q(i,o[a]);e=new Ve({props:i}),e.$on("click",Xi);const u=[B(`${ut}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Q(s,u[a]);return t=new he({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?x(o,[f&0&&te(B(ut)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?x(u,[f&0&&te(B(`${ut}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Vi(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ut,$$slots:{right:[zi],default:[Bi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),X.push(()=>Y(e,"checked",i)),l=new yt({props:{data:`${_e()}/v1/${ut}.geojson`,$$slots:{default:[Wi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let ut="combined_authorities";function Xi(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Ji(r,e,n){let t=ne.combined_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Yi extends q{constructor(e){super(),W(this,e,Ji,Vi,U,{})}}function Ki(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zi(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qi(r){let e;return{c(){e=w(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xi(r){let e,n,t,l,o,i,u,s,a;return t=new V({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Zi]},$$scope:{ctx:r}}}),o=new V({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Qi]},$$scope:{ctx:r}}}),s=new Xe({}),{c(){e=A("p"),n=w("The 2019 English IMD scores come from "),h(t.$$.fragment),l=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),i=w("."),u=C(),h(s.$$.fragment)},m(f,c){$(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(s,f)}}}function ea(r){let e,n,t;return n=new ae({props:{$$slots:{default:[xi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ir(r){let e,n;return e=new Je({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ta(r){let e,n=r[4].LSOA11CD+"",t,l,o,i=r[4].score+"",u,s,a,f,c,_=r[4].rank.toLocaleString()+"",d,S;return{c(){e=A("p"),t=w(n),l=w(` has an IMD score of
        `),o=A("b"),u=w(i),s=C(),a=A("p"),f=w("Rank: "),c=A("b"),d=w(_),S=w(`
        / 32,844 LSOAs`)},m(y,T){$(y,e,T),k(e,t),k(e,l),k(e,o),k(o,u),$(y,s,T),$(y,a,T),k(a,f),k(a,c),k(c,d),k(a,S)},p(y,T){T&16&&n!==(n=y[4].LSOA11CD+"")&&R(t,n),T&16&&i!==(i=y[4].score+"")&&R(u,i),T&16&&_!==(_=y[4].rank.toLocaleString()+"")&&R(d,_)},d(y){y&&(p(e),p(s),p(a))}}}function na(r){let e,n;return e=new le({props:{$$slots:{default:[ta,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ra(r){let e,n,t,l;const o=[B(Re),{sourceLayer:Re},{paint:{"fill-color":ve(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":Z(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[na]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Q(i,o[a]);e=new Ve({props:i});const u=[B(`${Re}-outline`),{sourceLayer:Re},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Q(s,u[a]);return t=new he({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&7?x(o,[f&0&&te(B(Re)),f&0&&{sourceLayer:Re},f&6&&{paint:{"fill-color":ve(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":Z(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&1?x(u,[f&0&&te(B(`${Re}-outline`)),f&0&&{sourceLayer:Re},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function la(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:Re,$$slots:{right:[ea],default:[Ki]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new se({props:s}),X.push(()=>Y(e,"checked",u));let a=r[0]&&ir(r);return o=new de({props:{url:`pmtiles://${_e()}/v1/${Re}.pmtiles`,$$slots:{default:[ra]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],K(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=ir(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(fe(),g(a,1,1,()=>{a=null}),ue());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let Re="imd";function oa(r,e,n){let t=ne.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class sa extends q{constructor(e){super(),W(this,e,oa,la,U,{})}}function ia(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function aa(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fa(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[aa]},$$scope:{ctx:r}}}),i=new Xe({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function ua(r){let e,n,t;return n=new ae({props:{$$slots:{default:[fa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ca(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&p(e)}}}function $a(r){let e,n;return e=new le({props:{$$slots:{default:[ca,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pa(r){let e,n,t,l;const o=[B(ct),{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[$a]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Q(i,o[a]);e=new Ve({props:i}),e.$on("click",_a);const u=[B(`${ct}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Q(s,u[a]);return t=new he({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?x(o,[f&0&&te(B(ct)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?x(u,[f&0&&te(B(`${ct}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function ma(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ct,$$slots:{right:[ua],default:[ia]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),X.push(()=>Y(e,"checked",i)),l=new yt({props:{data:`${_e()}/v1/${ct}.geojson`,$$slots:{default:[pa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let ct="local_authority_districts";function _a(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function ga(r,e,n){let t=ne.local_authority_districts,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class da extends q{constructor(e){super(),W(this,e,ga,ma,U,{})}}function ha(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function ba(r){let e;return{c(){e=w(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function va(r){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wa(r){let e;return{c(){e=w(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ka(r){let e;return{c(){e=w("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ya(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Sa(r){let e,n,t,l,o,i,u,s,a,f,c,_,d,S,y,T,O,N,D,E,L,F;return t=new V({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[ba]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[va]},$$scope:{ctx:r}}}),u=new V({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[wa]},$$scope:{ctx:r}}}),d=new V({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[ka]},$$scope:{ctx:r}}}),N=new V({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[ya]},$$scope:{ctx:r}}}),L=new Xe({}),{c(){e=A("p"),n=w("LPAs may be a "),h(t.$$.fragment),l=w(", "),h(o.$$.fragment),i=w("y, or "),h(u.$$.fragment),s=w("."),a=C(),f=A("p"),c=A("strong"),_=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(d.$$.fragment),S=w(" to get more details."),y=C(),T=A("p"),O=w("Data from ONS Geography via "),h(N.$$.fragment),D=w(", as of November 2022."),E=C(),h(L.$$.fragment)},m(M,I){$(M,e,I),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),b(u,e,null),k(e,s),$(M,a,I),$(M,f,I),k(f,c),k(c,_),b(d,c,null),k(c,S),$(M,y,I),$(M,T,I),k(T,O),b(N,T,null),k(T,D),$(M,E,I),b(L,M,I),F=!0},p(M,I){const P={};I&16&&(P.$$scope={dirty:I,ctx:M}),t.$set(P);const H={};I&16&&(H.$$scope={dirty:I,ctx:M}),o.$set(H);const J={};I&16&&(J.$$scope={dirty:I,ctx:M}),u.$set(J);const j={};I&16&&(j.$$scope={dirty:I,ctx:M}),d.$set(j);const z={};I&16&&(z.$$scope={dirty:I,ctx:M}),N.$set(z)},i(M){F||(m(t.$$.fragment,M),m(o.$$.fragment,M),m(u.$$.fragment,M),m(d.$$.fragment,M),m(N.$$.fragment,M),m(L.$$.fragment,M),F=!0)},o(M){g(t.$$.fragment,M),g(o.$$.fragment,M),g(u.$$.fragment,M),g(d.$$.fragment,M),g(N.$$.fragment,M),g(L.$$.fragment,M),F=!1},d(M){M&&(p(e),p(a),p(f),p(y),p(T),p(E)),v(t),v(o),v(u),v(d),v(N),v(L,M)}}}function Oa(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Sa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Ta(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&p(e)}}}function Ca(r){let e,n;return e=new le({props:{$$slots:{default:[Ta,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Aa(r){let e,n,t,l;const o=[B(Be),{sourceLayer:Be},{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[Ca]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Q(i,o[a]);e=new Ve({props:i});const u=[B(`${Be}-outline`),{sourceLayer:Be},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Q(s,u[a]);return t=new he({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?x(o,[f&0&&te(B(Be)),f&0&&{sourceLayer:Be},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?x(u,[f&0&&te(B(`${Be}-outline`)),f&0&&{sourceLayer:Be},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function La(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Be,$$slots:{right:[Oa],default:[ha]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),X.push(()=>Y(e,"checked",i)),l=new de({props:{url:`pmtiles://${_e()}/v1/${Be}.pmtiles`,$$slots:{default:[Aa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Be="local_planning_authorities";function Ia(r,e,n){let t=ne.local_planning_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Pa extends q{constructor(e){super(),W(this,e,Ia,La,U,{})}}function Ma(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Na(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ea(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Na]},$$scope:{ctx:r}}}),i=new Xe({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Fa(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Ea]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Da(r){let e,n=r[3].Name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&R(t,n)},d(l){l&&p(e)}}}function ja(r){let e,n;return e=new le({props:{$$slots:{default:[Da,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ra(r){let e,n,t,l;const o=[B(He),{sourceLayer:He},{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[ja]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Q(i,o[a]);e=new Ve({props:i}),e.$on("click",Ha);const u=[B(`${He}-outline`),{sourceLayer:He},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Q(s,u[a]);return t=new he({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?x(o,[f&0&&te(B(He)),f&0&&{sourceLayer:He},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?x(u,[f&0&&te(B(`${He}-outline`)),f&0&&{sourceLayer:He},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ba(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:He,$$slots:{right:[Fa],default:[Ma]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),X.push(()=>Y(e,"checked",i)),l=new de({props:{url:`pmtiles://${_e()}/v1/${He}.pmtiles`,$$slots:{default:[Ra]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let He="parliamentary_constituencies";function Ha(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Ua(r,e,n){let t=ne.parliamentary_constituencies,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class za extends q{constructor(e){super(),W(this,e,Ua,Ba,U,{})}}function Ga(r){let e;return{c(){e=w("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qa(r){let e;return{c(){e=w(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wa(r){let e;return{c(){e=w(`Extrium
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Va(r){let e;return{c(){e=w(`FAQ
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xa(r){let e,n,t,l,o,i,u,s,a,f,c,_,d,S,y,T;return t=new V({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[qa]},$$scope:{ctx:r}}}),f=new V({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[Wa]},$$scope:{ctx:r}}}),_=new V({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[Va]},$$scope:{ctx:r}}}),y=new Xe({}),{c(){e=A("p"),n=w("Most layers show air quality data from "),h(t.$$.fragment),l=w(`. The measurements are annual means, in units of
        µgm
        `),o=A("sup"),o.textContent="3",i=w(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=C(),s=A("p"),a=w("The noise layer is from "),h(f.$$.fragment),c=w(", using 2017 data. See their "),h(_.$$.fragment),d=w("."),S=C(),h(y.$$.fragment)},m(O,N){$(O,e,N),k(e,n),b(t,e,null),k(e,l),k(e,o),k(e,i),$(O,u,N),$(O,s,N),k(s,a),b(f,s,null),k(s,c),b(_,s,null),k(s,d),$(O,S,N),b(y,O,N),T=!0},p(O,N){const D={};N&2048&&(D.$$scope={dirty:N,ctx:O}),t.$set(D);const E={};N&2048&&(E.$$scope={dirty:N,ctx:O}),f.$set(E);const L={};N&2048&&(L.$$scope={dirty:N,ctx:O}),_.$set(L)},i(O){T||(m(t.$$.fragment,O),m(f.$$.fragment,O),m(_.$$.fragment,O),m(y.$$.fragment,O),T=!0)},o(O){g(t.$$.fragment,O),g(f.$$.fragment,O),g(_.$$.fragment,O),g(y.$$.fragment,O),T=!1},d(O){O&&(p(e),p(u),p(s),p(S)),v(t),v(f),v(_),v(y,O)}}}function Ja(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Xa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ar(r){let e,n,t,l,o=r[3](r[0])+"",i,u,s,a,f,c,_,d,S,y,T,O,N;function D(I){r[7](I)}let E={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};r[0]!==void 0&&(E.value=r[0]),e=new It({props:E}),X.push(()=>Y(e,"value",D));const L=[Ka,Ya],F=[];function M(I,P){return I[0]=="Noise"?0:1}return d=M(r),S=F[d]=L[d](r),{c(){h(e.$$.fragment),t=C(),l=A("p"),i=w(o),u=C(),s=A("div"),a=A("label"),f=w(`Opacity
      `),c=A("input"),_=C(),S.c(),y=Ae(),G(c,"type","range"),G(c,"min","0"),G(c,"max","100")},m(I,P){b(e,I,P),$(I,t,P),$(I,l,P),k(l,i),$(I,u,P),$(I,s,P),k(s,a),k(a,f),k(a,c),Wt(c,r[2]),$(I,_,P),F[d].m(I,P),$(I,y,P),T=!0,O||(N=[Ct(c,"change",r[8]),Ct(c,"input",r[8])],O=!0)},p(I,P){const H={};!n&&P&1&&(n=!0,H.value=I[0],K(()=>n=!1)),e.$set(H),(!T||P&1)&&o!==(o=I[3](I[0])+"")&&R(i,o),P&4&&Wt(c,I[2]);let J=d;d=M(I),d===J?F[d].p(I,P):(fe(),g(F[J],1,1,()=>{F[J]=null}),ue(),S=F[d],S?S.p(I,P):(S=F[d]=L[d](I),S.c()),m(S,1),S.m(y.parentNode,y))},i(I){T||(m(e.$$.fragment,I),m(S),T=!0)},o(I){g(e.$$.fragment,I),g(S),T=!1},d(I){I&&(p(t),p(l),p(u),p(s),p(_),p(y)),v(e,I),F[d].d(I),O=!1,sl(N)}}}function Ya(r){let e,n,t;return{c(){e=A("img"),wn(e.src,n=r[5](r[0]))||G(e,"src",n),G(e,"width",150),G(e,"alt",t=`Legend for ${r[0]} layer`)},m(l,o){$(l,e,o)},p(l,o){o&1&&!wn(e.src,n=l[5](l[0]))&&G(e,"src",n),o&1&&t!==(t=`Legend for ${l[0]} layer`)&&G(e,"alt",t)},i:ee,o:ee,d(l){l&&p(e)}}}function Ka(r){let e,n;return e=new Je({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Za(r){let e,n;const t=[B("pollution"),{paint:{"raster-opacity":r[2]/100}},{layout:{visibility:r[1]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new bl({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&6?x(t,[t[0],i&4&&{paint:{"raster-opacity":o[2]/100}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Qa(r){let e,n,t,l,o,i;function u(f){r[6](f)}let s={id:"pollution",$$slots:{right:[Ja],default:[Ga]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new se({props:s}),X.push(()=>Y(e,"checked",u));let a=r[1]&&ar(r);return o=new Fl({props:{tiles:[r[4](r[0])],tileSize:256,$$slots:{default:[Za]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&2048&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],K(()=>n=!1)),e.$set(_),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=ar(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(fe(),g(a,1,1,()=>{a=null}),ue());const d={};c&1&&(d.tiles=[f[4](f[0])]),c&2054&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}function xa(r,e,n){let t,l=!1,o=50,i="PM25_viridis";function u(){return i=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${i}/MapServer/WMSServer`}function s(S){return t[1]}function a(S){let y=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${y}`}function f(S){let y=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${y}`}function c(S){l=S,n(1,l)}function _(S){i=S,n(0,i)}function d(){o=il(this.value),n(2,o)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[i])},[i,l,o,s,a,f,c,_,d]}class ef extends q{constructor(e){super(),W(this,e,xa,Qa,U,{})}}function tf(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Wards`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function nf(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function rf(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[nf]},$$scope:{ctx:r}}}),i=new Xe({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function lf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[rf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function of(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&p(e)}}}function sf(r){let e,n;return e=new le({props:{$$slots:{default:[of,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function af(r){let e,n,t,l;const o=[B(Ue),{sourceLayer:Ue},{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[sf]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Q(i,o[a]);e=new Ve({props:i}),e.$on("click",uf);const u=[B(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Q(s,u[a]);return t=new he({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?x(o,[f&0&&te(B(Ue)),f&0&&{sourceLayer:Ue},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?x(u,[f&0&&te(B(`${Ue}-outline`)),f&0&&{sourceLayer:Ue},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function ff(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ue,$$slots:{right:[lf],default:[tf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),X.push(()=>Y(e,"checked",i)),l=new de({props:{url:`pmtiles://${_e()}/v1/${Ue}.pmtiles`,$$slots:{default:[af]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Ue="wards";function uf(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function cf(r,e,n){let t=ne.wards,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class $f extends q{constructor(e){super(),W(this,e,cf,ff,U,{})}}function pf(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function mf(r){let e,n,t,l;return t=new V({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[pf]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment)},m(o,i){$(o,e,i),k(e,n),b(t,e,null),l=!0},p(o,[i]){const u={};i&1&&(u.$$scope={dirty:i,ctx:o}),t.$set(u)},i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){g(t.$$.fragment,o),l=!1},d(o){o&&p(e),v(t)}}}class lt extends q{constructor(e){super(),W(this,e,null,mf,U,{})}}function _f(r){let e,n,t;return e=new ke({props:{color:ne.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=w(`
  Bus routes`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function gf(r){let e;return{c(){e=w(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function df(r){let e,n,t,l,o,i,u,s,a;return o=new V({props:{href:"https://gtfs.org",$$slots:{default:[gf]},$$scope:{ctx:r}}}),s=new lt({}),{c(){e=A("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=C(),t=A("p"),l=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),i=w(`, and doesn't include which routes are run or the
        frequency of service.`),u=C(),h(s.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),k(t,l),b(o,t,null),k(t,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const _={};c&8&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),v(o),v(s,f)}}}function hf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[df]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&8&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function bf(r){let e;return{c(){e=A("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vf(r){let e;return{c(){e=A("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wf(r){let e;function n(o,i){return o[2].has_bus_lane?vf:bf}let t=n(r),l=t(r);return{c(){l.c(),e=Ae()},m(o,i){l.m(o,i),$(o,e,i)},p(o,i){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function kf(r){let e,n;return e=new le({props:{$$slots:{default:[wf,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yf(r){let e,n;const t=[B($t),{sourceLayer:$t},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],ne.bus_route_with_lane,ne.bus_route_without_lane],"line-width":5,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[kf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new he({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?x(t,[i&0&&te(B($t)),i&0&&{sourceLayer:$t},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&8&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Sf(r){let e,n,t,l,o;function i(s){r[1](s)}let u={id:$t,$$slots:{right:[hf],default:[_f]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),X.push(()=>Y(e,"checked",i)),l=new de({props:{url:`pmtiles://${_e()}/v1/${$t}.pmtiles`,$$slots:{default:[yf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let $t="bus_routes";function Of(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class Tf extends q{constructor(e){super(),W(this,e,Of,Sf,U,{})}}function fr(r){const e=Df(r[5]);r[6]=e[0],r[7]=e[1],r[8]=e[2]}function ur(r,e,n){const t=r.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function Cf(r){let e;return{c(){e=w("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Af(r){let e,n,t,l,o,i,u,s;return u=new lt({}),{c(){e=A("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=C(),t=A("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=C(),o=A("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=C(),h(u.$$.fragment)},m(a,f){$(a,e,f),$(a,n,f),$(a,t,f),$(a,l,f),$(a,o,f),$(a,i,f),b(u,a,f),s=!0},p:ee,i(a){s||(m(u.$$.fragment,a),s=!0)},o(a){g(u.$$.fragment,a),s=!1},d(a){a&&(p(e),p(n),p(t),p(l),p(o),p(i)),v(u,a)}}}function Lf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Af]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&8192&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function cr(r){let e,n,t,l;return e=new rt({props:{$$slots:{default:[Pf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),t=A("hr")},m(o,i){b(e,o,i),$(o,n,i),$(o,t,i),l=!0},p(o,i){const u={};i&8194&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){l||(m(e.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),l=!1},d(o){o&&(p(n),p(t)),v(e,o)}}}function If(r){let e,n,t=r[9]+"",l,o,i;return e=new ke({props:{color:r[10]}}),{c(){h(e.$$.fragment),n=C(),l=w(t),o=C()},m(u,s){b(e,u,s),$(u,n,s),$(u,l,s),$(u,o,s),i=!0},p:ee,i(u){i||(m(e.$$.fragment,u),i=!0)},o(u){g(e.$$.fragment,u),i=!1},d(u){u&&(p(n),p(l),p(o)),v(e,u)}}}function $r(r){let e,n,t;function l(i){r[4](i,r[6])}let o={id:r[6],$$slots:{default:[If]},$$scope:{ctx:r}};return r[1][r[6]]!==void 0&&(o.checked=r[1][r[6]]),e=new se({props:o}),X.push(()=>Y(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){r=i;const s={};u&8192&&(s.$$scope={dirty:u,ctx:r}),!n&&u&6&&(n=!0,s.checked=r[1][r[6]],K(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Pf(r){let e,n,t=qe(r[2]),l=[];for(let i=0;i<t.length;i+=1)l[i]=$r(ur(r,t,i));const o=i=>g(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=Ae()},m(i,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,u);$(i,e,u),n=!0},p(i,u){if(u&6){t=qe(i[2]);let s;for(s=0;s<t.length;s+=1){const a=ur(i,t,s);l[s]?(l[s].p(a,u),m(l[s],1)):(l[s]=$r(a),l[s].c(),m(l[s],1),l[s].m(e.parentNode,e))}for(fe(),s=t.length;s<l.length;s+=1)o(s);ue()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)m(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)g(l[u]);n=!1},d(i){i&&p(e),At(l,i)}}}function Mf(r){fr(r);let e,n=r[6]+"",t,l,o,i,u,s=r[7]+"",a,f,c,_,d=r[8]+"",S;return{c(){e=A("h2"),t=w(n),l=C(),o=A("p"),i=w("Direction: "),u=A("b"),a=C(),f=A("p"),c=w("Width: "),_=A("b"),S=w(d)},m(y,T){$(y,e,T),k(e,t),$(y,l,T),$(y,o,T),k(o,i),k(o,u),u.innerHTML=s,$(y,a,T),$(y,f,T),k(f,c),k(f,_),k(_,S)},p(y,T){fr(y),T&32&&n!==(n=y[6]+"")&&R(t,n),T&32&&s!==(s=y[7]+"")&&(u.innerHTML=s),T&32&&d!==(d=y[8]+"")&&R(S,d)},d(y){y&&(p(e),p(l),p(o),p(a),p(f))}}}function Nf(r){let e,n;return e=new le({props:{$$slots:{default:[Mf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8224&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ef(r){let e,n;const t=[B(pt),{sourceLayer:pt},{paint:{"line-color":qt(["get","kind"],{track:ne.cycle_paths.track,lane:ne.cycle_paths.lane,shared_use_segregated:ne.cycle_paths.shared_use_segregated,shared_use_unsegregated:ne.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ee,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{filter:pr(r[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[Nf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new he({props:l}),e.$on("click",jf),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?x(t,[i&0&&te(B(pt)),i&0&&{sourceLayer:pt},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},i&2&&{filter:pr(o[1])},t[5],t[6],t[7]]):{};i&8192&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ff(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:pt,$$slots:{right:[Lf],default:[Cf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new se({props:s}),X.push(()=>Y(e,"checked",u));let a=r[0]&&cr(r);return o=new de({props:{url:`pmtiles://${_e()}/v1/${pt}.pmtiles`,$$slots:{default:[Ef]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&8192&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],K(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=cr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(fe(),g(a,1,1,()=>{a=null}),ue());const d={};c&8195&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let pt="cycle_paths";function Df(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function jf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function pr(r){let e=Object.keys(r).filter(n=>r[n]);return["in",["get","kind"],["literal",e]]}function Rf(r,e,n){let t=[["track","Separated tracks",ne.cycle_paths.track],["lane","Unprotected lanes",ne.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",ne.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",ne.cycle_paths.shared_use_unsegregated]],l=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function i(s){l=s,n(0,l)}function u(s,a){r.$$.not_equal(o[a],s)&&(o[a]=s,n(1,o))}return[l,o,t,i,u]}class Bf extends q{constructor(e){super(),W(this,e,Rf,Ff,U,{})}}function Hf(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Major Road Network`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Uf(r){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zf(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Uf]},$$scope:{ctx:r}}}),i=new Xe({}),{c(){e=A("p"),n=w("Data from the "),h(t.$$.fragment),l=w(", as of September 2021."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Gf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[zf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function qf(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&R(t,n)},d(l){l&&p(e)}}}function Wf(r){let e,n;return e=new le({props:{$$slots:{default:[qf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Vf(r){let e,n;const t=[B(mt),{sourceLayer:mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Wf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new he({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?x(t,[i&0&&te(B(mt)),i&0&&{sourceLayer:mt},t[2],t[3],i&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Z(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Xf(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:mt,$$slots:{right:[Gf],default:[Hf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),X.push(()=>Y(e,"checked",i)),l=new de({props:{url:`pmtiles://${_e()}/v1/${mt}.pmtiles`,$$slots:{default:[Vf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let mt="mrn";function Jf(r,e,n){let t=ne.mrn,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Yf extends q{constructor(e){super(),W(this,e,Jf,Xf,U,{})}}function Kf(r){let e;return{c(){e=w("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qf(r){let e,n,t,l,o,i,u,s,a;return u=new V({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Zf]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road. (You won't be able to distinguish left and right
        though; use the OS Road basemap instead.)`,n=C(),t=A("p"),t.textContent="Data valid as of 1 January, 2024",l=C(),o=A("p"),i=w(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),s=w(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,l,c),$(f,o,c),k(o,i),b(u,o,null),k(o,s),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),u.$set(_)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){g(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(l),p(o)),v(u)}}}function xf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Qf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function mr(r){let e,n;return e=new Je({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function eu(r){let e,n,t,l=r[4].side+"",o,i,u,s,a,f=r[4].average+"",c,_,d,S,y,T,O=r[4].minimum+"",N,D;return{c(){e=A("p"),n=w("Side of the road: "),t=A("b"),o=w(l),i=C(),u=A("p"),s=w("Average width: "),a=A("b"),c=w(f),_=w(`
        meters`),d=C(),S=A("p"),y=w("Minimum width: "),T=A("b"),N=w(O),D=w(`
        meters`)},m(E,L){$(E,e,L),k(e,n),k(e,t),k(t,o),$(E,i,L),$(E,u,L),k(u,s),k(u,a),k(a,c),k(u,_),$(E,d,L),$(E,S,L),k(S,y),k(S,T),k(T,N),k(S,D)},p(E,L){L&16&&l!==(l=E[4].side+"")&&R(o,l),L&16&&f!==(f=E[4].average+"")&&R(c,f),L&16&&O!==(O=E[4].minimum+"")&&R(N,O)},d(E){E&&(p(e),p(i),p(u),p(d),p(S))}}}function tu(r){let e,n;return e=new le({props:{$$slots:{default:[eu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function nu(r){let e,n;const t=[B(_t),{sourceLayer:_t},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ve(["get","average"],r[2],r[1]),"line-width":Ee,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[tu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new he({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?x(t,[i&0&&te(B(_t)),i&0&&{sourceLayer:_t},t[2],t[3],i&6&&{paint:{"line-color":ve(["get","average"],o[2],o[1]),"line-width":Ee,"line-opacity":Z(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ru(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:_t,$$slots:{right:[xf],default:[Kf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new se({props:s}),X.push(()=>Y(e,"checked",u));let a=r[0]&&mr(r);return o=new de({props:{url:`pmtiles://${Kt()}/v1/${_t}.pmtiles`,$$slots:{default:[nu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],K(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=mr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(fe(),g(a,1,1,()=>{a=null}),ue());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let _t="pavement_widths";function lu(r,e,n){let t=ne.sequential_low_to_high,l=[0,2,4,6,8,13],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class ou extends q{constructor(e){super(),W(this,e,lu,ru,U,{})}}function su(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function iu(r){let e;return{c(){e=w("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function au(r){let e;return{c(){e=w("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fu(r){let e,n,t,l,o,i,u,s,a,f,c;return u=new V({props:{href:"https://www.pct.bike",$$slots:{default:[iu]},$$scope:{ctx:r}}}),a=new V({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[au]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=C(),t=A("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=C(),o=A("p"),i=w("See "),h(u.$$.fragment),s=w(" and "),h(a.$$.fragment),f=w(" for details on methodology and data sources.")},m(_,d){$(_,e,d),$(_,n,d),$(_,t,d),$(_,l,d),$(_,o,d),k(o,i),b(u,o,null),k(o,s),b(a,o,null),k(o,f),c=!0},p(_,d){const S={};d&1024&&(S.$$scope={dirty:d,ctx:_}),u.$set(S);const y={};d&1024&&(y.$$scope={dirty:d,ctx:_}),a.$set(y)},i(_){c||(m(u.$$.fragment,_),m(a.$$.fragment,_),c=!0)},o(_){g(u.$$.fragment,_),g(a.$$.fragment,_),c=!1},d(_){_&&(p(e),p(n),p(t),p(l),p(o)),v(u),v(a)}}}function uu(r){let e,n,t;return n=new ae({props:{$$slots:{default:[fu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&1024&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function _r(r){let e,n,t,l,o,i,u,s;e=new Je({props:{colorScale:r[3],limits:r[4]}});function a(d){r[7](d)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new Dr({props:f}),X.push(()=>Y(t,"value",a));function c(d){r[8](d)}let _={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(_.value=r[1]),i=new It({props:_}),X.push(()=>Y(i,"value",c)),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),o=C(),h(i.$$.fragment)},m(d,S){b(e,d,S),$(d,n,S),b(t,d,S),$(d,o,S),b(i,d,S),s=!0},p(d,S){const y={};!l&&S&1&&(l=!0,y.value=d[0],K(()=>l=!1)),t.$set(y);const T={};!u&&S&2&&(u=!0,T.value=d[1],K(()=>u=!1)),i.$set(T)},i(d){s||(m(e.$$.fragment,d),m(t.$$.fragment,d),m(i.$$.fragment,d),s=!0)},o(d){g(e.$$.fragment,d),g(t.$$.fragment,d),g(i.$$.fragment,d),s=!1},d(d){d&&(p(n),p(o)),v(e,d),v(t,d),v(i,d)}}}function cu(r){let e,n=r[5](r[9])+"",t;return{c(){e=new gn(!1),t=Ae(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function $u(r){let e,n;return e=new le({props:{$$slots:{default:[cu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pu(r){let e,n;const t=[B(ze),{sourceLayer:ze},{paint:{"line-color":ve(["get",r[1]],r[4],r[3]),"line-width":Ee,"line-opacity":Z(1,.5)}},{layout:{visibility:r[2]&&r[0]==ze?"visible":"none"}}];let l={$$slots:{default:[$u]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new he({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?x(t,[i&0&&te(B(ze)),i&0&&{sourceLayer:ze},i&26&&{paint:{"line-color":ve(["get",o[1]],o[4],o[3]),"line-width":Ee,"line-opacity":Z(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==ze?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function mu(r){let e,n=r[5](r[9])+"",t;return{c(){e=new gn(!1),t=Ae(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function _u(r){let e,n;return e=new le({props:{$$slots:{default:[mu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gu(r){let e,n;const t=[B(ot),{sourceLayer:ot},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ve(["get",r[1]],r[4],r[3]),"line-width":Ee,"line-opacity":Z(1,.5)}},{layout:{visibility:r[2]&&r[0]==ot?"visible":"none"}}];let l={$$slots:{default:[_u]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new he({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?x(t,[i&0&&te(B(ot)),i&0&&{sourceLayer:ot},t[2],t[3],i&26&&{paint:{"line-color":ve(["get",o[1]],o[4],o[3]),"line-width":Ee,"line-opacity":Z(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==ot?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function du(r){let e,n,t,l,o,i,u,s;function a(_){r[6](_)}let f={id:ze,$$slots:{right:[uu],default:[su]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new se({props:f}),X.push(()=>Y(e,"checked",a));let c=r[2]&&_r(r);return o=new de({props:{url:`pmtiles://${_e()}/v1/${ze}.pmtiles`,$$slots:{default:[pu]},$$scope:{ctx:r}}}),u=new de({props:{url:`pmtiles://${_e()}/v1/${ot}.pmtiles`,$$slots:{default:[gu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),c&&c.c(),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment)},m(_,d){b(e,_,d),$(_,t,d),c&&c.m(_,d),$(_,l,d),b(o,_,d),$(_,i,d),b(u,_,d),s=!0},p(_,[d]){const S={};d&1024&&(S.$$scope={dirty:d,ctx:_}),!n&&d&4&&(n=!0,S.checked=_[2],K(()=>n=!1)),e.$set(S),_[2]?c?(c.p(_,d),d&4&&m(c,1)):(c=_r(_),c.c(),m(c,1),c.m(l.parentNode,l)):c&&(fe(),g(c,1,1,()=>{c=null}),ue());const y={};d&1031&&(y.$$scope={dirty:d,ctx:_}),o.$set(y);const T={};d&1031&&(T.$$scope={dirty:d,ctx:_}),u.$set(T)},i(_){s||(m(e.$$.fragment,_),m(c),m(o.$$.fragment,_),m(u.$$.fragment,_),s=!0)},o(_){g(e.$$.fragment,_),g(c),g(o.$$.fragment,_),g(u.$$.fragment,_),s=!1},d(_){_&&(p(t),p(l),p(i)),v(e,_),c&&c.d(_),v(o,_),v(u,_)}}}let ze="pct_commute",ot="pct_school";function hu(r,e,n){let t=ne.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=ze,i="baseline",u=!1;function s(_){let d=_.baseline,S=_.gov_target,y=_.go_dutch,T=`<h2>Trip purpose: ${o==ze?"commuting":"school"}</h2>`;if(T+=`<p>Baseline (2011): <b>${d.toLocaleString()}</b></p>`,d==0)T+=`<p>Government target (2025): <b>${S.toLocaleString()}</b></p>`,T+=`<p>Go Dutch: <b>${y.toLocaleString()}</b></p>`;else{let O=(S/d).toFixed(1),N=(y/d).toFixed(1);T+=`<p>Government target (2025): ${S.toLocaleString()} (<b>${O}x</b> of baseline)</p>`,T+=`<p>Go Dutch: ${y.toLocaleString()} (<b>${N}x</b> of baseline)</p>`}return T}function a(_){u=_,n(2,u)}function f(_){o=_,n(0,o)}function c(_){i=_,n(1,i)}return[o,i,u,t,l,s,a,f,c]}class bu extends q{constructor(e){super(),W(this,e,hu,du,U,{})}}function vu(r){let e;return{c(){e=w("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wu(r){let e;return{c(){e=w("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ku(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function yu(r){let e,n,t,l,o,i,u,s,a,f,c,_;return t=new V({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[wu]},$$scope:{ctx:r}}}),f=new V({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[ku]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("The average speed data is collected over a six-month period by "),h(t.$$.fragment),l=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=C(),i=A("p"),i.textContent="Data valid as of 1 September, 2023",u=C(),s=A("p"),a=w(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=w(".")},m(d,S){$(d,e,S),k(e,n),b(t,e,null),k(e,l),$(d,o,S),$(d,i,S),$(d,u,S),$(d,s,S),k(s,a),b(f,s,null),k(s,c),_=!0},p(d,S){const y={};S&256&&(y.$$scope={dirty:S,ctx:d}),t.$set(y);const T={};S&256&&(T.$$scope={dirty:S,ctx:d}),f.$set(T)},i(d){_||(m(t.$$.fragment,d),m(f.$$.fragment,d),_=!0)},o(d){g(t.$$.fragment,d),g(f.$$.fragment,d),_=!1},d(d){d&&(p(e),p(o),p(i),p(u),p(s)),v(t),v(f)}}}function Su(r){let e,n,t;return n=new ae({props:{$$slots:{default:[yu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function gr(r){let e,n,t,l,o;e=new Je({props:{colorScale:r[2],limits:r[3]}});function i(s){r[6](s)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new Dr({props:u}),X.push(()=>Y(t,"value",i)),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(s,a){b(e,s,a),$(s,n,a),b(t,s,a),o=!0},p(s,a){const f={};!l&&a&1&&(l=!0,f.value=s[0],K(()=>l=!1)),t.$set(f)},i(s){o||(m(e.$$.fragment,s),m(t.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),o=!1},d(s){s&&p(n),v(e,s),v(t,s)}}}function Ou(r){let e,n,t=r[7].indicative_mph+"",l,o,i,u,s,a=r[7].highest_mph+"",f,c,_=r[4][r[7].highest_description]+"",d,S;return{c(){e=A("p"),n=w("Posted speed limit: "),l=w(t),o=w(" mph"),i=C(),u=A("p"),s=w("Highest average speed: "),f=w(a),c=w(" mph (during "),d=w(_),S=w(")")},m(y,T){$(y,e,T),k(e,n),k(e,l),k(e,o),$(y,i,T),$(y,u,T),k(u,s),k(u,f),k(u,c),k(u,d),k(u,S)},p(y,T){T&128&&t!==(t=y[7].indicative_mph+"")&&R(l,t),T&128&&a!==(a=y[7].highest_mph+"")&&R(f,a),T&128&&_!==(_=y[4][y[7].highest_description]+"")&&R(d,_)},d(y){y&&(p(e),p(i),p(u))}}}function Tu(r){let e,n;return e=new le({props:{$$slots:{default:[Ou,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Cu(r){let e,n;const t=[B(gt),{sourceLayer:gt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ve(["get",r[0]],r[3],r[2]),"line-width":Ee,"line-opacity":Z(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[Tu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new he({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&15?x(t,[i&0&&te(B(gt)),i&0&&{sourceLayer:gt},t[2],t[3],i&13&&{paint:{"line-color":ve(["get",o[0]],o[3],o[2]),"line-width":Ee,"line-opacity":Z(1,.5)}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};i&256&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Au(r){let e,n,t,l,o,i;function u(f){r[5](f)}let s={id:gt,$$slots:{right:[Su],default:[vu]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new se({props:s}),X.push(()=>Y(e,"checked",u));let a=r[1]&&gr(r);return o=new de({props:{url:`pmtiles://${Kt()}/v1/${gt}.pmtiles`,$$slots:{default:[Cu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&256&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],K(()=>n=!1)),e.$set(_),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=gr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(fe(),g(a,1,1,()=>{a=null}),ue());const d={};c&259&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let gt="road_speeds";function Lu(r,e,n){let t=ne.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",i=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function s(f){i=f,n(1,i)}function a(f){o=f,n(0,o)}return[o,i,t,l,u,s,a]}class Iu extends q{constructor(e){super(),W(this,e,Lu,Au,U,{})}}function Pu(r){let e;return{c(){e=w("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mu(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Nu(r){let e,n,t,l,o,i,u,s,a;return u=new V({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Mu]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=C(),t=A("p"),t.textContent="Data valid as of 1 September, 2023",l=C(),o=A("p"),i=w(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),s=w(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,l,c),$(f,o,c),k(o,i),b(u,o,null),k(o,s),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),u.$set(_)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){g(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(l),p(o)),v(u)}}}function Eu(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Nu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function dr(r){let e,n;return e=new Je({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Fu(r){let e,n,t,l=r[4].average+"",o,i,u,s,a,f,c=r[4].minimum+"",_,d;return{c(){e=A("p"),n=w("Average width: "),t=A("b"),o=w(l),i=w(`
        meters`),u=C(),s=A("p"),a=w("Minimum width: "),f=A("b"),_=w(c),d=w(`
        meters`)},m(S,y){$(S,e,y),k(e,n),k(e,t),k(t,o),k(e,i),$(S,u,y),$(S,s,y),k(s,a),k(s,f),k(f,_),k(s,d)},p(S,y){y&16&&l!==(l=S[4].average+"")&&R(o,l),y&16&&c!==(c=S[4].minimum+"")&&R(_,c)},d(S){S&&(p(e),p(u),p(s))}}}function Du(r){let e,n;return e=new le({props:{$$slots:{default:[Fu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ju(r){let e,n;const t=[B(dt),{sourceLayer:dt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ve(["get","average"],r[2],r[1]),"line-width":Ee,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Du]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new he({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?x(t,[i&0&&te(B(dt)),i&0&&{sourceLayer:dt},t[2],t[3],i&6&&{paint:{"line-color":ve(["get","average"],o[2],o[1]),"line-width":Ee,"line-opacity":Z(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ru(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:dt,$$slots:{right:[Eu],default:[Pu]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new se({props:s}),X.push(()=>Y(e,"checked",u));let a=r[0]&&dr(r);return o=new de({props:{url:`pmtiles://${Kt()}/v1/${dt}.pmtiles`,$$slots:{default:[ju]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],K(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=dr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(fe(),g(a,1,1,()=>{a=null}),ue());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let dt="road_widths";function Bu(r,e,n){let t=ne.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class Hu extends q{constructor(e){super(),W(this,e,Bu,Ru,U,{})}}function Uu(r){let e,n,t;return{c(){e=A("input"),G(e,"class","govuk-file-upload"),G(e,"id","load-criticals"),G(e,"type","file")},m(l,o){$(l,e,o),r[7](e),n||(t=Ct(e,"change",r[5]),n=!0)},p:ee,d(l){l&&p(e),r[7](null),n=!1,t()}}}function hr(r){let e,n;return e=new rt({props:{small:!0,$$slots:{default:[Gu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zu(r){let e,n,t=r[2].toLocaleString()+"",l,o,i;return e=new ke({props:{color:Ot}}),{c(){h(e.$$.fragment),n=w(`
        Show `),l=w(t),o=w(" issues")},m(u,s){b(e,u,s),$(u,n,s),$(u,l,s),$(u,o,s),i=!0},p(u,s){(!i||s&4)&&t!==(t=u[2].toLocaleString()+"")&&R(l,t)},i(u){i||(m(e.$$.fragment,u),i=!0)},o(u){g(e.$$.fragment,u),i=!1},d(u){u&&(p(n),p(l),p(o)),v(e,u)}}}function Gu(r){let e,n,t;function l(i){r[8](i)}let o={id:"show-criticals",$$slots:{default:[zu]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new se({props:o}),X.push(()=>Y(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&2052&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],K(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function qu(r){let e,n,t,l,o,i;e=new Fr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[Uu]},$$scope:{ctx:r}}}),t=new jr({props:{errorMessage:r[3]}});let u=r[2]>0&&hr(r);return{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),u&&u.c(),o=Ae()},m(s,a){b(e,s,a),$(s,n,a),b(t,s,a),$(s,l,a),u&&u.m(s,a),$(s,o,a),i=!0},p(s,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:s}),e.$set(f);const c={};a&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?u?(u.p(s,a),a&4&&m(u,1)):(u=hr(s),u.c(),m(u,1),u.m(o.parentNode,o)):u&&(fe(),g(u,1,1,()=>{u=null}),ue())},i(s){i||(m(e.$$.fragment,s),m(t.$$.fragment,s),m(u),i=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),g(u),i=!1},d(s){s&&(p(n),p(l),p(o)),v(e,s),v(t,s),u&&u.d(s)}}}function Wu(r){let e,n,t=r[10].critical_type+"",l,o,i,u,s,a=r[10].location_description+"",f,c,_,d,S,y=r[10].notes+"",T,O,N,D,E,L,F,M=r[10].id+"",I,P,H,J,j,z=(r[10].inspector??"???")+"",$e,Fe,be,Ye=r[10].submission_time+"",pe,ce,re,et,Ce,Le=r[10].scheme_reference+"",De,oe,ge,je=r[10].current_design_stage+"",Ke;return{c(){e=A("div"),n=A("h2"),l=w(t),o=C(),i=A("p"),u=A("u"),u.textContent="Location",s=w(`
          : `),f=w(a),c=C(),_=A("p"),d=A("u"),d.textContent="Notes",S=w(`
          : `),T=w(y),O=C(),N=A("hr"),D=C(),E=A("p"),L=w("Critical issue ID: "),F=A("b"),I=w(M),P=C(),H=A("p"),J=w("Submitted by "),j=A("b"),$e=w(z),Fe=w(`
          at
          `),be=A("b"),pe=w(Ye),ce=C(),re=A("p"),et=w("For scheme "),Ce=A("b"),De=w(Le),oe=w(`
          in stage
          `),ge=A("b"),Ke=w(je),Te(e,"max-width","30vw")},m(we,ye){$(we,e,ye),k(e,n),k(n,l),k(e,o),k(e,i),k(i,u),k(i,s),k(i,f),k(e,c),k(e,_),k(_,d),k(_,S),k(_,T),k(e,O),k(e,N),k(e,D),k(e,E),k(E,L),k(E,F),k(F,I),k(e,P),k(e,H),k(H,J),k(H,j),k(j,$e),k(H,Fe),k(H,be),k(be,pe),k(e,ce),k(e,re),k(re,et),k(re,Ce),k(Ce,De),k(re,oe),k(re,ge),k(ge,Ke)},p(we,ye){ye&1024&&t!==(t=we[10].critical_type+"")&&R(l,t),ye&1024&&a!==(a=we[10].location_description+"")&&R(f,a),ye&1024&&y!==(y=we[10].notes+"")&&R(T,y),ye&1024&&M!==(M=we[10].id+"")&&R(I,M),ye&1024&&z!==(z=(we[10].inspector??"???")+"")&&R($e,z),ye&1024&&Ye!==(Ye=we[10].submission_time+"")&&R(pe,Ye),ye&1024&&Le!==(Le=we[10].scheme_reference+"")&&R(De,Le),ye&1024&&je!==(je=we[10].current_design_stage+"")&&R(Ke,je)},d(we){we&&p(e)}}}function Vu(r){let e,n;return e=new le({props:{$$slots:{default:[Wu,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xu(r){let e,n,t,l,o,i;const u=[B(`${nt}-clusters`),{applyToClusters:!0},{paint:{"circle-color":Ot,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let s={};for(let d=0;d<u.length;d+=1)s=Q(s,u[d]);e=new xe({props:s}),e.$on("click",r[6]);const a=[B(`${nt}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let d=0;d<a.length;d+=1)f=Q(f,a[d]);t=new Bl({props:f});const c=[B(`${nt}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Ot,"circle-opacity":Z(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let _={$$slots:{default:[Vu]},$$scope:{ctx:r}};for(let d=0;d<c.length;d+=1)_=Q(_,c[d]);return o=new xe({props:_}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment)},m(d,S){b(e,d,S),$(d,n,S),b(t,d,S),$(d,l,S),b(o,d,S),i=!0},p(d,S){const y=S&2?x(u,[S&0&&te(B(`${nt}-clusters`)),u[1],S&0&&{paint:{"circle-color":Ot,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},S&2&&{layout:{visibility:d[1]?"visible":"none"}},u[4]]):{};e.$set(y);const T=S&2?x(a,[S&0&&te(B(`${nt}-counts`)),a[1],S&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:d[1]?"visible":"none"}}]):{};t.$set(T);const O=S&2?x(c,[S&0&&te(B(`${nt}-points`)),c[1],c[2],c[3],S&0&&{paint:{"circle-color":Ot,"circle-opacity":Z(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},S&2&&{layout:{visibility:d[1]?"visible":"none"}}]):{};S&2048&&(O.$$scope={dirty:S,ctx:d}),o.$set(O)},i(d){i||(m(e.$$.fragment,d),m(t.$$.fragment,d),m(o.$$.fragment,d),i=!0)},o(d){g(e.$$.fragment,d),g(t.$$.fragment,d),g(o.$$.fragment,d),i=!1},d(d){d&&(p(n),p(l)),v(e,d),v(t,d),v(o,d)}}}function Ju(r){let e,n,t,l;return e=new Me({props:{label:"Critical Issues",$$slots:{default:[qu]},$$scope:{ctx:r}}}),t=new yt({props:{id:nt,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Xu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&2063&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&16&&(s.data=o[4]),i&2050&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}let nt="criticals",Ot="red";function Yu(r,e,n){let t;me(r,mn,d=>n(9,t=d));let l,o=!0,i=0,u="",s=al();async function a(d){try{n(4,s=await Ks(l.files[0])),n(2,i=s.features.length),n(3,u="")}catch(S){n(3,u=`The file you loaded is broken: ${S}`)}}function f(d){t.getSource(nt).getClusterExpansionZoom(d.detail.features[0].properties.cluster_id,(S,y)=>{S||t.easeTo({center:d.detail.features[0].geometry.coordinates,zoom:y})})}function c(d){X[d?"unshift":"push"](()=>{l=d,n(0,l)})}function _(d){o=d,n(1,o)}return[l,o,i,u,s,a,f,c,_]}class Ku extends q{constructor(e){super(),W(this,e,Yu,Ju,U,{})}}function Zu(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Crossings`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Qu(r){let e;return{c(){e=w("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xu(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Qu]},$$scope:{ctx:r}}}),i=new lt({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function ec(r){let e,n,t;return n=new ae({props:{$$slots:{default:[xu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function tc(r){let e,n=br(r[3])+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=br(l[3])+"")&&R(t,n)},d(l){l&&p(e)}}}function nc(r){let e,n;return e=new le({props:{$$slots:{default:[tc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function rc(r){let e,n;const t=[B(ht),{sourceLayer:ht},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[nc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new xe({props:l}),e.$on("click",oc),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?x(t,[i&0&&te(B(ht)),i&0&&{sourceLayer:ht},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function lc(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ht,$$slots:{right:[ec],default:[Zu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),X.push(()=>Y(e,"checked",i)),l=new de({props:{url:`pmtiles://${_e()}/v1/${ht}.pmtiles`,$$slots:{default:[rc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let ht="crossings";function br(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function oc(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function sc(r,e,n){let t=ne.crossings,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class ic extends q{constructor(e){super(),W(this,e,sc,lc,U,{})}}function ac(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Cycle parking`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function fc(r){let e;return{c(){e=w("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uc(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[fc]},$$scope:{ctx:r}}}),i=new lt({}),{c(){e=A("p"),n=w("Cycle parking, according to "),h(t.$$.fragment),l=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function cc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[uc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function $c(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=A("p"),n=w("Capacity: "),t=A("b"),o=w(l)},m(i,u){$(i,e,u),k(e,n),k(e,t),k(t,o)},p(i,u){u&8&&l!==(l=(i[3].capacity??"unknown")+"")&&R(o,l)},d(i){i&&p(e)}}}function pc(r){let e,n;return e=new le({props:{$$slots:{default:[$c,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mc(r){let e,n;const t=[B(bt),{sourceLayer:bt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[pc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new xe({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?x(t,[i&0&&te(B(bt)),i&0&&{sourceLayer:bt},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function _c(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:bt,$$slots:{right:[cc],default:[ac]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),X.push(()=>Y(e,"checked",i)),l=new de({props:{url:`pmtiles://${_e()}/v1/${bt}.pmtiles`,$$slots:{default:[mc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let bt="cycle_parking";function gc(r,e,n){let t=ne.cycle_parking,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class dc extends q{constructor(e){super(),W(this,e,gc,_c,U,{})}}function hc(r){let e,n,t,l;return e=new ke({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=C(),t=w(r[2])},m(o,i){b(e,o,i),$(o,n,i),$(o,t,i),l=!0},p(o,i){(!l||i&4)&&R(t,o[2])},i(o){l||(m(e.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),l=!1},d(o){o&&(p(n),p(t)),v(e,o)}}}function bc(r){let e;const n=r[5].default,t=Et(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&Ft(t,n,l,l[7],e?jt(n,l[7],o,null):Dt(l[7]),null)},i(l){e||(m(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function vc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[bc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&128&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function wc(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&R(t,n)},d(l){l&&p(e)}}}function kc(r){let e,n;return e=new le({props:{$$slots:{default:[wc,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yc(r){let e,n;const t=[B(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":Z(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[kc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new Ve({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&25?x(t,[i&1&&te(B(o[0])),i&1&&{sourceLayer:o[0]},i&16&&{paint:{"fill-color":o[4],"fill-opacity":Z(.7,1)}},i&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};i&130&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Sc(r){let e,n,t,l,o;function i(s){r[6](s)}let u={id:r[0],$$slots:{right:[vc],default:[hc]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new se({props:u}),X.push(()=>Y(e,"checked",i)),l=new de({props:{url:`pmtiles://${_e()}/v1/${r[0]}.pmtiles`,$$slots:{default:[yc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&1&&(f.id=s[0]),a&132&&(f.$$scope={dirty:a,ctx:s}),!n&&a&8&&(n=!0,f.checked=s[3],K(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${_e()}/v1/${s[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}function Oc(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:i}=e,{pluralNoun:u}=e,s=ne[o],a=!1;function f(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,i=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,i,u,a,s,t,f,l]}class hn extends q{constructor(e){super(),W(this,e,Oc,Sc,U,{name:0,singularNoun:1,pluralNoun:2})}}function Tc(r){let e;return{c(){e=w("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Cc(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Tc]},$$scope:{ctx:r}}}),i=new lt({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Ac(r){let e,n;return e=new hn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Cc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Lc extends q{constructor(e){super(),W(this,e,null,Ac,U,{})}}function Ic(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Railway Stations`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Pc(r){let e;return{c(){e=w("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mc(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Pc]},$$scope:{ctx:r}}}),i=new lt({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Nc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Mc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Ec(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&R(t,n)},d(l){l&&p(e)}}}function Fc(r){let e,n;return e=new le({props:{$$slots:{default:[Ec,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Dc(r){let e,n;const t=[B(Jt),{paint:{"circle-color":r[1],"circle-radius":Vt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Fc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new xe({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?x(t,[i&0&&te(B(Jt)),i&2&&{paint:{"circle-color":o[1],"circle-radius":Vt/2}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function jc(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Jt,$$slots:{right:[Nc],default:[Ic]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),X.push(()=>Y(e,"checked",i)),l=new yt({props:{data:`${_e()}/v1/${Jt}.geojson`,$$slots:{default:[Dc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Jt="railway_stations";function Rc(r,e,n){let t=ne.railway_stations,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Bc extends q{constructor(e){super(),W(this,e,Rc,jc,U,{})}}function Hc(r){let e;return{c(){e=w("primary and secondary schools")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Uc(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[Hc]},$$scope:{ctx:r}}}),i=new lt({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function zc(r){let e,n;return e=new hn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[Uc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Gc extends q{constructor(e){super(),W(this,e,null,zc,U,{})}}function qc(r){let e;return{c(){e=w("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wc(r){let e;return{c(){e=w("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vc(r){let e,n,t,l,o,i,u,s,a;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[qc]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Wc]},$$scope:{ctx:r}}}),s=new lt({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" and "),h(o.$$.fragment),i=w(" data from OpenStreetMap (as of 9 August 2023)."),u=C(),h(s.$$.fragment)},m(f,c){$(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const _={};c&1&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const d={};c&1&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(s,f)}}}function Xc(r){let e,n;return e=new hn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Vc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Jc extends q{constructor(e){super(),W(this,e,null,Xc,U,{})}}function Yc(r){let e;return{c(){e=w("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Kc(r){let e;return{c(){e=A("p"),e.textContent="TODO"},m(n,t){$(n,e,t)},p:ee,d(n){n&&p(e)}}}function Zc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Kc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function vr(r){let e,n,t,l,o,i,u,s=JSON.stringify(r[3])+"",a,f;function c(y){r[5](y)}let _={label:"Minimum year",width:4,min:1980,max:2023};r[0]!==void 0&&(_.value=r[0]),e=new Tn({props:_}),X.push(()=>Y(e,"value",c));function d(y){r[6](y)}let S={label:"Maximum year",width:4,min:1980,max:2023};return r[1]!==void 0&&(S.value=r[1]),l=new Tn({props:S}),X.push(()=>Y(l,"value",d)),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment),i=C(),u=A("p"),a=w(s)},m(y,T){b(e,y,T),$(y,t,T),b(l,y,T),$(y,i,T),$(y,u,T),k(u,a),f=!0},p(y,T){const O={};!n&&T&1&&(n=!0,O.value=y[0],K(()=>n=!1)),e.$set(O);const N={};!o&&T&2&&(o=!0,N.value=y[1],K(()=>o=!1)),l.$set(N),(!f||T&8)&&s!==(s=JSON.stringify(y[3])+"")&&R(a,s)},i(y){f||(m(e.$$.fragment,y),m(l.$$.fragment,y),f=!0)},o(y){g(e.$$.fragment,y),g(l.$$.fragment,y),f=!1},d(y){y&&(p(t),p(i),p(u)),v(e,y),v(l,y)}}}function Qc(r){let e,n=r[7].year+"",t,l,o=r[7].num_casualties+"",i,u,s=r[7].severity+"",a;return{c(){e=A("p"),t=w(n),l=w(", "),i=w(o),u=w(" casualties, worst was "),a=w(s)},m(f,c){$(f,e,c),k(e,t),k(e,l),k(e,i),k(e,u),k(e,a)},p(f,c){c&128&&n!==(n=f[7].year+"")&&R(t,n),c&128&&o!==(o=f[7].num_casualties+"")&&R(i,o),c&128&&s!==(s=f[7].severity+"")&&R(a,s)},d(f){f&&p(e)}}}function xc(r){let e,n;return e=new le({props:{$$slots:{default:[Qc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function e$(r){let e,n;const t=[B(vt),{sourceLayer:vt},{paint:{"circle-color":"red","circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:r[3]},{layout:{visibility:r[2]?"visible":"none"}},{eventsIfTopMost:!0}];let l={$$slots:{default:[xc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new xe({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&12?x(t,[i&0&&te(B(vt)),i&0&&{sourceLayer:vt},t[2],i&8&&{filter:o[3]},i&4&&{layout:{visibility:o[2]?"visible":"none"}},t[5]]):{};i&256&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function t$(r){let e,n,t,l,o,i;function u(f){r[4](f)}let s={id:vt,$$slots:{right:[Zc],default:[Yc]},$$scope:{ctx:r}};r[2]!==void 0&&(s.checked=r[2]),e=new se({props:s}),X.push(()=>Y(e,"checked",u));let a=r[2]&&vr(r);return o=new de({props:{url:`pmtiles://${_e()}/v1/${vt}.pmtiles`,$$slots:{default:[e$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&256&&(_.$$scope={dirty:c,ctx:f}),!n&&c&4&&(n=!0,_.checked=f[2],K(()=>n=!1)),e.$set(_),f[2]?a?(a.p(f,c),c&4&&m(a,1)):(a=vr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(fe(),g(a,1,1,()=>{a=null}),ue());const d={};c&268&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let vt="stats19";function n$(r,e){return r==null&&e==null?["literal",!0]:r==null?["<=",["get","year"],e]:e==null?[">=",["get","year"],r]:["all",[">=",["get","year"],r],["<=",["get","year"],e]]}function r$(r,e,n){let t,l=!1,o,i;function u(f){l=f,n(2,l)}function s(f){o=f,n(0,o)}function a(f){i=f,n(1,i)}return r.$$.update=()=>{r.$$.dirty&3&&n(3,t=n$(o,i))},[o,i,l,t,u,s,a]}class l$ extends q{constructor(e){super(),W(this,e,r$,t$,U,{})}}function o$(r){let e;return{c(){e=w("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function s$(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function i$(r){let e;return{c(){e=w("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function a$(r){let e,n,t,l,o,i,u,s,a,f,c;return t=new V({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[s$]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[i$]},$$scope:{ctx:r}}}),f=new Xe({}),{c(){e=A("p"),n=w("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),l=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),i=w(" for details and caveats about the measurements."),u=C(),s=A("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=C(),h(f.$$.fragment)},m(_,d){$(_,e,d),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(_,u,d),$(_,s,d),$(_,a,d),b(f,_,d),c=!0},p(_,d){const S={};d&64&&(S.$$scope={dirty:d,ctx:_}),t.$set(S);const y={};d&64&&(y.$$scope={dirty:d,ctx:_}),o.$set(y)},i(_){c||(m(t.$$.fragment,_),m(o.$$.fragment,_),m(f.$$.fragment,_),c=!0)},o(_){g(t.$$.fragment,_),g(o.$$.fragment,_),g(f.$$.fragment,_),c=!1},d(_){_&&(p(e),p(u),p(s),p(a)),v(t),v(o),v(f,_)}}}function f$(r){let e,n,t;return n=new ae({props:{$$slots:{default:[a$]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function wr(r){let e,n;return e=new Je({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function u$(r){let e,n=r[5].location+"",t,l,o,i,u,s=r[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,_,d,S=r[5].pedal_cycles_2022.toLocaleString()+"",y,T,O,N,D,E=r[5].method+"",L;return{c(){e=A("h2"),t=w(n),l=C(),o=A("p"),i=w("Total motor vehicles (2022 AADF): "),u=A("b"),a=w(s),f=C(),c=A("p"),_=w("Total pedal cycles (2022 AADF): "),d=A("b"),y=w(S),T=C(),O=A("p"),N=w("Count method: "),D=A("b"),L=w(E)},m(F,M){$(F,e,M),k(e,t),$(F,l,M),$(F,o,M),k(o,i),k(o,u),k(u,a),$(F,f,M),$(F,c,M),k(c,_),k(c,d),k(d,y),$(F,T,M),$(F,O,M),k(O,N),k(O,D),k(D,L)},p(F,M){M&32&&n!==(n=F[5].location+"")&&R(t,n),M&32&&s!==(s=F[5].motor_vehicles_2022.toLocaleString()+"")&&R(a,s),M&32&&S!==(S=F[5].pedal_cycles_2022.toLocaleString()+"")&&R(y,S),M&32&&E!==(E=F[5].method+"")&&R(L,E)},d(F){F&&(p(e),p(l),p(o),p(f),p(c),p(T),p(O))}}}function c$(r){let e,n;return e=new le({props:{$$slots:{default:[u$,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $$(r){let e,n;const t=[B(wt),{sourceLayer:wt},{paint:{"circle-color":ve(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[c$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new xe({props:l}),e.$on("click",m$),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?x(t,[i&0&&te(B(wt)),i&0&&{sourceLayer:wt},i&6&&{paint:{"circle-color":ve(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&64&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function p$(r){let e,n,t,l,o,i;function u(f){r[4](f)}let s={id:wt,$$slots:{right:[f$],default:[o$]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new se({props:s}),X.push(()=>Y(e,"checked",u));let a=r[0]&&wr(r);return o=new de({props:{url:`pmtiles://${_e()}/v1/${wt}.pmtiles`,$$slots:{default:[$$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&64&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],K(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=wr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(fe(),g(a,1,1,()=>{a=null}),ue());const d={};c&65&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let wt="vehicle_counts";function m$(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function _$(r,e,n){let t=ne.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],i=!1;function u(s){i=s,n(0,i)}return[i,t,l,o,u]}class g$ extends q{constructor(e){super(),W(this,e,_$,p$,U,{})}}function d$(r){let e,n,t,l,o,i,u,s;return e=new Gc({}),t=new Lc({}),o=new Jc({}),u=new Bc({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),$(a,l,f),b(o,a,f),$(a,i,f),b(u,a,f),s=!0},i(a){s||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(u.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(o.$$.fragment,a),g(u.$$.fragment,a),s=!1},d(a){a&&(p(n),p(l),p(i)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function h$(r){let e,n;return e=new rt({props:{small:!0,$$slots:{default:[d$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function b$(r){let e,n,t,l,o,i,u,s,a,f;return e=new Bf({}),t=new Yf({}),o=new Tf({}),u=new dc({}),a=new ic({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(c,_){b(e,c,_),$(c,n,_),b(t,c,_),$(c,l,_),b(o,c,_),$(c,i,_),b(u,c,_),$(c,s,_),b(a,c,_),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(l),p(i),p(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function v$(r){let e,n;return e=new rt({props:{small:!0,$$slots:{default:[b$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function w$(r){let e,n,t,l,o,i,u,s,a,f;return e=new za({}),t=new $f({}),o=new Yi({}),u=new da({}),a=new Pa({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(c,_){b(e,c,_),$(c,n,_),b(t,c,_),$(c,l,_),b(o,c,_),$(c,i,_),b(u,c,_),$(c,s,_),b(a,c,_),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(l),p(i),p(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function k$(r){let e,n;return e=new rt({props:{small:!0,$$slots:{default:[w$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function y$(r){let e,n,t,l;return e=new Ri({}),t=new sa({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function S$(r){let e,n;return e=new rt({props:{small:!0,$$slots:{default:[y$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function O$(r){let e,n,t,l,o,i;return e=new Hu({}),t=new ou({}),o=new Iu({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment)},m(u,s){b(e,u,s),$(u,n,s),b(t,u,s),$(u,l,s),b(o,u,s),i=!0},i(u){i||(m(e.$$.fragment,u),m(t.$$.fragment,u),m(o.$$.fragment,u),i=!0)},o(u){g(e.$$.fragment,u),g(t.$$.fragment,u),g(o.$$.fragment,u),i=!1},d(u){u&&(p(n),p(l)),v(e,u),v(t,u),v(o,u)}}}function T$(r){let e,n,t,l,o,i,u=pn()=="Private (development)",s,a,f;e=new g$({}),t=new l$({}),o=new bu({});let c=u&&O$();return a=new ef({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),c&&c.c(),s=C(),h(a.$$.fragment)},m(_,d){b(e,_,d),$(_,n,d),b(t,_,d),$(_,l,d),b(o,_,d),$(_,i,d),c&&c.m(_,d),$(_,s,d),b(a,_,d),f=!0},p:ee,i(_){f||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(o.$$.fragment,_),m(c),m(a.$$.fragment,_),f=!0)},o(_){g(e.$$.fragment,_),g(t.$$.fragment,_),g(o.$$.fragment,_),g(c),g(a.$$.fragment,_),f=!1},d(_){_&&(p(n),p(l),p(i),p(s)),v(e,_),v(t,_),v(o,_),c&&c.d(_),v(a,_)}}}function C$(r){let e,n;return e=new rt({props:{small:!0,$$slots:{default:[T$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function A$(r){let e,n,t,l,o;function i(s){r[3](s)}let u={};return r[0]!==void 0&&(u.enabled=r[0]),e=new _l({props:u}),X.push(()=>Y(e,"enabled",i)),l=new wl({}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,a){const f={};!n&&a&1&&(n=!0,f.enabled=s[0],K(()=>n=!1)),e.$set(f)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}function L$(r){let e,n,t,l,o,i,u,s,a,f,c,_,d,S,y,T;return e=new Ku({}),t=new Me({props:{label:"Trip generators",$$slots:{default:[h$]},$$scope:{ctx:r}}}),o=new Me({props:{label:"Existing infrastructure",$$slots:{default:[v$]},$$scope:{ctx:r}}}),u=new Me({props:{label:"Boundaries",$$slots:{default:[k$]},$$scope:{ctx:r}}}),a=new Me({props:{label:"Census",$$slots:{default:[S$]},$$scope:{ctx:r}}}),c=new Me({props:{label:"Other",$$slots:{default:[C$]},$$scope:{ctx:r}}}),d=new Me({props:{label:"Tools",$$slots:{default:[A$]},$$scope:{ctx:r}}}),y=new ml({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment),f=C(),h(c.$$.fragment),_=C(),h(d.$$.fragment),S=C(),h(y.$$.fragment)},m(O,N){b(e,O,N),$(O,n,N),b(t,O,N),$(O,l,N),b(o,O,N),$(O,i,N),b(u,O,N),$(O,s,N),b(a,O,N),$(O,f,N),b(c,O,N),$(O,_,N),b(d,O,N),$(O,S,N),b(y,O,N),T=!0},p(O,N){const D={};N&16&&(D.$$scope={dirty:N,ctx:O}),t.$set(D);const E={};N&16&&(E.$$scope={dirty:N,ctx:O}),o.$set(E);const L={};N&16&&(L.$$scope={dirty:N,ctx:O}),u.$set(L);const F={};N&16&&(F.$$scope={dirty:N,ctx:O}),a.$set(F);const M={};N&16&&(M.$$scope={dirty:N,ctx:O}),c.$set(M);const I={};N&17&&(I.$$scope={dirty:N,ctx:O}),d.$set(I);const P={};N&2&&(P.disabled=!O[1]),y.$set(P)},i(O){T||(m(e.$$.fragment,O),m(t.$$.fragment,O),m(o.$$.fragment,O),m(u.$$.fragment,O),m(a.$$.fragment,O),m(c.$$.fragment,O),m(d.$$.fragment,O),m(y.$$.fragment,O),T=!0)},o(O){g(e.$$.fragment,O),g(t.$$.fragment,O),g(o.$$.fragment,O),g(u.$$.fragment,O),g(a.$$.fragment,O),g(c.$$.fragment,O),g(d.$$.fragment,O),g(y.$$.fragment,O),T=!1},d(O){O&&(p(n),p(l),p(i),p(s),p(f),p(_),p(S)),v(e,O),v(t,O),v(o,O),v(u,O),v(a,O),v(c,O),v(d,O),v(y,O)}}}function I$(r){let e,n;const t=[B("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:r[1]?"none":"visible"}}];let l={};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new Ve({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&2?x(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function P$(r){let e,n,t,l;return e=new Me({props:{label:"Layers",open:!0,$$slots:{default:[L$]},$$scope:{ctx:r}}}),t=new yt({props:{data:r[2],$$slots:{default:[I$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&19&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&18&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function M$(r,e,n){let t,l;me(r,Kn,u=>n(1,l=u));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function i(u){t=u,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&Kn.set(!t)},[t,l,o,i]}class N$ extends q{constructor(e){super(),W(this,e,M$,P$,U,{})}}function E$(r,e,n){let{loadFile:t}=e;return _n(async()=>{let o=await(await fetch(`${Kt()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class F$ extends q{constructor(e){super(),W(this,e,E$,null,U,{loadFile:0})}}function kr(r){var o;let e,n,t=((o=r[0].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=A("p"),n=w("Current milestone: "),l=w(t)},m(i,u){$(i,e,u),k(e,n),k(e,l)},p(i,u){var s;u&1&&t!==(t=((s=i[0].browse)==null?void 0:s.current_milestone)+"")&&R(l,t)},d(i){i&&p(e)}}}function D$(r){let e;return{c(){e=w("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function j$(r){let e;return{c(){e=w("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function R$(r){let e,n,t,l;return e=new ln({props:{$$slots:{default:[D$]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new ln({props:{$$slots:{default:[j$]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&32&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function B$(r){var E,L,F,M;let e,n,t=((E=r[0].browse)==null?void 0:E.authority_or_region)+"",l,o,i,u,s=((L=r[0].browse)==null?void 0:L.capital_scheme_id)+"",a,f,c,_,d=((F=r[0].browse)==null?void 0:F.funding_programme)+"",S,y,T,O,N,D=((M=r[0].browse)==null?void 0:M.current_milestone)&&kr(r);return O=new gl({props:{$$slots:{default:[R$]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Authority or region: "),l=w(t),o=C(),i=A("p"),u=w("Capital scheme ID: "),a=w(s),f=C(),c=A("p"),_=w("Funding programme: "),S=w(d),y=C(),D&&D.c(),T=C(),h(O.$$.fragment)},m(I,P){$(I,e,P),k(e,n),k(e,l),$(I,o,P),$(I,i,P),k(i,u),k(i,a),$(I,f,P),$(I,c,P),k(c,_),k(c,S),$(I,y,P),D&&D.m(I,P),$(I,T,P),b(O,I,P),N=!0},p(I,P){var J,j,z,$e;(!N||P&1)&&t!==(t=((J=I[0].browse)==null?void 0:J.authority_or_region)+"")&&R(l,t),(!N||P&1)&&s!==(s=((j=I[0].browse)==null?void 0:j.capital_scheme_id)+"")&&R(a,s),(!N||P&1)&&d!==(d=((z=I[0].browse)==null?void 0:z.funding_programme)+"")&&R(S,d),($e=I[0].browse)!=null&&$e.current_milestone?D?D.p(I,P):(D=kr(I),D.c(),D.m(T.parentNode,T)):D&&(D.d(1),D=null);const H={};P&32&&(H.$$scope={dirty:P,ctx:I}),O.$set(H)},i(I){N||(m(O.$$.fragment,I),N=!0)},o(I){g(O.$$.fragment,I),N=!1},d(I){I&&(p(e),p(o),p(i),p(f),p(c),p(y),p(T)),D&&D.d(I),v(O,I)}}}function H$(r){var t;let e,n;return e=new Me({props:{label:`${r[0].scheme_reference}: ${(t=r[0].browse)==null?void 0:t.num_features} features`,$$slots:{default:[B$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),n=!0},p(l,[o]){var u;const i={};o&1&&(i.label=`${l[0].scheme_reference}: ${(u=l[0].browse)==null?void 0:u.num_features} features`),o&33&&(i.$$scope={dirty:o,ctx:l}),e.$set(i)},i(l){n||(m(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){v(e,l)}}}function U$(r,e,n){let t,l;me(r,kt,s=>n(3,t=s)),me(r,mn,s=>n(4,l=s));let{scheme:o}=e;function i(){let s={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};l==null||l.fitBounds(fl(s),{padding:20,animate:!1})}function u(){var f,c;let s={type:"FeatureCollection",features:t.features.filter(_=>_.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(s)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return r.$$set=s=>{"scheme"in s&&n(0,o=s.scheme)},[o,i,u]}class z$ extends q{constructor(e){super(),W(this,e,U$,H$,U,{scheme:0})}}function yr(r){let e,n,t=kn(r[0].length_meters)+"",l;return{c(){e=A("p"),n=w("Length: "),l=w(t)},m(o,i){$(o,e,i),k(e,n),k(e,l)},p(o,i){i&1&&t!==(t=kn(o[0].length_meters)+"")&&R(l,t)},d(o){o&&p(e)}}}function Sr(r){let e,n=r[2](r[0].description)+"";return{c(){e=A("p")},m(t,l){$(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[2](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Or(r){var o;let e,n,t=((o=r[1].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=A("p"),n=w("Current milestone: "),l=w(t)},m(i,u){$(i,e,u),k(e,n),k(e,l)},p(i,u){var s;u&2&&t!==(t=((s=i[1].browse)==null?void 0:s.current_milestone)+"")&&R(l,t)},d(i){i&&p(e)}}}function G$(r){var et,Ce,Le,De;let e,n,t,l=r[2](r[0].name)+"",o,i=r[0].intervention_type+"",u,s,a,f,c,_,d,S,y,T=r[0].scheme_reference+"",O,N,D,E,L=((et=r[1].browse)==null?void 0:et.authority_or_region)+"",F,M,I,P,H=((Ce=r[1].browse)==null?void 0:Ce.capital_scheme_id)+"",J,j,z,$e,Fe=((Le=r[1].browse)==null?void 0:Le.funding_programme)+"",be,Ye,pe=r[0].length_meters&&yr(r),ce=r[0].description&&Sr(r),re=((De=r[1].browse)==null?void 0:De.current_milestone)&&Or(r);return{c(){e=A("div"),n=A("h2"),t=new gn(!1),o=w(" ("),u=w(i),s=w(")"),a=C(),pe&&pe.c(),f=C(),ce&&ce.c(),c=C(),_=A("hr"),d=C(),S=A("p"),y=w("Part of scheme: "),O=w(T),N=C(),D=A("p"),E=w("Authority or region: "),F=w(L),M=C(),I=A("p"),P=w("Capital scheme ID: "),J=w(H),j=C(),z=A("p"),$e=w("Funding programme: "),be=w(Fe),Ye=C(),re&&re.c(),t.a=o,Te(e,"max-width","30vw")},m(oe,ge){$(oe,e,ge),k(e,n),t.m(l,n),k(n,o),k(n,u),k(n,s),k(e,a),pe&&pe.m(e,null),k(e,f),ce&&ce.m(e,null),k(e,c),k(e,_),k(e,d),k(e,S),k(S,y),k(S,O),k(e,N),k(e,D),k(D,E),k(D,F),k(e,M),k(e,I),k(I,P),k(I,J),k(e,j),k(e,z),k(z,$e),k(z,be),k(e,Ye),re&&re.m(e,null)},p(oe,[ge]){var je,Ke,we,ye;ge&1&&l!==(l=oe[2](oe[0].name)+"")&&t.p(l),ge&1&&i!==(i=oe[0].intervention_type+"")&&R(u,i),oe[0].length_meters?pe?pe.p(oe,ge):(pe=yr(oe),pe.c(),pe.m(e,f)):pe&&(pe.d(1),pe=null),oe[0].description?ce?ce.p(oe,ge):(ce=Sr(oe),ce.c(),ce.m(e,c)):ce&&(ce.d(1),ce=null),ge&1&&T!==(T=oe[0].scheme_reference+"")&&R(O,T),ge&2&&L!==(L=((je=oe[1].browse)==null?void 0:je.authority_or_region)+"")&&R(F,L),ge&2&&H!==(H=((Ke=oe[1].browse)==null?void 0:Ke.capital_scheme_id)+"")&&R(J,H),ge&2&&Fe!==(Fe=((we=oe[1].browse)==null?void 0:we.funding_programme)+"")&&R(be,Fe),(ye=oe[1].browse)!=null&&ye.current_milestone?re?re.p(oe,ge):(re=Or(oe),re.c(),re.m(e,null)):re&&(re.d(1),re=null)},i:ee,o:ee,d(oe){oe&&p(e),pe&&pe.d(),ce&&ce.d(),re&&re.d()}}}function q$(r,e,n){let t,l,o;me(r,Gt,s=>n(4,l=s)),me(r,Nt,s=>n(3,o=s));let{props:i}=e;function u(s){return l?s.replace(new RegExp(l,"gi"),a=>`<mark>${a}</mark>`):s}return r.$$set=s=>{"props"in s&&n(0,i=s.props)},r.$$.update=()=>{r.$$.dirty&9&&n(1,t=o.get(i.scheme_reference))},[i,t,u,o]}class bn extends q{constructor(e){super(),W(this,e,q$,G$,U,{props:0})}}function W$(r){let e,n=r[6].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&R(t,n)},d(l){l&&p(e)}}}function V$(r){let e,n;return e=new bn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function X$(r){let e,n,t,l;return e=new le({props:{popupClass:"border-popup",$$slots:{default:[W$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new le({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[V$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&192&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&192&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function J$(r){let e,n=r[6].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&R(t,n)},d(l){l&&p(e)}}}function Y$(r){let e,n;return e=new bn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function K$(r){let e,n,t,l;return e=new le({props:{popupClass:"border-popup",$$slots:{default:[J$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new le({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Y$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&192&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&192&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Z$(r){let e,n=r[6].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&R(t,n)},d(l){l&&p(e)}}}function Q$(r){let e,n;return e=new bn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function x$(r){let e,n,t,l;return e=new le({props:{popupClass:"border-popup",$$slots:{default:[Z$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new le({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Q$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&192&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&192&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function ep(r){let e,n,t,l,o,i,u,s,a,f;const c=[B("interventions-points"),{filter:["all",yn,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":Vt,"circle-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let _={$$slots:{default:[X$]},$$scope:{ctx:r}};for(let L=0;L<c.length;L+=1)_=Q(_,c[L]);e=new xe({props:_});const d=[B("interventions-lines"),{filter:["all",Sn,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":St,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let S={$$slots:{default:[K$]},$$scope:{ctx:r}};for(let L=0;L<d.length;L+=1)S=Q(S,d[L]);t=new he({props:S});const y=[B("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*St,"circle-opacity":0,"circle-stroke-color":Qe.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let T={};for(let L=0;L<y.length;L+=1)T=Q(T,y[L]);o=new xe({props:T});const O=[B("interventions-polygons"),{filter:["all",Ht,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":Z(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let N={$$slots:{default:[x$]},$$scope:{ctx:r}};for(let L=0;L<O.length;L+=1)N=Q(N,O[L]);u=new Ve({props:N});const D=[B("interventions-polygons-outlines"),{filter:["all",Ht,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*St}},{layout:{visibility:r[0]?"visible":"none"}}];let E={};for(let L=0;L<D.length;L+=1)E=Q(E,D[L]);return a=new he({props:E}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(L,F){b(e,L,F),$(L,n,F),b(t,L,F),$(L,l,F),b(o,L,F),$(L,i,F),b(u,L,F),$(L,s,F),b(a,L,F),f=!0},p(L,F){const M=F&29?x(c,[c[0],F&24&&{filter:["all",yn,L[3],L[4]]},c[2],c[3],F&4&&{paint:{"circle-color":L[2],"circle-radius":Vt,"circle-opacity":Z(1,.5)}},F&1&&{layout:{visibility:L[0]?"visible":"none"}},c[6]]):{};F&128&&(M.$$scope={dirty:F,ctx:L}),e.$set(M);const I=F&13?x(d,[d[0],F&8&&{filter:["all",Sn,L[3]]},d[2],d[3],F&4&&{paint:{"line-color":L[2],"line-width":St,"line-opacity":Z(1,.5)}},F&1&&{layout:{visibility:L[0]?"visible":"none"}},d[6]]):{};F&128&&(I.$$scope={dirty:F,ctx:L}),t.$set(I);const P=F&1?x(y,[y[0],y[1],y[2],{layout:{visibility:L[0]?"visible":"none"}}]):{};o.$set(P);const H=F&13?x(O,[O[0],F&8&&{filter:["all",Ht,L[3]]},O[2],O[3],F&4&&{paint:{"fill-color":L[2],"fill-opacity":Z(.2,.5)}},F&1&&{layout:{visibility:L[0]?"visible":"none"}},O[6]]):{};F&128&&(H.$$scope={dirty:F,ctx:L}),u.$set(H);const J=F&13?x(D,[D[0],F&8&&{filter:["all",Ht,L[3]]},F&4&&{paint:{"line-color":L[2],"line-opacity":.5,"line-width":.7*St}},F&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};a.$set(J)},i(L){f||(m(e.$$.fragment,L),m(t.$$.fragment,L),m(o.$$.fragment,L),m(u.$$.fragment,L),m(a.$$.fragment,L),f=!0)},o(L){g(e.$$.fragment,L),g(t.$$.fragment,L),g(o.$$.fragment,L),g(u.$$.fragment,L),g(a.$$.fragment,L),f=!1},d(L){L&&(p(n),p(l),p(i),p(s)),v(e,L),v(t,L),v(o,L),v(u,L),v(a,L)}}}function tp(r){let e,n;return e=new yt({props:{data:r[1],$$slots:{default:[ep]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.data=t[1]),l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function np(r,e,n){let t,l;me(r,kt,a=>n(5,l=a));let{showSchemes:o}=e,i=tl();const u=["!=",["get","hide_while_editing"],!0],s=["!=",["get","endpoint"],!0];return r.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&n(1,t=ul(l))},[o,t,i,u,s,l]}class rp extends q{constructor(e){super(),W(this,e,np,tp,U,{showSchemes:0})}}function Tr(r,e,n){const t=r.slice();return t[10]=e[n],t}function lp(r){let e,n;return e=new F$({props:{loadFile:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Cr(r){let e,n,t,l;function o(s){r[7](s)}function i(s){r[8](s)}let u={};return r[1]!==void 0&&(u.schemesToBeShown=r[1]),r[2]!==void 0&&(u.show=r[2]),e=new ii({props:u}),X.push(()=>Y(e,"schemesToBeShown",o)),X.push(()=>Y(e,"show",i)),{c(){h(e.$$.fragment)},m(s,a){b(e,s,a),l=!0},p(s,a){const f={};!n&&a&2&&(n=!0,f.schemesToBeShown=s[1],K(()=>n=!1)),!t&&a&4&&(t=!0,f.show=s[2],K(()=>t=!1)),e.$set(f)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){v(e,s)}}}function Ar(r){let e,n;return e=new z$({props:{scheme:r[10]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.scheme=t[10]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Lr(r){let e=r[1].has(r[10].scheme_reference),n,t,l=e&&Ar(r);return{c(){l&&l.c(),n=Ae()},m(o,i){l&&l.m(o,i),$(o,n,i),t=!0},p(o,i){i&34&&(e=o[1].has(o[10].scheme_reference)),e?l?(l.p(o,i),i&34&&m(l,1)):(l=Ar(o),l.c(),m(l,1),l.m(n.parentNode,n)):l&&(fe(),g(l,1,1,()=>{l=null}),ue())},i(o){t||(m(l),t=!0)},o(o){g(l),t=!1},d(o){o&&p(n),l&&l.d(o)}}}function op(r){let e,n,t,l,o,i,u,s,a,f,c=pn()=="Private (development)",_,d,S,y,T,O,N,D;o=new vl({props:{boundaryGeojson:r[3]}}),u=new Vl({}),a=new cl({});let E=c&&lp(r);d=new hl({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[6]}}),y=new jr({props:{errorMessage:r[0]}});let L=r[5].size>0&&Cr(r),F=qe(r[5].values()),M=[];for(let P=0;P<F.length;P+=1)M[P]=Lr(Tr(r,F,P));const I=P=>g(M[P],1,1,()=>{M[P]=null});return{c(){e=A("div"),n=A("div"),t=A("h1"),t.textContent="Browse schemes",l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment),f=C(),E&&E.c(),_=C(),h(d.$$.fragment),S=C(),h(y.$$.fragment),T=C(),L&&L.c(),O=C(),N=A("ul");for(let P=0;P<M.length;P+=1)M[P].c();Te(n,"display","flex"),Te(n,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(P,H){$(P,e,H),k(e,n),k(n,t),k(n,l),b(o,n,null),k(e,i),b(u,e,null),k(e,s),b(a,e,null),k(e,f),E&&E.m(e,null),k(e,_),b(d,e,null),k(e,S),b(y,e,null),k(e,T),L&&L.m(e,null),k(e,O),k(e,N);for(let J=0;J<M.length;J+=1)M[J]&&M[J].m(N,null);D=!0},p(P,H){const J={};H&8&&(J.boundaryGeojson=P[3]),o.$set(J),c&&E.p(P,H);const j={};if(H&1&&(j.errorMessage=P[0]),y.$set(j),P[5].size>0?L?(L.p(P,H),H&32&&m(L,1)):(L=Cr(P),L.c(),m(L,1),L.m(e,O)):L&&(fe(),g(L,1,1,()=>{L=null}),ue()),H&34){F=qe(P[5].values());let z;for(z=0;z<F.length;z+=1){const $e=Tr(P,F,z);M[z]?(M[z].p($e,H),m(M[z],1)):(M[z]=Lr($e),M[z].c(),m(M[z],1),M[z].m(N,null))}for(fe(),z=F.length;z<M.length;z+=1)I(z);ue()}},i(P){if(!D){m(o.$$.fragment,P),m(u.$$.fragment,P),m(a.$$.fragment,P),m(E),m(d.$$.fragment,P),m(y.$$.fragment,P),m(L);for(let H=0;H<F.length;H+=1)m(M[H]);D=!0}},o(P){g(o.$$.fragment,P),g(u.$$.fragment,P),g(a.$$.fragment,P),g(E),g(d.$$.fragment,P),g(y.$$.fragment,P),g(L),M=M.filter(Boolean);for(let H=0;H<M.length;H+=1)g(M[H]);D=!1},d(P){P&&p(e),v(o),v(u),v(a),E&&E.d(),v(d),v(y),L&&L.d(),At(M,P)}}}function sp(r){let e,n,t,l,o,i,u;return e=new dl({}),t=new rp({props:{showSchemes:r[2]}}),i=new N$({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),o=A("div"),h(i.$$.fragment),G(o,"class","top-right svelte-u44ed2")},m(s,a){b(e,s,a),$(s,n,a),b(t,s,a),$(s,l,a),$(s,o,a),b(i,o,null),u=!0},p(s,a){const f={};a&4&&(f.showSchemes=s[2]),t.$set(f)},i(s){u||(m(e.$$.fragment,s),m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(n),p(l),p(o)),v(e,s),v(t,s),v(i)}}}function ip(r){let e,n,t;return n=new $l({props:{style:r[4],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[sp]},$$scope:{ctx:r}}}),{c(){e=A("div"),h(n.$$.fragment),G(e,"slot","main")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.style=l[4]),o&8196&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ap(r){let e,n;return e=new kl({props:{$$slots:{main:[ip],sidebar:[op]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&8255&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fp(r,e,n){let t,l,o;me(r,kt,d=>n(3,t=d)),me(r,On,d=>n(4,l=d)),me(r,Nt,d=>n(5,o=d)),_n(()=>{pl()});const i=new URLSearchParams(window.location.search);On.set(i.get("style")||"dataviz");let u="",s=new Set,a=!0;function f(d){try{kt.set(JSON.parse(d)),Nt.set(Js(t)),n(0,u="")}catch(S){n(0,u=`The file you loaded is broken: ${S}`)}}function c(d){s=d,n(1,s)}function _(d){a=d,n(2,a)}return[u,s,a,t,l,o,f,c,_]}class up extends q{constructor(e){super(),W(this,e,fp,ap,U,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new up({target:document.getElementById("app")});
