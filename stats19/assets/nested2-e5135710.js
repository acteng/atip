import{S as X,i as Y,s as G,e as T,h as z,$ as we,j as $,W as ee,o as p,aP as dl,b as V,c as Q,d as I,g as h,m as b,w as at,l as J,t as _,n as d,p as v,X as jt,Y as Rt,Z as Bt,_ as Ht,a7 as We,J as fe,K as ue,aQ as It,u as k,k as w,D as j,I as Ae,N as mn,O as Ur,q as ge,P as qr,Q as Wr,T as Pt,U as Vr,V as Xr,aX as hl,aY as ut,a4 as kn,aZ as bl,f as _n,aO as vl,ar as Xt,aj as Kt,ae as gn,r as dn,F as Yr,a as sn,v as lt,aW as W,a_ as _e,a$ as be,B as K,ah as Z,C as ve,ak as x,b0 as ne,G as Ot,H as Qr,aS as Mt,ab as yn,b1 as Zt,R as Jr,b2 as hn,E as Kr,as as wl,ag as kl,aU as Sn,al as yl,am as Cn,an as On,ao as Ut,aV as Tn,L as Sl,M as Cl,y as Ol}from"./index-a7ad109c.js";import{d as Ze,j as Nt,C as De,f as et,h as re,l as H,c as Yt,k as Tl,S as Al,B as Ll,b as Tt,G as Il}from"./StreetViewTool-c9882af3.js";import{a as Xe,F as Pl}from"./Popup-0e4cca68.js";import{P as le}from"./Popup-5e3a05dd.js";import{R as Ml,C as xe,Z as Nl}from"./ZoomOutMap-ca11aacc.js";import{L as Dl,a as El}from"./LineMeasureController-c6fbef52.js";function Fl(r){let e;return{c(){e=T("span"),z(e,"class","svelte-kzgqtg"),we(e,"background",r[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&we(e,"background",n[0])},i:ee,o:ee,d(n){n&&p(e)}}}function jl(r,e,n){let{color:t}=e;return r.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class ye extends X{constructor(e){super(),Y(this,e,jl,Fl,G,{color:0})}}const Rl="/atip/stats19/assets/help-d011708a.svg";function Bl(r){let e,n;const t=r[1].default,l=jt(t,r,r[4],null);return{c(){e=T("div"),l&&l.c(),z(e,"class","govuk-prose")},m(o,s){$(o,e,s),l&&l.m(e,null),n=!0},p(o,s){l&&l.p&&(!n||s&16)&&Rt(l,t,o,o[4],n?Ht(t,o[4],s,null):Bt(o[4]),null)},i(o){n||(_(l,o),n=!0)},o(o){d(l,o),n=!1},d(o){o&&p(e),l&&l.d(o)}}}function Hl(r){let e,n,t,l,o,s,f;function i(u){r[3](u)}let a={title:"Help",$$slots:{default:[Bl]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new dl({props:a}),V.push(()=>Q(t,"open",i)),{c(){e=T("button"),e.innerHTML=`<img src="${Rl}" title="Help" alt="Help"/>`,n=I(),h(t.$$.fragment),z(e,"class","svelte-7d9d1l")},m(u,c){$(u,e,c),$(u,n,c),b(t,u,c),o=!0,s||(f=at(e,"click",r[2]),s=!0)},p(u,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,g.open=u[0],J(()=>l=!1)),t.$set(g)},i(u){o||(_(t.$$.fragment,u),o=!0)},o(u){d(t.$$.fragment,u),o=!1},d(u){u&&(p(e),p(n)),v(t,u),s=!1,f()}}}function zl(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const s=()=>n(0,o=!0);function f(i){o=i,n(0,o)}return r.$$set=i=>{"$$scope"in i&&n(4,l=i.$$scope)},[o,t,s,f,l]}class ae extends X{constructor(e){super(),Y(this,e,zl,Hl,G,{})}}function An(r,e,n){const t=r.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function Ln(r){let e,n,t,l=r[1]+"",o,s,f;return n=new ye({props:{color:r[2]}}),{c(){e=T("li"),h(n.$$.fragment),t=I(),o=k(l),s=I()},m(i,a){$(i,e,a),b(n,e,null),w(e,t),w(e,o),w(e,s),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),n.$set(u),(!f||a&1)&&l!==(l=i[1]+"")&&j(o,l)},i(i){f||(_(n.$$.fragment,i),f=!0)},o(i){d(n.$$.fragment,i),f=!1},d(i){i&&p(e),v(n)}}}function Gl(r){let e,n,t=We(r[0]),l=[];for(let s=0;s<t.length;s+=1)l[s]=Ln(An(r,t,s));const o=s=>d(l[s],1,1,()=>{l[s]=null});return{c(){e=T("ul");for(let s=0;s<l.length;s+=1)l[s].c()},m(s,f){$(s,e,f);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(s,[f]){if(f&1){t=We(s[0]);let i;for(i=0;i<t.length;i+=1){const a=An(s,t,i);l[i]?(l[i].p(a,f),_(l[i],1)):(l[i]=Ln(a),l[i].c(),_(l[i],1),l[i].m(e,null))}for(fe(),i=t.length;i<l.length;i+=1)o(i);ue()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)_(l[f]);n=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)d(l[f]);n=!1},d(s){s&&p(e),It(l,s)}}}function Ul(r,e,n){let{rows:t}=e;return r.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class Zr extends X{constructor(e){super(),Y(this,e,Ul,Gl,G,{rows:0})}}function In(r){let e=r[0],n,t,l=Pn(r);return{c(){l.c(),n=Ae()},m(o,s){l.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&G(e,e=o[0])?(fe(),d(l,1,1,ee),ue(),l=Pn(o),l.c(),_(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(_(l),t=!0)},o(o){d(l),t=!1},d(o){o&&p(n),l.d(o)}}}function Pn(r){let e;const n=r[10].default,t=jt(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&Rt(t,n,l,l[9],e?Ht(n,l[9],o,null):Bt(l[9]),null)},i(l){e||(_(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function ql(r){let e,n,t=r[0]&&In(r);return{c(){t&&t.c(),e=Ae()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&_(t,1)):(t=In(l),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(fe(),d(t,1,1,()=>{t=null}),ue())},i(l){n||(_(t),n=!0)},o(l){d(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function Wl(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:f=mn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e;const{map:u,self:c}=Ur();ge(r,u,y=>n(8,l=y)),ge(r,c,y=>n(0,t=y));let g,m=!0;return qr(()=>{t&&g&&l&&(Wr(u,t,g),Pt(c,t=null,t),n(6,g=void 0))}),r.$$set=y=>{"id"in y&&n(3,f=y.id),"tiles"in y&&n(4,i=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,s=y.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==f&&(Pt(c,t=f,t),Vr(l,t,Xr({type:"raster",tiles:i,tileSize:a}),y=>l&&y===t,()=>{t&&(n(6,g=l==null?void 0:l.getSource(t)),n(7,m=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,g=l==null?void 0:l.getSource(f))})),r.$$.dirty&208&&g&&(m?n(7,m=!1):g.setTiles(i))},[t,u,c,f,i,a,g,m,l,s,o]}class Vl extends X{constructor(e){super(),Y(this,e,Wl,ql,G,{id:3,tiles:4,tileSize:5})}}function Xl(r){let e;const n=r[16].default,t=jt(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&Rt(t,n,l,l[24],e?Ht(n,l[24],o,null):Bt(l[24]),null)},i(l){e||(_(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function Yl(r){let e,n,t;function l(s){r[17](s)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[Xl]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new hl({props:o}),V.push(()=>Q(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){h(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,[f]){const i={};f&2&&(i.id=s[1]),f&4&&(i.source=s[2]),f&8&&(i.sourceLayer=s[3]),f&16&&(i.beforeId=s[4]),f&32&&(i.beforeLayerType=s[5]),f&64&&(i.paint=s[6]),f&128&&(i.layout=s[7]),f&256&&(i.filter=s[8]),f&512&&(i.applyToClusters=s[9]),f&1024&&(i.minzoom=s[10]),f&2048&&(i.maxzoom=s[11]),f&4096&&(i.hoverCursor=s[12]),f&8192&&(i.manageHoverState=s[13]),f&16384&&(i.eventsIfTopMost=s[14]),f&32768&&(i.interactive=s[15]),f&16777216&&(i.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,i.hovered=s[0],J(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Ql(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=mn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:g=void 0}=e,{applyToClusters:m=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:S=void 0}=e,{hoverCursor:L=void 0}=e,{manageHoverState:C=!1}=e,{hovered:D=null}=e,{eventsIfTopMost:E=!1}=e,{interactive:F=!0}=e;function A(R){D=R,n(0,D)}function M(R){ut.call(this,r,R)}function N(R){ut.call(this,r,R)}function O(R){ut.call(this,r,R)}function P(R){ut.call(this,r,R)}function B(R){ut.call(this,r,R)}function q(R){ut.call(this,r,R)}return r.$$set=R=>{"id"in R&&n(1,o=R.id),"source"in R&&n(2,s=R.source),"sourceLayer"in R&&n(3,f=R.sourceLayer),"beforeId"in R&&n(4,i=R.beforeId),"beforeLayerType"in R&&n(5,a=R.beforeLayerType),"paint"in R&&n(6,u=R.paint),"layout"in R&&n(7,c=R.layout),"filter"in R&&n(8,g=R.filter),"applyToClusters"in R&&n(9,m=R.applyToClusters),"minzoom"in R&&n(10,y=R.minzoom),"maxzoom"in R&&n(11,S=R.maxzoom),"hoverCursor"in R&&n(12,L=R.hoverCursor),"manageHoverState"in R&&n(13,C=R.manageHoverState),"hovered"in R&&n(0,D=R.hovered),"eventsIfTopMost"in R&&n(14,E=R.eventsIfTopMost),"interactive"in R&&n(15,F=R.interactive),"$$scope"in R&&n(24,l=R.$$scope)},[D,o,s,f,i,a,u,c,g,m,y,S,L,C,E,F,t,A,M,N,O,P,B,q,l]}class Jl extends X{constructor(e){super(),Y(this,e,Ql,Yl,G,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Mn(r){let e=r[0],n,t,l=Nn(r);return{c(){l.c(),n=Ae()},m(o,s){l.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&G(e,e=o[0])?(fe(),d(l,1,1,ee),ue(),l=Nn(o),l.c(),_(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(_(l),t=!0)},o(o){d(l),t=!1},d(o){o&&p(n),l.d(o)}}}function Nn(r){let e;const n=r[9].default,t=jt(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&Rt(t,n,l,l[8],e?Ht(n,l[8],o,null):Bt(l[8]),null)},i(l){e||(_(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function Kl(r){let e,n,t=r[0]&&Mn(r);return{c(){t&&t.c(),e=Ae()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&_(t,1)):(t=Mn(l),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(fe(),d(t,1,1,()=>{t=null}),ue())},i(l){n||(_(t),n=!0)},o(l){d(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function Zl(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:f=mn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e;if(i&&i.includes("pmtiles://")&&!kn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new bl;kn.addProtocol("pmtiles",y.tile)}const{map:c,self:g}=Ur();ge(r,c,y=>n(7,l=y)),ge(r,g,y=>n(0,t=y));let m;return qr(()=>{t&&l&&(Wr(c,t,m),Pt(g,t=null,t),m=void 0)}),r.$$set=y=>{"id"in y&&n(3,f=y.id),"url"in y&&n(4,i=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,u=y.promoteId),"$$scope"in y&&n(8,s=y.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==f&&(Pt(g,t=f,t),Vr(l,t,Xr({type:"vector",url:i,tiles:a,promoteId:u}),y=>l&&y===t,()=>{t&&(m=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{m=l==null?void 0:l.getSource(f)}))},[t,c,g,f,i,a,u,l,s,o]}class de extends X{constructor(e){super(),Y(this,e,Zl,Kl,G,{id:3,url:4,tiles:5,promoteId:6})}}function xl(r){let e;return{c(){e=T("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function eo(r){let e,n,t=r[0]=="Private (development)"&&xl();return{c(){t&&t.c(),e=I(),n=T("p"),n.textContent="Note the ATF scheme data has not been validated."},m(l,o){t&&t.m(l,o),$(l,e,o),$(l,n,o)},p:ee,d(l){l&&(p(e),p(n)),t&&t.d(l)}}}function to(r){let e,n,t,l,o,s;return o=new ae({props:{$$slots:{default:[eo]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("App version: "),t=k(r[0]),l=I(),h(o.$$.fragment)},m(f,i){$(f,e,i),w(e,n),w(e,t),w(e,l),b(o,e,null),s=!0},p(f,[i]){const a={};i&2&&(a.$$scope={dirty:i,ctx:f}),o.$set(a)},i(f){s||(_(o.$$.fragment,f),s=!0)},o(f){d(o.$$.fragment,f),s=!1},d(f){f&&p(e),v(o)}}}function no(r){return[_n()]}class ro extends X{constructor(e){super(),Y(this,e,no,to,G,{})}}const lo={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Ce=Uint8Array,it=Uint16Array,xr=Uint32Array,el=new Ce([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),tl=new Ce([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),oo=new Ce([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),nl=function(r,e){for(var n=new it(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new xr(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},rl=nl(el,2),ll=rl[0],so=rl[1];ll[28]=258,so[258]=28;var io=nl(tl,0),ao=io[0],an=new it(32768);for(var ie=0;ie<32768;++ie){var nt=(ie&43690)>>>1|(ie&21845)<<1;nt=(nt&52428)>>>2|(nt&13107)<<2,nt=(nt&61680)>>>4|(nt&3855)<<4,an[ie]=((nt&65280)>>>8|(nt&255)<<8)>>>1}var Lt=function(r,e,n){for(var t=r.length,l=0,o=new it(e);l<t;++l)r[l]&&++o[r[l]-1];var s=new it(e);for(l=0;l<e;++l)s[l]=s[l-1]+o[l-1]<<1;var f;if(n){f=new it(1<<e);var i=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],u=e-r[l],c=s[r[l]-1]++<<u,g=c|(1<<u)-1;c<=g;++c)f[an[c]>>>i]=a}else for(f=new it(t),l=0;l<t;++l)r[l]&&(f[l]=an[s[r[l]-1]++]>>>15-r[l]);return f},zt=new Ce(288);for(var ie=0;ie<144;++ie)zt[ie]=8;for(var ie=144;ie<256;++ie)zt[ie]=9;for(var ie=256;ie<280;++ie)zt[ie]=7;for(var ie=280;ie<288;++ie)zt[ie]=8;var ol=new Ce(32);for(var ie=0;ie<32;++ie)ol[ie]=5;var fo=Lt(zt,9,1),uo=Lt(ol,5,1),xt=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},Me=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},en=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},co=function(r){return(r+7)/8|0},bn=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?it:r.BYTES_PER_ELEMENT==4?xr:Ce)(n-e);return t.set(r.subarray(e,n)),t},$o=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ne=function(r,e,n){var t=new Error(e||$o[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Ne),!n)throw t;return t},po=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new Ce(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new Ce(t*3));var s=function(he){var Re=e.length;if(he>Re){var Je=new Ce(Math.max(Re*2,he));Je.set(e),e=Je}},f=n.f||0,i=n.p||0,a=n.b||0,u=n.l,c=n.d,g=n.m,m=n.n,y=t*8;do{if(!u){f=Me(r,i,1);var S=Me(r,i+1,3);if(i+=3,S)if(S==1)u=fo,c=uo,g=9,m=5;else if(S==2){var E=Me(r,i,31)+257,F=Me(r,i+10,15)+4,A=E+Me(r,i+5,31)+1;i+=14;for(var M=new Ce(A),N=new Ce(19),O=0;O<F;++O)N[oo[O]]=Me(r,i+O*3,7);i+=F*3;for(var P=xt(N),B=(1<<P)-1,q=Lt(N,P,1),O=0;O<A;){var R=q[Me(r,i,B)];i+=R&15;var L=R>>>4;if(L<16)M[O++]=L;else{var U=0,$e=0;for(L==16?($e=3+Me(r,i,3),i+=2,U=M[O-1]):L==17?($e=3+Me(r,i,7),i+=3):L==18&&($e=11+Me(r,i,127),i+=7);$e--;)M[O++]=U}}var Ie=M.subarray(0,E),ce=M.subarray(E);g=xt(Ie),m=xt(ce),u=Lt(Ie,g,1),c=Lt(ce,m,1)}else Ne(1);else{var L=co(i)+4,C=r[L-4]|r[L-3]<<8,D=L+C;if(D>t){o&&Ne(0);break}l&&s(a+C),e.set(r.subarray(L,D),a),n.b=a+=C,n.p=i=D*8,n.f=f;continue}if(i>y){o&&Ne(0);break}}l&&s(a+131072);for(var Qe=(1<<g)-1,me=(1<<m)-1,pe=i;;pe=i){var U=u[en(r,i)&Qe],oe=U>>>4;if(i+=U&15,i>y){o&&Ne(0);break}if(U||Ne(2),oe<256)e[a++]=oe;else if(oe==256){pe=i,u=null;break}else{var tt=oe-254;if(oe>264){var O=oe-257,Te=el[O];tt=Me(r,i,(1<<Te)-1)+ll[O],i+=Te}var Pe=c[en(r,i)&me],je=Pe>>>4;Pe||Ne(3),i+=Pe&15;var ce=ao[je];if(je>3){var Te=tl[je];ce+=en(r,i)&(1<<Te)-1,i+=Te}if(i>y){o&&Ne(0);break}l&&s(a+131072);for(var se=a+tt;a<se;a+=4)e[a]=e[a-ce],e[a+1]=e[a+1-ce],e[a+2]=e[a+2-ce],e[a+3]=e[a+3-ce];a=se}}n.l=u,n.p=pe,n.b=a,n.f=f,u&&(f=1,n.m=g,n.d=c,n.n=m)}while(!f);return a==e.length?e:bn(e,0,a)},mo=new Ce(0),qe=function(r,e){return r[e]|r[e+1]<<8},Ee=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},tn=function(r,e){return Ee(r,e)+Ee(r,e+4)*4294967296};function _o(r,e){return po(r,e)}var fn=typeof TextDecoder<"u"&&new TextDecoder,go=0;try{fn.decode(mo,{stream:!0}),go=1}catch{}var ho=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,bn(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function sl(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(fn)return fn.decode(r);var l=ho(r),o=l[0],s=l[1];return s.length&&Ne(8),o}}var bo=function(r,e){return e+30+qe(r,e+26)+qe(r,e+28)},vo=function(r,e,n){var t=qe(r,e+28),l=sl(r.subarray(e+46,e+46+t),!(qe(r,e+8)&2048)),o=e+46+t,s=Ee(r,e+20),f=n&&s==4294967295?wo(r,o):[s,Ee(r,e+24),Ee(r,e+42)],i=f[0],a=f[1],u=f[2];return[qe(r,e+10),i,a,l,o+qe(r,e+30)+qe(r,e+32),u]},wo=function(r,e){for(;qe(r,e)!=1;e+=4+qe(r,e+2));return[tn(r,e+12),tn(r,e+4),tn(r,e+20)]};function ko(r,e){for(var n={},t=r.length-22;Ee(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Ne(13);var l=qe(r,t+8);if(!l)return{};var o=Ee(r,t+16),s=o==4294967295||l==65535;if(s){var f=Ee(r,t-12);s=Ee(r,f)==101075792,s&&(l=Ee(r,f+32),o=Ee(r,f+48))}for(var i=e&&e.filter,a=0;a<l;++a){var u=vo(r,o,s),c=u[0],g=u[1],m=u[2],y=u[3],S=u[4],L=u[5],C=bo(r,L);o=S,(!i||i({name:y,size:g,originalSize:m,compression:c}))&&(c?c==8?n[y]=_o(r.subarray(C,C+g),new Ce(m)):Ne(14,"unknown compression type "+c):n[y]=bn(r,C,C+g))}return n}function yo(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(nn):nn(r)}function nn(r){var e=new Uint8Array(r),n=ko(e);return Promise.resolve(So(n))}function So(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=sl(r[l])}return e}function Ve(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&ft(t)===e)return t;n++}}function Gt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&ft(l)===e&&n.push(l),t++}return n}function Qt(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&ft(l)===e&&n(l,t):n(l,t),t++}}function Co(r,e,n){var t=[];return Qt(r,e,function(l,o){t.push(n(l,o))}),t}var Oo=/.+\:/;function ft(r){return r.tagName.replace(Oo,"")}function il(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+ft(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=il(r.childNodes[t]),t++;return e+="</"+ft(r)+">",e}function To(r){var e=r.documentElement,n=Ve(e,"sheetData"),t=[];return Qt(n,"row",function(l){Qt(l,"c",function(o){t.push(o)})}),t}function Ao(r,e){return Ve(e,"v")}function Lo(r,e){if(e.firstChild&&ft(e.firstChild)==="is"&&e.firstChild.firstChild&&ft(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Io(r){var e=r.documentElement,n=Ve(e,"dimension");if(n)return n.getAttribute("ref")}function Po(r){var e=r.documentElement,n=Ve(e,"cellStyleXfs");return n?Gt(n,"xf"):[]}function Mo(r){var e=r.documentElement,n=Ve(e,"cellXfs");return n?Gt(n,"xf"):[]}function No(r){var e=r.documentElement,n=Ve(e,"numFmts");return n?Gt(n,"numFmt"):[]}function Do(r){var e=r.documentElement;return Co(e,"si",function(n){var t=Ve(n,"t");if(t)return t.textContent;var l="";return Qt(n,"r",function(o){l+=Ve(o,"t").textContent}),l})}function Eo(r){var e=r.documentElement;return Ve(e,"workbookPr")}function Fo(r){var e=r.documentElement;return Gt(e,"Relationship")}function jo(r){var e=r.documentElement,n=Ve(e,"sheets");return Gt(n,"sheet")}function Ro(r,e){var n=e.createDocument(r),t={},l=Eo(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(f){f.getAttribute("name")&&t.sheets.push({id:f.getAttribute("sheetId"),name:f.getAttribute("name"),relationId:f.getAttribute("r:id")})};return jo(n).forEach(o),t}function Bo(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(s){var f=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=rn(f);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=rn(f);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=rn(f);break}};return Fo(n).forEach(l),t}function rn(r){return r[0]==="/"?r.slice(1):"xl/"+r}function Dn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function En(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Dn(Object(n),!0).forEach(function(t){Ho(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Dn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ho(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function zo(r,e){if(!r)return{};var n=e.createDocument(r),t=Po(n).map(ln),l=No(n).map(Go).reduce(function(s,f){return s[f.id]=f,s},[]),o=function(f){return f.hasAttribute("xfId")?En(En({},t[f.xfId]),ln(f,l)):ln(f,l)};return Mo(n).map(o)}function Go(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function ln(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function Uo(r,e){return r?Do(e.createDocument(r)):[]}function al(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function qo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Wo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wo(r,e){if(r){if(typeof r=="string")return Fn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fn(r,e)}}function Fn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Vo(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(Xo.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&Jo(l.numberFormat.template))return!0}}var Xo=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],Yo=/^\[\$-414\]/,Qo=/;@$/;function Jo(r){r=r.toLowerCase(),r=r.replace(Yo,""),r=r.replace(Qo,"");for(var e=r.split(/\W+/),n=qo(e),t;!(t=n()).done;){var l=t.value;if(Ko.indexOf(l)<0)return!1}return!0}var Ko=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function Zo(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,s=n.styles,f=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=on(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=on(r,a);break;case"s":var u=Number(r);if(isNaN(u))throw new Error('Invalid "shared" string index: '.concat(r));if(u>=f.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=f[u],r=on(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=xo(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var g=Number(r);if(isNaN(g))throw new Error('Invalid "numeric" cell value: '.concat(r));r=g,Vo(r,o(),s,a)&&(r=al(r,i));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function xo(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function on(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var es=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function ts(r){var e=function(a,u){return a-u},n=r.map(function(i){return i.row}).sort(e),t=r.map(function(i){return i.column}).sort(e),l=n[0],o=n[n.length-1],s=t[0],f=t[t.length-1];return[{row:l,column:s},{row:o,column:f}]}function ns(r){for(var e=0,n=0;n<r.length;)e*=26,e+=es.indexOf(r[n]),n++;return e}function fl(r){return r=r.split(/(\d+)/),[parseInt(r[1]),ns(r[0].trim())]}function rs(r,e,n,t,l,o,s){var f=fl(r.getAttribute("r")),i=Ao(e,r),a=i&&i.textContent,u;return r.hasAttribute("t")&&(u=r.getAttribute("t")),{row:f[0],column:f[1],value:Zo(a,u,{getInlineStringValue:function(){return Lo(e,r)},getInlineStringXml:function(){return il(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:s})}}function ls(r,e,n,t,l,o){var s=To(r);return s.length===0?[]:s.map(function(f){return rs(f,r,e,n,t,l,o)})}function os(r,e){return fs(r)||as(r,e)||is(r,e)||ss()}function ss(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function is(r,e){if(r){if(typeof r=="string")return jn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jn(r,e)}}function jn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function as(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function fs(r){if(Array.isArray(r))return r}function us(r){var e=Io(r);if(e)return e=e.split(":").map(fl).map(function(n){var t=os(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function cs(r,e,n,t,l,o){var s=e.createDocument(r),f=ls(s,e,n,t,l,o),i=us(s)||ts(f);return{cells:f,dimensions:i}}function $s(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ps(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ps(r,e){if(r){if(typeof r=="string")return Rn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rn(r,e)}}function Rn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ms(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=r.length-1;s>=0;){for(var f=!0,i=$s(r[s]),a;!(a=i()).done;){var u=a.value;if(l(u)!==null){f=!1;break}}if(f)r.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return r}function _s(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=gs(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gs(r,e){if(r){if(typeof r=="string")return Bn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bn(r,e)}}function Bn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ds(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var s=!0,f=_s(r),i;!(i=f()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var u=0;u<r.length;)r[u].splice(o,1),u++;else if(l)break;o--}return r}function hs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ul(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bs(r,e){return ks(r)||ws(r,e)||ul(r,e)||vs()}function vs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ul(r,e){if(r){if(typeof r=="string")return Hn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hn(r,e)}}function Hn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ws(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function ks(r){if(Array.isArray(r))return r}function ys(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=bs(n,2);l[0];for(var o=l[1],s=o.column,f=o.row,i=new Array(f),a=0;a<f;){i[a]=new Array(s);for(var u=0;u<s;)i[a][u]=null,u++;a++}for(var c=hs(t),g;!(g=c()).done;){var m=g.value,y=m.row-1,S=m.column-1;S<s&&y<f&&(i[y][S]=m.value)}var L=e.rowMap;if(L)for(var C=0;C<i.length;)L[C]=C,C++;return i=ms(ds(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:L}),e.transformData&&(i=e.transformData(i)),i}function Ss(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Cs(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cs(r,e){if(r){if(typeof r=="string")return zn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zn(r,e)}}function zn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Gn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Os(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gn(Object(n),!0).forEach(function(t){Ts(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Gn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ts(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function As(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Os({sheet:1},n));var t=function(g){if(!r[g])throw new Error('"'.concat(g,'" file not found inside the *.xlsx file zip archive'));return r[g]},l=Bo(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?Uo(t(l.sharedStrings),e):[],s=l.styles?zo(t(l.styles),e):{},f=Ro(t("xl/workbook.xml"),e);if(n.getSheets)return f.sheets.map(function(c){var g=c.name;return{name:g}});var i=Ls(n.sheet,f.sheets);if(!i||!l.sheets[i])throw Is(n.sheet,f.sheets);var a=cs(t(l.sheets[i]),e,o,s,f,n),u=ys(a,n);return n.properties?{data:u,properties:f}:u}function Ls(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=Ss(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function Is(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function un(r){"@babel/helpers - typeof";return un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},un(r)}function Un(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function Ps(r,e,n){return e&&Un(r.prototype,e),n&&Un(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function Ms(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Ns(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Dt(r,e)}function Ds(r){var e=cl();return function(){var t=Et(r),l;if(e){var o=Et(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return Es(this,l)}}function Es(r,e){if(e&&(un(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fs(r)}function Fs(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function cn(r){var e=typeof Map=="function"?new Map:void 0;return cn=function(t){if(t===null||!js(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Wt(t,arguments,Et(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Dt(l,t)},cn(r)}function Wt(r,e,n){return cl()?Wt=Reflect.construct:Wt=function(l,o,s){var f=[null];f.push.apply(f,o);var i=Function.bind.apply(l,f),a=new i;return s&&Dt(a,s.prototype),a},Wt.apply(null,arguments)}function cl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function js(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Dt(r,e){return Dt=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},Dt(r,e)}function Et(r){return Et=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Et(r)}var Oe=function(r){Ns(n,r);var e=Ds(n);function n(t){var l;return Ms(this,n),l=e.call(this,"invalid"),l.reason=t,l}return Ps(n)}(cn(Error));function Rs(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new Oe("not_a_number")}if(typeof r!="number")throw new Oe("not_a_number");if(isNaN(r))throw new Oe("invalid_number");if(!isFinite(r))throw new Oe("out_of_bounds");return r}function Bs(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new Oe("invalid_number");if(!isFinite(r))throw new Oe("out_of_bounds");return String(r)}throw new Oe("not_a_string")}function Hs(r){if(typeof r=="boolean")return r;throw new Oe("not_a_boolean")}function zs(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new Oe("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new Oe("invalid_number");if(!isFinite(r))throw new Oe("out_of_bounds");var t=al(r,n);if(isNaN(t.valueOf()))throw new Oe("out_of_bounds");return t}throw new Oe("not_a_date")}function Gs(r,e){return Ws(r)||qs(r,e)||$l(r,e)||Us()}function Us(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qs(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function Ws(r){if(Array.isArray(r))return r}function $n(r){"@babel/helpers - typeof";return $n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$n(r)}function Vs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=$l(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $l(r,e){if(r){if(typeof r=="string")return qn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qn(r,e)}}function qn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Wn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Vn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wn(Object(n),!0).forEach(function(t){Xs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Xs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Xn={isColumnOriented:!1};function Ys(r,e,n){n?n=Vn(Vn({},Xn),n):n=Xn;var t=n,l=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;Zs(e),l&&(r=Ks(r));for(var f=r[0],i=[],a=[],u=1;u<r.length;u++){var c=pl(e,r[u],u,f,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var g=Vs(a),m;!(m=g()).done;){var y=m.value;y.row=o[y.row-1]+1}return{rows:i,errors:a}}function pl(r,e,n,t,l,o){for(var s={},f=!0,i=function(){var g=u[a],m=r[g],y=$n(m.type)==="object"&&!Array.isArray(m.type),S=e[t.indexOf(g)];S===void 0&&(S=null);var L=void 0,C=void 0,D=void 0;if(y)L=pl(m.type,e,n,t,l,o);else if(S===null)L=null;else if(Array.isArray(m.type)){var E=!1,F=Js(S).map(function(M){var N=Yn(M,m,o);return N.error&&(L=M,C=N.error,D=N.reason),N.value!==null&&(E=!0),N.value});C||(L=E?F:null)}else{var A=Yn(S,m,o);C=A.error,D=A.reason,L=C?S:A.value}!C&&L===null&&m.required&&(C="required"),C?(C={error:C,row:n+1,column:g,value:L},D&&(C.reason=D),m.type&&(C.type=m.type),l.push(C)):(f&&L!==null&&(f=!1),(L!==null||o.includeNullValues)&&(s[m.prop]=L))},a=0,u=Object.keys(r);a<u.length;a++)i();return f?null:s}function Yn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=ct(r,e.parse):e.type?t=Qs(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function ct(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function Qs(r,e,n){switch(e){case String:return ct(r,Bs);case Number:return ct(r,Rs);case Date:return ct(r,function(t){return zs(t,{properties:n.properties})});case Boolean:return ct(r,Hs);default:if(typeof e=="function")return ct(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function ml(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var s=ml(r,'"',n+t+1);l+=s[0],t+=1+s[1]+1}else l+=o,t++}return[l,t]}function Js(r){for(var e=[],n=0;n<r.length;){var t=ml(r,",",n),l=Gs(t,2),o=l[0],s=l[1];n+=s+1,e.push(o.trim())}return e}var Ks=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function Zs(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function pn(r){"@babel/helpers - typeof";return pn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pn(r)}function _l(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],s=void 0;pn(o)==="object"&&(o=Object.keys(r[l])[0],s=_l(r[l][o])),e[l]={prop:o},s&&(e[l].type=s)}return e}var xs=["schema","map"];function Qn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function qt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Qn(Object(n),!0).forEach(function(t){ei(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Qn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function ei(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ti(r,e){if(r==null)return{};var n=ni(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function ni(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function ri(r,e,n){var t=n.schema,l=n.map,o=ti(n,xs);!t&&l&&(t=_l(l));var s=As(r,e,qt(qt({},o),{},{properties:t||o.properties}));return t?Ys(s.data,t,qt(qt({},o),{},{properties:s.properties})):s}function li(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return yo(r).then(function(n){return ri(n,lo,e)})}function oi(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,l);r.features=r.features.filter(t=>si(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.browse&&(l.browse.num_features=l.browse.num_features!==void 0?l.browse.num_features+1:1,t.properties.funding_programme=l.browse.funding_programme,t.properties.current_milestone=l.browse.current_milestone,t.id=n++)}return e}function si(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function ii(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await li(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=vl(l.lat_lon.split(",").map(parseFloat).reverse()),s=l;s.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}function gl(r){return Xt(["get","intervention_type"],{area:Ze.area,route:Ze.route,crossing:Ze.crossing,other:Ze.other},"white")}function Jn(r){return[["Areas",Ze.area],["Routes",Ze.route],["Crossings",Ze.crossing],["Other",Ze.other]]}const te={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"]},Fe=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20],Ct=Kt({type:"FeatureCollection",features:[],schemes:{}}),Ft=Kt(new Map),Kn=Kt(!0),Vt=Kt("");function ai(r){let e,n;return e=new Zr({props:{rows:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fi(r){let e,n,t,l,o;function s(i){r[3](i)}let f={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(f.value=r[0]),e=new Nt({props:f}),V.push(()=>Q(e,"value",s)),e.$on("change",r[2]),l=new De({props:{label:"Legend",$$slots:{default:[ai]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=I(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};!n&&a&1&&(n=!0,u.value=i[0],J(()=>n=!1)),e.$set(u);const c={};a&258&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}function Zn(r,e){let n=[],t={},l=0;for(let o of r){let s=e[l++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function ui(r,e,n){let t,l;ge(r,Ft,c=>n(4,t=c)),ge(r,gn,c=>n(5,l=c));let o="interventionType",s=Jn();function f(){let c;o=="interventionType"?(c=gl(),n(1,s=Jn())):o=="fundingProgramme"?c=i():o=="currentMilestone"&&(c=a()),l.setPaintProperty("interventions-points","circle-color",c),l.setPaintProperty("interventions-lines","line-color",c),l.setPaintProperty("interventions-polygons","fill-color",c),l.setPaintProperty("interventions-polygons-outlines","line-color",c)}function i(){var L;let c=new Set;for(let C of t.values())(L=C.browse)!=null&&L.funding_programme&&c.add(C.browse.funding_programme);let g=Array.from(c);g.sort();let[m,y]=Zn(g,te.funding_programmes),S=Xt(["get","funding_programme"],m,"grey");return n(1,s=y),S}function a(){let c=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[g,m]=Zn(c,te.current_milestone),y=Xt(["get","current_milestone"],g,"grey");return n(1,s=m),y}function u(c){o=c,n(0,o)}return[o,s,f,u]}class ci extends X{constructor(e){super(),Y(this,e,ui,fi,G,{})}}function $i(r){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pi(r){let e,n,t,l,o,s;return t=new sn({props:{$$slots:{default:[$i]},$$scope:{ctx:r}}}),t.$on("click",r[11]),{c(){e=T("input"),n=I(),h(t.$$.fragment),z(e,"type","text"),z(e,"class","govuk-input govuk-input--width-10"),z(e,"id","filterText")},m(f,i){$(f,e,i),lt(e,r[4]),$(f,n,i),b(t,f,i),l=!0,o||(s=at(e,"input",r[10]),o=!0)},p(f,i){i&16&&e.value!==f[4]&&lt(e,f[4]);const a={};i&65536&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){l||(_(t.$$.fragment,f),l=!0)},o(f){d(t.$$.fragment,f),l=!1},d(f){f&&(p(e),p(n)),v(t,f),o=!1,s()}}}function mi(r){let e,n,t,l,o,s,f,i,a,u;function c(S){r[8](S)}let g={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[2]!==void 0&&(g.value=r[2]),e=new Nt({props:g}),V.push(()=>Q(e,"value",c));function m(S){r[9](S)}let y={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[3]!==void 0&&(y.value=r[3]),l=new Nt({props:y}),V.push(()=>Q(l,"value",m)),f=new Yr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[pi]},$$scope:{ctx:r}}}),a=new ci({}),{c(){h(e.$$.fragment),t=I(),h(l.$$.fragment),s=I(),h(f.$$.fragment),i=I(),h(a.$$.fragment)},m(S,L){b(e,S,L),$(S,t,L),b(l,S,L),$(S,s,L),b(f,S,L),$(S,i,L),b(a,S,L),u=!0},p(S,L){const C={};L&32&&(C.choices=S[5]),!n&&L&4&&(n=!0,C.value=S[2],J(()=>n=!1)),e.$set(C);const D={};L&64&&(D.choices=S[6]),!o&&L&8&&(o=!0,D.value=S[3],J(()=>o=!1)),l.$set(D);const E={};L&65552&&(E.$$scope={dirty:L,ctx:S}),f.$set(E)},i(S){u||(_(e.$$.fragment,S),_(l.$$.fragment,S),_(f.$$.fragment,S),_(a.$$.fragment,S),u=!0)},o(S){d(e.$$.fragment,S),d(l.$$.fragment,S),d(f.$$.fragment,S),d(a.$$.fragment,S),u=!1},d(S){S&&(p(t),p(s),p(i)),v(e,S),v(l,S),v(f,S),v(a,S)}}}function _i(r){let e,n=r[0].size.toLocaleString()+"",t,l,o=r[7].route.toLocaleString()+"",s,f,i=r[7].area.toLocaleString()+"",a,u,c=r[7].crossing.toLocaleString()+"",g,m,y=r[7].other.toLocaleString()+"",S,L,C=xn(r[7].totalLength).toFixed(1)+"",D,E;return{c(){e=k("Showing "),t=k(n),l=k(" schemes ("),s=k(o),f=k(`
    routes, `),a=k(i),u=k(` areas,
    `),g=k(c),m=k(" crossings, "),S=k(y),L=k(`
    other, with total LineString length of `),D=k(C),E=k(" miles)")},m(F,A){$(F,e,A),$(F,t,A),$(F,l,A),$(F,s,A),$(F,f,A),$(F,a,A),$(F,u,A),$(F,g,A),$(F,m,A),$(F,S,A),$(F,L,A),$(F,D,A),$(F,E,A)},p(F,A){A&1&&n!==(n=F[0].size.toLocaleString()+"")&&j(t,n),A&128&&o!==(o=F[7].route.toLocaleString()+"")&&j(s,o),A&128&&i!==(i=F[7].area.toLocaleString()+"")&&j(a,i),A&128&&c!==(c=F[7].crossing.toLocaleString()+"")&&j(g,c),A&128&&y!==(y=F[7].other.toLocaleString()+"")&&j(S,y),A&128&&C!==(C=xn(F[7].totalLength).toFixed(1)+"")&&j(D,C)},d(F){F&&(p(e),p(t),p(l),p(s),p(f),p(a),p(u),p(g),p(m),p(S),p(L),p(D),p(E))}}}function gi(r){let e,n,t;function l(s){r[12](s)}let o={id:"show-schemes",$$slots:{default:[_i]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new re({props:o}),V.push(()=>Q(e,"checked",l)),{c(){h(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f&65665&&(i.$$scope={dirty:f,ctx:s}),!n&&f&2&&(n=!0,i.checked=s[1],J(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function di(r){let e,n,t,l;return e=new De({props:{label:"Filters",$$slots:{default:[mi]},$$scope:{ctx:r}}}),t=new et({props:{small:!0,$$slots:{default:[gi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),l=!0},p(o,[s]){const f={};s&65660&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&65667&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function xn(r){return r*621371e-9}function hi(r,e,n){let t,l,o;ge(r,Vt,E=>n(4,t=E)),ge(r,Ct,E=>n(13,l=E)),ge(r,Ft,E=>n(14,o=E));let{schemesToBeShown:s=new Set}=e,{show:f=!0}=e,i=[],a="",u=[],c="",g={area:0,route:0,crossing:0,other:0,totalLength:0};dn(()=>{var A,M;let E=new Set,F=new Set;for(let N of o.values())(A=N.browse)!=null&&A.authority_or_region&&E.add(N.browse.authority_or_region),(M=N.browse)!=null&&M.funding_programme&&F.add(N.browse.funding_programme);n(5,i=Array.from(E.entries())),i.sort(),n(6,u=Array.from(F.entries())),u.sort()});function m(E,F,A){let M=E.toLowerCase(),N=P=>{var B,q,R,U;if(M&&!((B=P.properties.name)!=null&&B.toLowerCase().includes(M))&&!((q=P.properties.description)!=null&&q.toLowerCase().includes(M)))return!1;if(F||A){let $e=o.get(P.properties.scheme_reference);if(F&&((R=$e.browse)==null?void 0:R.authority_or_region)!=F||A&&((U=$e.browse)==null?void 0:U.funding_programme)!=A)return!1}return!0};n(0,s=new Set(l.features.filter(N).map(P=>P.properties.scheme_reference))),n(7,g={area:0,route:0,crossing:0,other:0,totalLength:0});let O=P=>{var B,q;return!(!s.has(P.properties.scheme_reference)||M&&!((B=P.properties.name)!=null&&B.toLowerCase().includes(M))&&!((q=P.properties.description)!=null&&q.toLowerCase().includes(M)))};for(let P of l.features)O(P)?(delete P.properties.hide_while_editing,n(7,g[P.properties.intervention_type]++,g),P.geometry.type=="LineString"&&P.properties.length_meters&&n(7,g.totalLength+=P.properties.length_meters,g)):P.properties.hide_while_editing=!0;Ct.set(l),n(7,g)}function y(E){a=E,n(2,a)}function S(E){c=E,n(3,c)}function L(){t=this.value,Vt.set(t)}const C=()=>Pt(Vt,t="",t);function D(E){f=E,n(1,f)}return r.$$set=E=>{"schemesToBeShown"in E&&n(0,s=E.schemesToBeShown),"show"in E&&n(1,f=E.show)},r.$$.update=()=>{r.$$.dirty&28&&m(t,a,c)},[s,f,a,c,t,i,u,g,y,S,L,C,D]}class bi extends X{constructor(e){super(),Y(this,e,hi,di,G,{schemesToBeShown:0,show:1})}}function vi(r){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wi(r){let e,n,t,l,o;return t=new W({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[vi]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("License: "),h(t.$$.fragment),l=k(`. Contains OS data  Crown copyright and database right
  2023.`)},m(s,f){$(s,e,f),w(e,n),b(t,e,null),w(e,l),o=!0},p(s,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){o||(_(t.$$.fragment,s),o=!0)},o(s){d(t.$$.fragment,s),o=!1},d(s){s&&p(e),v(t)}}}class Le extends X{constructor(e){super(),Y(this,e,null,wi,G,{})}}function er(r,e,n){const t=r.slice();return t[2]=e[n],t}function tr(r,e,n){const t=r.slice();return t[5]=e[n],t}function nr(r){let e,n;return{c(){e=T("span"),n=k(`
    `),we(e,"background",r[5]),we(e,"width","100%"),we(e,"border","1px solid black")},m(t,l){$(t,e,l),w(e,n)},p(t,l){l&1&&we(e,"background",t[5])},d(t){t&&p(e)}}}function rr(r){let e,n=r[2]+"",t;return{c(){e=T("span"),t=k(n)},m(l,o){$(l,e,o),w(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&j(t,n)},d(l){l&&p(e)}}}function ki(r){let e,n,t,l=We(r[0]),o=[];for(let i=0;i<l.length;i+=1)o[i]=nr(tr(r,l,i));let s=We(r[1]),f=[];for(let i=0;i<s.length;i+=1)f[i]=rr(er(r,s,i));return{c(){e=T("div");for(let i=0;i<o.length;i+=1)o[i].c();n=I(),t=T("div");for(let i=0;i<f.length;i+=1)f[i].c();we(e,"display","flex"),we(t,"display","flex"),we(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);$(i,n,a),$(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){l=We(i[0]);let u;for(u=0;u<l.length;u+=1){const c=tr(i,l,u);o[u]?o[u].p(c,a):(o[u]=nr(c),o[u].c(),o[u].m(e,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=l.length}if(a&2){s=We(i[1]);let u;for(u=0;u<s.length;u+=1){const c=er(i,s,u);f[u]?f[u].p(c,a):(f[u]=rr(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=s.length}},i:ee,o:ee,d(i){i&&(p(e),p(n),p(t)),It(o,i),It(f,i)}}}function yi(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class Ye extends X{constructor(e){super(),Y(this,e,yi,ki,G,{colorScale:0,limits:1})}}function lr(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function Si(r){let e;return{c(){e=k("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ci(r){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Oi(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ti(r){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ai(r){let e,n,t,l,o,s,f,i,a,u,c,g;return t=new W({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ci]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Oi]},$$scope:{ctx:r}}}),u=new W({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ti]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),l=k(". Output area boundaries from "),h(o.$$.fragment),s=k("."),f=I(),i=T("p"),a=k("License: "),h(u.$$.fragment),c=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(m,y){$(m,e,y),w(e,n),b(t,e,null),w(e,l),b(o,e,null),w(e,s),$(m,f,y),$(m,i,y),w(i,a),b(u,i,null),w(i,c),g=!0},p(m,y){const S={};y&65536&&(S.$$scope={dirty:y,ctx:m}),t.$set(S);const L={};y&65536&&(L.$$scope={dirty:y,ctx:m}),o.$set(L);const C={};y&65536&&(C.$$scope={dirty:y,ctx:m}),u.$set(C)},i(m){g||(_(t.$$.fragment,m),_(o.$$.fragment,m),_(u.$$.fragment,m),g=!0)},o(m){d(t.$$.fragment,m),d(o.$$.fragment,m),d(u.$$.fragment,m),g=!1},d(m){m&&(p(e),p(f),p(i)),v(t),v(o),v(u)}}}function Li(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Ai]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function or(r){let e,n;return e=new Ye({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ii(r){let e;return{c(){e=k("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pi(r){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mi(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ni(r){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Di(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y;return o=new W({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Pi]},$$scope:{ctx:r}}}),f=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Mi]},$$scope:{ctx:r}}}),g=new W({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ni]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=I(),t=T("p"),l=k("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),s=k(". Output area boundaries from "),h(f.$$.fragment),i=k("."),a=I(),u=T("p"),c=k("License: "),h(g.$$.fragment),m=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(S,L){$(S,e,L),$(S,n,L),$(S,t,L),w(t,l),b(o,t,null),w(t,s),b(f,t,null),w(t,i),$(S,a,L),$(S,u,L),w(u,c),b(g,u,null),w(u,m),y=!0},p(S,L){const C={};L&65536&&(C.$$scope={dirty:L,ctx:S}),o.$set(C);const D={};L&65536&&(D.$$scope={dirty:L,ctx:S}),f.$set(D);const E={};L&65536&&(E.$$scope={dirty:L,ctx:S}),g.$set(E)},i(S){y||(_(o.$$.fragment,S),_(f.$$.fragment,S),_(g.$$.fragment,S),y=!0)},o(S){d(o.$$.fragment,S),d(f.$$.fragment,S),d(g.$$.fragment,S),y=!1},d(S){S&&(p(e),p(n),p(t),p(a),p(u)),v(o),v(f),v(g)}}}function Ei(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Di]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function sr(r){let e,n;return e=new Ye({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Fi(r){let e;return{c(){e=k("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ji(r){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ri(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bi(r){let e,n,t,l,o,s,f,i,a;return t=new W({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ji]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ri]},$$scope:{ctx:r}}}),i=new Le({}),{c(){e=T("p"),n=k("Population density data is from the 2021 census, via "),h(t.$$.fragment),l=k(". Output area boundaries from "),h(o.$$.fragment),s=k("."),f=I(),h(i.$$.fragment)},m(u,c){$(u,e,c),w(e,n),b(t,e,null),w(e,l),b(o,e,null),w(e,s),$(u,f,c),b(i,u,c),a=!0},p(u,c){const g={};c&65536&&(g.$$scope={dirty:c,ctx:u}),t.$set(g);const m={};c&65536&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){a||(_(t.$$.fragment,u),_(o.$$.fragment,u),_(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),v(t),v(o),v(i,u)}}}function Hi(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Bi]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ir(r){let e,n,t,l;return t=new Ye({props:{colorScale:r[4],limits:r[6]().map(Yi)}}),{c(){e=T("p"),e.textContent="(people per square kilometres)",n=I(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),l=!0},p:ee,i(o){l||(_(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function zi(r){let e,n,t,l=r[15].toLocaleString()+"",o,s,f=r[14]+"",i;return{c(){e=T("p"),n=k("There are "),t=T("b"),o=k(l),s=k(`
          people per square kilometre in `),i=k(f)},m(a,u){$(a,e,u),w(e,n),w(e,t),w(t,o),w(e,s),w(e,i)},p(a,u){u&8200&&l!==(l=a[15].toLocaleString()+"")&&j(o,l),u&8192&&f!==(f=a[14]+"")&&j(i,f)},d(a){a&&p(e)}}}function Gi(r){let e,n,t=r[14]+"",l,o,s,f=r[15]+"",i,a;return{c(){e=T("p"),n=k("Households in "),l=k(t),o=k(` have an average of
          `),s=T("b"),i=k(f),a=k(`
          cars`)},m(u,c){$(u,e,c),w(e,n),w(e,l),w(e,o),w(e,s),w(s,i),w(e,a)},p(u,c){c&8192&&t!==(t=u[14]+"")&&j(l,t),c&8200&&f!==(f=u[15]+"")&&j(i,f)},d(u){u&&p(e)}}}function Ui(r){let e,n,t=r[15]+"",l,o,s,f=r[14]+"",i,a;return{c(){e=T("p"),n=T("b"),l=k(t),o=k("%"),s=k(`
          of households in `),i=k(f),a=k(" have 1 or more cars")},m(u,c){$(u,e,c),w(e,n),w(n,l),w(n,o),w(e,s),w(e,i),w(e,a)},p(u,c){c&8200&&t!==(t=u[15]+"")&&j(l,t),c&8192&&f!==(f=u[14]+"")&&j(i,f)},d(u){u&&p(e)}}}function qi(r){lr(r);let e;function n(o,s){return o[3]=="percent_households_with_car"?Ui:o[3]=="average_cars_per_household"?Gi:zi}let t=n(r),l=t(r);return{c(){l.c(),e=Ae()},m(o,s){l.m(o,s),$(o,e,s)},p(o,s){lr(o),t===(t=n(o))&&l?l.p(o,s):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function Wi(r){let e,n;return e=new le({props:{$$slots:{default:[qi,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Vi(r){let e,n,t,l;const o=[H(Ke),{sourceLayer:Ke},{paint:{"fill-color":be(["get",r[3]],r[6](),r[4]),"fill-opacity":K(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Wi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=Z(s,o[a]);e=new Xe({props:s}),e.$on("click",r[5]);const f=[H(`${Ke}-outline`),{sourceLayer:Ke},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=Z(i,f[a]);return t=new ve({props:i}),{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&88?x(o,[u&0&&ne(H(Ke)),u&0&&{sourceLayer:Ke},u&88&&{paint:{"fill-color":be(["get",a[3]],a[6](),a[4]),"fill-opacity":K(.5,.7)}},u&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};u&65544&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&8?x(f,[u&0&&ne(H(`${Ke}-outline`)),u&0&&{sourceLayer:Ke},f[2],u&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Xi(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y;function S(O){r[7](O)}let L={id:"percent_households_with_car",$$slots:{right:[Li],default:[Si]},$$scope:{ctx:r}};r[0]!==void 0&&(L.checked=r[0]),e=new re({props:L}),V.push(()=>Q(e,"checked",S)),e.$on("change",r[8]);let C=r[3]=="percent_households_with_car"&&or(r);function D(O){r[9](O)}let E={id:"average_cars_per_household",$$slots:{right:[Ei],default:[Ii]},$$scope:{ctx:r}};r[1]!==void 0&&(E.checked=r[1]),o=new re({props:E}),V.push(()=>Q(o,"checked",D)),o.$on("change",r[10]);let F=r[3]=="average_cars_per_household"&&sr(r);function A(O){r[11](O)}let M={id:"population_density",$$slots:{right:[Hi],default:[Fi]},$$scope:{ctx:r}};r[2]!==void 0&&(M.checked=r[2]),a=new re({props:M}),V.push(()=>Q(a,"checked",A)),a.$on("change",r[12]);let N=r[3]=="population_density"&&ir(r);return m=new de({props:{url:`pmtiles://${_e()}/v1/${Ke}.pmtiles`,$$slots:{default:[Vi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=I(),C&&C.c(),l=I(),h(o.$$.fragment),f=I(),F&&F.c(),i=I(),h(a.$$.fragment),c=I(),N&&N.c(),g=I(),h(m.$$.fragment)},m(O,P){b(e,O,P),$(O,t,P),C&&C.m(O,P),$(O,l,P),b(o,O,P),$(O,f,P),F&&F.m(O,P),$(O,i,P),b(a,O,P),$(O,c,P),N&&N.m(O,P),$(O,g,P),b(m,O,P),y=!0},p(O,[P]){const B={};P&65536&&(B.$$scope={dirty:P,ctx:O}),!n&&P&1&&(n=!0,B.checked=O[0],J(()=>n=!1)),e.$set(B),O[3]=="percent_households_with_car"?C?(C.p(O,P),P&8&&_(C,1)):(C=or(O),C.c(),_(C,1),C.m(l.parentNode,l)):C&&(fe(),d(C,1,1,()=>{C=null}),ue());const q={};P&65536&&(q.$$scope={dirty:P,ctx:O}),!s&&P&2&&(s=!0,q.checked=O[1],J(()=>s=!1)),o.$set(q),O[3]=="average_cars_per_household"?F?(F.p(O,P),P&8&&_(F,1)):(F=sr(O),F.c(),_(F,1),F.m(i.parentNode,i)):F&&(fe(),d(F,1,1,()=>{F=null}),ue());const R={};P&65536&&(R.$$scope={dirty:P,ctx:O}),!u&&P&4&&(u=!0,R.checked=O[2],J(()=>u=!1)),a.$set(R),O[3]=="population_density"?N?(N.p(O,P),P&8&&_(N,1)):(N=ir(O),N.c(),_(N,1),N.m(g.parentNode,g)):N&&(fe(),d(N,1,1,()=>{N=null}),ue());const U={};P&65544&&(U.$$scope={dirty:P,ctx:O}),m.$set(U)},i(O){y||(_(e.$$.fragment,O),_(C),_(o.$$.fragment,O),_(F),_(a.$$.fragment,O),_(N),_(m.$$.fragment,O),y=!0)},o(O){d(e.$$.fragment,O),d(C),d(o.$$.fragment,O),d(F),d(a.$$.fragment,O),d(N),d(m.$$.fragment,O),y=!1},d(O){O&&(p(t),p(l),p(f),p(i),p(c),p(g)),v(e,O),C&&C.d(O),v(o,O),F&&F.d(O),v(a,O),N&&N.d(O),v(m,O)}}}let Ke="census_output_areas";const Yi=r=>r.toLocaleString();function Qi(r,e,n){let t=te.sequential_low_to_high,l=!1,o=!1,s=!1,f="";function i(L){let C=L.detail.features[0].properties.OA21CD;f=="percent_households_with_car"||f=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${C}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${C}`,"_blank")}function a(){return f=="percent_households_with_car"?[0,20,40,60,80,100]:f=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function u(L){l=L,n(0,l)}const c=()=>{n(1,o=!1),n(2,s=!1)};function g(L){o=L,n(1,o)}const m=()=>{n(0,l=!1),n(2,s=!1)};function y(L){s=L,n(2,s)}const S=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,f="percent_households_with_car"):o?n(3,f="average_cars_per_household"):s?n(3,f="population_density"):n(3,f=""))},[l,o,s,f,t,i,a,u,c,g,m,y,S]}class Ji extends X{constructor(e){super(),Y(this,e,Qi,Xi,G,{})}}function Ki(r){let e,n,t;return e=new ye({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Combined authorities`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Zi(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xi(r){let e,n,t,l,o,s,f;return t=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Zi]},$$scope:{ctx:r}}}),s=new Le({}),{c(){e=T("p"),n=k("Data from "),h(t.$$.fragment),l=k(", as of December 2022."),o=I(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,l),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function ea(r){let e,n,t;return n=new ae({props:{$$slots:{default:[xi]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ta(r){let e,n=r[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&j(t,n)},d(l){l&&p(e)}}}function na(r){let e,n;return e=new le({props:{$$slots:{default:[ta,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ra(r){let e,n,t,l;const o=[H($t),{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[na]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=Z(s,o[a]);e=new Xe({props:s}),e.$on("click",oa);const f=[H(`${$t}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=Z(i,f[a]);return t=new ve({props:i}),{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&3?x(o,[u&0&&ne(H($t)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?x(f,[u&0&&ne(H(`${$t}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function la(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:$t,$$slots:{right:[ea],default:[Ki]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new re({props:f}),V.push(()=>Q(e,"checked",s)),l=new Ot({props:{data:`${_e()}/v1/${$t}.geojson`,$$slots:{default:[ra]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=I(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],J(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let $t="combined_authorities";function oa(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function sa(r,e,n){let t=te.combined_authorities,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class ia extends X{constructor(e){super(),Y(this,e,sa,la,G,{})}}function aa(r){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fa(r){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ua(r){let e;return{c(){e=k(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ca(r){let e,n,t,l,o,s,f,i,a;return t=new W({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[fa]},$$scope:{ctx:r}}}),o=new W({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[ua]},$$scope:{ctx:r}}}),i=new Le({}),{c(){e=T("p"),n=k("The 2019 English IMD scores come from "),h(t.$$.fragment),l=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),s=k("."),f=I(),h(i.$$.fragment)},m(u,c){$(u,e,c),w(e,n),b(t,e,null),w(e,l),b(o,e,null),w(e,s),$(u,f,c),b(i,u,c),a=!0},p(u,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),t.$set(g);const m={};c&32&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){a||(_(t.$$.fragment,u),_(o.$$.fragment,u),_(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),v(t),v(o),v(i,u)}}}function $a(r){let e,n,t;return n=new ae({props:{$$slots:{default:[ca]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ar(r){let e,n;return e=new Ye({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pa(r){let e,n=r[4].LSOA11CD+"",t,l,o,s=r[4].score+"",f,i,a,u,c,g=r[4].rank.toLocaleString()+"",m,y;return{c(){e=T("p"),t=k(n),l=k(` has an IMD score of
        `),o=T("b"),f=k(s),i=I(),a=T("p"),u=k("Rank: "),c=T("b"),m=k(g),y=k(`
        / 32,844 LSOAs`)},m(S,L){$(S,e,L),w(e,t),w(e,l),w(e,o),w(o,f),$(S,i,L),$(S,a,L),w(a,u),w(a,c),w(c,m),w(a,y)},p(S,L){L&16&&n!==(n=S[4].LSOA11CD+"")&&j(t,n),L&16&&s!==(s=S[4].score+"")&&j(f,s),L&16&&g!==(g=S[4].rank.toLocaleString()+"")&&j(m,g)},d(S){S&&(p(e),p(i),p(a))}}}function ma(r){let e,n;return e=new le({props:{$$slots:{default:[pa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _a(r){let e,n,t,l;const o=[H(Be),{sourceLayer:Be},{paint:{"fill-color":be(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":K(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[ma]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=Z(s,o[a]);e=new Xe({props:s});const f=[H(`${Be}-outline`),{sourceLayer:Be},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=Z(i,f[a]);return t=new ve({props:i}),{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&7?x(o,[u&0&&ne(H(Be)),u&0&&{sourceLayer:Be},u&6&&{paint:{"fill-color":be(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":K(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&1?x(f,[u&0&&ne(H(`${Be}-outline`)),u&0&&{sourceLayer:Be},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function ga(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:Be,$$slots:{right:[$a],default:[aa]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new re({props:i}),V.push(()=>Q(e,"checked",f));let a=r[0]&&ar(r);return o=new de({props:{url:`pmtiles://${_e()}/v1/${Be}.pmtiles`,$$slots:{default:[_a]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=I(),a&&a.c(),l=I(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),b(o,u,c),s=!0},p(u,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],J(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=ar(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(fe(),d(a,1,1,()=>{a=null}),ue());const m={};c&33&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),v(e,u),a&&a.d(u),v(o,u)}}}let Be="imd";function da(r,e,n){let t=te.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function s(f){o=f,n(0,o)}return[o,t,l,s]}class ha extends X{constructor(e){super(),Y(this,e,da,ga,G,{})}}function ba(r){let e,n,t;return e=new ye({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function va(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wa(r){let e,n,t,l,o,s,f;return t=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[va]},$$scope:{ctx:r}}}),s=new Le({}),{c(){e=T("p"),n=k("Data from "),h(t.$$.fragment),l=k(", as of May 2023."),o=I(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,l),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function ka(r){let e,n,t;return n=new ae({props:{$$slots:{default:[wa]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ya(r){let e,n=r[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&j(t,n)},d(l){l&&p(e)}}}function Sa(r){let e,n;return e=new le({props:{$$slots:{default:[ya,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ca(r){let e,n,t,l;const o=[H(pt),{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Sa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=Z(s,o[a]);e=new Xe({props:s}),e.$on("click",Ta);const f=[H(`${pt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=Z(i,f[a]);return t=new ve({props:i}),{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&3?x(o,[u&0&&ne(H(pt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?x(f,[u&0&&ne(H(`${pt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Oa(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:pt,$$slots:{right:[ka],default:[ba]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new re({props:f}),V.push(()=>Q(e,"checked",s)),l=new Ot({props:{data:`${_e()}/v1/${pt}.geojson`,$$slots:{default:[Ca]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=I(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],J(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let pt="local_authority_districts";function Ta(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function Aa(r,e,n){let t=te.local_authority_districts,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class La extends X{constructor(e){super(),Y(this,e,Aa,Oa,G,{})}}function Ia(r){let e,n,t;return e=new ye({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Pa(r){let e;return{c(){e=k(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ma(r){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Na(r){let e;return{c(){e=k(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Da(r){let e;return{c(){e=k("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ea(r){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fa(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y,S,L,C,D,E,F,A,M;return t=new W({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Pa]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Ma]},$$scope:{ctx:r}}}),f=new W({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Na]},$$scope:{ctx:r}}}),m=new W({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Da]},$$scope:{ctx:r}}}),D=new W({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Ea]},$$scope:{ctx:r}}}),A=new Le({}),{c(){e=T("p"),n=k("LPAs may be a "),h(t.$$.fragment),l=k(", "),h(o.$$.fragment),s=k("y, or "),h(f.$$.fragment),i=k("."),a=I(),u=T("p"),c=T("strong"),g=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(m.$$.fragment),y=k(" to get more details."),S=I(),L=T("p"),C=k("Data from ONS Geography via "),h(D.$$.fragment),E=k(", as of November 2022."),F=I(),h(A.$$.fragment)},m(N,O){$(N,e,O),w(e,n),b(t,e,null),w(e,l),b(o,e,null),w(e,s),b(f,e,null),w(e,i),$(N,a,O),$(N,u,O),w(u,c),w(c,g),b(m,c,null),w(c,y),$(N,S,O),$(N,L,O),w(L,C),b(D,L,null),w(L,E),$(N,F,O),b(A,N,O),M=!0},p(N,O){const P={};O&16&&(P.$$scope={dirty:O,ctx:N}),t.$set(P);const B={};O&16&&(B.$$scope={dirty:O,ctx:N}),o.$set(B);const q={};O&16&&(q.$$scope={dirty:O,ctx:N}),f.$set(q);const R={};O&16&&(R.$$scope={dirty:O,ctx:N}),m.$set(R);const U={};O&16&&(U.$$scope={dirty:O,ctx:N}),D.$set(U)},i(N){M||(_(t.$$.fragment,N),_(o.$$.fragment,N),_(f.$$.fragment,N),_(m.$$.fragment,N),_(D.$$.fragment,N),_(A.$$.fragment,N),M=!0)},o(N){d(t.$$.fragment,N),d(o.$$.fragment,N),d(f.$$.fragment,N),d(m.$$.fragment,N),d(D.$$.fragment,N),d(A.$$.fragment,N),M=!1},d(N){N&&(p(e),p(a),p(u),p(S),p(L),p(F)),v(t),v(o),v(f),v(m),v(D),v(A,N)}}}function ja(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Fa]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Ra(r){let e,n=r[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&j(t,n)},d(l){l&&p(e)}}}function Ba(r){let e,n;return e=new le({props:{$$slots:{default:[Ra,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ha(r){let e,n,t,l;const o=[H(He),{sourceLayer:He},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Ba]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=Z(s,o[a]);e=new Xe({props:s});const f=[H(`${He}-outline`),{sourceLayer:He},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=Z(i,f[a]);return t=new ve({props:i}),{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&3?x(o,[u&0&&ne(H(He)),u&0&&{sourceLayer:He},u&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?x(f,[u&0&&ne(H(`${He}-outline`)),u&0&&{sourceLayer:He},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function za(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:He,$$slots:{right:[ja],default:[Ia]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new re({props:f}),V.push(()=>Q(e,"checked",s)),l=new de({props:{url:`pmtiles://${_e()}/v1/${He}.pmtiles`,$$slots:{default:[Ha]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=I(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],J(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let He="local_planning_authorities";function Ga(r,e,n){let t=te.local_planning_authorities,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Ua extends X{constructor(e){super(),Y(this,e,Ga,za,G,{})}}function qa(r){let e,n,t;return e=new ye({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Wa(r){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Va(r){let e,n,t,l,o,s,f;return t=new W({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Wa]},$$scope:{ctx:r}}}),s=new Le({}),{c(){e=T("p"),n=k("Data from "),h(t.$$.fragment),l=k(", as of May 2023."),o=I(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,l),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Xa(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Va]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Ya(r){let e,n=r[3].Name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&j(t,n)},d(l){l&&p(e)}}}function Qa(r){let e,n;return e=new le({props:{$$slots:{default:[Ya,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ja(r){let e,n,t,l;const o=[H(ze),{sourceLayer:ze},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Qa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=Z(s,o[a]);e=new Xe({props:s}),e.$on("click",Za);const f=[H(`${ze}-outline`),{sourceLayer:ze},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=Z(i,f[a]);return t=new ve({props:i}),{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&3?x(o,[u&0&&ne(H(ze)),u&0&&{sourceLayer:ze},u&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?x(f,[u&0&&ne(H(`${ze}-outline`)),u&0&&{sourceLayer:ze},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ka(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:ze,$$slots:{right:[Xa],default:[qa]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new re({props:f}),V.push(()=>Q(e,"checked",s)),l=new de({props:{url:`pmtiles://${_e()}/v1/${ze}.pmtiles`,$$slots:{default:[Ja]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=I(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],J(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let ze="parliamentary_constituencies";function Za(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function xa(r,e,n){let t=te.parliamentary_constituencies,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class ef extends X{constructor(e){super(),Y(this,e,xa,Ka,G,{})}}function tf(r){let e;return{c(){e=k("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function nf(r){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function rf(r){let e;return{c(){e=k(`Extrium
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lf(r){let e;return{c(){e=k(`FAQ
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function of(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y,S,L;return t=new W({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[nf]},$$scope:{ctx:r}}}),u=new W({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[rf]},$$scope:{ctx:r}}}),g=new W({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[lf]},$$scope:{ctx:r}}}),S=new Le({}),{c(){e=T("p"),n=k("Most layers show air quality data from "),h(t.$$.fragment),l=k(`. The measurements are annual means, in units of
        gm
        `),o=T("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),f=I(),i=T("p"),a=k("The noise layer is from "),h(u.$$.fragment),c=k(", using 2017 data. See their "),h(g.$$.fragment),m=k("."),y=I(),h(S.$$.fragment)},m(C,D){$(C,e,D),w(e,n),b(t,e,null),w(e,l),w(e,o),w(e,s),$(C,f,D),$(C,i,D),w(i,a),b(u,i,null),w(i,c),b(g,i,null),w(i,m),$(C,y,D),b(S,C,D),L=!0},p(C,D){const E={};D&2048&&(E.$$scope={dirty:D,ctx:C}),t.$set(E);const F={};D&2048&&(F.$$scope={dirty:D,ctx:C}),u.$set(F);const A={};D&2048&&(A.$$scope={dirty:D,ctx:C}),g.$set(A)},i(C){L||(_(t.$$.fragment,C),_(u.$$.fragment,C),_(g.$$.fragment,C),_(S.$$.fragment,C),L=!0)},o(C){d(t.$$.fragment,C),d(u.$$.fragment,C),d(g.$$.fragment,C),d(S.$$.fragment,C),L=!1},d(C){C&&(p(e),p(f),p(i),p(y)),v(t),v(u),v(g),v(S,C)}}}function sf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[of]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function fr(r){let e,n,t,l,o=r[3](r[0])+"",s,f,i,a,u,c,g,m,y,S,L,C,D;function E(O){r[7](O)}let F={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};r[0]!==void 0&&(F.value=r[0]),e=new Nt({props:F}),V.push(()=>Q(e,"value",E));const A=[ff,af],M=[];function N(O,P){return O[0]=="Noise"?0:1}return m=N(r),y=M[m]=A[m](r),{c(){h(e.$$.fragment),t=I(),l=T("p"),s=k(o),f=I(),i=T("div"),a=T("label"),u=k(`Opacity
      `),c=T("input"),g=I(),y.c(),S=Ae(),z(c,"type","range"),z(c,"min","0"),z(c,"max","100")},m(O,P){b(e,O,P),$(O,t,P),$(O,l,P),w(l,s),$(O,f,P),$(O,i,P),w(i,a),w(a,u),w(a,c),lt(c,r[2]),$(O,g,P),M[m].m(O,P),$(O,S,P),L=!0,C||(D=[at(c,"change",r[8]),at(c,"input",r[8])],C=!0)},p(O,P){const B={};!n&&P&1&&(n=!0,B.value=O[0],J(()=>n=!1)),e.$set(B),(!L||P&1)&&o!==(o=O[3](O[0])+"")&&j(s,o),P&4&&lt(c,O[2]);let q=m;m=N(O),m===q?M[m].p(O,P):(fe(),d(M[q],1,1,()=>{M[q]=null}),ue(),y=M[m],y?y.p(O,P):(y=M[m]=A[m](O),y.c()),_(y,1),y.m(S.parentNode,S))},i(O){L||(_(e.$$.fragment,O),_(y),L=!0)},o(O){d(e.$$.fragment,O),d(y),L=!1},d(O){O&&(p(t),p(l),p(f),p(i),p(g),p(S)),v(e,O),M[m].d(O),C=!1,Qr(D)}}}function af(r){let e,n,t;return{c(){e=T("img"),yn(e.src,n=r[5](r[0]))||z(e,"src",n),z(e,"width",150),z(e,"alt",t=`Legend for ${r[0]} layer`)},m(l,o){$(l,e,o)},p(l,o){o&1&&!yn(e.src,n=l[5](l[0]))&&z(e,"src",n),o&1&&t!==(t=`Legend for ${l[0]} layer`)&&z(e,"alt",t)},i:ee,o:ee,d(l){l&&p(e)}}}function ff(r){let e,n;return e=new Ye({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function uf(r){let e,n;const t=[H("pollution"),{paint:{"raster-opacity":r[2]/100}},{layout:{visibility:r[1]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new Ml({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&6?x(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function cf(r){let e,n,t,l,o,s;function f(u){r[6](u)}let i={id:"pollution",$$slots:{right:[sf],default:[tf]},$$scope:{ctx:r}};r[1]!==void 0&&(i.checked=r[1]),e=new re({props:i}),V.push(()=>Q(e,"checked",f));let a=r[1]&&fr(r);return o=new Vl({props:{tiles:[r[4](r[0])],tileSize:256,$$slots:{default:[uf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=I(),a&&a.c(),l=I(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),b(o,u,c),s=!0},p(u,[c]){const g={};c&2048&&(g.$$scope={dirty:c,ctx:u}),!n&&c&2&&(n=!0,g.checked=u[1],J(()=>n=!1)),e.$set(g),u[1]?a?(a.p(u,c),c&2&&_(a,1)):(a=fr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(fe(),d(a,1,1,()=>{a=null}),ue());const m={};c&1&&(m.tiles=[u[4](u[0])]),c&2054&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),v(e,u),a&&a.d(u),v(o,u)}}}function $f(r,e,n){let t,l=!1,o=50,s="PM25_viridis";function f(){return s=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(y){return t[1]}function a(y){let S=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${f()}?bbox={bbox-epsg-3857}&${S}`}function u(y){let S=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${f()}?${S}`}function c(y){l=y,n(1,l)}function g(y){s=y,n(0,s)}function m(){o=Mt(this.value),n(2,o)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[s])},[s,l,o,i,a,u,c,g,m]}class pf extends X{constructor(e){super(),Y(this,e,$f,cf,G,{})}}function mf(r){let e,n,t;return e=new ye({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Wards`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function _f(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gf(r){let e,n,t,l,o,s,f;return t=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[_f]},$$scope:{ctx:r}}}),s=new Le({}),{c(){e=T("p"),n=k("Data from "),h(t.$$.fragment),l=k(", as of May 2023."),o=I(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,l),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function df(r){let e,n,t;return n=new ae({props:{$$slots:{default:[gf]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function hf(r){let e,n=r[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&j(t,n)},d(l){l&&p(e)}}}function bf(r){let e,n;return e=new le({props:{$$slots:{default:[hf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vf(r){let e,n,t,l;const o=[H(Ge),{sourceLayer:Ge},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[bf]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=Z(s,o[a]);e=new Xe({props:s}),e.$on("click",kf);const f=[H(`${Ge}-outline`),{sourceLayer:Ge},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=Z(i,f[a]);return t=new ve({props:i}),{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&3?x(o,[u&0&&ne(H(Ge)),u&0&&{sourceLayer:Ge},u&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?x(f,[u&0&&ne(H(`${Ge}-outline`)),u&0&&{sourceLayer:Ge},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function wf(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:Ge,$$slots:{right:[df],default:[mf]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new re({props:f}),V.push(()=>Q(e,"checked",s)),l=new de({props:{url:`pmtiles://${_e()}/v1/${Ge}.pmtiles`,$$slots:{default:[vf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=I(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],J(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let Ge="wards";function kf(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function yf(r,e,n){let t=te.wards,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Sf extends X{constructor(e){super(),Y(this,e,yf,wf,G,{})}}function Cf(r){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Of(r){let e,n,t,l;return t=new W({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Cf]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("License: "),h(t.$$.fragment)},m(o,s){$(o,e,s),w(e,n),b(t,e,null),l=!0},p(o,[s]){const f={};s&1&&(f.$$scope={dirty:s,ctx:o}),t.$set(f)},i(o){l||(_(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&p(e),v(t)}}}class ot extends X{constructor(e){super(),Y(this,e,null,Of,G,{})}}function Tf(r){let e,n,t;return e=new ye({props:{color:te.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=k(`
  Bus routes`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Af(r){let e;return{c(){e=k(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Lf(r){let e,n,t,l,o,s,f,i,a;return o=new W({props:{href:"https://gtfs.org",$$slots:{default:[Af]},$$scope:{ctx:r}}}),i=new ot({}),{c(){e=T("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=I(),t=T("p"),l=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),f=I(),h(i.$$.fragment)},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),w(t,l),b(o,t,null),w(t,s),$(u,f,c),b(i,u,c),a=!0},p(u,c){const g={};c&8&&(g.$$scope={dirty:c,ctx:u}),o.$set(g)},i(u){a||(_(o.$$.fragment,u),_(i.$$.fragment,u),a=!0)},o(u){d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(f)),v(o),v(i,u)}}}function If(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Lf]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Pf(r){let e;return{c(){e=T("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mf(r){let e;return{c(){e=T("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Nf(r){let e;function n(o,s){return o[2].has_bus_lane?Mf:Pf}let t=n(r),l=t(r);return{c(){l.c(),e=Ae()},m(o,s){l.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function Df(r){let e,n;return e=new le({props:{$$slots:{default:[Nf,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ef(r){let e,n;const t=[H(mt),{sourceLayer:mt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],te.bus_route_with_lane,te.bus_route_without_lane],"line-width":5,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Df]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new ve({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&1?x(t,[s&0&&ne(H(mt)),s&0&&{sourceLayer:mt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ff(r){let e,n,t,l,o;function s(i){r[1](i)}let f={id:mt,$$slots:{right:[If],default:[Tf]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new re({props:f}),V.push(()=>Q(e,"checked",s)),l=new de({props:{url:`pmtiles://${_e()}/v1/${mt}.pmtiles`,$$slots:{default:[Ef]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=I(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],J(()=>n=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let mt="bus_routes";function jf(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class Rf extends X{constructor(e){super(),Y(this,e,jf,Ff,G,{})}}function ur(r){const e=Yf(r[5]);r[6]=e[0],r[7]=e[1],r[8]=e[2]}function cr(r,e,n){const t=r.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function Bf(r){let e;return{c(){e=k("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hf(r){let e,n,t,l,o,s,f,i;return f=new ot({}),{c(){e=T("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=I(),t=T("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=I(),o=T("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=I(),h(f.$$.fragment)},m(a,u){$(a,e,u),$(a,n,u),$(a,t,u),$(a,l,u),$(a,o,u),$(a,s,u),b(f,a,u),i=!0},p:ee,i(a){i||(_(f.$$.fragment,a),i=!0)},o(a){d(f.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(l),p(o),p(s)),v(f,a)}}}function zf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Hf]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function $r(r){let e,n,t;return n=new et({props:{$$slots:{default:[Uf]},$$scope:{ctx:r}}}),{c(){e=T("div"),h(n.$$.fragment),we(e,"border","1px solid black"),we(e,"padding","8px")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Gf(r){let e,n,t=r[9]+"",l,o,s;return e=new ye({props:{color:r[10]}}),{c(){h(e.$$.fragment),n=I(),l=k(t),o=I()},m(f,i){b(e,f,i),$(f,n,i),$(f,l,i),$(f,o,i),s=!0},p:ee,i(f){s||(_(e.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l),p(o)),v(e,f)}}}function pr(r){let e,n,t;function l(s){r[4](s,r[6])}let o={id:r[6],$$slots:{default:[Gf]},$$scope:{ctx:r}};return r[1][r[6]]!==void 0&&(o.checked=r[1][r[6]]),e=new re({props:o}),V.push(()=>Q(e,"checked",l)),{c(){h(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){r=s;const i={};f&8192&&(i.$$scope={dirty:f,ctx:r}),!n&&f&6&&(n=!0,i.checked=r[1][r[6]],J(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Uf(r){let e,n,t=We(r[2]),l=[];for(let s=0;s<t.length;s+=1)l[s]=pr(cr(r,t,s));const o=s=>d(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Ae()},m(s,f){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,f);$(s,e,f),n=!0},p(s,f){if(f&6){t=We(s[2]);let i;for(i=0;i<t.length;i+=1){const a=cr(s,t,i);l[i]?(l[i].p(a,f),_(l[i],1)):(l[i]=pr(a),l[i].c(),_(l[i],1),l[i].m(e.parentNode,e))}for(fe(),i=t.length;i<l.length;i+=1)o(i);ue()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)_(l[f]);n=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)d(l[f]);n=!1},d(s){s&&p(e),It(l,s)}}}function qf(r){ur(r);let e,n=r[6]+"",t,l,o,s,f,i=r[7]+"",a,u,c,g,m=r[8]+"",y;return{c(){e=T("h2"),t=k(n),l=I(),o=T("p"),s=k("Direction: "),f=T("b"),a=I(),u=T("p"),c=k("Width: "),g=T("b"),y=k(m)},m(S,L){$(S,e,L),w(e,t),$(S,l,L),$(S,o,L),w(o,s),w(o,f),f.innerHTML=i,$(S,a,L),$(S,u,L),w(u,c),w(u,g),w(g,y)},p(S,L){ur(S),L&32&&n!==(n=S[6]+"")&&j(t,n),L&32&&i!==(i=S[7]+"")&&(f.innerHTML=i),L&32&&m!==(m=S[8]+"")&&j(y,m)},d(S){S&&(p(e),p(l),p(o),p(a),p(u))}}}function Wf(r){let e,n;return e=new le({props:{$$slots:{default:[qf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8224&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Vf(r){let e,n;const t=[H(_t),{sourceLayer:_t},{paint:{"line-color":Xt(["get","kind"],{track:te.cycle_paths.track,lane:te.cycle_paths.lane,shared_use_segregated:te.cycle_paths.shared_use_segregated,shared_use_unsegregated:te.cycle_paths.shared_use_unsegregated},"red"),"line-width":Fe,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{filter:mr(r[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[Wf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new ve({props:l}),e.$on("click",Qf),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&3?x(t,[s&0&&ne(H(_t)),s&0&&{sourceLayer:_t},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:mr(o[1])},t[5],t[6],t[7]]):{};s&8192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Xf(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:_t,$$slots:{right:[zf],default:[Bf]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new re({props:i}),V.push(()=>Q(e,"checked",f));let a=r[0]&&$r(r);return o=new de({props:{url:`pmtiles://${_e()}/v1/${_t}.pmtiles`,$$slots:{default:[Vf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=I(),a&&a.c(),l=I(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),b(o,u,c),s=!0},p(u,[c]){const g={};c&8192&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],J(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=$r(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(fe(),d(a,1,1,()=>{a=null}),ue());const m={};c&8195&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),v(e,u),a&&a.d(u),v(o,u)}}}let _t="cycle_paths";function Yf(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function Qf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function mr(r){let e=Object.keys(r).filter(n=>r[n]);return["in",["get","kind"],["literal",e]]}function Jf(r,e,n){let t=[["track","Separated tracks",te.cycle_paths.track],["lane","Unprotected lanes",te.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",te.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",te.cycle_paths.shared_use_unsegregated]],l=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){l=i,n(0,l)}function f(i,a){r.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[l,o,t,s,f]}class Kf extends X{constructor(e){super(),Y(this,e,Jf,Xf,G,{})}}function Zf(r){let e,n,t;return e=new ye({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Major Road Network`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function xf(r){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function eu(r){let e,n,t,l,o,s,f;return t=new W({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[xf]},$$scope:{ctx:r}}}),s=new Le({}),{c(){e=T("p"),n=k("Data from the "),h(t.$$.fragment),l=k(", as of September 2021."),o=I(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,l),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function tu(r){let e,n,t;return n=new ae({props:{$$slots:{default:[eu]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function nu(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&j(t,n)},d(l){l&&p(e)}}}function ru(r){let e,n;return e=new le({props:{$$slots:{default:[nu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function lu(r){let e,n;const t=[H(gt),{sourceLayer:gt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[ru]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new ve({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&3?x(t,[s&0&&ne(H(gt)),s&0&&{sourceLayer:gt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":K(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ou(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:gt,$$slots:{right:[tu],default:[Zf]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new re({props:f}),V.push(()=>Q(e,"checked",s)),l=new de({props:{url:`pmtiles://${_e()}/v1/${gt}.pmtiles`,$$slots:{default:[lu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=I(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],J(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let gt="mrn";function su(r,e,n){let t=te.mrn,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class iu extends X{constructor(e){super(),Y(this,e,su,ou,G,{})}}function au(r){let e,n,t;return e=new ye({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  National Cycle Network`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function fu(r){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uu(r){let e,n,t,l,o,s,f;return t=new W({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[fu]},$$scope:{ctx:r}}}),s=new Le({}),{c(){e=T("p"),n=k("Data from Sustrans about the "),h(t.$$.fragment),l=k(", downloaded on 22/01/2024."),o=I(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,l),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function cu(r){let e,n,t;return n=new ae({props:{$$slots:{default:[uu]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function _r(r){let e,n,t,l=r[3].Desc_+"",o;return{c(){e=T("li"),n=k("Description: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].Desc_+"")&&j(o,l)},d(s){s&&p(e)}}}function gr(r){let e,n,t,l=r[3].Greenway+"",o;return{c(){e=T("li"),n=k("Is greenway: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].Greenway+"")&&j(o,l)},d(s){s&&p(e)}}}function dr(r){let e,n,t,l=r[3].RouteType+"",o;return{c(){e=T("li"),n=k("Route type: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].RouteType+"")&&j(o,l)},d(s){s&&p(e)}}}function hr(r){let e,n,t,l=r[3].RouteNo+"",o;return{c(){e=T("li"),n=k("Route number: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].RouteNo+"")&&j(o,l)},d(s){s&&p(e)}}}function br(r){let e,n,t,l=r[3].RouteCat+"",o;return{c(){e=T("li"),n=k("Route Category: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].RouteCat+"")&&j(o,l)},d(s){s&&p(e)}}}function vr(r){let e,n,t,l=r[3].OpenStatus+"",o;return{c(){e=T("li"),n=k("Open Status: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].OpenStatus+"")&&j(o,l)},d(s){s&&p(e)}}}function wr(r){let e,n,t,l=r[3].Surface+"",o;return{c(){e=T("li"),n=k("Surface: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].Surface+"")&&j(o,l)},d(s){s&&p(e)}}}function kr(r){let e,n,t,l=r[3].Quality+"",o;return{c(){e=T("li"),n=k("Quality: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].Quality+"")&&j(o,l)},d(s){s&&p(e)}}}function yr(r){let e,n,t,l=r[3].RoadClass+"",o;return{c(){e=T("li"),n=k("Road Class: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].RoadClass+"")&&j(o,l)},d(s){s&&p(e)}}}function $u(r){let e,n,t,l,o,s,f,i,a,u=r[3].Desc_&&_r(r),c=r[3].Greenway&&gr(r),g=r[3].RouteType&&dr(r),m=r[3].RouteNo&&hr(r),y=r[3].RouteCat&&br(r),S=r[3].OpenStatus&&vr(r),L=r[3].Surface&&wr(r),C=r[3].Quality&&kr(r),D=r[3].RoadClass&&yr(r);return{c(){e=T("ul"),u&&u.c(),n=I(),c&&c.c(),t=I(),g&&g.c(),l=I(),m&&m.c(),o=I(),y&&y.c(),s=I(),S&&S.c(),f=I(),L&&L.c(),i=I(),C&&C.c(),a=I(),D&&D.c()},m(E,F){$(E,e,F),u&&u.m(e,null),w(e,n),c&&c.m(e,null),w(e,t),g&&g.m(e,null),w(e,l),m&&m.m(e,null),w(e,o),y&&y.m(e,null),w(e,s),S&&S.m(e,null),w(e,f),L&&L.m(e,null),w(e,i),C&&C.m(e,null),w(e,a),D&&D.m(e,null)},p(E,F){E[3].Desc_?u?u.p(E,F):(u=_r(E),u.c(),u.m(e,n)):u&&(u.d(1),u=null),E[3].Greenway?c?c.p(E,F):(c=gr(E),c.c(),c.m(e,t)):c&&(c.d(1),c=null),E[3].RouteType?g?g.p(E,F):(g=dr(E),g.c(),g.m(e,l)):g&&(g.d(1),g=null),E[3].RouteNo?m?m.p(E,F):(m=hr(E),m.c(),m.m(e,o)):m&&(m.d(1),m=null),E[3].RouteCat?y?y.p(E,F):(y=br(E),y.c(),y.m(e,s)):y&&(y.d(1),y=null),E[3].OpenStatus?S?S.p(E,F):(S=vr(E),S.c(),S.m(e,f)):S&&(S.d(1),S=null),E[3].Surface?L?L.p(E,F):(L=wr(E),L.c(),L.m(e,i)):L&&(L.d(1),L=null),E[3].Quality?C?C.p(E,F):(C=kr(E),C.c(),C.m(e,a)):C&&(C.d(1),C=null),E[3].RoadClass?D?D.p(E,F):(D=yr(E),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(E){E&&p(e),u&&u.d(),c&&c.d(),g&&g.d(),m&&m.d(),y&&y.d(),S&&S.d(),L&&L.d(),C&&C.d(),D&&D.d()}}}function pu(r){let e,n;return e=new le({props:{$$slots:{default:[$u,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mu(r){let e,n;const t=[H(dt),{sourceLayer:dt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":4,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[pu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new ve({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&3?x(t,[s&0&&ne(H(dt)),s&0&&{sourceLayer:dt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":K(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function _u(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:dt,$$slots:{right:[cu],default:[au]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new re({props:f}),V.push(()=>Q(e,"checked",s)),l=new de({props:{url:`pmtiles://${_e()}/v1/${dt}.pmtiles`,$$slots:{default:[mu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=I(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],J(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let dt="national_cycle_network";function gu(r,e,n){let t=te.national_cycle_network,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class du extends X{constructor(e){super(),Y(this,e,gu,_u,G,{})}}function hu(r){let e;return{c(){e=k("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bu(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vu(r){let e,n,t,l,o,s,f,i,a;return f=new W({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[bu]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road. (You won't be able to distinguish left and right
        though; use the OS Road basemap instead.)`,n=I(),t=T("p"),t.textContent="Data valid as of 1 January, 2024",l=I(),o=T("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),i=k(".")},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),$(u,l,c),$(u,o,c),w(o,s),b(f,o,null),w(o,i),a=!0},p(u,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),f.$set(g)},i(u){a||(_(f.$$.fragment,u),a=!0)},o(u){d(f.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(l),p(o)),v(f)}}}function wu(r){let e,n,t;return n=new ae({props:{$$slots:{default:[vu]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Sr(r){let e,n;return e=new Ye({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ku(r){let e,n,t,l=r[4].side+"",o,s,f,i,a,u=r[4].average+"",c,g,m,y,S,L,C=r[4].minimum+"",D,E;return{c(){e=T("p"),n=k("Side of the road: "),t=T("b"),o=k(l),s=I(),f=T("p"),i=k("Average width: "),a=T("b"),c=k(u),g=k(`
        meters`),m=I(),y=T("p"),S=k("Minimum width: "),L=T("b"),D=k(C),E=k(`
        meters`)},m(F,A){$(F,e,A),w(e,n),w(e,t),w(t,o),$(F,s,A),$(F,f,A),w(f,i),w(f,a),w(a,c),w(f,g),$(F,m,A),$(F,y,A),w(y,S),w(y,L),w(L,D),w(y,E)},p(F,A){A&16&&l!==(l=F[4].side+"")&&j(o,l),A&16&&u!==(u=F[4].average+"")&&j(c,u),A&16&&C!==(C=F[4].minimum+"")&&j(D,C)},d(F){F&&(p(e),p(s),p(f),p(m),p(y))}}}function yu(r){let e,n;return e=new le({props:{$$slots:{default:[ku,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Su(r){let e,n;const t=[H(ht),{sourceLayer:ht},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":be(["get","average"],r[2],r[1]),"line-width":Fe,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[yu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new ve({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&7?x(t,[s&0&&ne(H(ht)),s&0&&{sourceLayer:ht},t[2],t[3],s&6&&{paint:{"line-color":be(["get","average"],o[2],o[1]),"line-width":Fe,"line-opacity":K(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Cu(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:ht,$$slots:{right:[wu],default:[hu]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new re({props:i}),V.push(()=>Q(e,"checked",f));let a=r[0]&&Sr(r);return o=new de({props:{url:`pmtiles://${Zt()}/v1/${ht}.pmtiles`,$$slots:{default:[Su]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=I(),a&&a.c(),l=I(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),b(o,u,c),s=!0},p(u,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],J(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=Sr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(fe(),d(a,1,1,()=>{a=null}),ue());const m={};c&33&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),v(e,u),a&&a.d(u),v(o,u)}}}let ht="pavement_widths";function Ou(r,e,n){let t=te.sequential_low_to_high,l=[0,2,4,6,8,13],o=!1;function s(f){o=f,n(0,o)}return[o,t,l,s]}class Tu extends X{constructor(e){super(),Y(this,e,Ou,Cu,G,{})}}function Au(r){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Lu(r){let e;return{c(){e=k("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Iu(r){let e;return{c(){e=k("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pu(r){let e,n,t,l,o,s,f,i,a,u,c;return f=new W({props:{href:"https://www.pct.bike",$$slots:{default:[Lu]},$$scope:{ctx:r}}}),a=new W({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Iu]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=I(),t=T("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=I(),o=T("p"),s=k("See "),h(f.$$.fragment),i=k(" and "),h(a.$$.fragment),u=k(" for details on methodology and data sources.")},m(g,m){$(g,e,m),$(g,n,m),$(g,t,m),$(g,l,m),$(g,o,m),w(o,s),b(f,o,null),w(o,i),b(a,o,null),w(o,u),c=!0},p(g,m){const y={};m&1024&&(y.$$scope={dirty:m,ctx:g}),f.$set(y);const S={};m&1024&&(S.$$scope={dirty:m,ctx:g}),a.$set(S)},i(g){c||(_(f.$$.fragment,g),_(a.$$.fragment,g),c=!0)},o(g){d(f.$$.fragment,g),d(a.$$.fragment,g),c=!1},d(g){g&&(p(e),p(n),p(t),p(l),p(o)),v(f),v(a)}}}function Mu(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Pu]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Cr(r){let e,n,t,l,o,s,f,i;e=new Ye({props:{colorScale:r[3],limits:r[4]}});function a(m){r[7](m)}let u={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(u.value=r[0]),t=new Jr({props:u}),V.push(()=>Q(t,"value",a));function c(m){r[8](m)}let g={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(g.value=r[1]),s=new Nt({props:g}),V.push(()=>Q(s,"value",c)),{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment),o=I(),h(s.$$.fragment)},m(m,y){b(e,m,y),$(m,n,y),b(t,m,y),$(m,o,y),b(s,m,y),i=!0},p(m,y){const S={};!l&&y&1&&(l=!0,S.value=m[0],J(()=>l=!1)),t.$set(S);const L={};!f&&y&2&&(f=!0,L.value=m[1],J(()=>f=!1)),s.$set(L)},i(m){i||(_(e.$$.fragment,m),_(t.$$.fragment,m),_(s.$$.fragment,m),i=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(s.$$.fragment,m),i=!1},d(m){m&&(p(n),p(o)),v(e,m),v(t,m),v(s,m)}}}function Nu(r){let e,n=r[5](r[9])+"",t;return{c(){e=new hn(!1),t=Ae(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function Du(r){let e,n;return e=new le({props:{$$slots:{default:[Nu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Eu(r){let e,n;const t=[H(Ue),{sourceLayer:Ue},{paint:{"line-color":be(["get",r[1]],r[4],r[3]),"line-width":Fe,"line-opacity":K(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ue?"visible":"none"}}];let l={$$slots:{default:[Du]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new ve({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&31?x(t,[s&0&&ne(H(Ue)),s&0&&{sourceLayer:Ue},s&26&&{paint:{"line-color":be(["get",o[1]],o[4],o[3]),"line-width":Fe,"line-opacity":K(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==Ue?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Fu(r){let e,n=r[5](r[9])+"",t;return{c(){e=new hn(!1),t=Ae(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function ju(r){let e,n;return e=new le({props:{$$slots:{default:[Fu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ru(r){let e,n;const t=[H(st),{sourceLayer:st},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":be(["get",r[1]],r[4],r[3]),"line-width":Fe,"line-opacity":K(1,.5)}},{layout:{visibility:r[2]&&r[0]==st?"visible":"none"}}];let l={$$slots:{default:[ju]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new ve({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&31?x(t,[s&0&&ne(H(st)),s&0&&{sourceLayer:st},t[2],t[3],s&26&&{paint:{"line-color":be(["get",o[1]],o[4],o[3]),"line-width":Fe,"line-opacity":K(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==st?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Bu(r){let e,n,t,l,o,s,f,i;function a(g){r[6](g)}let u={id:Ue,$$slots:{right:[Mu],default:[Au]},$$scope:{ctx:r}};r[2]!==void 0&&(u.checked=r[2]),e=new re({props:u}),V.push(()=>Q(e,"checked",a));let c=r[2]&&Cr(r);return o=new de({props:{url:`pmtiles://${_e()}/v1/${Ue}.pmtiles`,$$slots:{default:[Eu]},$$scope:{ctx:r}}}),f=new de({props:{url:`pmtiles://${_e()}/v1/${st}.pmtiles`,$$slots:{default:[Ru]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=I(),c&&c.c(),l=I(),h(o.$$.fragment),s=I(),h(f.$$.fragment)},m(g,m){b(e,g,m),$(g,t,m),c&&c.m(g,m),$(g,l,m),b(o,g,m),$(g,s,m),b(f,g,m),i=!0},p(g,[m]){const y={};m&1024&&(y.$$scope={dirty:m,ctx:g}),!n&&m&4&&(n=!0,y.checked=g[2],J(()=>n=!1)),e.$set(y),g[2]?c?(c.p(g,m),m&4&&_(c,1)):(c=Cr(g),c.c(),_(c,1),c.m(l.parentNode,l)):c&&(fe(),d(c,1,1,()=>{c=null}),ue());const S={};m&1031&&(S.$$scope={dirty:m,ctx:g}),o.$set(S);const L={};m&1031&&(L.$$scope={dirty:m,ctx:g}),f.$set(L)},i(g){i||(_(e.$$.fragment,g),_(c),_(o.$$.fragment,g),_(f.$$.fragment,g),i=!0)},o(g){d(e.$$.fragment,g),d(c),d(o.$$.fragment,g),d(f.$$.fragment,g),i=!1},d(g){g&&(p(t),p(l),p(s)),v(e,g),c&&c.d(g),v(o,g),v(f,g)}}}let Ue="pct_commute",st="pct_school";function Hu(r,e,n){let t=te.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Ue,s="baseline",f=!1;function i(g){let m=g.baseline,y=g.gov_target,S=g.go_dutch,L=`<h2>Trip purpose: ${o==Ue?"commuting":"school"}</h2>`;if(L+=`<p>Baseline (2011): <b>${m.toLocaleString()}</b></p>`,m==0)L+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,L+=`<p>Go Dutch: <b>${S.toLocaleString()}</b></p>`;else{let C=(y/m).toFixed(1),D=(S/m).toFixed(1);L+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${C}x</b> of baseline)</p>`,L+=`<p>Go Dutch: ${S.toLocaleString()} (<b>${D}x</b> of baseline)</p>`}return L}function a(g){f=g,n(2,f)}function u(g){o=g,n(0,o)}function c(g){s=g,n(1,s)}return[o,s,f,t,l,i,a,u,c]}class zu extends X{constructor(e){super(),Y(this,e,Hu,Bu,G,{})}}function Gu(r){let e;return{c(){e=k("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Uu(r){let e;return{c(){e=k("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qu(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wu(r){let e,n,t,l,o,s,f,i,a,u,c,g;return t=new W({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Uu]},$$scope:{ctx:r}}}),u=new W({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[qu]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("The average speed data is collected over a six-month period by "),h(t.$$.fragment),l=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=I(),s=T("p"),s.textContent="Data valid as of 1 September, 2023",f=I(),i=T("p"),a=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),c=k(".")},m(m,y){$(m,e,y),w(e,n),b(t,e,null),w(e,l),$(m,o,y),$(m,s,y),$(m,f,y),$(m,i,y),w(i,a),b(u,i,null),w(i,c),g=!0},p(m,y){const S={};y&256&&(S.$$scope={dirty:y,ctx:m}),t.$set(S);const L={};y&256&&(L.$$scope={dirty:y,ctx:m}),u.$set(L)},i(m){g||(_(t.$$.fragment,m),_(u.$$.fragment,m),g=!0)},o(m){d(t.$$.fragment,m),d(u.$$.fragment,m),g=!1},d(m){m&&(p(e),p(o),p(s),p(f),p(i)),v(t),v(u)}}}function Vu(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Wu]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Or(r){let e,n,t,l,o;e=new Ye({props:{colorScale:r[2],limits:r[3]}});function s(i){r[6](i)}let f={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(f.value=r[0]),t=new Jr({props:f}),V.push(()=>Q(t,"value",s)),{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment)},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),o=!0},p(i,a){const u={};!l&&a&1&&(l=!0,u.value=i[0],J(()=>l=!1)),t.$set(u)},i(i){o||(_(e.$$.fragment,i),_(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),v(e,i),v(t,i)}}}function Xu(r){let e,n,t=r[7].indicative_mph+"",l,o,s,f,i,a=r[7].highest_mph+"",u,c,g=r[4][r[7].highest_description]+"",m,y;return{c(){e=T("p"),n=k("Posted speed limit: "),l=k(t),o=k(" mph"),s=I(),f=T("p"),i=k("Highest average speed: "),u=k(a),c=k(" mph (during "),m=k(g),y=k(")")},m(S,L){$(S,e,L),w(e,n),w(e,l),w(e,o),$(S,s,L),$(S,f,L),w(f,i),w(f,u),w(f,c),w(f,m),w(f,y)},p(S,L){L&128&&t!==(t=S[7].indicative_mph+"")&&j(l,t),L&128&&a!==(a=S[7].highest_mph+"")&&j(u,a),L&128&&g!==(g=S[4][S[7].highest_description]+"")&&j(m,g)},d(S){S&&(p(e),p(s),p(f))}}}function Yu(r){let e,n;return e=new le({props:{$$slots:{default:[Xu,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qu(r){let e,n;const t=[H(bt),{sourceLayer:bt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":be(["get",r[0]],r[3],r[2]),"line-width":Fe,"line-opacity":K(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[Yu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new ve({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&15?x(t,[s&0&&ne(H(bt)),s&0&&{sourceLayer:bt},t[2],t[3],s&13&&{paint:{"line-color":be(["get",o[0]],o[3],o[2]),"line-width":Fe,"line-opacity":K(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ju(r){let e,n,t,l,o,s;function f(u){r[5](u)}let i={id:bt,$$slots:{right:[Vu],default:[Gu]},$$scope:{ctx:r}};r[1]!==void 0&&(i.checked=r[1]),e=new re({props:i}),V.push(()=>Q(e,"checked",f));let a=r[1]&&Or(r);return o=new de({props:{url:`pmtiles://${Zt()}/v1/${bt}.pmtiles`,$$slots:{default:[Qu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=I(),a&&a.c(),l=I(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),b(o,u,c),s=!0},p(u,[c]){const g={};c&256&&(g.$$scope={dirty:c,ctx:u}),!n&&c&2&&(n=!0,g.checked=u[1],J(()=>n=!1)),e.$set(g),u[1]?a?(a.p(u,c),c&2&&_(a,1)):(a=Or(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(fe(),d(a,1,1,()=>{a=null}),ue());const m={};c&259&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),v(e,u),a&&a.d(u),v(o,u)}}}let bt="road_speeds";function Ku(r,e,n){let t=te.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",s=!1,f={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(u){s=u,n(1,s)}function a(u){o=u,n(0,o)}return[o,s,t,l,f,i,a]}class Zu extends X{constructor(e){super(),Y(this,e,Ku,Ju,G,{})}}function xu(r){let e;return{c(){e=k("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ec(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tc(r){let e,n,t,l,o,s,f,i,a;return f=new W({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[ec]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=I(),t=T("p"),t.textContent="Data valid as of 1 September, 2023",l=I(),o=T("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),i=k(".")},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),$(u,l,c),$(u,o,c),w(o,s),b(f,o,null),w(o,i),a=!0},p(u,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),f.$set(g)},i(u){a||(_(f.$$.fragment,u),a=!0)},o(u){d(f.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(l),p(o)),v(f)}}}function nc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[tc]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Tr(r){let e,n;return e=new Ye({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function rc(r){let e,n,t,l=r[4].average+"",o,s,f,i,a,u,c=r[4].minimum+"",g,m;return{c(){e=T("p"),n=k("Average width: "),t=T("b"),o=k(l),s=k(`
        meters`),f=I(),i=T("p"),a=k("Minimum width: "),u=T("b"),g=k(c),m=k(`
        meters`)},m(y,S){$(y,e,S),w(e,n),w(e,t),w(t,o),w(e,s),$(y,f,S),$(y,i,S),w(i,a),w(i,u),w(u,g),w(i,m)},p(y,S){S&16&&l!==(l=y[4].average+"")&&j(o,l),S&16&&c!==(c=y[4].minimum+"")&&j(g,c)},d(y){y&&(p(e),p(f),p(i))}}}function lc(r){let e,n;return e=new le({props:{$$slots:{default:[rc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function oc(r){let e,n;const t=[H(vt),{sourceLayer:vt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":be(["get","average"],r[2],r[1]),"line-width":Fe,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[lc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new ve({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&7?x(t,[s&0&&ne(H(vt)),s&0&&{sourceLayer:vt},t[2],t[3],s&6&&{paint:{"line-color":be(["get","average"],o[2],o[1]),"line-width":Fe,"line-opacity":K(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function sc(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:vt,$$slots:{right:[nc],default:[xu]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new re({props:i}),V.push(()=>Q(e,"checked",f));let a=r[0]&&Tr(r);return o=new de({props:{url:`pmtiles://${Zt()}/v1/${vt}.pmtiles`,$$slots:{default:[oc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=I(),a&&a.c(),l=I(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),b(o,u,c),s=!0},p(u,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],J(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=Tr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(fe(),d(a,1,1,()=>{a=null}),ue());const m={};c&33&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),v(e,u),a&&a.d(u),v(o,u)}}}let vt="road_widths";function ic(r,e,n){let t=te.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function s(f){o=f,n(0,o)}return[o,t,l,s]}class ac extends X{constructor(e){super(),Y(this,e,ic,sc,G,{})}}function fc(r){let e,n,t;return{c(){e=T("input"),z(e,"class","govuk-file-upload"),z(e,"id","load-criticals"),z(e,"type","file")},m(l,o){$(l,e,o),r[7](e),n||(t=at(e,"change",r[5]),n=!0)},p:ee,d(l){l&&p(e),r[7](null),n=!1,t()}}}function Ar(r){let e,n;return e=new et({props:{small:!0,$$slots:{default:[cc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function uc(r){let e,n,t=r[2].toLocaleString()+"",l,o,s;return e=new ye({props:{color:At}}),{c(){h(e.$$.fragment),n=k(`
        Show `),l=k(t),o=k(" issues")},m(f,i){b(e,f,i),$(f,n,i),$(f,l,i),$(f,o,i),s=!0},p(f,i){(!s||i&4)&&t!==(t=f[2].toLocaleString()+"")&&j(l,t)},i(f){s||(_(e.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l),p(o)),v(e,f)}}}function cc(r){let e,n,t;function l(s){r[8](s)}let o={id:"show-criticals",$$slots:{default:[uc]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new re({props:o}),V.push(()=>Q(e,"checked",l)),{c(){h(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f&2052&&(i.$$scope={dirty:f,ctx:s}),!n&&f&2&&(n=!0,i.checked=s[1],J(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function $c(r){let e,n,t,l,o,s;e=new Yr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[fc]},$$scope:{ctx:r}}}),t=new Kr({props:{errorMessage:r[3]}});let f=r[2]>0&&Ar(r);return{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment),l=I(),f&&f.c(),o=Ae()},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),$(i,l,a),f&&f.m(i,a),$(i,o,a),s=!0},p(i,a){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?f?(f.p(i,a),a&4&&_(f,1)):(f=Ar(i),f.c(),_(f,1),f.m(o.parentNode,o)):f&&(fe(),d(f,1,1,()=>{f=null}),ue())},i(i){s||(_(e.$$.fragment,i),_(t.$$.fragment,i),_(f),s=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(f),s=!1},d(i){i&&(p(n),p(l),p(o)),v(e,i),v(t,i),f&&f.d(i)}}}function pc(r){let e,n,t=r[10].critical_type+"",l,o,s,f,i,a=r[10].location_description+"",u,c,g,m,y,S=r[10].notes+"",L,C,D,E,F,A,M,N=r[10].id+"",O,P,B,q,R,U=(r[10].inspector??"???")+"",$e,Ie,ce,Qe=r[10].submission_time+"",me,pe,oe,tt,Te,Pe=r[10].scheme_reference+"",je,se,he,Re=r[10].current_design_stage+"",Je;return{c(){e=T("div"),n=T("h2"),l=k(t),o=I(),s=T("p"),f=T("u"),f.textContent="Location",i=k(`
          : `),u=k(a),c=I(),g=T("p"),m=T("u"),m.textContent="Notes",y=k(`
          : `),L=k(S),C=I(),D=T("hr"),E=I(),F=T("p"),A=k("Critical issue ID: "),M=T("b"),O=k(N),P=I(),B=T("p"),q=k("Submitted by "),R=T("b"),$e=k(U),Ie=k(`
          at
          `),ce=T("b"),me=k(Qe),pe=I(),oe=T("p"),tt=k("For scheme "),Te=T("b"),je=k(Pe),se=k(`
          in stage
          `),he=T("b"),Je=k(Re),we(e,"max-width","30vw")},m(ke,Se){$(ke,e,Se),w(e,n),w(n,l),w(e,o),w(e,s),w(s,f),w(s,i),w(s,u),w(e,c),w(e,g),w(g,m),w(g,y),w(g,L),w(e,C),w(e,D),w(e,E),w(e,F),w(F,A),w(F,M),w(M,O),w(e,P),w(e,B),w(B,q),w(B,R),w(R,$e),w(B,Ie),w(B,ce),w(ce,me),w(e,pe),w(e,oe),w(oe,tt),w(oe,Te),w(Te,je),w(oe,se),w(oe,he),w(he,Je)},p(ke,Se){Se&1024&&t!==(t=ke[10].critical_type+"")&&j(l,t),Se&1024&&a!==(a=ke[10].location_description+"")&&j(u,a),Se&1024&&S!==(S=ke[10].notes+"")&&j(L,S),Se&1024&&N!==(N=ke[10].id+"")&&j(O,N),Se&1024&&U!==(U=(ke[10].inspector??"???")+"")&&j($e,U),Se&1024&&Qe!==(Qe=ke[10].submission_time+"")&&j(me,Qe),Se&1024&&Pe!==(Pe=ke[10].scheme_reference+"")&&j(je,Pe),Se&1024&&Re!==(Re=ke[10].current_design_stage+"")&&j(Je,Re)},d(ke){ke&&p(e)}}}function mc(r){let e,n;return e=new le({props:{$$slots:{default:[pc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _c(r){let e,n,t,l,o,s;const f=[H(`${rt}-clusters`),{applyToClusters:!0},{paint:{"circle-color":At,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let m=0;m<f.length;m+=1)i=Z(i,f[m]);e=new xe({props:i}),e.$on("click",r[6]);const a=[H(`${rt}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let u={};for(let m=0;m<a.length;m+=1)u=Z(u,a[m]);t=new Jl({props:u});const c=[H(`${rt}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":At,"circle-opacity":K(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let g={$$slots:{default:[mc]},$$scope:{ctx:r}};for(let m=0;m<c.length;m+=1)g=Z(g,c[m]);return o=new xe({props:g}),{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment),l=I(),h(o.$$.fragment)},m(m,y){b(e,m,y),$(m,n,y),b(t,m,y),$(m,l,y),b(o,m,y),s=!0},p(m,y){const S=y&2?x(f,[y&0&&ne(H(`${rt}-clusters`)),f[1],y&0&&{paint:{"circle-color":At,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:m[1]?"visible":"none"}},f[4]]):{};e.$set(S);const L=y&2?x(a,[y&0&&ne(H(`${rt}-counts`)),a[1],y&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:m[1]?"visible":"none"}}]):{};t.$set(L);const C=y&2?x(c,[y&0&&ne(H(`${rt}-points`)),c[1],c[2],c[3],y&0&&{paint:{"circle-color":At,"circle-opacity":K(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:m[1]?"visible":"none"}}]):{};y&2048&&(C.$$scope={dirty:y,ctx:m}),o.$set(C)},i(m){s||(_(e.$$.fragment,m),_(t.$$.fragment,m),_(o.$$.fragment,m),s=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(o.$$.fragment,m),s=!1},d(m){m&&(p(n),p(l)),v(e,m),v(t,m),v(o,m)}}}function gc(r){let e,n,t,l;return e=new De({props:{label:"Critical Issues",$$slots:{default:[$c]},$$scope:{ctx:r}}}),t=new Ot({props:{id:rt,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[_c]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),l=!0},p(o,[s]){const f={};s&2063&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}let rt="criticals",At="red";function dc(r,e,n){let t;ge(r,gn,m=>n(9,t=m));let l,o=!0,s=0,f="",i=wl();async function a(m){try{n(4,i=await ii(l.files[0])),n(2,s=i.features.length),n(3,f="")}catch(y){n(3,f=`The file you loaded is broken: ${y}`)}}function u(m){t.getSource(rt).getClusterExpansionZoom(m.detail.features[0].properties.cluster_id,(y,S)=>{y||t.easeTo({center:m.detail.features[0].geometry.coordinates,zoom:S})})}function c(m){V[m?"unshift":"push"](()=>{l=m,n(0,l)})}function g(m){o=m,n(1,o)}return[l,o,s,f,i,a,u,c,g]}class hc extends X{constructor(e){super(),Y(this,e,dc,gc,G,{})}}function bc(r){let e,n,t;return e=new ye({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Crossings`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function vc(r){let e;return{c(){e=k("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wc(r){let e,n,t,l,o,s,f;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[vc]},$$scope:{ctx:r}}}),s=new ot({}),{c(){e=T("p"),n=k("This shows "),h(t.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),o=I(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,l),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function kc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[wc]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function yc(r){let e,n=Lr(r[3])+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=Lr(l[3])+"")&&j(t,n)},d(l){l&&p(e)}}}function Sc(r){let e,n;return e=new le({props:{$$slots:{default:[yc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Cc(r){let e,n;const t=[H(wt),{sourceLayer:wt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Sc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new xe({props:l}),e.$on("click",Tc),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&3?x(t,[s&0&&ne(H(wt)),s&0&&{sourceLayer:wt},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Oc(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:wt,$$slots:{right:[kc],default:[bc]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new re({props:f}),V.push(()=>Q(e,"checked",s)),l=new de({props:{url:`pmtiles://${_e()}/v1/${wt}.pmtiles`,$$slots:{default:[Cc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=I(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],J(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let wt="crossings";function Lr(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function Tc(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Ac(r,e,n){let t=te.crossings,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Lc extends X{constructor(e){super(),Y(this,e,Ac,Oc,G,{})}}function Ic(r){let e,n,t;return e=new ye({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Cycle parking`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Pc(r){let e;return{c(){e=k("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mc(r){let e,n,t,l,o,s,f;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Pc]},$$scope:{ctx:r}}}),s=new ot({}),{c(){e=T("p"),n=k("Cycle parking, according to "),h(t.$$.fragment),l=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=I(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,l),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Nc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Mc]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Dc(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=T("p"),n=k("Capacity: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=(s[3].capacity??"unknown")+"")&&j(o,l)},d(s){s&&p(e)}}}function Ec(r){let e,n;return e=new le({props:{$$slots:{default:[Dc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Fc(r){let e,n;const t=[H(kt),{sourceLayer:kt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Ec]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new xe({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&3?x(t,[s&0&&ne(H(kt)),s&0&&{sourceLayer:kt},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function jc(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:kt,$$slots:{right:[Nc],default:[Ic]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new re({props:f}),V.push(()=>Q(e,"checked",s)),l=new de({props:{url:`pmtiles://${_e()}/v1/${kt}.pmtiles`,$$slots:{default:[Fc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=I(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],J(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let kt="cycle_parking";function Rc(r,e,n){let t=te.cycle_parking,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Bc extends X{constructor(e){super(),Y(this,e,Rc,jc,G,{})}}function Hc(r){let e,n,t,l;return e=new ye({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=I(),t=k(r[2])},m(o,s){b(e,o,s),$(o,n,s),$(o,t,s),l=!0},p(o,s){(!l||s&4)&&j(t,o[2])},i(o){l||(_(e.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),l=!1},d(o){o&&(p(n),p(t)),v(e,o)}}}function zc(r){let e;const n=r[5].default,t=jt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&Rt(t,n,l,l[7],e?Ht(n,l[7],o,null):Bt(l[7]),null)},i(l){e||(_(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function Gc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[zc]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Uc(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),w(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&j(t,n)},d(l){l&&p(e)}}}function qc(r){let e,n;return e=new le({props:{$$slots:{default:[Uc,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wc(r){let e,n;const t=[H(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":K(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[qc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new Xe({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&25?x(t,[s&1&&ne(H(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":K(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Vc(r){let e,n,t,l,o;function s(i){r[6](i)}let f={id:r[0],$$slots:{right:[Gc],default:[Hc]},$$scope:{ctx:r}};return r[3]!==void 0&&(f.checked=r[3]),e=new re({props:f}),V.push(()=>Q(e,"checked",s)),l=new de({props:{url:`pmtiles://${_e()}/v1/${r[0]}.pmtiles`,$$slots:{default:[Wc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=I(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&1&&(u.id=i[0]),a&132&&(u.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,u.checked=i[3],J(()=>n=!1)),e.$set(u);const c={};a&1&&(c.url=`pmtiles://${_e()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}function Xc(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:f}=e,i=te[o],a=!1;function u(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,f=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,s,f,a,i,t,u,l]}class vn extends X{constructor(e){super(),Y(this,e,Xc,Vc,G,{name:0,singularNoun:1,pluralNoun:2})}}function Yc(r){let e;return{c(){e=k("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qc(r){let e,n,t,l,o,s,f;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Yc]},$$scope:{ctx:r}}}),s=new ot({}),{c(){e=T("p"),n=k("This shows "),h(t.$$.fragment),l=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=I(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,l),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&1&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Jc(r){let e,n;return e=new vn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Qc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Kc extends X{constructor(e){super(),Y(this,e,null,Jc,G,{})}}function Zc(r){let e,n,t;return e=new ye({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Railway Stations`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function xc(r){let e;return{c(){e=k("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function e$(r){let e,n,t,l,o,s,f;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[xc]},$$scope:{ctx:r}}}),s=new ot({}),{c(){e=T("p"),n=k("This shows "),h(t.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),o=I(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,l),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function t$(r){let e,n,t;return n=new ae({props:{$$slots:{default:[e$]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function n$(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&j(t,n)},d(l){l&&p(e)}}}function r$(r){let e,n;return e=new le({props:{$$slots:{default:[n$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function l$(r){let e,n;const t=[H(Jt),{paint:{"circle-color":r[1],"circle-radius":Yt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[r$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new xe({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&3?x(t,[s&0&&ne(H(Jt)),s&2&&{paint:{"circle-color":o[1],"circle-radius":Yt/2}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function o$(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:Jt,$$slots:{right:[t$],default:[Zc]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new re({props:f}),V.push(()=>Q(e,"checked",s)),l=new Ot({props:{data:`${_e()}/v1/${Jt}.geojson`,$$slots:{default:[l$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=I(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],J(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let Jt="railway_stations";function s$(r,e,n){let t=te.railway_stations,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class i$ extends X{constructor(e){super(),Y(this,e,s$,o$,G,{})}}function a$(r){let e;return{c(){e=k("primary and secondary schools")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function f$(r){let e,n,t,l,o,s,f;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[a$]},$$scope:{ctx:r}}}),s=new ot({}),{c(){e=T("p"),n=k("This shows "),h(t.$$.fragment),l=k(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=I(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,l),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&1&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function u$(r){let e,n;return e=new vn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[f$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class c$ extends X{constructor(e){super(),Y(this,e,null,u$,G,{})}}function $$(r){let e;return{c(){e=k("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function p$(r){let e;return{c(){e=k("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function m$(r){let e,n,t,l,o,s,f,i,a;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[$$]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[p$]},$$scope:{ctx:r}}}),i=new ot({}),{c(){e=T("p"),n=k("This shows "),h(t.$$.fragment),l=k(" and "),h(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),f=I(),h(i.$$.fragment)},m(u,c){$(u,e,c),w(e,n),b(t,e,null),w(e,l),b(o,e,null),w(e,s),$(u,f,c),b(i,u,c),a=!0},p(u,c){const g={};c&1&&(g.$$scope={dirty:c,ctx:u}),t.$set(g);const m={};c&1&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){a||(_(t.$$.fragment,u),_(o.$$.fragment,u),_(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),v(t),v(o),v(i,u)}}}function _$(r){let e,n;return e=new vn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[m$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class g$ extends X{constructor(e){super(),Y(this,e,null,_$,G,{})}}function d$(r){let e;return{c(){e=k("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function h$(r){let e;return{c(){e=k("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function b$(r){let e;return{c(){e=k("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function v$(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y,S,L,C,D,E,F,A,M,N;return t=new W({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[h$]},$$scope:{ctx:r}}}),C=new W({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[b$]},$$scope:{ctx:r}}}),M=new Le({}),{c(){e=T("p"),n=k("This layer shows collisions recorded in the "),h(t.$$.fragment),l=k(" dataset. Please note these limitations:"),o=I(),s=T("ul"),f=T("li"),f.textContent="Only collisions between 2017 and 2022 are included",i=I(),a=T("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,u=I(),c=T("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,g=I(),m=T("li"),m.textContent='The "pedestrians" category also include mobility scooters',y=I(),S=T("li"),L=k("All limitations "),h(C.$$.fragment),D=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),E=I(),F=T("p"),F.textContent="You can click a point to open the full report, thanks to CycleStreets.",A=I(),h(M.$$.fragment)},m(O,P){$(O,e,P),w(e,n),b(t,e,null),w(e,l),$(O,o,P),$(O,s,P),w(s,f),w(s,i),w(s,a),w(s,u),w(s,c),w(s,g),w(s,m),w(s,y),w(s,S),w(S,L),b(C,S,null),w(S,D),$(O,E,P),$(O,F,P),$(O,A,P),b(M,O,P),N=!0},p(O,P){const B={};P&16777216&&(B.$$scope={dirty:P,ctx:O}),t.$set(B);const q={};P&16777216&&(q.$$scope={dirty:P,ctx:O}),C.$set(q)},i(O){N||(_(t.$$.fragment,O),_(C.$$.fragment,O),_(M.$$.fragment,O),N=!0)},o(O){d(t.$$.fragment,O),d(C.$$.fragment,O),d(M.$$.fragment,O),N=!1},d(O){O&&(p(e),p(o),p(s),p(E),p(F),p(A)),v(t),v(C),v(M,O)}}}function w$(r){let e,n,t;return n=new ae({props:{$$slots:{default:[v$]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Ir(r){let e,n,t,l,o,s,f,i,a,u,c,g,m;return n=new et({props:{small:!0,$$slots:{default:[O$]},$$scope:{ctx:r}}}),u=new Zr({props:{rows:r[14]}}),{c(){e=T("div"),h(n.$$.fragment),t=I(),l=T("div"),o=k(`Filter years:
      `),s=T("input"),f=k(`
      -
      `),i=T("input"),a=I(),h(u.$$.fragment),z(s,"type","number"),z(s,"min",2017),z(s,"max",2022),z(s,"class","svelte-1ft65rw"),z(i,"type","number"),z(i,"min",2017),z(i,"max",2022),z(i,"class","svelte-1ft65rw"),we(e,"border","1px solid black"),we(e,"padding","8px")},m(y,S){$(y,e,S),b(n,e,null),w(e,t),w(e,l),w(l,o),w(l,s),lt(s,r[4]),w(l,f),w(l,i),lt(i,r[5]),w(e,a),b(u,e,null),c=!0,g||(m=[at(s,"input",r[20]),at(i,"input",r[21])],g=!0)},p(y,S){const L={};S&16777231&&(L.$$scope={dirty:S,ctx:y}),n.$set(L),S&16&&Mt(s.value)!==y[4]&&lt(s,y[4]),S&32&&Mt(i.value)!==y[5]&&lt(i,y[5])},i(y){c||(_(n.$$.fragment,y),_(u.$$.fragment,y),c=!0)},o(y){d(n.$$.fragment,y),d(u.$$.fragment,y),c=!1},d(y){y&&p(e),v(n),v(u),g=!1,Qr(m)}}}function k$(r){let e;return{c(){e=k("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function y$(r){let e;return{c(){e=k("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function S$(r){let e;return{c(){e=k("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function C$(r){let e;return{c(){e=k("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function O$(r){let e,n,t,l,o,s,f,i,a,u,c,g;function m(A){r[16](A)}let y={id:"stats19-pedestrians",$$slots:{default:[k$]},$$scope:{ctx:r}};r[0]!==void 0&&(y.checked=r[0]),e=new re({props:y}),V.push(()=>Q(e,"checked",m));function S(A){r[17](A)}let L={id:"stats19-cyclists",$$slots:{default:[y$]},$$scope:{ctx:r}};r[1]!==void 0&&(L.checked=r[1]),l=new re({props:L}),V.push(()=>Q(l,"checked",S));function C(A){r[18](A)}let D={id:"stats19-horse-riders",$$slots:{default:[S$]},$$scope:{ctx:r}};r[2]!==void 0&&(D.checked=r[2]),f=new re({props:D}),V.push(()=>Q(f,"checked",C));function E(A){r[19](A)}let F={id:"stats19-other",$$slots:{default:[C$]},$$scope:{ctx:r}};return r[3]!==void 0&&(F.checked=r[3]),u=new re({props:F}),V.push(()=>Q(u,"checked",E)),{c(){h(e.$$.fragment),t=I(),h(l.$$.fragment),s=I(),h(f.$$.fragment),a=I(),h(u.$$.fragment)},m(A,M){b(e,A,M),$(A,t,M),b(l,A,M),$(A,s,M),b(f,A,M),$(A,a,M),b(u,A,M),g=!0},p(A,M){const N={};M&16777216&&(N.$$scope={dirty:M,ctx:A}),!n&&M&1&&(n=!0,N.checked=A[0],J(()=>n=!1)),e.$set(N);const O={};M&16777216&&(O.$$scope={dirty:M,ctx:A}),!o&&M&2&&(o=!0,O.checked=A[1],J(()=>o=!1)),l.$set(O);const P={};M&16777216&&(P.$$scope={dirty:M,ctx:A}),!i&&M&4&&(i=!0,P.checked=A[2],J(()=>i=!1)),f.$set(P);const B={};M&16777216&&(B.$$scope={dirty:M,ctx:A}),!c&&M&8&&(c=!0,B.checked=A[3],J(()=>c=!1)),u.$set(B)},i(A){g||(_(e.$$.fragment,A),_(l.$$.fragment,A),_(f.$$.fragment,A),_(u.$$.fragment,A),g=!0)},o(A){d(e.$$.fragment,A),d(l.$$.fragment,A),d(f.$$.fragment,A),d(u.$$.fragment,A),g=!1},d(A){A&&(p(t),p(s),p(a)),v(e,A),v(l,A),v(f,A),v(u,A)}}}function Pr(r){let e,n,t,l=r[8][r[23].pedestrian_location]+"",o;return{c(){e=T("p"),n=k("Pedestrian location: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8388608&&l!==(l=s[8][s[23].pedestrian_location]+"")&&j(o,l)},d(s){s&&p(e)}}}function Mr(r){let e,n,t,l=r[9][r[23].pedestrian_movement]+"",o;return{c(){e=T("p"),n=k("Pedestrian movement: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8388608&&l!==(l=s[9][s[23].pedestrian_movement]+"")&&j(o,l)},d(s){s&&p(e)}}}function T$(r){let e,n,t,l=r[23].year+"",o,s,f,i,a,u=r[10][r[23].severity]+"",c,g,m,y,S,L=Nr(r[23])+"",C,D,E,F,A,M=r[23].pedestrian_location&&Pr(r),N=r[23].pedestrian_movement&&Mr(r);return{c(){e=T("p"),n=k("Year: "),t=T("b"),o=k(l),s=I(),f=T("p"),i=k("Severity: "),a=T("b"),c=k(u),g=I(),m=T("p"),y=k("Casualties: "),S=T("b"),C=k(L),D=I(),M&&M.c(),E=I(),N&&N.c(),F=I(),A=T("p"),A.textContent="Click to open full report in CycleStreets"},m(O,P){$(O,e,P),w(e,n),w(e,t),w(t,o),$(O,s,P),$(O,f,P),w(f,i),w(f,a),w(a,c),$(O,g,P),$(O,m,P),w(m,y),w(m,S),w(S,C),$(O,D,P),M&&M.m(O,P),$(O,E,P),N&&N.m(O,P),$(O,F,P),$(O,A,P)},p(O,P){P&8388608&&l!==(l=O[23].year+"")&&j(o,l),P&8388608&&u!==(u=O[10][O[23].severity]+"")&&j(c,u),P&8388608&&L!==(L=Nr(O[23])+"")&&j(C,L),O[23].pedestrian_location?M?M.p(O,P):(M=Pr(O),M.c(),M.m(E.parentNode,E)):M&&(M.d(1),M=null),O[23].pedestrian_movement?N?N.p(O,P):(N=Mr(O),N.c(),N.m(F.parentNode,F)):N&&(N.d(1),N=null)},d(O){O&&(p(e),p(s),p(f),p(g),p(m),p(D),p(E),p(F),p(A)),M&&M.d(O),N&&N.d(O)}}}function A$(r){let e,n;return e=new le({props:{$$slots:{default:[T$,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&25165824&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function L$(r){let e,n;const t=[H(yt),{sourceLayer:yt},{paint:{"circle-color":be(["get","severity"],[1,2,3],[r[11],r[12],r[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:r[7]},{layout:{visibility:r[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[A$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new xe({props:l}),e.$on("click",P$),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&14528?x(t,[s&0&&ne(H(yt)),s&0&&{sourceLayer:yt},s&14336&&{paint:{"circle-color":be(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function I$(r){let e,n,t,l,o,s;function f(u){r[15](u)}let i={id:yt,$$slots:{right:[w$],default:[d$]},$$scope:{ctx:r}};r[6]!==void 0&&(i.checked=r[6]),e=new re({props:i}),V.push(()=>Q(e,"checked",f));let a=r[6]&&Ir(r);return o=new de({props:{url:`pmtiles://${_e()}/v1/${yt}.pmtiles`,$$slots:{default:[L$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=I(),a&&a.c(),l=I(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),b(o,u,c),s=!0},p(u,[c]){const g={};c&16777216&&(g.$$scope={dirty:c,ctx:u}),!n&&c&64&&(n=!0,g.checked=u[6],J(()=>n=!1)),e.$set(g),u[6]?a?(a.p(u,c),c&64&&_(a,1)):(a=Ir(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(fe(),d(a,1,1,()=>{a=null}),ue());const m={};c&16777408&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),v(e,u),a&&a.d(u),v(o,u)}}}let yt="stats19";function Nr(r){let e=[];return r.pedestrian&&e.push("pedestrian"),r.cyclist&&e.push("cyclist"),r.horse_rider&&e.push("horse rider"),r.other&&e.push("other"),e.join(", ")}function P$(r){window.open(`https://www.cyclestreets.net/collisions/reports/${r.detail.features[0].properties.accident_index}`,"_blank")}function M$(r,e,n){let t,l=!1,o=!0,s=!0,f=!0,i=!1,a=2017,u=2022;function c(B,q,R,U,$e,Ie){let ce=["any"];return o&&ce.push(["get","pedestrian"]),s&&ce.push(["get","cyclist"]),f&&ce.push(["get","horse_rider"]),i&&ce.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],u],ce]}let g={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},m={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},y={1:"Fatal",2:"Serious",3:"Slight"},S=te.sequential_low_to_high[4],L=te.sequential_low_to_high[2],C=te.sequential_low_to_high[0],D=[["Fatal",S],["Serious",L],["Slight",C]];function E(B){l=B,n(6,l)}function F(B){o=B,n(0,o)}function A(B){s=B,n(1,s)}function M(B){f=B,n(2,f)}function N(B){i=B,n(3,i)}function O(){a=Mt(this.value),n(4,a)}function P(){u=Mt(this.value),n(5,u)}return r.$$.update=()=>{r.$$.dirty&63&&n(7,t=c())},[o,s,f,i,a,u,l,t,g,m,y,S,L,C,D,E,F,A,M,N,O,P]}class N$ extends X{constructor(e){super(),Y(this,e,M$,I$,G,{})}}function D$(r){let e;return{c(){e=k("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function E$(r){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function F$(r){let e;return{c(){e=k("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function j$(r){let e,n,t,l,o,s,f,i,a,u,c;return t=new W({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[E$]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[F$]},$$scope:{ctx:r}}}),u=new Le({}),{c(){e=T("p"),n=k("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),l=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),s=k(" for details and caveats about the measurements."),f=I(),i=T("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=I(),h(u.$$.fragment)},m(g,m){$(g,e,m),w(e,n),b(t,e,null),w(e,l),b(o,e,null),w(e,s),$(g,f,m),$(g,i,m),$(g,a,m),b(u,g,m),c=!0},p(g,m){const y={};m&64&&(y.$$scope={dirty:m,ctx:g}),t.$set(y);const S={};m&64&&(S.$$scope={dirty:m,ctx:g}),o.$set(S)},i(g){c||(_(t.$$.fragment,g),_(o.$$.fragment,g),_(u.$$.fragment,g),c=!0)},o(g){d(t.$$.fragment,g),d(o.$$.fragment,g),d(u.$$.fragment,g),c=!1},d(g){g&&(p(e),p(f),p(i),p(a)),v(t),v(o),v(u,g)}}}function R$(r){let e,n,t;return n=new ae({props:{$$slots:{default:[j$]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Dr(r){let e,n;return e=new Ye({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function B$(r){let e,n=r[5].location+"",t,l,o,s,f,i=r[5].motor_vehicles_2022.toLocaleString()+"",a,u,c,g,m,y=r[5].pedal_cycles_2022.toLocaleString()+"",S,L,C,D,E,F=r[5].method+"",A;return{c(){e=T("h2"),t=k(n),l=I(),o=T("p"),s=k("Total motor vehicles (2022 AADF): "),f=T("b"),a=k(i),u=I(),c=T("p"),g=k("Total pedal cycles (2022 AADF): "),m=T("b"),S=k(y),L=I(),C=T("p"),D=k("Count method: "),E=T("b"),A=k(F)},m(M,N){$(M,e,N),w(e,t),$(M,l,N),$(M,o,N),w(o,s),w(o,f),w(f,a),$(M,u,N),$(M,c,N),w(c,g),w(c,m),w(m,S),$(M,L,N),$(M,C,N),w(C,D),w(C,E),w(E,A)},p(M,N){N&32&&n!==(n=M[5].location+"")&&j(t,n),N&32&&i!==(i=M[5].motor_vehicles_2022.toLocaleString()+"")&&j(a,i),N&32&&y!==(y=M[5].pedal_cycles_2022.toLocaleString()+"")&&j(S,y),N&32&&F!==(F=M[5].method+"")&&j(A,F)},d(M){M&&(p(e),p(l),p(o),p(u),p(c),p(L),p(C))}}}function H$(r){let e,n;return e=new le({props:{$$slots:{default:[B$,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function z$(r){let e,n;const t=[H(St),{sourceLayer:St},{paint:{"circle-color":be(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[H$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new xe({props:l}),e.$on("click",U$),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&7?x(t,[s&0&&ne(H(St)),s&0&&{sourceLayer:St},s&6&&{paint:{"circle-color":be(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function G$(r){let e,n,t,l,o,s;function f(u){r[4](u)}let i={id:St,$$slots:{right:[R$],default:[D$]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new re({props:i}),V.push(()=>Q(e,"checked",f));let a=r[0]&&Dr(r);return o=new de({props:{url:`pmtiles://${_e()}/v1/${St}.pmtiles`,$$slots:{default:[z$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=I(),a&&a.c(),l=I(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),b(o,u,c),s=!0},p(u,[c]){const g={};c&64&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],J(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=Dr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(fe(),d(a,1,1,()=>{a=null}),ue());const m={};c&65&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),v(e,u),a&&a.d(u),v(o,u)}}}let St="vehicle_counts";function U$(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function q$(r,e,n){let t=te.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function f(i){s=i,n(0,s)}return[s,t,l,o,f]}class W$ extends X{constructor(e){super(),Y(this,e,q$,G$,G,{})}}function V$(r){let e,n,t,l,o,s,f,i;return e=new c$({}),t=new Kc({}),o=new g$({}),f=new i$({}),{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment),l=I(),h(o.$$.fragment),s=I(),h(f.$$.fragment)},m(a,u){b(e,a,u),$(a,n,u),b(t,a,u),$(a,l,u),b(o,a,u),$(a,s,u),b(f,a,u),i=!0},i(a){i||(_(e.$$.fragment,a),_(t.$$.fragment,a),_(o.$$.fragment,a),_(f.$$.fragment,a),i=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(o.$$.fragment,a),d(f.$$.fragment,a),i=!1},d(a){a&&(p(n),p(l),p(s)),v(e,a),v(t,a),v(o,a),v(f,a)}}}function X$(r){let e,n;return e=new et({props:{small:!0,$$slots:{default:[V$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Y$(r){let e,n,t,l,o,s,f,i,a,u,c,g;return e=new Kf({}),t=new du({}),o=new iu({}),f=new Rf({}),a=new Bc({}),c=new Lc({}),{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment),l=I(),h(o.$$.fragment),s=I(),h(f.$$.fragment),i=I(),h(a.$$.fragment),u=I(),h(c.$$.fragment)},m(m,y){b(e,m,y),$(m,n,y),b(t,m,y),$(m,l,y),b(o,m,y),$(m,s,y),b(f,m,y),$(m,i,y),b(a,m,y),$(m,u,y),b(c,m,y),g=!0},i(m){g||(_(e.$$.fragment,m),_(t.$$.fragment,m),_(o.$$.fragment,m),_(f.$$.fragment,m),_(a.$$.fragment,m),_(c.$$.fragment,m),g=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(o.$$.fragment,m),d(f.$$.fragment,m),d(a.$$.fragment,m),d(c.$$.fragment,m),g=!1},d(m){m&&(p(n),p(l),p(s),p(i),p(u)),v(e,m),v(t,m),v(o,m),v(f,m),v(a,m),v(c,m)}}}function Q$(r){let e,n;return e=new et({props:{small:!0,$$slots:{default:[Y$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function J$(r){let e,n,t,l,o,s,f,i,a,u;return e=new ef({}),t=new Sf({}),o=new ia({}),f=new La({}),a=new Ua({}),{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment),l=I(),h(o.$$.fragment),s=I(),h(f.$$.fragment),i=I(),h(a.$$.fragment)},m(c,g){b(e,c,g),$(c,n,g),b(t,c,g),$(c,l,g),b(o,c,g),$(c,s,g),b(f,c,g),$(c,i,g),b(a,c,g),u=!0},i(c){u||(_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(f.$$.fragment,c),d(a.$$.fragment,c),u=!1},d(c){c&&(p(n),p(l),p(s),p(i)),v(e,c),v(t,c),v(o,c),v(f,c),v(a,c)}}}function K$(r){let e,n;return e=new et({props:{small:!0,$$slots:{default:[J$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Z$(r){let e,n,t,l;return e=new Ji({}),t=new ha({}),{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),l=!0},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function x$(r){let e,n;return e=new et({props:{small:!0,$$slots:{default:[Z$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ep(r){let e,n,t,l,o,s;return e=new ac({}),t=new Tu({}),o=new Zu({}),{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment),l=I(),h(o.$$.fragment)},m(f,i){b(e,f,i),$(f,n,i),b(t,f,i),$(f,l,i),b(o,f,i),s=!0},i(f){s||(_(e.$$.fragment,f),_(t.$$.fragment,f),_(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),d(o.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l)),v(e,f),v(t,f),v(o,f)}}}function tp(r){let e,n,t,l,o,s,f=_n()=="Private (development)",i,a,u;e=new W$({}),t=new N$({}),o=new zu({});let c=f&&ep();return a=new pf({}),{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment),l=I(),h(o.$$.fragment),s=I(),c&&c.c(),i=I(),h(a.$$.fragment)},m(g,m){b(e,g,m),$(g,n,m),b(t,g,m),$(g,l,m),b(o,g,m),$(g,s,m),c&&c.m(g,m),$(g,i,m),b(a,g,m),u=!0},p:ee,i(g){u||(_(e.$$.fragment,g),_(t.$$.fragment,g),_(o.$$.fragment,g),_(c),_(a.$$.fragment,g),u=!0)},o(g){d(e.$$.fragment,g),d(t.$$.fragment,g),d(o.$$.fragment,g),d(c),d(a.$$.fragment,g),u=!1},d(g){g&&(p(n),p(l),p(s),p(i)),v(e,g),v(t,g),v(o,g),c&&c.d(g),v(a,g)}}}function np(r){let e,n;return e=new et({props:{small:!0,$$slots:{default:[tp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function rp(r){let e,n,t,l,o;function s(i){r[3](i)}let f={};return r[0]!==void 0&&(f.enabled=r[0]),e=new Al({props:f}),V.push(()=>Q(e,"enabled",s)),l=new Dl({}),{c(){h(e.$$.fragment),t=I(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,a){const u={};!n&&a&1&&(n=!0,u.enabled=i[0],J(()=>n=!1)),e.$set(u)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}function lp(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y,S,L;return e=new hc({}),t=new De({props:{label:"Trip generators",$$slots:{default:[X$]},$$scope:{ctx:r}}}),o=new De({props:{label:"Existing infrastructure",$$slots:{default:[Q$]},$$scope:{ctx:r}}}),f=new De({props:{label:"Boundaries",$$slots:{default:[K$]},$$scope:{ctx:r}}}),a=new De({props:{label:"Census",$$slots:{default:[x$]},$$scope:{ctx:r}}}),c=new De({props:{label:"Other",$$slots:{default:[np]},$$scope:{ctx:r}}}),m=new De({props:{label:"Tools",$$slots:{default:[rp]},$$scope:{ctx:r}}}),S=new Tl({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment),l=I(),h(o.$$.fragment),s=I(),h(f.$$.fragment),i=I(),h(a.$$.fragment),u=I(),h(c.$$.fragment),g=I(),h(m.$$.fragment),y=I(),h(S.$$.fragment)},m(C,D){b(e,C,D),$(C,n,D),b(t,C,D),$(C,l,D),b(o,C,D),$(C,s,D),b(f,C,D),$(C,i,D),b(a,C,D),$(C,u,D),b(c,C,D),$(C,g,D),b(m,C,D),$(C,y,D),b(S,C,D),L=!0},p(C,D){const E={};D&16&&(E.$$scope={dirty:D,ctx:C}),t.$set(E);const F={};D&16&&(F.$$scope={dirty:D,ctx:C}),o.$set(F);const A={};D&16&&(A.$$scope={dirty:D,ctx:C}),f.$set(A);const M={};D&16&&(M.$$scope={dirty:D,ctx:C}),a.$set(M);const N={};D&16&&(N.$$scope={dirty:D,ctx:C}),c.$set(N);const O={};D&17&&(O.$$scope={dirty:D,ctx:C}),m.$set(O);const P={};D&2&&(P.disabled=!C[1]),S.$set(P)},i(C){L||(_(e.$$.fragment,C),_(t.$$.fragment,C),_(o.$$.fragment,C),_(f.$$.fragment,C),_(a.$$.fragment,C),_(c.$$.fragment,C),_(m.$$.fragment,C),_(S.$$.fragment,C),L=!0)},o(C){d(e.$$.fragment,C),d(t.$$.fragment,C),d(o.$$.fragment,C),d(f.$$.fragment,C),d(a.$$.fragment,C),d(c.$$.fragment,C),d(m.$$.fragment,C),d(S.$$.fragment,C),L=!1},d(C){C&&(p(n),p(l),p(s),p(i),p(u),p(g),p(y)),v(e,C),v(t,C),v(o,C),v(f,C),v(a,C),v(c,C),v(m,C),v(S,C)}}}function op(r){let e,n;const t=[H("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:r[1]?"none":"visible"}}];let l={};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new Xe({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&2?x(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function sp(r){let e,n,t,l;return e=new De({props:{label:"Layers",open:!0,$$slots:{default:[lp]},$$scope:{ctx:r}}}),t=new Ot({props:{data:r[2],$$slots:{default:[op]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),l=!0},p(o,[s]){const f={};s&19&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function ip(r,e,n){let t,l;ge(r,Kn,f=>n(1,l=f));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(f){t=f,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&Kn.set(!t)},[t,l,o,s]}class ap extends X{constructor(e){super(),Y(this,e,ip,sp,G,{})}}function fp(r,e,n){let{loadFile:t}=e;return dn(async()=>{let o=await(await fetch(`${Zt()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class up extends X{constructor(e){super(),Y(this,e,fp,null,G,{loadFile:0})}}function Er(r){var o;let e,n,t=((o=r[0].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=T("p"),n=k("Current milestone: "),l=k(t)},m(s,f){$(s,e,f),w(e,n),w(e,l)},p(s,f){var i;f&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&j(l,t)},d(s){s&&p(e)}}}function cp(r){let e;return{c(){e=k("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $p(r){let e;return{c(){e=k("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pp(r){let e,n,t,l;return e=new sn({props:{$$slots:{default:[cp]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new sn({props:{$$slots:{default:[$p]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),l=!0},p(o,s){const f={};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function mp(r){var F,A,M,N;let e,n,t=((F=r[0].browse)==null?void 0:F.authority_or_region)+"",l,o,s,f,i=((A=r[0].browse)==null?void 0:A.capital_scheme_id)+"",a,u,c,g,m=((M=r[0].browse)==null?void 0:M.funding_programme)+"",y,S,L,C,D,E=((N=r[0].browse)==null?void 0:N.current_milestone)&&Er(r);return C=new Ll({props:{$$slots:{default:[pp]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("Authority or region: "),l=k(t),o=I(),s=T("p"),f=k("Capital scheme ID: "),a=k(i),u=I(),c=T("p"),g=k("Funding programme: "),y=k(m),S=I(),E&&E.c(),L=I(),h(C.$$.fragment)},m(O,P){$(O,e,P),w(e,n),w(e,l),$(O,o,P),$(O,s,P),w(s,f),w(s,a),$(O,u,P),$(O,c,P),w(c,g),w(c,y),$(O,S,P),E&&E.m(O,P),$(O,L,P),b(C,O,P),D=!0},p(O,P){var q,R,U,$e;(!D||P&1)&&t!==(t=((q=O[0].browse)==null?void 0:q.authority_or_region)+"")&&j(l,t),(!D||P&1)&&i!==(i=((R=O[0].browse)==null?void 0:R.capital_scheme_id)+"")&&j(a,i),(!D||P&1)&&m!==(m=((U=O[0].browse)==null?void 0:U.funding_programme)+"")&&j(y,m),($e=O[0].browse)!=null&&$e.current_milestone?E?E.p(O,P):(E=Er(O),E.c(),E.m(L.parentNode,L)):E&&(E.d(1),E=null);const B={};P&32&&(B.$$scope={dirty:P,ctx:O}),C.$set(B)},i(O){D||(_(C.$$.fragment,O),D=!0)},o(O){d(C.$$.fragment,O),D=!1},d(O){O&&(p(e),p(o),p(s),p(u),p(c),p(S),p(L)),E&&E.d(O),v(C,O)}}}function _p(r){var t;let e,n;return e=new De({props:{label:`${r[0].scheme_reference}: ${(t=r[0].browse)==null?void 0:t.num_features} features`,$$slots:{default:[mp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),n=!0},p(l,[o]){var f;const s={};o&1&&(s.label=`${l[0].scheme_reference}: ${(f=l[0].browse)==null?void 0:f.num_features} features`),o&33&&(s.$$scope={dirty:o,ctx:l}),e.$set(s)},i(l){n||(_(e.$$.fragment,l),n=!0)},o(l){d(e.$$.fragment,l),n=!1},d(l){v(e,l)}}}function gp(r,e,n){let t,l;ge(r,Ct,i=>n(3,t=i)),ge(r,gn,i=>n(4,l=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};l==null||l.fitBounds(kl(i),{padding:20,animate:!1})}function f(){var u,c;let i={type:"FeatureCollection",features:t.features.filter(g=>g.properties.scheme_reference==o.scheme_reference)},a=((u=o.browse)==null?void 0:u.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return r.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,f]}class dp extends X{constructor(e){super(),Y(this,e,gp,_p,G,{scheme:0})}}function Fr(r){let e,n,t=Sn(r[0].length_meters)+"",l;return{c(){e=T("p"),n=k("Length: "),l=k(t)},m(o,s){$(o,e,s),w(e,n),w(e,l)},p(o,s){s&1&&t!==(t=Sn(o[0].length_meters)+"")&&j(l,t)},d(o){o&&p(e)}}}function jr(r){let e,n=r[2](r[0].description)+"";return{c(){e=T("p")},m(t,l){$(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[2](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Rr(r){var o;let e,n,t=((o=r[1].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=T("p"),n=k("Current milestone: "),l=k(t)},m(s,f){$(s,e,f),w(e,n),w(e,l)},p(s,f){var i;f&2&&t!==(t=((i=s[1].browse)==null?void 0:i.current_milestone)+"")&&j(l,t)},d(s){s&&p(e)}}}function hp(r){var tt,Te,Pe,je;let e,n,t,l=r[2](r[0].name)+"",o,s=r[0].intervention_type+"",f,i,a,u,c,g,m,y,S,L=r[0].scheme_reference+"",C,D,E,F,A=((tt=r[1].browse)==null?void 0:tt.authority_or_region)+"",M,N,O,P,B=((Te=r[1].browse)==null?void 0:Te.capital_scheme_id)+"",q,R,U,$e,Ie=((Pe=r[1].browse)==null?void 0:Pe.funding_programme)+"",ce,Qe,me=r[0].length_meters&&Fr(r),pe=r[0].description&&jr(r),oe=((je=r[1].browse)==null?void 0:je.current_milestone)&&Rr(r);return{c(){e=T("div"),n=T("h2"),t=new hn(!1),o=k(" ("),f=k(s),i=k(")"),a=I(),me&&me.c(),u=I(),pe&&pe.c(),c=I(),g=T("hr"),m=I(),y=T("p"),S=k("Part of scheme: "),C=k(L),D=I(),E=T("p"),F=k("Authority or region: "),M=k(A),N=I(),O=T("p"),P=k("Capital scheme ID: "),q=k(B),R=I(),U=T("p"),$e=k("Funding programme: "),ce=k(Ie),Qe=I(),oe&&oe.c(),t.a=o,we(e,"max-width","30vw")},m(se,he){$(se,e,he),w(e,n),t.m(l,n),w(n,o),w(n,f),w(n,i),w(e,a),me&&me.m(e,null),w(e,u),pe&&pe.m(e,null),w(e,c),w(e,g),w(e,m),w(e,y),w(y,S),w(y,C),w(e,D),w(e,E),w(E,F),w(E,M),w(e,N),w(e,O),w(O,P),w(O,q),w(e,R),w(e,U),w(U,$e),w(U,ce),w(e,Qe),oe&&oe.m(e,null)},p(se,[he]){var Re,Je,ke,Se;he&1&&l!==(l=se[2](se[0].name)+"")&&t.p(l),he&1&&s!==(s=se[0].intervention_type+"")&&j(f,s),se[0].length_meters?me?me.p(se,he):(me=Fr(se),me.c(),me.m(e,u)):me&&(me.d(1),me=null),se[0].description?pe?pe.p(se,he):(pe=jr(se),pe.c(),pe.m(e,c)):pe&&(pe.d(1),pe=null),he&1&&L!==(L=se[0].scheme_reference+"")&&j(C,L),he&2&&A!==(A=((Re=se[1].browse)==null?void 0:Re.authority_or_region)+"")&&j(M,A),he&2&&B!==(B=((Je=se[1].browse)==null?void 0:Je.capital_scheme_id)+"")&&j(q,B),he&2&&Ie!==(Ie=((ke=se[1].browse)==null?void 0:ke.funding_programme)+"")&&j(ce,Ie),(Se=se[1].browse)!=null&&Se.current_milestone?oe?oe.p(se,he):(oe=Rr(se),oe.c(),oe.m(e,null)):oe&&(oe.d(1),oe=null)},i:ee,o:ee,d(se){se&&p(e),me&&me.d(),pe&&pe.d(),oe&&oe.d()}}}function bp(r,e,n){let t,l,o;ge(r,Vt,i=>n(4,l=i)),ge(r,Ft,i=>n(3,o=i));let{props:s}=e;function f(i){return l?i.replace(new RegExp(l,"gi"),a=>`<mark>${a}</mark>`):i}return r.$$set=i=>{"props"in i&&n(0,s=i.props)},r.$$.update=()=>{r.$$.dirty&9&&n(1,t=o.get(s.scheme_reference))},[s,t,f,o]}class wn extends X{constructor(e){super(),Y(this,e,bp,hp,G,{props:0})}}function vp(r){let e,n=r[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),w(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&j(t,n)},d(l){l&&p(e)}}}function wp(r){let e,n;return e=new wn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function kp(r){let e,n,t,l;return e=new le({props:{popupClass:"border-popup",$$slots:{default:[vp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new le({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[wp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function yp(r){let e,n=r[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),w(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&j(t,n)},d(l){l&&p(e)}}}function Sp(r){let e,n;return e=new wn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Cp(r){let e,n,t,l;return e=new le({props:{popupClass:"border-popup",$$slots:{default:[yp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new le({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Sp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Op(r){let e,n=r[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),w(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&j(t,n)},d(l){l&&p(e)}}}function Tp(r){let e,n;return e=new wn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ap(r){let e,n,t,l;return e=new le({props:{popupClass:"border-popup",$$slots:{default:[Op,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new le({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Tp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Lp(r){let e,n,t,l,o,s,f,i,a,u;const c=[H("interventions-points"),{filter:["all",Cn,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":Yt,"circle-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let g={$$slots:{default:[kp]},$$scope:{ctx:r}};for(let A=0;A<c.length;A+=1)g=Z(g,c[A]);e=new xe({props:g});const m=[H("interventions-lines"),{filter:["all",On,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":Tt,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[Cp]},$$scope:{ctx:r}};for(let A=0;A<m.length;A+=1)y=Z(y,m[A]);t=new ve({props:y});const S=[H("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Tt,"circle-opacity":0,"circle-stroke-color":Ze.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let L={};for(let A=0;A<S.length;A+=1)L=Z(L,S[A]);o=new xe({props:L});const C=[H("interventions-polygons"),{filter:["all",Ut,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":K(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let D={$$slots:{default:[Ap]},$$scope:{ctx:r}};for(let A=0;A<C.length;A+=1)D=Z(D,C[A]);f=new Xe({props:D});const E=[H("interventions-polygons-outlines"),{filter:["all",Ut,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*Tt}},{layout:{visibility:r[0]?"visible":"none"}}];let F={};for(let A=0;A<E.length;A+=1)F=Z(F,E[A]);return a=new ve({props:F}),{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment),l=I(),h(o.$$.fragment),s=I(),h(f.$$.fragment),i=I(),h(a.$$.fragment)},m(A,M){b(e,A,M),$(A,n,M),b(t,A,M),$(A,l,M),b(o,A,M),$(A,s,M),b(f,A,M),$(A,i,M),b(a,A,M),u=!0},p(A,M){const N=M&29?x(c,[c[0],M&24&&{filter:["all",Cn,A[3],A[4]]},c[2],c[3],M&4&&{paint:{"circle-color":A[2],"circle-radius":Yt,"circle-opacity":K(1,.5)}},M&1&&{layout:{visibility:A[0]?"visible":"none"}},c[6]]):{};M&128&&(N.$$scope={dirty:M,ctx:A}),e.$set(N);const O=M&13?x(m,[m[0],M&8&&{filter:["all",On,A[3]]},m[2],m[3],M&4&&{paint:{"line-color":A[2],"line-width":Tt,"line-opacity":K(1,.5)}},M&1&&{layout:{visibility:A[0]?"visible":"none"}},m[6]]):{};M&128&&(O.$$scope={dirty:M,ctx:A}),t.$set(O);const P=M&1?x(S,[S[0],S[1],S[2],{layout:{visibility:A[0]?"visible":"none"}}]):{};o.$set(P);const B=M&13?x(C,[C[0],M&8&&{filter:["all",Ut,A[3]]},C[2],C[3],M&4&&{paint:{"fill-color":A[2],"fill-opacity":K(.2,.5)}},M&1&&{layout:{visibility:A[0]?"visible":"none"}},C[6]]):{};M&128&&(B.$$scope={dirty:M,ctx:A}),f.$set(B);const q=M&13?x(E,[E[0],M&8&&{filter:["all",Ut,A[3]]},M&4&&{paint:{"line-color":A[2],"line-opacity":.5,"line-width":.7*Tt}},M&1&&{layout:{visibility:A[0]?"visible":"none"}}]):{};a.$set(q)},i(A){u||(_(e.$$.fragment,A),_(t.$$.fragment,A),_(o.$$.fragment,A),_(f.$$.fragment,A),_(a.$$.fragment,A),u=!0)},o(A){d(e.$$.fragment,A),d(t.$$.fragment,A),d(o.$$.fragment,A),d(f.$$.fragment,A),d(a.$$.fragment,A),u=!1},d(A){A&&(p(n),p(l),p(s),p(i)),v(e,A),v(t,A),v(o,A),v(f,A),v(a,A)}}}function Ip(r){let e,n;return e=new Ot({props:{data:r[1],$$slots:{default:[Lp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.data=t[1]),l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Pp(r,e,n){let t,l;ge(r,Ct,a=>n(5,l=a));let{showSchemes:o}=e,s=gl();const f=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return r.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&n(1,t=yl(l))},[o,t,s,f,i,l]}class Mp extends X{constructor(e){super(),Y(this,e,Pp,Ip,G,{showSchemes:0})}}function Br(r,e,n){const t=r.slice();return t[10]=e[n],t}function Np(r){let e,n;return e=new up({props:{loadFile:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Hr(r){let e,n,t,l;function o(i){r[7](i)}function s(i){r[8](i)}let f={};return r[1]!==void 0&&(f.schemesToBeShown=r[1]),r[2]!==void 0&&(f.show=r[2]),e=new bi({props:f}),V.push(()=>Q(e,"schemesToBeShown",o)),V.push(()=>Q(e,"show",s)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),l=!0},p(i,a){const u={};!n&&a&2&&(n=!0,u.schemesToBeShown=i[1],J(()=>n=!1)),!t&&a&4&&(t=!0,u.show=i[2],J(()=>t=!1)),e.$set(u)},i(i){l||(_(e.$$.fragment,i),l=!0)},o(i){d(e.$$.fragment,i),l=!1},d(i){v(e,i)}}}function zr(r){let e,n;return e=new dp({props:{scheme:r[10]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.scheme=t[10]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gr(r){let e=r[1].has(r[10].scheme_reference),n,t,l=e&&zr(r);return{c(){l&&l.c(),n=Ae()},m(o,s){l&&l.m(o,s),$(o,n,s),t=!0},p(o,s){s&34&&(e=o[1].has(o[10].scheme_reference)),e?l?(l.p(o,s),s&34&&_(l,1)):(l=zr(o),l.c(),_(l,1),l.m(n.parentNode,n)):l&&(fe(),d(l,1,1,()=>{l=null}),ue())},i(o){t||(_(l),t=!0)},o(o){d(l),t=!1},d(o){o&&p(n),l&&l.d(o)}}}function Dp(r){let e,n,t,l,o,s,f,i,a,u,c=_n()=="Private (development)",g,m,y,S,L,C,D,E;o=new Nl({props:{boundaryGeojson:r[3]}}),f=new ro({}),a=new Sl({});let F=c&&Np(r);m=new Pl({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[6]}}),S=new Kr({props:{errorMessage:r[0]}});let A=r[5].size>0&&Hr(r),M=We(r[5].values()),N=[];for(let P=0;P<M.length;P+=1)N[P]=Gr(Br(r,M,P));const O=P=>d(N[P],1,1,()=>{N[P]=null});return{c(){e=T("div"),n=T("div"),t=T("h1"),t.textContent="Browse schemes",l=I(),h(o.$$.fragment),s=I(),h(f.$$.fragment),i=I(),h(a.$$.fragment),u=I(),F&&F.c(),g=I(),h(m.$$.fragment),y=I(),h(S.$$.fragment),L=I(),A&&A.c(),C=I(),D=T("ul");for(let P=0;P<N.length;P+=1)N[P].c();we(n,"display","flex"),we(n,"justify-content","space-between"),z(e,"slot","sidebar"),z(e,"class","govuk-prose")},m(P,B){$(P,e,B),w(e,n),w(n,t),w(n,l),b(o,n,null),w(e,s),b(f,e,null),w(e,i),b(a,e,null),w(e,u),F&&F.m(e,null),w(e,g),b(m,e,null),w(e,y),b(S,e,null),w(e,L),A&&A.m(e,null),w(e,C),w(e,D);for(let q=0;q<N.length;q+=1)N[q]&&N[q].m(D,null);E=!0},p(P,B){const q={};B&8&&(q.boundaryGeojson=P[3]),o.$set(q),c&&F.p(P,B);const R={};if(B&1&&(R.errorMessage=P[0]),S.$set(R),P[5].size>0?A?(A.p(P,B),B&32&&_(A,1)):(A=Hr(P),A.c(),_(A,1),A.m(e,C)):A&&(fe(),d(A,1,1,()=>{A=null}),ue()),B&34){M=We(P[5].values());let U;for(U=0;U<M.length;U+=1){const $e=Br(P,M,U);N[U]?(N[U].p($e,B),_(N[U],1)):(N[U]=Gr($e),N[U].c(),_(N[U],1),N[U].m(D,null))}for(fe(),U=M.length;U<N.length;U+=1)O(U);ue()}},i(P){if(!E){_(o.$$.fragment,P),_(f.$$.fragment,P),_(a.$$.fragment,P),_(F),_(m.$$.fragment,P),_(S.$$.fragment,P),_(A);for(let B=0;B<M.length;B+=1)_(N[B]);E=!0}},o(P){d(o.$$.fragment,P),d(f.$$.fragment,P),d(a.$$.fragment,P),d(F),d(m.$$.fragment,P),d(S.$$.fragment,P),d(A),N=N.filter(Boolean);for(let B=0;B<N.length;B+=1)d(N[B]);E=!1},d(P){P&&p(e),v(o),v(f),v(a),F&&F.d(),v(m),v(S),A&&A.d(),It(N,P)}}}function Ep(r){let e,n,t,l,o,s,f;return e=new Il({}),t=new Mp({props:{showSchemes:r[2]}}),s=new ap({}),{c(){h(e.$$.fragment),n=I(),h(t.$$.fragment),l=I(),o=T("div"),h(s.$$.fragment),z(o,"class","top-right svelte-u44ed2")},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),$(i,l,a),$(i,o,a),b(s,o,null),f=!0},p(i,a){const u={};a&4&&(u.showSchemes=i[2]),t.$set(u)},i(i){f||(_(e.$$.fragment,i),_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(n),p(l),p(o)),v(e,i),v(t,i),v(s)}}}function Fp(r){let e,n,t;return n=new Cl({props:{style:r[4],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Ep]},$$scope:{ctx:r}}}),{c(){e=T("div"),h(n.$$.fragment),z(e,"slot","main")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.style=l[4]),o&8196&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function jp(r){let e,n;return e=new El({props:{$$slots:{main:[Fp],sidebar:[Dp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&8255&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Rp(r,e,n){let t,l,o;ge(r,Ct,m=>n(3,t=m)),ge(r,Tn,m=>n(4,l=m)),ge(r,Ft,m=>n(5,o=m)),dn(()=>{Ol()});const s=new URLSearchParams(window.location.search);Tn.set(s.get("style")||"dataviz");let f="",i=new Set,a=!0;function u(m){try{Ct.set(JSON.parse(m)),Ft.set(oi(t)),n(0,f="")}catch(y){n(0,f=`The file you loaded is broken: ${y}`)}}function c(m){i=m,n(1,i)}function g(m){a=m,n(2,a)}return[f,i,a,t,l,o,u,c,g]}class Bp extends X{constructor(e){super(),Y(this,e,Rp,jp,G,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new Bp({target:document.getElementById("app")});
