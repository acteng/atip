var Ce=Object.defineProperty;var $e=(s,e,n)=>e in s?Ce(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n;var T=(s,e,n)=>($e(s,typeof e!="symbol"?e+"":e,n),n);import{S as $,i as L,s as H,H as I,e as p,h as g,j as y,k as b,L as M,M as B,N as D,t as h,l as k,p as S,f as E,Y as J,w as j,aM as be,Q as ve,a_ as Le,F as He,g as O,m as P,q as R,W as q,ae as ke,aN as Ee,a$ as te,X as we,b0 as Ie,v as Q,u as U,V as X,b as G,c as Y,o as K,x as A,T as Me,aI as ye,b1 as ne,y as x,n as ee,b2 as Be,r as De,B as W,C as F,ah as Oe,a as Pe,$ as N,D as Re,a3 as Ve,a1 as ze,a9 as le,a8 as se,a2 as je,ad as Ne,ac as qe,ab as oe,aA as ae,aB as ie,R as Ae}from"./data_getter-3b79629f.js";function Ge(s){let e,n,t;const l=s[3].default,o=I(l,s,s[2],null);return{c(){e=p("fieldset"),n=p("div"),o&&o.c(),g(n,"class",s[0]),g(n,"data-module","govuk-checkboxes"),g(e,"class","govuk-fieldset")},m(a,r){y(a,e,r),b(e,n),o&&o.m(n,null),t=!0},p(a,[r]){o&&o.p&&(!t||r&4)&&M(o,l,a,a[2],t?D(l,a[2],r,null):B(a[2]),null)},i(a){t||(h(o,a),t=!0)},o(a){k(o,a),t=!1},d(a){a&&S(e),o&&o.d(a)}}}function Fe(s,e,n){let{$$slots:t={},$$scope:l}=e,{small:o=!1}=e,a=o?"govuk-checkboxes--small":"govuk-checkboxes";return s.$$set=r=>{"small"in r&&n(1,o=r.small),"$$scope"in r&&n(2,l=r.$$scope)},[a,o,l,t]}class Et extends ${constructor(e){super(),L(this,e,Fe,Ge,H,{small:1})}}const Te=s=>({}),re=s=>({});function We(s){let e,n,t,l,o,a,r,i,u;const c=s[5].default,d=I(c,s,s[4],null),f=s[5].right,m=I(f,s,s[4],re);return{c(){e=p("div"),n=p("input"),t=E(),l=p("label"),d&&d.c(),o=E(),a=p("span"),m&&m.c(),g(n,"type","checkbox"),g(n,"class","govuk-checkboxes__input"),g(n,"id",s[1]),g(l,"class","govuk-label govuk-checkboxes__label"),g(l,"for",s[1]),g(l,"title",s[2]),J(a,"float","right"),g(e,"class","govuk-checkboxes__item"),g(e,"style",s[3])},m(_,v){y(_,e,v),b(e,n),n.checked=s[0],b(e,t),b(e,l),d&&d.m(l,null),b(e,o),b(e,a),m&&m.m(a,null),r=!0,i||(u=[j(n,"change",s[7]),j(n,"change",s[6])],i=!0)},p(_,[v]){(!r||v&2)&&g(n,"id",_[1]),v&1&&(n.checked=_[0]),d&&d.p&&(!r||v&16)&&M(d,c,_,_[4],r?D(c,_[4],v,null):B(_[4]),null),(!r||v&2)&&g(l,"for",_[1]),(!r||v&4)&&g(l,"title",_[2]),m&&m.p&&(!r||v&16)&&M(m,f,_,_[4],r?D(f,_[4],v,Te):B(_[4]),re)},i(_){r||(h(d,_),h(m,_),r=!0)},o(_){k(d,_),k(m,_),r=!1},d(_){_&&S(e),d&&d.d(_),m&&m.d(_),i=!1,be(u)}}}function Ze(s,e,n){let{$$slots:t={},$$scope:l}=e;const o=Le(t);let{id:a}=e,{checked:r}=e,{hint:i=null}=e,c=o.right!==void 0?"float: none":"";function d(m){ve.call(this,s,m)}function f(){r=this.checked,n(0,r)}return s.$$set=m=>{"id"in m&&n(1,a=m.id),"checked"in m&&n(0,r=m.checked),"hint"in m&&n(2,i=m.hint),"$$scope"in m&&n(4,l=m.$$scope)},[r,a,i,c,l,t,d,f]}class It extends ${constructor(e){super(),L(this,e,Ze,We,H,{id:1,checked:0,hint:2})}}function ce(s,e,n){const t=s.slice();return t[8]=e[n][0],t[9]=e[n][1],t}function ue(s){let e;return{c(){e=p("option"),e.__value="",Q(e,e.__value)},m(n,t){y(n,e,t)},d(n){n&&S(e)}}}function fe(s){let e,n=s[9]+"",t,l;return{c(){e=p("option"),t=U(n),e.__value=l=s[8],Q(e,e.__value)},m(o,a){y(o,e,a),b(e,t)},p(o,a){a&8&&n!==(n=o[9]+"")&&X(t,n),a&8&&l!==(l=o[8])&&(e.__value=l,Q(e,e.__value))},d(o){o&&S(e)}}}function Je(s){let e,n,t,l,o=s[4]&&ue(),a=q(s[3]),r=[];for(let i=0;i<a.length;i+=1)r[i]=fe(ce(s,a,i));return{c(){e=p("select"),o&&o.c(),n=ke();for(let i=0;i<r.length;i+=1)r[i].c();g(e,"class","govuk-select"),g(e,"id",s[2]),e.disabled=s[5],s[0]===void 0&&Ee(()=>s[7].call(e))},m(i,u){y(i,e,u),o&&o.m(e,null),b(e,n);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(e,null);te(e,s[0],!0),t||(l=[j(e,"change",s[7]),j(e,"change",s[6])],t=!0)},p(i,u){if(i[4]?o||(o=ue(),o.c(),o.m(e,n)):o&&(o.d(1),o=null),u&8){a=q(i[3]);let c;for(c=0;c<a.length;c+=1){const d=ce(i,a,c);r[c]?r[c].p(d,u):(r[c]=fe(d),r[c].c(),r[c].m(e,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=a.length}u&4&&g(e,"id",i[2]),u&32&&(e.disabled=i[5]),u&9&&te(e,i[0])},d(i){i&&S(e),o&&o.d(),we(r,i),t=!1,be(l)}}}function Qe(s){let e,n;return e=new He({props:{label:s[1],id:s[2],$$slots:{default:[Je]},$$scope:{ctx:s}}}),{c(){O(e.$$.fragment)},m(t,l){P(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.label=t[1]),l&4&&(o.id=t[2]),l&4157&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function Ue(s,e,n){let{label:t}=e,{id:l}=e,{choices:o}=e,{emptyOption:a=!1}=e,{disabled:r=!1}=e,{value:i}=e;function u(d){ve.call(this,s,d)}function c(){i=Ie(this),n(0,i),n(3,o)}return s.$$set=d=>{"label"in d&&n(1,t=d.label),"id"in d&&n(2,l=d.id),"choices"in d&&n(3,o=d.choices),"emptyOption"in d&&n(4,a=d.emptyOption),"disabled"in d&&n(5,r=d.disabled),"value"in d&&n(0,i=d.value)},[i,t,l,o,a,r,u,c]}class Xe extends ${constructor(e){super(),L(this,e,Ue,Qe,H,{label:1,id:2,choices:3,emptyOption:4,disabled:5,value:0})}}function Ye(s){let e,n,t;function l(a){s[2](a)}let o={label:"Basemap",id:"basemap",choices:[["streets","Streets"],["hybrid","Satellite"],["dataviz","Dataviz"]]};return s[0]!==void 0&&(o.value=s[0]),e=new Xe({props:o}),G.push(()=>Y(e,"value",l)),e.$on("change",s[1]),{c(){O(e.$$.fragment)},m(a,r){P(e,a,r),t=!0},p(a,[r]){const i={};!n&&r&1&&(n=!0,i.value=a[0],K(()=>n=!1)),e.$set(i)},i(a){t||(h(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){R(e,a)}}}function Ke(s,e,n){let{style:t}=e;function l(){let a=new URLSearchParams(window.location.search);a.set("style",t);let r=`${window.location.pathname}?${a.toString()}${window.location.hash}`;window.location.href=r}function o(a){t=a,n(0,t)}return s.$$set=a=>{"style"in a&&n(0,t=a.style)},[t,l,o]}class Mt extends ${constructor(e){super(),L(this,e,Ke,Ye,H,{style:0})}}function xe(s){let e,n,t,l,o,a,r;const i=s[3].default,u=I(i,s,s[2],null);return{c(){e=p("details"),n=p("summary"),t=p("span"),l=U(s[0]),o=E(),a=p("div"),u&&u.c(),g(t,"class","govuk-details__summary-text"),g(n,"class","govuk-details__summary"),g(a,"class","govuk-details__text"),e.open=s[1],g(e,"class","govuk-details"),g(e,"data-module","govuk-details")},m(c,d){y(c,e,d),b(e,n),b(n,t),b(t,l),b(e,o),b(e,a),u&&u.m(a,null),r=!0},p(c,[d]){(!r||d&1)&&X(l,c[0]),u&&u.p&&(!r||d&4)&&M(u,i,c,c[2],r?D(i,c[2],d,null):B(c[2]),null),(!r||d&2)&&(e.open=c[1])},i(c){r||(h(u,c),r=!0)},o(c){k(u,c),r=!1},d(c){c&&S(e),u&&u.d(c)}}}function et(s,e,n){let{$$slots:t={},$$scope:l}=e,{label:o}=e,{open:a=!1}=e;return s.$$set=r=>{"label"in r&&n(0,o=r.label),"open"in r&&n(1,a=r.open),"$$scope"in r&&n(2,l=r.$$scope)},[o,a,l,t]}class Se extends ${constructor(e){super(),L(this,e,et,xe,H,{label:0,open:1})}}function tt(s){let e;return{c(){e=p("span"),g(e,"class","svelte-kzgqtg"),J(e,"background",s[0])},m(n,t){y(n,e,t)},p(n,[t]){t&1&&J(e,"background",n[0])},i:A,o:A,d(n){n&&S(e)}}}function nt(s,e,n){let{color:t}=e;return s.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class lt extends ${constructor(e){super(),L(this,e,nt,tt,H,{color:0})}}const st="/atip/streetview-rework/assets/help-d011708a.svg";function ot(s){let e,n;const t=s[1].default,l=I(t,s,s[4],null);return{c(){e=p("div"),l&&l.c(),g(e,"class","govuk-prose")},m(o,a){y(o,e,a),l&&l.m(e,null),n=!0},p(o,a){l&&l.p&&(!n||a&16)&&M(l,t,o,o[4],n?D(t,o[4],a,null):B(o[4]),null)},i(o){n||(h(l,o),n=!0)},o(o){k(l,o),n=!1},d(o){o&&S(e),l&&l.d(o)}}}function at(s){let e,n,t,l,o,a,r,i,u;function c(f){s[3](f)}let d={title:"Help",$$slots:{default:[ot]},$$scope:{ctx:s}};return s[0]!==void 0&&(d.open=s[0]),o=new Me({props:d}),G.push(()=>Y(o,"open",c)),{c(){e=p("button"),n=p("img"),l=E(),O(o.$$.fragment),ye(n.src,t=st)||g(n,"src",t),g(n,"title","Help"),g(n,"alt","Help"),g(e,"class","svelte-7d9d1l")},m(f,m){y(f,e,m),b(e,n),y(f,l,m),P(o,f,m),r=!0,i||(u=j(e,"click",s[2]),i=!0)},p(f,[m]){const _={};m&16&&(_.$$scope={dirty:m,ctx:f}),!a&&m&1&&(a=!0,_.open=f[0],K(()=>a=!1)),o.$set(_)},i(f){r||(h(o.$$.fragment,f),r=!0)},o(f){k(o.$$.fragment,f),r=!1},d(f){f&&(S(e),S(l)),R(o,f),i=!1,u()}}}function it(s,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const a=()=>n(0,o=!0);function r(i){o=i,n(0,o)}return s.$$set=i=>{"$$scope"in i&&n(4,l=i.$$scope)},[o,t,a,r,l]}class Bt extends ${constructor(e){super(),L(this,e,it,at,H,{})}}const rt=s=>({}),de=s=>({}),ct=s=>({}),me=s=>({});function ut(s){let e,n,t,l,o,a,r,i,u,c,d;const f=s[3].sidebar,m=I(f,s,s[2],me),_=s[3].main,v=I(_,s,s[2],de);return{c(){e=p("div"),n=p("aside"),t=p("div"),m&&m.c(),l=E(),o=p("button"),o.textContent="â†’",r=E(),i=p("main"),v&&v.c(),g(t,"class","sidebar-content content-container svelte-ect12w"),g(o,"type","button"),g(o,"class","sidebar-toggle rounded-rect svelte-ect12w"),g(n,"class",a=ne(s[0]?"":"collapsed")+" svelte-ect12w"),g(i,"class","svelte-ect12w"),g(e,"class","overall-layout svelte-ect12w")},m(w,V){y(w,e,V),b(e,n),b(n,t),m&&m.m(t,null),b(n,l),b(n,o),b(e,r),b(e,i),v&&v.m(i,null),u=!0,c||(d=j(o,"click",s[1]),c=!0)},p(w,[V]){m&&m.p&&(!u||V&4)&&M(m,f,w,w[2],u?D(f,w[2],V,ct):B(w[2]),me),(!u||V&1&&a!==(a=ne(w[0]?"":"collapsed")+" svelte-ect12w"))&&g(n,"class",a),v&&v.p&&(!u||V&4)&&M(v,_,w,w[2],u?D(_,w[2],V,rt):B(w[2]),de)},i(w){u||(h(m,w),h(v,w),u=!0)},o(w){k(m,w),k(v,w),u=!1},d(w){w&&S(e),m&&m.d(w),v&&v.d(w),c=!1,d()}}}function ft(s,e,n){let{$$slots:t={},$$scope:l}=e,o=!0;function a(){n(0,o=!o)}return s.$$set=r=>{"$$scope"in r&&n(2,l=r.$$scope)},[o,a,l,t]}class Dt extends ${constructor(e){super(),L(this,e,ft,ut,H,{})}}function _e(s,e,n){const t=s.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function ge(s){let e,n,t,l=s[1]+"",o,a,r;return n=new lt({props:{color:s[2]}}),{c(){e=p("li"),O(n.$$.fragment),t=E(),o=U(l),a=E()},m(i,u){y(i,e,u),P(n,e,null),b(e,t),b(e,o),b(e,a),r=!0},p(i,u){const c={};u&1&&(c.color=i[2]),n.$set(c),(!r||u&1)&&l!==(l=i[1]+"")&&X(o,l)},i(i){r||(h(n.$$.fragment,i),r=!0)},o(i){k(n.$$.fragment,i),r=!1},d(i){i&&S(e),R(n)}}}function dt(s){let e,n,t=q(s[0]),l=[];for(let a=0;a<t.length;a+=1)l[a]=ge(_e(s,t,a));const o=a=>k(l[a],1,1,()=>{l[a]=null});return{c(){e=p("ul");for(let a=0;a<l.length;a+=1)l[a].c()},m(a,r){y(a,e,r);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(a,r){if(r&1){t=q(a[0]);let i;for(i=0;i<t.length;i+=1){const u=_e(a,t,i);l[i]?(l[i].p(u,r),h(l[i],1)):(l[i]=ge(u),l[i].c(),h(l[i],1),l[i].m(e,null))}for(x(),i=t.length;i<l.length;i+=1)o(i);ee()}},i(a){if(!n){for(let r=0;r<t.length;r+=1)h(l[r]);n=!0}},o(a){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)k(l[r]);n=!1},d(a){a&&S(e),we(l,a)}}}function mt(s){let e,n;return e=new Se({props:{label:"Legend",$$slots:{default:[dt]},$$scope:{ctx:s}}}),{c(){O(e.$$.fragment)},m(t,l){P(e,t,l),n=!0},p(t,[l]){const o={};l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function _t(s,e,n){let{rows:t}=e;return s.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class Ot extends ${constructor(e){super(),L(this,e,_t,mt,H,{rows:0})}}function pe(s){let e;const n=s[5].default,t=I(n,s,s[4],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16)&&M(t,n,l,l[4],e?D(n,l[4],o,null):B(l[4]),null)},i(l){e||(h(t,l),e=!0)},o(l){k(t,l),e=!1},d(l){t&&t.d(l)}}}function gt(s){let e,n,t=s[1]&&pe(s);return{c(){e=p("div"),t&&t.c(),g(e,"class","map svelte-12dpf1u")},m(l,o){y(l,e,o),t&&t.m(e,null),s[6](e),n=!0},p(l,[o]){l[1]?t?(t.p(l,o),o&2&&h(t,1)):(t=pe(l),t.c(),h(t,1),t.m(e,null)):t&&(x(),k(t,1,1,()=>{t=null}),ee())},i(l){n||(h(t),n=!0)},o(l){k(t),n=!1},d(l){l&&S(e),t&&t.d(),s[6](null)}}}function pt(s,e,n){let{$$slots:t={},$$scope:l}=e,{style:o}=e,{startBounds:a=null}=e,r,i,u=!1,c=!window.location.hash;Be("setCamera",c),De(()=>{r=new W.Map({container:i,style:`https://api.maptiler.com/maps/${o}/style.json?key=MZEJTanw3WpxRvt7qDfo`,hash:!0}),r.addControl(new W.ScaleControl({})),r.addControl(new W.NavigationControl({visualizePitch:!0}),"bottom-right"),r.on("load",()=>{n(1,u=!0),c&&a&&r.fitBounds(a,{animate:!1}),F.set(r)}),new ResizeObserver(()=>{r.resize()}).observe(i)}),Oe(()=>{r.remove()});function d(f){G[f?"unshift":"push"](()=>{i=f,n(0,i)})}return s.$$set=f=>{"style"in f&&n(2,o=f.style),"startBounds"in f&&n(3,a=f.startBounds),"$$scope"in f&&n(4,l=f.$$scope)},[i,u,o,a,l,t,d]}class Pt extends ${constructor(e){super(),L(this,e,pt,gt,H,{style:2,startBounds:3})}}const ht="/atip/streetview-rework/assets/zoom_out_map-b2e1091a.svg";function bt(s){let e,n;return{c(){e=p("img"),ye(e.src,n=ht)||g(e,"src",n),g(e,"alt","Zoom to show entire boundary")},m(t,l){y(t,e,l)},p:A,d(t){t&&S(e)}}}function vt(s){let e,n;return e=new Pe({props:{title:"Zoom to show entire boundary",$$slots:{default:[bt]},$$scope:{ctx:s}}}),e.$on("click",s[0]),{c(){O(e.$$.fragment)},m(t,l){P(e,t,l),n=!0},p(t,[l]){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function kt(s,e,n){let t;N(s,F,a=>n(2,t=a));let{boundaryGeojson:l}=e;function o(){t.fitBounds(Re(l),{padding:20,animate:!0,duration:500})}return s.$$set=a=>{"boundaryGeojson"in a&&n(1,l=a.boundaryGeojson)},[o,l]}class Rt extends ${constructor(e){super(),L(this,e,kt,vt,H,{boundaryGeojson:1})}}const C={area:"#D94324",route:"#555F5E",crossing:"#4daf4a",other:"#984ea3",preapp:"#e41a1c",outline:"#377eb8","reserved matters":"#4daf4a","local plan":"#984ea3",hovering:"black",lineEndpointColor:"black"},wt=10,Z=10;let z="interventions";function yt(s,e,n){let t,l;N(s,F,i=>n(1,t=i)),N(s,Ve,i=>n(2,l=i));let{colorInterventions:o}=e;ze(t,z,l);const a=["!=","hide_while_editing",!0];return le(t,{id:"interventions-points",source:z,filter:["all",Ne,a,["!=","endpoint",!0]],color:o,radius:wt}),se(t,{id:"interventions-lines",source:z,filter:["all",qe,a],color:o,width:Z}),le(t,{id:"interventions-lines-endpoints",source:z,filter:["==","endpoint",!0],radius:.5*Z,opacity:0,strokeColor:C.lineEndpointColor,strokeWidth:2}),je(t,{id:"interventions-polygons",source:z,filter:["all",oe,a],color:o,opacity:.2}),se(t,{id:"interventions-polygon-outlines",source:z,filter:["all",oe,a],color:o,opacity:.5,width:.7*Z}),s.$$set=i=>{"colorInterventions"in i&&n(0,o=i.colorInterventions)},s.$$.update=()=>{if(s.$$.dirty&6){let i=JSON.parse(JSON.stringify(l)),u=[];for(let c of i.features)if(c.geometry.type=="LineString"&&!c.properties.hide_while_editing)for(let d of[c.geometry.coordinates[0],c.geometry.coordinates[c.geometry.coordinates.length-1]])u.push({type:"Feature",properties:{endpoint:!0},geometry:{type:"Point",coordinates:d}});i.features=i.features.concat(u),t.getSource(z).setData(i)}},[o,t,l]}class Vt extends ${constructor(e){super(),L(this,e,yt,null,H,{colorInterventions:0})}}function zt(s){return{v1:"Scheme Design",v2:"Experimental Scheme Design",planning:"Development Planning",criticals:"Critical Issues",atf4:"ATF4 Scheme"}[s]}function jt(s){return{v1:"an intervention",v2:"an intervention",planning:"a development",criticals:"a critical issue",atf4:"an intervention"}[s]}function Nt(s){return{v1:"interventions",v2:"interventions",planning:"developments",criticals:"critical issues",atf4:"interventions"}[s]}function qt(s){return s=="planning"?ae(["get","reference_type",["get","planning"]],{preapp:C.preapp,outline:C.outline,"reserved matters":C["reserved matters"],"local plan":C["local plan"]},"black"):ae(["get","intervention_type"],{area:C.area,route:C.route,crossing:C.crossing,other:C.other},"white")}function At(s){return s=="planning"?[["Preapp",C.preapp],["Outline",C.outline],["Reserved matters",C["reserved matters"]],["Local plan",C["local plan"]]]:[["Areas",C.area],["Routes",C.route],["Crossings",C.crossing],["Other",C.other]]}const Gt=["click","dblclick","mousemove","mousedown","mouseup","mouseout","dragstart"],Ft=["keypress","keyup","keydown"];class Tt{constructor(){T(this,"mapHandlers");T(this,"documentHandlers");this.mapHandlers={click:e=>{},dblclick:e=>{},mousemove:e=>{},mousedown:e=>{},mouseup:e=>{},mouseout:e=>{},dragstart:e=>{}},this.documentHandlers={keypress:e=>{},keyup:e=>{},keydown:e=>{}}}}function he(s){let e,n,t,l,o;function a(i){s[6](i)}let r={legend:"Source",id:"streetViewImagery",choices:[["google","Google Street View"],["bing","Bing Streetside"]],inlineSmall:!0};return s[1].streetViewImagery!==void 0&&(r.value=s[1].streetViewImagery),e=new Ae({props:r}),G.push(()=>Y(e,"value",a)),l=new Se({props:{label:"Help",$$slots:{default:[St]},$$scope:{ctx:s}}}),{c(){O(e.$$.fragment),t=E(),O(l.$$.fragment)},m(i,u){P(e,i,u),y(i,t,u),P(l,i,u),o=!0},p(i,u){const c={};!n&&u&2&&(n=!0,c.value=i[1].streetViewImagery,K(()=>n=!1)),e.$set(c);const d={};u&512&&(d.$$scope={dirty:u,ctx:i}),l.$set(d)},i(i){o||(h(e.$$.fragment,i),h(l.$$.fragment,i),o=!0)},o(i){k(e.$$.fragment,i),k(l.$$.fragment,i),o=!1},d(i){i&&S(t),R(e,i),R(l,i)}}}function St(s){let e;return{c(){e=p("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to open a new tab with a 3rd-party imagery provider</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(n,t){y(n,e,t)},p:A,d(n){n&&S(e)}}}function Ct(s){let e,n,t=s[0]&&he(s);return{c(){t&&t.c(),e=ke()},m(l,o){t&&t.m(l,o),y(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&h(t,1)):(t=he(l),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(x(),k(t,1,1,()=>{t=null}),ee())},i(l){n||(h(t),n=!0)},o(l){k(t),n=!1},d(l){l&&S(e),t&&t.d(l)}}}function $t(s,e,n){let t,l;N(s,F,f=>n(7,t=f)),N(s,ie,f=>n(1,l=f));let{eventHandler:o}=e,{changeMode:a}=e,{isActive:r}=e;function i(){t.getCanvas().style.cursor="zoom-in",c("blue")}function u(){t.getCanvas().style.cursor="inherit",c("green")}o.mapHandlers.click=f=>{let m=f.lngLat.lng,_=f.lngLat.lat;l.streetViewImagery=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${_},${m}&cbp=11,0,0,0,0`,"_blank"):l.streetViewImagery=="bing"&&window.open(`https://www.bing.com/maps?cp=${_}~${m}&style=x`,"_blank")},o.documentHandlers.keydown=f=>{f.key=="Escape"&&(a("edit-attribute"),f.preventDefault())};const c=f=>{["road_motorway","road_trunk_primary"].forEach(_=>{console.log(`layer id ${_}`),t.setPaintProperty(_,"line-color",f)})};function d(f){s.$$.not_equal(l.streetViewImagery,f)&&(l.streetViewImagery=f,ie.set(l))}return s.$$set=f=>{"eventHandler"in f&&n(2,o=f.eventHandler),"changeMode"in f&&n(3,a=f.changeMode),"isActive"in f&&n(0,r=f.isActive)},[r,l,o,a,i,u,d]}class Wt extends ${constructor(e){super(),L(this,e,$t,Ct,H,{eventHandler:2,changeMode:3,isActive:0,start:4,stop:5})}get start(){return this.$$.ctx[4]}get stop(){return this.$$.ctx[5]}}export{Mt as B,Se as C,Ft as D,Tt as E,Bt as H,Vt as I,Dt as L,Gt as M,Wt as S,Rt as Z,wt as a,Et as b,C as c,It as d,Xe as e,Nt as f,zt as g,Pt as h,qt as i,Ot as j,At as k,Z as l,lt as m,jt as s};
