var Ve=Object.defineProperty;var Le=(s,e,t)=>e in s?Ve(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var N=(s,e,t)=>(Le(s,typeof e!="symbol"?e+"":e,t),t);import{S as C,i as E,s as V,J as I,e as b,h as p,j as y,k as w,M as D,N as O,O as R,t as h,l as v,p as S,f as L,Z as X,w as z,aN as ke,T as F,a$ as He,F as Me,g as H,m as M,q as B,X as J,af as ye,aO as Be,b0 as ne,Y as Se,b1 as Pe,v as Y,u as T,W as x,b as q,c as ee,o as te,x as Q,U as Ie,aJ as $e,b2 as le,y as W,n as A,b3 as De,r as Oe,B as K,C as Z,ai as Re,a as Ce,a0 as G,G as je,a4 as ze,a2 as Ne,aa as se,a9 as oe,a3 as Ge,ae as Te,ad as qe,ac as ie,aB as ae,aE as Ze,aC as re,D as Fe,R as Je}from"./data_getter-0b191db9.js";function We(s){let e,t,n;const l=s[3].default,o=I(l,s,s[2],null);return{c(){e=b("fieldset"),t=b("div"),o&&o.c(),p(t,"class",s[0]),p(t,"data-module","govuk-checkboxes"),p(e,"class","govuk-fieldset")},m(i,r){y(i,e,r),w(e,t),o&&o.m(t,null),n=!0},p(i,[r]){o&&o.p&&(!n||r&4)&&D(o,l,i,i[2],n?R(l,i[2],r,null):O(i[2]),null)},i(i){n||(h(o,i),n=!0)},o(i){v(o,i),n=!1},d(i){i&&S(e),o&&o.d(i)}}}function Ae(s,e,t){let{$$slots:n={},$$scope:l}=e,{small:o=!1}=e,i=o?"govuk-checkboxes--small":"govuk-checkboxes";return s.$$set=r=>{"small"in r&&t(1,o=r.small),"$$scope"in r&&t(2,l=r.$$scope)},[i,o,l,n]}class Gt extends C{constructor(e){super(),E(this,e,Ae,We,V,{small:1})}}const Ke=s=>({}),ce=s=>({});function Ue(s){let e,t,n,l,o,i,r,a,c;const u=s[5].default,f=I(u,s,s[4],null),_=s[5].right,m=I(_,s,s[4],ce);return{c(){e=b("div"),t=b("input"),n=L(),l=b("label"),f&&f.c(),o=L(),i=b("span"),m&&m.c(),p(t,"type","checkbox"),p(t,"class","govuk-checkboxes__input"),p(t,"id",s[1]),p(l,"class","govuk-label govuk-checkboxes__label"),p(l,"for",s[1]),p(l,"title",s[2]),X(i,"float","right"),p(e,"class","govuk-checkboxes__item"),p(e,"style",s[3])},m(g,d){y(g,e,d),w(e,t),t.checked=s[0],w(e,n),w(e,l),f&&f.m(l,null),w(e,o),w(e,i),m&&m.m(i,null),r=!0,a||(c=[z(t,"change",s[7]),z(t,"change",s[6])],a=!0)},p(g,[d]){(!r||d&2)&&p(t,"id",g[1]),d&1&&(t.checked=g[0]),f&&f.p&&(!r||d&16)&&D(f,u,g,g[4],r?R(u,g[4],d,null):O(g[4]),null),(!r||d&2)&&p(l,"for",g[1]),(!r||d&4)&&p(l,"title",g[2]),m&&m.p&&(!r||d&16)&&D(m,_,g,g[4],r?R(_,g[4],d,Ke):O(g[4]),ce)},i(g){r||(h(f,g),h(m,g),r=!0)},o(g){v(f,g),v(m,g),r=!1},d(g){g&&S(e),f&&f.d(g),m&&m.d(g),a=!1,ke(c)}}}function Xe(s,e,t){let{$$slots:n={},$$scope:l}=e;const o=He(n);let{id:i}=e,{checked:r}=e,{hint:a=null}=e,u=o.right!==void 0?"float: none":"";function f(m){F.call(this,s,m)}function _(){r=this.checked,t(0,r)}return s.$$set=m=>{"id"in m&&t(1,i=m.id),"checked"in m&&t(0,r=m.checked),"hint"in m&&t(2,a=m.hint),"$$scope"in m&&t(4,l=m.$$scope)},[r,i,a,u,l,n,f,_]}class Tt extends C{constructor(e){super(),E(this,e,Xe,Ue,V,{id:1,checked:0,hint:2})}}function ue(s,e,t){const n=s.slice();return n[8]=e[t][0],n[9]=e[t][1],n}function fe(s){let e;return{c(){e=b("option"),e.__value="",Y(e,e.__value)},m(t,n){y(t,e,n)},d(t){t&&S(e)}}}function de(s){let e,t=s[9]+"",n,l;return{c(){e=b("option"),n=T(t),e.__value=l=s[8],Y(e,e.__value)},m(o,i){y(o,e,i),w(e,n)},p(o,i){i&8&&t!==(t=o[9]+"")&&x(n,t),i&8&&l!==(l=o[8])&&(e.__value=l,Y(e,e.__value))},d(o){o&&S(e)}}}function Ye(s){let e,t,n,l,o=s[4]&&fe(),i=J(s[3]),r=[];for(let a=0;a<i.length;a+=1)r[a]=de(ue(s,i,a));return{c(){e=b("select"),o&&o.c(),t=ye();for(let a=0;a<r.length;a+=1)r[a].c();p(e,"class","govuk-select"),p(e,"id",s[2]),e.disabled=s[5],s[0]===void 0&&Be(()=>s[7].call(e))},m(a,c){y(a,e,c),o&&o.m(e,null),w(e,t);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);ne(e,s[0],!0),n||(l=[z(e,"change",s[7]),z(e,"change",s[6])],n=!0)},p(a,c){if(a[4]?o||(o=fe(),o.c(),o.m(e,t)):o&&(o.d(1),o=null),c&8){i=J(a[3]);let u;for(u=0;u<i.length;u+=1){const f=ue(a,i,u);r[u]?r[u].p(f,c):(r[u]=de(f),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=i.length}c&4&&p(e,"id",a[2]),c&32&&(e.disabled=a[5]),c&9&&ne(e,a[0])},d(a){a&&S(e),o&&o.d(),Se(r,a),n=!1,ke(l)}}}function Qe(s){let e,t;return e=new Me({props:{label:s[1],id:s[2],$$slots:{default:[Ye]},$$scope:{ctx:s}}}),{c(){H(e.$$.fragment)},m(n,l){M(e,n,l),t=!0},p(n,[l]){const o={};l&2&&(o.label=n[1]),l&4&&(o.id=n[2]),l&4157&&(o.$$scope={dirty:l,ctx:n}),e.$set(o)},i(n){t||(h(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function xe(s,e,t){let{label:n}=e,{id:l}=e,{choices:o}=e,{emptyOption:i=!1}=e,{disabled:r=!1}=e,{value:a}=e;function c(f){F.call(this,s,f)}function u(){a=Pe(this),t(0,a),t(3,o)}return s.$$set=f=>{"label"in f&&t(1,n=f.label),"id"in f&&t(2,l=f.id),"choices"in f&&t(3,o=f.choices),"emptyOption"in f&&t(4,i=f.emptyOption),"disabled"in f&&t(5,r=f.disabled),"value"in f&&t(0,a=f.value)},[a,n,l,o,i,r,c,u]}class et extends C{constructor(e){super(),E(this,e,xe,Qe,V,{label:1,id:2,choices:3,emptyOption:4,disabled:5,value:0})}}function tt(s){let e,t,n;function l(i){s[2](i)}let o={label:"Basemap",id:"basemap",choices:[["streets","Streets"],["hybrid","Satellite"],["dataviz","Dataviz"]]};return s[0]!==void 0&&(o.value=s[0]),e=new et({props:o}),q.push(()=>ee(e,"value",l)),e.$on("change",s[1]),{c(){H(e.$$.fragment)},m(i,r){M(e,i,r),n=!0},p(i,[r]){const a={};!t&&r&1&&(t=!0,a.value=i[0],te(()=>t=!1)),e.$set(a)},i(i){n||(h(e.$$.fragment,i),n=!0)},o(i){v(e.$$.fragment,i),n=!1},d(i){B(e,i)}}}function nt(s,e,t){let{style:n}=e;function l(){let i=new URLSearchParams(window.location.search);i.set("style",n);let r=`${window.location.pathname}?${i.toString()}${window.location.hash}`;window.location.href=r}function o(i){n=i,t(0,n)}return s.$$set=i=>{"style"in i&&t(0,n=i.style)},[n,l,o]}class qt extends C{constructor(e){super(),E(this,e,nt,tt,V,{style:0})}}function lt(s){let e,t,n,l,o,i,r;const a=s[3].default,c=I(a,s,s[2],null);return{c(){e=b("details"),t=b("summary"),n=b("span"),l=T(s[0]),o=L(),i=b("div"),c&&c.c(),p(n,"class","govuk-details__summary-text"),p(t,"class","govuk-details__summary"),p(i,"class","govuk-details__text"),e.open=s[1],p(e,"class","govuk-details"),p(e,"data-module","govuk-details")},m(u,f){y(u,e,f),w(e,t),w(t,n),w(n,l),w(e,o),w(e,i),c&&c.m(i,null),r=!0},p(u,[f]){(!r||f&1)&&x(l,u[0]),c&&c.p&&(!r||f&4)&&D(c,a,u,u[2],r?R(a,u[2],f,null):O(u[2]),null),(!r||f&2)&&(e.open=u[1])},i(u){r||(h(c,u),r=!0)},o(u){v(c,u),r=!1},d(u){u&&S(e),c&&c.d(u)}}}function st(s,e,t){let{$$slots:n={},$$scope:l}=e,{label:o}=e,{open:i=!1}=e;return s.$$set=r=>{"label"in r&&t(0,o=r.label),"open"in r&&t(1,i=r.open),"$$scope"in r&&t(2,l=r.$$scope)},[o,i,l,n]}class Ee extends C{constructor(e){super(),E(this,e,st,lt,V,{label:0,open:1})}}function ot(s){let e;return{c(){e=b("span"),p(e,"class","svelte-kzgqtg"),X(e,"background",s[0])},m(t,n){y(t,e,n)},p(t,[n]){n&1&&X(e,"background",t[0])},i:Q,o:Q,d(t){t&&S(e)}}}function it(s,e,t){let{color:n}=e;return s.$$set=l=>{"color"in l&&t(0,n=l.color)},[n]}class at extends C{constructor(e){super(),E(this,e,it,ot,V,{color:0})}}const rt="/atip/streetview-rework/assets/help-d011708a.svg";function ct(s){let e,t;const n=s[1].default,l=I(n,s,s[4],null);return{c(){e=b("div"),l&&l.c(),p(e,"class","govuk-prose")},m(o,i){y(o,e,i),l&&l.m(e,null),t=!0},p(o,i){l&&l.p&&(!t||i&16)&&D(l,n,o,o[4],t?R(n,o[4],i,null):O(o[4]),null)},i(o){t||(h(l,o),t=!0)},o(o){v(l,o),t=!1},d(o){o&&S(e),l&&l.d(o)}}}function ut(s){let e,t,n,l,o,i,r,a,c;function u(_){s[3](_)}let f={title:"Help",$$slots:{default:[ct]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.open=s[0]),o=new Ie({props:f}),q.push(()=>ee(o,"open",u)),{c(){e=b("button"),t=b("img"),l=L(),H(o.$$.fragment),$e(t.src,n=rt)||p(t,"src",n),p(t,"title","Help"),p(t,"alt","Help"),p(e,"class","svelte-7d9d1l")},m(_,m){y(_,e,m),w(e,t),y(_,l,m),M(o,_,m),r=!0,a||(c=z(e,"click",s[2]),a=!0)},p(_,[m]){const g={};m&16&&(g.$$scope={dirty:m,ctx:_}),!i&&m&1&&(i=!0,g.open=_[0],te(()=>i=!1)),o.$set(g)},i(_){r||(h(o.$$.fragment,_),r=!0)},o(_){v(o.$$.fragment,_),r=!1},d(_){_&&(S(e),S(l)),B(o,_),a=!1,c()}}}function ft(s,e,t){let{$$slots:n={},$$scope:l}=e,o=!1;const i=()=>t(0,o=!0);function r(a){o=a,t(0,o)}return s.$$set=a=>{"$$scope"in a&&t(4,l=a.$$scope)},[o,n,i,r,l]}class Zt extends C{constructor(e){super(),E(this,e,ft,ut,V,{})}}const dt=s=>({}),me=s=>({}),mt=s=>({}),_e=s=>({});function _t(s){let e,t,n,l,o,i,r,a,c,u,f;const _=s[3].sidebar,m=I(_,s,s[2],_e),g=s[3].main,d=I(g,s,s[2],me);return{c(){e=b("div"),t=b("aside"),n=b("div"),m&&m.c(),l=L(),o=b("button"),o.textContent="â†’",r=L(),a=b("main"),d&&d.c(),p(n,"class","sidebar-content content-container svelte-ect12w"),p(o,"type","button"),p(o,"class","sidebar-toggle rounded-rect svelte-ect12w"),p(t,"class",i=le(s[0]?"":"collapsed")+" svelte-ect12w"),p(a,"class","svelte-ect12w"),p(e,"class","overall-layout svelte-ect12w")},m(k,P){y(k,e,P),w(e,t),w(t,n),m&&m.m(n,null),w(t,l),w(t,o),w(e,r),w(e,a),d&&d.m(a,null),c=!0,u||(f=z(o,"click",s[1]),u=!0)},p(k,[P]){m&&m.p&&(!c||P&4)&&D(m,_,k,k[2],c?R(_,k[2],P,mt):O(k[2]),_e),(!c||P&1&&i!==(i=le(k[0]?"":"collapsed")+" svelte-ect12w"))&&p(t,"class",i),d&&d.p&&(!c||P&4)&&D(d,g,k,k[2],c?R(g,k[2],P,dt):O(k[2]),me)},i(k){c||(h(m,k),h(d,k),c=!0)},o(k){v(m,k),v(d,k),c=!1},d(k){k&&S(e),m&&m.d(k),d&&d.d(k),u=!1,f()}}}function pt(s,e,t){let{$$slots:n={},$$scope:l}=e,o=!0;function i(){t(0,o=!o)}return s.$$set=r=>{"$$scope"in r&&t(2,l=r.$$scope)},[o,i,l,n]}class Ft extends C{constructor(e){super(),E(this,e,pt,_t,V,{})}}function pe(s,e,t){const n=s.slice();return n[1]=e[t][0],n[2]=e[t][1],n}function ge(s){let e,t,n,l=s[1]+"",o,i,r;return t=new at({props:{color:s[2]}}),{c(){e=b("li"),H(t.$$.fragment),n=L(),o=T(l),i=L()},m(a,c){y(a,e,c),M(t,e,null),w(e,n),w(e,o),w(e,i),r=!0},p(a,c){const u={};c&1&&(u.color=a[2]),t.$set(u),(!r||c&1)&&l!==(l=a[1]+"")&&x(o,l)},i(a){r||(h(t.$$.fragment,a),r=!0)},o(a){v(t.$$.fragment,a),r=!1},d(a){a&&S(e),B(t)}}}function gt(s){let e,t,n=J(s[0]),l=[];for(let i=0;i<n.length;i+=1)l[i]=ge(pe(s,n,i));const o=i=>v(l[i],1,1,()=>{l[i]=null});return{c(){e=b("ul");for(let i=0;i<l.length;i+=1)l[i].c()},m(i,r){y(i,e,r);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null);t=!0},p(i,r){if(r&1){n=J(i[0]);let a;for(a=0;a<n.length;a+=1){const c=pe(i,n,a);l[a]?(l[a].p(c,r),h(l[a],1)):(l[a]=ge(c),l[a].c(),h(l[a],1),l[a].m(e,null))}for(W(),a=n.length;a<l.length;a+=1)o(a);A()}},i(i){if(!t){for(let r=0;r<n.length;r+=1)h(l[r]);t=!0}},o(i){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)v(l[r]);t=!1},d(i){i&&S(e),Se(l,i)}}}function ht(s){let e,t;return e=new Ee({props:{label:"Legend",$$slots:{default:[gt]},$$scope:{ctx:s}}}),{c(){H(e.$$.fragment)},m(n,l){M(e,n,l),t=!0},p(n,[l]){const o={};l&33&&(o.$$scope={dirty:l,ctx:n}),e.$set(o)},i(n){t||(h(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function bt(s,e,t){let{rows:n}=e;return s.$$set=l=>{"rows"in l&&t(0,n=l.rows)},[n]}class Jt extends C{constructor(e){super(),E(this,e,bt,ht,V,{rows:0})}}function he(s){let e;const t=s[5].default,n=I(t,s,s[4],null);return{c(){n&&n.c()},m(l,o){n&&n.m(l,o),e=!0},p(l,o){n&&n.p&&(!e||o&16)&&D(n,t,l,l[4],e?R(t,l[4],o,null):O(l[4]),null)},i(l){e||(h(n,l),e=!0)},o(l){v(n,l),e=!1},d(l){n&&n.d(l)}}}function vt(s){let e,t,n=s[1]&&he(s);return{c(){e=b("div"),n&&n.c(),p(e,"class","map svelte-12dpf1u")},m(l,o){y(l,e,o),n&&n.m(e,null),s[6](e),t=!0},p(l,[o]){l[1]?n?(n.p(l,o),o&2&&h(n,1)):(n=he(l),n.c(),h(n,1),n.m(e,null)):n&&(W(),v(n,1,1,()=>{n=null}),A())},i(l){t||(h(n),t=!0)},o(l){v(n),t=!1},d(l){l&&S(e),n&&n.d(),s[6](null)}}}function wt(s,e,t){let{$$slots:n={},$$scope:l}=e,{style:o}=e,{startBounds:i=null}=e,r,a,c=!1,u=!window.location.hash;De("setCamera",u),Oe(()=>{r=new K.Map({container:a,style:`https://api.maptiler.com/maps/${o}/style.json?key=MZEJTanw3WpxRvt7qDfo`,hash:!0}),r.addControl(new K.ScaleControl({})),r.addControl(new K.NavigationControl({visualizePitch:!0}),"bottom-right"),r.on("load",()=>{t(1,c=!0),u&&i&&r.fitBounds(i,{animate:!1}),Z.set(r)}),new ResizeObserver(()=>{r.resize()}).observe(a)}),Re(()=>{r.remove()});function f(_){q[_?"unshift":"push"](()=>{a=_,t(0,a)})}return s.$$set=_=>{"style"in _&&t(2,o=_.style),"startBounds"in _&&t(3,i=_.startBounds),"$$scope"in _&&t(4,l=_.$$scope)},[a,c,o,i,l,n,f]}class Wt extends C{constructor(e){super(),E(this,e,wt,vt,V,{style:2,startBounds:3})}}const kt="/atip/streetview-rework/assets/zoom_out_map-b2e1091a.svg";function yt(s){let e,t;return{c(){e=b("img"),$e(e.src,t=kt)||p(e,"src",t),p(e,"alt","Zoom to show entire boundary")},m(n,l){y(n,e,l)},p:Q,d(n){n&&S(e)}}}function St(s){let e,t;return e=new Ce({props:{title:"Zoom to show entire boundary",$$slots:{default:[yt]},$$scope:{ctx:s}}}),e.$on("click",s[0]),{c(){H(e.$$.fragment)},m(n,l){M(e,n,l),t=!0},p(n,[l]){const o={};l&8&&(o.$$scope={dirty:l,ctx:n}),e.$set(o)},i(n){t||(h(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function $t(s,e,t){let n;G(s,Z,i=>t(2,n=i));let{boundaryGeojson:l}=e;function o(){n.fitBounds(je(l),{padding:20,animate:!0,duration:500})}return s.$$set=i=>{"boundaryGeojson"in i&&t(1,l=i.boundaryGeojson)},[o,l]}class At extends C{constructor(e){super(),E(this,e,$t,St,V,{boundaryGeojson:1})}}const $={area:"#D94324",route:"#555F5E",crossing:"#4daf4a",other:"#984ea3",preapp:"#e41a1c",outline:"#377eb8","reserved matters":"#4daf4a","local plan":"#984ea3",hovering:"black",lineEndpointColor:"black"},Ct=10,U=10;let j="interventions";function Et(s,e,t){let n,l;G(s,Z,a=>t(1,n=a)),G(s,ze,a=>t(2,l=a));let{colorInterventions:o}=e;Ne(n,j,l);const i=["!=","hide_while_editing",!0];return se(n,{id:"interventions-points",source:j,filter:["all",Te,i,["!=","endpoint",!0]],color:o,radius:Ct}),oe(n,{id:"interventions-lines",source:j,filter:["all",qe,i],color:o,width:U}),se(n,{id:"interventions-lines-endpoints",source:j,filter:["==","endpoint",!0],radius:.5*U,opacity:0,strokeColor:$.lineEndpointColor,strokeWidth:2}),Ge(n,{id:"interventions-polygons",source:j,filter:["all",ie,i],color:o,opacity:.2}),oe(n,{id:"interventions-polygon-outlines",source:j,filter:["all",ie,i],color:o,opacity:.5,width:.7*U}),s.$$set=a=>{"colorInterventions"in a&&t(0,o=a.colorInterventions)},s.$$.update=()=>{if(s.$$.dirty&6){let a=JSON.parse(JSON.stringify(l)),c=[];for(let u of a.features)if(u.geometry.type=="LineString"&&!u.properties.hide_while_editing)for(let f of[u.geometry.coordinates[0],u.geometry.coordinates[u.geometry.coordinates.length-1]])c.push({type:"Feature",properties:{endpoint:!0},geometry:{type:"Point",coordinates:f}});a.features=a.features.concat(c),n.getSource(j).setData(a)}},[o,n,l]}class Kt extends C{constructor(e){super(),E(this,e,Et,null,V,{colorInterventions:0})}}function Ut(s){return{v1:"Scheme Design",v2:"Experimental Scheme Design",planning:"Development Planning",criticals:"Critical Issues",atf4:"ATF4 Scheme"}[s]}function Xt(s){return{v1:"an intervention",v2:"an intervention",planning:"a development",criticals:"a critical issue",atf4:"an intervention"}[s]}function Yt(s){return{v1:"interventions",v2:"interventions",planning:"developments",criticals:"critical issues",atf4:"interventions"}[s]}function Qt(s){return s=="planning"?ae(["get","reference_type",["get","planning"]],{preapp:$.preapp,outline:$.outline,"reserved matters":$["reserved matters"],"local plan":$["local plan"]},"black"):ae(["get","intervention_type"],{area:$.area,route:$.route,crossing:$.crossing,other:$.other},"white")}function xt(s){return s=="planning"?[["Preapp",$.preapp],["Outline",$.outline],["Reserved matters",$["reserved matters"]],["Local plan",$["local plan"]]]:[["Areas",$.area],["Routes",$.route],["Crossings",$.crossing],["Other",$.other]]}const en=["click","dblclick","mousemove","mousedown","mouseup","mouseout","dragstart"],tn=["keypress","keyup","keydown"];class nn{constructor(){N(this,"mapHandlers");N(this,"documentHandlers");this.mapHandlers={click:e=>{},dblclick:e=>{},mousemove:e=>{},mousedown:e=>{},mouseup:e=>{},mouseout:e=>{},dragstart:e=>{}},this.documentHandlers={keypress:e=>{},keyup:e=>{},keydown:e=>{}}}}class Vt{constructor(e,t){N(this,"id");N(this,"defaultPaintValues");this.id=e,this.defaultPaintValues=t}setProperty(e,t,n){e.setPaintProperty(this.id,t,n)}returnToDefaultPropertyValues(e){this.defaultPaintValues.forEach(([t,n])=>{e.setPaintProperty(this.id,t,n)})}}const Lt=["road_minor","road_secondary_tertiary","road_motorway","road_trunk_primary","road_link","road_motorway_link","road_trunk_primary_link","road_minor","bridge_street","bridge_minor","bridge_secondary_tertiary","bridge_trunk_primary","bridge_motorway","tunnel_minor","tunnel_secondary_tertiary","tunnel_trunk_primary","tunnel_motorway","road_service_track"],Ht=()=>Ze(Z).getStyle().layers.filter(e=>Lt.includes(e.id)).map(e=>{const t=Object.keys(e.paint?e.paint:{}).map(n=>[n,e.paint[n]]);return new Vt(e.id,t)});function be(s){let e,t,n,l;return e=new Fe({props:{$$slots:{default:[Mt]},$$scope:{ctx:s}}}),e.$on("click{enableStreetView}",s[7]),n=new Ce({props:{$$slots:{default:[Bt]},$$scope:{ctx:s}}}),n.$on("click{disableStreetView}",s[8]),{c(){H(e.$$.fragment),t=L(),H(n.$$.fragment)},m(o,i){M(e,o,i),y(o,t,i),M(n,o,i),l=!0},i(o){l||(h(e.$$.fragment,o),h(n.$$.fragment,o),l=!0)},o(o){v(e.$$.fragment,o),v(n.$$.fragment,o),l=!1},d(o){o&&S(t),B(e,o),B(n,o)}}}function Mt(s){let e;return{c(){e=T("Enable Street View")},m(t,n){y(t,e,n)},d(t){t&&S(e)}}}function Bt(s){let e;return{c(){e=T("Disable Street View")},m(t,n){y(t,e,n)},d(t){t&&S(e)}}}function ve(s){let e,t,n,l,o;function i(a){s[9](a)}let r={legend:"Source",id:"streetViewImagery",choices:[["google","Google Street View"],["bing","Bing Streetside"]],inlineSmall:!0};return s[3].streetViewImagery!==void 0&&(r.value=s[3].streetViewImagery),e=new Je({props:r}),q.push(()=>ee(e,"value",i)),l=new Ee({props:{label:"Help",$$slots:{default:[Pt]},$$scope:{ctx:s}}}),{c(){H(e.$$.fragment),n=L(),H(l.$$.fragment)},m(a,c){M(e,a,c),y(a,n,c),M(l,a,c),o=!0},p(a,c){const u={};!t&&c&8&&(t=!0,u.value=a[3].streetViewImagery,te(()=>t=!1)),e.$set(u);const f={};c&4098&&(f.$$scope={dirty:c,ctx:a}),l.$set(f)},i(a){o||(h(e.$$.fragment,a),h(l.$$.fragment,a),o=!0)},o(a){v(e.$$.fragment,a),v(l.$$.fragment,a),o=!1},d(a){a&&S(n),B(e,a),B(l,a)}}}function we(s){let e;return{c(){e=b("li"),e.innerHTML=`Press <b>Escape</b>
          to exit this mode`},m(t,n){y(t,e,n)},d(t){t&&S(e)}}}function Pt(s){let e,t,n,l=s[1]&&we();return{c(){e=b("ul"),t=b("li"),t.innerHTML=`<b>Click</b>
        on the map to open a new tab with a 3rd-party imagery provider`,n=L(),l&&l.c()},m(o,i){y(o,e,i),w(e,t),w(e,n),l&&l.m(e,null)},p(o,i){o[1]?l||(l=we(),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},d(o){o&&S(e),l&&l.d()}}}function It(s){let e,t,n,l=s[0]&&be(s),o=s[2]&&ve(s);return{c(){l&&l.c(),e=L(),o&&o.c(),t=ye()},m(i,r){l&&l.m(i,r),y(i,e,r),o&&o.m(i,r),y(i,t,r),n=!0},p(i,[r]){i[0]?l?r&1&&h(l,1):(l=be(i),l.c(),h(l,1),l.m(e.parentNode,e)):l&&(W(),v(l,1,1,()=>{l=null}),A()),i[2]?o?(o.p(i,r),r&4&&h(o,1)):(o=ve(i),o.c(),h(o,1),o.m(t.parentNode,t)):o&&(W(),v(o,1,1,()=>{o=null}),A())},i(i){n||(h(l),h(o),n=!0)},o(i){v(l),v(o),n=!1},d(i){i&&(S(e),S(t)),l&&l.d(i),o&&o.d(i)}}}function Dt(s,e,t){let n,l;G(s,Z,d=>t(10,n=d)),G(s,re,d=>t(3,l=d));let{displayEnableButton:o=!1}=e,{escapeKeyExits:i=!1}=e;const r=Ht();let a;const c=d=>{if(a){let k=d.lngLat.lng,P=d.lngLat.lat;l.streetViewImagery=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${P},${k}&cbp=11,0,0,0,0`,"_blank"):l.streetViewImagery=="bing"&&window.open(`https://www.bing.com/maps?cp=${P}~${k}&style=x`,"_blank")}},u=()=>{t(2,a=!0),n.getCanvas().style.cursor="zoom-in",r.forEach(d=>{d.setProperty(n,"line-color","blue")})},f=()=>{t(2,a=!1),n.getCanvas().style.cursor="inherit",r.forEach(d=>{d.returnToDefaultPropertyValues(n)})};function _(d){F.call(this,s,d)}function m(d){F.call(this,s,d)}function g(d){s.$$.not_equal(l.streetViewImagery,d)&&(l.streetViewImagery=d,re.set(l))}return s.$$set=d=>{"displayEnableButton"in d&&t(0,o=d.displayEnableButton),"escapeKeyExits"in d&&t(1,i=d.escapeKeyExits)},[o,i,a,l,c,u,f,_,m,g]}class Ot extends C{constructor(e){super(),E(this,e,Dt,It,V,{displayEnableButton:0,escapeKeyExits:1,handleMapClickEvent:4,enableStreetView:5,disableStreetView:6})}get handleMapClickEvent(){return this.$$.ctx[4]}get enableStreetView(){return this.$$.ctx[5]}get disableStreetView(){return this.$$.ctx[6]}}function Rt(s){let e,t,n={};return e=new Ot({props:n}),s[5](e),{c(){H(e.$$.fragment)},m(l,o){M(e,l,o),t=!0},p(l,[o]){const i={};e.$set(i)},i(l){t||(h(e.$$.fragment,l),t=!0)},o(l){v(e.$$.fragment,l),t=!1},d(l){s[5](null),B(e,l)}}}function jt(s,e,t){let{eventHandler:n}=e,{changeMode:l}=e,o;function i(){t(1,n.mapHandlers.click=o.handleMapClickEvent,n),o.enableStreetView()}function r(){o.disableStreetView()}n.documentHandlers.keydown=c=>{c.key=="Escape"&&(l("edit-attribute"),c.preventDefault())};function a(c){q[c?"unshift":"push"](()=>{o=c,t(0,o)})}return s.$$set=c=>{"eventHandler"in c&&t(1,n=c.eventHandler),"changeMode"in c&&t(2,l=c.changeMode)},[o,n,l,i,r,a]}class ln extends C{constructor(e){super(),E(this,e,jt,Rt,V,{eventHandler:1,changeMode:2,start:3,stop:4})}get start(){return this.$$.ctx[3]}get stop(){return this.$$.ctx[4]}}export{qt as B,Ee as C,tn as D,nn as E,Zt as H,Kt as I,Ft as L,en as M,ln as S,At as Z,Ct as a,Gt as b,$ as c,Tt as d,et as e,Yt as f,Ut as g,Wt as h,Qt as i,Jt as j,xt as k,U as l,at as m,Xt as s};
