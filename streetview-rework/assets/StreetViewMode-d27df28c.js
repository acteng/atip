var Ce=Object.defineProperty;var $e=(s,e,n)=>e in s?Ce(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n;var N=(s,e,n)=>($e(s,typeof e!="symbol"?e+"":e,n),n);import{S as $,i as L,s as H,H as I,e as p,h as _,j as w,k as v,L as M,M as P,N as V,t as b,l as k,p as S,f as E,Y as J,w as z,aM as be,Q as ve,a_ as Le,F as He,g as B,m as D,q as O,W as G,ae as ke,aN as Ee,a$ as te,X as ye,b0 as Ie,v as Q,u as U,V as X,b as F,c as Y,o as K,x as T,T as Me,aI as we,b1 as ne,y as x,n as ee,b2 as Pe,r as Ve,B as W,C as A,ah as Be,a as De,$ as q,D as Oe,a3 as Re,a1 as je,a9 as le,a8 as se,a2 as ze,ad as Ne,ac as qe,ab as oe,aA as ae,aD as Ae,aB as ie,R as Ge}from"./data_getter-3b79629f.js";function Te(s){let e,n,t;const l=s[3].default,o=I(l,s,s[2],null);return{c(){e=p("fieldset"),n=p("div"),o&&o.c(),_(n,"class",s[0]),_(n,"data-module","govuk-checkboxes"),_(e,"class","govuk-fieldset")},m(a,r){w(a,e,r),v(e,n),o&&o.m(n,null),t=!0},p(a,[r]){o&&o.p&&(!t||r&4)&&M(o,l,a,a[2],t?V(l,a[2],r,null):P(a[2]),null)},i(a){t||(b(o,a),t=!0)},o(a){k(o,a),t=!1},d(a){a&&S(e),o&&o.d(a)}}}function Fe(s,e,n){let{$$slots:t={},$$scope:l}=e,{small:o=!1}=e,a=o?"govuk-checkboxes--small":"govuk-checkboxes";return s.$$set=r=>{"small"in r&&n(1,o=r.small),"$$scope"in r&&n(2,l=r.$$scope)},[a,o,l,t]}class Vt extends ${constructor(e){super(),L(this,e,Fe,Te,H,{small:1})}}const We=s=>({}),re=s=>({});function Ze(s){let e,n,t,l,o,a,r,i,f;const u=s[5].default,d=I(u,s,s[4],null),m=s[5].right,c=I(m,s,s[4],re);return{c(){e=p("div"),n=p("input"),t=E(),l=p("label"),d&&d.c(),o=E(),a=p("span"),c&&c.c(),_(n,"type","checkbox"),_(n,"class","govuk-checkboxes__input"),_(n,"id",s[1]),_(l,"class","govuk-label govuk-checkboxes__label"),_(l,"for",s[1]),_(l,"title",s[2]),J(a,"float","right"),_(e,"class","govuk-checkboxes__item"),_(e,"style",s[3])},m(g,h){w(g,e,h),v(e,n),n.checked=s[0],v(e,t),v(e,l),d&&d.m(l,null),v(e,o),v(e,a),c&&c.m(a,null),r=!0,i||(f=[z(n,"change",s[7]),z(n,"change",s[6])],i=!0)},p(g,[h]){(!r||h&2)&&_(n,"id",g[1]),h&1&&(n.checked=g[0]),d&&d.p&&(!r||h&16)&&M(d,u,g,g[4],r?V(u,g[4],h,null):P(g[4]),null),(!r||h&2)&&_(l,"for",g[1]),(!r||h&4)&&_(l,"title",g[2]),c&&c.p&&(!r||h&16)&&M(c,m,g,g[4],r?V(m,g[4],h,We):P(g[4]),re)},i(g){r||(b(d,g),b(c,g),r=!0)},o(g){k(d,g),k(c,g),r=!1},d(g){g&&S(e),d&&d.d(g),c&&c.d(g),i=!1,be(f)}}}function Je(s,e,n){let{$$slots:t={},$$scope:l}=e;const o=Le(t);let{id:a}=e,{checked:r}=e,{hint:i=null}=e,u=o.right!==void 0?"float: none":"";function d(c){ve.call(this,s,c)}function m(){r=this.checked,n(0,r)}return s.$$set=c=>{"id"in c&&n(1,a=c.id),"checked"in c&&n(0,r=c.checked),"hint"in c&&n(2,i=c.hint),"$$scope"in c&&n(4,l=c.$$scope)},[r,a,i,u,l,t,d,m]}class Bt extends ${constructor(e){super(),L(this,e,Je,Ze,H,{id:1,checked:0,hint:2})}}function ce(s,e,n){const t=s.slice();return t[8]=e[n][0],t[9]=e[n][1],t}function ue(s){let e;return{c(){e=p("option"),e.__value="",Q(e,e.__value)},m(n,t){w(n,e,t)},d(n){n&&S(e)}}}function fe(s){let e,n=s[9]+"",t,l;return{c(){e=p("option"),t=U(n),e.__value=l=s[8],Q(e,e.__value)},m(o,a){w(o,e,a),v(e,t)},p(o,a){a&8&&n!==(n=o[9]+"")&&X(t,n),a&8&&l!==(l=o[8])&&(e.__value=l,Q(e,e.__value))},d(o){o&&S(e)}}}function Qe(s){let e,n,t,l,o=s[4]&&ue(),a=G(s[3]),r=[];for(let i=0;i<a.length;i+=1)r[i]=fe(ce(s,a,i));return{c(){e=p("select"),o&&o.c(),n=ke();for(let i=0;i<r.length;i+=1)r[i].c();_(e,"class","govuk-select"),_(e,"id",s[2]),e.disabled=s[5],s[0]===void 0&&Ee(()=>s[7].call(e))},m(i,f){w(i,e,f),o&&o.m(e,null),v(e,n);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);te(e,s[0],!0),t||(l=[z(e,"change",s[7]),z(e,"change",s[6])],t=!0)},p(i,f){if(i[4]?o||(o=ue(),o.c(),o.m(e,n)):o&&(o.d(1),o=null),f&8){a=G(i[3]);let u;for(u=0;u<a.length;u+=1){const d=ce(i,a,u);r[u]?r[u].p(d,f):(r[u]=fe(d),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=a.length}f&4&&_(e,"id",i[2]),f&32&&(e.disabled=i[5]),f&9&&te(e,i[0])},d(i){i&&S(e),o&&o.d(),ye(r,i),t=!1,be(l)}}}function Ue(s){let e,n;return e=new He({props:{label:s[1],id:s[2],$$slots:{default:[Qe]},$$scope:{ctx:s}}}),{c(){B(e.$$.fragment)},m(t,l){D(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.label=t[1]),l&4&&(o.id=t[2]),l&4157&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function Xe(s,e,n){let{label:t}=e,{id:l}=e,{choices:o}=e,{emptyOption:a=!1}=e,{disabled:r=!1}=e,{value:i}=e;function f(d){ve.call(this,s,d)}function u(){i=Ie(this),n(0,i),n(3,o)}return s.$$set=d=>{"label"in d&&n(1,t=d.label),"id"in d&&n(2,l=d.id),"choices"in d&&n(3,o=d.choices),"emptyOption"in d&&n(4,a=d.emptyOption),"disabled"in d&&n(5,r=d.disabled),"value"in d&&n(0,i=d.value)},[i,t,l,o,a,r,f,u]}class Ye extends ${constructor(e){super(),L(this,e,Xe,Ue,H,{label:1,id:2,choices:3,emptyOption:4,disabled:5,value:0})}}function Ke(s){let e,n,t;function l(a){s[2](a)}let o={label:"Basemap",id:"basemap",choices:[["streets","Streets"],["hybrid","Satellite"],["dataviz","Dataviz"]]};return s[0]!==void 0&&(o.value=s[0]),e=new Ye({props:o}),F.push(()=>Y(e,"value",l)),e.$on("change",s[1]),{c(){B(e.$$.fragment)},m(a,r){D(e,a,r),t=!0},p(a,[r]){const i={};!n&&r&1&&(n=!0,i.value=a[0],K(()=>n=!1)),e.$set(i)},i(a){t||(b(e.$$.fragment,a),t=!0)},o(a){k(e.$$.fragment,a),t=!1},d(a){O(e,a)}}}function xe(s,e,n){let{style:t}=e;function l(){let a=new URLSearchParams(window.location.search);a.set("style",t);let r=`${window.location.pathname}?${a.toString()}${window.location.hash}`;window.location.href=r}function o(a){t=a,n(0,t)}return s.$$set=a=>{"style"in a&&n(0,t=a.style)},[t,l,o]}class Dt extends ${constructor(e){super(),L(this,e,xe,Ke,H,{style:0})}}function et(s){let e,n,t,l,o,a,r;const i=s[3].default,f=I(i,s,s[2],null);return{c(){e=p("details"),n=p("summary"),t=p("span"),l=U(s[0]),o=E(),a=p("div"),f&&f.c(),_(t,"class","govuk-details__summary-text"),_(n,"class","govuk-details__summary"),_(a,"class","govuk-details__text"),e.open=s[1],_(e,"class","govuk-details"),_(e,"data-module","govuk-details")},m(u,d){w(u,e,d),v(e,n),v(n,t),v(t,l),v(e,o),v(e,a),f&&f.m(a,null),r=!0},p(u,[d]){(!r||d&1)&&X(l,u[0]),f&&f.p&&(!r||d&4)&&M(f,i,u,u[2],r?V(i,u[2],d,null):P(u[2]),null),(!r||d&2)&&(e.open=u[1])},i(u){r||(b(f,u),r=!0)},o(u){k(f,u),r=!1},d(u){u&&S(e),f&&f.d(u)}}}function tt(s,e,n){let{$$slots:t={},$$scope:l}=e,{label:o}=e,{open:a=!1}=e;return s.$$set=r=>{"label"in r&&n(0,o=r.label),"open"in r&&n(1,a=r.open),"$$scope"in r&&n(2,l=r.$$scope)},[o,a,l,t]}class Se extends ${constructor(e){super(),L(this,e,tt,et,H,{label:0,open:1})}}function nt(s){let e;return{c(){e=p("span"),_(e,"class","svelte-kzgqtg"),J(e,"background",s[0])},m(n,t){w(n,e,t)},p(n,[t]){t&1&&J(e,"background",n[0])},i:T,o:T,d(n){n&&S(e)}}}function lt(s,e,n){let{color:t}=e;return s.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class st extends ${constructor(e){super(),L(this,e,lt,nt,H,{color:0})}}const ot="/atip/streetview-rework/assets/help-d011708a.svg";function at(s){let e,n;const t=s[1].default,l=I(t,s,s[4],null);return{c(){e=p("div"),l&&l.c(),_(e,"class","govuk-prose")},m(o,a){w(o,e,a),l&&l.m(e,null),n=!0},p(o,a){l&&l.p&&(!n||a&16)&&M(l,t,o,o[4],n?V(t,o[4],a,null):P(o[4]),null)},i(o){n||(b(l,o),n=!0)},o(o){k(l,o),n=!1},d(o){o&&S(e),l&&l.d(o)}}}function it(s){let e,n,t,l,o,a,r,i,f;function u(m){s[3](m)}let d={title:"Help",$$slots:{default:[at]},$$scope:{ctx:s}};return s[0]!==void 0&&(d.open=s[0]),o=new Me({props:d}),F.push(()=>Y(o,"open",u)),{c(){e=p("button"),n=p("img"),l=E(),B(o.$$.fragment),we(n.src,t=ot)||_(n,"src",t),_(n,"title","Help"),_(n,"alt","Help"),_(e,"class","svelte-7d9d1l")},m(m,c){w(m,e,c),v(e,n),w(m,l,c),D(o,m,c),r=!0,i||(f=z(e,"click",s[2]),i=!0)},p(m,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:m}),!a&&c&1&&(a=!0,g.open=m[0],K(()=>a=!1)),o.$set(g)},i(m){r||(b(o.$$.fragment,m),r=!0)},o(m){k(o.$$.fragment,m),r=!1},d(m){m&&(S(e),S(l)),O(o,m),i=!1,f()}}}function rt(s,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const a=()=>n(0,o=!0);function r(i){o=i,n(0,o)}return s.$$set=i=>{"$$scope"in i&&n(4,l=i.$$scope)},[o,t,a,r,l]}class Ot extends ${constructor(e){super(),L(this,e,rt,it,H,{})}}const ct=s=>({}),de=s=>({}),ut=s=>({}),me=s=>({});function ft(s){let e,n,t,l,o,a,r,i,f,u,d;const m=s[3].sidebar,c=I(m,s,s[2],me),g=s[3].main,h=I(g,s,s[2],de);return{c(){e=p("div"),n=p("aside"),t=p("div"),c&&c.c(),l=E(),o=p("button"),o.textContent="â†’",r=E(),i=p("main"),h&&h.c(),_(t,"class","sidebar-content content-container svelte-ect12w"),_(o,"type","button"),_(o,"class","sidebar-toggle rounded-rect svelte-ect12w"),_(n,"class",a=ne(s[0]?"":"collapsed")+" svelte-ect12w"),_(i,"class","svelte-ect12w"),_(e,"class","overall-layout svelte-ect12w")},m(y,R){w(y,e,R),v(e,n),v(n,t),c&&c.m(t,null),v(n,l),v(n,o),v(e,r),v(e,i),h&&h.m(i,null),f=!0,u||(d=z(o,"click",s[1]),u=!0)},p(y,[R]){c&&c.p&&(!f||R&4)&&M(c,m,y,y[2],f?V(m,y[2],R,ut):P(y[2]),me),(!f||R&1&&a!==(a=ne(y[0]?"":"collapsed")+" svelte-ect12w"))&&_(n,"class",a),h&&h.p&&(!f||R&4)&&M(h,g,y,y[2],f?V(g,y[2],R,ct):P(y[2]),de)},i(y){f||(b(c,y),b(h,y),f=!0)},o(y){k(c,y),k(h,y),f=!1},d(y){y&&S(e),c&&c.d(y),h&&h.d(y),u=!1,d()}}}function dt(s,e,n){let{$$slots:t={},$$scope:l}=e,o=!0;function a(){n(0,o=!o)}return s.$$set=r=>{"$$scope"in r&&n(2,l=r.$$scope)},[o,a,l,t]}class Rt extends ${constructor(e){super(),L(this,e,dt,ft,H,{})}}function _e(s,e,n){const t=s.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function ge(s){let e,n,t,l=s[1]+"",o,a,r;return n=new st({props:{color:s[2]}}),{c(){e=p("li"),B(n.$$.fragment),t=E(),o=U(l),a=E()},m(i,f){w(i,e,f),D(n,e,null),v(e,t),v(e,o),v(e,a),r=!0},p(i,f){const u={};f&1&&(u.color=i[2]),n.$set(u),(!r||f&1)&&l!==(l=i[1]+"")&&X(o,l)},i(i){r||(b(n.$$.fragment,i),r=!0)},o(i){k(n.$$.fragment,i),r=!1},d(i){i&&S(e),O(n)}}}function mt(s){let e,n,t=G(s[0]),l=[];for(let a=0;a<t.length;a+=1)l[a]=ge(_e(s,t,a));const o=a=>k(l[a],1,1,()=>{l[a]=null});return{c(){e=p("ul");for(let a=0;a<l.length;a+=1)l[a].c()},m(a,r){w(a,e,r);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(a,r){if(r&1){t=G(a[0]);let i;for(i=0;i<t.length;i+=1){const f=_e(a,t,i);l[i]?(l[i].p(f,r),b(l[i],1)):(l[i]=ge(f),l[i].c(),b(l[i],1),l[i].m(e,null))}for(x(),i=t.length;i<l.length;i+=1)o(i);ee()}},i(a){if(!n){for(let r=0;r<t.length;r+=1)b(l[r]);n=!0}},o(a){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)k(l[r]);n=!1},d(a){a&&S(e),ye(l,a)}}}function _t(s){let e,n;return e=new Se({props:{label:"Legend",$$slots:{default:[mt]},$$scope:{ctx:s}}}),{c(){B(e.$$.fragment)},m(t,l){D(e,t,l),n=!0},p(t,[l]){const o={};l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function gt(s,e,n){let{rows:t}=e;return s.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class jt extends ${constructor(e){super(),L(this,e,gt,_t,H,{rows:0})}}function pe(s){let e;const n=s[5].default,t=I(n,s,s[4],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16)&&M(t,n,l,l[4],e?V(n,l[4],o,null):P(l[4]),null)},i(l){e||(b(t,l),e=!0)},o(l){k(t,l),e=!1},d(l){t&&t.d(l)}}}function pt(s){let e,n,t=s[1]&&pe(s);return{c(){e=p("div"),t&&t.c(),_(e,"class","map svelte-12dpf1u")},m(l,o){w(l,e,o),t&&t.m(e,null),s[6](e),n=!0},p(l,[o]){l[1]?t?(t.p(l,o),o&2&&b(t,1)):(t=pe(l),t.c(),b(t,1),t.m(e,null)):t&&(x(),k(t,1,1,()=>{t=null}),ee())},i(l){n||(b(t),n=!0)},o(l){k(t),n=!1},d(l){l&&S(e),t&&t.d(),s[6](null)}}}function ht(s,e,n){let{$$slots:t={},$$scope:l}=e,{style:o}=e,{startBounds:a=null}=e,r,i,f=!1,u=!window.location.hash;Pe("setCamera",u),Ve(()=>{r=new W.Map({container:i,style:`https://api.maptiler.com/maps/${o}/style.json?key=MZEJTanw3WpxRvt7qDfo`,hash:!0}),r.addControl(new W.ScaleControl({})),r.addControl(new W.NavigationControl({visualizePitch:!0}),"bottom-right"),r.on("load",()=>{n(1,f=!0),u&&a&&r.fitBounds(a,{animate:!1}),A.set(r)}),new ResizeObserver(()=>{r.resize()}).observe(i)}),Be(()=>{r.remove()});function d(m){F[m?"unshift":"push"](()=>{i=m,n(0,i)})}return s.$$set=m=>{"style"in m&&n(2,o=m.style),"startBounds"in m&&n(3,a=m.startBounds),"$$scope"in m&&n(4,l=m.$$scope)},[i,f,o,a,l,t,d]}class zt extends ${constructor(e){super(),L(this,e,ht,pt,H,{style:2,startBounds:3})}}const bt="/atip/streetview-rework/assets/zoom_out_map-b2e1091a.svg";function vt(s){let e,n;return{c(){e=p("img"),we(e.src,n=bt)||_(e,"src",n),_(e,"alt","Zoom to show entire boundary")},m(t,l){w(t,e,l)},p:T,d(t){t&&S(e)}}}function kt(s){let e,n;return e=new De({props:{title:"Zoom to show entire boundary",$$slots:{default:[vt]},$$scope:{ctx:s}}}),e.$on("click",s[0]),{c(){B(e.$$.fragment)},m(t,l){D(e,t,l),n=!0},p(t,[l]){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function yt(s,e,n){let t;q(s,A,a=>n(2,t=a));let{boundaryGeojson:l}=e;function o(){t.fitBounds(Oe(l),{padding:20,animate:!0,duration:500})}return s.$$set=a=>{"boundaryGeojson"in a&&n(1,l=a.boundaryGeojson)},[o,l]}class Nt extends ${constructor(e){super(),L(this,e,yt,kt,H,{boundaryGeojson:1})}}const C={area:"#D94324",route:"#555F5E",crossing:"#4daf4a",other:"#984ea3",preapp:"#e41a1c",outline:"#377eb8","reserved matters":"#4daf4a","local plan":"#984ea3",hovering:"black",lineEndpointColor:"black"},wt=10,Z=10;let j="interventions";function St(s,e,n){let t,l;q(s,A,i=>n(1,t=i)),q(s,Re,i=>n(2,l=i));let{colorInterventions:o}=e;je(t,j,l);const a=["!=","hide_while_editing",!0];return le(t,{id:"interventions-points",source:j,filter:["all",Ne,a,["!=","endpoint",!0]],color:o,radius:wt}),se(t,{id:"interventions-lines",source:j,filter:["all",qe,a],color:o,width:Z}),le(t,{id:"interventions-lines-endpoints",source:j,filter:["==","endpoint",!0],radius:.5*Z,opacity:0,strokeColor:C.lineEndpointColor,strokeWidth:2}),ze(t,{id:"interventions-polygons",source:j,filter:["all",oe,a],color:o,opacity:.2}),se(t,{id:"interventions-polygon-outlines",source:j,filter:["all",oe,a],color:o,opacity:.5,width:.7*Z}),s.$$set=i=>{"colorInterventions"in i&&n(0,o=i.colorInterventions)},s.$$.update=()=>{if(s.$$.dirty&6){let i=JSON.parse(JSON.stringify(l)),f=[];for(let u of i.features)if(u.geometry.type=="LineString"&&!u.properties.hide_while_editing)for(let d of[u.geometry.coordinates[0],u.geometry.coordinates[u.geometry.coordinates.length-1]])f.push({type:"Feature",properties:{endpoint:!0},geometry:{type:"Point",coordinates:d}});i.features=i.features.concat(f),t.getSource(j).setData(i)}},[o,t,l]}class qt extends ${constructor(e){super(),L(this,e,St,null,H,{colorInterventions:0})}}function At(s){return{v1:"Scheme Design",v2:"Experimental Scheme Design",planning:"Development Planning",criticals:"Critical Issues",atf4:"ATF4 Scheme"}[s]}function Gt(s){return{v1:"an intervention",v2:"an intervention",planning:"a development",criticals:"a critical issue",atf4:"an intervention"}[s]}function Tt(s){return{v1:"interventions",v2:"interventions",planning:"developments",criticals:"critical issues",atf4:"interventions"}[s]}function Ft(s){return s=="planning"?ae(["get","reference_type",["get","planning"]],{preapp:C.preapp,outline:C.outline,"reserved matters":C["reserved matters"],"local plan":C["local plan"]},"black"):ae(["get","intervention_type"],{area:C.area,route:C.route,crossing:C.crossing,other:C.other},"white")}function Wt(s){return s=="planning"?[["Preapp",C.preapp],["Outline",C.outline],["Reserved matters",C["reserved matters"]],["Local plan",C["local plan"]]]:[["Areas",C.area],["Routes",C.route],["Crossings",C.crossing],["Other",C.other]]}const Zt=["click","dblclick","mousemove","mousedown","mouseup","mouseout","dragstart"],Jt=["keypress","keyup","keydown"];class Qt{constructor(){N(this,"mapHandlers");N(this,"documentHandlers");this.mapHandlers={click:e=>{},dblclick:e=>{},mousemove:e=>{},mousedown:e=>{},mouseup:e=>{},mouseout:e=>{},dragstart:e=>{}},this.documentHandlers={keypress:e=>{},keyup:e=>{},keydown:e=>{}}}}class Ct{constructor(e,n){N(this,"id");N(this,"defaultPaintValues");this.id=e,this.defaultPaintValues=n}setProperty(e,n,t){e.setPaintProperty(this.id,n,t)}returnToDefaultColors(e){this.defaultPaintValues.forEach(([n,t])=>{e.setPaintProperty(this.id,n,t)})}}const $t=["road_minor","road_secondary_tertiary","road_motorway","road_trunk_primary","road_link","road_motorway_link","road_trunk_primary_link","road_minor","bridge_street","bridge_minor","bridge_secondary_tertiary","bridge_trunk_primary","bridge_motorway","road_oneway","road_oneway_opposite","tunnel_minor","tunnel_secondary_tertiary","tunnel_trunk_primary","tunnel_motorway","road_service_track"],Lt=()=>Ae(A).getStyle().layers.filter(e=>$t.includes(e.id)).map(e=>{const n=Object.keys(e.paint?e.paint:{}).map(t=>[t,e.paint[t]]);return new Ct(e.id,n)});function he(s){let e,n,t,l,o;function a(i){s[6](i)}let r={legend:"Source",id:"streetViewImagery",choices:[["google","Google Street View"],["bing","Bing Streetside"]],inlineSmall:!0};return s[1].streetViewImagery!==void 0&&(r.value=s[1].streetViewImagery),e=new Ge({props:r}),F.push(()=>Y(e,"value",a)),l=new Se({props:{label:"Help",$$slots:{default:[Ht]},$$scope:{ctx:s}}}),{c(){B(e.$$.fragment),t=E(),B(l.$$.fragment)},m(i,f){D(e,i,f),w(i,t,f),D(l,i,f),o=!0},p(i,f){const u={};!n&&f&2&&(n=!0,u.value=i[1].streetViewImagery,K(()=>n=!1)),e.$set(u);const d={};f&1024&&(d.$$scope={dirty:f,ctx:i}),l.$set(d)},i(i){o||(b(e.$$.fragment,i),b(l.$$.fragment,i),o=!0)},o(i){k(e.$$.fragment,i),k(l.$$.fragment,i),o=!1},d(i){i&&S(t),O(e,i),O(l,i)}}}function Ht(s){let e;return{c(){e=p("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to open a new tab with a 3rd-party imagery provider</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(n,t){w(n,e,t)},p:T,d(n){n&&S(e)}}}function Et(s){let e,n,t=s[0]&&he(s);return{c(){t&&t.c(),e=ke()},m(l,o){t&&t.m(l,o),w(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&b(t,1)):(t=he(l),t.c(),b(t,1),t.m(e.parentNode,e)):t&&(x(),k(t,1,1,()=>{t=null}),ee())},i(l){n||(b(t),n=!0)},o(l){k(t),n=!1},d(l){l&&S(e),t&&t.d(l)}}}function It(s,e,n){let t,l;q(s,A,c=>n(7,t=c)),q(s,ie,c=>n(1,l=c));let{eventHandler:o}=e,{changeMode:a}=e,{isActive:r}=e;const i=Lt();function f(){t.getCanvas().style.cursor="zoom-in",d("blue")}function u(){t.getCanvas().style.cursor="inherit",i.forEach(c=>c.returnToDefaultColors(t))}o.mapHandlers.click=c=>{let g=c.lngLat.lng,h=c.lngLat.lat;l.streetViewImagery=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${h},${g}&cbp=11,0,0,0,0`,"_blank"):l.streetViewImagery=="bing"&&window.open(`https://www.bing.com/maps?cp=${h}~${g}&style=x`,"_blank")},o.documentHandlers.keydown=c=>{c.key=="Escape"&&(a("edit-attribute"),c.preventDefault())};const d=c=>{i.forEach(g=>{g.setProperty(t,"line-color",c)})};function m(c){s.$$.not_equal(l.streetViewImagery,c)&&(l.streetViewImagery=c,ie.set(l))}return s.$$set=c=>{"eventHandler"in c&&n(2,o=c.eventHandler),"changeMode"in c&&n(3,a=c.changeMode),"isActive"in c&&n(0,r=c.isActive)},[r,l,o,a,f,u,m]}class Ut extends ${constructor(e){super(),L(this,e,It,Et,H,{eventHandler:2,changeMode:3,isActive:0,start:4,stop:5})}get start(){return this.$$.ctx[4]}get stop(){return this.$$.ctx[5]}}export{Dt as B,Se as C,Jt as D,Qt as E,Ot as H,qt as I,Rt as L,Zt as M,Ut as S,Nt as Z,wt as a,Vt as b,C as c,Bt as d,Ye as e,Tt as f,At as g,zt as h,Ft as i,jt as j,Wt as k,Z as l,st as m,Gt as s};
