import{S as R,i as G,s as H,b as Z,c as q,I as X,g as w,f as A,m as k,j as m,o as K,t as h,l as _,p as g,q as b,a0 as W,C as J,aY as ke,a9 as be,H as pe,u as v,x as ee,e as N,h as j,aX as I,k as C,X as Ee,Z as _e,Y as et,W as ie,y as de,n as we,a3 as Se,aZ as Et,a2 as st,aa as Bt,aB as on,a4 as xe,r as ot,F as ln,a as Ve,v as mt,w as an,J as Pt,M as xt,N as It,O as zt,G as Ft,a_ as gt,ai as jt,d as cn,z as fn,A as un,ab as $n,aR as pn,E as mn,af as gn}from"./data_getter-0b191db9.js";import{d as Q,k as me,H as te,e as tt,i as hn,j as ht,h as Rt,C as Ce,a as _n,L as dn,Z as wn,M as kn,I as bn,B as vn,b as lt,S as yn}from"./StreetViewController-97a0d2e0.js";const V={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"};function Ln(s){let e,n,t;return e=new me({props:{color:V.bus_route_with_lane}}),{c(){w(e.$$.fragment),n=v(`
  Bus routes`)},m(r,o){k(e,r,o),m(r,n,o),t=!0},p:ee,i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&g(n),b(e,r)}}}function Cn(s){let e;return{c(){e=v(`GTFS
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Sn(s){let e;return{c(){e=v("Open Data Commons Open Database License")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Tn(s){let e,n,t,r,o,i,u,l,c,a,f;return o=new I({props:{href:"https://gtfs.org",$$slots:{default:[Cn]},$$scope:{ctx:s}}}),a=new I({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Sn]},$$scope:{ctx:s}}}),{c(){e=N("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=A(),t=N("p"),r=v("Note this data is from OpenStreetMap (as of 9 August 2023), not "),w(o.$$.fragment),i=v(`, and doesn't include which routes are run or the
        frequency of service.`),u=A(),l=N("p"),c=v("License: "),w(a.$$.fragment)},m(p,$){m(p,e,$),m(p,n,$),m(p,t,$),C(t,r),k(o,t,null),C(t,i),m(p,u,$),m(p,l,$),C(l,c),k(a,l,null),f=!0},p(p,$){const d={};$&8&&(d.$$scope={dirty:$,ctx:p}),o.$set(d);const y={};$&8&&(y.$$scope={dirty:$,ctx:p}),a.$set(y)},i(p){f||(h(o.$$.fragment,p),h(a.$$.fragment,p),f=!0)},o(p){_(o.$$.fragment,p),_(a.$$.fragment,p),f=!1},d(p){p&&(g(e),g(n),g(t),g(u),g(l)),b(o),b(a)}}}function Dn(s){let e,n,t;return n=new te({props:{$$slots:{default:[Tn]},$$scope:{ctx:s}}}),{c(){e=N("span"),w(n.$$.fragment),j(e,"slot","right")},m(r,o){m(r,e,o),k(n,e,null),t=!0},p(r,o){const i={};o&8&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(h(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&g(e),b(n)}}}function On(s){let e,n,t,r,o;function i(l){s[1](l)}let u={id:Oe,$$slots:{right:[Dn],default:[Ln]},$$scope:{ctx:s}};return s[0]!==void 0&&(u.checked=s[0]),e=new Q({props:u}),Z.push(()=>q(e,"checked",i)),r=new X({props:{layer:Oe,tooltip:An,show:s[0],clickable:!1}}),{c(){w(e.$$.fragment),t=A(),w(r.$$.fragment)},m(l,c){k(e,l,c),m(l,t,c),k(r,l,c),o=!0},p(l,[c]){const a={};c&8&&(a.$$scope={dirty:c,ctx:l}),!n&&c&1&&(n=!0,a.checked=l[0],K(()=>n=!1)),e.$set(a);const f={};c&1&&(f.show=l[0]),r.$set(f)},i(l){o||(h(e.$$.fragment,l),h(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&g(t),b(e,l),b(r,l)}}}let Oe="bus_routes";function An(s){return s.properties.has_bus_lane?"<p>At least one bus route crosses here, with a bus lane in one or more directions</p>":"<p>At least one bus route crosses here, without any bus lanes</p>"}function Mn(s,e,n){let t;W(s,J,i=>n(2,t=i)),ke(t,Oe,`https://atip.uk/layers/v1/${Oe}.pmtiles`),be(t,{id:Oe,source:Oe,sourceLayer:Oe,color:["case",["boolean",["get","has_bus_lane"],!1],V.bus_route_with_lane,V.bus_route_without_lane],width:5,opacity:pe(.5,1)});let r=!1;function o(i){r=i,n(0,r)}return[r,o]}class Nn extends R{constructor(e){super(),G(this,e,Mn,On,H,{})}}function _t(s,e,n){const t=s.slice();return t[2]=e[n],t}function dt(s,e,n){const t=s.slice();return t[5]=e[n],t}function wt(s){let e,n;return{c(){e=N("span"),n=v(` 
    `),_e(e,"background",s[5]),_e(e,"width","100%"),_e(e,"border","1px solid black")},m(t,r){m(t,e,r),C(e,n)},p(t,r){r&1&&_e(e,"background",t[5])},d(t){t&&g(e)}}}function kt(s){let e,n=s[2]+"",t;return{c(){e=N("span"),t=v(n)},m(r,o){m(r,e,o),C(e,t)},p(r,o){o&2&&n!==(n=r[2]+"")&&ie(t,n)},d(r){r&&g(e)}}}function Un(s){let e,n,t,r=Ee(s[0]),o=[];for(let l=0;l<r.length;l+=1)o[l]=wt(dt(s,r,l));let i=Ee(s[1]),u=[];for(let l=0;l<i.length;l+=1)u[l]=kt(_t(s,i,l));return{c(){e=N("div");for(let l=0;l<o.length;l+=1)o[l].c();n=A(),t=N("div");for(let l=0;l<u.length;l+=1)u[l].c();_e(e,"display","flex"),_e(t,"display","flex"),_e(t,"justify-content","space-between")},m(l,c){m(l,e,c);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);m(l,n,c),m(l,t,c);for(let a=0;a<u.length;a+=1)u[a]&&u[a].m(t,null)},p(l,[c]){if(c&1){r=Ee(l[0]);let a;for(a=0;a<r.length;a+=1){const f=dt(l,r,a);o[a]?o[a].p(f,c):(o[a]=wt(f),o[a].c(),o[a].m(e,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=r.length}if(c&2){i=Ee(l[1]);let a;for(a=0;a<i.length;a+=1){const f=_t(l,i,a);u[a]?u[a].p(f,c):(u[a]=kt(f),u[a].c(),u[a].m(t,null))}for(;a<u.length;a+=1)u[a].d(1);u.length=i.length}},i:ee,o:ee,d(l){l&&(g(e),g(n),g(t)),et(o,l),et(u,l)}}}function En(s,e,n){let{colorScale:t}=e,{limits:r}=e;return s.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,r=o.limits)},[t,r]}class qe extends R{constructor(e){super(),G(this,e,En,Un,H,{colorScale:0,limits:1})}}function Bn(s){let e;return{c(){e=v("Percent of households with a car")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Pn(s){let e;return{c(){e=v(`NOMIS TS045
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function xn(s){let e;return{c(){e=v(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function In(s){let e;return{c(){e=v(`Open Government License
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function zn(s){let e,n,t,r,o,i,u,l,c,a,f,p;return t=new I({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Pn]},$$scope:{ctx:s}}}),o=new I({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[xn]},$$scope:{ctx:s}}}),a=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[In]},$$scope:{ctx:s}}}),{c(){e=N("p"),n=v("Car/van availability data is from the 2021 census, via "),w(t.$$.fragment),r=v(". Output area boundaries from "),w(o.$$.fragment),i=v("."),u=A(),l=N("p"),c=v("License: "),w(a.$$.fragment),f=v(`. Contains OS data © Crown copyright and database
        right 2023.`)},m($,d){m($,e,d),C(e,n),k(t,e,null),C(e,r),k(o,e,null),C(e,i),m($,u,d),m($,l,d),C(l,c),k(a,l,null),C(l,f),p=!0},p($,d){const y={};d&65536&&(y.$$scope={dirty:d,ctx:$}),t.$set(y);const S={};d&65536&&(S.$$scope={dirty:d,ctx:$}),o.$set(S);const L={};d&65536&&(L.$$scope={dirty:d,ctx:$}),a.$set(L)},i($){p||(h(t.$$.fragment,$),h(o.$$.fragment,$),h(a.$$.fragment,$),p=!0)},o($){_(t.$$.fragment,$),_(o.$$.fragment,$),_(a.$$.fragment,$),p=!1},d($){$&&(g(e),g(u),g(l)),b(t),b(o),b(a)}}}function Fn(s){let e,n,t;return n=new te({props:{$$slots:{default:[zn]},$$scope:{ctx:s}}}),{c(){e=N("span"),w(n.$$.fragment),j(e,"slot","right")},m(r,o){m(r,e,o),k(n,e,null),t=!0},p(r,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(h(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&g(e),b(n)}}}function bt(s){let e,n;return e=new qe({props:{colorScale:s[4],limits:s[7]()}}),{c(){w(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p:ee,i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}function jn(s){let e;return{c(){e=v("Average cars per household")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Rn(s){let e;return{c(){e=v(`NOMIS TS045
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Gn(s){let e;return{c(){e=v(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Hn(s){let e;return{c(){e=v(`Open Government License
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Vn(s){let e,n,t,r,o,i,u,l,c,a,f,p,$,d;return o=new I({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Rn]},$$scope:{ctx:s}}}),u=new I({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Gn]},$$scope:{ctx:s}}}),p=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Hn]},$$scope:{ctx:s}}}),{c(){e=N("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=A(),t=N("p"),r=v("Car/van availability data is from the 2021 census, via "),w(o.$$.fragment),i=v(". Output area boundaries from "),w(u.$$.fragment),l=v("."),c=A(),a=N("p"),f=v("License: "),w(p.$$.fragment),$=v(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(y,S){m(y,e,S),m(y,n,S),m(y,t,S),C(t,r),k(o,t,null),C(t,i),k(u,t,null),C(t,l),m(y,c,S),m(y,a,S),C(a,f),k(p,a,null),C(a,$),d=!0},p(y,S){const L={};S&65536&&(L.$$scope={dirty:S,ctx:y}),o.$set(L);const M={};S&65536&&(M.$$scope={dirty:S,ctx:y}),u.$set(M);const U={};S&65536&&(U.$$scope={dirty:S,ctx:y}),p.$set(U)},i(y){d||(h(o.$$.fragment,y),h(u.$$.fragment,y),h(p.$$.fragment,y),d=!0)},o(y){_(o.$$.fragment,y),_(u.$$.fragment,y),_(p.$$.fragment,y),d=!1},d(y){y&&(g(e),g(n),g(t),g(c),g(a)),b(o),b(u),b(p)}}}function Zn(s){let e,n,t;return n=new te({props:{$$slots:{default:[Vn]},$$scope:{ctx:s}}}),{c(){e=N("span"),w(n.$$.fragment),j(e,"slot","right")},m(r,o){m(r,e,o),k(n,e,null),t=!0},p(r,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(h(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&g(e),b(n)}}}function vt(s){let e,n;return e=new qe({props:{colorScale:s[4],limits:s[7]()}}),{c(){w(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p:ee,i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}function qn(s){let e;return{c(){e=v("Population density")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Kn(s){let e;return{c(){e=v(`NOMIS TS006
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Wn(s){let e;return{c(){e=v(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Jn(s){let e;return{c(){e=v(`Open Government License
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Yn(s){let e,n,t,r,o,i,u,l,c,a,f,p;return t=new I({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Kn]},$$scope:{ctx:s}}}),o=new I({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Wn]},$$scope:{ctx:s}}}),a=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Jn]},$$scope:{ctx:s}}}),{c(){e=N("p"),n=v("Population density data is from the 2021 census, via "),w(t.$$.fragment),r=v(". Output area boundaries from "),w(o.$$.fragment),i=v("."),u=A(),l=N("p"),c=v("License: "),w(a.$$.fragment),f=v(`. Contains OS data © Crown copyright and database
        right 2023.`)},m($,d){m($,e,d),C(e,n),k(t,e,null),C(e,r),k(o,e,null),C(e,i),m($,u,d),m($,l,d),C(l,c),k(a,l,null),C(l,f),p=!0},p($,d){const y={};d&65536&&(y.$$scope={dirty:d,ctx:$}),t.$set(y);const S={};d&65536&&(S.$$scope={dirty:d,ctx:$}),o.$set(S);const L={};d&65536&&(L.$$scope={dirty:d,ctx:$}),a.$set(L)},i($){p||(h(t.$$.fragment,$),h(o.$$.fragment,$),h(a.$$.fragment,$),p=!0)},o($){_(t.$$.fragment,$),_(o.$$.fragment,$),_(a.$$.fragment,$),p=!1},d($){$&&(g(e),g(u),g(l)),b(t),b(o),b(a)}}}function Xn(s){let e,n,t;return n=new te({props:{$$slots:{default:[Yn]},$$scope:{ctx:s}}}),{c(){e=N("span"),w(n.$$.fragment),j(e,"slot","right")},m(r,o){m(r,e,o),k(n,e,null),t=!0},p(r,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(h(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&g(e),b(n)}}}function yt(s){let e,n,t,r;return t=new qe({props:{colorScale:s[4],limits:s[7]().map(er)}}),{c(){e=N("p"),e.textContent="(people per square kilometres)",n=A(),w(t.$$.fragment)},m(o,i){m(o,e,i),m(o,n,i),k(t,o,i),r=!0},p:ee,i(o){r||(h(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(g(e),g(n)),b(t,o)}}}function Qn(s){let e,n,t,r,o,i,u,l,c,a,f,p,$,d;function y(O){s[9](O)}let S={id:"percent_households_with_car",$$slots:{right:[Fn],default:[Bn]},$$scope:{ctx:s}};s[0]!==void 0&&(S.checked=s[0]),e=new Q({props:S}),Z.push(()=>q(e,"checked",y)),e.$on("change",s[10]);let L=s[3]=="percent_households_with_car"&&bt(s);function M(O){s[11](O)}let U={id:"average_cars_per_household",$$slots:{right:[Zn],default:[jn]},$$scope:{ctx:s}};s[1]!==void 0&&(U.checked=s[1]),o=new Q({props:U}),Z.push(()=>q(o,"checked",M)),o.$on("change",s[12]);let T=s[3]=="average_cars_per_household"&&vt(s);function D(O){s[13](O)}let P={id:"population_density",$$slots:{right:[Xn],default:[qn]},$$scope:{ctx:s}};s[2]!==void 0&&(P.checked=s[2]),c=new Q({props:P}),Z.push(()=>q(c,"checked",D)),c.$on("change",s[14]);let B=s[3]=="population_density"&&yt(s);return $=new X({props:{layer:ae,tooltip:s[5],show:s[3]!="",clickable:!0}}),$.$on("click",s[6]),{c(){w(e.$$.fragment),t=A(),L&&L.c(),r=A(),w(o.$$.fragment),u=A(),T&&T.c(),l=A(),w(c.$$.fragment),f=A(),B&&B.c(),p=A(),w($.$$.fragment)},m(O,x){k(e,O,x),m(O,t,x),L&&L.m(O,x),m(O,r,x),k(o,O,x),m(O,u,x),T&&T.m(O,x),m(O,l,x),k(c,O,x),m(O,f,x),B&&B.m(O,x),m(O,p,x),k($,O,x),d=!0},p(O,[x]){const E={};x&65536&&(E.$$scope={dirty:x,ctx:O}),!n&&x&1&&(n=!0,E.checked=O[0],K(()=>n=!1)),e.$set(E),O[3]=="percent_households_with_car"?L?(L.p(O,x),x&8&&h(L,1)):(L=bt(O),L.c(),h(L,1),L.m(r.parentNode,r)):L&&(de(),_(L,1,1,()=>{L=null}),we());const F={};x&65536&&(F.$$scope={dirty:x,ctx:O}),!i&&x&2&&(i=!0,F.checked=O[1],K(()=>i=!1)),o.$set(F),O[3]=="average_cars_per_household"?T?(T.p(O,x),x&8&&h(T,1)):(T=vt(O),T.c(),h(T,1),T.m(l.parentNode,l)):T&&(de(),_(T,1,1,()=>{T=null}),we());const ve={};x&65536&&(ve.$$scope={dirty:x,ctx:O}),!a&&x&4&&(a=!0,ve.checked=O[2],K(()=>a=!1)),c.$set(ve),O[3]=="population_density"?B?(B.p(O,x),x&8&&h(B,1)):(B=yt(O),B.c(),h(B,1),B.m(p.parentNode,p)):B&&(de(),_(B,1,1,()=>{B=null}),we());const Te={};x&8&&(Te.show=O[3]!=""),$.$set(Te)},i(O){d||(h(e.$$.fragment,O),h(L),h(o.$$.fragment,O),h(T),h(c.$$.fragment,O),h(B),h($.$$.fragment,O),d=!0)},o(O){_(e.$$.fragment,O),_(L),_(o.$$.fragment,O),_(T),_(c.$$.fragment,O),_(B),_($.$$.fragment,O),d=!1},d(O){O&&(g(t),g(r),g(u),g(l),g(f),g(p)),b(e,O),L&&L.d(O),b(o,O),T&&T.d(O),b(c,O),B&&B.d(O),b($,O)}}}let ae="census_output_areas";const er=s=>s.toLocaleString();function tr(s,e,n){let t;W(s,J,U=>n(8,t=U));let r=`${ae}-outline`,o=V.sequential_low_to_high,i=!1,u=!1,l=!1,c="";ke(t,ae,`https://atip.uk/layers/v1/${ae}.pmtiles`),Se(t,{id:ae,source:ae,sourceLayer:ae,color:"black",opacity:pe(.5,.7)}),be(t,{id:r,source:ae,sourceLayer:ae,color:"black",width:.5});function a(U){let T=U.properties.OA21CD,D=U.properties[c];return c=="percent_households_with_car"?`<p>${D}% of households in ${T} have 1 or more cars</p>`:c=="average_cars_per_household"?`<p>Households in ${T} have an average of ${D} cars</p>`:`<p>There are ${D.toLocaleString()} people per square kilometre in ${T}</p>`}function f(U){let T=U.detail.properties.OA21CD;c=="percent_households_with_car"||c=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${T}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${T}`,"_blank")}function p(){return c=="percent_households_with_car"?[0,20,40,60,80,100]:c=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function $(U){i=U,n(0,i)}const d=()=>{n(1,u=!1),n(2,l=!1)};function y(U){u=U,n(1,u)}const S=()=>{n(0,i=!1),n(2,l=!1)};function L(U){l=U,n(2,l)}const M=()=>{n(0,i=!1),n(1,u=!1)};return s.$$.update=()=>{s.$$.dirty&271&&(i?n(3,c="percent_households_with_car"):u?n(3,c="average_cars_per_household"):l?n(3,c="population_density"):n(3,c=""),c?(t.setPaintProperty(ae,"fill-color",Et(["get",c],p(),o)),t.setLayoutProperty(r,"visibility","visible")):t.setLayoutProperty(r,"visibility","none"))},[i,u,l,c,o,a,f,p,t,$,d,y,S,L,M]}class nr extends R{constructor(e){super(),G(this,e,tr,Qn,H,{})}}function rr(s){let e,n,t;return e=new me({props:{color:s[1]}}),{c(){w(e.$$.fragment),n=v(`
  Combined authorities`)},m(r,o){k(e,r,o),m(r,n,o),t=!0},p:ee,i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&g(n),b(e,r)}}}function sr(s){let e;return{c(){e=v(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function or(s){let e;return{c(){e=v(`Open Government License
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function lr(s){let e,n,t,r,o,i,u,l,c,a;return t=new I({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[sr]},$$scope:{ctx:s}}}),l=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[or]},$$scope:{ctx:s}}}),{c(){e=N("p"),n=v("Data from "),w(t.$$.fragment),r=v(", as of December 2022."),o=A(),i=N("p"),u=v("License: "),w(l.$$.fragment),c=v(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(f,p){m(f,e,p),C(e,n),k(t,e,null),C(e,r),m(f,o,p),m(f,i,p),C(i,u),k(l,i,null),C(i,c),a=!0},p(f,p){const $={};p&32&&($.$$scope={dirty:p,ctx:f}),t.$set($);const d={};p&32&&(d.$$scope={dirty:p,ctx:f}),l.$set(d)},i(f){a||(h(t.$$.fragment,f),h(l.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(l.$$.fragment,f),a=!1},d(f){f&&(g(e),g(o),g(i)),b(t),b(l)}}}function ir(s){let e,n,t;return n=new te({props:{$$slots:{default:[lr]},$$scope:{ctx:s}}}),{c(){e=N("span"),w(n.$$.fragment),j(e,"slot","right")},m(r,o){m(r,e,o),k(n,e,null),t=!0},p(r,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(h(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&g(e),b(n)}}}function ar(s){let e,n,t,r,o;function i(l){s[3](l)}let u={id:ye,$$slots:{right:[ir],default:[rr]},$$scope:{ctx:s}};return s[0]!==void 0&&(u.checked=s[0]),e=new Q({props:u}),Z.push(()=>q(e,"checked",i)),r=new X({props:{layer:ye,tooltip:cr,show:s[0],clickable:!0}}),r.$on("click",fr),{c(){w(e.$$.fragment),t=A(),w(r.$$.fragment)},m(l,c){k(e,l,c),m(l,t,c),k(r,l,c),o=!0},p(l,[c]){const a={};c&32&&(a.$$scope={dirty:c,ctx:l}),!n&&c&1&&(n=!0,a.checked=l[0],K(()=>n=!1)),e.$set(a);const f={};c&1&&(f.show=l[0]),r.$set(f)},i(l){o||(h(e.$$.fragment,l),h(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&g(t),b(e,l),b(r,l)}}}let ye="combined_authorities";function cr(s){return`<p>${s.properties.name}</p>`}function fr(s){window.open(`https://www.ons.gov.uk/visualisations/areas/${s.detail.properties.CAUTH22CD}`,"_blank")}function ur(s,e,n){let t;W(s,J,l=>n(2,t=l));let r=V.combined_authorities,o=`${ye}-outline`;st(t,ye,`https://atip.uk/layers/v1/${ye}.geojson`),Se(t,{id:ye,source:ye,color:r,opacity:pe(.5,.1)}),be(t,{id:o,source:ye,color:r,width:2.5});let i=!1;function u(l){i=l,n(0,i)}return s.$$.update=()=>{s.$$.dirty&5&&t.getLayer(o)&&t.setLayoutProperty(o,"visibility",i?"visible":"none")},[i,r,t,u]}class $r extends R{constructor(e){super(),G(this,e,ur,ar,H,{})}}function pr(s){let e,n,t;return e=new me({props:{color:s[1]}}),{c(){w(e.$$.fragment),n=v(`
  Cycle parking`)},m(r,o){k(e,r,o),m(r,n,o),t=!0},p:ee,i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&g(n),b(e,r)}}}function mr(s){let e;return{c(){e=v("OpenStreetMap")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function gr(s){let e;return{c(){e=v("Open Data Commons Open Database License")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function hr(s){let e,n,t,r,o,i,u,l,c;return t=new I({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[mr]},$$scope:{ctx:s}}}),l=new I({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[gr]},$$scope:{ctx:s}}}),{c(){e=N("p"),n=v("Cycle parking, according to "),w(t.$$.fragment),r=v(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=A(),i=N("p"),u=v("License: "),w(l.$$.fragment)},m(a,f){m(a,e,f),C(e,n),k(t,e,null),C(e,r),m(a,o,f),m(a,i,f),C(i,u),k(l,i,null),c=!0},p(a,f){const p={};f&16&&(p.$$scope={dirty:f,ctx:a}),t.$set(p);const $={};f&16&&($.$$scope={dirty:f,ctx:a}),l.$set($)},i(a){c||(h(t.$$.fragment,a),h(l.$$.fragment,a),c=!0)},o(a){_(t.$$.fragment,a),_(l.$$.fragment,a),c=!1},d(a){a&&(g(e),g(o),g(i)),b(t),b(l)}}}function _r(s){let e,n,t;return n=new te({props:{$$slots:{default:[hr]},$$scope:{ctx:s}}}),{c(){e=N("span"),w(n.$$.fragment),j(e,"slot","right")},m(r,o){m(r,e,o),k(n,e,null),t=!0},p(r,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(h(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&g(e),b(n)}}}function dr(s){let e,n,t,r,o;function i(l){s[2](l)}let u={id:Ae,$$slots:{right:[_r],default:[pr]},$$scope:{ctx:s}};return s[0]!==void 0&&(u.checked=s[0]),e=new Q({props:u}),Z.push(()=>q(e,"checked",i)),r=new X({props:{layer:Ae,tooltip:wr,show:s[0],clickable:!1}}),{c(){w(e.$$.fragment),t=A(),w(r.$$.fragment)},m(l,c){k(e,l,c),m(l,t,c),k(r,l,c),o=!0},p(l,[c]){const a={};c&16&&(a.$$scope={dirty:c,ctx:l}),!n&&c&1&&(n=!0,a.checked=l[0],K(()=>n=!1)),e.$set(a);const f={};c&1&&(f.show=l[0]),r.$set(f)},i(l){o||(h(e.$$.fragment,l),h(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&g(t),b(e,l),b(r,l)}}}let Ae="cycle_parking";function wr(s){return`<p>Capacity: ${s.properties.capacity??"unknown"}</p>`}function kr(s,e,n){let t;W(s,J,u=>n(3,t=u));let r=V.cycle_parking;ke(t,Ae,`https://atip.uk/layers/v1/${Ae}.pmtiles`),Bt(t,{id:Ae,source:Ae,sourceLayer:Ae,color:r,radius:5});let o=!1;function i(u){o=u,n(0,o)}return[o,r,i]}class br extends R{constructor(e){super(),G(this,e,kr,dr,H,{})}}function vr(s){let e=new Map;for(let[t,r]of Object.entries(s.schemes))e.set(t,{scheme_reference:t,num_features:0,authority_or_region:r.authority_or_region,capital_scheme_id:r.capital_scheme_id,funding_programme:r.funding_programme});let n=1;for(let t of s.features){let r=e.get(t.properties.scheme_reference);r.num_features++,t.properties.funding_programme=r.funding_programme,t.id=n++}return e}function yr(s){let e,n,t,r,o;function i(l){s[3](l)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return s[0]!==void 0&&(u.value=s[0]),e=new tt({props:u}),Z.push(()=>q(e,"value",i)),e.$on("change",s[2]),r=new hn({props:{rows:s[1]}}),{c(){w(e.$$.fragment),t=A(),w(r.$$.fragment)},m(l,c){k(e,l,c),m(l,t,c),k(r,l,c),o=!0},p(l,[c]){const a={};!n&&c&1&&(n=!0,a.value=l[0],K(()=>n=!1)),e.$set(a);const f={};c&2&&(f.rows=l[1]),r.$set(f)},i(l){o||(h(e.$$.fragment,l),h(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&g(t),b(e,l),b(r,l)}}}function Lr(s,e,n){let t;W(s,J,l=>n(4,t=l));let r="interventionType",o=ht("v1");function i(){let l;r=="interventionType"?(l=Rt("v1"),n(1,o=ht("v1"))):(l=on(["get","funding_programme"],{ATF2:V.atf2,ATF3:V.atf3,ATF4:V.atf4},"grey"),n(1,o=[["ATF2",V.atf2],["ATF3",V.atf3],["ATF4",V.atf4]])),t.setPaintProperty("interventions-points","circle-color",l),t.setPaintProperty("interventions-lines","line-color",l),t.setPaintProperty("interventions-polygons","fill-color",l),t.setPaintProperty("interventions-polygon-outlines","line-color",l)}function u(l){r=l,n(0,r)}return[r,o,i,u]}class Cr extends R{constructor(e){super(),G(this,e,Lr,yr,H,{})}}function Sr(s){let e;return{c(){e=v("Clear")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Tr(s){let e,n,t,r,o,i;return t=new Ve({props:{$$slots:{default:[Sr]},$$scope:{ctx:s}}}),t.$on("click",s[11]),{c(){e=N("input"),n=A(),w(t.$$.fragment),j(e,"type","text"),j(e,"class","govuk-input govuk-input--width-10"),j(e,"id","filterText")},m(u,l){m(u,e,l),mt(e,s[0]),m(u,n,l),k(t,u,l),r=!0,o||(i=an(e,"input",s[10]),o=!0)},p(u,l){l&1&&e.value!==u[0]&&mt(e,u[0]);const c={};l&16384&&(c.$$scope={dirty:l,ctx:u}),t.$set(c)},i(u){r||(h(t.$$.fragment,u),r=!0)},o(u){_(t.$$.fragment,u),r=!1},d(u){u&&(g(e),g(n)),b(t,u),o=!1,i()}}}function Dr(s){let e,n,t,r,o,i,u,l,c,a;function f(y){s[8](y)}let p={label:"Authority or region",id:"filterAuthority",choices:s[4],emptyOption:!0};s[2]!==void 0&&(p.value=s[2]),e=new tt({props:p}),Z.push(()=>q(e,"value",f));function $(y){s[9](y)}let d={label:"Funding programme",id:"filterFundingProgramme",choices:s[5],emptyOption:!0};return s[3]!==void 0&&(d.value=s[3]),r=new tt({props:d}),Z.push(()=>q(r,"value",$)),u=new ln({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[Tr]},$$scope:{ctx:s}}}),c=new Cr({}),{c(){w(e.$$.fragment),t=A(),w(r.$$.fragment),i=A(),w(u.$$.fragment),l=A(),w(c.$$.fragment)},m(y,S){k(e,y,S),m(y,t,S),k(r,y,S),m(y,i,S),k(u,y,S),m(y,l,S),k(c,y,S),a=!0},p(y,S){const L={};S&16&&(L.choices=y[4]),!n&&S&4&&(n=!0,L.value=y[2],K(()=>n=!1)),e.$set(L);const M={};S&32&&(M.choices=y[5]),!o&&S&8&&(o=!0,M.value=y[3],K(()=>o=!1)),r.$set(M);const U={};S&16385&&(U.$$scope={dirty:S,ctx:y}),u.$set(U)},i(y){a||(h(e.$$.fragment,y),h(r.$$.fragment,y),h(u.$$.fragment,y),h(c.$$.fragment,y),a=!0)},o(y){_(e.$$.fragment,y),_(r.$$.fragment,y),_(u.$$.fragment,y),_(c.$$.fragment,y),a=!1},d(y){y&&(g(t),g(i),g(l)),b(e,y),b(r,y),b(u,y),b(c,y)}}}function Or(s){let e,n,t,r,o=s[1].size+"",i,u,l=s[6].route+"",c,a,f=s[6].area+"",p,$,d=s[6].crossing+"",y,S,L=s[6].other+"",M,U,T;return e=new Ce({props:{label:"Filters",$$slots:{default:[Dr]},$$scope:{ctx:s}}}),{c(){w(e.$$.fragment),n=A(),t=N("p"),r=v("Showing "),i=v(o),u=v(" schemes ("),c=v(l),a=v(" routes, "),p=v(f),$=v(` areas,
  `),y=v(d),S=v(" crossings, "),M=v(L),U=v(" other)")},m(D,P){k(e,D,P),m(D,n,P),m(D,t,P),C(t,r),C(t,i),C(t,u),C(t,c),C(t,a),C(t,p),C(t,$),C(t,y),C(t,S),C(t,M),C(t,U),T=!0},p(D,[P]){const B={};P&16445&&(B.$$scope={dirty:P,ctx:D}),e.$set(B),(!T||P&2)&&o!==(o=D[1].size+"")&&ie(i,o),(!T||P&64)&&l!==(l=D[6].route+"")&&ie(c,l),(!T||P&64)&&f!==(f=D[6].area+"")&&ie(p,f),(!T||P&64)&&d!==(d=D[6].crossing+"")&&ie(y,d),(!T||P&64)&&L!==(L=D[6].other+"")&&ie(M,L)},i(D){T||(h(e.$$.fragment,D),T=!0)},o(D){_(e.$$.fragment,D),T=!1},d(D){D&&(g(n),g(t)),b(e,D)}}}function Ar(s,e,n){let t;W(s,xe,L=>n(12,t=L));let{schemes:r}=e,{schemesToBeShown:o=new Set}=e,{filterText:i=""}=e,u=[],l="",c=[],a="",f={area:0,route:0,crossing:0,other:0};ot(()=>{let L=new Set,M=new Set;for(let U of r.values())U.authority_or_region&&L.add(U.authority_or_region),U.funding_programme&&M.add(U.funding_programme);n(4,u=Array.from(L.entries())),u.sort(),n(5,c=Array.from(M.entries())),c.sort()});function p(L,M,U){let T=L.toLowerCase(),D=B=>{var O,x;if(T&&!((O=B.properties.name)!=null&&O.toLowerCase().includes(T))&&!((x=B.properties.description)!=null&&x.toLowerCase().includes(T)))return!1;if(M||U){let E=r.get(B.properties.scheme_reference);if(M&&E.authority_or_region!=M||U&&E.funding_programme!=U)return!1}return!0};n(1,o=new Set(t.features.filter(D).map(B=>B.properties.scheme_reference))),n(6,f={area:0,route:0,crossing:0,other:0});let P=B=>{var O,x;return!(!o.has(B.properties.scheme_reference)||T&&!((O=B.properties.name)!=null&&O.toLowerCase().includes(T))&&!((x=B.properties.description)!=null&&x.toLowerCase().includes(T)))};xe.update(B=>{for(let O of B.features)P(O)?(delete O.properties.hide_while_editing,n(6,f[O.properties.intervention_type]++,f)):O.properties.hide_while_editing=!0;return B}),n(6,f)}function $(L){l=L,n(2,l)}function d(L){a=L,n(3,a)}function y(){i=this.value,n(0,i)}const S=()=>n(0,i="");return s.$$set=L=>{"schemes"in L&&n(7,r=L.schemes),"schemesToBeShown"in L&&n(1,o=L.schemesToBeShown),"filterText"in L&&n(0,i=L.filterText)},s.$$.update=()=>{s.$$.dirty&13&&p(i,l,a)},[i,o,l,a,u,c,f,r,$,d,y,S]}class Mr extends R{constructor(e){super(),G(this,e,Ar,Or,H,{schemes:7,schemesToBeShown:1,filterText:0})}}function Nr(s){let e,n,t,r;return e=new me({props:{color:s[3]}}),{c(){w(e.$$.fragment),n=A(),t=v(s[1])},m(o,i){k(e,o,i),m(o,n,i),m(o,t,i),r=!0},p(o,i){(!r||i&2)&&ie(t,o[1])},i(o){r||(h(e.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),r=!1},d(o){o&&(g(n),g(t)),b(e,o)}}}function Ur(s){let e;const n=s[6].default,t=Pt(n,s,s[8],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&256)&&xt(t,n,r,r[8],e?zt(n,r[8],o,null):It(r[8]),null)},i(r){e||(h(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function Er(s){let e,n,t;return n=new te({props:{$$slots:{default:[Ur]},$$scope:{ctx:s}}}),{c(){e=N("span"),w(n.$$.fragment),j(e,"slot","right")},m(r,o){m(r,e,o),k(n,e,null),t=!0},p(r,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(h(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&g(e),b(n)}}}function Br(s){let e,n,t,r,o;function i(l){s[7](l)}let u={id:s[0],$$slots:{right:[Er],default:[Nr]},$$scope:{ctx:s}};return s[2]!==void 0&&(u.checked=s[2]),e=new Q({props:u}),Z.push(()=>q(e,"checked",i)),r=new X({props:{layer:s[0],tooltip:s[4],show:s[2],clickable:!1}}),{c(){w(e.$$.fragment),t=A(),w(r.$$.fragment)},m(l,c){k(e,l,c),m(l,t,c),k(r,l,c),o=!0},p(l,[c]){const a={};c&1&&(a.id=l[0]),c&258&&(a.$$scope={dirty:c,ctx:l}),!n&&c&4&&(n=!0,a.checked=l[2],K(()=>n=!1)),e.$set(a);const f={};c&1&&(f.layer=l[0]),c&4&&(f.show=l[2]),r.$set(f)},i(l){o||(h(e.$$.fragment,l),h(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&g(t),b(e,l),b(r,l)}}}function Pr(s,e,n){let t;W(s,J,$=>n(9,t=$));let{$$slots:r={},$$scope:o}=e,{name:i}=e,{singularNoun:u}=e,{pluralNoun:l}=e,c=V[i];ke(t,i,`https://atip.uk/layers/v1/${i}.pmtiles`),Se(t,{id:i,source:i,sourceLayer:i,color:c,opacity:pe(1,.7)});let a=!1;function f($){return`<p>${$.properties.name??`Unnamed ${u}`}</p>`}function p($){a=$,n(2,a)}return s.$$set=$=>{"name"in $&&n(0,i=$.name),"singularNoun"in $&&n(5,u=$.singularNoun),"pluralNoun"in $&&n(1,l=$.pluralNoun),"$$scope"in $&&n(8,o=$.$$scope)},[i,l,a,c,f,u,r,p,o]}class it extends R{constructor(e){super(),G(this,e,Pr,Br,H,{name:0,singularNoun:5,pluralNoun:1})}}function xr(s){let e;return{c(){e=v("hospital")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Ir(s){let e;return{c(){e=v("Open Data Commons Open Database License")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function zr(s){let e,n,t,r,o,i,u,l,c;return t=new I({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[xr]},$$scope:{ctx:s}}}),l=new I({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Ir]},$$scope:{ctx:s}}}),{c(){e=N("p"),n=v("This shows "),w(t.$$.fragment),r=v(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=A(),i=N("p"),u=v("License: "),w(l.$$.fragment)},m(a,f){m(a,e,f),C(e,n),k(t,e,null),C(e,r),m(a,o,f),m(a,i,f),C(i,u),k(l,i,null),c=!0},p(a,f){const p={};f&1&&(p.$$scope={dirty:f,ctx:a}),t.$set(p);const $={};f&1&&($.$$scope={dirty:f,ctx:a}),l.$set($)},i(a){c||(h(t.$$.fragment,a),h(l.$$.fragment,a),c=!0)},o(a){_(t.$$.fragment,a),_(l.$$.fragment,a),c=!1},d(a){a&&(g(e),g(o),g(i)),b(t),b(l)}}}function Fr(s){let e,n;return e=new it({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[zr]},$$scope:{ctx:s}}}),{c(){w(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}class jr extends R{constructor(e){super(),G(this,e,null,Fr,H,{})}}function Rr(s){let e;return{c(){e=v("Indices of Multiple Deprivation")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Gr(s){let e;return{c(){e=v(`DLUCH GIS
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Hr(s){let e;return{c(){e=v(`here
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Vr(s){let e;return{c(){e=v(`Open Government License
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Zr(s){let e,n,t,r,o,i,u,l,c,a,f,p;return t=new I({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Gr]},$$scope:{ctx:s}}}),o=new I({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Hr]},$$scope:{ctx:s}}}),a=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Vr]},$$scope:{ctx:s}}}),{c(){e=N("p"),n=v("The 2019 English IMD scores come from "),w(t.$$.fragment),r=v(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),w(o.$$.fragment),i=v("."),u=A(),l=N("p"),c=v("License: "),w(a.$$.fragment),f=v(`. Contains OS data © Crown copyright and database
        right 2023.`)},m($,d){m($,e,d),C(e,n),k(t,e,null),C(e,r),k(o,e,null),C(e,i),m($,u,d),m($,l,d),C(l,c),k(a,l,null),C(l,f),p=!0},p($,d){const y={};d&64&&(y.$$scope={dirty:d,ctx:$}),t.$set(y);const S={};d&64&&(S.$$scope={dirty:d,ctx:$}),o.$set(S);const L={};d&64&&(L.$$scope={dirty:d,ctx:$}),a.$set(L)},i($){p||(h(t.$$.fragment,$),h(o.$$.fragment,$),h(a.$$.fragment,$),p=!0)},o($){_(t.$$.fragment,$),_(o.$$.fragment,$),_(a.$$.fragment,$),p=!1},d($){$&&(g(e),g(u),g(l)),b(t),b(o),b(a)}}}function qr(s){let e,n,t;return n=new te({props:{$$slots:{default:[Zr]},$$scope:{ctx:s}}}),{c(){e=N("span"),w(n.$$.fragment),j(e,"slot","right")},m(r,o){m(r,e,o),k(n,e,null),t=!0},p(r,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(h(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&g(e),b(n)}}}function Lt(s){let e,n;return e=new qe({props:{colorScale:s[1],limits:["Least deprived","Most deprived"]}}),{c(){w(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p:ee,i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}function Kr(s){let e,n,t,r,o,i;function u(a){s[3](a)}let l={id:ce,$$slots:{right:[qr],default:[Rr]},$$scope:{ctx:s}};s[0]!==void 0&&(l.checked=s[0]),e=new Q({props:l}),Z.push(()=>q(e,"checked",u));let c=s[0]&&Lt(s);return o=new X({props:{layer:ce,tooltip:Wr,show:s[0],clickable:!1}}),{c(){w(e.$$.fragment),t=A(),c&&c.c(),r=A(),w(o.$$.fragment)},m(a,f){k(e,a,f),m(a,t,f),c&&c.m(a,f),m(a,r,f),k(o,a,f),i=!0},p(a,[f]){const p={};f&64&&(p.$$scope={dirty:f,ctx:a}),!n&&f&1&&(n=!0,p.checked=a[0],K(()=>n=!1)),e.$set(p),a[0]?c?(c.p(a,f),f&1&&h(c,1)):(c=Lt(a),c.c(),h(c,1),c.m(r.parentNode,r)):c&&(de(),_(c,1,1,()=>{c=null}),we());const $={};f&1&&($.show=a[0]),o.$set($)},i(a){i||(h(e.$$.fragment,a),h(c),h(o.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(c),_(o.$$.fragment,a),i=!1},d(a){a&&(g(t),g(r)),b(e,a),c&&c.d(a),b(o,a)}}}let ce="imd";function Wr(s){return`<p>${s.properties.LSOA11CD} has an IMD score of <b>${s.properties.score}</b></p><p>Rank: <b>${s.properties.rank.toLocaleString()}</b> / 32,844 LSOAs</p>`}function Jr(s,e,n){let t;W(s,J,c=>n(2,t=c));let r=`${ce}-outline`,o=V.sequential_low_to_high,i=[0,2,4,6,8,10];ke(t,ce,`https://atip.uk/layers/v1/${ce}.pmtiles`),Se(t,{id:ce,source:ce,sourceLayer:ce,color:Et(["-",10,["get","decile"]],i,o),opacity:pe(.5,.7)}),be(t,{id:r,source:ce,sourceLayer:ce,color:"black",width:.5});let u=!1;function l(c){u=c,n(0,u)}return s.$$.update=()=>{s.$$.dirty&5&&t.getLayer(r)&&t.setLayoutProperty(r,"visibility",u?"visible":"none")},[u,o,t,l]}class Yr extends R{constructor(e){super(),G(this,e,Jr,Kr,H,{})}}function Xr(s){let e,n,t;return e=new me({props:{color:s[1]}}),{c(){w(e.$$.fragment),n=v(`
  Local Authority Districts`)},m(r,o){k(e,r,o),m(r,n,o),t=!0},p:ee,i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&g(n),b(e,r)}}}function Qr(s){let e;return{c(){e=v(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function es(s){let e;return{c(){e=v(`Open Government License
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function ts(s){let e,n,t,r,o,i,u,l,c,a;return t=new I({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Qr]},$$scope:{ctx:s}}}),l=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[es]},$$scope:{ctx:s}}}),{c(){e=N("p"),n=v("Data from "),w(t.$$.fragment),r=v(", as of May 2023."),o=A(),i=N("p"),u=v("License: "),w(l.$$.fragment),c=v(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(f,p){m(f,e,p),C(e,n),k(t,e,null),C(e,r),m(f,o,p),m(f,i,p),C(i,u),k(l,i,null),C(i,c),a=!0},p(f,p){const $={};p&32&&($.$$scope={dirty:p,ctx:f}),t.$set($);const d={};p&32&&(d.$$scope={dirty:p,ctx:f}),l.$set(d)},i(f){a||(h(t.$$.fragment,f),h(l.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(l.$$.fragment,f),a=!1},d(f){f&&(g(e),g(o),g(i)),b(t),b(l)}}}function ns(s){let e,n,t;return n=new te({props:{$$slots:{default:[ts]},$$scope:{ctx:s}}}),{c(){e=N("span"),w(n.$$.fragment),j(e,"slot","right")},m(r,o){m(r,e,o),k(n,e,null),t=!0},p(r,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(h(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&g(e),b(n)}}}function rs(s){let e,n,t,r,o;function i(l){s[3](l)}let u={id:Le,$$slots:{right:[ns],default:[Xr]},$$scope:{ctx:s}};return s[0]!==void 0&&(u.checked=s[0]),e=new Q({props:u}),Z.push(()=>q(e,"checked",i)),r=new X({props:{layer:Le,tooltip:ss,show:s[0],clickable:!0}}),r.$on("click",os),{c(){w(e.$$.fragment),t=A(),w(r.$$.fragment)},m(l,c){k(e,l,c),m(l,t,c),k(r,l,c),o=!0},p(l,[c]){const a={};c&32&&(a.$$scope={dirty:c,ctx:l}),!n&&c&1&&(n=!0,a.checked=l[0],K(()=>n=!1)),e.$set(a);const f={};c&1&&(f.show=l[0]),r.$set(f)},i(l){o||(h(e.$$.fragment,l),h(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&g(t),b(e,l),b(r,l)}}}let Le="local_authority_districts";function ss(s){return`<p>${s.properties.name}</p>`}function os(s){window.open(`https://www.ons.gov.uk/visualisations/areas/${s.detail.properties.LAD23CD}`,"_blank")}function ls(s,e,n){let t;W(s,J,l=>n(2,t=l));let r=V.local_authority_districts,o=`${Le}-outline`;st(t,Le,`https://atip.uk/layers/v1/${Le}.geojson`),Se(t,{id:Le,source:Le,color:r,opacity:pe(.5,.1)}),be(t,{id:o,source:Le,color:r,width:2.5});let i=!1;function u(l){i=l,n(0,i)}return s.$$.update=()=>{s.$$.dirty&5&&t.getLayer(o)&&t.setLayoutProperty(o,"visibility",i?"visible":"none")},[i,r,t,u]}class is extends R{constructor(e){super(),G(this,e,ls,rs,H,{})}}function as(s){let e,n,t;return e=new me({props:{color:s[1]}}),{c(){w(e.$$.fragment),n=v(`
  Local Planning Authorities`)},m(r,o){k(e,r,o),m(r,n,o),t=!0},p:ee,i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&g(n),b(e,r)}}}function cs(s){let e;return{c(){e=v(`local authority
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function fs(s){let e;return{c(){e=v(`national park authorit
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function us(s){let e;return{c(){e=v(`development corporation
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function $s(s){let e;return{c(){e=v("this map")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function ps(s){let e;return{c(){e=v(`planning.data.gov.uk
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function ms(s){let e;return{c(){e=v(`Open Government License
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function gs(s){let e,n,t,r,o,i,u,l,c,a,f,p,$,d,y,S,L,M,U,T,D,P,B,O,x;return t=new I({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[cs]},$$scope:{ctx:s}}}),o=new I({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[fs]},$$scope:{ctx:s}}}),u=new I({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[us]},$$scope:{ctx:s}}}),$=new I({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[$s]},$$scope:{ctx:s}}}),M=new I({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[ps]},$$scope:{ctx:s}}}),B=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ms]},$$scope:{ctx:s}}}),{c(){e=N("p"),n=v("LPAs may be a "),w(t.$$.fragment),r=v(", "),w(o.$$.fragment),i=v("y, or "),w(u.$$.fragment),l=v("."),c=A(),a=N("p"),f=N("strong"),p=v(`Note there are overlapping LPAs near Northhamptonshire, shown in a
          darker shade. Only one authority name is shown when hovering. Use `),w($.$$.fragment),d=v(" to get more details."),y=A(),S=N("p"),L=v("Data from ONS Geography via "),w(M.$$.fragment),U=v(", as of November 2022."),T=A(),D=N("p"),P=v("License: "),w(B.$$.fragment),O=v(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(E,F){m(E,e,F),C(e,n),k(t,e,null),C(e,r),k(o,e,null),C(e,i),k(u,e,null),C(e,l),m(E,c,F),m(E,a,F),C(a,f),C(f,p),k($,f,null),C(f,d),m(E,y,F),m(E,S,F),C(S,L),k(M,S,null),C(S,U),m(E,T,F),m(E,D,F),C(D,P),k(B,D,null),C(D,O),x=!0},p(E,F){const ve={};F&32&&(ve.$$scope={dirty:F,ctx:E}),t.$set(ve);const Te={};F&32&&(Te.$$scope={dirty:F,ctx:E}),o.$set(Te);const Ie={};F&32&&(Ie.$$scope={dirty:F,ctx:E}),u.$set(Ie);const ge={};F&32&&(ge.$$scope={dirty:F,ctx:E}),$.$set(ge);const De={};F&32&&(De.$$scope={dirty:F,ctx:E}),M.$set(De);const ze={};F&32&&(ze.$$scope={dirty:F,ctx:E}),B.$set(ze)},i(E){x||(h(t.$$.fragment,E),h(o.$$.fragment,E),h(u.$$.fragment,E),h($.$$.fragment,E),h(M.$$.fragment,E),h(B.$$.fragment,E),x=!0)},o(E){_(t.$$.fragment,E),_(o.$$.fragment,E),_(u.$$.fragment,E),_($.$$.fragment,E),_(M.$$.fragment,E),_(B.$$.fragment,E),x=!1},d(E){E&&(g(e),g(c),g(a),g(y),g(S),g(T),g(D)),b(t),b(o),b(u),b($),b(M),b(B)}}}function hs(s){let e,n,t;return n=new te({props:{$$slots:{default:[gs]},$$scope:{ctx:s}}}),{c(){e=N("span"),w(n.$$.fragment),j(e,"slot","right")},m(r,o){m(r,e,o),k(n,e,null),t=!0},p(r,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(h(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&g(e),b(n)}}}function _s(s){let e,n,t,r,o;function i(l){s[3](l)}let u={id:fe,$$slots:{right:[hs],default:[as]},$$scope:{ctx:s}};return s[0]!==void 0&&(u.checked=s[0]),e=new Q({props:u}),Z.push(()=>q(e,"checked",i)),r=new X({props:{layer:fe,tooltip:ds,show:s[0],clickable:!1}}),{c(){w(e.$$.fragment),t=A(),w(r.$$.fragment)},m(l,c){k(e,l,c),m(l,t,c),k(r,l,c),o=!0},p(l,[c]){const a={};c&32&&(a.$$scope={dirty:c,ctx:l}),!n&&c&1&&(n=!0,a.checked=l[0],K(()=>n=!1)),e.$set(a);const f={};c&1&&(f.show=l[0]),r.$set(f)},i(l){o||(h(e.$$.fragment,l),h(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&g(t),b(e,l),b(r,l)}}}let fe="local_planning_authorities";function ds(s){return`<p>${s.properties.name}</p>`}function ws(s,e,n){let t;W(s,J,l=>n(2,t=l));let r=V.local_planning_authorities,o=`${fe}-outline`;ke(t,fe,`https://atip.uk/layers/v1/${fe}.pmtiles`),Se(t,{id:fe,source:fe,sourceLayer:fe,color:r,opacity:pe(.5,.1)}),be(t,{id:o,source:fe,sourceLayer:fe,color:r,width:2.5});let i=!1;function u(l){i=l,n(0,i)}return s.$$.update=()=>{s.$$.dirty&5&&t.getLayer(o)&&t.setLayoutProperty(o,"visibility",i?"visible":"none")},[i,r,t,u]}class ks extends R{constructor(e){super(),G(this,e,ws,_s,H,{})}}function bs(s){let e,n,t;return e=new me({props:{color:s[1]}}),{c(){w(e.$$.fragment),n=v(`
  Major Road Network`)},m(r,o){k(e,r,o),m(r,n,o),t=!0},p:ee,i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&g(n),b(e,r)}}}function vs(s){let e;return{c(){e=v(`Major Road Network
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function ys(s){let e;return{c(){e=v("Open Government License")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Ls(s){let e,n,t,r,o,i,u,l,c;return t=new I({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[vs]},$$scope:{ctx:s}}}),l=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ys]},$$scope:{ctx:s}}}),{c(){e=N("p"),n=v("Data from the "),w(t.$$.fragment),r=v(", as of September 2021."),o=A(),i=N("p"),u=v("License: "),w(l.$$.fragment)},m(a,f){m(a,e,f),C(e,n),k(t,e,null),C(e,r),m(a,o,f),m(a,i,f),C(i,u),k(l,i,null),c=!0},p(a,f){const p={};f&16&&(p.$$scope={dirty:f,ctx:a}),t.$set(p);const $={};f&16&&($.$$scope={dirty:f,ctx:a}),l.$set($)},i(a){c||(h(t.$$.fragment,a),h(l.$$.fragment,a),c=!0)},o(a){_(t.$$.fragment,a),_(l.$$.fragment,a),c=!1},d(a){a&&(g(e),g(o),g(i)),b(t),b(l)}}}function Cs(s){let e,n,t;return n=new te({props:{$$slots:{default:[Ls]},$$scope:{ctx:s}}}),{c(){e=N("span"),w(n.$$.fragment),j(e,"slot","right")},m(r,o){m(r,e,o),k(n,e,null),t=!0},p(r,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(h(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&g(e),b(n)}}}function Ss(s){let e,n,t,r,o;function i(l){s[2](l)}let u={id:Me,$$slots:{right:[Cs],default:[bs]},$$scope:{ctx:s}};return s[0]!==void 0&&(u.checked=s[0]),e=new Q({props:u}),Z.push(()=>q(e,"checked",i)),r=new X({props:{layer:Me,tooltip:Ts,show:s[0],clickable:!1}}),{c(){w(e.$$.fragment),t=A(),w(r.$$.fragment)},m(l,c){k(e,l,c),m(l,t,c),k(r,l,c),o=!0},p(l,[c]){const a={};c&16&&(a.$$scope={dirty:c,ctx:l}),!n&&c&1&&(n=!0,a.checked=l[0],K(()=>n=!1)),e.$set(a);const f={};c&1&&(f.show=l[0]),r.$set(f)},i(l){o||(h(e.$$.fragment,l),h(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&g(t),b(e,l),b(r,l)}}}let Me="mrn";function Ts(s){return`<p>${s.properties.name??"Unknown MRN road"}</p>`}function Ds(s,e,n){let t;W(s,J,u=>n(3,t=u));let r=V.mrn;ke(t,Me,`https://atip.uk/layers/v1/${Me}.pmtiles`),be(t,{id:Me,source:Me,sourceLayer:Me,color:r,width:7,opacity:pe(.5,1)});let o=!1;function i(u){o=u,n(0,o)}return[o,r,i]}class Os extends R{constructor(e){super(),G(this,e,Ds,Ss,H,{})}}function As(s){let e,n,t;return e=new me({props:{color:s[1]}}),{c(){w(e.$$.fragment),n=v(`
  Parliamentary constituencies`)},m(r,o){k(e,r,o),m(r,n,o),t=!0},p:ee,i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&g(n),b(e,r)}}}function Ms(s){let e;return{c(){e=v(`Ordnance Survey Boundary-Line
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Ns(s){let e;return{c(){e=v("Open Government License")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Us(s){let e,n,t,r,o,i,u,l,c;return t=new I({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Ms]},$$scope:{ctx:s}}}),l=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ns]},$$scope:{ctx:s}}}),{c(){e=N("p"),n=v("Data from "),w(t.$$.fragment),r=v(", as of May 2023."),o=A(),i=N("p"),u=v("License: "),w(l.$$.fragment)},m(a,f){m(a,e,f),C(e,n),k(t,e,null),C(e,r),m(a,o,f),m(a,i,f),C(i,u),k(l,i,null),c=!0},p(a,f){const p={};f&32&&(p.$$scope={dirty:f,ctx:a}),t.$set(p);const $={};f&32&&($.$$scope={dirty:f,ctx:a}),l.$set($)},i(a){c||(h(t.$$.fragment,a),h(l.$$.fragment,a),c=!0)},o(a){_(t.$$.fragment,a),_(l.$$.fragment,a),c=!1},d(a){a&&(g(e),g(o),g(i)),b(t),b(l)}}}function Es(s){let e,n,t;return n=new te({props:{$$slots:{default:[Us]},$$scope:{ctx:s}}}),{c(){e=N("span"),w(n.$$.fragment),j(e,"slot","right")},m(r,o){m(r,e,o),k(n,e,null),t=!0},p(r,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(h(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&g(e),b(n)}}}function Bs(s){let e,n,t,r,o;function i(l){s[3](l)}let u={id:ue,$$slots:{right:[Es],default:[As]},$$scope:{ctx:s}};return s[0]!==void 0&&(u.checked=s[0]),e=new Q({props:u}),Z.push(()=>q(e,"checked",i)),r=new X({props:{layer:ue,tooltip:Ps,show:s[0],clickable:!0}}),r.$on("click",xs),{c(){w(e.$$.fragment),t=A(),w(r.$$.fragment)},m(l,c){k(e,l,c),m(l,t,c),k(r,l,c),o=!0},p(l,[c]){const a={};c&32&&(a.$$scope={dirty:c,ctx:l}),!n&&c&1&&(n=!0,a.checked=l[0],K(()=>n=!1)),e.$set(a);const f={};c&1&&(f.show=l[0]),r.$set(f)},i(l){o||(h(e.$$.fragment,l),h(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&g(t),b(e,l),b(r,l)}}}let ue="parliamentary_constituencies";function Ps(s){return`<p>${s.properties.Name}</p>`}function xs(s){let e=s.detail.properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Is(s,e,n){let t;W(s,J,l=>n(2,t=l));let r=V.parliamentary_constituencies,o=`${ue}-outline`;ke(t,ue,`https://atip.uk/layers/v1/${ue}.pmtiles`),Se(t,{id:ue,source:ue,sourceLayer:ue,color:r,opacity:pe(.5,.1)}),be(t,{id:o,source:ue,sourceLayer:ue,color:r,width:5});let i=!1;function u(l){i=l,n(0,i)}return s.$$.update=()=>{s.$$.dirty&5&&t.getLayer(o)&&t.setLayoutProperty(o,"visibility",i?"visible":"none")},[i,r,t,u]}class zs extends R{constructor(e){super(),G(this,e,Is,Bs,H,{})}}function Fs(s){let e,n,t,r;return e=new me({props:{color:s[3]}}),{c(){w(e.$$.fragment),n=A(),t=v(s[1])},m(o,i){k(e,o,i),m(o,n,i),m(o,t,i),r=!0},p(o,i){(!r||i&2)&&ie(t,o[1])},i(o){r||(h(e.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),r=!1},d(o){o&&(g(n),g(t)),b(e,o)}}}function js(s){let e;const n=s[7].default,t=Pt(n,s,s[9],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&512)&&xt(t,n,r,r[9],e?zt(n,r[9],o,null):It(r[9]),null)},i(r){e||(h(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function Rs(s){let e,n,t;return n=new te({props:{$$slots:{default:[js]},$$scope:{ctx:s}}}),{c(){e=N("span"),w(n.$$.fragment),j(e,"slot","right")},m(r,o){m(r,e,o),k(n,e,null),t=!0},p(r,o){const i={};o&512&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(h(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&g(e),b(n)}}}function Gs(s){let e,n,t,r,o;function i(l){s[8](l)}let u={id:s[0],$$slots:{right:[Rs],default:[Fs]},$$scope:{ctx:s}};return s[2]!==void 0&&(u.checked=s[2]),e=new Q({props:u}),Z.push(()=>q(e,"checked",i)),r=new X({props:{layer:s[0],tooltip:s[4],show:s[2],clickable:!1}}),{c(){w(e.$$.fragment),t=A(),w(r.$$.fragment)},m(l,c){k(e,l,c),m(l,t,c),k(r,l,c),o=!0},p(l,[c]){const a={};c&1&&(a.id=l[0]),c&514&&(a.$$scope={dirty:c,ctx:l}),!n&&c&4&&(n=!0,a.checked=l[2],K(()=>n=!1)),e.$set(a);const f={};c&1&&(f.layer=l[0]),c&4&&(f.show=l[2]),r.$set(f)},i(l){o||(h(e.$$.fragment,l),h(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&g(t),b(e,l),b(r,l)}}}function Hs(s,e,n){let t;W(s,J,d=>n(10,t=d));let{$$slots:r={},$$scope:o}=e,{name:i}=e,{singularNoun:u}=e,{pluralNoun:l}=e,{circleRadius:c}=e,a=V[i];st(t,i,`https://atip.uk/layers/v1/${i}.geojson`),Bt(t,{id:i,source:i,color:a,radius:c/2});let f=!1;function p(d){return`<p>${d.properties.name??`Unnamed ${u}`}</p>`}function $(d){f=d,n(2,f)}return s.$$set=d=>{"name"in d&&n(0,i=d.name),"singularNoun"in d&&n(5,u=d.singularNoun),"pluralNoun"in d&&n(1,l=d.pluralNoun),"circleRadius"in d&&n(6,c=d.circleRadius),"$$scope"in d&&n(9,o=d.$$scope)},[i,l,f,a,p,u,c,r,$,o]}class Vs extends R{constructor(e){super(),G(this,e,Hs,Gs,H,{name:0,singularNoun:5,pluralNoun:1,circleRadius:6})}}function Zs(s){let e;return{c(){e=v("railway station")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function qs(s){let e;return{c(){e=v("Open Data Commons Open Database License")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Ks(s){let e,n,t,r,o,i,u,l,c;return t=new I({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Zs]},$$scope:{ctx:s}}}),l=new I({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[qs]},$$scope:{ctx:s}}}),{c(){e=N("p"),n=v("This shows "),w(t.$$.fragment),r=v(" data from OpenStreetMap (as of 9 August 2023)."),o=A(),i=N("p"),u=v("License: "),w(l.$$.fragment)},m(a,f){m(a,e,f),C(e,n),k(t,e,null),C(e,r),m(a,o,f),m(a,i,f),C(i,u),k(l,i,null),c=!0},p(a,f){const p={};f&1&&(p.$$scope={dirty:f,ctx:a}),t.$set(p);const $={};f&1&&($.$$scope={dirty:f,ctx:a}),l.$set($)},i(a){c||(h(t.$$.fragment,a),h(l.$$.fragment,a),c=!0)},o(a){_(t.$$.fragment,a),_(l.$$.fragment,a),c=!1},d(a){a&&(g(e),g(o),g(i)),b(t),b(l)}}}function Ws(s){let e,n;return e=new Vs({props:{name:Js,singularNoun:"railway station",pluralNoun:"Railway stations",circleRadius:_n,$$slots:{default:[Ks]},$$scope:{ctx:s}}}),{c(){w(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}const Js="railway_stations";class Ys extends R{constructor(e){super(),G(this,e,null,Ws,H,{})}}function Xs(s){let e;return{c(){e=v("Show on map")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Qs(s){let e;return{c(){e=v("Edit scheme locally")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function eo(s){let e,n,t=s[0].authority_or_region+"",r,o,i,u,l=s[0].capital_scheme_id+"",c,a,f,p,$=s[0].funding_programme+"",d,y,S,L,M,U,T;return L=new Ve({props:{$$slots:{default:[Xs]},$$scope:{ctx:s}}}),L.$on("click",s[3]),U=new Ve({props:{disabled:s[1],title:s[2],$$slots:{default:[Qs]},$$scope:{ctx:s}}}),U.$on("click",s[4]),{c(){e=N("p"),n=v("Authority or region: "),r=v(t),o=A(),i=N("p"),u=v("Capital scheme ID: "),c=v(l),a=A(),f=N("p"),p=v("Funding programme: "),d=v($),y=A(),S=N("div"),w(L.$$.fragment),M=A(),w(U.$$.fragment),j(S,"class","govuk-button-group")},m(D,P){m(D,e,P),C(e,n),C(e,r),m(D,o,P),m(D,i,P),C(i,u),C(i,c),m(D,a,P),m(D,f,P),C(f,p),C(f,d),m(D,y,P),m(D,S,P),k(L,S,null),C(S,M),k(U,S,null),T=!0},p(D,P){(!T||P&1)&&t!==(t=D[0].authority_or_region+"")&&ie(r,t),(!T||P&1)&&l!==(l=D[0].capital_scheme_id+"")&&ie(c,l),(!T||P&1)&&$!==($=D[0].funding_programme+"")&&ie(d,$);const B={};P&256&&(B.$$scope={dirty:P,ctx:D}),L.$set(B);const O={};P&256&&(O.$$scope={dirty:P,ctx:D}),U.$set(O)},i(D){T||(h(L.$$.fragment,D),h(U.$$.fragment,D),T=!0)},o(D){_(L.$$.fragment,D),_(U.$$.fragment,D),T=!1},d(D){D&&(g(e),g(o),g(i),g(a),g(f),g(y),g(S)),b(L),b(U)}}}function to(s){let e,n;return e=new Ce({props:{label:`${s[0].scheme_reference}: ${s[0].num_features} features`,$$slots:{default:[eo]},$$scope:{ctx:s}}}),{c(){w(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.label=`${t[0].scheme_reference}: ${t[0].num_features} features`),r&257&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}function no(s,e,n){let t,r;W(s,xe,f=>n(6,t=f)),W(s,J,f=>n(7,r=f));let{scheme:o}=e,{authorityNames:i}=e,u=!i.has(o.authority_or_region),l=u?"This scheme doesn't have an authority specified correctly, so you can't edit this scheme. We're working to fix this problem.":void 0;function c(){let f={type:"FeatureCollection",features:t.features.filter(p=>p.properties.scheme_reference==o.scheme_reference)};r==null||r.fitBounds(Ft(f),{padding:20,animate:!1})}function a(){let f={type:"FeatureCollection",features:t.features.filter($=>$.properties.scheme_reference==o.scheme_reference)},p=o.authority_or_region;window.localStorage.setItem(p,JSON.stringify(f)),window.open(`scheme.html?authority=${o.authority_or_region}`,"_blank")}return s.$$set=f=>{"scheme"in f&&n(0,o=f.scheme),"authorityNames"in f&&n(5,i=f.authorityNames)},[o,u,l,c,a,i]}class ro extends R{constructor(e){super(),G(this,e,no,to,H,{scheme:0,authorityNames:5})}}function so(s){let e;return{c(){e=v("primary and secondary schools")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function oo(s){let e;return{c(){e=v("Open Data Commons Open Database License")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function lo(s){let e,n,t,r,o,i,u,l,c;return t=new I({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[so]},$$scope:{ctx:s}}}),l=new I({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[oo]},$$scope:{ctx:s}}}),{c(){e=N("p"),n=v("This shows "),w(t.$$.fragment),r=v(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=A(),i=N("p"),u=v("License: "),w(l.$$.fragment)},m(a,f){m(a,e,f),C(e,n),k(t,e,null),C(e,r),m(a,o,f),m(a,i,f),C(i,u),k(l,i,null),c=!0},p(a,f){const p={};f&1&&(p.$$scope={dirty:f,ctx:a}),t.$set(p);const $={};f&1&&($.$$scope={dirty:f,ctx:a}),l.$set($)},i(a){c||(h(t.$$.fragment,a),h(l.$$.fragment,a),c=!0)},o(a){_(t.$$.fragment,a),_(l.$$.fragment,a),c=!1},d(a){a&&(g(e),g(o),g(i)),b(t),b(l)}}}function io(s){let e,n;return e=new it({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[lo]},$$scope:{ctx:s}}}),{c(){w(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}class ao extends R{constructor(e){super(),G(this,e,null,io,H,{})}}function co(s){let e;return{c(){e=v("sports pitches")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function fo(s){let e;return{c(){e=v("sports centres")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function uo(s){let e;return{c(){e=v("Open Data Commons Open Database License")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function $o(s){let e,n,t,r,o,i,u,l,c,a,f;return t=new I({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[co]},$$scope:{ctx:s}}}),o=new I({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[fo]},$$scope:{ctx:s}}}),a=new I({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[uo]},$$scope:{ctx:s}}}),{c(){e=N("p"),n=v("This shows "),w(t.$$.fragment),r=v(" and "),w(o.$$.fragment),i=v(" data from OpenStreetMap (as of 9 August 2023)."),u=A(),l=N("p"),c=v("License: "),w(a.$$.fragment)},m(p,$){m(p,e,$),C(e,n),k(t,e,null),C(e,r),k(o,e,null),C(e,i),m(p,u,$),m(p,l,$),C(l,c),k(a,l,null),f=!0},p(p,$){const d={};$&1&&(d.$$scope={dirty:$,ctx:p}),t.$set(d);const y={};$&1&&(y.$$scope={dirty:$,ctx:p}),o.$set(y);const S={};$&1&&(S.$$scope={dirty:$,ctx:p}),a.$set(S)},i(p){f||(h(t.$$.fragment,p),h(o.$$.fragment,p),h(a.$$.fragment,p),f=!0)},o(p){_(t.$$.fragment,p),_(o.$$.fragment,p),_(a.$$.fragment,p),f=!1},d(p){p&&(g(e),g(u),g(l)),b(t),b(o),b(a)}}}function po(s){let e,n;return e=new it({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[$o]},$$scope:{ctx:s}}}),{c(){w(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}class mo extends R{constructor(e){super(),G(this,e,null,po,H,{})}}function go(s){let e,n,t;return e=new me({props:{color:s[1]}}),{c(){w(e.$$.fragment),n=v(`
  Wards`)},m(r,o){k(e,r,o),m(r,n,o),t=!0},p:ee,i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&g(n),b(e,r)}}}function ho(s){let e;return{c(){e=v(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function _o(s){let e;return{c(){e=v(`Open Government License
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function wo(s){let e,n,t,r,o,i,u,l,c,a;return t=new I({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[ho]},$$scope:{ctx:s}}}),l=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[_o]},$$scope:{ctx:s}}}),{c(){e=N("p"),n=v("Data from "),w(t.$$.fragment),r=v(", as of May 2023."),o=A(),i=N("p"),u=v("License: "),w(l.$$.fragment),c=v(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(f,p){m(f,e,p),C(e,n),k(t,e,null),C(e,r),m(f,o,p),m(f,i,p),C(i,u),k(l,i,null),C(i,c),a=!0},p(f,p){const $={};p&32&&($.$$scope={dirty:p,ctx:f}),t.$set($);const d={};p&32&&(d.$$scope={dirty:p,ctx:f}),l.$set(d)},i(f){a||(h(t.$$.fragment,f),h(l.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(l.$$.fragment,f),a=!1},d(f){f&&(g(e),g(o),g(i)),b(t),b(l)}}}function ko(s){let e,n,t;return n=new te({props:{$$slots:{default:[wo]},$$scope:{ctx:s}}}),{c(){e=N("span"),w(n.$$.fragment),j(e,"slot","right")},m(r,o){m(r,e,o),k(n,e,null),t=!0},p(r,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(h(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&g(e),b(n)}}}function bo(s){let e,n,t,r,o;function i(l){s[3](l)}let u={id:$e,$$slots:{right:[ko],default:[go]},$$scope:{ctx:s}};return s[0]!==void 0&&(u.checked=s[0]),e=new Q({props:u}),Z.push(()=>q(e,"checked",i)),r=new X({props:{layer:$e,tooltip:vo,show:s[0],clickable:!0}}),r.$on("click",yo),{c(){w(e.$$.fragment),t=A(),w(r.$$.fragment)},m(l,c){k(e,l,c),m(l,t,c),k(r,l,c),o=!0},p(l,[c]){const a={};c&32&&(a.$$scope={dirty:c,ctx:l}),!n&&c&1&&(n=!0,a.checked=l[0],K(()=>n=!1)),e.$set(a);const f={};c&1&&(f.show=l[0]),r.$set(f)},i(l){o||(h(e.$$.fragment,l),h(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&g(t),b(e,l),b(r,l)}}}let $e="wards";function vo(s){return`<p>${s.properties.name}</p>`}function yo(s){let e=encodeURIComponent(s.detail.properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Lo(s,e,n){let t;W(s,J,l=>n(2,t=l));let r=V.wards,o=`${$e}-outline`;ke(t,$e,`https://atip.uk/layers/v1/${$e}.pmtiles`),Se(t,{id:$e,source:$e,sourceLayer:$e,color:r,opacity:pe(.5,.1)}),be(t,{id:o,source:$e,sourceLayer:$e,color:r,width:2.5});let i=!1;function u(l){i=l,n(0,i)}return s.$$.update=()=>{s.$$.dirty&5&&t.getLayer(o)&&t.setLayoutProperty(o,"visibility",i?"visible":"none")},[i,r,t,u]}class Co extends R{constructor(e){super(),G(this,e,Lo,bo,H,{})}}var Y=(s,e,n)=>new Promise((t,r)=>{var o=l=>{try{u(n.next(l))}catch(c){r(c)}},i=l=>{try{u(n.throw(l))}catch(c){r(c)}},u=l=>l.done?t(l.value):Promise.resolve(l.value).then(o,i);u((n=n.apply(s,e)).next())}),re=Uint8Array,Be=Uint16Array,So=Int32Array,Gt=new re([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ht=new re([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),To=new re([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Vt=function(s,e){for(var n=new Be(31),t=0;t<31;++t)n[t]=e+=1<<s[t-1];for(var r=new So(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)r[o]=o-n[t]<<5|t;return{b:n,r}},Zt=Vt(Gt,2),qt=Zt.b,Do=Zt.r;qt[28]=258,Do[258]=28;var Oo=Vt(Ht,0),Ao=Oo.b,nt=new Be(32768);for(z=0;z<32768;++z)he=(z&43690)>>1|(z&21845)<<1,he=(he&52428)>>2|(he&13107)<<2,he=(he&61680)>>4|(he&3855)<<4,nt[z]=((he&65280)>>8|(he&255)<<8)>>1;var he,z,Ge=function(s,e,n){for(var t=s.length,r=0,o=new Be(e);r<t;++r)s[r]&&++o[s[r]-1];var i=new Be(e);for(r=1;r<e;++r)i[r]=i[r-1]+o[r-1]<<1;var u;if(n){u=new Be(1<<e);var l=15-e;for(r=0;r<t;++r)if(s[r])for(var c=r<<4|s[r],a=e-s[r],f=i[s[r]-1]++<<a,p=f|(1<<a)-1;f<=p;++f)u[nt[f]>>l]=c}else for(u=new Be(t),r=0;r<t;++r)s[r]&&(u[r]=nt[i[s[r]-1]++]>>15-s[r]);return u},He=new re(288);for(z=0;z<144;++z)He[z]=8;var z;for(z=144;z<256;++z)He[z]=9;var z;for(z=256;z<280;++z)He[z]=7;var z;for(z=280;z<288;++z)He[z]=8;var z,Kt=new re(32);for(z=0;z<32;++z)Kt[z]=5;var z,Mo=Ge(He,9,1),No=Ge(Kt,5,1),Xe=function(s){for(var e=s[0],n=1;n<s.length;++n)s[n]>e&&(e=s[n]);return e},oe=function(s,e,n){var t=e/8|0;return(s[t]|s[t+1]<<8)>>(e&7)&n},Qe=function(s,e){var n=e/8|0;return(s[n]|s[n+1]<<8|s[n+2]<<16)>>(e&7)},Uo=function(s){return(s+7)/8|0},Eo=function(s,e,n){(e==null||e<0)&&(e=0),(n==null||n>s.length)&&(n=s.length);var t=new re(n-e);return t.set(s.subarray(e,n)),t},Bo=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ne=function(s,e,n){var t=new Error(e||Bo[s]);if(t.code=s,Error.captureStackTrace&&Error.captureStackTrace(t,ne),!n)throw t;return t},at=function(s,e,n,t){var r=s.length,o=t?t.length:0;if(!r||e.f&&!e.l)return n||new re(0);var i=!n||e.i!=2,u=e.i;n||(n=new re(r*3));var l=function(ut){var $t=n.length;if(ut>$t){var pt=new re(Math.max($t*2,ut));pt.set(n),n=pt}},c=e.f||0,a=e.p||0,f=e.b||0,p=e.l,$=e.d,d=e.m,y=e.n,S=r*8;do{if(!p){c=oe(s,a,1);var L=oe(s,a+1,3);if(a+=3,L)if(L==1)p=Mo,$=No,d=9,y=5;else if(L==2){var D=oe(s,a,31)+257,P=oe(s,a+10,15)+4,B=D+oe(s,a+5,31)+1;a+=14;for(var O=new re(B),x=new re(19),E=0;E<P;++E)x[To[E]]=oe(s,a+E*3,7);a+=P*3;for(var F=Xe(x),ve=(1<<F)-1,Te=Ge(x,F,1),E=0;E<B;){var Ie=Te[oe(s,a,ve)];a+=Ie&15;var M=Ie>>4;if(M<16)O[E++]=M;else{var ge=0,De=0;for(M==16?(De=3+oe(s,a,3),a+=2,ge=O[E-1]):M==17?(De=3+oe(s,a,7),a+=3):M==18&&(De=11+oe(s,a,127),a+=7);De--;)O[E++]=ge}}var ze=O.subarray(0,D),se=O.subarray(D);d=Xe(ze),y=Xe(se),p=Ge(ze,d,1),$=Ge(se,y,1)}else ne(1);else{var M=Uo(a)+4,U=s[M-4]|s[M-3]<<8,T=M+U;if(T>r){u&&ne(0);break}i&&l(f+U),n.set(s.subarray(M,T),f),e.b=f+=U,e.p=a=T*8,e.f=c;continue}if(a>S){u&&ne(0);break}}i&&l(f+131072);for(var nn=(1<<d)-1,rn=(1<<y)-1,Ke=a;;Ke=a){var ge=p[Qe(s,a)&nn],Ne=ge>>4;if(a+=ge&15,a>S){u&&ne(0);break}if(ge||ne(2),Ne<256)n[f++]=Ne;else if(Ne==256){Ke=a,p=null;break}else{var ct=Ne-254;if(Ne>264){var E=Ne-257,Fe=Gt[E];ct=oe(s,a,(1<<Fe)-1)+qt[E],a+=Fe}var We=$[Qe(s,a)&rn],Je=We>>4;We||ne(3),a+=We&15;var se=Ao[Je];if(Je>3){var Fe=Ht[Je];se+=Qe(s,a)&(1<<Fe)-1,a+=Fe}if(a>S){u&&ne(0);break}i&&l(f+131072);var Ye=f+ct;if(f<se){var ft=o-se,sn=Math.min(se,Ye);for(ft+f<0&&ne(3);f<sn;++f)n[f]=t[ft+f]}for(;f<Ye;f+=4)n[f]=n[f-se],n[f+1]=n[f+1-se],n[f+2]=n[f+2-se],n[f+3]=n[f+3-se];f=Ye}}e.l=p,e.p=Ke,e.b=f,e.f=c,p&&(c=1,e.m=d,e.d=$,e.n=y)}while(!c);return f==n.length?n:Eo(n,0,f)},Po=new re(0),xo=function(s){(s[0]!=31||s[1]!=139||s[2]!=8)&&ne(6,"invalid gzip data");var e=s[3],n=10;e&4&&(n+=(s[10]|s[11]<<8)+2);for(var t=(e>>3&1)+(e>>4&1);t>0;t-=!s[n++]);return n+(e&2)},Io=function(s){var e=s.length;return(s[e-4]|s[e-3]<<8|s[e-2]<<16|s[e-1]<<24)>>>0},zo=function(s,e){return((s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31)&&ne(6,"invalid zlib data"),(s[1]>>5&1)==+!e&&ne(6,"invalid zlib data: "+(s[1]&32?"need":"unexpected")+" dictionary"),(s[1]>>3&4)+2};function Fo(s,e){return at(s,{i:2},e&&e.out,e&&e.dictionary)}function jo(s,e){var n=xo(s);return n+8>s.length&&ne(6,"invalid gzip data"),at(s.subarray(n,-8),{i:2},e&&e.out||new re(Io(s)),e&&e.dictionary)}function Ro(s,e){return at(s.subarray(zo(s,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}function rt(s,e){return s[0]==31&&s[1]==139&&s[2]==8?jo(s,e):(s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31?Fo(s,e):Ro(s,e)}var Go=typeof TextDecoder<"u"&&new TextDecoder,Ho=0;try{Go.decode(Po,{stream:!0}),Ho=1}catch{}var Wt=(s,e)=>s*Math.pow(2,e),je=(s,e)=>Math.floor(s/Math.pow(2,e)),Ze=(s,e)=>Wt(s.getUint16(e+1,!0),8)+s.getUint8(e),Jt=(s,e)=>Wt(s.getUint32(e+2,!0),16)+s.getUint16(e,!0),Vo=(s,e,n,t,r)=>{if(s!=t.getUint8(r))return s-t.getUint8(r);const o=Ze(t,r+1);if(e!=o)return e-o;const i=Ze(t,r+4);return n!=i?n-i:0},Zo=(s,e,n,t)=>{const r=Yt(s,e|128,n,t);return r?{z:e,x:n,y:t,offset:r[0],length:r[1],is_dir:!0}:null},Ct=(s,e,n,t)=>{const r=Yt(s,e,n,t);return r?{z:e,x:n,y:t,offset:r[0],length:r[1],is_dir:!1}:null},Yt=(s,e,n,t)=>{let r=0,o=s.byteLength/17-1;for(;r<=o;){const i=o+r>>1,u=Vo(e,n,t,s,i*17);if(u>0)r=i+1;else if(u<0)o=i-1;else return[Jt(s,i*17+7),s.getUint32(i*17+13,!0)]}return null},qo=(s,e)=>s.is_dir&&!e.is_dir?1:!s.is_dir&&e.is_dir?-1:s.z!==e.z?s.z-e.z:s.x!==e.x?s.x-e.x:s.y-e.y,Xt=(s,e)=>{const n=s.getUint8(e*17);return{z:n&127,x:Ze(s,e*17+1),y:Ze(s,e*17+4),offset:Jt(s,e*17+7),length:s.getUint32(e*17+13,!0),is_dir:n>>7===1}},St=s=>{const e=[],n=new DataView(s);for(let t=0;t<n.byteLength/17;t++)e.push(Xt(n,t));return Ko(e)},Ko=s=>{s.sort(qo);const e=new ArrayBuffer(17*s.length),n=new Uint8Array(e);for(let t=0;t<s.length;t++){const r=s[t];let o=r.z;r.is_dir&&(o=o|128),n[t*17]=o,n[t*17+1]=r.x&255,n[t*17+2]=r.x>>8&255,n[t*17+3]=r.x>>16&255,n[t*17+4]=r.y&255,n[t*17+5]=r.y>>8&255,n[t*17+6]=r.y>>16&255,n[t*17+7]=r.offset&255,n[t*17+8]=je(r.offset,8)&255,n[t*17+9]=je(r.offset,16)&255,n[t*17+10]=je(r.offset,24)&255,n[t*17+11]=je(r.offset,32)&255,n[t*17+12]=je(r.offset,48)&255,n[t*17+13]=r.length&255,n[t*17+14]=r.length>>8&255,n[t*17+15]=r.length>>16&255,n[t*17+16]=r.length>>24&255}return e},Wo=(s,e)=>{if(s.byteLength<17)return null;const n=s.byteLength/17,t=Xt(s,n-1);if(t.is_dir){const r=t.z,o=e.z-r,i=Math.trunc(e.x/(1<<o)),u=Math.trunc(e.y/(1<<o));return{z:r,x:i,y:u}}return null};function Jo(s){return Y(this,null,function*(){const e=yield s.getBytes(0,512e3),n=new DataView(e.data),t=n.getUint32(4,!0),r=n.getUint16(8,!0),o=new TextDecoder("utf-8"),i=JSON.parse(o.decode(new DataView(e.data,10,t)));let u=0;i.compression==="gzip"&&(u=2);let l=0;"minzoom"in i&&(l=+i.minzoom);let c=0;"maxzoom"in i&&(c=+i.maxzoom);let a=0,f=0,p=0,$=-180,d=-85,y=180,S=85;if(i.bounds){const M=i.bounds.split(",");$=+M[0],d=+M[1],y=+M[2],S=+M[3]}if(i.center){const M=i.center.split(",");a=+M[0],f=+M[1],p=+M[2]}return{specVersion:n.getUint16(2,!0),rootDirectoryOffset:10+t,rootDirectoryLength:r*17,jsonMetadataOffset:10,jsonMetadataLength:t,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:u,tileType:1,minZoom:l,maxZoom:c,minLon:$,minLat:d,maxLon:y,maxLat:S,centerZoom:p,centerLon:a,centerLat:f,etag:e.etag}})}function Yo(s,e,n,t,r,o,i){return Y(this,null,function*(){let u=yield n.getArrayBuffer(e,s.rootDirectoryOffset,s.rootDirectoryLength,s);s.specVersion===1&&(u=St(u));const l=Ct(new DataView(u),t,r,o);if(l){let f=(yield e.getBytes(l.offset,l.length,i)).data;const p=new DataView(f);return p.getUint8(0)==31&&p.getUint8(1)==139&&(f=rt(new Uint8Array(f))),{data:f}}const c=Wo(new DataView(u),{z:t,x:r,y:o});if(c){const a=Zo(new DataView(u),c.z,c.x,c.y);if(a){let f=yield n.getArrayBuffer(e,a.offset,a.length,s);s.specVersion===1&&(f=St(f));const p=Ct(new DataView(f),t,r,o);if(p){let d=(yield e.getBytes(p.offset,p.length,i)).data;const y=new DataView(d);return y.getUint8(0)==31&&y.getUint8(1)==139&&(d=rt(new Uint8Array(d))),{data:d}}}}})}var Qt={getHeader:Jo,getZxy:Yo},Xo=class{constructor(){this.tile=(s,e)=>{if(s.type=="json"){const n=s.url.substr(10);let t=this.tiles.get(n);return t||(t=new Tt(n),this.tiles.set(n,t)),t.getHeader().then(r=>{const o={tiles:[s.url+"/{z}/{x}/{y}"],minzoom:r.minZoom,maxzoom:r.maxZoom,bounds:[r.minLon,r.minLat,r.maxLon,r.maxLat]};e(null,o,null,null)}).catch(r=>{e(r,null,null,null)}),{cancel:()=>{}}}else{const n=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),t=s.url.match(n);if(!t)throw new Error("Invalid PMTiles protocol URL");const r=t[1];let o=this.tiles.get(r);o||(o=new Tt(r),this.tiles.set(r,o));const i=t[2],u=t[3],l=t[4],c=new AbortController,a=c.signal;let f=()=>{c.abort()};return o.getHeader().then(p=>{o.getZxy(+i,+u,+l,a).then($=>{$?e(null,new Uint8Array($.data),$.cacheControl,$.expires):p.tileType==1?e(null,new Uint8Array,null,null):e(null,null,null,null)}).catch($=>{$.name!=="AbortError"&&e($,null,null,null)})}),{cancel:f}}},this.tiles=new Map}add(s){this.tiles.set(s.source.getKey(),s)}get(s){return this.tiles.get(s)}};function Ue(s,e){return(e>>>0)*4294967296+(s>>>0)}function Qo(s,e){const n=e.buf;let t,r;if(r=n[e.pos++],t=(r&112)>>4,r<128||(r=n[e.pos++],t|=(r&127)<<3,r<128)||(r=n[e.pos++],t|=(r&127)<<10,r<128)||(r=n[e.pos++],t|=(r&127)<<17,r<128)||(r=n[e.pos++],t|=(r&127)<<24,r<128)||(r=n[e.pos++],t|=(r&1)<<31,r<128))return Ue(s,t);throw new Error("Expected varint not more than 10 bytes")}function Re(s){const e=s.buf;let n,t;return t=e[s.pos++],n=t&127,t<128||(t=e[s.pos++],n|=(t&127)<<7,t<128)||(t=e[s.pos++],n|=(t&127)<<14,t<128)||(t=e[s.pos++],n|=(t&127)<<21,t<128)?n:(t=e[s.pos],n|=(t&15)<<28,Qo(n,s))}function el(s,e,n,t){if(t==0){n==1&&(e[0]=s-1-e[0],e[1]=s-1-e[1]);const r=e[0];e[0]=e[1],e[1]=r}}var tl=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function nl(s,e,n){if(s>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(e>Math.pow(2,s)-1||n>Math.pow(2,s)-1)throw Error("tile x/y outside zoom level bounds");const t=tl[s],r=Math.pow(2,s);let o=0,i=0,u=0;const l=[e,n];let c=r/2;for(;c>0;)o=(l[0]&c)>0?1:0,i=(l[1]&c)>0?1:0,u+=c*c*(3*o^i),el(c,l,o,i),c=c/2;return t+u}function en(s,e){return Y(this,null,function*(){if(e===1||e===0)return s;if(e===2){if(typeof globalThis.DecompressionStream>"u")return rt(new Uint8Array(s));{let t=new Response(s).body.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(t).arrayBuffer()}}else throw Error("Compression method not supported")})}var rl=127;function sl(s,e){let n=0,t=s.length-1;for(;n<=t;){const r=t+n>>1,o=e-s[r].tileId;if(o>0)n=r+1;else if(o<0)t=r-1;else return s[r]}return t>=0&&(s[t].runLength===0||e-s[t].tileId<s[t].runLength)?s[t]:null}var ol=class{constructor(s){this.url=s}getKey(){return this.url}getBytes(s,e,n){return Y(this,null,function*(){let t;n||(t=new AbortController,n=t.signal);let r=yield fetch(this.url,{signal:n,headers:{Range:"bytes="+s+"-"+(s+e-1)}});if(r.status===416&&s===0){const u=r.headers.get("Content-Range");if(!u||!u.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const l=+u.substr(8);r=yield fetch(this.url,{signal:n,headers:{Range:"bytes=0-"+(l-1)}})}if(r.status>=300)throw Error("Bad response code: "+r.status);const o=r.headers.get("Content-Length");if(r.status===200&&(!o||+o>e))throw t&&t.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield r.arrayBuffer(),etag:r.headers.get("ETag")||void 0,cacheControl:r.headers.get("Cache-Control")||void 0,expires:r.headers.get("Expires")||void 0}})}};function le(s,e){const n=s.getUint32(e+4,!0),t=s.getUint32(e+0,!0);return n*Math.pow(2,32)+t}function ll(s,e){const n=new DataView(s),t=n.getUint8(7);if(t>3)throw Error(`Archive is spec version ${t} but this library supports up to spec version 3`);return{specVersion:t,rootDirectoryOffset:le(n,8),rootDirectoryLength:le(n,16),jsonMetadataOffset:le(n,24),jsonMetadataLength:le(n,32),leafDirectoryOffset:le(n,40),leafDirectoryLength:le(n,48),tileDataOffset:le(n,56),tileDataLength:le(n,64),numAddressedTiles:le(n,72),numTileEntries:le(n,80),numTileContents:le(n,88),clustered:n.getUint8(96)===1,internalCompression:n.getUint8(97),tileCompression:n.getUint8(98),tileType:n.getUint8(99),minZoom:n.getUint8(100),maxZoom:n.getUint8(101),minLon:n.getInt32(102,!0)/1e7,minLat:n.getInt32(106,!0)/1e7,maxLon:n.getInt32(110,!0)/1e7,maxLat:n.getInt32(114,!0)/1e7,centerZoom:n.getUint8(118),centerLon:n.getInt32(119,!0)/1e7,centerLat:n.getInt32(123,!0)/1e7,etag:e}}function tn(s){const e={buf:new Uint8Array(s),pos:0},n=Re(e),t=[];let r=0;for(let o=0;o<n;o++){const i=Re(e);t.push({tileId:r+i,offset:0,length:0,runLength:1}),r+=i}for(let o=0;o<n;o++)t[o].runLength=Re(e);for(let o=0;o<n;o++)t[o].length=Re(e);for(let o=0;o<n;o++){const i=Re(e);i===0&&o>0?t[o].offset=t[o-1].offset+t[o-1].length:t[o].offset=i-1}return t}function il(s){const e=new DataView(s);return e.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):e.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var Pe=class extends Error{};function al(s,e,n,t){return Y(this,null,function*(){const r=yield s.getBytes(0,16384);if(new DataView(r.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(il(r.data)<3)return[yield Qt.getHeader(s)];const i=r.data.slice(0,rl);let u=r.etag;t&&r.etag!=t&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+s.getKey()),u=void 0);const l=ll(i,u);if(n){const c=r.data.slice(l.rootDirectoryOffset,l.rootDirectoryOffset+l.rootDirectoryLength),a=s.getKey()+"|"+(l.etag||"")+"|"+l.rootDirectoryOffset+"|"+l.rootDirectoryLength,f=tn(yield e(c,l.internalCompression));return[l,[a,f.length,f]]}return[l,void 0]})}function cl(s,e,n,t,r){return Y(this,null,function*(){const o=yield s.getBytes(n,t);if(r.etag&&r.etag!==o.etag)throw new Pe(o.etag);const i=yield e(o.data,r.internalCompression),u=tn(i);if(u.length===0)throw new Error("Empty directory is invalid");return u})}var fl=class{constructor(s=100,e=!0,n=en){this.cache=new Map,this.maxCacheEntries=s,this.counter=1,this.prefetch=e,this.decompress=n}getHeader(s,e){return Y(this,null,function*(){const n=s.getKey();if(this.cache.has(n))return this.cache.get(n).lastUsed=this.counter++,yield this.cache.get(n).data;const t=new Promise((r,o)=>{al(s,this.decompress,this.prefetch,e).then(i=>{i[1]&&this.cache.set(i[1][0],{lastUsed:this.counter++,data:Promise.resolve(i[1][2])}),r(i[0]),this.prune()}).catch(i=>{o(i)})});return this.cache.set(n,{lastUsed:this.counter++,data:t}),t})}getDirectory(s,e,n,t){return Y(this,null,function*(){const r=s.getKey()+"|"+(t.etag||"")+"|"+e+"|"+n;if(this.cache.has(r))return this.cache.get(r).lastUsed=this.counter++,yield this.cache.get(r).data;const o=new Promise((i,u)=>{cl(s,this.decompress,e,n,t).then(l=>{i(l),this.prune()}).catch(l=>{u(l)})});return this.cache.set(r,{lastUsed:this.counter++,data:o}),o})}getArrayBuffer(s,e,n,t){return Y(this,null,function*(){const r=s.getKey()+"|"+(t.etag||"")+"|"+e+"|"+n;if(this.cache.has(r))return this.cache.get(r).lastUsed=this.counter++,yield this.cache.get(r).data;const o=new Promise((i,u)=>{s.getBytes(e,n).then(l=>{if(t.etag&&t.etag!==l.etag)throw new Pe(l.etag);i(l.data),this.cache.has(r),this.prune()}).catch(l=>{u(l)})});return this.cache.set(r,{lastUsed:this.counter++,data:o}),o})}prune(){if(this.cache.size>=this.maxCacheEntries){let s=1/0,e;this.cache.forEach((n,t)=>{n.lastUsed<s&&(s=n.lastUsed,e=t)}),e&&this.cache.delete(e)}}invalidate(s,e){return Y(this,null,function*(){this.cache.delete(s.getKey()),yield this.getHeader(s,e)})}},Tt=class{constructor(s,e,n){typeof s=="string"?this.source=new ol(s):this.source=s,n?this.decompress=n:this.decompress=en,e?this.cache=e:this.cache=new fl}getHeader(){return Y(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(s,e,n,t){return Y(this,null,function*(){const r=nl(s,e,n),o=yield this.cache.getHeader(this.source);if(o.specVersion<3)return Qt.getZxy(o,this.source,this.cache,s,e,n,t);if(s<o.minZoom||s>o.maxZoom)return;let i=o.rootDirectoryOffset,u=o.rootDirectoryLength;for(let l=0;l<=3;l++){const c=yield this.cache.getDirectory(this.source,i,u,o),a=sl(c,r);if(a)if(a.runLength>0){const f=yield this.source.getBytes(o.tileDataOffset+a.offset,a.length,t);if(o.etag&&o.etag!==f.etag)throw new Pe(f.etag);return{data:yield this.decompress(f.data,o.tileCompression),cacheControl:f.cacheControl,expires:f.expires}}else i=o.leafDirectoryOffset+a.offset,u=a.length;else return}throw Error("Maximum directory depth exceeded")})}getZxy(s,e,n,t){return Y(this,null,function*(){try{return yield this.getZxyAttempt(s,e,n,t)}catch(r){if(r instanceof Pe)return this.cache.invalidate(this.source,r.message),yield this.getZxyAttempt(s,e,n,t);throw r}})}getMetadataAttempt(){return Y(this,null,function*(){const s=yield this.cache.getHeader(this.source),e=yield this.source.getBytes(s.jsonMetadataOffset,s.jsonMetadataLength);if(s.etag&&s.etag!==e.etag)throw new Pe(e.etag);const n=yield this.decompress(e.data,s.internalCompression),t=new TextDecoder("utf-8");return JSON.parse(t.decode(n))})}getMetadata(){return Y(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(s){if(s instanceof Pe)return this.cache.invalidate(this.source,s.message),yield this.getMetadataAttempt();throw s}})}};function ul(s){return ot(()=>{let e=new Xo;gt.addProtocol("pmtiles",e.tile)}),jt(()=>{gt.removeProtocol("pmtiles")}),[]}class $l extends R{constructor(e){super(),G(this,e,ul,null,H,{})}}function Dt(s,e,n){const t=s.slice();return t[17]=e[n],t}function pl(s){let e;return{c(){e=v("Home")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Ot(s){let e,n;return e=new mn({props:{errorMessage:s[2]}}),{c(){w(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,r){const o={};r&4&&(o.errorMessage=t[2]),e.$set(o)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}function At(s){let e,n,t,r;function o(l){s[12](l)}function i(l){s[13](l)}let u={schemes:s[3]};return s[4]!==void 0&&(u.schemesToBeShown=s[4]),s[5]!==void 0&&(u.filterText=s[5]),e=new Mr({props:u}),Z.push(()=>q(e,"schemesToBeShown",o)),Z.push(()=>q(e,"filterText",i)),{c(){w(e.$$.fragment)},m(l,c){k(e,l,c),r=!0},p(l,c){const a={};c&8&&(a.schemes=l[3]),!n&&c&16&&(n=!0,a.schemesToBeShown=l[4],K(()=>n=!1)),!t&&c&32&&(t=!0,a.filterText=l[5],K(()=>t=!1)),e.$set(a)},i(l){r||(h(e.$$.fragment,l),r=!0)},o(l){_(e.$$.fragment,l),r=!1},d(l){b(e,l)}}}function Mt(s){let e,n,t=Ee(s[3].values()),r=[];for(let i=0;i<t.length;i+=1)r[i]=Ut(Dt(s,t,i));const o=i=>_(r[i],1,1,()=>{r[i]=null});return{c(){e=N("ul");for(let i=0;i<r.length;i+=1)r[i].c()},m(i,u){m(i,e,u);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(e,null);n=!0},p(i,u){if(u&25){t=Ee(i[3].values());let l;for(l=0;l<t.length;l+=1){const c=Dt(i,t,l);r[l]?(r[l].p(c,u),h(r[l],1)):(r[l]=Ut(c),r[l].c(),h(r[l],1),r[l].m(e,null))}for(de(),l=t.length;l<r.length;l+=1)o(l);we()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)h(r[u]);n=!0}},o(i){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)_(r[u]);n=!1},d(i){i&&g(e),et(r,i)}}}function Nt(s){let e,n;return e=new ro({props:{scheme:s[17],authorityNames:s[0]}}),{c(){w(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,r){const o={};r&8&&(o.scheme=t[17]),r&1&&(o.authorityNames=t[0]),e.$set(o)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}function Ut(s){let e=s[4].has(s[17].scheme_reference),n,t,r=e&&Nt(s);return{c(){r&&r.c(),n=gn()},m(o,i){r&&r.m(o,i),m(o,n,i),t=!0},p(o,i){i&24&&(e=o[4].has(o[17].scheme_reference)),e?r?(r.p(o,i),i&24&&h(r,1)):(r=Nt(o),r.c(),h(r,1),r.m(n.parentNode,n)):r&&(de(),_(r,1,1,()=>{r=null}),we())},i(o){t||(h(r),t=!0)},o(o){_(r),t=!1},d(o){o&&g(n),r&&r.d(o)}}}function ml(s){let e,n,t,r,o,i,u,l,c,a,f,p,$;n=new Ve({props:{$$slots:{default:[pl]},$$scope:{ctx:s}}}),n.$on("click",s[11]),u=new wn({props:{boundaryGeojson:s[6]}});let d=s[2]&&Ot(s);a=new cn({props:{label:"Load from GeoJSON",id:"load-geojson",loadFile:s[8]}});let y=s[3].size>0&&At(s),S=s[0]&&Mt(s);return{c(){e=N("div"),w(n.$$.fragment),t=A(),r=N("div"),o=N("h1"),o.textContent="Browse schemes",i=A(),w(u.$$.fragment),l=A(),d&&d.c(),c=A(),w(a.$$.fragment),f=A(),y&&y.c(),p=A(),S&&S.c(),_e(r,"display","flex"),_e(r,"justify-content","space-between"),j(e,"slot","sidebar"),j(e,"class","govuk-prose")},m(L,M){m(L,e,M),k(n,e,null),C(e,t),C(e,r),C(r,o),C(r,i),k(u,r,null),C(e,l),d&&d.m(e,null),C(e,c),k(a,e,null),C(e,f),y&&y.m(e,null),C(e,p),S&&S.m(e,null),$=!0},p(L,M){const U={};M&1048576&&(U.$$scope={dirty:M,ctx:L}),n.$set(U);const T={};M&64&&(T.boundaryGeojson=L[6]),u.$set(T),L[2]?d?(d.p(L,M),M&4&&h(d,1)):(d=Ot(L),d.c(),h(d,1),d.m(e,c)):d&&(de(),_(d,1,1,()=>{d=null}),we()),L[3].size>0?y?(y.p(L,M),M&8&&h(y,1)):(y=At(L),y.c(),h(y,1),y.m(e,p)):y&&(de(),_(y,1,1,()=>{y=null}),we()),L[0]?S?(S.p(L,M),M&1&&h(S,1)):(S=Mt(L),S.c(),h(S,1),S.m(e,null)):S&&(de(),_(S,1,1,()=>{S=null}),we())},i(L){$||(h(n.$$.fragment,L),h(u.$$.fragment,L),h(d),h(a.$$.fragment,L),h(y),h(S),$=!0)},o(L){_(n.$$.fragment,L),_(u.$$.fragment,L),_(d),_(a.$$.fragment,L),_(y),_(S),$=!1},d(L){L&&g(e),b(n),b(u),d&&d.d(),b(a),y&&y.d(),S&&S.d()}}}function gl(s){let e,n,t,r,o,i,u,l;return e=new ao({}),t=new jr({}),o=new mo({}),u=new Ys({}),{c(){w(e.$$.fragment),n=A(),w(t.$$.fragment),r=A(),w(o.$$.fragment),i=A(),w(u.$$.fragment)},m(c,a){k(e,c,a),m(c,n,a),k(t,c,a),m(c,r,a),k(o,c,a),m(c,i,a),k(u,c,a),l=!0},i(c){l||(h(e.$$.fragment,c),h(t.$$.fragment,c),h(o.$$.fragment,c),h(u.$$.fragment,c),l=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),l=!1},d(c){c&&(g(n),g(r),g(i)),b(e,c),b(t,c),b(o,c),b(u,c)}}}function hl(s){let e,n;return e=new lt({props:{small:!0,$$slots:{default:[gl]},$$scope:{ctx:s}}}),{c(){w(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,r){const o={};r&1048576&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}function _l(s){let e,n,t,r,o,i;return e=new Os({}),t=new Nn({}),o=new br({}),{c(){w(e.$$.fragment),n=A(),w(t.$$.fragment),r=A(),w(o.$$.fragment)},m(u,l){k(e,u,l),m(u,n,l),k(t,u,l),m(u,r,l),k(o,u,l),i=!0},i(u){i||(h(e.$$.fragment,u),h(t.$$.fragment,u),h(o.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),_(t.$$.fragment,u),_(o.$$.fragment,u),i=!1},d(u){u&&(g(n),g(r)),b(e,u),b(t,u),b(o,u)}}}function dl(s){let e,n;return e=new lt({props:{small:!0,$$slots:{default:[_l]},$$scope:{ctx:s}}}),{c(){w(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,r){const o={};r&1048576&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}function wl(s){let e,n,t,r,o,i,u,l,c,a;return e=new zs({}),t=new Co({}),o=new $r({}),u=new is({}),c=new ks({}),{c(){w(e.$$.fragment),n=A(),w(t.$$.fragment),r=A(),w(o.$$.fragment),i=A(),w(u.$$.fragment),l=A(),w(c.$$.fragment)},m(f,p){k(e,f,p),m(f,n,p),k(t,f,p),m(f,r,p),k(o,f,p),m(f,i,p),k(u,f,p),m(f,l,p),k(c,f,p),a=!0},i(f){a||(h(e.$$.fragment,f),h(t.$$.fragment,f),h(o.$$.fragment,f),h(u.$$.fragment,f),h(c.$$.fragment,f),a=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(o.$$.fragment,f),_(u.$$.fragment,f),_(c.$$.fragment,f),a=!1},d(f){f&&(g(n),g(r),g(i),g(l)),b(e,f),b(t,f),b(o,f),b(u,f),b(c,f)}}}function kl(s){let e,n;return e=new lt({props:{small:!0,$$slots:{default:[wl]},$$scope:{ctx:s}}}),{c(){w(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,r){const o={};r&1048576&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}function bl(s){let e,n,t,r;return e=new nr({}),t=new Yr({}),{c(){w(e.$$.fragment),n=A(),w(t.$$.fragment)},m(o,i){k(e,o,i),m(o,n,i),k(t,o,i),r=!0},i(o){r||(h(e.$$.fragment,o),h(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&g(n),b(e,o),b(t,o)}}}function vl(s){let e,n,t;function r(i){s[10](i)}let o={displayEnableButton:!0};return s[1]!==void 0&&(o.handleMapClickEvent=s[1]),e=new yn({props:o}),Z.push(()=>q(e,"handleMapClickEvent",r)),{c(){w(e.$$.fragment)},m(i,u){k(e,i,u),t=!0},p(i,u){const l={};!n&&u&2&&(n=!0,l.handleMapClickEvent=i[1],K(()=>n=!1)),e.$set(l)},i(i){t||(h(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){b(e,i)}}}function yl(s){let e,n,t,r,o,i,u,l,c,a,f,p;return e=new Ce({props:{label:"Trip generators",$$slots:{default:[hl]},$$scope:{ctx:s}}}),t=new Ce({props:{label:"Existing infrastructure",$$slots:{default:[dl]},$$scope:{ctx:s}}}),o=new Ce({props:{label:"Boundaries",$$slots:{default:[kl]},$$scope:{ctx:s}}}),u=new Ce({props:{label:"Census",$$slots:{default:[bl]},$$scope:{ctx:s}}}),c=new Ce({props:{label:"Street View",$$slots:{default:[vl]},$$scope:{ctx:s}}}),f=new vn({props:{style:s[7]}}),{c(){w(e.$$.fragment),n=A(),w(t.$$.fragment),r=A(),w(o.$$.fragment),i=A(),w(u.$$.fragment),l=A(),w(c.$$.fragment),a=A(),w(f.$$.fragment)},m($,d){k(e,$,d),m($,n,d),k(t,$,d),m($,r,d),k(o,$,d),m($,i,d),k(u,$,d),m($,l,d),k(c,$,d),m($,a,d),k(f,$,d),p=!0},p($,d){const y={};d&1048576&&(y.$$scope={dirty:d,ctx:$}),e.$set(y);const S={};d&1048576&&(S.$$scope={dirty:d,ctx:$}),t.$set(S);const L={};d&1048576&&(L.$$scope={dirty:d,ctx:$}),o.$set(L);const M={};d&1048576&&(M.$$scope={dirty:d,ctx:$}),u.$set(M);const U={};d&1048578&&(U.$$scope={dirty:d,ctx:$}),c.$set(U)},i($){p||(h(e.$$.fragment,$),h(t.$$.fragment,$),h(o.$$.fragment,$),h(u.$$.fragment,$),h(c.$$.fragment,$),h(f.$$.fragment,$),p=!0)},o($){_(e.$$.fragment,$),_(t.$$.fragment,$),_(o.$$.fragment,$),_(u.$$.fragment,$),_(c.$$.fragment,$),_(f.$$.fragment,$),p=!1},d($){$&&(g(n),g(r),g(i),g(l),g(a)),b(e,$),b(t,$),b(o,$),b(u,$),b(c,$),b(f,$)}}}function Ll(s){let e,n,t,r,o,i,u,l,c,a,f;return e=new bn({props:{colorInterventions:Rt("v1")}}),t=new X({props:{layer:"interventions-points",tooltip:s[9],clickable:!1}}),o=new X({props:{layer:"interventions-lines",tooltip:s[9],clickable:!1}}),u=new X({props:{layer:"interventions-polygons",tooltip:s[9],clickable:!1}}),a=new Ce({props:{label:"Layers",open:!0,$$slots:{default:[yl]},$$scope:{ctx:s}}}),{c(){w(e.$$.fragment),n=A(),w(t.$$.fragment),r=A(),w(o.$$.fragment),i=A(),w(u.$$.fragment),l=A(),c=N("div"),w(a.$$.fragment),j(c,"class","top-right svelte-12h3i77")},m(p,$){k(e,p,$),m(p,n,$),k(t,p,$),m(p,r,$),k(o,p,$),m(p,i,$),k(u,p,$),m(p,l,$),m(p,c,$),k(a,c,null),f=!0},p(p,$){const d={};$&1048578&&(d.$$scope={dirty:$,ctx:p}),a.$set(d)},i(p){f||(h(e.$$.fragment,p),h(t.$$.fragment,p),h(o.$$.fragment,p),h(u.$$.fragment,p),h(a.$$.fragment,p),f=!0)},o(p){_(e.$$.fragment,p),_(t.$$.fragment,p),_(o.$$.fragment,p),_(u.$$.fragment,p),_(a.$$.fragment,p),f=!1},d(p){p&&(g(n),g(r),g(i),g(l),g(c)),b(e,p),b(t,p),b(o,p),b(u,p),b(a)}}}function Cl(s){let e,n,t,r,o;return n=new $l({}),r=new kn({props:{style:s[7],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Ll]},$$scope:{ctx:s}}}),{c(){e=N("div"),w(n.$$.fragment),t=A(),w(r.$$.fragment),j(e,"slot","main")},m(i,u){m(i,e,u),k(n,e,null),C(e,t),k(r,e,null),o=!0},p(i,u){const l={};u&1048578&&(l.$$scope={dirty:u,ctx:i}),r.$set(l)},i(i){o||(h(n.$$.fragment,i),h(r.$$.fragment,i),o=!0)},o(i){_(n.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&g(e),b(n),b(r)}}}function Sl(s){let e,n;return e=new dn({props:{$$slots:{main:[Cl],sidebar:[ml]},$$scope:{ctx:s}}}),{c(){w(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,[r]){const o={};r&1048703&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}function Tl(s,e,n){let t,r;W(s,J,T=>n(14,t=T)),W(s,xe,T=>n(6,r=T));let o=null,i;ot(async()=>{fn();let T=await un();n(0,o=new Set(T.features.map(D=>D.properties.name))),t?t.on("click",i):(console.log(`subscribing to updates of map ${t}`),J.subscribe(D=>{console.log(D),D&&D.on("click",i)}))});let l=new URLSearchParams(window.location.search).get("style")||"dataviz",c="",a=new Map,f=new Set,p="";jt(()=>{xe.set($n())});function $(T){try{let D=JSON.parse(T);n(3,a=vr(D)),xe.set(D),n(2,c=""),t==null||t.fitBounds(Ft(D),{padding:20,animate:!1})}catch(D){n(2,c=`Couldn't load schemes from a file: ${D}`)}}function d(T){let D=T.properties;var P='<div style="max-width: 30vw;">';return P+=`<h2>${y(D.name)} (${D.intervention_type})</h2>`,P+=`<p>Scheme reference: ${D.scheme_reference}</p>`,D.length_meters&&(P+=`<p>Length: ${pn(D.length_meters)}</p>`),D.description&&(P+=`<p>${y(D.description)}</p>`),P+="</div>",P}function y(T){return p?T.replace(new RegExp(p,"gi"),D=>`<mark>${D}</mark>`):T}function S(T){i=T,n(1,i)}const L=()=>window.open("index.html");function M(T){f=T,n(4,f)}function U(T){p=T,n(5,p)}return[o,i,c,a,f,p,r,l,$,d,S,L,M,U]}class Dl extends R{constructor(e){super(),G(this,e,Tl,Sl,H,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new Dl({target:document.getElementById("app")});
