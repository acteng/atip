import{S as L,i as $,s as B,G as O,e as p,h as _,j as S,k as h,K as E,L as M,M as z,t as k,l as w,p as C,f as P,X as N,w as I,aL as fe,P as de,aZ as ve,F as ke,g as R,m as G,q as H,V as Z,ad as we,aM as ye,a_ as V,W as _e,a$ as Se,v as W,u as T,U,b as K,c as me,o as ge,x as A,Q as Ce,aH as pe,b0 as X,y as he,n as be,b1 as Le,r as $e,A as q,B as Q,ag as Be,a as Oe,_ as J,C as Ee,a2 as Me,a0 as ze,a8 as Y,a7 as x,a1 as Pe,ac as je,ab as De,aa as ee,az as te}from"./MapLibreMap.svelte_svelte_type_style_lang-a449eebc.js";function Ie(l){let e,n,t;const s=l[3].default,o=O(s,l,l[2],null);return{c(){e=p("fieldset"),n=p("div"),o&&o.c(),_(n,"class",l[0]),_(n,"data-module","govuk-checkboxes"),_(e,"class","govuk-fieldset")},m(a,i){S(a,e,i),h(e,n),o&&o.m(n,null),t=!0},p(a,[i]){o&&o.p&&(!t||i&4)&&E(o,s,a,a[2],t?z(s,a[2],i,null):M(a[2]),null)},i(a){t||(k(o,a),t=!0)},o(a){w(o,a),t=!1},d(a){a&&C(e),o&&o.d(a)}}}function Re(l,e,n){let{$$slots:t={},$$scope:s}=e,{small:o=!1}=e,a=o?"govuk-checkboxes--small":"govuk-checkboxes";return l.$$set=i=>{"small"in i&&n(1,o=i.small),"$$scope"in i&&n(2,s=i.$$scope)},[a,o,s,t]}class bt extends L{constructor(e){super(),$(this,e,Re,Ie,B,{small:1})}}const Ge=l=>({}),ne=l=>({});function He(l){let e,n,t,s,o,a,i,r,u;const c=l[5].default,f=O(c,l,l[4],null),m=l[5].right,d=O(m,l,l[4],ne);return{c(){e=p("div"),n=p("input"),t=P(),s=p("label"),f&&f.c(),o=P(),a=p("span"),d&&d.c(),_(n,"type","checkbox"),_(n,"class","govuk-checkboxes__input"),_(n,"id",l[1]),_(s,"class","govuk-label govuk-checkboxes__label"),_(s,"for",l[1]),_(s,"title",l[2]),N(a,"float","right"),_(e,"class","govuk-checkboxes__item"),_(e,"style",l[3])},m(g,b){S(g,e,b),h(e,n),n.checked=l[0],h(e,t),h(e,s),f&&f.m(s,null),h(e,o),h(e,a),d&&d.m(a,null),i=!0,r||(u=[I(n,"change",l[7]),I(n,"change",l[6])],r=!0)},p(g,[b]){(!i||b&2)&&_(n,"id",g[1]),b&1&&(n.checked=g[0]),f&&f.p&&(!i||b&16)&&E(f,c,g,g[4],i?z(c,g[4],b,null):M(g[4]),null),(!i||b&2)&&_(s,"for",g[1]),(!i||b&4)&&_(s,"title",g[2]),d&&d.p&&(!i||b&16)&&E(d,m,g,g[4],i?z(m,g[4],b,Ge):M(g[4]),ne)},i(g){i||(k(f,g),k(d,g),i=!0)},o(g){w(f,g),w(d,g),i=!1},d(g){g&&C(e),f&&f.d(g),d&&d.d(g),r=!1,fe(u)}}}function Ze(l,e,n){let{$$slots:t={},$$scope:s}=e;const o=ve(t);let{id:a}=e,{checked:i}=e,{hint:r=null}=e,c=o.right!==void 0?"float: none":"";function f(d){de.call(this,l,d)}function m(){i=this.checked,n(0,i)}return l.$$set=d=>{"id"in d&&n(1,a=d.id),"checked"in d&&n(0,i=d.checked),"hint"in d&&n(2,r=d.hint),"$$scope"in d&&n(4,s=d.$$scope)},[i,a,r,c,s,t,f,m]}class vt extends L{constructor(e){super(),$(this,e,Ze,He,B,{id:1,checked:0,hint:2})}}function le(l,e,n){const t=l.slice();return t[8]=e[n][0],t[9]=e[n][1],t}function se(l){let e;return{c(){e=p("option"),e.__value="",W(e,e.__value)},m(n,t){S(n,e,t)},d(n){n&&C(e)}}}function oe(l){let e,n=l[9]+"",t,s;return{c(){e=p("option"),t=T(n),e.__value=s=l[8],W(e,e.__value)},m(o,a){S(o,e,a),h(e,t)},p(o,a){a&8&&n!==(n=o[9]+"")&&U(t,n),a&8&&s!==(s=o[8])&&(e.__value=s,W(e,e.__value))},d(o){o&&C(e)}}}function qe(l){let e,n,t,s,o=l[4]&&se(),a=Z(l[3]),i=[];for(let r=0;r<a.length;r+=1)i[r]=oe(le(l,a,r));return{c(){e=p("select"),o&&o.c(),n=we();for(let r=0;r<i.length;r+=1)i[r].c();_(e,"class","govuk-select"),_(e,"id",l[2]),e.disabled=l[5],l[0]===void 0&&ye(()=>l[7].call(e))},m(r,u){S(r,e,u),o&&o.m(e,null),h(e,n);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(e,null);V(e,l[0],!0),t||(s=[I(e,"change",l[7]),I(e,"change",l[6])],t=!0)},p(r,u){if(r[4]?o||(o=se(),o.c(),o.m(e,n)):o&&(o.d(1),o=null),u&8){a=Z(r[3]);let c;for(c=0;c<a.length;c+=1){const f=le(r,a,c);i[c]?i[c].p(f,u):(i[c]=oe(f),i[c].c(),i[c].m(e,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=a.length}u&4&&_(e,"id",r[2]),u&32&&(e.disabled=r[5]),u&9&&V(e,r[0])},d(r){r&&C(e),o&&o.d(),_e(i,r),t=!1,fe(s)}}}function Fe(l){let e,n;return e=new ke({props:{label:l[1],id:l[2],$$slots:{default:[qe]},$$scope:{ctx:l}}}),{c(){R(e.$$.fragment)},m(t,s){G(e,t,s),n=!0},p(t,[s]){const o={};s&2&&(o.label=t[1]),s&4&&(o.id=t[2]),s&4157&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Ne(l,e,n){let{label:t}=e,{id:s}=e,{choices:o}=e,{emptyOption:a=!1}=e,{disabled:i=!1}=e,{value:r}=e;function u(f){de.call(this,l,f)}function c(){r=Se(this),n(0,r),n(3,o)}return l.$$set=f=>{"label"in f&&n(1,t=f.label),"id"in f&&n(2,s=f.id),"choices"in f&&n(3,o=f.choices),"emptyOption"in f&&n(4,a=f.emptyOption),"disabled"in f&&n(5,i=f.disabled),"value"in f&&n(0,r=f.value)},[r,t,s,o,a,i,u,c]}class We extends L{constructor(e){super(),$(this,e,Ne,Fe,B,{label:1,id:2,choices:3,emptyOption:4,disabled:5,value:0})}}function Ae(l){let e,n,t;function s(a){l[2](a)}let o={label:"Basemap",id:"basemap",choices:[["streets","Streets"],["hybrid","Satellite"],["dataviz","Dataviz"]]};return l[0]!==void 0&&(o.value=l[0]),e=new We({props:o}),K.push(()=>me(e,"value",s)),e.$on("change",l[1]),{c(){R(e.$$.fragment)},m(a,i){G(e,a,i),t=!0},p(a,[i]){const r={};!n&&i&1&&(n=!0,r.value=a[0],ge(()=>n=!1)),e.$set(r)},i(a){t||(k(e.$$.fragment,a),t=!0)},o(a){w(e.$$.fragment,a),t=!1},d(a){H(e,a)}}}function Je(l,e,n){let{style:t}=e;function s(){let a=new URLSearchParams(window.location.search);a.set("style",t);let i=`${window.location.pathname}?${a.toString()}${window.location.hash}`;window.location.href=i}function o(a){t=a,n(0,t)}return l.$$set=a=>{"style"in a&&n(0,t=a.style)},[t,s,o]}class kt extends L{constructor(e){super(),$(this,e,Je,Ae,B,{style:0})}}function Te(l){let e,n,t,s,o,a,i;const r=l[3].default,u=O(r,l,l[2],null);return{c(){e=p("details"),n=p("summary"),t=p("span"),s=T(l[0]),o=P(),a=p("div"),u&&u.c(),_(t,"class","govuk-details__summary-text"),_(n,"class","govuk-details__summary"),_(a,"class","govuk-details__text"),e.open=l[1],_(e,"class","govuk-details"),_(e,"data-module","govuk-details")},m(c,f){S(c,e,f),h(e,n),h(n,t),h(t,s),h(e,o),h(e,a),u&&u.m(a,null),i=!0},p(c,[f]){(!i||f&1)&&U(s,c[0]),u&&u.p&&(!i||f&4)&&E(u,r,c,c[2],i?z(r,c[2],f,null):M(c[2]),null),(!i||f&2)&&(e.open=c[1])},i(c){i||(k(u,c),i=!0)},o(c){w(u,c),i=!1},d(c){c&&C(e),u&&u.d(c)}}}function Ue(l,e,n){let{$$slots:t={},$$scope:s}=e,{label:o}=e,{open:a=!1}=e;return l.$$set=i=>{"label"in i&&n(0,o=i.label),"open"in i&&n(1,a=i.open),"$$scope"in i&&n(2,s=i.$$scope)},[o,a,s,t]}class Ke extends L{constructor(e){super(),$(this,e,Ue,Te,B,{label:0,open:1})}}function Qe(l){let e;return{c(){e=p("span"),_(e,"class","svelte-kzgqtg"),N(e,"background",l[0])},m(n,t){S(n,e,t)},p(n,[t]){t&1&&N(e,"background",n[0])},i:A,o:A,d(n){n&&C(e)}}}function Ve(l,e,n){let{color:t}=e;return l.$$set=s=>{"color"in s&&n(0,t=s.color)},[t]}class Xe extends L{constructor(e){super(),$(this,e,Ve,Qe,B,{color:0})}}const Ye="/atip/stview_mvp/assets/help-d011708a.svg";function xe(l){let e,n;const t=l[1].default,s=O(t,l,l[4],null);return{c(){e=p("div"),s&&s.c(),_(e,"class","govuk-prose")},m(o,a){S(o,e,a),s&&s.m(e,null),n=!0},p(o,a){s&&s.p&&(!n||a&16)&&E(s,t,o,o[4],n?z(t,o[4],a,null):M(o[4]),null)},i(o){n||(k(s,o),n=!0)},o(o){w(s,o),n=!1},d(o){o&&C(e),s&&s.d(o)}}}function et(l){let e,n,t,s,o,a,i,r,u;function c(m){l[3](m)}let f={title:"Help",$$slots:{default:[xe]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.open=l[0]),o=new Ce({props:f}),K.push(()=>me(o,"open",c)),{c(){e=p("button"),n=p("img"),s=P(),R(o.$$.fragment),pe(n.src,t=Ye)||_(n,"src",t),_(n,"title","Help"),_(n,"alt","Help"),_(e,"class","svelte-7d9d1l")},m(m,d){S(m,e,d),h(e,n),S(m,s,d),G(o,m,d),i=!0,r||(u=I(e,"click",l[2]),r=!0)},p(m,[d]){const g={};d&16&&(g.$$scope={dirty:d,ctx:m}),!a&&d&1&&(a=!0,g.open=m[0],ge(()=>a=!1)),o.$set(g)},i(m){i||(k(o.$$.fragment,m),i=!0)},o(m){w(o.$$.fragment,m),i=!1},d(m){m&&(C(e),C(s)),H(o,m),r=!1,u()}}}function tt(l,e,n){let{$$slots:t={},$$scope:s}=e,o=!1;const a=()=>n(0,o=!0);function i(r){o=r,n(0,o)}return l.$$set=r=>{"$$scope"in r&&n(4,s=r.$$scope)},[o,t,a,i,s]}class wt extends L{constructor(e){super(),$(this,e,tt,et,B,{})}}const nt=l=>({}),ae=l=>({}),lt=l=>({}),ie=l=>({});function st(l){let e,n,t,s,o,a,i,r,u,c,f;const m=l[3].sidebar,d=O(m,l,l[2],ie),g=l[3].main,b=O(g,l,l[2],ae);return{c(){e=p("div"),n=p("aside"),t=p("div"),d&&d.c(),s=P(),o=p("button"),o.textContent="â†’",i=P(),r=p("main"),b&&b.c(),_(t,"class","sidebar-content content-container svelte-ect12w"),_(o,"type","button"),_(o,"class","sidebar-toggle rounded-rect svelte-ect12w"),_(n,"class",a=X(l[0]?"":"collapsed")+" svelte-ect12w"),_(r,"class","svelte-ect12w"),_(e,"class","overall-layout svelte-ect12w")},m(v,j){S(v,e,j),h(e,n),h(n,t),d&&d.m(t,null),h(n,s),h(n,o),h(e,i),h(e,r),b&&b.m(r,null),u=!0,c||(f=I(o,"click",l[1]),c=!0)},p(v,[j]){d&&d.p&&(!u||j&4)&&E(d,m,v,v[2],u?z(m,v[2],j,lt):M(v[2]),ie),(!u||j&1&&a!==(a=X(v[0]?"":"collapsed")+" svelte-ect12w"))&&_(n,"class",a),b&&b.p&&(!u||j&4)&&E(b,g,v,v[2],u?z(g,v[2],j,nt):M(v[2]),ae)},i(v){u||(k(d,v),k(b,v),u=!0)},o(v){w(d,v),w(b,v),u=!1},d(v){v&&C(e),d&&d.d(v),b&&b.d(v),c=!1,f()}}}function ot(l,e,n){let{$$slots:t={},$$scope:s}=e,o=!0;function a(){n(0,o=!o)}return l.$$set=i=>{"$$scope"in i&&n(2,s=i.$$scope)},[o,a,s,t]}class yt extends L{constructor(e){super(),$(this,e,ot,st,B,{})}}function re(l,e,n){const t=l.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function ce(l){let e,n,t,s=l[1]+"",o,a,i;return n=new Xe({props:{color:l[2]}}),{c(){e=p("li"),R(n.$$.fragment),t=P(),o=T(s),a=P()},m(r,u){S(r,e,u),G(n,e,null),h(e,t),h(e,o),h(e,a),i=!0},p(r,u){const c={};u&1&&(c.color=r[2]),n.$set(c),(!i||u&1)&&s!==(s=r[1]+"")&&U(o,s)},i(r){i||(k(n.$$.fragment,r),i=!0)},o(r){w(n.$$.fragment,r),i=!1},d(r){r&&C(e),H(n)}}}function at(l){let e,n,t=Z(l[0]),s=[];for(let a=0;a<t.length;a+=1)s[a]=ce(re(l,t,a));const o=a=>w(s[a],1,1,()=>{s[a]=null});return{c(){e=p("ul");for(let a=0;a<s.length;a+=1)s[a].c()},m(a,i){S(a,e,i);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);n=!0},p(a,i){if(i&1){t=Z(a[0]);let r;for(r=0;r<t.length;r+=1){const u=re(a,t,r);s[r]?(s[r].p(u,i),k(s[r],1)):(s[r]=ce(u),s[r].c(),k(s[r],1),s[r].m(e,null))}for(he(),r=t.length;r<s.length;r+=1)o(r);be()}},i(a){if(!n){for(let i=0;i<t.length;i+=1)k(s[i]);n=!0}},o(a){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)w(s[i]);n=!1},d(a){a&&C(e),_e(s,a)}}}function it(l){let e,n;return e=new Ke({props:{label:"Legend",$$slots:{default:[at]},$$scope:{ctx:l}}}),{c(){R(e.$$.fragment)},m(t,s){G(e,t,s),n=!0},p(t,[s]){const o={};s&33&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function rt(l,e,n){let{rows:t}=e;return l.$$set=s=>{"rows"in s&&n(0,t=s.rows)},[t]}class St extends L{constructor(e){super(),$(this,e,rt,it,B,{rows:0})}}function ue(l){let e;const n=l[5].default,t=O(n,l,l[4],null);return{c(){t&&t.c()},m(s,o){t&&t.m(s,o),e=!0},p(s,o){t&&t.p&&(!e||o&16)&&E(t,n,s,s[4],e?z(n,s[4],o,null):M(s[4]),null)},i(s){e||(k(t,s),e=!0)},o(s){w(t,s),e=!1},d(s){t&&t.d(s)}}}function ct(l){let e,n,t=l[1]&&ue(l);return{c(){e=p("div"),t&&t.c(),_(e,"class","map svelte-12dpf1u")},m(s,o){S(s,e,o),t&&t.m(e,null),l[6](e),n=!0},p(s,[o]){s[1]?t?(t.p(s,o),o&2&&k(t,1)):(t=ue(s),t.c(),k(t,1),t.m(e,null)):t&&(he(),w(t,1,1,()=>{t=null}),be())},i(s){n||(k(t),n=!0)},o(s){w(t),n=!1},d(s){s&&C(e),t&&t.d(),l[6](null)}}}function ut(l,e,n){let{$$slots:t={},$$scope:s}=e,{style:o}=e,{startBounds:a=null}=e,i,r,u=!1,c=!window.location.hash;Le("setCamera",c),$e(()=>{i=new q.Map({container:r,style:`https://api.maptiler.com/maps/${o}/style.json?key=MZEJTanw3WpxRvt7qDfo`,hash:!0}),i.addControl(new q.ScaleControl({})),i.addControl(new q.NavigationControl({visualizePitch:!0}),"bottom-right"),i.on("load",()=>{n(1,u=!0),c&&a&&i.fitBounds(a,{animate:!1}),Q.set(i)}),new ResizeObserver(()=>{i.resize()}).observe(r)}),Be(()=>{i.remove()});function f(m){K[m?"unshift":"push"](()=>{r=m,n(0,r)})}return l.$$set=m=>{"style"in m&&n(2,o=m.style),"startBounds"in m&&n(3,a=m.startBounds),"$$scope"in m&&n(4,s=m.$$scope)},[r,u,o,a,s,t,f]}class Ct extends L{constructor(e){super(),$(this,e,ut,ct,B,{style:2,startBounds:3})}}const ft="/atip/stview_mvp/assets/zoom_out_map-b2e1091a.svg";function dt(l){let e,n;return{c(){e=p("img"),pe(e.src,n=ft)||_(e,"src",n),_(e,"alt","Zoom to show entire boundary")},m(t,s){S(t,e,s)},p:A,d(t){t&&C(e)}}}function _t(l){let e,n;return e=new Oe({props:{title:"Zoom to show entire boundary",$$slots:{default:[dt]},$$scope:{ctx:l}}}),e.$on("click",l[0]),{c(){R(e.$$.fragment)},m(t,s){G(e,t,s),n=!0},p(t,[s]){const o={};s&8&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function mt(l,e,n){let t;J(l,Q,a=>n(2,t=a));let{boundaryGeojson:s}=e;function o(){t.fitBounds(Ee(s),{padding:20,animate:!0,duration:500})}return l.$$set=a=>{"boundaryGeojson"in a&&n(1,s=a.boundaryGeojson)},[o,s]}class Lt extends L{constructor(e){super(),$(this,e,mt,_t,B,{boundaryGeojson:1})}}const y={area:"#D94324",route:"#555F5E",crossing:"#4daf4a",other:"#984ea3",preapp:"#e41a1c",outline:"#377eb8","reserved matters":"#4daf4a","local plan":"#984ea3",hovering:"black",lineEndpointColor:"black"},gt=10,F=10;let D="interventions";function pt(l,e,n){let t,s;J(l,Q,r=>n(1,t=r)),J(l,Me,r=>n(2,s=r));let{colorInterventions:o}=e;ze(t,D,s);const a=["!=","hide_while_editing",!0];return Y(t,{id:"interventions-points",source:D,filter:["all",je,a,["!=","endpoint",!0]],color:o,radius:gt}),x(t,{id:"interventions-lines",source:D,filter:["all",De,a],color:o,width:F}),Y(t,{id:"interventions-lines-endpoints",source:D,filter:["==","endpoint",!0],radius:.5*F,opacity:0,strokeColor:y.lineEndpointColor,strokeWidth:2}),Pe(t,{id:"interventions-polygons",source:D,filter:["all",ee,a],color:o,opacity:.2}),x(t,{id:"interventions-polygon-outlines",source:D,filter:["all",ee,a],color:o,opacity:.5,width:.7*F}),l.$$set=r=>{"colorInterventions"in r&&n(0,o=r.colorInterventions)},l.$$.update=()=>{if(l.$$.dirty&6){let r=JSON.parse(JSON.stringify(s)),u=[];for(let c of r.features)if(c.geometry.type=="LineString"&&!c.properties.hide_while_editing)for(let f of[c.geometry.coordinates[0],c.geometry.coordinates[c.geometry.coordinates.length-1]])u.push({type:"Feature",properties:{endpoint:!0},geometry:{type:"Point",coordinates:f}});r.features=r.features.concat(u),t.getSource(D).setData(r)}},[o,t,s]}class $t extends L{constructor(e){super(),$(this,e,pt,null,B,{colorInterventions:0})}}function Bt(l){return{v1:"Scheme Design",v2:"Experimental Scheme Design",planning:"Development Planning",criticals:"Critical Issues",atf4:"ATF4 Scheme"}[l]}function Ot(l){return{v1:"an intervention",v2:"an intervention",planning:"a development",criticals:"a critical issue",atf4:"an intervention"}[l]}function Et(l){return{v1:"interventions",v2:"interventions",planning:"developments",criticals:"critical issues",atf4:"interventions"}[l]}function Mt(l){return l=="planning"?te(["get","reference_type",["get","planning"]],{preapp:y.preapp,outline:y.outline,"reserved matters":y["reserved matters"],"local plan":y["local plan"]},"black"):te(["get","intervention_type"],{area:y.area,route:y.route,crossing:y.crossing,other:y.other},"white")}function zt(l){return l=="planning"?[["Preapp",y.preapp],["Outline",y.outline],["Reserved matters",y["reserved matters"]],["Local plan",y["local plan"]]]:[["Areas",y.area],["Routes",y.route],["Crossings",y.crossing],["Other",y.other]]}export{kt as B,Ke as C,wt as H,$t as I,yt as L,Ct as M,We as S,Lt as Z,gt as a,bt as b,y as c,vt as d,Et as e,Bt as f,Mt as g,St as h,zt as i,Xe as j,F as l,Ot as s};
