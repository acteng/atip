import{S as Z,i as A,s as R,aH as D,e as p,h as y,j as v,k as S,aI as W,aJ as q,aK as I,t as b,n as h,p as L,d as E,an as pe,w as G,aA as Qe,aR as Xe,aV as ot,F as it,g as M,m as V,q as z,E as st,ax as Oe,a2 as fe,aB as rt,b6 as Ee,ay as at,b7 as ft,v as ve,u as F,I as Ye,b8 as ut,b as ie,c as se,l as re,N as U,aO as Me,b9 as ae,ba as xe,bb as T,bc as Se,O as ct,a5 as ue,aS as K,aG as Ve,bd as dt,y as j,o as N,H as mt,aQ as ze,r as _t,be as Ze,C as $e,ap as Ae,R as gt,aP as bt,bf as ht,a as et}from"./index-95bbfd7d.js";function yt(o){let e,l,t;const i=o[3].default,n=D(i,o,o[2],null);return{c(){e=p("fieldset"),l=p("div"),n&&n.c(),y(l,"class",o[0]),y(l,"data-module","govuk-checkboxes"),y(e,"class","govuk-fieldset")},m(s,a){v(s,e,a),S(e,l),n&&n.m(l,null),t=!0},p(s,[a]){n&&n.p&&(!t||a&4)&&W(n,i,s,s[2],t?I(i,s[2],a,null):q(s[2]),null)},i(s){t||(b(n,s),t=!0)},o(s){h(n,s),t=!1},d(s){s&&L(e),n&&n.d(s)}}}function kt(o,e,l){let{$$slots:t={},$$scope:i}=e,{small:n=!1}=e,s=n?"govuk-checkboxes--small":"govuk-checkboxes";return o.$$set=a=>{"small"in a&&l(1,n=a.small),"$$scope"in a&&l(2,i=a.$$scope)},[s,n,i,t]}class ml extends Z{constructor(e){super(),A(this,e,kt,yt,R,{small:1})}}const wt=o=>({}),Re=o=>({});function Ct(o){let e,l,t,i,n,s,a,r,f;const u=o[5].default,c=D(u,o,o[4],null),d=o[5].right,_=D(d,o,o[4],Re);return{c(){e=p("div"),l=p("input"),t=E(),i=p("label"),c&&c.c(),n=E(),s=p("span"),_&&_.c(),y(l,"type","checkbox"),y(l,"class","govuk-checkboxes__input"),y(l,"id",o[1]),y(i,"class","govuk-label govuk-checkboxes__label"),y(i,"for",o[1]),y(i,"title",o[2]),pe(s,"float","right"),y(e,"class","govuk-checkboxes__item"),y(e,"style",o[3])},m(g,k){v(g,e,k),S(e,l),l.checked=o[0],S(e,t),S(e,i),c&&c.m(i,null),S(e,n),S(e,s),_&&_.m(s,null),a=!0,r||(f=[G(l,"change",o[7]),G(l,"change",o[6])],r=!0)},p(g,[k]){(!a||k&2)&&y(l,"id",g[1]),k&1&&(l.checked=g[0]),c&&c.p&&(!a||k&16)&&W(c,u,g,g[4],a?I(u,g[4],k,null):q(g[4]),null),(!a||k&2)&&y(i,"for",g[1]),(!a||k&4)&&y(i,"title",g[2]),_&&_.p&&(!a||k&16)&&W(_,d,g,g[4],a?I(d,g[4],k,wt):q(g[4]),Re)},i(g){a||(b(c,g),b(_,g),a=!0)},o(g){h(c,g),h(_,g),a=!1},d(g){g&&L(e),c&&c.d(g),_&&_.d(g),r=!1,Qe(f)}}}function St(o,e,l){let{$$slots:t={},$$scope:i}=e;const n=ot(t);let{id:s}=e,{checked:a}=e,{hint:r=null}=e,u=n.right!==void 0?"float: none":"";function c(_){Xe.call(this,o,_)}function d(){a=this.checked,l(0,a)}return o.$$set=_=>{"id"in _&&l(1,s=_.id),"checked"in _&&l(0,a=_.checked),"hint"in _&&l(2,r=_.hint),"$$scope"in _&&l(4,i=_.$$scope)},[a,s,r,u,i,t,c,d]}class _l extends Z{constructor(e){super(),A(this,e,St,Ct,R,{id:1,checked:0,hint:2})}}function Pe(o,e,l){const t=o.slice();return t[9]=e[l][0],t[10]=e[l][1],t}function Te(o){let e;return{c(){e=p("option"),e.__value="",ve(e,e.__value)},m(l,t){v(l,e,t)},d(l){l&&L(e)}}}function Ue(o){let e,l=o[10]+"",t,i;return{c(){e=p("option"),t=F(l),e.__value=i=o[9],ve(e,e.__value)},m(n,s){v(n,e,s),S(e,t)},p(n,s){s&8&&l!==(l=n[10]+"")&&Ye(t,l),s&8&&i!==(i=n[9])&&(e.__value=i,ve(e,e.__value))},d(n){n&&L(e)}}}function pt(o){let e,l,t,i,n,s,a;e=new st({props:{errorMessage:o[6]}});let r=o[4]&&Te(),f=Oe(o[3]),u=[];for(let c=0;c<f.length;c+=1)u[c]=Ue(Pe(o,f,c));return{c(){M(e.$$.fragment),l=E(),t=p("select"),r&&r.c(),i=fe();for(let c=0;c<u.length;c+=1)u[c].c();y(t,"class","govuk-select"),y(t,"id",o[2]),t.disabled=o[5],o[0]===void 0&&rt(()=>o[8].call(t))},m(c,d){V(e,c,d),v(c,l,d),v(c,t,d),r&&r.m(t,null),S(t,i);for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(t,null);Ee(t,o[0],!0),n=!0,s||(a=[G(t,"change",o[8]),G(t,"change",o[7])],s=!0)},p(c,d){const _={};if(d&64&&(_.errorMessage=c[6]),e.$set(_),c[4]?r||(r=Te(),r.c(),r.m(t,i)):r&&(r.d(1),r=null),d&8){f=Oe(c[3]);let g;for(g=0;g<f.length;g+=1){const k=Pe(c,f,g);u[g]?u[g].p(k,d):(u[g]=Ue(k),u[g].c(),u[g].m(t,null))}for(;g<u.length;g+=1)u[g].d(1);u.length=f.length}(!n||d&4)&&y(t,"id",c[2]),(!n||d&32)&&(t.disabled=c[5]),d&9&&Ee(t,c[0])},i(c){n||(b(e.$$.fragment,c),n=!0)},o(c){h(e.$$.fragment,c),n=!1},d(c){c&&(L(l),L(t)),z(e,c),r&&r.d(),at(u,c),s=!1,Qe(a)}}}function vt(o){let e,l;return e=new it({props:{label:o[1],id:o[2],$$slots:{default:[pt]},$$scope:{ctx:o}}}),{c(){M(e.$$.fragment)},m(t,i){V(e,t,i),l=!0},p(t,[i]){const n={};i&2&&(n.label=t[1]),i&4&&(n.id=t[2]),i&8317&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),l=!1},d(t){z(e,t)}}}function Lt(o,e,l){let{label:t}=e,{id:i}=e,{choices:n}=e,{emptyOption:s=!1}=e,{disabled:a=!1}=e,{errorMessage:r=""}=e,{value:f}=e;function u(d){Xe.call(this,o,d)}function c(){f=ft(this),l(0,f),l(3,n)}return o.$$set=d=>{"label"in d&&l(1,t=d.label),"id"in d&&l(2,i=d.id),"choices"in d&&l(3,n=d.choices),"emptyOption"in d&&l(4,s=d.emptyOption),"disabled"in d&&l(5,a=d.disabled),"errorMessage"in d&&l(6,r=d.errorMessage),"value"in d&&l(0,f=d.value)},[f,t,i,n,s,a,r,u,c]}class Bt extends Z{constructor(e){super(),A(this,e,Lt,vt,R,{label:1,id:2,choices:3,emptyOption:4,disabled:5,errorMessage:6,value:0})}}function Ot(o){let e,l,t;function i(s){o[2](s)}let n={label:"Basemap",id:"basemap",choices:ut(),disabled:o[0]};return o[1]!==void 0&&(n.value=o[1]),e=new Bt({props:n}),ie.push(()=>se(e,"value",i)),{c(){M(e.$$.fragment)},m(s,a){V(e,s,a),t=!0},p(s,[a]){const r={};a&1&&(r.disabled=s[0]),!l&&a&2&&(l=!0,r.value=s[1],re(()=>l=!1)),e.$set(r)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){h(e.$$.fragment,s),t=!1},d(s){z(e,s)}}}function Et(o,e,l){let t;U(o,Me,s=>l(1,t=s));let{disabled:i=!1}=e;function n(s){t=s,Me.set(t)}return o.$$set=s=>{"disabled"in s&&l(0,i=s.disabled)},[i,t,n]}class gl extends Z{constructor(e){super(),A(this,e,Et,Ot,R,{disabled:0})}}function Mt(o){let e,l,t,i,n,s,a;const r=o[3].default,f=D(r,o,o[2],null);return{c(){e=p("details"),l=p("summary"),t=p("span"),i=F(o[0]),n=E(),s=p("div"),f&&f.c(),y(t,"class","govuk-details__summary-text"),y(l,"class","govuk-details__summary"),y(s,"class","govuk-details__text"),e.open=o[1],y(e,"class","govuk-details"),y(e,"data-module","govuk-details")},m(u,c){v(u,e,c),S(e,l),S(l,t),S(t,i),S(e,n),S(e,s),f&&f.m(s,null),a=!0},p(u,[c]){(!a||c&1)&&Ye(i,u[0]),f&&f.p&&(!a||c&4)&&W(f,r,u,u[2],a?I(r,u[2],c,null):q(u[2]),null),(!a||c&2)&&(e.open=u[1])},i(u){a||(b(f,u),a=!0)},o(u){h(f,u),a=!1},d(u){u&&L(e),f&&f.d(u)}}}function Vt(o,e,l){let{$$slots:t={},$$scope:i}=e,{label:n}=e,{open:s=!1}=e;return o.$$set=a=>{"label"in a&&l(0,n=a.label),"open"in a&&l(1,s=a.open),"$$scope"in a&&l(2,i=a.$$scope)},[n,s,i,t]}class zt extends Z{constructor(e){super(),A(this,e,Vt,Mt,R,{label:0,open:1})}}const Zt=o=>({}),De=o=>({}),At=o=>({}),We=o=>({});function Rt(o){let e,l,t,i,n,s,a,r,f,u,c;const d=o[4].sidebar,_=D(d,o,o[3],We),g=o[4].main,k=D(g,o,o[3],De);return{c(){e=p("div"),l=p("aside"),t=p("div"),_&&_.c(),i=E(),n=p("button"),n.textContent="â†’",a=E(),r=p("main"),k&&k.c(),y(t,"class","sidebar-content content-container svelte-1n0etgd"),y(n,"type","button"),y(n,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),y(l,"class",s=ae(o[1]?"":"collapsed")+" svelte-1n0etgd"),pe(l,"--sidebarWidth",o[0]),y(r,"class","svelte-1n0etgd"),y(e,"class","overall-layout svelte-1n0etgd")},m(C,B){v(C,e,B),S(e,l),S(l,t),_&&_.m(t,null),S(l,i),S(l,n),S(e,a),S(e,r),k&&k.m(r,null),f=!0,u||(c=G(n,"click",o[2]),u=!0)},p(C,[B]){_&&_.p&&(!f||B&8)&&W(_,d,C,C[3],f?I(d,C[3],B,At):q(C[3]),We),(!f||B&2&&s!==(s=ae(C[1]?"":"collapsed")+" svelte-1n0etgd"))&&y(l,"class",s),(!f||B&1)&&pe(l,"--sidebarWidth",C[0]),k&&k.p&&(!f||B&8)&&W(k,g,C,C[3],f?I(g,C[3],B,Zt):q(C[3]),De)},i(C){f||(b(_,C),b(k,C),f=!0)},o(C){h(_,C),h(k,C),f=!1},d(C){C&&L(e),_&&_.d(C),k&&k.d(C),u=!1,c()}}}function Pt(o,e,l){let{$$slots:t={},$$scope:i}=e,{sidebarWidth:n="25rem"}=e,s=!0;function a(){l(1,s=!s)}return o.$$set=r=>{"sidebarWidth"in r&&l(0,n=r.sidebarWidth),"$$scope"in r&&l(3,i=r.$$scope)},[n,s,a,i,t]}class bl extends Z{constructor(e){super(),A(this,e,Pt,Rt,R,{sidebarWidth:0})}}let Tt=Date.now();function hl(o){return`${o}-${Tt++}`}const Le=Symbol.for("svelte-maplibre");function J(){return ct(Le)}function Ut(){let o=new WeakMap;return e=>{var n;let l=o.get(e.originalEvent);if(l!==void 0)return l;let i=(n=e.target.queryRenderedFeatures(e.point)[0])==null?void 0:n.layer.id;return o.set(e.originalEvent,i),i}}function Dt(){return xe(Le,{map:T(null),source:Se(null),layer:Se(null),popupTarget:Se(null),cluster:T(),loadedImages:T(new Set),minzoom:T(0),maxzoom:T(24),layerEvent:T(null),eventTopMost:Ut()})}function qe(o){return{subscribe:o.subscribe}}function tt({key:o,setPopupTarget:e=!1,setCluster:l=!1,setMouseEvent:t=!1}){let i=J(),n=T(null),s=qe(n),a={...i,[o]:qe(n)};if(e&&(a.popupTarget=s),t){let r=T(null);a.layerEvent=r,i.layerEvent=r}return l&&(a.cluster=T()),xe(Le,a),{...i,self:n}}function yl(){return tt({key:"source",setCluster:!0})}function kl(){return tt({key:"layer",setPopupTarget:!0,setMouseEvent:!0})}function Wt(o,e,l){let t;const{map:i}=J();U(o,i,r=>l(4,t=r));let{position:n="top-left"}=e,{container:s=void 0}=e,a=null;return ue(()=>{t!=null&&t.loaded()&&a&&t.removeControl(a)}),o.$$set=r=>{"position"in r&&l(1,n=r.position),"container"in r&&l(2,s=r.container)},o.$$.update=()=>{if(o.$$.dirty&30&&t&&!a){let r;typeof s=="string"?r=document.querySelector(s)??void 0:r=s,l(3,a=new K.FullscreenControl({container:r})),t.addControl(a,n)}},[i,n,s,a,t]}class qt extends Z{constructor(e){super(),A(this,e,Wt,null,R,{position:1,container:2})}}function It(o,e,l){let t;const{map:i}=J();U(o,i,d=>l(8,t=d));let{position:n="top-left"}=e,{positionOptions:s=void 0}=e,{fitBoundsOptions:a=void 0}=e,{trackUserLocation:r=!1}=e,{showAccuracyCircle:f=!0}=e,{showUserLocation:u=!0}=e,c=null;return ue(()=>{t!=null&&t.loaded()&&c&&t.removeControl(c)}),o.$$set=d=>{"position"in d&&l(1,n=d.position),"positionOptions"in d&&l(2,s=d.positionOptions),"fitBoundsOptions"in d&&l(3,a=d.fitBoundsOptions),"trackUserLocation"in d&&l(4,r=d.trackUserLocation),"showAccuracyCircle"in d&&l(5,f=d.showAccuracyCircle),"showUserLocation"in d&&l(6,u=d.showUserLocation)},o.$$.update=()=>{o.$$.dirty&510&&t&&!c&&(l(7,c=new K.GeolocateControl({positionOptions:s,fitBoundsOptions:a,trackUserLocation:r,showAccuracyCircle:f,showUserLocation:u})),t.addControl(c,n))},[i,n,s,a,r,f,u,c,t]}class jt extends Z{constructor(e){super(),A(this,e,It,null,R,{position:1,positionOptions:2,fitBoundsOptions:3,trackUserLocation:4,showAccuracyCircle:5,showUserLocation:6})}}var oe=Be;function Be(o,e){return o===e||o!==o&&e!==e?!0:typeof o!=typeof e||{}.toString.call(o)!={}.toString.call(e)||o!==Object(o)||!o?!1:Array.isArray(o)?Ie(o,e):{}.toString.call(o)=="[object Set]"?Ie(Array.from(o),Array.from(e)):{}.toString.call(o)=="[object Object]"?Ft(o,e):Nt(o,e)}function Nt(o,e){return o.toString()===e.toString()}function Ie(o,e){var l=o.length;if(l!=e.length)return!1;for(var t=0;t<l;t++)if(!Be(o[t],e[t]))return!1;return!0}function Ft(o,e){var l=Object.keys(o),t=l.length;if(t!=Object.keys(e).length)return!1;for(var i=0;i<t;i++){var n=l[i];if(!(e.hasOwnProperty(n)&&Be(o[n],e[n])))return!1}return!0}function Ht(o,e,l){let t;const{map:i}=J();U(o,i,u=>l(6,t=u));let{position:n="top-left"}=e,{showCompass:s=!0}=e,{showZoom:a=!0}=e,{visualizePitch:r=!1}=e,f=null;return ue(()=>{t!=null&&t.loaded()&&f&&t.removeControl(f)}),o.$$set=u=>{"position"in u&&l(1,n=u.position),"showCompass"in u&&l(2,s=u.showCompass),"showZoom"in u&&l(3,a=u.showZoom),"visualizePitch"in u&&l(4,r=u.visualizePitch)},o.$$.update=()=>{o.$$.dirty&126&&t&&!f&&(l(5,f=new K.NavigationControl({showCompass:s,showZoom:a,visualizePitch:r})),t.addControl(f,n))},[i,n,s,a,r,f,t]}class Gt extends Z{constructor(e){super(),A(this,e,Ht,null,R,{position:1,showCompass:2,showZoom:3,visualizePitch:4})}}function Kt(o,e,l){let t;const{map:i}=J();U(o,i,f=>l(5,t=f));let{position:n="bottom-left"}=e,{maxWidth:s=void 0}=e,{unit:a="metric"}=e,r=null;return ue(()=>{t!=null&&t.loaded()&&r&&t.removeControl(r)}),o.$$set=f=>{"position"in f&&l(1,n=f.position),"maxWidth"in f&&l(2,s=f.maxWidth),"unit"in f&&l(3,a=f.unit)},o.$$.update=()=>{o.$$.dirty&62&&t&&!r&&(l(4,r=new K.ScaleControl({maxWidth:s,unit:a})),t.addControl(r,n))},[i,n,s,a,r,t]}class Jt extends Z{constructor(e){super(),A(this,e,Kt,null,R,{position:1,maxWidth:2,unit:3})}}const Qt=o=>({map:o[0]&8,loadedImages:o[0]&16,allImagesLoaded:o[0]&32}),je=o=>({map:o[3],loadedImages:o[4],allImagesLoaded:o[5]});function Ne(o){let e,l,t=o[2]&&Fe(o);const i=o[32].default,n=D(i,o,o[31],je);return{c(){t&&t.c(),e=E(),n&&n.c()},m(s,a){t&&t.m(s,a),v(s,e,a),n&&n.m(s,a),l=!0},p(s,a){s[2]?t?(t.p(s,a),a[0]&4&&b(t,1)):(t=Fe(s),t.c(),b(t,1),t.m(e.parentNode,e)):t&&(j(),h(t,1,1,()=>{t=null}),N()),n&&n.p&&(!l||a[0]&56|a[1]&1)&&W(n,i,s,s[31],l?I(i,s[31],a,Qt):q(s[31]),je)},i(s){l||(b(t),b(n,s),l=!0)},o(s){h(t),h(n,s),l=!1},d(s){s&&L(e),t&&t.d(s),n&&n.d(s)}}}function Fe(o){let e,l,t,i,n,s,a,r;return e=new Gt({props:{position:o[6]}}),t=new jt({props:{position:o[6],fitBoundsOptions:{maxZoom:12}}}),n=new qt({props:{position:o[6]}}),a=new Jt({props:{position:o[6]}}),{c(){M(e.$$.fragment),l=E(),M(t.$$.fragment),i=E(),M(n.$$.fragment),s=E(),M(a.$$.fragment)},m(f,u){V(e,f,u),v(f,l,u),V(t,f,u),v(f,i,u),V(n,f,u),v(f,s,u),V(a,f,u),r=!0},p(f,u){const c={};u[0]&64&&(c.position=f[6]),e.$set(c);const d={};u[0]&64&&(d.position=f[6]),t.$set(d);const _={};u[0]&64&&(_.position=f[6]),n.$set(_);const g={};u[0]&64&&(g.position=f[6]),a.$set(g)},i(f){r||(b(e.$$.fragment,f),b(t.$$.fragment,f),b(n.$$.fragment,f),b(a.$$.fragment,f),r=!0)},o(f){h(e.$$.fragment,f),h(t.$$.fragment,f),h(n.$$.fragment,f),h(a.$$.fragment,f),r=!1},d(f){f&&(L(l),L(i),L(s)),z(e,f),z(t,f),z(n,f),z(a,f)}}}function Xt(o){let e,l,t,i,n,s=o[3]&&o[0]&&Ne(o);return{c(){e=p("div"),s&&s.c(),y(e,"class",l=ae(o[1])+" svelte-p00lfq"),Ve(e,"expand-map",!o[1])},m(a,r){v(a,e,r),s&&s.m(e,null),t=!0,i||(n=dt(o[9].call(null,e)),i=!0)},p(a,r){a[3]&&a[0]?s?(s.p(a,r),r[0]&9&&b(s,1)):(s=Ne(a),s.c(),b(s,1),s.m(e,null)):s&&(j(),h(s,1,1,()=>{s=null}),N()),(!t||r[0]&2&&l!==(l=ae(a[1])+" svelte-p00lfq"))&&y(e,"class",l),(!t||r[0]&2)&&Ve(e,"expand-map",!a[1])},i(a){t||(b(s),t=!0)},o(a){h(s),t=!1},d(a){a&&L(e),s&&s.d(),i=!1,n()}}}function Yt(o,e,l){let t,i,n,s,{$$slots:a={},$$scope:r}=e,{map:f=null}=e,{class:u=void 0}=e,{style:c}=e,{diffStyleUpdates:d=!1}=e,{center:_=[0,0]}=e,{zoom:g=1}=e,{pitch:k=0}=e,{bearing:C=0}=e,{bounds:B=void 0}=e,{loaded:H=!1}=e,{minZoom:ce=0}=e,{maxZoom:de=22}=e,{zoomOnDoubleClick:me=!0}=e,{interactive:_e=!0}=e,{attributionControl:ge=!0}=e,{preserveDrawingBuffer:be=!1}=e,{maxBounds:he=void 0}=e,{images:Q=[]}=e,{standardControls:X=!1}=e,{filterLayers:Y=void 0}=e,{transformRequest:ye=void 0}=e;const P=mt(),{map:x,loadedImages:$}=Dt();U(o,x,m=>l(3,n=m)),U(o,$,m=>l(4,s=m));let ke=new Set;function lt(m){n!=null&&n.loaded()&&("url"in m?(ke.add(m.id),n.loadImage(m.url,(w,O)=>{ke.delete(m.id),w?P("error",w):O&&(n==null||n.addImage(m.id,O,m.options),s.add(m.id),$.set(s))})):(n.addImage(m.id,m.data,m.options),s.add(m.id),$.set(s)))}let ee,te,we,le;function nt(m){return ze(x,n=new K.Map({container:m,style:c,center:_,zoom:g,pitch:k,bearing:C,minZoom:ce,maxZoom:de,interactive:_e,preserveDrawingBuffer:be,maxBounds:he,bounds:B,attributionControl:ge,transformRequest:ye}),n),n.on("load",w=>{l(0,H=!0),P("load",n)}),n.on("error",w=>P("error",{...w,map:n})),n.on("movestart",w=>P("movestart",{...w,map:n})),n.on("moveend",w=>{l(10,_=w.target.getCenter()),l(11,g=w.target.getZoom()),l(12,B=w.target.getBounds()),P("moveend",{...w,map:n})}),n.on("zoomstart",w=>P("zoomstart",{...w,map:n})),n.on("zoom",w=>{l(11,g=w.target.getZoom()),P("zoom",{...w,map:n})}),n.on("zoomend",w=>{l(11,g=w.target.getZoom()),P("zoomend",{...w,map:n})}),n.on("style.load",()=>{if(n){const w=n.getStyle();if(l(28,ee=w.layers.map(O=>O.id)),l(29,te=Object.keys(w.sources)),le)for(const[O,ne]of Object.entries(le))n.addSource(O,ne);if(we)for(const O of we)n.addLayer(O)}}),n.on("styledata",w=>{if(n&&Y){const O=n.getStyle().layers;if(O)for(let ne of O)Y(ne)||n.setLayoutProperty(ne.id,"visibility","none")}P("styledata",{...w,map:n})}),{destroy(){l(0,H=!1),n==null||n.remove(),ze(x,n=null,n)}}}let Ce=c;return o.$$set=m=>{"map"in m&&l(13,f=m.map),"class"in m&&l(1,u=m.class),"style"in m&&l(14,c=m.style),"diffStyleUpdates"in m&&l(15,d=m.diffStyleUpdates),"center"in m&&l(10,_=m.center),"zoom"in m&&l(11,g=m.zoom),"pitch"in m&&l(16,k=m.pitch),"bearing"in m&&l(17,C=m.bearing),"bounds"in m&&l(12,B=m.bounds),"loaded"in m&&l(0,H=m.loaded),"minZoom"in m&&l(18,ce=m.minZoom),"maxZoom"in m&&l(19,de=m.maxZoom),"zoomOnDoubleClick"in m&&l(20,me=m.zoomOnDoubleClick),"interactive"in m&&l(21,_e=m.interactive),"attributionControl"in m&&l(22,ge=m.attributionControl),"preserveDrawingBuffer"in m&&l(23,be=m.preserveDrawingBuffer),"maxBounds"in m&&l(24,he=m.maxBounds),"images"in m&&l(25,Q=m.images),"standardControls"in m&&l(2,X=m.standardControls),"filterLayers"in m&&l(26,Y=m.filterLayers),"transformRequest"in m&&l(27,ye=m.transformRequest),"$$scope"in m&&l(31,r=m.$$scope)},o.$$.update=()=>{if(o.$$.dirty[0]&4&&l(6,t=typeof X=="boolean"?void 0:X),o.$$.dirty[0]&8&&l(13,f=n),o.$$.dirty[0]&33554441&&H&&n!=null&&n.loaded())for(let m of Q)!ke.has(m.id)&&!n.hasImage(m.id)&&lt(m);if(o.$$.dirty[0]&33554448&&l(5,i=Q.every(m=>s.has(m.id))),o.$$.dirty[0]&1879097352&&n&&!oe(c,Ce)){const m=n.getStyle();if(ee&&(we=m.layers.filter(w=>!ee.includes(w.id))),te){const w=Object.keys(m.sources).filter(O=>!te.includes(O));le={};for(const O of w)le[O]=m.sources[O]}l(30,Ce=c),n.setStyle(c,{diff:d})}o.$$.dirty[0]&1032&&_&&!oe(_,n==null?void 0:n.getCenter())&&(n==null||n.panTo(_)),o.$$.dirty[0]&2056&&g&&!oe(g,n==null?void 0:n.getZoom())&&(n==null||n.zoomTo(g)),o.$$.dirty[0]&4104&&B&&!oe(B,n==null?void 0:n.getBounds())&&(n==null||n.fitBounds(B)),o.$$.dirty[0]&1048584&&(me?n==null||n.doubleClickZoom.enable():n==null||n.doubleClickZoom.disable())},[H,u,X,n,s,i,t,x,$,nt,_,g,B,f,c,d,k,C,ce,de,me,_e,ge,be,he,Q,Y,ye,ee,te,Ce,r,a]}class xt extends Z{constructor(e){super(),A(this,e,Yt,Xt,R,{map:13,class:1,style:14,diffStyleUpdates:15,center:10,zoom:11,pitch:16,bearing:17,bounds:12,loaded:0,minZoom:18,maxZoom:19,zoomOnDoubleClick:20,interactive:21,attributionControl:22,preserveDrawingBuffer:23,maxBounds:24,images:25,standardControls:2,filterLayers:26,transformRequest:27},null,[-1,-1])}}function He(o){let e,l,t,i;function n(r){o[6](r)}function s(r){o[7](r)}let a={style:o[3],standardControls:!0,bounds:o[0],$$slots:{default:[$t]},$$scope:{ctx:o}};return o[2]!==void 0&&(a.loaded=o[2]),o[1]!==void 0&&(a.map=o[1]),e=new xt({props:a}),ie.push(()=>se(e,"loaded",n)),ie.push(()=>se(e,"map",s)),{c(){M(e.$$.fragment)},m(r,f){V(e,r,f),i=!0},p(r,f){const u={};f&8&&(u.style=r[3]),f&1&&(u.bounds=r[0]),f&260&&(u.$$scope={dirty:f,ctx:r}),!l&&f&4&&(l=!0,u.loaded=r[2],re(()=>l=!1)),!t&&f&2&&(t=!0,u.map=r[1],re(()=>t=!1)),e.$set(u)},i(r){i||(b(e.$$.fragment,r),i=!0)},o(r){h(e.$$.fragment,r),i=!1},d(r){z(e,r)}}}function Ge(o){let e;const l=o[5].default,t=D(l,o,o[8],null);return{c(){t&&t.c()},m(i,n){t&&t.m(i,n),e=!0},p(i,n){t&&t.p&&(!e||n&256)&&W(t,l,i,i[8],e?I(l,i[8],n,null):q(i[8]),null)},i(i){e||(b(t,i),e=!0)},o(i){h(t,i),e=!1},d(i){t&&t.d(i)}}}function $t(o){let e,l,t=o[2]&&Ge(o);return{c(){t&&t.c(),e=fe()},m(i,n){t&&t.m(i,n),v(i,e,n),l=!0},p(i,n){i[2]?t?(t.p(i,n),n&4&&b(t,1)):(t=Ge(i),t.c(),b(t,1),t.m(e.parentNode,e)):t&&(j(),h(t,1,1,()=>{t=null}),N())},i(i){l||(b(t),l=!0)},o(i){h(t),l=!1},d(i){i&&L(e),t&&t.d(i)}}}function el(o){let e,l,t=o[3]&&He(o);return{c(){e=p("div"),t&&t.c(),y(e,"class","map svelte-12dpf1u")},m(i,n){v(i,e,n),t&&t.m(e,null),l=!0},p(i,[n]){i[3]?t?(t.p(i,n),n&8&&b(t,1)):(t=He(i),t.c(),b(t,1),t.m(e,null)):t&&(j(),h(t,1,1,()=>{t=null}),N())},i(i){l||(b(t),l=!0)},o(i){h(t),l=!1},d(i){i&&L(e),t&&t.d()}}}function tl(o,e,l){let{$$slots:t={},$$scope:i}=e,{style:n}=e,{startBounds:s=null}=e,a=null,r,f=!1;_t(async()=>{l(3,a=await Ze(n))});async function u(_){l(3,a=await Ze(n));let g=new URL(window.location.href);g.searchParams.set("style",_),window.history.replaceState(null,"",g.toString())}function c(_){f=_,l(2,f)}function d(_){r=_,l(1,r)}return o.$$set=_=>{"style"in _&&l(4,n=_.style),"startBounds"in _&&l(0,s=_.startBounds),"$$scope"in _&&l(8,i=_.$$scope)},o.$$.update=()=>{o.$$.dirty&6&&f&&$e.set(r),o.$$.dirty&16&&u(n)},[s,r,f,a,n,t,c,d,i]}class wl extends Z{constructor(e){super(),A(this,e,tl,el,R,{style:4,startBounds:0})}}const ll={area:"#D94324",route:"#555F5E",crossing:"#4daf4a",other:"#984ea3",preapp:"#e41a1c",outline:"#377eb8","reserved matters":"#4daf4a","local plan":"#984ea3",hovering:"black",lineEndpointColor:"black",streetview:"blue",measuringLine:"cyan"},Cl=10,Sl=10,nl="/atip/svelte_maplibre_v2/assets/camera_cursor-824d29b6.svg";function Ke(o){let e,l,t,i;const n=[il,ol],s=[];function a(r,f){return r[0]?0:1}return e=a(o),l=s[e]=n[e](o),{c(){l.c(),t=fe()},m(r,f){s[e].m(r,f),v(r,t,f),i=!0},p(r,f){let u=e;e=a(r),e===u?s[e].p(r,f):(j(),h(s[u],1,1,()=>{s[u]=null}),N(),l=s[e],l?l.p(r,f):(l=s[e]=n[e](r),l.c()),b(l,1),l.m(t.parentNode,t))},i(r){i||(b(l),i=!0)},o(r){h(l),i=!1},d(r){r&&L(t),s[e].d(r)}}}function ol(o){let e,l;return e=new et({props:{$$slots:{default:[sl]},$$scope:{ctx:o}}}),e.$on("click",o[3]),{c(){M(e.$$.fragment)},m(t,i){V(e,t,i),l=!0},p(t,i){const n={};i&512&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),l=!1},d(t){z(e,t)}}}function il(o){let e,l;return e=new et({props:{$$slots:{default:[rl]},$$scope:{ctx:o}}}),e.$on("click",o[2]),{c(){M(e.$$.fragment)},m(t,i){V(e,t,i),l=!0},p(t,i){const n={};i&512&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),l=!1},d(t){z(e,t)}}}function sl(o){let e;return{c(){e=F("Disable Street View")},m(l,t){v(l,e,t)},d(l){l&&L(e)}}}function rl(o){let e;return{c(){e=F("Enable Street View")},m(l,t){v(l,e,t)},d(l){l&&L(e)}}}function Je(o){let e,l,t,i,n;function s(r){o[6](r)}let a={legend:"Source",id:"streetViewImagery",choices:[["google","Google Street View"],["bing","Bing Streetside"]]};return o[4].streetViewImagery!==void 0&&(a.value=o[4].streetViewImagery),e=new gt({props:a}),ie.push(()=>se(e,"value",s)),i=new zt({props:{label:"Help",$$slots:{default:[fl]},$$scope:{ctx:o}}}),{c(){M(e.$$.fragment),t=E(),M(i.$$.fragment)},m(r,f){V(e,r,f),v(r,t,f),V(i,r,f),n=!0},p(r,f){const u={};!l&&f&16&&(l=!0,u.value=r[4].streetViewImagery,re(()=>l=!1)),e.$set(u);const c={};f&512&&(c.$$scope={dirty:f,ctx:r}),i.$set(c)},i(r){n||(b(e.$$.fragment,r),b(i.$$.fragment,r),n=!0)},o(r){h(e.$$.fragment,r),h(i.$$.fragment,r),n=!1},d(r){r&&L(t),z(e,r),z(i,r)}}}function al(o){let e;return{c(){e=F("Luc Chaissac")},m(l,t){v(l,e,t)},d(l){l&&L(e)}}}function fl(o){let e,l,t,i,n,s,a,r,f;return r=new bt({props:{href:"https://icon-icons.com/icon/screenshot-cursor-camera/100181",$$slots:{default:[al]},$$scope:{ctx:o}}}),{c(){e=p("ul"),l=p("li"),l.innerHTML=`<b>Click</b>
        on the map to open a new tab with a 3rd-party imagery provider`,t=E(),i=p("li"),i.innerHTML=`Press <b>Escape</b>
        to exit this mode`,n=E(),s=p("li"),a=F("Cursor by "),M(r.$$.fragment)},m(u,c){v(u,e,c),S(e,l),S(e,t),S(e,i),S(e,n),S(e,s),S(s,a),V(r,s,null),f=!0},p(u,c){const d={};c&512&&(d.$$scope={dirty:c,ctx:u}),r.$set(d)},i(u){f||(b(r.$$.fragment,u),f=!0)},o(u){h(r.$$.fragment,u),f=!1},d(u){u&&L(e),z(r)}}}function ul(o){let e,l,t,i=o[1]&&Ke(o),n=!o[0]&&Je(o);return{c(){i&&i.c(),e=E(),n&&n.c(),l=fe()},m(s,a){i&&i.m(s,a),v(s,e,a),n&&n.m(s,a),v(s,l,a),t=!0},p(s,[a]){s[1]?i?(i.p(s,a),a&2&&b(i,1)):(i=Ke(s),i.c(),b(i,1),i.m(e.parentNode,e)):i&&(j(),h(i,1,1,()=>{i=null}),N()),s[0]?n&&(j(),h(n,1,1,()=>{n=null}),N()):n?(n.p(s,a),a&1&&b(n,1)):(n=Je(s),n.c(),b(n,1),n.m(l.parentNode,l))},i(s){t||(b(i),b(n),t=!0)},o(s){h(i),h(n),t=!1},d(s){s&&(L(e),L(l)),i&&i.d(s),n&&n.d(s)}}}function cl(o,e,l){let t,i;U(o,$e,d=>l(8,t=d)),U(o,Ae,d=>l(4,i=d));let{displayEnableButton:n}=e,{isInactive:s}=e,a=[];function r(d){if(s)return;let _=d.lngLat.lng,g=d.lngLat.lat;i.streetViewImagery=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${g},${_}&cbp=11,0,0,0,0`,"_blank"):i.streetViewImagery=="bing"&&window.open(`https://www.bing.com/maps?cp=${g}~${_}&style=x`,"_blank")}function f(){l(0,s=!1),t.on("click",r),t.getCanvas().style.cursor=`url(${nl}), auto`,a=ht();for(let d of a)d.setProperty(t,"line-color",ll.streetview)}function u(){l(0,s=!0),t.off("click",r),t.getCanvas().style.cursor="inherit";for(let d of a)d.returnToDefaultPaintValues(t)}function c(d){o.$$.not_equal(i.streetViewImagery,d)&&(i.streetViewImagery=d,Ae.set(i))}return o.$$set=d=>{"displayEnableButton"in d&&l(1,n=d.displayEnableButton),"isInactive"in d&&l(0,s=d.isInactive)},[s,n,f,u,i,r,c]}class pl extends Z{constructor(e){super(),A(this,e,cl,ul,R,{displayEnableButton:1,isInactive:0,handleMapClickEvent:5,enableStreetView:2,disableStreetView:3})}get handleMapClickEvent(){return this.$$.ctx[5]}get enableStreetView(){return this.$$.ctx[2]}get disableStreetView(){return this.$$.ctx[3]}}export{gl as B,zt as C,bl as L,wl as M,pl as S,Cl as a,ml as b,ll as c,_l as d,yl as e,Bt as f,hl as g,Sl as l,J as m,kl as u};
