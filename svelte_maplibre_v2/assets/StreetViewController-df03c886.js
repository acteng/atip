import{S as Z,i as A,s as R,aJ as U,j as L,p as y,q as p,r as S,aK as W,aL as q,aM as j,v as b,w as h,y as v,k as O,ap as pe,C as H,aC as Xe,aX as Je,aW as st,F as rt,n as E,t as z,z as V,E as at,az as Me,a1 as fe,aD as ft,b6 as Oe,aA as ut,b7 as ct,B as ve,A as F,N as Ye,b8 as dt,g as ie,h as se,u as re,c as P,aQ as Ee,b9 as ae,ba as xe,bb as D,bc as Se,Q as mt,e as ue,aS as K,aI as ze,bd as _t,G as I,x as N,b as gt,aT as Ve,o as bt,be as Ze,m as $e,ar as Ae,R as ht,aR as yt,bf as kt,f as et}from"./index-c3a200ef.js";function wt(o){let e,l,t;const s=o[3].default,n=U(s,o,o[2],null);return{c(){e=L("fieldset"),l=L("div"),n&&n.c(),y(l,"class",o[0]),y(l,"data-module","govuk-checkboxes"),y(e,"class","govuk-fieldset")},m(i,a){p(i,e,a),S(e,l),n&&n.m(l,null),t=!0},p(i,[a]){n&&n.p&&(!t||a&4)&&W(n,s,i,i[2],t?j(s,i[2],a,null):q(i[2]),null)},i(i){t||(b(n,i),t=!0)},o(i){h(n,i),t=!1},d(i){i&&v(e),n&&n.d(i)}}}function Ct(o,e,l){let{$$slots:t={},$$scope:s}=e,{small:n=!1}=e,i=n?"govuk-checkboxes--small":"govuk-checkboxes";return o.$$set=a=>{"small"in a&&l(1,n=a.small),"$$scope"in a&&l(2,s=a.$$scope)},[i,n,s,t]}class ml extends Z{constructor(e){super(),A(this,e,Ct,wt,R,{small:1})}}const St=o=>({}),Re=o=>({});function pt(o){let e,l,t,s,n,i,a,r,f;const u=o[5].default,c=U(u,o,o[4],null),d=o[5].right,_=U(d,o,o[4],Re);return{c(){e=L("div"),l=L("input"),t=O(),s=L("label"),c&&c.c(),n=O(),i=L("span"),_&&_.c(),y(l,"type","checkbox"),y(l,"class","govuk-checkboxes__input"),y(l,"id",o[1]),y(s,"class","govuk-label govuk-checkboxes__label"),y(s,"for",o[1]),y(s,"title",o[2]),pe(i,"float","right"),y(e,"class","govuk-checkboxes__item"),y(e,"style",o[3])},m(g,k){p(g,e,k),S(e,l),l.checked=o[0],S(e,t),S(e,s),c&&c.m(s,null),S(e,n),S(e,i),_&&_.m(i,null),a=!0,r||(f=[H(l,"change",o[7]),H(l,"change",o[6])],r=!0)},p(g,[k]){(!a||k&2)&&y(l,"id",g[1]),k&1&&(l.checked=g[0]),c&&c.p&&(!a||k&16)&&W(c,u,g,g[4],a?j(u,g[4],k,null):q(g[4]),null),(!a||k&2)&&y(s,"for",g[1]),(!a||k&4)&&y(s,"title",g[2]),_&&_.p&&(!a||k&16)&&W(_,d,g,g[4],a?j(d,g[4],k,St):q(g[4]),Re)},i(g){a||(b(c,g),b(_,g),a=!0)},o(g){h(c,g),h(_,g),a=!1},d(g){g&&v(e),c&&c.d(g),_&&_.d(g),r=!1,Xe(f)}}}function vt(o,e,l){let{$$slots:t={},$$scope:s}=e;const n=st(t);let{id:i}=e,{checked:a}=e,{hint:r=null}=e,u=n.right!==void 0?"float: none":"";function c(_){Je.call(this,o,_)}function d(){a=this.checked,l(0,a)}return o.$$set=_=>{"id"in _&&l(1,i=_.id),"checked"in _&&l(0,a=_.checked),"hint"in _&&l(2,r=_.hint),"$$scope"in _&&l(4,s=_.$$scope)},[a,i,r,u,s,t,c,d]}class _l extends Z{constructor(e){super(),A(this,e,vt,pt,R,{id:1,checked:0,hint:2})}}function Te(o,e,l){const t=o.slice();return t[9]=e[l][0],t[10]=e[l][1],t}function De(o){let e;return{c(){e=L("option"),e.__value="",ve(e,e.__value)},m(l,t){p(l,e,t)},d(l){l&&v(e)}}}function Pe(o){let e,l=o[10]+"",t,s;return{c(){e=L("option"),t=F(l),e.__value=s=o[9],ve(e,e.__value)},m(n,i){p(n,e,i),S(e,t)},p(n,i){i&8&&l!==(l=n[10]+"")&&Ye(t,l),i&8&&s!==(s=n[9])&&(e.__value=s,ve(e,e.__value))},d(n){n&&v(e)}}}function Lt(o){let e,l,t,s,n,i,a;e=new at({props:{errorMessage:o[6]}});let r=o[4]&&De(),f=Me(o[3]),u=[];for(let c=0;c<f.length;c+=1)u[c]=Pe(Te(o,f,c));return{c(){E(e.$$.fragment),l=O(),t=L("select"),r&&r.c(),s=fe();for(let c=0;c<u.length;c+=1)u[c].c();y(t,"class","govuk-select"),y(t,"id",o[2]),t.disabled=o[5],o[0]===void 0&&ft(()=>o[8].call(t))},m(c,d){z(e,c,d),p(c,l,d),p(c,t,d),r&&r.m(t,null),S(t,s);for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(t,null);Oe(t,o[0],!0),n=!0,i||(a=[H(t,"change",o[8]),H(t,"change",o[7])],i=!0)},p(c,d){const _={};if(d&64&&(_.errorMessage=c[6]),e.$set(_),c[4]?r||(r=De(),r.c(),r.m(t,s)):r&&(r.d(1),r=null),d&8){f=Me(c[3]);let g;for(g=0;g<f.length;g+=1){const k=Te(c,f,g);u[g]?u[g].p(k,d):(u[g]=Pe(k),u[g].c(),u[g].m(t,null))}for(;g<u.length;g+=1)u[g].d(1);u.length=f.length}(!n||d&4)&&y(t,"id",c[2]),(!n||d&32)&&(t.disabled=c[5]),d&9&&Oe(t,c[0])},i(c){n||(b(e.$$.fragment,c),n=!0)},o(c){h(e.$$.fragment,c),n=!1},d(c){c&&(v(l),v(t)),V(e,c),r&&r.d(),ut(u,c),i=!1,Xe(a)}}}function Bt(o){let e,l;return e=new rt({props:{label:o[1],id:o[2],$$slots:{default:[Lt]},$$scope:{ctx:o}}}),{c(){E(e.$$.fragment)},m(t,s){z(e,t,s),l=!0},p(t,[s]){const n={};s&2&&(n.label=t[1]),s&4&&(n.id=t[2]),s&8317&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),l=!1},d(t){V(e,t)}}}function Mt(o,e,l){let{label:t}=e,{id:s}=e,{choices:n}=e,{emptyOption:i=!1}=e,{disabled:a=!1}=e,{errorMessage:r=""}=e,{value:f}=e;function u(d){Je.call(this,o,d)}function c(){f=ct(this),l(0,f),l(3,n)}return o.$$set=d=>{"label"in d&&l(1,t=d.label),"id"in d&&l(2,s=d.id),"choices"in d&&l(3,n=d.choices),"emptyOption"in d&&l(4,i=d.emptyOption),"disabled"in d&&l(5,a=d.disabled),"errorMessage"in d&&l(6,r=d.errorMessage),"value"in d&&l(0,f=d.value)},[f,t,s,n,i,a,r,u,c]}class Ot extends Z{constructor(e){super(),A(this,e,Mt,Bt,R,{label:1,id:2,choices:3,emptyOption:4,disabled:5,errorMessage:6,value:0})}}function Et(o){let e,l,t;function s(i){o[2](i)}let n={label:"Basemap",id:"basemap",choices:dt(),disabled:o[0]};return o[1]!==void 0&&(n.value=o[1]),e=new Ot({props:n}),ie.push(()=>se(e,"value",s)),{c(){E(e.$$.fragment)},m(i,a){z(e,i,a),t=!0},p(i,[a]){const r={};a&1&&(r.disabled=i[0]),!l&&a&2&&(l=!0,r.value=i[1],re(()=>l=!1)),e.$set(r)},i(i){t||(b(e.$$.fragment,i),t=!0)},o(i){h(e.$$.fragment,i),t=!1},d(i){V(e,i)}}}function zt(o,e,l){let t;P(o,Ee,i=>l(1,t=i));let{disabled:s=!1}=e;function n(i){t=i,Ee.set(t)}return o.$$set=i=>{"disabled"in i&&l(0,s=i.disabled)},[s,t,n]}class gl extends Z{constructor(e){super(),A(this,e,zt,Et,R,{disabled:0})}}function Vt(o){let e,l,t,s,n,i,a;const r=o[3].default,f=U(r,o,o[2],null);return{c(){e=L("details"),l=L("summary"),t=L("span"),s=F(o[0]),n=O(),i=L("div"),f&&f.c(),y(t,"class","govuk-details__summary-text"),y(l,"class","govuk-details__summary"),y(i,"class","govuk-details__text"),e.open=o[1],y(e,"class","govuk-details"),y(e,"data-module","govuk-details")},m(u,c){p(u,e,c),S(e,l),S(l,t),S(t,s),S(e,n),S(e,i),f&&f.m(i,null),a=!0},p(u,[c]){(!a||c&1)&&Ye(s,u[0]),f&&f.p&&(!a||c&4)&&W(f,r,u,u[2],a?j(r,u[2],c,null):q(u[2]),null),(!a||c&2)&&(e.open=u[1])},i(u){a||(b(f,u),a=!0)},o(u){h(f,u),a=!1},d(u){u&&v(e),f&&f.d(u)}}}function Zt(o,e,l){let{$$slots:t={},$$scope:s}=e,{label:n}=e,{open:i=!1}=e;return o.$$set=a=>{"label"in a&&l(0,n=a.label),"open"in a&&l(1,i=a.open),"$$scope"in a&&l(2,s=a.$$scope)},[n,i,s,t]}class At extends Z{constructor(e){super(),A(this,e,Zt,Vt,R,{label:0,open:1})}}const Rt=o=>({}),Ue=o=>({}),Tt=o=>({}),We=o=>({});function Dt(o){let e,l,t,s,n,i,a,r,f,u,c;const d=o[4].sidebar,_=U(d,o,o[3],We),g=o[4].main,k=U(g,o,o[3],Ue);return{c(){e=L("div"),l=L("aside"),t=L("div"),_&&_.c(),s=O(),n=L("button"),n.textContent="â†’",a=O(),r=L("main"),k&&k.c(),y(t,"class","sidebar-content content-container svelte-1n0etgd"),y(n,"type","button"),y(n,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),y(l,"class",i=ae(o[1]?"":"collapsed")+" svelte-1n0etgd"),pe(l,"--sidebarWidth",o[0]),y(r,"class","svelte-1n0etgd"),y(e,"class","overall-layout svelte-1n0etgd")},m(C,B){p(C,e,B),S(e,l),S(l,t),_&&_.m(t,null),S(l,s),S(l,n),S(e,a),S(e,r),k&&k.m(r,null),f=!0,u||(c=H(n,"click",o[2]),u=!0)},p(C,[B]){_&&_.p&&(!f||B&8)&&W(_,d,C,C[3],f?j(d,C[3],B,Tt):q(C[3]),We),(!f||B&2&&i!==(i=ae(C[1]?"":"collapsed")+" svelte-1n0etgd"))&&y(l,"class",i),(!f||B&1)&&pe(l,"--sidebarWidth",C[0]),k&&k.p&&(!f||B&8)&&W(k,g,C,C[3],f?j(g,C[3],B,Rt):q(C[3]),Ue)},i(C){f||(b(_,C),b(k,C),f=!0)},o(C){h(_,C),h(k,C),f=!1},d(C){C&&v(e),_&&_.d(C),k&&k.d(C),u=!1,c()}}}function Pt(o,e,l){let{$$slots:t={},$$scope:s}=e,{sidebarWidth:n="25rem"}=e,i=!0;function a(){l(1,i=!i)}return o.$$set=r=>{"sidebarWidth"in r&&l(0,n=r.sidebarWidth),"$$scope"in r&&l(3,s=r.$$scope)},[n,i,a,s,t]}class bl extends Z{constructor(e){super(),A(this,e,Pt,Dt,R,{sidebarWidth:0})}}let Ut=Date.now();function hl(o){return`${o}-${Ut++}`}const Le=Symbol.for("svelte-maplibre");function Q(){return mt(Le)}function Wt(){let o=new WeakMap;return e=>{var n;let l=o.get(e.originalEvent);if(l!==void 0)return l;let s=(n=e.target.queryRenderedFeatures(e.point)[0])==null?void 0:n.layer.id;return o.set(e.originalEvent,s),s}}function qt(){return xe(Le,{map:D(null),source:Se(null),layer:Se(null),popupTarget:Se(null),cluster:D(),loadedImages:D(new Set),minzoom:D(0),maxzoom:D(24),layerEvent:D(null),eventTopMost:Wt()})}function qe(o){return{subscribe:o.subscribe}}function tt({key:o,setPopupTarget:e=!1,setCluster:l=!1,setMouseEvent:t=!1}){let s=Q(),n=D(null),i=qe(n),a={...s,[o]:qe(n)};if(e&&(a.popupTarget=i),t){let r=D(null);a.layerEvent=r,s.layerEvent=r}return l&&(a.cluster=D()),xe(Le,a),{...s,self:n}}function yl(){return tt({key:"source",setCluster:!0})}function kl(){return tt({key:"layer",setPopupTarget:!0,setMouseEvent:!0})}function jt(o,e,l){let t;const{map:s}=Q();P(o,s,r=>l(4,t=r));let{position:n="top-left"}=e,{container:i=void 0}=e,a=null;return ue(()=>{t!=null&&t.loaded()&&a&&t.removeControl(a)}),o.$$set=r=>{"position"in r&&l(1,n=r.position),"container"in r&&l(2,i=r.container)},o.$$.update=()=>{if(o.$$.dirty&30&&t&&!a){let r;typeof i=="string"?r=document.querySelector(i)??void 0:r=i,l(3,a=new K.FullscreenControl({container:r})),t.addControl(a,n)}},[s,n,i,a,t]}class It extends Z{constructor(e){super(),A(this,e,jt,null,R,{position:1,container:2})}}function Nt(o,e,l){let t;const{map:s}=Q();P(o,s,d=>l(8,t=d));let{position:n="top-left"}=e,{positionOptions:i=void 0}=e,{fitBoundsOptions:a=void 0}=e,{trackUserLocation:r=!1}=e,{showAccuracyCircle:f=!0}=e,{showUserLocation:u=!0}=e,c=null;return ue(()=>{t!=null&&t.loaded()&&c&&t.removeControl(c)}),o.$$set=d=>{"position"in d&&l(1,n=d.position),"positionOptions"in d&&l(2,i=d.positionOptions),"fitBoundsOptions"in d&&l(3,a=d.fitBoundsOptions),"trackUserLocation"in d&&l(4,r=d.trackUserLocation),"showAccuracyCircle"in d&&l(5,f=d.showAccuracyCircle),"showUserLocation"in d&&l(6,u=d.showUserLocation)},o.$$.update=()=>{o.$$.dirty&510&&t&&!c&&(l(7,c=new K.GeolocateControl({positionOptions:i,fitBoundsOptions:a,trackUserLocation:r,showAccuracyCircle:f,showUserLocation:u})),t.addControl(c,n))},[s,n,i,a,r,f,u,c,t]}class Ft extends Z{constructor(e){super(),A(this,e,Nt,null,R,{position:1,positionOptions:2,fitBoundsOptions:3,trackUserLocation:4,showAccuracyCircle:5,showUserLocation:6})}}var oe=Be;function Be(o,e){return o===e||o!==o&&e!==e?!0:typeof o!=typeof e||{}.toString.call(o)!={}.toString.call(e)||o!==Object(o)||!o?!1:Array.isArray(o)?je(o,e):{}.toString.call(o)=="[object Set]"?je(Array.from(o),Array.from(e)):{}.toString.call(o)=="[object Object]"?Ht(o,e):Gt(o,e)}function Gt(o,e){return o.toString()===e.toString()}function je(o,e){var l=o.length;if(l!=e.length)return!1;for(var t=0;t<l;t++)if(!Be(o[t],e[t]))return!1;return!0}function Ht(o,e){var l=Object.keys(o),t=l.length;if(t!=Object.keys(e).length)return!1;for(var s=0;s<t;s++){var n=l[s];if(!(e.hasOwnProperty(n)&&Be(o[n],e[n])))return!1}return!0}function Kt(o,e,l){let t;const{map:s}=Q();P(o,s,u=>l(6,t=u));let{position:n="top-left"}=e,{showCompass:i=!0}=e,{showZoom:a=!0}=e,{visualizePitch:r=!1}=e,f=null;return ue(()=>{t!=null&&t.loaded()&&f&&t.removeControl(f)}),o.$$set=u=>{"position"in u&&l(1,n=u.position),"showCompass"in u&&l(2,i=u.showCompass),"showZoom"in u&&l(3,a=u.showZoom),"visualizePitch"in u&&l(4,r=u.visualizePitch)},o.$$.update=()=>{o.$$.dirty&126&&t&&!f&&(l(5,f=new K.NavigationControl({showCompass:i,showZoom:a,visualizePitch:r})),t.addControl(f,n))},[s,n,i,a,r,f,t]}class lt extends Z{constructor(e){super(),A(this,e,Kt,null,R,{position:1,showCompass:2,showZoom:3,visualizePitch:4})}}function Qt(o,e,l){let t;const{map:s}=Q();P(o,s,f=>l(5,t=f));let{position:n="bottom-left"}=e,{maxWidth:i=void 0}=e,{unit:a="metric"}=e,r=null;return ue(()=>{t!=null&&t.loaded()&&r&&t.removeControl(r)}),o.$$set=f=>{"position"in f&&l(1,n=f.position),"maxWidth"in f&&l(2,i=f.maxWidth),"unit"in f&&l(3,a=f.unit)},o.$$.update=()=>{o.$$.dirty&62&&t&&!r&&(l(4,r=new K.ScaleControl({maxWidth:i,unit:a})),t.addControl(r,n))},[s,n,i,a,r,t]}class nt extends Z{constructor(e){super(),A(this,e,Qt,null,R,{position:1,maxWidth:2,unit:3})}}const Xt=o=>({map:o[0]&8,loadedImages:o[0]&16,allImagesLoaded:o[0]&32}),Ie=o=>({map:o[3],loadedImages:o[4],allImagesLoaded:o[5]});function Ne(o){let e,l,t=o[2]&&Fe(o);const s=o[32].default,n=U(s,o,o[31],Ie);return{c(){t&&t.c(),e=O(),n&&n.c()},m(i,a){t&&t.m(i,a),p(i,e,a),n&&n.m(i,a),l=!0},p(i,a){i[2]?t?(t.p(i,a),a[0]&4&&b(t,1)):(t=Fe(i),t.c(),b(t,1),t.m(e.parentNode,e)):t&&(I(),h(t,1,1,()=>{t=null}),N()),n&&n.p&&(!l||a[0]&56|a[1]&1)&&W(n,s,i,i[31],l?j(s,i[31],a,Xt):q(i[31]),Ie)},i(i){l||(b(t),b(n,i),l=!0)},o(i){h(t),h(n,i),l=!1},d(i){i&&v(e),t&&t.d(i),n&&n.d(i)}}}function Fe(o){let e,l,t,s,n,i,a,r;return e=new lt({props:{position:o[6]}}),t=new Ft({props:{position:o[6],fitBoundsOptions:{maxZoom:12}}}),n=new It({props:{position:o[6]}}),a=new nt({props:{position:o[6]}}),{c(){E(e.$$.fragment),l=O(),E(t.$$.fragment),s=O(),E(n.$$.fragment),i=O(),E(a.$$.fragment)},m(f,u){z(e,f,u),p(f,l,u),z(t,f,u),p(f,s,u),z(n,f,u),p(f,i,u),z(a,f,u),r=!0},p(f,u){const c={};u[0]&64&&(c.position=f[6]),e.$set(c);const d={};u[0]&64&&(d.position=f[6]),t.$set(d);const _={};u[0]&64&&(_.position=f[6]),n.$set(_);const g={};u[0]&64&&(g.position=f[6]),a.$set(g)},i(f){r||(b(e.$$.fragment,f),b(t.$$.fragment,f),b(n.$$.fragment,f),b(a.$$.fragment,f),r=!0)},o(f){h(e.$$.fragment,f),h(t.$$.fragment,f),h(n.$$.fragment,f),h(a.$$.fragment,f),r=!1},d(f){f&&(v(l),v(s),v(i)),V(e,f),V(t,f),V(n,f),V(a,f)}}}function Jt(o){let e,l,t,s,n,i=o[3]&&o[0]&&Ne(o);return{c(){e=L("div"),i&&i.c(),y(e,"class",l=ae(o[1])+" svelte-p00lfq"),ze(e,"expand-map",!o[1])},m(a,r){p(a,e,r),i&&i.m(e,null),t=!0,s||(n=_t(o[9].call(null,e)),s=!0)},p(a,r){a[3]&&a[0]?i?(i.p(a,r),r[0]&9&&b(i,1)):(i=Ne(a),i.c(),b(i,1),i.m(e,null)):i&&(I(),h(i,1,1,()=>{i=null}),N()),(!t||r[0]&2&&l!==(l=ae(a[1])+" svelte-p00lfq"))&&y(e,"class",l),(!t||r[0]&2)&&ze(e,"expand-map",!a[1])},i(a){t||(b(i),t=!0)},o(a){h(i),t=!1},d(a){a&&v(e),i&&i.d(),s=!1,n()}}}function Yt(o,e,l){let t,s,n,i,{$$slots:a={},$$scope:r}=e,{map:f=null}=e,{class:u=void 0}=e,{style:c}=e,{diffStyleUpdates:d=!1}=e,{center:_=[0,0]}=e,{zoom:g=1}=e,{pitch:k=0}=e,{bearing:C=0}=e,{bounds:B=void 0}=e,{loaded:G=!1}=e,{minZoom:ce=0}=e,{maxZoom:de=22}=e,{zoomOnDoubleClick:me=!0}=e,{interactive:_e=!0}=e,{attributionControl:ge=!0}=e,{preserveDrawingBuffer:be=!1}=e,{maxBounds:he=void 0}=e,{images:X=[]}=e,{standardControls:J=!1}=e,{filterLayers:Y=void 0}=e,{transformRequest:ye=void 0}=e;const T=gt(),{map:x,loadedImages:$}=qt();P(o,x,m=>l(3,n=m)),P(o,$,m=>l(4,i=m));let ke=new Set;function ot(m){n!=null&&n.loaded()&&("url"in m?(ke.add(m.id),n.loadImage(m.url,(w,M)=>{ke.delete(m.id),w?T("error",w):M&&(n==null||n.addImage(m.id,M,m.options),i.add(m.id),$.set(i))})):(n.addImage(m.id,m.data,m.options),i.add(m.id),$.set(i)))}let ee,te,we,le;function it(m){return Ve(x,n=new K.Map({container:m,style:c,center:_,zoom:g,pitch:k,bearing:C,minZoom:ce,maxZoom:de,interactive:_e,preserveDrawingBuffer:be,maxBounds:he,bounds:B,attributionControl:ge,transformRequest:ye}),n),n.on("load",w=>{l(0,G=!0),T("load",n)}),n.on("error",w=>T("error",{...w,map:n})),n.on("movestart",w=>T("movestart",{...w,map:n})),n.on("moveend",w=>{l(10,_=w.target.getCenter()),l(11,g=w.target.getZoom()),l(12,B=w.target.getBounds()),T("moveend",{...w,map:n})}),n.on("zoomstart",w=>T("zoomstart",{...w,map:n})),n.on("zoom",w=>{l(11,g=w.target.getZoom()),T("zoom",{...w,map:n})}),n.on("zoomend",w=>{l(11,g=w.target.getZoom()),T("zoomend",{...w,map:n})}),n.on("style.load",()=>{if(n){const w=n.getStyle();if(l(28,ee=w.layers.map(M=>M.id)),l(29,te=Object.keys(w.sources)),le)for(const[M,ne]of Object.entries(le))n.addSource(M,ne);if(we)for(const M of we)n.addLayer(M)}}),n.on("styledata",w=>{if(n&&Y){const M=n.getStyle().layers;if(M)for(let ne of M)Y(ne)||n.setLayoutProperty(ne.id,"visibility","none")}T("styledata",{...w,map:n})}),{destroy(){l(0,G=!1),n==null||n.remove(),Ve(x,n=null,n)}}}let Ce=c;return o.$$set=m=>{"map"in m&&l(13,f=m.map),"class"in m&&l(1,u=m.class),"style"in m&&l(14,c=m.style),"diffStyleUpdates"in m&&l(15,d=m.diffStyleUpdates),"center"in m&&l(10,_=m.center),"zoom"in m&&l(11,g=m.zoom),"pitch"in m&&l(16,k=m.pitch),"bearing"in m&&l(17,C=m.bearing),"bounds"in m&&l(12,B=m.bounds),"loaded"in m&&l(0,G=m.loaded),"minZoom"in m&&l(18,ce=m.minZoom),"maxZoom"in m&&l(19,de=m.maxZoom),"zoomOnDoubleClick"in m&&l(20,me=m.zoomOnDoubleClick),"interactive"in m&&l(21,_e=m.interactive),"attributionControl"in m&&l(22,ge=m.attributionControl),"preserveDrawingBuffer"in m&&l(23,be=m.preserveDrawingBuffer),"maxBounds"in m&&l(24,he=m.maxBounds),"images"in m&&l(25,X=m.images),"standardControls"in m&&l(2,J=m.standardControls),"filterLayers"in m&&l(26,Y=m.filterLayers),"transformRequest"in m&&l(27,ye=m.transformRequest),"$$scope"in m&&l(31,r=m.$$scope)},o.$$.update=()=>{if(o.$$.dirty[0]&4&&l(6,t=typeof J=="boolean"?void 0:J),o.$$.dirty[0]&8&&l(13,f=n),o.$$.dirty[0]&33554441&&G&&n!=null&&n.loaded())for(let m of X)!ke.has(m.id)&&!n.hasImage(m.id)&&ot(m);if(o.$$.dirty[0]&33554448&&l(5,s=X.every(m=>i.has(m.id))),o.$$.dirty[0]&1879097352&&n&&!oe(c,Ce)){const m=n.getStyle();if(ee&&(we=m.layers.filter(w=>!ee.includes(w.id))),te){const w=Object.keys(m.sources).filter(M=>!te.includes(M));le={};for(const M of w)le[M]=m.sources[M]}l(30,Ce=c),n.setStyle(c,{diff:d})}o.$$.dirty[0]&1032&&_&&!oe(_,n==null?void 0:n.getCenter())&&(n==null||n.panTo(_)),o.$$.dirty[0]&2056&&g&&!oe(g,n==null?void 0:n.getZoom())&&(n==null||n.zoomTo(g)),o.$$.dirty[0]&4104&&B&&!oe(B,n==null?void 0:n.getBounds())&&(n==null||n.fitBounds(B)),o.$$.dirty[0]&1048584&&(me?n==null||n.doubleClickZoom.enable():n==null||n.doubleClickZoom.disable())},[G,u,J,n,i,s,t,x,$,it,_,g,B,f,c,d,k,C,ce,de,me,_e,ge,be,he,X,Y,ye,ee,te,Ce,r,a]}class xt extends Z{constructor(e){super(),A(this,e,Yt,Jt,R,{map:13,class:1,style:14,diffStyleUpdates:15,center:10,zoom:11,pitch:16,bearing:17,bounds:12,loaded:0,minZoom:18,maxZoom:19,zoomOnDoubleClick:20,interactive:21,attributionControl:22,preserveDrawingBuffer:23,maxBounds:24,images:25,standardControls:2,filterLayers:26,transformRequest:27},null,[-1,-1])}}function Ge(o){let e,l,t,s;function n(r){o[6](r)}function i(r){o[7](r)}let a={style:o[3],bounds:o[0],$$slots:{default:[$t]},$$scope:{ctx:o}};return o[2]!==void 0&&(a.loaded=o[2]),o[1]!==void 0&&(a.map=o[1]),e=new xt({props:a}),ie.push(()=>se(e,"loaded",n)),ie.push(()=>se(e,"map",i)),{c(){E(e.$$.fragment)},m(r,f){z(e,r,f),s=!0},p(r,f){const u={};f&8&&(u.style=r[3]),f&1&&(u.bounds=r[0]),f&260&&(u.$$scope={dirty:f,ctx:r}),!l&&f&4&&(l=!0,u.loaded=r[2],re(()=>l=!1)),!t&&f&2&&(t=!0,u.map=r[1],re(()=>t=!1)),e.$set(u)},i(r){s||(b(e.$$.fragment,r),s=!0)},o(r){h(e.$$.fragment,r),s=!1},d(r){V(e,r)}}}function He(o){let e,l,t,s,n;e=new nt({}),t=new lt({props:{position:"bottom-right",visualizePitch:!0}});const i=o[5].default,a=U(i,o,o[8],null);return{c(){E(e.$$.fragment),l=O(),E(t.$$.fragment),s=O(),a&&a.c()},m(r,f){z(e,r,f),p(r,l,f),z(t,r,f),p(r,s,f),a&&a.m(r,f),n=!0},p(r,f){a&&a.p&&(!n||f&256)&&W(a,i,r,r[8],n?j(i,r[8],f,null):q(r[8]),null)},i(r){n||(b(e.$$.fragment,r),b(t.$$.fragment,r),b(a,r),n=!0)},o(r){h(e.$$.fragment,r),h(t.$$.fragment,r),h(a,r),n=!1},d(r){r&&(v(l),v(s)),V(e,r),V(t,r),a&&a.d(r)}}}function $t(o){let e,l,t=o[2]&&He(o);return{c(){t&&t.c(),e=fe()},m(s,n){t&&t.m(s,n),p(s,e,n),l=!0},p(s,n){s[2]?t?(t.p(s,n),n&4&&b(t,1)):(t=He(s),t.c(),b(t,1),t.m(e.parentNode,e)):t&&(I(),h(t,1,1,()=>{t=null}),N())},i(s){l||(b(t),l=!0)},o(s){h(t),l=!1},d(s){s&&v(e),t&&t.d(s)}}}function el(o){let e,l,t=o[3]&&Ge(o);return{c(){e=L("div"),t&&t.c(),y(e,"class","map svelte-12dpf1u")},m(s,n){p(s,e,n),t&&t.m(e,null),l=!0},p(s,[n]){s[3]?t?(t.p(s,n),n&8&&b(t,1)):(t=Ge(s),t.c(),b(t,1),t.m(e,null)):t&&(I(),h(t,1,1,()=>{t=null}),N())},i(s){l||(b(t),l=!0)},o(s){h(t),l=!1},d(s){s&&v(e),t&&t.d()}}}function tl(o,e,l){let{$$slots:t={},$$scope:s}=e,{style:n}=e,{startBounds:i=void 0}=e,a=null,r,f=!1;bt(async()=>{l(3,a=await Ze(n))});async function u(_){l(3,a=await Ze(n));let g=new URL(window.location.href);g.searchParams.set("style",_),window.history.replaceState(null,"",g.toString())}function c(_){f=_,l(2,f)}function d(_){r=_,l(1,r)}return o.$$set=_=>{"style"in _&&l(4,n=_.style),"startBounds"in _&&l(0,i=_.startBounds),"$$scope"in _&&l(8,s=_.$$scope)},o.$$.update=()=>{o.$$.dirty&6&&f&&$e.set(r),o.$$.dirty&16&&u(n)},[i,r,f,a,n,t,c,d,s]}class wl extends Z{constructor(e){super(),A(this,e,tl,el,R,{style:4,startBounds:0})}}const ll={area:"#D94324",route:"#555F5E",crossing:"#4daf4a",other:"#984ea3",preapp:"#e41a1c",outline:"#377eb8","reserved matters":"#4daf4a","local plan":"#984ea3",hovering:"black",lineEndpointColor:"black",streetview:"blue",measuringLine:"cyan"},Cl=10,Sl=10,nl="/atip/svelte_maplibre_v2/assets/camera_cursor-824d29b6.svg";function Ke(o){let e,l,t,s;const n=[il,ol],i=[];function a(r,f){return r[0]?0:1}return e=a(o),l=i[e]=n[e](o),{c(){l.c(),t=fe()},m(r,f){i[e].m(r,f),p(r,t,f),s=!0},p(r,f){let u=e;e=a(r),e===u?i[e].p(r,f):(I(),h(i[u],1,1,()=>{i[u]=null}),N(),l=i[e],l?l.p(r,f):(l=i[e]=n[e](r),l.c()),b(l,1),l.m(t.parentNode,t))},i(r){s||(b(l),s=!0)},o(r){h(l),s=!1},d(r){r&&v(t),i[e].d(r)}}}function ol(o){let e,l;return e=new et({props:{$$slots:{default:[sl]},$$scope:{ctx:o}}}),e.$on("click",o[3]),{c(){E(e.$$.fragment)},m(t,s){z(e,t,s),l=!0},p(t,s){const n={};s&512&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),l=!1},d(t){V(e,t)}}}function il(o){let e,l;return e=new et({props:{$$slots:{default:[rl]},$$scope:{ctx:o}}}),e.$on("click",o[2]),{c(){E(e.$$.fragment)},m(t,s){z(e,t,s),l=!0},p(t,s){const n={};s&512&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),l=!1},d(t){V(e,t)}}}function sl(o){let e;return{c(){e=F("Disable Street View")},m(l,t){p(l,e,t)},d(l){l&&v(e)}}}function rl(o){let e;return{c(){e=F("Enable Street View")},m(l,t){p(l,e,t)},d(l){l&&v(e)}}}function Qe(o){let e,l,t,s,n;function i(r){o[6](r)}let a={legend:"Source",id:"streetViewImagery",choices:[["google","Google Street View"],["bing","Bing Streetside"]]};return o[4].streetViewImagery!==void 0&&(a.value=o[4].streetViewImagery),e=new ht({props:a}),ie.push(()=>se(e,"value",i)),s=new At({props:{label:"Help",$$slots:{default:[fl]},$$scope:{ctx:o}}}),{c(){E(e.$$.fragment),t=O(),E(s.$$.fragment)},m(r,f){z(e,r,f),p(r,t,f),z(s,r,f),n=!0},p(r,f){const u={};!l&&f&16&&(l=!0,u.value=r[4].streetViewImagery,re(()=>l=!1)),e.$set(u);const c={};f&512&&(c.$$scope={dirty:f,ctx:r}),s.$set(c)},i(r){n||(b(e.$$.fragment,r),b(s.$$.fragment,r),n=!0)},o(r){h(e.$$.fragment,r),h(s.$$.fragment,r),n=!1},d(r){r&&v(t),V(e,r),V(s,r)}}}function al(o){let e;return{c(){e=F("Luc Chaissac")},m(l,t){p(l,e,t)},d(l){l&&v(e)}}}function fl(o){let e,l,t,s,n,i,a,r,f;return r=new yt({props:{href:"https://icon-icons.com/icon/screenshot-cursor-camera/100181",$$slots:{default:[al]},$$scope:{ctx:o}}}),{c(){e=L("ul"),l=L("li"),l.innerHTML=`<b>Click</b>
        on the map to open a new tab with a 3rd-party imagery provider`,t=O(),s=L("li"),s.innerHTML=`Press <b>Escape</b>
        to exit this mode`,n=O(),i=L("li"),a=F("Cursor by "),E(r.$$.fragment)},m(u,c){p(u,e,c),S(e,l),S(e,t),S(e,s),S(e,n),S(e,i),S(i,a),z(r,i,null),f=!0},p(u,c){const d={};c&512&&(d.$$scope={dirty:c,ctx:u}),r.$set(d)},i(u){f||(b(r.$$.fragment,u),f=!0)},o(u){h(r.$$.fragment,u),f=!1},d(u){u&&v(e),V(r)}}}function ul(o){let e,l,t,s=o[1]&&Ke(o),n=!o[0]&&Qe(o);return{c(){s&&s.c(),e=O(),n&&n.c(),l=fe()},m(i,a){s&&s.m(i,a),p(i,e,a),n&&n.m(i,a),p(i,l,a),t=!0},p(i,[a]){i[1]?s?(s.p(i,a),a&2&&b(s,1)):(s=Ke(i),s.c(),b(s,1),s.m(e.parentNode,e)):s&&(I(),h(s,1,1,()=>{s=null}),N()),i[0]?n&&(I(),h(n,1,1,()=>{n=null}),N()):n?(n.p(i,a),a&1&&b(n,1)):(n=Qe(i),n.c(),b(n,1),n.m(l.parentNode,l))},i(i){t||(b(s),b(n),t=!0)},o(i){h(s),h(n),t=!1},d(i){i&&(v(e),v(l)),s&&s.d(i),n&&n.d(i)}}}function cl(o,e,l){let t,s;P(o,$e,d=>l(8,t=d)),P(o,Ae,d=>l(4,s=d));let{displayEnableButton:n}=e,{isInactive:i}=e,a=[];function r(d){if(i)return;let _=d.lngLat.lng,g=d.lngLat.lat;s.streetViewImagery=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${g},${_}&cbp=11,0,0,0,0`,"_blank"):s.streetViewImagery=="bing"&&window.open(`https://www.bing.com/maps?cp=${g}~${_}&style=x`,"_blank")}function f(){l(0,i=!1),t.on("click",r),t.getCanvas().style.cursor=`url(${nl}), auto`,a=kt();for(let d of a)d.setProperty(t,"line-color",ll.streetview)}function u(){l(0,i=!0),t.off("click",r),t.getCanvas().style.cursor="inherit";for(let d of a)d.returnToDefaultPaintValues(t)}function c(d){o.$$.not_equal(s.streetViewImagery,d)&&(s.streetViewImagery=d,Ae.set(s))}return o.$$set=d=>{"displayEnableButton"in d&&l(1,n=d.displayEnableButton),"isInactive"in d&&l(0,i=d.isInactive)},[i,n,f,u,s,r,c]}class pl extends Z{constructor(e){super(),A(this,e,cl,ul,R,{displayEnableButton:1,isInactive:0,handleMapClickEvent:5,enableStreetView:2,disableStreetView:3})}get handleMapClickEvent(){return this.$$.ctx[5]}get enableStreetView(){return this.$$.ctx[2]}get disableStreetView(){return this.$$.ctx[3]}}export{gl as B,At as C,bl as L,wl as M,pl as S,Cl as a,ml as b,ll as c,_l as d,Ot as e,kl as f,hl as g,Sl as l,Q as m,yl as u};
