import{S as B,i as J,s as N,j as ce,p as ge,ap as we,q as V,D as $,y as K,n as Q,t as U,v as g,w as L,z as W,az as He,G as ee,x as te,aA as Ee,k as Ae,A as Be,r as _e,N as Je,a1 as me,b as Ve,c as q,e as je,aT as se,aJ as oe,aK as ne,aL as re,aM as le,g as be,h as Le,u as Ie,aX as I,f as Ke,m as Xe,ax as Qe,J as Ue,aq as Fe,a5 as fe,b0 as We,b1 as Ye}from"./index-c3a200ef.js";import{C as xe,g as ie,f as pe,u as $e,c as S}from"./StreetViewController-b4825277.js";function et(t){let e;return{c(){e=ce("span"),ge(e,"class","svelte-kzgqtg"),we(e,"background",t[0])},m(n,o){V(n,e,o)},p(n,[o]){o&1&&we(e,"background",n[0])},i:$,o:$,d(n){n&&K(e)}}}function tt(t,e,n){let{color:o}=e;return t.$$set=r=>{"color"in r&&n(0,o=r.color)},[o]}class ot extends B{constructor(e){super(),J(this,e,tt,et,N,{color:0})}}function Ze(t,e,n){const o=t.slice();return o[1]=e[n][0],o[2]=e[n][1],o}function Ne(t){let e,n,o,r=t[1]+"",i,l,a;return n=new ot({props:{color:t[2]}}),{c(){e=ce("li"),Q(n.$$.fragment),o=Ae(),i=Be(r),l=Ae()},m(u,_){V(u,e,_),U(n,e,null),_e(e,o),_e(e,i),_e(e,l),a=!0},p(u,_){const d={};_&1&&(d.color=u[2]),n.$set(d),(!a||_&1)&&r!==(r=u[1]+"")&&Je(i,r)},i(u){a||(g(n.$$.fragment,u),a=!0)},o(u){L(n.$$.fragment,u),a=!1},d(u){u&&K(e),W(n)}}}function nt(t){let e,n,o=He(t[0]),r=[];for(let l=0;l<o.length;l+=1)r[l]=Ne(Ze(t,o,l));const i=l=>L(r[l],1,1,()=>{r[l]=null});return{c(){e=ce("ul");for(let l=0;l<r.length;l+=1)r[l].c()},m(l,a){V(l,e,a);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);n=!0},p(l,a){if(a&1){o=He(l[0]);let u;for(u=0;u<o.length;u+=1){const _=Ze(l,o,u);r[u]?(r[u].p(_,a),g(r[u],1)):(r[u]=Ne(_),r[u].c(),g(r[u],1),r[u].m(e,null))}for(ee(),u=o.length;u<r.length;u+=1)i(u);te()}},i(l){if(!n){for(let a=0;a<o.length;a+=1)g(r[a]);n=!0}},o(l){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)L(r[a]);n=!1},d(l){l&&K(e),Ee(r,l)}}}function rt(t){let e,n;return e=new xe({props:{label:"Legend",$$slots:{default:[nt]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(o,r){U(e,o,r),n=!0},p(o,[r]){const i={};r&33&&(i.$$scope={dirty:r,ctx:o}),e.$set(i)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){L(e.$$.fragment,o),n=!1},d(o){W(e,o)}}}function lt(t,e,n){let{rows:o}=e;return t.$$set=r=>{"rows"in r&&n(0,o=r.rows)},[o]}class At extends B{constructor(e){super(),J(this,e,lt,rt,N,{rows:0})}}function Ge(t){let e;return n=>{if(n)for(let o in n){let r=e==null?void 0:e[o],i=n[o];r!==i&&t(o,i,r)}else if(e)for(let o in e)t(o,void 0,e[o]);e=n}}function it(t,...e){let n=[t];for(let o of e)if(o)Array.isArray(o)&&o[0]===t?n.push(...o.slice(1)):n.push(o);else continue;if(n.length!==1)return n.length===2?n[1]:n}function ut(t){return t===!0?["has","point_count"]:t===!1?["!",["has","point_count"]]:void 0}function Ft(t,e){return["case",["boolean",["feature-state","hover"],!1],e,t]}var ve=at;function at(t){var e,n,o;if(t){if(Array.isArray(t)){for(e=[],n=t.length,o=0;o<n;o++){var r=t[o];r!=null&&e.push(r)}return e}if(typeof t=="object"){e={};var i=Object.keys(t);for(n=i.length,o=0;o<n;o++){var l=i[o],a=t[l];a!=null&&(e[l]=a)}return e}}}function Pe(t){let e=t[0],n,o,r=qe(t);return{c(){r.c(),n=me()},m(i,l){r.m(i,l),V(i,n,l),o=!0},p(i,l){l[0]&1&&N(e,e=i[0])?(ee(),L(r,1,1,$),te(),r=qe(i),r.c(),g(r,1),r.m(n.parentNode,n)):r.p(i,l)},i(i){o||(g(r),o=!0)},o(i){L(r),o=!1},d(i){i&&K(n),r.d(i)}}}function qe(t){let e;const n=t[35].default,o=oe(n,t,t[34],null);return{c(){o&&o.c()},m(r,i){o&&o.m(r,i),e=!0},p(r,i){o&&o.p&&(!e||i[1]&8)&&ne(o,n,r,r[34],e?le(n,r[34],i,null):re(r[34]),null)},i(r){e||(g(o,r),e=!0)},o(r){L(o,r),e=!1},d(r){o&&o.d(r)}}}function ft(t){let e,n,o=t[0]&&Pe(t);return{c(){o&&o.c(),e=me()},m(r,i){o&&o.m(r,i),V(r,e,i),n=!0},p(r,i){r[0]?o?(o.p(r,i),i[0]&1&&g(o,1)):(o=Pe(r),o.c(),g(o,1),o.m(e.parentNode,e)):o&&(ee(),L(o,1,1,()=>{o=null}),te())},i(r){n||(g(o),n=!0)},o(r){L(o),n=!1},d(r){r&&K(e),o&&o.d(r)}}}function st(t,e,n){let o,r,i,l,a,u,_,d,s,C,z,y,{$$slots:H={},$$scope:k}=e,{id:b=ie("layer")}=e,{source:v=void 0}=e,{sourceLayer:M=void 0}=e,{beforeId:h=void 0}=e,{beforeLayerType:w=void 0}=e,{type:G}=e,{paint:F=void 0}=e,{layout:Z=void 0}=e,{filter:P=void 0}=e,{applyToClusters:f=void 0}=e,{minzoom:m=void 0}=e,{maxzoom:de=void 0}=e,{manageHoverState:ue=!1}=e,{hovered:Y=null}=e,{hoverCursor:x=void 0}=e,{eventsIfTopMost:p=!1}=e;const ae=Ve(),{map:Ce,source:ze,self:he,minzoom:Se,maxzoom:ke,eventTopMost:ye}=pe();q(t,Ce,c=>n(30,s=c)),q(t,ze,c=>n(31,C=c)),q(t,he,c=>n(0,d=c)),q(t,Se,c=>n(33,y=c)),q(t,ke,c=>n(32,z=c)),je(()=>{d&&s&&(s==null||s.removeLayer(d))});let D;return t.$$set=c=>{"id"in c&&n(7,b=c.id),"source"in c&&n(8,v=c.source),"sourceLayer"in c&&n(9,M=c.sourceLayer),"beforeId"in c&&n(10,h=c.beforeId),"beforeLayerType"in c&&n(11,w=c.beforeLayerType),"type"in c&&n(12,G=c.type),"paint"in c&&n(13,F=c.paint),"layout"in c&&n(14,Z=c.layout),"filter"in c&&n(15,P=c.filter),"applyToClusters"in c&&n(16,f=c.applyToClusters),"minzoom"in c&&n(17,m=c.minzoom),"maxzoom"in c&&n(18,de=c.maxzoom),"manageHoverState"in c&&n(19,ue=c.manageHoverState),"hovered"in c&&n(6,Y=c.hovered),"hoverCursor"in c&&n(20,x=c.hoverCursor),"eventsIfTopMost"in c&&n(21,p=c.eventsIfTopMost),"$$scope"in c&&n(34,k=c.$$scope)},t.$$.update=()=>{if(t.$$.dirty[0]&65536&&n(29,o=ut(f)),t.$$.dirty[0]&536903680&&n(28,r=it("all",o,P)),t.$$.dirty[0]&131072|t.$$.dirty[1]&4&&n(24,i=m??y),t.$$.dirty[0]&262144|t.$$.dirty[1]&2&&n(23,l=de??z),t.$$.dirty[0]&256|t.$$.dirty[1]&1&&n(27,a=v||C),t.$$.dirty[0]&1509457537&&s&&d!==b&&a){let c=function(T){var j,E;if(!d||!s||p&&ye(T)!==d)return;let A=T.features??[],O=(E=(j=A[0])==null?void 0:j.properties)==null?void 0:E.cluster_id,R={event:T,map:s,clusterId:O,layer:d,source:a,features:A};ae(T.type,R)},X=h;if(!h&&w){let T=s.getStyle().layers,A=typeof w=="function"?w:R=>R.type===w,O=T==null?void 0:T.find(A);O&&(X=O.id)}se(he,d=b,d),s.addLayer(ve({id:d,type:G,source:a,"source-layer":M,filter:r,paint:F,layout:Z,minzoom:i,maxzoom:l}),X),s.on("click",d,c),s.on("dblclick",d,c),s.on("contextmenu",d,c),s.on("mouseenter",d,T=>{var j,E;if(!d||!s||p&&ye(T)!==d)return;x&&(s.getCanvas().style.cursor=x);let A=T.features??[];n(6,Y=A[0]??null);let O=(E=(j=A[0])==null?void 0:j.properties)==null?void 0:E.cluster_id;ae("mouseenter",{event:T,map:s,clusterId:O,layer:d,source:a,features:A})}),s.on("mousemove",d,T=>{var j,E,Me;if(p&&ye(T)!==d)return;let A=T.features??[],O=(E=(j=A[0])==null?void 0:j.properties)==null?void 0:E.cluster_id,R=(Me=A[0])==null?void 0:Me.id;R!==D&&(ue&&(D!==void 0&&(s==null||s.setFeatureState({source:a,id:D},{hover:!1})),s==null||s.setFeatureState({source:a,id:R},{hover:!0})),n(22,D=R),n(6,Y=A[0]??null)),ae("mousemove",{event:T,map:s,clusterId:O,layer:d,source:a,features:A})}),s.on("mouseleave",d,T=>{!d||!s||(x&&(s.getCanvas().style.cursor=""),n(6,Y=null),ue&&D!==void 0&&(s==null||s.setFeatureState({source:a,id:D},{hover:!1}),n(22,D=void 0)),ae("mouseleave",{map:s,layer:d,source:a}))})}t.$$.dirty[0]&1073741825&&n(26,u=d?Ge((c,X)=>s==null?void 0:s.setPaintProperty(d,c,X)):void 0),t.$$.dirty[0]&1073741825&&n(25,_=d?Ge((c,X)=>s==null?void 0:s.setLayoutProperty(d,c,X)):void 0),t.$$.dirty[0]&67117056&&(u==null||u(F)),t.$$.dirty[0]&33570816&&(_==null||_(Z)),t.$$.dirty[0]&1098907649&&d&&(s==null||s.setLayerZoomRange(d,i,l))},[d,Ce,ze,he,Se,ke,Y,b,v,M,h,w,G,F,Z,P,f,m,de,ue,x,p,D,l,i,_,u,a,r,o,s,C,z,y,k,H]}class Te extends B{constructor(e){super(),J(this,e,st,ft,N,{id:7,source:8,sourceLayer:9,beforeId:10,beforeLayerType:11,type:12,paint:13,layout:14,filter:15,applyToClusters:16,minzoom:17,maxzoom:18,manageHoverState:19,hovered:6,hoverCursor:20,eventsIfTopMost:21},null,[-1,-1])}}function ct(t){let e;const n=t[15].default,o=oe(n,t,t[23],null);return{c(){o&&o.c()},m(r,i){o&&o.m(r,i),e=!0},p(r,i){o&&o.p&&(!e||i&8388608)&&ne(o,n,r,r[23],e?le(n,r[23],i,null):re(r[23]),null)},i(r){e||(g(o,r),e=!0)},o(r){L(o,r),e=!1},d(r){o&&o.d(r)}}}function mt(t){let e,n,o;function r(l){t[16](l)}let i={id:t[1],type:"circle",source:t[2],sourceLayer:t[3],beforeId:t[4],beforeLayerType:t[5],paint:t[6],layout:t[7],filter:t[8],applyToClusters:t[9],minzoom:t[10],maxzoom:t[11],hoverCursor:t[12],manageHoverState:t[13],eventsIfTopMost:t[14],$$slots:{default:[ct]},$$scope:{ctx:t}};return t[0]!==void 0&&(i.hovered=t[0]),e=new Te({props:i}),be.push(()=>Le(e,"hovered",r)),e.$on("click",t[17]),e.$on("dblclick",t[18]),e.$on("contextmenu",t[19]),e.$on("mouseenter",t[20]),e.$on("mousemove",t[21]),e.$on("mouseleave",t[22]),{c(){Q(e.$$.fragment)},m(l,a){U(e,l,a),o=!0},p(l,[a]){const u={};a&2&&(u.id=l[1]),a&4&&(u.source=l[2]),a&8&&(u.sourceLayer=l[3]),a&16&&(u.beforeId=l[4]),a&32&&(u.beforeLayerType=l[5]),a&64&&(u.paint=l[6]),a&128&&(u.layout=l[7]),a&256&&(u.filter=l[8]),a&512&&(u.applyToClusters=l[9]),a&1024&&(u.minzoom=l[10]),a&2048&&(u.maxzoom=l[11]),a&4096&&(u.hoverCursor=l[12]),a&8192&&(u.manageHoverState=l[13]),a&16384&&(u.eventsIfTopMost=l[14]),a&8388608&&(u.$$scope={dirty:a,ctx:l}),!n&&a&1&&(n=!0,u.hovered=l[0],Ie(()=>n=!1)),e.$set(u)},i(l){o||(g(e.$$.fragment,l),o=!0)},o(l){L(e.$$.fragment,l),o=!1},d(l){W(e,l)}}}function dt(t,e,n){let{$$slots:o={},$$scope:r}=e,{id:i=ie("circle")}=e,{source:l=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:u=void 0}=e,{beforeLayerType:_=void 0}=e,{paint:d}=e,{layout:s=void 0}=e,{filter:C=void 0}=e,{applyToClusters:z=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:H=void 0}=e,{hoverCursor:k=void 0}=e,{manageHoverState:b=!1}=e,{hovered:v=null}=e,{eventsIfTopMost:M=!1}=e;function h(m){v=m,n(0,v)}function w(m){I.call(this,t,m)}function G(m){I.call(this,t,m)}function F(m){I.call(this,t,m)}function Z(m){I.call(this,t,m)}function P(m){I.call(this,t,m)}function f(m){I.call(this,t,m)}return t.$$set=m=>{"id"in m&&n(1,i=m.id),"source"in m&&n(2,l=m.source),"sourceLayer"in m&&n(3,a=m.sourceLayer),"beforeId"in m&&n(4,u=m.beforeId),"beforeLayerType"in m&&n(5,_=m.beforeLayerType),"paint"in m&&n(6,d=m.paint),"layout"in m&&n(7,s=m.layout),"filter"in m&&n(8,C=m.filter),"applyToClusters"in m&&n(9,z=m.applyToClusters),"minzoom"in m&&n(10,y=m.minzoom),"maxzoom"in m&&n(11,H=m.maxzoom),"hoverCursor"in m&&n(12,k=m.hoverCursor),"manageHoverState"in m&&n(13,b=m.manageHoverState),"hovered"in m&&n(0,v=m.hovered),"eventsIfTopMost"in m&&n(14,M=m.eventsIfTopMost),"$$scope"in m&&n(23,r=m.$$scope)},[v,i,l,a,u,_,d,s,C,z,y,H,k,b,M,o,h,w,G,F,Z,P,f,r]}class Zt extends B{constructor(e){super(),J(this,e,dt,mt,N,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14})}}function ht(t){let e;const n=t[14].default,o=oe(n,t,t[22],null);return{c(){o&&o.c()},m(r,i){o&&o.m(r,i),e=!0},p(r,i){o&&o.p&&(!e||i&4194304)&&ne(o,n,r,r[22],e?le(n,r[22],i,null):re(r[22]),null)},i(r){e||(g(o,r),e=!0)},o(r){L(o,r),e=!1},d(r){o&&o.d(r)}}}function yt(t){let e,n,o;function r(l){t[15](l)}let i={id:t[1],type:"fill",source:t[2],sourceLayer:t[3],beforeId:t[4],beforeLayerType:t[5],paint:t[6],layout:t[7],filter:t[8],minzoom:t[9],maxzoom:t[10],hoverCursor:t[11],manageHoverState:t[12],eventsIfTopMost:t[13],$$slots:{default:[ht]},$$scope:{ctx:t}};return t[0]!==void 0&&(i.hovered=t[0]),e=new Te({props:i}),be.push(()=>Le(e,"hovered",r)),e.$on("click",t[16]),e.$on("dblclick",t[17]),e.$on("contextmenu",t[18]),e.$on("mouseenter",t[19]),e.$on("mousemove",t[20]),e.$on("mouseleave",t[21]),{c(){Q(e.$$.fragment)},m(l,a){U(e,l,a),o=!0},p(l,[a]){const u={};a&2&&(u.id=l[1]),a&4&&(u.source=l[2]),a&8&&(u.sourceLayer=l[3]),a&16&&(u.beforeId=l[4]),a&32&&(u.beforeLayerType=l[5]),a&64&&(u.paint=l[6]),a&128&&(u.layout=l[7]),a&256&&(u.filter=l[8]),a&512&&(u.minzoom=l[9]),a&1024&&(u.maxzoom=l[10]),a&2048&&(u.hoverCursor=l[11]),a&4096&&(u.manageHoverState=l[12]),a&8192&&(u.eventsIfTopMost=l[13]),a&4194304&&(u.$$scope={dirty:a,ctx:l}),!n&&a&1&&(n=!0,u.hovered=l[0],Ie(()=>n=!1)),e.$set(u)},i(l){o||(g(e.$$.fragment,l),o=!0)},o(l){L(e.$$.fragment,l),o=!1},d(l){W(e,l)}}}function _t(t,e,n){let{$$slots:o={},$$scope:r}=e,{id:i=ie("fill")}=e,{source:l=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:u=void 0}=e,{beforeLayerType:_=void 0}=e,{paint:d}=e,{layout:s=void 0}=e,{filter:C=void 0}=e,{minzoom:z=void 0}=e,{maxzoom:y=void 0}=e,{hoverCursor:H=void 0}=e,{manageHoverState:k=!1}=e,{hovered:b=null}=e,{eventsIfTopMost:v=!1}=e;function M(f){b=f,n(0,b)}function h(f){I.call(this,t,f)}function w(f){I.call(this,t,f)}function G(f){I.call(this,t,f)}function F(f){I.call(this,t,f)}function Z(f){I.call(this,t,f)}function P(f){I.call(this,t,f)}return t.$$set=f=>{"id"in f&&n(1,i=f.id),"source"in f&&n(2,l=f.source),"sourceLayer"in f&&n(3,a=f.sourceLayer),"beforeId"in f&&n(4,u=f.beforeId),"beforeLayerType"in f&&n(5,_=f.beforeLayerType),"paint"in f&&n(6,d=f.paint),"layout"in f&&n(7,s=f.layout),"filter"in f&&n(8,C=f.filter),"minzoom"in f&&n(9,z=f.minzoom),"maxzoom"in f&&n(10,y=f.maxzoom),"hoverCursor"in f&&n(11,H=f.hoverCursor),"manageHoverState"in f&&n(12,k=f.manageHoverState),"hovered"in f&&n(0,b=f.hovered),"eventsIfTopMost"in f&&n(13,v=f.eventsIfTopMost),"$$scope"in f&&n(22,r=f.$$scope)},[b,i,l,a,u,_,d,s,C,z,y,H,k,v,o,M,h,w,G,F,Z,P,r]}class Nt extends B{constructor(e){super(),J(this,e,_t,yt,N,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13})}}function De(t){let e=t[0],n,o,r=Oe(t);return{c(){r.c(),n=me()},m(i,l){r.m(i,l),V(i,n,l),o=!0},p(i,l){l&1&&N(e,e=i[0])?(ee(),L(r,1,1,$),te(),r=Oe(i),r.c(),g(r,1),r.m(n.parentNode,n)):r.p(i,l)},i(i){o||(g(r),o=!0)},o(i){L(r),o=!1},d(i){i&&K(n),r.d(i)}}}function Oe(t){let e;const n=t[15].default,o=oe(n,t,t[14],null);return{c(){o&&o.c()},m(r,i){o&&o.m(r,i),e=!0},p(r,i){o&&o.p&&(!e||i&16384)&&ne(o,n,r,r[14],e?le(n,r[14],i,null):re(r[14]),null)},i(r){e||(g(o,r),e=!0)},o(r){L(o,r),e=!1},d(r){o&&o.d(r)}}}function gt(t){let e,n,o=t[0]&&De(t);return{c(){o&&o.c(),e=me()},m(r,i){o&&o.m(r,i),V(r,e,i),n=!0},p(r,[i]){r[0]?o?(o.p(r,i),i&1&&g(o,1)):(o=De(r),o.c(),g(o,1),o.m(e.parentNode,e)):o&&(ee(),L(o,1,1,()=>{o=null}),te())},i(r){n||(g(o),n=!0)},o(r){L(o),n=!1},d(r){r&&K(e),o&&o.d(r)}}}function vt(t,e){if(t.getSource(e)){let n=[];for(let o of t.getStyle().layers)"source"in o&&o.source==e&&n.push(o.id);for(let o of n)console.log(`had to remove ${o} first`),t.removeLayer(o);t.removeSource(e)}}function bt(t,e,n){let o,r,i,{$$slots:l={},$$scope:a}=e,{id:u=ie("geojson")}=e,{data:_}=e,{generateId:d=!1}=e,{promoteId:s=void 0}=e,{filter:C=void 0}=e,{lineMetrics:z=void 0}=e,{cluster:y=void 0}=e;const{map:H,cluster:k,self:b}=$e();q(t,H,h=>n(13,o=h)),q(t,k,h=>n(16,i=h)),q(t,b,h=>n(0,r=h));let v,M=!0;return je(()=>{if(console.log("gj source getting torn down"),r){let h=r;if(console.log(`... will be removing ${h}`),se(b,r=null,r),n(11,v=void 0),o!=null&&o.loaded()){console.log(`... actually removed ${h}`),vt(o,h);let w=o.getSource(h);console.log(`its gone, right? ${w}`)}}}),t.$$set=h=>{"id"in h&&n(4,u=h.id),"data"in h&&n(5,_=h.data),"generateId"in h&&n(6,d=h.generateId),"promoteId"in h&&n(7,s=h.promoteId),"filter"in h&&n(8,C=h.filter),"lineMetrics"in h&&n(9,z=h.lineMetrics),"cluster"in h&&n(10,y=h.cluster),"$$scope"in h&&n(14,a=h.$$scope)},t.$$.update=()=>{t.$$.dirty&1024&&se(k,i=y,i),t.$$.dirty&10225&&o&&r!==u&&(console.log(`$source is ${r}, id is ${u}`),r&&(console.log(`removing existing $source ${r}`),o.removeSource(r)),se(b,r=u,r),console.log(`just set $source to ${u}. adding source now.`),o.addSource(r,ve({type:"geojson",data:_,filter:C,lineMetrics:z,generateId:d,promoteId:s,cluster:!!y,clusterMinPoints:y==null?void 0:y.minPoints,clusterMaxZoom:y==null?void 0:y.maxZoom,clusterRadius:y==null?void 0:y.radius,clusterProperties:y==null?void 0:y.properties})),n(11,v=o.getSource(r)),n(12,M=!0)),t.$$.dirty&6176&&v&&(M?n(12,M=!1):v.setData(_)),t.$$.dirty&3072&&(v==null||v.setClusterOptions(ve({cluster:!!y,clusterMaxZoom:y==null?void 0:y.maxZoom,clusterRadius:y==null?void 0:y.radius})))},[r,H,k,b,u,_,d,s,C,z,y,v,M,o,a,l]}class Gt extends B{constructor(e){super(),J(this,e,bt,gt,N,{id:4,data:5,generateId:6,promoteId:7,filter:8,lineMetrics:9,cluster:10})}}function Lt(t){let e;const n=t[14].default,o=oe(n,t,t[22],null);return{c(){o&&o.c()},m(r,i){o&&o.m(r,i),e=!0},p(r,i){o&&o.p&&(!e||i&4194304)&&ne(o,n,r,r[22],e?le(n,r[22],i,null):re(r[22]),null)},i(r){e||(g(o,r),e=!0)},o(r){L(o,r),e=!1},d(r){o&&o.d(r)}}}function It(t){let e,n,o;function r(l){t[15](l)}let i={id:t[1],type:"line",source:t[2],sourceLayer:t[3],beforeId:t[4],beforeLayerType:t[5],paint:t[6],layout:t[7],filter:t[8],minzoom:t[9],maxzoom:t[10],hoverCursor:t[11],manageHoverState:t[12],eventsIfTopMost:t[13],$$slots:{default:[Lt]},$$scope:{ctx:t}};return t[0]!==void 0&&(i.hovered=t[0]),e=new Te({props:i}),be.push(()=>Le(e,"hovered",r)),e.$on("click",t[16]),e.$on("dblclick",t[17]),e.$on("contextmenu",t[18]),e.$on("mouseenter",t[19]),e.$on("mousemove",t[20]),e.$on("mouseleave",t[21]),{c(){Q(e.$$.fragment)},m(l,a){U(e,l,a),o=!0},p(l,[a]){const u={};a&2&&(u.id=l[1]),a&4&&(u.source=l[2]),a&8&&(u.sourceLayer=l[3]),a&16&&(u.beforeId=l[4]),a&32&&(u.beforeLayerType=l[5]),a&64&&(u.paint=l[6]),a&128&&(u.layout=l[7]),a&256&&(u.filter=l[8]),a&512&&(u.minzoom=l[9]),a&1024&&(u.maxzoom=l[10]),a&2048&&(u.hoverCursor=l[11]),a&4096&&(u.manageHoverState=l[12]),a&8192&&(u.eventsIfTopMost=l[13]),a&4194304&&(u.$$scope={dirty:a,ctx:l}),!n&&a&1&&(n=!0,u.hovered=l[0],Ie(()=>n=!1)),e.$set(u)},i(l){o||(g(e.$$.fragment,l),o=!0)},o(l){L(e.$$.fragment,l),o=!1},d(l){W(e,l)}}}function Tt(t,e,n){let{$$slots:o={},$$scope:r}=e,{id:i=ie("line")}=e,{source:l=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:u=void 0}=e,{beforeLayerType:_=void 0}=e,{paint:d}=e,{layout:s=void 0}=e,{filter:C=void 0}=e,{minzoom:z=void 0}=e,{maxzoom:y=void 0}=e,{hoverCursor:H=void 0}=e,{manageHoverState:k=!1}=e,{hovered:b=null}=e,{eventsIfTopMost:v=!1}=e;function M(f){b=f,n(0,b)}function h(f){I.call(this,t,f)}function w(f){I.call(this,t,f)}function G(f){I.call(this,t,f)}function F(f){I.call(this,t,f)}function Z(f){I.call(this,t,f)}function P(f){I.call(this,t,f)}return t.$$set=f=>{"id"in f&&n(1,i=f.id),"source"in f&&n(2,l=f.source),"sourceLayer"in f&&n(3,a=f.sourceLayer),"beforeId"in f&&n(4,u=f.beforeId),"beforeLayerType"in f&&n(5,_=f.beforeLayerType),"paint"in f&&n(6,d=f.paint),"layout"in f&&n(7,s=f.layout),"filter"in f&&n(8,C=f.filter),"minzoom"in f&&n(9,z=f.minzoom),"maxzoom"in f&&n(10,y=f.maxzoom),"hoverCursor"in f&&n(11,H=f.hoverCursor),"manageHoverState"in f&&n(12,k=f.manageHoverState),"hovered"in f&&n(0,b=f.hovered),"eventsIfTopMost"in f&&n(13,v=f.eventsIfTopMost),"$$scope"in f&&n(22,r=f.$$scope)},[b,i,l,a,u,_,d,s,C,z,y,H,k,v,o,M,h,w,G,F,Z,P,r]}class Pt extends B{constructor(e){super(),J(this,e,Tt,It,N,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13})}}const Ct="/atip/svelte_maplibre_v2/assets/zoom_out_map-b2e1091a.svg";function zt(t){let e,n;return{c(){e=ce("img"),Qe(e.src,n=Ct)||ge(e,"src",n),ge(e,"alt","Zoom to show entire boundary")},m(o,r){V(o,e,r)},p:$,d(o){o&&K(e)}}}function St(t){let e,n;return e=new Ke({props:{title:"Zoom to show entire boundary",$$slots:{default:[zt]},$$scope:{ctx:t}}}),e.$on("click",t[0]),{c(){Q(e.$$.fragment)},m(o,r){U(e,o,r),n=!0},p(o,[r]){const i={};r&8&&(i.$$scope={dirty:r,ctx:o}),e.$set(i)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){L(e.$$.fragment,o),n=!1},d(o){W(e,o)}}}function kt(t,e,n){let o;q(t,Xe,l=>n(2,o=l));let{boundaryGeojson:r}=e;function i(){o.fitBounds(Ue(r),{padding:20,animate:!0,duration:500})}return t.$$set=l=>{"boundaryGeojson"in l&&n(1,r=l.boundaryGeojson)},[i,r]}class qt extends B{constructor(e){super(),J(this,e,kt,St,N,{boundaryGeojson:1})}}function Dt(t){return{v1:"Scheme Design",v2:"Experimental Scheme Design",planning:"Development Planning",criticals:"Critical Issues",atf4:"ATF4 Scheme"}[t]}function Ot(t){return{v1:"an intervention",v2:"an intervention",planning:"a development",criticals:"a critical issue",atf4:"an intervention"}[t]}function Rt(t){return{v1:"interventions",v2:"interventions",planning:"developments",criticals:"critical issues",atf4:"interventions"}[t]}function jt(t){return t=="planning"?Fe(["get","reference_type",["get","planning"]],{preapp:S.preapp,outline:S.outline,"reserved matters":S["reserved matters"],"local plan":S["local plan"]},"black"):Fe(["get","intervention_type"],{area:S.area,route:S.route,crossing:S.crossing,other:S.other},"white")}function Et(t){return t=="planning"?[["Preapp",S.preapp],["Outline",S.outline],["Reserved matters",S["reserved matters"]],["Local plan",S["local plan"]]]:[["Areas",S.area],["Routes",S.route],["Crossings",S.crossing],["Other",S.other]]}function Re(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Bt(t){if(Array.isArray(t))return t;if(t.type==="Feature"){if(t.geometry!==null)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Jt(t,e){return t.type==="FeatureCollection"?"FeatureCollection":t.type==="GeometryCollection"?"GeometryCollection":t.type==="Feature"&&t.geometry!==null?t.geometry.type:t.type}function Mt(t,e,n){n===void 0&&(n={});var o=Re(t),r=Re(e),i=fe(r[1]-o[1]),l=fe(r[0]-o[0]),a=fe(o[1]),u=fe(r[1]),_=Math.pow(Math.sin(i/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(a)*Math.cos(u);return We(2*Math.atan2(Math.sqrt(_),Math.sqrt(1-_)),n.units)}function Vt(t,e){return e===void 0&&(e={}),Ye(t,function(n,o){var r=o.geometry.coordinates;return n+Mt(r[0],r[1],e)},0)}export{Zt as C,Nt as F,Gt as G,Pt as L,qt as Z,Bt as a,Jt as b,Rt as c,Mt as d,Dt as e,jt as f,Re as g,At as h,Et as i,ve as j,Te as k,Vt as l,Ft as m,ot as n,Ot as s};
