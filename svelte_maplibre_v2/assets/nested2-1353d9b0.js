import{S as z,i as q,s as G,M as Dr,b as X,c as Y,e as L,d as T,g as h,av as Mr,h as K,j as g,k as y,m as b,w as tt,l as J,t as m,n as _,p as d,q as v,aH as ct,aI as pt,aJ as $t,aK as mt,_ as ve,y as ne,o as re,aQ as Re,N as pe,a1 as jt,aR as Vt,aS as Fr,x as Q,aT as jr,aU as Br,r as rt,aV as Ye,u as w,f as nn,am as Hr,C as ot,ao as ur,P as Ze,F as cr,a as it,v as sn,I as R,B as Xt,aA as Rr,ax as Ne,aL as Wr,aM as Ur,W as wt,a9 as Gr,aP as V,an as Ie,ay as kt,aW as ae,aX as Ae,R as pr,aY as $r,aZ as rn,E as mr,a_ as an,D as zr,aO as fn,L as qr,z as Vr,aE as Xr}from"./index-f4bce88c.js";import{g as gr,u as Kr,m as Yr,e as yt,C as Te,b as gt,d as te,c as Jr,a as Zr,B as Qr,S as xr,L as eo,M as to}from"./StreetViewController-261ce9c9.js";import{j as no,k as ro,h as oo,i as un,f as dr,G as dt,L as me,l as lo,F as Ge,m as ie,n as we,C as nt,Z as so,I as io}from"./index-33ddb6cc.js";import{F as ao}from"./FileInput-042d958a.js";import{I as Bt}from"./InteractiveLayer-e5ba8a39.js";const fo="/atip/svelte_maplibre_v2/assets/help-d011708a.svg";function uo(r){let e,n;const t=r[1].default,o=ct(t,r,r[4],null);return{c(){e=L("div"),o&&o.c(),K(e,"class","govuk-prose")},m(l,i){g(l,e,i),o&&o.m(e,null),n=!0},p(l,i){o&&o.p&&(!n||i&16)&&pt(o,t,l,l[4],n?mt(t,l[4],i,null):$t(l[4]),null)},i(l){n||(m(o,l),n=!0)},o(l){_(o,l),n=!1},d(l){l&&d(e),o&&o.d(l)}}}function co(r){let e,n,t,o,l,i,a,s,f;function u(p){r[3](p)}let c={title:"Help",$$slots:{default:[uo]},$$scope:{ctx:r}};return r[0]!==void 0&&(c.open=r[0]),l=new Dr({props:c}),X.push(()=>Y(l,"open",u)),{c(){e=L("button"),n=L("img"),o=T(),h(l.$$.fragment),Mr(n.src,t=fo)||K(n,"src",t),K(n,"title","Help"),K(n,"alt","Help"),K(e,"class","svelte-7d9d1l")},m(p,$){g(p,e,$),y(e,n),g(p,o,$),b(l,p,$),a=!0,s||(f=tt(e,"click",r[2]),s=!0)},p(p,[$]){const O={};$&16&&(O.$$scope={dirty:$,ctx:p}),!i&&$&1&&(i=!0,O.open=p[0],J(()=>i=!1)),l.$set(O)},i(p){a||(m(l.$$.fragment,p),a=!0)},o(p){_(l.$$.fragment,p),a=!1},d(p){p&&(d(e),d(o)),v(l,p),s=!1,f()}}}function po(r,e,n){let{$$slots:t={},$$scope:o}=e,l=!1;const i=()=>n(0,l=!0);function a(s){l=s,n(0,l)}return r.$$set=s=>{"$$scope"in s&&n(4,o=s.$$scope)},[l,t,i,a,o]}class oe extends z{constructor(e){super(),q(this,e,po,co,G,{})}}function cn(r){let e=r[0],n,t,o=pn(r);return{c(){o.c(),n=ve()},m(l,i){o.m(l,i),g(l,n,i),t=!0},p(l,i){i&1&&G(e,e=l[0])?(ne(),_(o,1,1,Q),re(),o=pn(l),o.c(),m(o,1),o.m(n.parentNode,n)):o.p(l,i)},i(l){t||(m(o),t=!0)},o(l){_(o),t=!1},d(l){l&&d(n),o.d(l)}}}function pn(r){let e;const n=r[8].default,t=ct(n,r,r[7],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&128)&&pt(t,n,o,o[7],e?mt(n,o[7],l,null):$t(o[7]),null)},i(o){e||(m(t,o),e=!0)},o(o){_(t,o),e=!1},d(o){t&&t.d(o)}}}function $o(r){let e,n,t=r[0]&&cn(r);return{c(){t&&t.c(),e=ve()},m(o,l){t&&t.m(o,l),g(o,e,l),n=!0},p(o,[l]){o[0]?t?(t.p(o,l),l&1&&m(t,1)):(t=cn(o),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ne(),_(t,1,1,()=>{t=null}),re())},i(o){n||(m(t),n=!0)},o(o){_(t),n=!1},d(o){o&&d(e),t&&t.d(o)}}}function mo(r,e,n){let t,o,{$$slots:l={},$$scope:i}=e,{id:a=gr("vector")}=e,{url:s=null}=e,{tiles:f=null}=e;if(s&&s.includes("pmtiles://")&&!Re.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let p=new jr;Re.addProtocol("pmtiles",p.tile)}const{map:u,self:c}=Kr();return pe(r,u,p=>n(6,t=p)),pe(r,c,p=>n(0,o=p)),jt(()=>{if(o){let p=o;Vt(c,o=null,o),Fr().then(()=>{t!=null&&t.loaded()&&(t==null||t.removeSource(p))})}}),r.$$set=p=>{"id"in p&&n(3,a=p.id),"url"in p&&n(4,s=p.url),"tiles"in p&&n(5,f=p.tiles),"$$scope"in p&&n(7,i=p.$$scope)},r.$$.update=()=>{r.$$.dirty&121&&t&&o!==a&&(o&&t.removeSource(o),Vt(c,o=a,o),t.addSource(o,no({type:"vector",url:s,tiles:f})))},[o,u,c,a,s,f,t,i,l]}class $e extends z{constructor(e){super(),q(this,e,mo,$o,G,{id:3,url:4,tiles:5})}}const go=r=>({features:r[0]&16,data:r[0]&16,map:r[0]&4,close:r[0]&1}),$n=r=>{var e;return{features:r[4],data:(e=r[4])==null?void 0:e[0],map:r[2],close:r[29]}};function mn(r){let e,n,t=(r[4]||r[3]instanceof Re.Marker)&&gn(r);return{c(){e=L("div"),t&&t.c()},m(o,l){g(o,e,l),t&&t.m(e,null),r[30](e),n=!0},p(o,l){o[4]||o[3]instanceof Re.Marker?t?(t.p(o,l),l[0]&24&&m(t,1)):(t=gn(o),t.c(),m(t,1),t.m(e,null)):t&&(ne(),_(t,1,1,()=>{t=null}),re())},i(o){n||(m(t),n=!0)},o(o){_(t),n=!1},d(o){o&&d(e),t&&t.d(),r[30](null)}}}function gn(r){let e;const n=r[28].default,t=ct(n,r,r[27],$n);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l[0]&134217749)&&pt(t,n,o,o[27],e?mt(n,o[27],l,go):$t(o[27]),$n)},i(o){e||(m(t,o),e=!0)},o(o){_(t,o),e=!1},d(o){t&&t.d(o)}}}function _o(r){let e,n,t=r[8].default&&mn(r);return{c(){t&&t.c(),e=ve()},m(o,l){t&&t.m(o,l),g(o,e,l),n=!0},p(o,l){o[8].default?t?(t.p(o,l),l[0]&256&&m(t,1)):(t=mn(o),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ne(),_(t,1,1,()=>{t=null}),re())},i(o){n||(m(t),n=!0)},o(o){_(t),n=!1},d(o){o&&d(e),t&&t.d(o)}}}function ho(r,e,n){let t,o,l,i,a,{$$slots:s={},$$scope:f}=e;const u=Br(s);let{closeButton:c=void 0}=e,{closeOnClickOutside:p=!0}=e,{closeOnClickInside:$=!1}=e,{closeOnMove:O=!1}=e,{openOn:k="click"}=e,{focusAfterOpen:C=!0}=e,{anchor:S=void 0}=e,{offset:E=void 0}=e,{popupClass:B=void 0}=e,{maxWidth:N=void 0}=e,{lngLat:I=void 0}=e,{html:D=void 0}=e,{open:A=!1}=e;const{map:P,popupTarget:M,layerEvent:H}=Yr();pe(r,P,j=>n(2,l=j)),pe(r,M,j=>n(3,a=j)),pe(r,H,j=>n(26,i=j));const F=["click","dblclick","contextmenu"];let W,U=!1,le;function Ve(){if(!W)return;let j=W.getElement();!j||j===le||(le=j,k==="hover"&&(le.style.pointerEvents="none"),le.addEventListener("mouseenter",()=>{n(22,U=!0)},{passive:!0}),le.addEventListener("mouseleave",()=>{n(22,U=!1)},{passive:!0}),le.addEventListener("click",()=>{$&&n(0,A=!1)},{passive:!0}))}rt(()=>{if(l)return l.on("click",Pe),typeof a=="string"&&(l.on("click",a,de),l.on("dblclick",a,de),l.on("contextmenu",a,de),l.on("mousemove",a,ye),l.on("mouseleave",a,ke),l.on("touchstart",a,ce),l.on("touchend",a,je)),()=>{l!=null&&l.loaded()&&(W==null||W.remove(),l.off("click",Pe),a instanceof Re.Marker?a.getPopup()===W&&a.setPopup(void 0):typeof a=="string"&&(l.off("click",a,de),l.off("dblclick",a,de),l.off("contextmenu",a,de),l.off("mousemove",a,ye),l.off("mouseleave",a,ke),l.off("touchstart",a,ce),l.off("touchend",a,je)))}});let ee=null,ue="normal";function de(j){j.type===k&&("layerType"in j?j.layerType==="deckgl"?(n(9,I=j.coordinate),n(4,ee=j.object?[j.object]:null)):(n(9,I=j.lngLat),n(4,ee=j.features??[])):(n(9,I=j.lngLat),n(4,ee=j.features??[])),setTimeout(()=>n(0,A=!0)))}let _e=null;function ce(j){_e=j.point}function je(j){if(!_e||k!=="hover")return;let fe=_e.dist(j.point);_e=null,fe<3&&(n(9,I=j.lngLat),n(4,ee=j.features??[]),W.isOpen()?n(23,ue="justOpened"):(n(23,ue="opening"),n(0,A=!0)))}function ke(j){k!=="hover"||_e||ue!=="normal"||(n(0,A=!1),n(4,ee=null))}function ye(j){k!=="hover"||_e||ue!=="normal"||(n(0,A=!0),n(4,ee=j.features??[]),n(9,I=j.lngLat))}function Pe(j){if(ue==="justOpened"){n(23,ue="normal");return}if(!p)return;let fe=[le,a instanceof Re.Marker?a==null?void 0:a.getElement():null];A&&W.isOpen()&&!fe.some(ge=>ge==null?void 0:ge.contains(j.originalEvent.target))&&n(0,A=!1)}let Se;const Be=()=>n(0,A=!1);function Me(j){X[j?"unshift":"push"](()=>{Se=j,n(1,Se)})}return r.$$set=j=>{"closeButton"in j&&n(10,c=j.closeButton),"closeOnClickOutside"in j&&n(11,p=j.closeOnClickOutside),"closeOnClickInside"in j&&n(12,$=j.closeOnClickInside),"closeOnMove"in j&&n(13,O=j.closeOnMove),"openOn"in j&&n(14,k=j.openOn),"focusAfterOpen"in j&&n(15,C=j.focusAfterOpen),"anchor"in j&&n(16,S=j.anchor),"offset"in j&&n(17,E=j.offset),"popupClass"in j&&n(18,B=j.popupClass),"maxWidth"in j&&n(19,N=j.maxWidth),"lngLat"in j&&n(9,I=j.lngLat),"html"in j&&n(20,D=j.html),"open"in j&&n(0,A=j.open),"$$scope"in j&&n(27,f=j.$$scope)},r.$$.update=()=>{if(r.$$.dirty[0]&7168&&n(25,t=c??(!p&&!$)),r.$$.dirty[0]&36675584&&(W||(n(21,W=new Re.Popup({closeButton:t,closeOnClick:!1,closeOnMove:O,focusAfterOpen:C,maxWidth:N,className:B,anchor:S,offset:E})),le=W.getElement(),W.on("open",()=>{n(0,A=!0),Ve()}),W.on("close",j=>{n(0,A=!1)}))),r.$$.dirty[0]&2113544&&W&&a instanceof Re.Marker&&(k==="click"?a.setPopup(W):a.getPopup()===W&&a.setPopup(void 0)),r.$$.dirty[0]&67125248&&F.includes(k)&&(i==null?void 0:i.type)===k&&(de(i),Vt(H,i=null,i)),r.$$.dirty[0]&67125248&&n(24,o=k==="hover"&&((i==null?void 0:i.type)==="mousemove"||(i==null?void 0:i.type)==="mouseenter")),r.$$.dirty[0]&88096768&&k==="hover"&&H&&(o&&i&&(i.layerType==="deckgl"?(n(9,I=i.coordinate),n(4,ee=i.object?[i.object]:null)):(n(9,I=i.lngLat),n(4,ee=i.features??[]))),n(0,A=(o||U)??!1)),r.$$.dirty[0]&3145730&&(Se?W.setDOMContent(Se):D&&W.setHTML(D)),r.$$.dirty[0]&2097664&&I&&W.setLngLat(I),r.$$.dirty[0]&10485765&&l){let j=W.isOpen();A&&!j?(W.addTo(l),ue==="opening"&&n(23,ue="justOpened")):!A&&j&&W.remove()}},[A,Se,l,a,ee,P,M,H,u,I,c,p,$,O,k,C,S,E,B,N,D,W,U,ue,o,t,i,f,s,Be,Me]}class se extends z{constructor(e){super(),q(this,e,ho,_o,G,{closeButton:10,closeOnClickOutside:11,closeOnClickInside:12,closeOnMove:13,openOn:14,focusAfterOpen:15,anchor:16,offset:17,popupClass:18,maxWidth:19,lngLat:9,html:20,open:0},null,[-1,-1])}}function bo(r){let e;const n=r[15].default,t=ct(n,r,r[23],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&8388608)&&pt(t,n,o,o[23],e?mt(n,o[23],l,null):$t(o[23]),null)},i(o){e||(m(t,o),e=!0)},o(o){_(t,o),e=!1},d(o){t&&t.d(o)}}}function vo(r){let e,n,t;function o(i){r[16](i)}let l={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],$$slots:{default:[bo]},$$scope:{ctx:r}};return r[0]!==void 0&&(l.hovered=r[0]),e=new ro({props:l}),X.push(()=>Y(e,"hovered",o)),e.$on("click",r[17]),e.$on("dblclick",r[18]),e.$on("contextmenu",r[19]),e.$on("mouseenter",r[20]),e.$on("mousemove",r[21]),e.$on("mouseleave",r[22]),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,[a]){const s={};a&2&&(s.id=i[1]),a&4&&(s.source=i[2]),a&8&&(s.sourceLayer=i[3]),a&16&&(s.beforeId=i[4]),a&32&&(s.beforeLayerType=i[5]),a&64&&(s.paint=i[6]),a&128&&(s.layout=i[7]),a&256&&(s.filter=i[8]),a&512&&(s.applyToClusters=i[9]),a&1024&&(s.minzoom=i[10]),a&2048&&(s.maxzoom=i[11]),a&4096&&(s.hoverCursor=i[12]),a&8192&&(s.manageHoverState=i[13]),a&16384&&(s.eventsIfTopMost=i[14]),a&8388608&&(s.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,s.hovered=i[0],J(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function wo(r,e,n){let{$$slots:t={},$$scope:o}=e,{id:l=gr("symbol")}=e,{source:i=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:f=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{applyToClusters:$=void 0}=e,{minzoom:O=void 0}=e,{maxzoom:k=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:S=!1}=e,{hovered:E=null}=e,{eventsIfTopMost:B=!1}=e;function N(F){E=F,n(0,E)}function I(F){Ye.call(this,r,F)}function D(F){Ye.call(this,r,F)}function A(F){Ye.call(this,r,F)}function P(F){Ye.call(this,r,F)}function M(F){Ye.call(this,r,F)}function H(F){Ye.call(this,r,F)}return r.$$set=F=>{"id"in F&&n(1,l=F.id),"source"in F&&n(2,i=F.source),"sourceLayer"in F&&n(3,a=F.sourceLayer),"beforeId"in F&&n(4,s=F.beforeId),"beforeLayerType"in F&&n(5,f=F.beforeLayerType),"paint"in F&&n(6,u=F.paint),"layout"in F&&n(7,c=F.layout),"filter"in F&&n(8,p=F.filter),"applyToClusters"in F&&n(9,$=F.applyToClusters),"minzoom"in F&&n(10,O=F.minzoom),"maxzoom"in F&&n(11,k=F.maxzoom),"hoverCursor"in F&&n(12,C=F.hoverCursor),"manageHoverState"in F&&n(13,S=F.manageHoverState),"hovered"in F&&n(0,E=F.hovered),"eventsIfTopMost"in F&&n(14,B=F.eventsIfTopMost),"$$scope"in F&&n(23,o=F.$$scope)},[E,l,i,a,s,f,u,c,p,$,O,k,C,S,B,t,N,I,D,A,P,M,H,o]}class ko extends z{constructor(e){super(),q(this,e,wo,vo,G,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14})}}function yo(r){let e;return{c(){e=L("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function So(r){let e,n,t,o,l=r[0]=="Private (development)"&&yo();return{c(){l&&l.c(),e=T(),n=L("p"),n.textContent="Note the ATF scheme data has not been validated.",t=T(),o=L("p"),o.innerHTML=`Please contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      about any problems, ideas, or feedback for this site.`},m(i,a){l&&l.m(i,a),g(i,e,a),g(i,n,a),g(i,t,a),g(i,o,a)},p:Q,d(i){i&&(d(e),d(n),d(t),d(o)),l&&l.d(i)}}}function Co(r){let e,n,t,o,l,i;return l=new oe({props:{$$slots:{default:[So]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("App version: "),t=w(r[0]),o=T(),h(l.$$.fragment)},m(a,s){g(a,e,s),y(e,n),y(e,t),y(e,o),b(l,e,null),i=!0},p(a,[s]){const f={};s&2&&(f.$$scope={dirty:s,ctx:a}),l.$set(f)},i(a){i||(m(l.$$.fragment,a),i=!0)},o(a){_(l.$$.fragment,a),i=!1},d(a){a&&d(e),v(l)}}}function Oo(r){return[nn()]}class To extends z{constructor(e){super(),q(this,e,Oo,Co,G,{})}}const Lo={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var he=Uint8Array,Xe=Uint16Array,_r=Uint32Array,hr=new he([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),br=new he([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ao=new he([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),vr=function(r,e){for(var n=new Xe(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var o=new _r(n[30]),t=1;t<30;++t)for(var l=n[t];l<n[t+1];++l)o[l]=l-n[t]<<5|t;return[n,o]},wr=vr(hr,2),kr=wr[0],Po=wr[1];kr[28]=258,Po[258]=28;var Eo=vr(br,0),No=Eo[0],Kt=new Xe(32768);for(var x=0;x<32768;++x){var He=(x&43690)>>>1|(x&21845)<<1;He=(He&52428)>>>2|(He&13107)<<2,He=(He&61680)>>>4|(He&3855)<<4,Kt[x]=((He&65280)>>>8|(He&255)<<8)>>>1}var st=function(r,e,n){for(var t=r.length,o=0,l=new Xe(e);o<t;++o)r[o]&&++l[r[o]-1];var i=new Xe(e);for(o=0;o<e;++o)i[o]=i[o-1]+l[o-1]<<1;var a;if(n){a=new Xe(1<<e);var s=15-e;for(o=0;o<t;++o)if(r[o])for(var f=o<<4|r[o],u=e-r[o],c=i[r[o]-1]++<<u,p=c|(1<<u)-1;c<=p;++c)a[Kt[c]>>>s]=f}else for(a=new Xe(t),o=0;o<t;++o)r[o]&&(a[o]=Kt[i[r[o]-1]++]>>>15-r[o]);return a},_t=new he(288);for(var x=0;x<144;++x)_t[x]=8;for(var x=144;x<256;++x)_t[x]=9;for(var x=256;x<280;++x)_t[x]=7;for(var x=280;x<288;++x)_t[x]=8;var yr=new he(32);for(var x=0;x<32;++x)yr[x]=5;var Io=st(_t,9,1),Do=st(yr,5,1),Ht=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},Ce=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},Rt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},Mo=function(r){return(r+7)/8|0},on=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?Xe:r.BYTES_PER_ELEMENT==4?_r:he)(n-e);return t.set(r.subarray(e,n)),t},Fo=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Oe=function(r,e,n){var t=new Error(e||Fo[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Oe),!n)throw t;return t},jo=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new he(0);var o=!e||n,l=!n||n.i;n||(n={}),e||(e=new he(t*3));var i=function(Be){var Me=e.length;if(Be>Me){var j=new he(Math.max(Me*2,Be));j.set(e),e=j}},a=n.f||0,s=n.p||0,f=n.b||0,u=n.l,c=n.d,p=n.m,$=n.n,O=t*8;do{if(!u){a=Ce(r,s,1);var k=Ce(r,s+1,3);if(s+=3,k)if(k==1)u=Io,c=Do,p=9,$=5;else if(k==2){var B=Ce(r,s,31)+257,N=Ce(r,s+10,15)+4,I=B+Ce(r,s+5,31)+1;s+=14;for(var D=new he(I),A=new he(19),P=0;P<N;++P)A[Ao[P]]=Ce(r,s+P*3,7);s+=N*3;for(var M=Ht(A),H=(1<<M)-1,F=st(A,M,1),P=0;P<I;){var W=F[Ce(r,s,H)];s+=W&15;var C=W>>>4;if(C<16)D[P++]=C;else{var U=0,le=0;for(C==16?(le=3+Ce(r,s,3),s+=2,U=D[P-1]):C==17?(le=3+Ce(r,s,7),s+=3):C==18&&(le=11+Ce(r,s,127),s+=7);le--;)D[P++]=U}}var Ve=D.subarray(0,B),ee=D.subarray(B);p=Ht(Ve),$=Ht(ee),u=st(Ve,p,1),c=st(ee,$,1)}else Oe(1);else{var C=Mo(s)+4,S=r[C-4]|r[C-3]<<8,E=C+S;if(E>t){l&&Oe(0);break}o&&i(f+S),e.set(r.subarray(C,E),f),n.b=f+=S,n.p=s=E*8,n.f=a;continue}if(s>O){l&&Oe(0);break}}o&&i(f+131072);for(var ue=(1<<p)-1,de=(1<<$)-1,_e=s;;_e=s){var U=u[Rt(r,s)&ue],ce=U>>>4;if(s+=U&15,s>O){l&&Oe(0);break}if(U||Oe(2),ce<256)e[f++]=ce;else if(ce==256){_e=s,u=null;break}else{var je=ce-254;if(ce>264){var P=ce-257,ke=hr[P];je=Ce(r,s,(1<<ke)-1)+kr[P],s+=ke}var ye=c[Rt(r,s)&de],Pe=ye>>>4;ye||Oe(3),s+=ye&15;var ee=No[Pe];if(Pe>3){var ke=br[Pe];ee+=Rt(r,s)&(1<<ke)-1,s+=ke}if(s>O){l&&Oe(0);break}o&&i(f+131072);for(var Se=f+je;f<Se;f+=4)e[f]=e[f-ee],e[f+1]=e[f+1-ee],e[f+2]=e[f+2-ee],e[f+3]=e[f+3-ee];f=Se}}n.l=u,n.p=_e,n.b=f,n.f=a,u&&(a=1,n.m=p,n.d=c,n.n=$)}while(!a);return f==e.length?e:on(e,0,f)},Bo=new he(0),Ee=function(r,e){return r[e]|r[e+1]<<8},Le=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},Wt=function(r,e){return Le(r,e)+Le(r,e+4)*4294967296};function Ho(r,e){return jo(r,e)}var Yt=typeof TextDecoder<"u"&&new TextDecoder,Ro=0;try{Yt.decode(Bo,{stream:!0}),Ro=1}catch{}var Wo=function(r){for(var e="",n=0;;){var t=r[n++],o=(t>127)+(t>223)+(t>239);if(n+o>r.length)return[e,on(r,n-1)];o?o==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):o&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function Sr(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(Yt)return Yt.decode(r);var o=Wo(r),l=o[0],i=o[1];return i.length&&Oe(8),l}}var Uo=function(r,e){return e+30+Ee(r,e+26)+Ee(r,e+28)},Go=function(r,e,n){var t=Ee(r,e+28),o=Sr(r.subarray(e+46,e+46+t),!(Ee(r,e+8)&2048)),l=e+46+t,i=Le(r,e+20),a=n&&i==4294967295?zo(r,l):[i,Le(r,e+24),Le(r,e+42)],s=a[0],f=a[1],u=a[2];return[Ee(r,e+10),s,f,o,l+Ee(r,e+30)+Ee(r,e+32),u]},zo=function(r,e){for(;Ee(r,e)!=1;e+=4+Ee(r,e+2));return[Wt(r,e+12),Wt(r,e+4),Wt(r,e+20)]};function qo(r,e){for(var n={},t=r.length-22;Le(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Oe(13);var o=Ee(r,t+8);if(!o)return{};var l=Le(r,t+16),i=l==4294967295||o==65535;if(i){var a=Le(r,t-12);i=Le(r,a)==101075792,i&&(o=Le(r,a+32),l=Le(r,a+48))}for(var s=e&&e.filter,f=0;f<o;++f){var u=Go(r,l,i),c=u[0],p=u[1],$=u[2],O=u[3],k=u[4],C=u[5],S=Uo(r,C);l=k,(!s||s({name:O,size:p,originalSize:$,compression:c}))&&(c?c==8?n[O]=Ho(r.subarray(S,S+p),new he($)):Oe(14,"unknown compression type "+c):n[O]=on(r,S,S+p))}return n}function Vo(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(Ut):Ut(r)}function Ut(r){var e=new Uint8Array(r),n=qo(e);return Promise.resolve(Xo(n))}function Xo(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var o=t[n];e[o]=Sr(r[o])}return e}function De(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&Ke(t)===e)return t;n++}}function ht(r,e){for(var n=[],t=0;t<r.childNodes.length;){var o=r.childNodes[t];o.nodeType===1&&Ke(o)===e&&n.push(o),t++}return n}function St(r,e,n){for(var t=0;t<r.childNodes.length;){var o=r.childNodes[t];e?o.nodeType===1&&Ke(o)===e&&n(o,t):n(o,t),t++}}function Ko(r,e,n){var t=[];return St(r,e,function(o,l){t.push(n(o,l))}),t}var Yo=/.+\:/;function Ke(r){return r.tagName.replace(Yo,"")}function Cr(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+Ke(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=Cr(r.childNodes[t]),t++;return e+="</"+Ke(r)+">",e}function Jo(r){var e=r.documentElement,n=De(e,"sheetData"),t=[];return St(n,"row",function(o){St(o,"c",function(l){t.push(l)})}),t}function Zo(r,e){return De(e,"v")}function Qo(r,e){if(e.firstChild&&Ke(e.firstChild)==="is"&&e.firstChild.firstChild&&Ke(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function xo(r){var e=r.documentElement,n=De(e,"dimension");if(n)return n.getAttribute("ref")}function el(r){var e=r.documentElement,n=De(e,"cellStyleXfs");return n?ht(n,"xf"):[]}function tl(r){var e=r.documentElement,n=De(e,"cellXfs");return n?ht(n,"xf"):[]}function nl(r){var e=r.documentElement,n=De(e,"numFmts");return n?ht(n,"numFmt"):[]}function rl(r){var e=r.documentElement;return Ko(e,"si",function(n){var t=De(n,"t");if(t)return t.textContent;var o="";return St(n,"r",function(l){o+=De(l,"t").textContent}),o})}function ol(r){var e=r.documentElement;return De(e,"workbookPr")}function ll(r){var e=r.documentElement;return ht(e,"Relationship")}function sl(r){var e=r.documentElement,n=De(e,"sheets");return ht(n,"sheet")}function il(r,e){var n=e.createDocument(r),t={},o=ol(n);o&&o.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var l=function(a){a.getAttribute("name")&&t.sheets.push({id:a.getAttribute("sheetId"),name:a.getAttribute("name"),relationId:a.getAttribute("r:id")})};return sl(n).forEach(l),t}function al(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},o=function(i){var a=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=Gt(a);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=Gt(a);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=Gt(a);break}};return ll(n).forEach(o),t}function Gt(r){return r[0]==="/"?r.slice(1):"xl/"+r}function dn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function _n(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dn(Object(n),!0).forEach(function(t){fl(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):dn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function fl(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ul(r,e){if(!r)return{};var n=e.createDocument(r),t=el(n).map(zt),o=nl(n).map(cl).reduce(function(i,a){return i[a.id]=a,i},[]),l=function(a){return a.hasAttribute("xfId")?_n(_n({},t[a.xfId]),zt(a,o)):zt(a,o)};return tl(n).map(l)}function cl(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function zt(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function pl(r,e){return r?rl(e.createDocument(r)):[]}function Or(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function $l(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ml(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ml(r,e){if(r){if(typeof r=="string")return hn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hn(r,e)}}function hn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function gl(r,e,n,t){if(e){var o=n[e];if(!o)throw new Error("Cell style not found: ".concat(e));if(!o.numberFormat)return!1;if(dl.indexOf(Number(o.numberFormat.id))>=0||t.dateFormat&&o.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&o.numberFormat.template&&bl(o.numberFormat.template))return!0}}var dl=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],_l=/^\[\$-414\]/,hl=/;@$/;function bl(r){r=r.toLowerCase(),r=r.replace(_l,""),r=r.replace(hl,"");for(var e=r.split(/\W+/),n=$l(e),t;!(t=n()).done;){var o=t.value;if(vl.indexOf(o)<0)return!1}return!0}var vl=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function wl(r,e,n){var t=n.getInlineStringValue,o=n.getInlineStringXml,l=n.getStyleId,i=n.styles,a=n.values,s=n.properties,f=n.options;switch(e||(e="n"),e){case"str":r=qt(r,f);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(o()));r=qt(r,f);break;case"s":var u=Number(r);if(isNaN(u))throw new Error('Invalid "shared" string index: '.concat(r));if(u>=a.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=a[u],r=qt(r,f);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=kl(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var p=Number(r);if(isNaN(p))throw new Error('Invalid "numeric" cell value: '.concat(r));r=p,gl(r,l(),i,f)&&(r=Or(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function kl(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function qt(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var yl=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function Sl(r){var e=function(f,u){return f-u},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),o=n[0],l=n[n.length-1],i=t[0],a=t[t.length-1];return[{row:o,column:i},{row:l,column:a}]}function Cl(r){for(var e=0,n=0;n<r.length;)e*=26,e+=yl.indexOf(r[n]),n++;return e}function Tr(r){return r=r.split(/(\d+)/),[parseInt(r[1]),Cl(r[0].trim())]}function Ol(r,e,n,t,o,l,i){var a=Tr(r.getAttribute("r")),s=Zo(e,r),f=s&&s.textContent,u;return r.hasAttribute("t")&&(u=r.getAttribute("t")),{row:a[0],column:a[1],value:wl(f,u,{getInlineStringValue:function(){return Qo(e,r)},getInlineStringXml:function(){return Cr(r)},getStyleId:function(){return r.getAttribute("s")},styles:o,values:t,properties:l,options:i})}}function Tl(r,e,n,t,o,l){var i=Jo(r);return i.length===0?[]:i.map(function(a){return Ol(a,r,e,n,t,o,l)})}function Ll(r,e){return Nl(r)||El(r,e)||Pl(r,e)||Al()}function Al(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pl(r,e){if(r){if(typeof r=="string")return bn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bn(r,e)}}function bn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function El(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],o=!0,l=!1,i,a;try{for(n=n.call(r);!(o=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));o=!0);}catch(s){l=!0,a=s}finally{try{!o&&n.return!=null&&n.return()}finally{if(l)throw a}}return t}}function Nl(r){if(Array.isArray(r))return r}function Il(r){var e=xo(r);if(e)return e=e.split(":").map(Tr).map(function(n){var t=Ll(n,2),o=t[0],l=t[1];return{row:o,column:l}}),e.length===1&&(e=[e[0],e[0]]),e}function Dl(r,e,n,t,o,l){var i=e.createDocument(r),a=Tl(i,e,n,t,o,l),s=Il(i)||Sl(a);return{cells:a,dimensions:s}}function Ml(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Fl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fl(r,e){if(r){if(typeof r=="string")return vn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vn(r,e)}}function vn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function jl(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,o=t===void 0?function(c){return c}:t,l=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var a=!0,s=Ml(r[i]),f;!(f=s()).done;){var u=f.value;if(o(u)!==null){a=!1;break}}if(a)r.splice(i,1),n&&n.splice(i,1);else if(l)break;i--}return r}function Bl(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Hl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hl(r,e){if(r){if(typeof r=="string")return wn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wn(r,e)}}function wn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Rl(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,o=e.onlyTrimAtTheEnd,l=r[0].length-1;l>=0;){for(var i=!0,a=Bl(r),s;!(s=a()).done;){var f=s.value;if(t(f[l])!==null){i=!1;break}}if(i)for(var u=0;u<r.length;)r[u].splice(l,1),u++;else if(o)break;l--}return r}function Wl(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Lr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ul(r,e){return ql(r)||zl(r,e)||Lr(r,e)||Gl()}function Gl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lr(r,e){if(r){if(typeof r=="string")return kn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kn(r,e)}}function kn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function zl(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],o=!0,l=!1,i,a;try{for(n=n.call(r);!(o=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));o=!0);}catch(s){l=!0,a=s}finally{try{!o&&n.return!=null&&n.return()}finally{if(l)throw a}}return t}}function ql(r){if(Array.isArray(r))return r}function Vl(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var o=Ul(n,2);o[0];for(var l=o[1],i=l.column,a=l.row,s=new Array(a),f=0;f<a;){s[f]=new Array(i);for(var u=0;u<i;)s[f][u]=null,u++;f++}for(var c=Wl(t),p;!(p=c()).done;){var $=p.value,O=$.row-1,k=$.column-1;k<i&&O<a&&(s[O][k]=$.value)}var C=e.rowMap;if(C)for(var S=0;S<s.length;)C[S]=S,S++;return s=jl(Rl(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:C}),e.transformData&&(s=e.transformData(s)),s}function Xl(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Kl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kl(r,e){if(r){if(typeof r=="string")return yn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yn(r,e)}}function yn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Sn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function Yl(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sn(Object(n),!0).forEach(function(t){Jl(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Jl(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Zl(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Yl({sheet:1},n));var t=function(p){if(!r[p])throw new Error('"'.concat(p,'" file not found inside the *.xlsx file zip archive'));return r[p]},o=al(t("xl/_rels/workbook.xml.rels"),e),l=o.sharedStrings?pl(t(o.sharedStrings),e):[],i=o.styles?ul(t(o.styles),e):{},a=il(t("xl/workbook.xml"),e);if(n.getSheets)return a.sheets.map(function(c){var p=c.name;return{name:p}});var s=Ql(n.sheet,a.sheets);if(!s||!o.sheets[s])throw xl(n.sheet,a.sheets);var f=Dl(t(o.sheets[s]),e,l,i,a,n),u=Vl(f,n);return n.properties?{data:u,properties:a}:u}function Ql(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=Xl(e),o;!(o=t()).done;){var l=o.value;if(l.name===r)return l.relationId}}function xl(r,e){var n=e&&e.map(function(t,o){return'"'.concat(t.name,'" (#').concat(o+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function Jt(r){"@babel/helpers - typeof";return Jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(r)}function Cn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function es(r,e,n){return e&&Cn(r.prototype,e),n&&Cn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function ts(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ns(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&at(r,e)}function rs(r){var e=Ar();return function(){var t=ft(r),o;if(e){var l=ft(this).constructor;o=Reflect.construct(t,arguments,l)}else o=t.apply(this,arguments);return os(this,o)}}function os(r,e){if(e&&(Jt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ls(r)}function ls(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Zt(r){var e=typeof Map=="function"?new Map:void 0;return Zt=function(t){if(t===null||!ss(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,o)}function o(){return vt(t,arguments,ft(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),at(o,t)},Zt(r)}function vt(r,e,n){return Ar()?vt=Reflect.construct:vt=function(o,l,i){var a=[null];a.push.apply(a,l);var s=Function.bind.apply(o,a),f=new s;return i&&at(f,i.prototype),f},vt.apply(null,arguments)}function Ar(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ss(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function at(r,e){return at=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t},at(r,e)}function ft(r){return ft=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ft(r)}var be=function(r){ns(n,r);var e=rs(n);function n(t){var o;return ts(this,n),o=e.call(this,"invalid"),o.reason=t,o}return es(n)}(Zt(Error));function is(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new be("not_a_number")}if(typeof r!="number")throw new be("not_a_number");if(isNaN(r))throw new be("invalid_number");if(!isFinite(r))throw new be("out_of_bounds");return r}function as(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new be("invalid_number");if(!isFinite(r))throw new be("out_of_bounds");return String(r)}throw new be("not_a_string")}function fs(r){if(typeof r=="boolean")return r;throw new be("not_a_boolean")}function us(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new be("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new be("invalid_number");if(!isFinite(r))throw new be("out_of_bounds");var t=Or(r,n);if(isNaN(t.valueOf()))throw new be("out_of_bounds");return t}throw new be("not_a_date")}function cs(r,e){return ms(r)||$s(r,e)||Pr(r,e)||ps()}function ps(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $s(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],o=!0,l=!1,i,a;try{for(n=n.call(r);!(o=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));o=!0);}catch(s){l=!0,a=s}finally{try{!o&&n.return!=null&&n.return()}finally{if(l)throw a}}return t}}function ms(r){if(Array.isArray(r))return r}function Qt(r){"@babel/helpers - typeof";return Qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qt(r)}function gs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Pr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pr(r,e){if(r){if(typeof r=="string")return On(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return On(r,e)}}function On(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Tn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function Ln(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tn(Object(n),!0).forEach(function(t){ds(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Tn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function ds(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var An={isColumnOriented:!1};function _s(r,e,n){n?n=Ln(Ln({},An),n):n=An;var t=n,o=t.isColumnOriented,l=t.rowMap,i=t.ignoreEmptyRows;ws(e),o&&(r=vs(r));for(var a=r[0],s=[],f=[],u=1;u<r.length;u++){var c=Er(e,r[u],u,a,f,n);(c!==null||i===!1)&&s.push(c)}if(l)for(var p=gs(f),$;!($=p()).done;){var O=$.value;O.row=l[O.row-1]+1}return{rows:s,errors:f}}function Er(r,e,n,t,o,l){for(var i={},a=!0,s=function(){var p=u[f],$=r[p],O=Qt($.type)==="object"&&!Array.isArray($.type),k=e[t.indexOf(p)];k===void 0&&(k=null);var C=void 0,S=void 0,E=void 0;if(O)C=Er($.type,e,n,t,o,l);else if(k===null)C=null;else if(Array.isArray($.type)){var B=!1,N=bs(k).map(function(D){var A=Pn(D,$,l);return A.error&&(C=D,S=A.error,E=A.reason),A.value!==null&&(B=!0),A.value});S||(C=B?N:null)}else{var I=Pn(k,$,l);S=I.error,E=I.reason,C=S?k:I.value}!S&&C===null&&$.required&&(S="required"),S?(S={error:S,row:n+1,column:p,value:C},E&&(S.reason=E),$.type&&(S.type=$.type),o.push(S)):(a&&C!==null&&(a=!1),(C!==null||l.includeNullValues)&&(i[$.prop]=C))},f=0,u=Object.keys(r);f<u.length;f++)s();return a?null:i}function Pn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=Je(r,e.parse):e.type?t=hs(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(o){return{error:o.message}}}return t}function Je(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function hs(r,e,n){switch(e){case String:return Je(r,as);case Number:return Je(r,is);case Date:return Je(r,function(t){return us(t,{properties:n.properties})});case Boolean:return Je(r,fs);default:if(typeof e=="function")return Je(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Nr(r,e,n){for(var t=0,o="";n+t<r.length;){var l=r[n+t];if(l===e)return[o,t];if(l==='"'){var i=Nr(r,'"',n+t+1);o+=i[0],t+=1+i[1]+1}else o+=l,t++}return[o,t]}function bs(r){for(var e=[],n=0;n<r.length;){var t=Nr(r,",",n),o=cs(t,2),l=o[0],i=o[1];n+=i+1,e.push(l.trim())}return e}var vs=function(e){return e[0].map(function(n,t){return e.map(function(o){return o[t]})})};function ws(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],o=r[t];if(!o.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function xt(r){"@babel/helpers - typeof";return xt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xt(r)}function Ir(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var o=t[n],l=r[o],i=void 0;xt(l)==="object"&&(l=Object.keys(r[o])[0],i=Ir(r[o][l])),e[o]={prop:l},i&&(e[o].type=i)}return e}var ks=["schema","map"];function En(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function bt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?En(Object(n),!0).forEach(function(t){ys(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):En(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function ys(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Ss(r,e){if(r==null)return{};var n=Cs(r,e),t,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);for(o=0;o<l.length;o++)t=l[o],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function Cs(r,e){if(r==null)return{};var n={},t=Object.keys(r),o,l;for(l=0;l<t.length;l++)o=t[l],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}function Os(r,e,n){var t=n.schema,o=n.map,l=Ss(n,ks);!t&&o&&(t=Ir(o));var i=Zl(r,e,bt(bt({},l),{},{properties:t||l.properties}));return t?_s(i.data,t,bt(bt({},l),{},{properties:i.properties})):i}function Ts(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Vo(r).then(function(n){return Os(n,Lo,e)})}function Ls(r){let e=new Map;for(let[t,o]of Object.entries(r.schemes))e.set(t,{scheme_reference:t,num_features:0,authority_or_region:o.authority_or_region,capital_scheme_id:o.capital_scheme_id,funding_programme:o.funding_programme});let n=1;for(let t of r.features){let o=e.get(t.properties.scheme_reference);o.num_features++,t.properties.funding_programme=o.funding_programme,t.id=n++}return e}async function As(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Ts(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let o of n){let l=Hr(o.lat_lon.split(",").map(parseFloat).reverse()),i=o;i.submission_time=o.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:l},id:t.features.length+1})}return t}const Z={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"},Ue=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Ps(r){let e,n,t,o,l;function i(s){r[3](s)}let a={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return r[0]!==void 0&&(a.value=r[0]),e=new yt({props:a}),X.push(()=>Y(e,"value",i)),e.$on("change",r[2]),o=new oo({props:{rows:r[1]}}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment)},m(s,f){b(e,s,f),g(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};!n&&f&1&&(n=!0,u.value=s[0],J(()=>n=!1)),e.$set(u);const c={};f&2&&(c.rows=s[1]),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}function Es(r,e,n){let t;pe(r,ot,s=>n(4,t=s));let o="interventionType",l=un("v1");function i(){let s;o=="interventionType"?(s=dr("v1"),n(1,l=un("v1"))):(s=ur(["get","funding_programme"],{ATF2:Z.atf2,ATF3:Z.atf3,ATF4:Z.atf4},"grey"),n(1,l=[["ATF2",Z.atf2],["ATF3",Z.atf3],["ATF4",Z.atf4]])),t.setPaintProperty("interventions-points","circle-color",s),t.setPaintProperty("interventions-lines","line-color",s),t.setPaintProperty("interventions-polygons","fill-color",s),t.setPaintProperty("interventions-polygon-outlines","line-color",s)}function a(s){o=s,n(0,o)}return[o,l,i,a]}class Ns extends z{constructor(e){super(),q(this,e,Es,Ps,G,{})}}function Is(r){let e;return{c(){e=w("Clear")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Ds(r){let e,n,t,o,l,i;return t=new it({props:{$$slots:{default:[Is]},$$scope:{ctx:r}}}),t.$on("click",r[13]),{c(){e=L("input"),n=T(),h(t.$$.fragment),K(e,"type","text"),K(e,"class","govuk-input govuk-input--width-10"),K(e,"id","filterText")},m(a,s){g(a,e,s),sn(e,r[0]),g(a,n,s),b(t,a,s),o=!0,l||(i=tt(e,"input",r[12]),l=!0)},p(a,s){s&1&&e.value!==a[0]&&sn(e,a[0]);const f={};s&131072&&(f.$$scope={dirty:s,ctx:a}),t.$set(f)},i(a){o||(m(t.$$.fragment,a),o=!0)},o(a){_(t.$$.fragment,a),o=!1},d(a){a&&(d(e),d(n)),v(t,a),l=!1,i()}}}function Ms(r){let e,n,t,o,l,i,a,s,f,u;function c(k){r[10](k)}let p={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[2]!==void 0&&(p.value=r[2]),e=new yt({props:p}),X.push(()=>Y(e,"value",c));function $(k){r[11](k)}let O={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[3]!==void 0&&(O.value=r[3]),o=new yt({props:O}),X.push(()=>Y(o,"value",$)),a=new cr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[Ds]},$$scope:{ctx:r}}}),f=new Ns({}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment),i=T(),h(a.$$.fragment),s=T(),h(f.$$.fragment)},m(k,C){b(e,k,C),g(k,t,C),b(o,k,C),g(k,i,C),b(a,k,C),g(k,s,C),b(f,k,C),u=!0},p(k,C){const S={};C&32&&(S.choices=k[5]),!n&&C&4&&(n=!0,S.value=k[2],J(()=>n=!1)),e.$set(S);const E={};C&64&&(E.choices=k[6]),!l&&C&8&&(l=!0,E.value=k[3],J(()=>l=!1)),o.$set(E);const B={};C&131073&&(B.$$scope={dirty:C,ctx:k}),a.$set(B)},i(k){u||(m(e.$$.fragment,k),m(o.$$.fragment,k),m(a.$$.fragment,k),m(f.$$.fragment,k),u=!0)},o(k){_(e.$$.fragment,k),_(o.$$.fragment,k),_(a.$$.fragment,k),_(f.$$.fragment,k),u=!1},d(k){k&&(d(t),d(i),d(s)),v(e,k),v(o,k),v(a,k),v(f,k)}}}function Fs(r){let e,n=r[1].size.toLocaleString()+"",t,o,l=r[7].route.toLocaleString()+"",i,a,s=r[7].area.toLocaleString()+"",f,u,c=r[7].crossing.toLocaleString()+"",p,$,O=r[7].other.toLocaleString()+"",k,C;return{c(){e=w("Showing "),t=w(n),o=w(" schemes ("),i=w(l),a=w(`
    routes, `),f=w(s),u=w(` areas,
    `),p=w(c),$=w(" crossings, "),k=w(O),C=w(`
    other)`)},m(S,E){g(S,e,E),g(S,t,E),g(S,o,E),g(S,i,E),g(S,a,E),g(S,f,E),g(S,u,E),g(S,p,E),g(S,$,E),g(S,k,E),g(S,C,E)},p(S,E){E&2&&n!==(n=S[1].size.toLocaleString()+"")&&R(t,n),E&128&&l!==(l=S[7].route.toLocaleString()+"")&&R(i,l),E&128&&s!==(s=S[7].area.toLocaleString()+"")&&R(f,s),E&128&&c!==(c=S[7].crossing.toLocaleString()+"")&&R(p,c),E&128&&O!==(O=S[7].other.toLocaleString()+"")&&R(k,O)},d(S){S&&(d(e),d(t),d(o),d(i),d(a),d(f),d(u),d(p),d($),d(k),d(C))}}}function js(r){let e,n,t;function o(i){r[14](i)}let l={id:"show-schemes",$$slots:{default:[Fs]},$$scope:{ctx:r}};return r[4]!==void 0&&(l.checked=r[4]),e=new te({props:l}),X.push(()=>Y(e,"checked",o)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const s={};a&131202&&(s.$$scope={dirty:a,ctx:i}),!n&&a&16&&(n=!0,s.checked=i[4],J(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Bs(r){let e,n,t,o;return e=new Te({props:{label:"Filters",$$slots:{default:[Ms]},$$scope:{ctx:r}}}),t=new gt({props:{small:!0,$$slots:{default:[js]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(l,i){b(e,l,i),g(l,n,i),b(t,l,i),o=!0},p(l,[i]){const a={};i&131181&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&131218&&(s.$$scope={dirty:i,ctx:l}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function Hs(r,e,n){let t,o;pe(r,Ze,N=>n(15,t=N)),pe(r,ot,N=>n(9,o=N));let{schemes:l}=e,{schemesToBeShown:i=new Set}=e,{filterText:a=""}=e,s=[],f="",u=[],c="",p={area:0,route:0,crossing:0,other:0},$=!0;rt(()=>{let N=new Set,I=new Set;for(let D of l.values())D.authority_or_region&&N.add(D.authority_or_region),D.funding_programme&&I.add(D.funding_programme);n(5,s=Array.from(N.entries())),s.sort(),n(6,u=Array.from(I.entries())),u.sort()});function O(N,I,D){let A=N.toLowerCase(),P=H=>{var F,W;if(A&&!((F=H.properties.name)!=null&&F.toLowerCase().includes(A))&&!((W=H.properties.description)!=null&&W.toLowerCase().includes(A)))return!1;if(I||D){let U=l.get(H.properties.scheme_reference);if(I&&U.authority_or_region!=I||D&&U.funding_programme!=D)return!1}return!0};n(1,i=new Set(t.features.filter(P).map(H=>H.properties.scheme_reference))),n(7,p={area:0,route:0,crossing:0,other:0});let M=H=>{var F,W;return!(!i.has(H.properties.scheme_reference)||A&&!((F=H.properties.name)!=null&&F.toLowerCase().includes(A))&&!((W=H.properties.description)!=null&&W.toLowerCase().includes(A)))};Ze.update(H=>{for(let F of H.features)M(F)?(delete F.properties.hide_while_editing,n(7,p[F.properties.intervention_type]++,p)):F.properties.hide_while_editing=!0;return H}),n(7,p)}function k(N){f=N,n(2,f)}function C(N){c=N,n(3,c)}function S(){a=this.value,n(0,a)}const E=()=>n(0,a="");function B(N){$=N,n(4,$)}return r.$$set=N=>{"schemes"in N&&n(8,l=N.schemes),"schemesToBeShown"in N&&n(1,i=N.schemesToBeShown),"filterText"in N&&n(0,a=N.filterText)},r.$$.update=()=>{if(r.$$.dirty&528&&o)for(let N of["interventions-polygons","interventions-polygon-outlines","interventions-lines","interventions-lines-endpoints","interventions-points"])o.getLayer(N)&&o.setLayoutProperty(N,"visibility",$?"visible":"none");r.$$.dirty&13&&O(a,f,c)},[a,i,f,c,$,s,u,p,l,o,k,C,S,E,B]}class Rs extends z{constructor(e){super(),q(this,e,Hs,Bs,G,{schemes:8,schemesToBeShown:1,filterText:0})}}function Ws(r,e,n){let t;pe(r,ot,a=>n(3,t=a));let o=null,{markerPosition:l}=e,{markerPositionUpdated:i}=e;return rt(()=>{o=new Xt.Marker({draggable:!0}).setLngLat(l).addTo(t),o.on("dragstart",()=>{t.getCanvas().style.cursor="grabbing"}),o.on("drag",()=>{n(0,l=o.getLngLat()),i()}),o.on("dragend",()=>{t.getCanvas().style.cursor="inherit"})}),jt(()=>{o&&o.remove()}),r.$$set=a=>{"markerPosition"in a&&n(0,l=a.markerPosition),"markerPositionUpdated"in a&&n(1,i=a.markerPositionUpdated)},[l,i]}class Us extends z{constructor(e){super(),q(this,e,Ws,null,G,{markerPosition:0,markerPositionUpdated:1})}}function Nn(r,e,n){const t=r.slice();return t[16]=e[n],t[17]=e,t[18]=n,t}function Gs(r){let e,n;return e=new it({props:{$$slots:{default:[qs]},$$scope:{ctx:r}}}),e.$on("click",r[5]),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&524288&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zs(r){let e,n;return e=new it({props:{$$slots:{default:[Vs]},$$scope:{ctx:r}}}),e.$on("click",r[4]),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&524288&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qs(r){let e;return{c(){e=w("Disable Line Measurement Tool")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Vs(r){let e;return{c(){e=w("Enable Line Measurement Tool")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function In(r){var c;let e,n,t,o=[],l=new Map,i,a,s=r[2]&&((c=r[2].properties)==null?void 0:c.length)&&Dn(r);n=new Te({props:{label:"Help",$$slots:{default:[Xs]},$$scope:{ctx:r}}});let f=Ne(r[1]);const u=p=>p[16].id;for(let p=0;p<f.length;p+=1){let $=Nn(r,f,p),O=u($);l.set(O,o[p]=Mn(O,$))}return{c(){s&&s.c(),e=T(),h(n.$$.fragment),t=T();for(let p=0;p<o.length;p+=1)o[p].c();i=ve()},m(p,$){s&&s.m(p,$),g(p,e,$),b(n,p,$),g(p,t,$);for(let O=0;O<o.length;O+=1)o[O]&&o[O].m(p,$);g(p,i,$),a=!0},p(p,$){var k;p[2]&&((k=p[2].properties)!=null&&k.length)?s?s.p(p,$):(s=Dn(p),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null);const O={};$&524288&&(O.$$scope={dirty:$,ctx:p}),n.$set(O),$&258&&(f=Ne(p[1]),ne(),o=Wr(o,$,u,1,p,f,l,i.parentNode,Ur,Mn,i,Nn),re())},i(p){if(!a){m(n.$$.fragment,p);for(let $=0;$<f.length;$+=1)m(o[$]);a=!0}},o(p){_(n.$$.fragment,p);for(let $=0;$<o.length;$+=1)_(o[$]);a=!1},d(p){p&&(d(e),d(t),d(i)),s&&s.d(p),v(n,p);for(let $=0;$<o.length;$+=1)o[$].d(p)}}}function Dn(r){var i;let e,n,t=((i=r[2].properties)==null?void 0:i.length)+"",o,l;return{c(){e=L("p"),n=w("Length: "),o=w(t),l=w("m")},m(a,s){g(a,e,s),y(e,n),y(e,o),y(e,l)},p(a,s){var f;s&4&&t!==(t=((f=a[2].properties)==null?void 0:f.length)+"")&&R(o,t)},d(a){a&&d(e)}}}function Xs(r){let e;return{c(){e=L("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and Drag</b>
        an existing waypoint to move it</li> <li><b>Hold shift and click on</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(n,t){g(n,e,t)},p:Q,d(n){n&&d(e)}}}function Mn(r,e){let n,t,o,l;function i(s){e[9](s,e[16])}let a={markerPositionUpdated:e[8]};return e[16].lngLat!==void 0&&(a.markerPosition=e[16].lngLat),t=new Us({props:a}),X.push(()=>Y(t,"markerPosition",i)),{key:r,first:null,c(){n=ve(),h(t.$$.fragment),this.first=n},m(s,f){g(s,n,f),b(t,s,f),l=!0},p(s,f){e=s;const u={};!o&&f&2&&(o=!0,u.markerPosition=e[16].lngLat,J(()=>o=!1)),t.$set(u)},i(s){l||(m(t.$$.fragment,s),l=!0)},o(s){_(t.$$.fragment,s),l=!1},d(s){s&&d(n),v(t,s)}}}function Ks(r){let e,n;return e=new me({props:{id:"measurement-line",paint:{"line-color":Jr.measuringLine,"line-width":5}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:Q,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ys(r){let e,n,t,o,l,i,a,s;const f=[zs,Gs],u=[];function c($,O){return $[0]?0:1}e=c(r),n=u[e]=f[e](r);let p=!r[0]&&In(r);return l=new dt({props:{data:r[3],$$slots:{default:[Ks]},$$scope:{ctx:r}}}),{c(){n.c(),t=T(),p&&p.c(),o=T(),h(l.$$.fragment)},m($,O){u[e].m($,O),g($,t,O),p&&p.m($,O),g($,o,O),b(l,$,O),i=!0,a||(s=[tt(window,"keydown",r[6]),tt(window,"keyup",r[7])],a=!0)},p($,[O]){let k=e;e=c($),e===k?u[e].p($,O):(ne(),_(u[k],1,1,()=>{u[k]=null}),re(),n=u[e],n?n.p($,O):(n=u[e]=f[e]($),n.c()),m(n,1),n.m(t.parentNode,t)),$[0]?p&&(ne(),_(p,1,1,()=>{p=null}),re()):p?(p.p($,O),O&1&&m(p,1)):(p=In($),p.c(),m(p,1),p.m(o.parentNode,o));const C={};O&8&&(C.data=$[3]),O&524288&&(C.$$scope={dirty:O,ctx:$}),l.$set(C)},i($){i||(m(n),m(p),m(l.$$.fragment,$),i=!0)},o($){_(n),_(p),_(l.$$.fragment,$),i=!1},d($){$&&(d(t),d(o)),u[e].d($),p&&p.d($),v(l,$),a=!1,Rr(s)}}}function Js(r,e,n){let t;pe(r,ot,B=>n(12,t=B));let o=!0,l=[],i,a=!1,s=0,f=wt();function u(B){o||(a||(l.push({id:s++,lngLat:B.lngLat}),n(1,l),C()),a&&l.length>0&&(c(B.lngLat),C()))}function c(B){let I=new Xt.LngLat(0,-90).distanceTo(new Xt.LngLat(0,90)),D;l.forEach(A=>{const P=A.lngLat;I>=B.distanceTo(P)&&(D=P,I=B.distanceTo(P))}),D&&n(1,l=l.filter(A=>{const P=A.lngLat;return P.lng!=(D==null?void 0:D.lng)||P.lat!=(D==null?void 0:D.lat)}))}function p(){n(0,o=!1)}function $(){n(0,o=!0),n(1,l=[]),S()}function O(B){B.key==="Shift"&&(a=!0),B.key==="Escape"&&$()}function k(B){B.key==="Shift"&&(a=!1)}function C(){if(l.length<2){S();return}const B=l.map(N=>[N.lngLat.lng,N.lngLat.lat]);n(2,i=Gr(B,{})),i.properties&&n(2,i.properties.length=(lo(i)*1e3).toFixed(2),i),n(3,f=JSON.parse(JSON.stringify(i)))}function S(){n(2,i=void 0),n(3,f=wt())}rt(()=>{t.on("click",u)}),jt(()=>{t.off("click",u)});function E(B,N){r.$$.not_equal(N.lngLat,B)&&(N.lngLat=B,n(1,l))}return[o,l,i,f,p,$,O,k,C,E]}class Zs extends z{constructor(e){super(),q(this,e,Js,Ys,G,{})}}function Qs(r){let e;return{c(){e=w(`Open Government License
  `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function xs(r){let e,n,t,o,l;return t=new V({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Qs]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("License: "),h(t.$$.fragment),o=w(`. Contains OS data © Crown copyright and database right
  2023.`)},m(i,a){g(i,e,a),y(e,n),b(t,e,null),y(e,o),l=!0},p(i,[a]){const s={};a&1&&(s.$$scope={dirty:a,ctx:i}),t.$set(s)},i(i){l||(m(t.$$.fragment,i),l=!0)},o(i){_(t.$$.fragment,i),l=!1},d(i){i&&d(e),v(t)}}}class Fe extends z{constructor(e){super(),q(this,e,null,xs,G,{})}}function Fn(r,e,n){const t=r.slice();return t[2]=e[n],t}function jn(r,e,n){const t=r.slice();return t[5]=e[n],t}function Bn(r){let e,n;return{c(){e=L("span"),n=w(` 
    `),Ie(e,"background",r[5]),Ie(e,"width","100%"),Ie(e,"border","1px solid black")},m(t,o){g(t,e,o),y(e,n)},p(t,o){o&1&&Ie(e,"background",t[5])},d(t){t&&d(e)}}}function Hn(r){let e,n=r[2]+"",t;return{c(){e=L("span"),t=w(n)},m(o,l){g(o,e,l),y(e,t)},p(o,l){l&2&&n!==(n=o[2]+"")&&R(t,n)},d(o){o&&d(e)}}}function ei(r){let e,n,t,o=Ne(r[0]),l=[];for(let s=0;s<o.length;s+=1)l[s]=Bn(jn(r,o,s));let i=Ne(r[1]),a=[];for(let s=0;s<i.length;s+=1)a[s]=Hn(Fn(r,i,s));return{c(){e=L("div");for(let s=0;s<l.length;s+=1)l[s].c();n=T(),t=L("div");for(let s=0;s<a.length;s+=1)a[s].c();Ie(e,"display","flex"),Ie(t,"display","flex"),Ie(t,"justify-content","space-between")},m(s,f){g(s,e,f);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(e,null);g(s,n,f),g(s,t,f);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(t,null)},p(s,[f]){if(f&1){o=Ne(s[0]);let u;for(u=0;u<o.length;u+=1){const c=jn(s,o,u);l[u]?l[u].p(c,f):(l[u]=Bn(c),l[u].c(),l[u].m(e,null))}for(;u<l.length;u+=1)l[u].d(1);l.length=o.length}if(f&2){i=Ne(s[1]);let u;for(u=0;u<i.length;u+=1){const c=Fn(s,i,u);a[u]?a[u].p(c,f):(a[u]=Hn(c),a[u].c(),a[u].m(t,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=i.length}},i:Q,o:Q,d(s){s&&(d(e),d(n),d(t)),kt(l,s),kt(a,s)}}}function ti(r,e,n){let{colorScale:t}=e,{limits:o}=e;return r.$$set=l=>{"colorScale"in l&&n(0,t=l.colorScale),"limits"in l&&n(1,o=l.limits)},[t,o]}class ze extends z{constructor(e){super(),q(this,e,ti,ei,G,{colorScale:0,limits:1})}}function Rn(r){const e=r[14][0].properties.OA21CD;r[15]=e;const n=r[14][0].properties[r[3]];r[16]=n}function ni(r){let e;return{c(){e=w("Percent of households with a car")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function ri(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function oi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function li(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function si(r){let e,n,t,o,l,i,a,s,f,u,c,p;return t=new V({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ri]},$$scope:{ctx:r}}}),l=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[oi]},$$scope:{ctx:r}}}),u=new V({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[li]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),o=w(". Output area boundaries from "),h(l.$$.fragment),i=w("."),a=T(),s=L("p"),f=w("License: "),h(u.$$.fragment),c=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m($,O){g($,e,O),y(e,n),b(t,e,null),y(e,o),b(l,e,null),y(e,i),g($,a,O),g($,s,O),y(s,f),b(u,s,null),y(s,c),p=!0},p($,O){const k={};O&131072&&(k.$$scope={dirty:O,ctx:$}),t.$set(k);const C={};O&131072&&(C.$$scope={dirty:O,ctx:$}),l.$set(C);const S={};O&131072&&(S.$$scope={dirty:O,ctx:$}),u.$set(S)},i($){p||(m(t.$$.fragment,$),m(l.$$.fragment,$),m(u.$$.fragment,$),p=!0)},o($){_(t.$$.fragment,$),_(l.$$.fragment,$),_(u.$$.fragment,$),p=!1},d($){$&&(d(e),d(a),d(s)),v(t),v(l),v(u)}}}function ii(r){let e,n,t;return n=new oe({props:{$$slots:{default:[si]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){g(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&131072&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function Wn(r){let e,n;return e=new ze({props:{colorScale:r[5],limits:r[7]()}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:Q,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ai(r){let e;return{c(){e=w("Average cars per household")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function fi(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function ui(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function ci(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function pi(r){let e,n,t,o,l,i,a,s,f,u,c,p,$,O;return l=new V({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[fi]},$$scope:{ctx:r}}}),a=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ui]},$$scope:{ctx:r}}}),p=new V({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ci]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=T(),t=L("p"),o=w("Car/van availability data is from the 2021 census, via "),h(l.$$.fragment),i=w(". Output area boundaries from "),h(a.$$.fragment),s=w("."),f=T(),u=L("p"),c=w("License: "),h(p.$$.fragment),$=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(k,C){g(k,e,C),g(k,n,C),g(k,t,C),y(t,o),b(l,t,null),y(t,i),b(a,t,null),y(t,s),g(k,f,C),g(k,u,C),y(u,c),b(p,u,null),y(u,$),O=!0},p(k,C){const S={};C&131072&&(S.$$scope={dirty:C,ctx:k}),l.$set(S);const E={};C&131072&&(E.$$scope={dirty:C,ctx:k}),a.$set(E);const B={};C&131072&&(B.$$scope={dirty:C,ctx:k}),p.$set(B)},i(k){O||(m(l.$$.fragment,k),m(a.$$.fragment,k),m(p.$$.fragment,k),O=!0)},o(k){_(l.$$.fragment,k),_(a.$$.fragment,k),_(p.$$.fragment,k),O=!1},d(k){k&&(d(e),d(n),d(t),d(f),d(u)),v(l),v(a),v(p)}}}function $i(r){let e,n,t;return n=new oe({props:{$$slots:{default:[pi]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){g(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&131072&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function Un(r){let e,n;return e=new ze({props:{colorScale:r[5],limits:r[7]()}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:Q,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mi(r){let e;return{c(){e=w("Population density")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function gi(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function di(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function _i(r){let e,n,t,o,l,i,a,s,f;return t=new V({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[gi]},$$scope:{ctx:r}}}),l=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[di]},$$scope:{ctx:r}}}),s=new Fe({}),{c(){e=L("p"),n=w("Population density data is from the 2021 census, via "),h(t.$$.fragment),o=w(". Output area boundaries from "),h(l.$$.fragment),i=w("."),a=T(),h(s.$$.fragment)},m(u,c){g(u,e,c),y(e,n),b(t,e,null),y(e,o),b(l,e,null),y(e,i),g(u,a,c),b(s,u,c),f=!0},p(u,c){const p={};c&131072&&(p.$$scope={dirty:c,ctx:u}),t.$set(p);const $={};c&131072&&($.$$scope={dirty:c,ctx:u}),l.$set($)},i(u){f||(m(t.$$.fragment,u),m(l.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),_(l.$$.fragment,u),_(s.$$.fragment,u),f=!1},d(u){u&&(d(e),d(a)),v(t),v(l),v(s,u)}}}function hi(r){let e,n,t;return n=new oe({props:{$$slots:{default:[_i]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){g(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&131072&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function Gn(r){let e,n,t,o;return t=new ze({props:{colorScale:r[5],limits:r[7]().map(Oi)}}),{c(){e=L("p"),e.textContent="(people per square kilometres)",n=T(),h(t.$$.fragment)},m(l,i){g(l,e,i),g(l,n,i),b(t,l,i),o=!0},p:Q,i(l){o||(m(t.$$.fragment,l),o=!0)},o(l){_(t.$$.fragment,l),o=!1},d(l){l&&(d(e),d(n)),v(t,l)}}}function bi(r){let e,n,t,o=r[16].toLocaleString()+"",l,i,a=r[15]+"",s;return{c(){e=L("p"),n=w("There are "),t=L("b"),l=w(o),i=w(`
          people per square kilometre in `),s=w(a)},m(f,u){g(f,e,u),y(e,n),y(e,t),y(t,l),y(e,i),y(e,s)},p(f,u){u&16392&&o!==(o=f[16].toLocaleString()+"")&&R(l,o),u&16384&&a!==(a=f[15]+"")&&R(s,a)},d(f){f&&d(e)}}}function vi(r){let e,n,t=r[15]+"",o,l,i,a=r[16]+"",s,f;return{c(){e=L("p"),n=w("Households in "),o=w(t),l=w(` have an average of
          `),i=L("b"),s=w(a),f=w(`
          cars`)},m(u,c){g(u,e,c),y(e,n),y(e,o),y(e,l),y(e,i),y(i,s),y(e,f)},p(u,c){c&16384&&t!==(t=u[15]+"")&&R(o,t),c&16392&&a!==(a=u[16]+"")&&R(s,a)},d(u){u&&d(e)}}}function wi(r){let e,n,t=r[16]+"",o,l,i,a=r[15]+"",s,f;return{c(){e=L("p"),n=L("b"),o=w(t),l=w("%"),i=w(`
          of households in `),s=w(a),f=w(" have 1 or more cars")},m(u,c){g(u,e,c),y(e,n),y(n,o),y(n,l),y(e,i),y(e,s),y(e,f)},p(u,c){c&16392&&t!==(t=u[16]+"")&&R(o,t),c&16384&&a!==(a=u[15]+"")&&R(s,a)},d(u){u&&d(e)}}}function ki(r){Rn(r);let e;function n(l,i){return l[3]=="percent_households_with_car"?wi:l[3]=="average_cars_per_household"?vi:bi}let t=n(r),o=t(r);return{c(){o.c(),e=ve()},m(l,i){o.m(l,i),g(l,e,i)},p(l,i){Rn(l),t===(t=n(l))&&o?o.p(l,i):(o.d(1),o=t(l),o&&(o.c(),o.m(e.parentNode,e)))},d(l){l&&d(e),o.d(l)}}}function yi(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[ki,({features:t})=>({14:t}),({features:t})=>t?16384:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&147464&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Si(r){let e,n,t,o;return e=new Ge({props:{id:Ct,sourceLayer:Ct,paint:{"fill-color":Ae(["get",r[3]],r[7](),r[5]),"fill-opacity":ie(.5,.7)},layout:{visibility:r[3]!=""?"visible":"none"},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[yi]},$$scope:{ctx:r}}}),e.$on("click",r[6]),t=new me({props:{id:r[4],paint:{"line-color":"black","line-width":.5},layout:{visibility:r[3]!=""?"visible":"none"}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(l,i){b(e,l,i),g(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&8&&(a.paint={"fill-color":Ae(["get",l[3]],l[7](),l[5]),"fill-opacity":ie(.5,.7)}),i&8&&(a.layout={visibility:l[3]!=""?"visible":"none"}),i&131080&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&8&&(s.layout={visibility:l[3]!=""?"visible":"none"}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function Ci(r){let e,n,t,o,l,i,a,s,f,u,c,p,$,O;function k(P){r[8](P)}let C={id:"percent_households_with_car",$$slots:{right:[ii],default:[ni]},$$scope:{ctx:r}};r[0]!==void 0&&(C.checked=r[0]),e=new te({props:C}),X.push(()=>Y(e,"checked",k)),e.$on("change",r[9]);let S=r[3]=="percent_households_with_car"&&Wn(r);function E(P){r[10](P)}let B={id:"average_cars_per_household",$$slots:{right:[$i],default:[ai]},$$scope:{ctx:r}};r[1]!==void 0&&(B.checked=r[1]),l=new te({props:B}),X.push(()=>Y(l,"checked",E)),l.$on("change",r[11]);let N=r[3]=="average_cars_per_household"&&Un(r);function I(P){r[12](P)}let D={id:"population_density",$$slots:{right:[hi],default:[mi]},$$scope:{ctx:r}};r[2]!==void 0&&(D.checked=r[2]),f=new te({props:D}),X.push(()=>Y(f,"checked",I)),f.$on("change",r[13]);let A=r[3]=="population_density"&&Gn(r);return $=new $e({props:{url:`pmtiles://${ae()}/v1/${Ct}.pmtiles`,$$slots:{default:[Si]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),S&&S.c(),o=T(),h(l.$$.fragment),a=T(),N&&N.c(),s=T(),h(f.$$.fragment),c=T(),A&&A.c(),p=T(),h($.$$.fragment)},m(P,M){b(e,P,M),g(P,t,M),S&&S.m(P,M),g(P,o,M),b(l,P,M),g(P,a,M),N&&N.m(P,M),g(P,s,M),b(f,P,M),g(P,c,M),A&&A.m(P,M),g(P,p,M),b($,P,M),O=!0},p(P,[M]){const H={};M&131072&&(H.$$scope={dirty:M,ctx:P}),!n&&M&1&&(n=!0,H.checked=P[0],J(()=>n=!1)),e.$set(H),P[3]=="percent_households_with_car"?S?(S.p(P,M),M&8&&m(S,1)):(S=Wn(P),S.c(),m(S,1),S.m(o.parentNode,o)):S&&(ne(),_(S,1,1,()=>{S=null}),re());const F={};M&131072&&(F.$$scope={dirty:M,ctx:P}),!i&&M&2&&(i=!0,F.checked=P[1],J(()=>i=!1)),l.$set(F),P[3]=="average_cars_per_household"?N?(N.p(P,M),M&8&&m(N,1)):(N=Un(P),N.c(),m(N,1),N.m(s.parentNode,s)):N&&(ne(),_(N,1,1,()=>{N=null}),re());const W={};M&131072&&(W.$$scope={dirty:M,ctx:P}),!u&&M&4&&(u=!0,W.checked=P[2],J(()=>u=!1)),f.$set(W),P[3]=="population_density"?A?(A.p(P,M),M&8&&m(A,1)):(A=Gn(P),A.c(),m(A,1),A.m(p.parentNode,p)):A&&(ne(),_(A,1,1,()=>{A=null}),re());const U={};M&131080&&(U.$$scope={dirty:M,ctx:P}),$.$set(U)},i(P){O||(m(e.$$.fragment,P),m(S),m(l.$$.fragment,P),m(N),m(f.$$.fragment,P),m(A),m($.$$.fragment,P),O=!0)},o(P){_(e.$$.fragment,P),_(S),_(l.$$.fragment,P),_(N),_(f.$$.fragment,P),_(A),_($.$$.fragment,P),O=!1},d(P){P&&(d(t),d(o),d(a),d(s),d(c),d(p)),v(e,P),S&&S.d(P),v(l,P),N&&N.d(P),v(f,P),A&&A.d(P),v($,P)}}}let Ct="census_output_areas";const Oi=r=>r.toLocaleString();function Ti(r,e,n){let t=`${Ct}-outline`,o=Z.sequential_low_to_high,l=!1,i=!1,a=!1,s="";function f(S){let E=S.detail.features[0].properties.OA21CD;s=="percent_households_with_car"||s=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${E}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${E}`,"_blank")}function u(){return s=="percent_households_with_car"?[0,20,40,60,80,100]:s=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function c(S){l=S,n(0,l)}const p=()=>{n(1,i=!1),n(2,a=!1)};function $(S){i=S,n(1,i)}const O=()=>{n(0,l=!1),n(2,a=!1)};function k(S){a=S,n(2,a)}const C=()=>{n(0,l=!1),n(1,i=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,s="percent_households_with_car"):i?n(3,s="average_cars_per_household"):a?n(3,s="population_density"):n(3,s=""))},[l,i,a,s,t,o,f,u,c,p,$,O,k,C]}class Li extends z{constructor(e){super(),q(this,e,Ti,Ci,G,{})}}function Ai(r){let e,n,t;return e=new we({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Combined authorities`)},m(o,l){b(e,o,l),g(o,n,l),t=!0},p:Q,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function Pi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Ei(r){let e,n,t,o,l,i,a;return t=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Pi]},$$scope:{ctx:r}}}),i=new Fe({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),o=w(", as of December 2022."),l=T(),h(i.$$.fragment)},m(s,f){g(s,e,f),y(e,n),b(t,e,null),y(e,o),g(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function Ni(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Ei]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){g(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function Ii(r){let e,n=r[4][0].properties.name+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){g(o,e,l),y(e,t)},p(o,l){l&16&&n!==(n=o[4][0].properties.name+"")&&R(t,n)},d(o){o&&d(e)}}}function Di(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[Ii,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&48&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mi(r){let e,n,t,o;return e=new Ge({props:{id:Ot,paint:{"fill-color":r[1],"fill-opacity":ie(0,.5)},layout:{visibility:r[0]?"visible":"none"},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[Di]},$$scope:{ctx:r}}}),e.$on("click",ji),t=new me({props:{id:r[2],paint:{"line-color":r[1],"line-width":2.5},layout:{visibility:r[0]?"visible":"none"}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(l,i){b(e,l,i),g(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&1&&(a.layout={visibility:l[0]?"visible":"none"}),i&32&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&1&&(s.layout={visibility:l[0]?"visible":"none"}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function Fi(r){let e,n,t,o,l;function i(s){r[3](s)}let a={id:Ot,$$slots:{right:[Ni],default:[Ai]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new te({props:a}),X.push(()=>Y(e,"checked",i)),o=new dt({props:{data:`${ae()}/v1/${Ot}.geojson`,$$slots:{default:[Mi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment)},m(s,f){b(e,s,f),g(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&33&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let Ot="combined_authorities";function ji(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Bi(r,e,n){let t=Z.combined_authorities,o=`${Ot}-outline`,l=!1;function i(a){l=a,n(0,l)}return[l,t,o,i]}class Hi extends z{constructor(e){super(),q(this,e,Bi,Fi,G,{})}}function zn(r){const e=r[5][0].properties;r[6]=e}function Ri(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Wi(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Ui(r){let e;return{c(){e=w(`here
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Gi(r){let e,n,t,o,l,i,a,s,f;return t=new V({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Wi]},$$scope:{ctx:r}}}),l=new V({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Ui]},$$scope:{ctx:r}}}),s=new Fe({}),{c(){e=L("p"),n=w("The 2019 English IMD scores come from "),h(t.$$.fragment),o=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(l.$$.fragment),i=w("."),a=T(),h(s.$$.fragment)},m(u,c){g(u,e,c),y(e,n),b(t,e,null),y(e,o),b(l,e,null),y(e,i),g(u,a,c),b(s,u,c),f=!0},p(u,c){const p={};c&128&&(p.$$scope={dirty:c,ctx:u}),t.$set(p);const $={};c&128&&($.$$scope={dirty:c,ctx:u}),l.$set($)},i(u){f||(m(t.$$.fragment,u),m(l.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),_(l.$$.fragment,u),_(s.$$.fragment,u),f=!1},d(u){u&&(d(e),d(a)),v(t),v(l),v(s,u)}}}function zi(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Gi]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){g(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&128&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function qn(r){let e,n;return e=new ze({props:{colorScale:r[2],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:Q,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qi(r){zn(r);let e,n=r[6].LSOA11CD+"",t,o,l,i=r[6].score+"",a,s,f,u,c,p=r[6].rank.toLocaleString()+"",$,O;return{c(){e=L("p"),t=w(n),o=w(` has an IMD score of
        `),l=L("b"),a=w(i),s=T(),f=L("p"),u=w("Rank: "),c=L("b"),$=w(p),O=w(`
        / 32,844 LSOAs`)},m(k,C){g(k,e,C),y(e,t),y(e,o),y(e,l),y(l,a),g(k,s,C),g(k,f,C),y(f,u),y(f,c),y(c,$),y(f,O)},p(k,C){zn(k),C&32&&n!==(n=k[6].LSOA11CD+"")&&R(t,n),C&32&&i!==(i=k[6].score+"")&&R(a,i),C&32&&p!==(p=k[6].rank.toLocaleString()+"")&&R($,p)},d(k){k&&(d(e),d(s),d(f))}}}function Vi(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[qi,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&160&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xi(r){let e,n,t,o;return e=new Ge({props:{id:ut,sourceLayer:ut,paint:{"fill-color":Ae(["-",10,["get","decile"]],r[3],r[2]),"fill-opacity":ie(.5,.7)},layout:{visibility:r[0]?"visible":"none"},manageHoverState:!0,$$slots:{default:[Vi]},$$scope:{ctx:r}}}),t=new me({props:{id:r[1],paint:{"line-color":"black","line-width":.5},layout:{visibility:r[0]?"visible":"none"}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(l,i){b(e,l,i),g(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&1&&(a.layout={visibility:l[0]?"visible":"none"}),i&128&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&1&&(s.layout={visibility:l[0]?"visible":"none"}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function Ki(r){let e,n,t,o,l,i;function a(u){r[4](u)}let s={id:ut,$$slots:{right:[zi],default:[Ri]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new te({props:s}),X.push(()=>Y(e,"checked",a));let f=r[0]&&qn(r);return l=new $e({props:{url:`pmtiles://${ae()}/v1/${ut}.pmtiles`,$$slots:{default:[Xi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),f&&f.c(),o=T(),h(l.$$.fragment)},m(u,c){b(e,u,c),g(u,t,c),f&&f.m(u,c),g(u,o,c),b(l,u,c),i=!0},p(u,[c]){const p={};c&128&&(p.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,p.checked=u[0],J(()=>n=!1)),e.$set(p),u[0]?f?(f.p(u,c),c&1&&m(f,1)):(f=qn(u),f.c(),m(f,1),f.m(o.parentNode,o)):f&&(ne(),_(f,1,1,()=>{f=null}),re());const $={};c&129&&($.$$scope={dirty:c,ctx:u}),l.$set($)},i(u){i||(m(e.$$.fragment,u),m(f),m(l.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),_(f),_(l.$$.fragment,u),i=!1},d(u){u&&(d(t),d(o)),v(e,u),f&&f.d(u),v(l,u)}}}let ut="imd";function Yi(r,e,n){let t=`${ut}-outline`,o=Z.sequential_low_to_high,l=[0,2,4,6,8,10],i=!1;function a(s){i=s,n(0,i)}return[i,t,o,l,a]}class Ji extends z{constructor(e){super(),q(this,e,Yi,Ki,G,{})}}function Zi(r){let e,n,t;return e=new we({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(o,l){b(e,o,l),g(o,n,l),t=!0},p:Q,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function Qi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function xi(r){let e,n,t,o,l,i,a;return t=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Qi]},$$scope:{ctx:r}}}),i=new Fe({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),o=w(", as of May 2023."),l=T(),h(i.$$.fragment)},m(s,f){g(s,e,f),y(e,n),b(t,e,null),y(e,o),g(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function ea(r){let e,n,t;return n=new oe({props:{$$slots:{default:[xi]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){g(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function ta(r){let e,n=r[4][0].properties.name+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){g(o,e,l),y(e,t)},p(o,l){l&16&&n!==(n=o[4][0].properties.name+"")&&R(t,n)},d(o){o&&d(e)}}}function na(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[ta,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&48&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ra(r){let e,n,t,o;return e=new Ge({props:{id:Tt,paint:{"fill-color":r[1],"fill-opacity":ie(0,.5)},layout:{visibility:r[0]?"visible":"none"},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[na]},$$scope:{ctx:r}}}),e.$on("click",la),t=new me({props:{id:r[2],paint:{"line-color":r[1],"line-width":2.5},layout:{visibility:r[0]?"visible":"none"}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(l,i){b(e,l,i),g(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&1&&(a.layout={visibility:l[0]?"visible":"none"}),i&32&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&1&&(s.layout={visibility:l[0]?"visible":"none"}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function oa(r){let e,n,t,o,l;function i(s){r[3](s)}let a={id:Tt,$$slots:{right:[ea],default:[Zi]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new te({props:a}),X.push(()=>Y(e,"checked",i)),o=new dt({props:{data:`${ae()}/v1/${Tt}.geojson`,$$slots:{default:[ra]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment)},m(s,f){b(e,s,f),g(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&33&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let Tt="local_authority_districts";function la(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function sa(r,e,n){let t=Z.local_authority_districts,o=`${Tt}-outline`,l=!1;function i(a){l=a,n(0,l)}return[l,t,o,i]}class ia extends z{constructor(e){super(),q(this,e,sa,oa,G,{})}}function aa(r){let e,n,t;return e=new we({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(o,l){b(e,o,l),g(o,n,l),t=!0},p:Q,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function fa(r){let e;return{c(){e=w(`local authority
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function ua(r){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function ca(r){let e;return{c(){e=w(`development corporation
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function pa(r){let e;return{c(){e=w("this map")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function $a(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function ma(r){let e,n,t,o,l,i,a,s,f,u,c,p,$,O,k,C,S,E,B,N,I,D;return t=new V({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[fa]},$$scope:{ctx:r}}}),l=new V({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ua]},$$scope:{ctx:r}}}),a=new V({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[ca]},$$scope:{ctx:r}}}),$=new V({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[pa]},$$scope:{ctx:r}}}),E=new V({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[$a]},$$scope:{ctx:r}}}),I=new Fe({}),{c(){e=L("p"),n=w("LPAs may be a "),h(t.$$.fragment),o=w(", "),h(l.$$.fragment),i=w("y, or "),h(a.$$.fragment),s=w("."),f=T(),u=L("p"),c=L("strong"),p=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h($.$$.fragment),O=w(" to get more details."),k=T(),C=L("p"),S=w("Data from ONS Geography via "),h(E.$$.fragment),B=w(", as of November 2022."),N=T(),h(I.$$.fragment)},m(A,P){g(A,e,P),y(e,n),b(t,e,null),y(e,o),b(l,e,null),y(e,i),b(a,e,null),y(e,s),g(A,f,P),g(A,u,P),y(u,c),y(c,p),b($,c,null),y(c,O),g(A,k,P),g(A,C,P),y(C,S),b(E,C,null),y(C,B),g(A,N,P),b(I,A,P),D=!0},p(A,P){const M={};P&32&&(M.$$scope={dirty:P,ctx:A}),t.$set(M);const H={};P&32&&(H.$$scope={dirty:P,ctx:A}),l.$set(H);const F={};P&32&&(F.$$scope={dirty:P,ctx:A}),a.$set(F);const W={};P&32&&(W.$$scope={dirty:P,ctx:A}),$.$set(W);const U={};P&32&&(U.$$scope={dirty:P,ctx:A}),E.$set(U)},i(A){D||(m(t.$$.fragment,A),m(l.$$.fragment,A),m(a.$$.fragment,A),m($.$$.fragment,A),m(E.$$.fragment,A),m(I.$$.fragment,A),D=!0)},o(A){_(t.$$.fragment,A),_(l.$$.fragment,A),_(a.$$.fragment,A),_($.$$.fragment,A),_(E.$$.fragment,A),_(I.$$.fragment,A),D=!1},d(A){A&&(d(e),d(f),d(u),d(k),d(C),d(N)),v(t),v(l),v(a),v($),v(E),v(I,A)}}}function ga(r){let e,n,t;return n=new oe({props:{$$slots:{default:[ma]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){g(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function da(r){let e,n=r[4][0].properties.name+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){g(o,e,l),y(e,t)},p(o,l){l&16&&n!==(n=o[4][0].properties.name+"")&&R(t,n)},d(o){o&&d(e)}}}function _a(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[da,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&48&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ha(r){let e,n,t,o;return e=new Ge({props:{id:Qe,sourceLayer:Qe,paint:{"fill-color":r[1],"fill-opacity":ie(0,.5)},layout:{visibility:r[0]?"visible":"none"},manageHoverState:!0,$$slots:{default:[_a]},$$scope:{ctx:r}}}),t=new me({props:{id:r[2],sourceLayer:Qe,paint:{"line-color":r[1],"line-width":2.5},layout:{visibility:r[0]?"visible":"none"}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(l,i){b(e,l,i),g(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&1&&(a.layout={visibility:l[0]?"visible":"none"}),i&32&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&1&&(s.layout={visibility:l[0]?"visible":"none"}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function ba(r){let e,n,t,o,l;function i(s){r[3](s)}let a={id:Qe,$$slots:{right:[ga],default:[aa]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new te({props:a}),X.push(()=>Y(e,"checked",i)),o=new $e({props:{url:`pmtiles://${ae()}/v1/${Qe}.pmtiles`,$$slots:{default:[ha]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment)},m(s,f){b(e,s,f),g(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&33&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let Qe="local_planning_authorities";function va(r,e,n){let t=Z.local_planning_authorities,o=`${Qe}-outline`,l=!1;function i(a){l=a,n(0,l)}return[l,t,o,i]}class wa extends z{constructor(e){super(),q(this,e,va,ba,G,{})}}function ka(r){let e,n,t;return e=new we({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(o,l){b(e,o,l),g(o,n,l),t=!0},p:Q,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function ya(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Sa(r){let e,n,t,o,l,i,a;return t=new V({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[ya]},$$scope:{ctx:r}}}),i=new Fe({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),o=w(", as of May 2023."),l=T(),h(i.$$.fragment)},m(s,f){g(s,e,f),y(e,n),b(t,e,null),y(e,o),g(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function Ca(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Sa]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){g(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function Oa(r){let e,n=r[4][0].properties.Name+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){g(o,e,l),y(e,t)},p(o,l){l&16&&n!==(n=o[4][0].properties.Name+"")&&R(t,n)},d(o){o&&d(e)}}}function Ta(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[Oa,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&48&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function La(r){let e,n,t,o;return e=new Ge({props:{id:xe,sourceLayer:xe,paint:{"fill-color":r[1],"fill-opacity":ie(0,.5)},layout:{visibility:r[0]?"visible":"none"},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[Ta]},$$scope:{ctx:r}}}),e.$on("click",Pa),t=new me({props:{id:r[2],sourceLayer:xe,paint:{"line-color":r[1],"line-width":5},layout:{visibility:r[0]?"visible":"none"}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(l,i){b(e,l,i),g(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&1&&(a.layout={visibility:l[0]?"visible":"none"}),i&32&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&1&&(s.layout={visibility:l[0]?"visible":"none"}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function Aa(r){let e,n,t,o,l;function i(s){r[3](s)}let a={id:xe,$$slots:{right:[Ca],default:[ka]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new te({props:a}),X.push(()=>Y(e,"checked",i)),o=new $e({props:{url:`pmtiles://${ae()}/v1/${xe}.pmtiles`,$$slots:{default:[La]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment)},m(s,f){b(e,s,f),g(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&33&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let xe="parliamentary_constituencies";function Pa(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Ea(r,e,n){let t=Z.parliamentary_constituencies,o=`${xe}-outline`,l=!1;function i(a){l=a,n(0,l)}return[l,t,o,i]}class Na extends z{constructor(e){super(),q(this,e,Ea,Aa,G,{})}}function Ia(r){let e,n,t;return e=new we({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Wards`)},m(o,l){b(e,o,l),g(o,n,l),t=!0},p:Q,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function Da(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Ma(r){let e,n,t,o,l,i,a;return t=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Da]},$$scope:{ctx:r}}}),i=new Fe({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),o=w(", as of May 2023."),l=T(),h(i.$$.fragment)},m(s,f){g(s,e,f),y(e,n),b(t,e,null),y(e,o),g(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function Fa(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Ma]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){g(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function ja(r){let e,n=r[4][0].properties.name+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){g(o,e,l),y(e,t)},p(o,l){l&16&&n!==(n=o[4][0].properties.name+"")&&R(t,n)},d(o){o&&d(e)}}}function Ba(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[ja,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&48&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ha(r){let e,n,t,o;return e=new Ge({props:{id:et,sourceLayer:et,paint:{"fill-color":r[1],"fill-opacity":ie(0,.5)},layout:{visibility:r[0]?"visible":"none"},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[Ba]},$$scope:{ctx:r}}}),e.$on("click",Wa),t=new me({props:{id:r[2],sourceLayer:et,paint:{"line-color":r[1],"line-width":2.5},layout:{visibility:r[0]?"visible":"none"}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(l,i){b(e,l,i),g(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&1&&(a.layout={visibility:l[0]?"visible":"none"}),i&32&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&1&&(s.layout={visibility:l[0]?"visible":"none"}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function Ra(r){let e,n,t,o,l;function i(s){r[3](s)}let a={id:et,$$slots:{right:[Fa],default:[Ia]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new te({props:a}),X.push(()=>Y(e,"checked",i)),o=new $e({props:{url:`pmtiles://${ae()}/v1/${et}.pmtiles`,$$slots:{default:[Ha]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment)},m(s,f){b(e,s,f),g(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&33&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let et="wards";function Wa(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Ua(r,e,n){let t=Z.wards,o=`${et}-outline`,l=!1;function i(a){l=a,n(0,l)}return[l,t,o,i]}class Ga extends z{constructor(e){super(),q(this,e,Ua,Ra,G,{})}}function za(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function qa(r){let e,n,t,o;return t=new V({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[za]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("License: "),h(t.$$.fragment)},m(l,i){g(l,e,i),y(e,n),b(t,e,null),o=!0},p(l,[i]){const a={};i&1&&(a.$$scope={dirty:i,ctx:l}),t.$set(a)},i(l){o||(m(t.$$.fragment,l),o=!0)},o(l){_(t.$$.fragment,l),o=!1},d(l){l&&d(e),v(t)}}}class qe extends z{constructor(e){super(),q(this,e,null,qa,G,{})}}function Va(r){let e,n,t;return e=new we({props:{color:Z.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=w(`
  Bus routes`)},m(o,l){b(e,o,l),g(o,n,l),t=!0},p:Q,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function Xa(r){let e;return{c(){e=w(`GTFS
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Ka(r){let e,n,t,o,l,i,a,s,f;return l=new V({props:{href:"https://gtfs.org",$$slots:{default:[Xa]},$$scope:{ctx:r}}}),s=new qe({}),{c(){e=L("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=T(),t=L("p"),o=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(l.$$.fragment),i=w(`, and doesn't include which routes are run or the
        frequency of service.`),a=T(),h(s.$$.fragment)},m(u,c){g(u,e,c),g(u,n,c),g(u,t,c),y(t,o),b(l,t,null),y(t,i),g(u,a,c),b(s,u,c),f=!0},p(u,c){const p={};c&8&&(p.$$scope={dirty:c,ctx:u}),l.$set(p)},i(u){f||(m(l.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){_(l.$$.fragment,u),_(s.$$.fragment,u),f=!1},d(u){u&&(d(e),d(n),d(t),d(a)),v(l),v(s,u)}}}function Ya(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Ka]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){g(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&8&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function Ja(r){let e;return{c(){e=L("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Za(r){let e;return{c(){e=L("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Qa(r){let e;function n(l,i){return l[2][0].properties.has_bus_lane?Za:Ja}let t=n(r),o=t(r);return{c(){o.c(),e=ve()},m(l,i){o.m(l,i),g(l,e,i)},p(l,i){t!==(t=n(l))&&(o.d(1),o=t(l),o&&(o.c(),o.m(e.parentNode,e)))},d(l){l&&d(e),o.d(l)}}}function xa(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[Qa,({features:t})=>({2:t}),({features:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&12&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ef(r){let e,n;return e=new me({props:{id:Lt,sourceLayer:Lt,paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Z.bus_route_with_lane,Z.bus_route_without_lane],"line-width":5,"line-opacity":ie(1,.5)},layout:{visibility:r[0]?"visible":"none"},$$slots:{default:[xa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1&&(l.layout={visibility:t[0]?"visible":"none"}),o&8&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function tf(r){let e,n,t,o,l;function i(s){r[1](s)}let a={id:Lt,$$slots:{right:[Ya],default:[Va]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new te({props:a}),X.push(()=>Y(e,"checked",i)),o=new $e({props:{url:`pmtiles://${ae()}/v1/${Lt}.pmtiles`,$$slots:{default:[ef]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment)},m(s,f){b(e,s,f),g(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&8&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&9&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let Lt="bus_routes";function nf(r,e,n){let t=!1;function o(l){t=l,n(0,t)}return[t,o]}class rf extends z{constructor(e){super(),q(this,e,nf,tf,G,{})}}function Vn(r){const e=pf(r[3][0]);r[4]=e[0],r[5]=e[1],r[6]=e[2]}function Xn(r,e,n){const t=r.slice();return t[7]=e[n][0],t[8]=e[n][1],t}function of(r){let e;return{c(){e=w("Cycle paths")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function lf(r){let e,n,t,o,l,i,a,s;return a=new qe({}),{c(){e=L("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=T(),t=L("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,o=T(),l=L("p"),l.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=T(),h(a.$$.fragment)},m(f,u){g(f,e,u),g(f,n,u),g(f,t,u),g(f,o,u),g(f,l,u),g(f,i,u),b(a,f,u),s=!0},p:Q,i(f){s||(m(a.$$.fragment,f),s=!0)},o(f){_(a.$$.fragment,f),s=!1},d(f){f&&(d(e),d(n),d(t),d(o),d(l),d(i)),v(a,f)}}}function sf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[lf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){g(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&2048&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function Kn(r){let e,n,t=Ne(r[1]),o=[];for(let i=0;i<t.length;i+=1)o[i]=Yn(Xn(r,t,i));const l=i=>_(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=ve()},m(i,a){for(let s=0;s<o.length;s+=1)o[s]&&o[s].m(i,a);g(i,e,a),n=!0},p(i,a){if(a&2){t=Ne(i[1]);let s;for(s=0;s<t.length;s+=1){const f=Xn(i,t,s);o[s]?(o[s].p(f,a),m(o[s],1)):(o[s]=Yn(f),o[s].c(),m(o[s],1),o[s].m(e.parentNode,e))}for(ne(),s=t.length;s<o.length;s+=1)l(s);re()}},i(i){if(!n){for(let a=0;a<t.length;a+=1)m(o[a]);n=!0}},o(i){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)_(o[a]);n=!1},d(i){i&&d(e),kt(o,i)}}}function Yn(r){let e,n,t,o=r[7]+"",l,i,a;return n=new we({props:{color:r[8]}}),{c(){e=L("div"),h(n.$$.fragment),t=T(),l=w(o),i=T()},m(s,f){g(s,e,f),b(n,e,null),y(e,t),y(e,l),y(e,i),a=!0},p:Q,i(s){a||(m(n.$$.fragment,s),a=!0)},o(s){_(n.$$.fragment,s),a=!1},d(s){s&&d(e),v(n)}}}function af(r){Vn(r);let e,n=r[4]+"",t,o,l,i,a,s=r[5]+"",f,u,c,p,$=r[6]+"",O;return{c(){e=L("h2"),t=w(n),o=T(),l=L("p"),i=w("Direction: "),a=L("b"),f=T(),u=L("p"),c=w("Width: "),p=L("b"),O=w($)},m(k,C){g(k,e,C),y(e,t),g(k,o,C),g(k,l,C),y(l,i),y(l,a),a.innerHTML=s,g(k,f,C),g(k,u,C),y(u,c),y(u,p),y(p,O)},p(k,C){Vn(k),C&8&&n!==(n=k[4]+"")&&R(t,n),C&8&&s!==(s=k[5]+"")&&(a.innerHTML=s),C&8&&$!==($=k[6]+"")&&R(O,$)},d(k){k&&(d(e),d(o),d(l),d(f),d(u))}}}function ff(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[af,({features:t})=>({3:t}),({features:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2056&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function uf(r){let e,n;return e=new me({props:{id:At,sourceLayer:At,paint:{"line-color":ur(["get","kind"],{track:Z.cycle_paths.track,lane:Z.cycle_paths.lane,shared_use_segregated:Z.cycle_paths.shared_use_segregated,shared_use_unsegregated:Z.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ue,"line-opacity":ie(1,.5)},layout:{visibility:r[0]?"visible":"none"},hoverCursor:"pointer",$$slots:{default:[ff]},$$scope:{ctx:r}}}),e.$on("click",$f),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1&&(l.layout={visibility:t[0]?"visible":"none"}),o&2048&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function cf(r){let e,n,t,o,l,i;function a(u){r[2](u)}let s={id:At,$$slots:{right:[sf],default:[of]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new te({props:s}),X.push(()=>Y(e,"checked",a));let f=r[0]&&Kn(r);return l=new $e({props:{url:`pmtiles://${ae()}/v1/${At}.pmtiles`,$$slots:{default:[uf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),f&&f.c(),o=T(),h(l.$$.fragment)},m(u,c){b(e,u,c),g(u,t,c),f&&f.m(u,c),g(u,o,c),b(l,u,c),i=!0},p(u,[c]){const p={};c&2048&&(p.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,p.checked=u[0],J(()=>n=!1)),e.$set(p),u[0]?f?(f.p(u,c),c&1&&m(f,1)):(f=Kn(u),f.c(),m(f,1),f.m(o.parentNode,o)):f&&(ne(),_(f,1,1,()=>{f=null}),re());const $={};c&2049&&($.$$scope={dirty:c,ctx:u}),l.$set($)},i(u){i||(m(e.$$.fragment,u),m(f),m(l.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),_(f),_(l.$$.fragment,u),i=!1},d(u){u&&(d(t),d(o)),v(e,u),f&&f.d(u),v(l,u)}}}let At="cycle_paths";function pf(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.properties.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.properties.direction],t=r.properties.width=="unknown"?"unknown":`${r.properties.width} meters`;return[e,`${n} ${r.properties.direction}`,t]}function $f(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function mf(r,e,n){let t=[["Separated tracks",Z.cycle_paths.track],["Unprotected lanes",Z.cycle_paths.lane],["Shared-use (segregated)",Z.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",Z.cycle_paths.shared_use_unsegregated]],o=!1;function l(i){o=i,n(0,o)}return[o,t,l]}class gf extends z{constructor(e){super(),q(this,e,mf,cf,G,{})}}function Jn(r){const e=r[3][0].properties.name??"Unknown MRN road";r[4]=e}function df(r){let e,n,t;return e=new we({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Major Road Network`)},m(o,l){b(e,o,l),g(o,n,l),t=!0},p:Q,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function _f(r){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function hf(r){let e,n,t,o,l,i,a;return t=new V({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[_f]},$$scope:{ctx:r}}}),i=new Fe({}),{c(){e=L("p"),n=w("Data from the "),h(t.$$.fragment),o=w(", as of September 2021."),l=T(),h(i.$$.fragment)},m(s,f){g(s,e,f),y(e,n),b(t,e,null),y(e,o),g(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function bf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[hf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){g(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function vf(r){Jn(r);let e,n=r[4]+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){g(o,e,l),y(e,t)},p(o,l){Jn(o),l&8&&n!==(n=o[4]+"")&&R(t,n)},d(o){o&&d(e)}}}function wf(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[vf,({features:t})=>({3:t}),({features:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&40&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function kf(r){let e,n;return e=new me({props:{id:Pt,sourceLayer:Pt,paint:{"line-color":r[1],"line-width":7,"line-opacity":ie(1,.5)},layout:{visibility:r[0]?"visible":"none"},$$slots:{default:[wf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1&&(l.layout={visibility:t[0]?"visible":"none"}),o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yf(r){let e,n,t,o,l;function i(s){r[2](s)}let a={id:Pt,$$slots:{right:[bf],default:[df]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new te({props:a}),X.push(()=>Y(e,"checked",i)),o=new $e({props:{url:`pmtiles://${ae()}/v1/${Pt}.pmtiles`,$$slots:{default:[kf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment)},m(s,f){b(e,s,f),g(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&33&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let Pt="mrn";function Sf(r,e,n){let t=Z.mrn,o=!1;function l(i){o=i,n(0,o)}return[o,t,l]}class Cf extends z{constructor(e){super(),q(this,e,Sf,yf,G,{})}}function Of(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Tf(r){let e;return{c(){e=w("the PCT website")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Lf(r){let e;return{c(){e=w("2017 journal article")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Af(r){let e,n,t,o,l,i,a,s,f,u,c;return a=new V({props:{href:"https://www.pct.bike",$$slots:{default:[Tf]},$$scope:{ctx:r}}}),f=new V({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Lf]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=T(),t=L("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,o=T(),l=L("p"),i=w("See "),h(a.$$.fragment),s=w(" and "),h(f.$$.fragment),u=w(" for details on methodology and data sources.")},m(p,$){g(p,e,$),g(p,n,$),g(p,t,$),g(p,o,$),g(p,l,$),y(l,i),b(a,l,null),y(l,s),b(f,l,null),y(l,u),c=!0},p(p,$){const O={};$&1024&&(O.$$scope={dirty:$,ctx:p}),a.$set(O);const k={};$&1024&&(k.$$scope={dirty:$,ctx:p}),f.$set(k)},i(p){c||(m(a.$$.fragment,p),m(f.$$.fragment,p),c=!0)},o(p){_(a.$$.fragment,p),_(f.$$.fragment,p),c=!1},d(p){p&&(d(e),d(n),d(t),d(o),d(l)),v(a),v(f)}}}function Pf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Af]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){g(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&1024&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function Zn(r){let e,n,t,o,l,i,a,s;e=new ze({props:{colorScale:r[3],limits:r[4]}});function f($){r[7]($)}let u={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(u.value=r[0]),t=new pr({props:u}),X.push(()=>Y(t,"value",f));function c($){r[8]($)}let p={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(p.value=r[1]),i=new yt({props:p}),X.push(()=>Y(i,"value",c)),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),l=T(),h(i.$$.fragment)},m($,O){b(e,$,O),g($,n,O),b(t,$,O),g($,l,O),b(i,$,O),s=!0},p($,O){const k={};!o&&O&1&&(o=!0,k.value=$[0],J(()=>o=!1)),t.$set(k);const C={};!a&&O&2&&(a=!0,C.value=$[1],J(()=>a=!1)),i.$set(C)},i($){s||(m(e.$$.fragment,$),m(t.$$.fragment,$),m(i.$$.fragment,$),s=!0)},o($){_(e.$$.fragment,$),_(t.$$.fragment,$),_(i.$$.fragment,$),s=!1},d($){$&&(d(n),d(l)),v(e,$),v(t,$),v(i,$)}}}function Ef(r){let e,n=r[5](r[9][0])+"",t;return{c(){e=new $r(!1),t=ve(),e.a=t},m(o,l){e.m(n,o,l),g(o,t,l)},p(o,l){l&512&&n!==(n=o[5](o[9][0])+"")&&e.p(n)},d(o){o&&(d(t),e.d())}}}function Nf(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[Ef,({features:t})=>({9:t}),({features:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1536&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function If(r){let e,n;return e=new me({props:{id:We,sourceLayer:We,paint:{"line-color":Ae(["get",r[1]],r[4],r[3]),"line-width":Ue,"line-opacity":ie(1,.5)},layout:{visibility:r[2]&&r[0]==We?"visible":"none"},$$slots:{default:[Nf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.paint={"line-color":Ae(["get",t[1]],t[4],t[3]),"line-width":Ue,"line-opacity":ie(1,.5)}),o&5&&(l.layout={visibility:t[2]&&t[0]==We?"visible":"none"}),o&1024&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Df(r){let e,n=r[5](r[9][0])+"",t;return{c(){e=new $r(!1),t=ve(),e.a=t},m(o,l){e.m(n,o,l),g(o,t,l)},p(o,l){l&512&&n!==(n=o[5](o[9][0])+"")&&e.p(n)},d(o){o&&(d(t),e.d())}}}function Mf(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[Df,({features:t})=>({9:t}),({features:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1536&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ff(r){let e,n;return e=new me({props:{id:lt,sourceLayer:lt,paint:{"line-color":Ae(["get",r[1]],r[4],r[3]),"line-width":Ue,"line-opacity":ie(1,.5)},layout:{visibility:r[2]&&r[0]==lt?"visible":"none"},$$slots:{default:[Mf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.paint={"line-color":Ae(["get",t[1]],t[4],t[3]),"line-width":Ue,"line-opacity":ie(1,.5)}),o&5&&(l.layout={visibility:t[2]&&t[0]==lt?"visible":"none"}),o&1024&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function jf(r){let e,n,t,o,l,i,a,s;function f(p){r[6](p)}let u={id:We,$$slots:{right:[Pf],default:[Of]},$$scope:{ctx:r}};r[2]!==void 0&&(u.checked=r[2]),e=new te({props:u}),X.push(()=>Y(e,"checked",f));let c=r[2]&&Zn(r);return l=new $e({props:{url:`pmtiles://${ae()}/v1/${We}.pmtiles`,$$slots:{default:[If]},$$scope:{ctx:r}}}),a=new $e({props:{url:`pmtiles://${ae()}/v1/${lt}.pmtiles`,$$slots:{default:[Ff]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),c&&c.c(),o=T(),h(l.$$.fragment),i=T(),h(a.$$.fragment)},m(p,$){b(e,p,$),g(p,t,$),c&&c.m(p,$),g(p,o,$),b(l,p,$),g(p,i,$),b(a,p,$),s=!0},p(p,[$]){const O={};$&1024&&(O.$$scope={dirty:$,ctx:p}),!n&&$&4&&(n=!0,O.checked=p[2],J(()=>n=!1)),e.$set(O),p[2]?c?(c.p(p,$),$&4&&m(c,1)):(c=Zn(p),c.c(),m(c,1),c.m(o.parentNode,o)):c&&(ne(),_(c,1,1,()=>{c=null}),re());const k={};$&1031&&(k.$$scope={dirty:$,ctx:p}),l.$set(k);const C={};$&1031&&(C.$$scope={dirty:$,ctx:p}),a.$set(C)},i(p){s||(m(e.$$.fragment,p),m(c),m(l.$$.fragment,p),m(a.$$.fragment,p),s=!0)},o(p){_(e.$$.fragment,p),_(c),_(l.$$.fragment,p),_(a.$$.fragment,p),s=!1},d(p){p&&(d(t),d(o),d(i)),v(e,p),c&&c.d(p),v(l,p),v(a,p)}}}let We="pct_commute",lt="pct_school";function Bf(r,e,n){let t=Z.sequential_low_to_high,o=[0,50,100,500,1e3,2e3],l=We,i="baseline",a=!1;function s(p){let $=p.properties.baseline,O=p.properties.gov_target,k=p.properties.go_dutch,C=`<h2>Trip purpose: ${l==We?"commuting":"school"}</h2>`;if(C+=`<p>Baseline (2011): <b>${$.toLocaleString()}</b></p>`,$==0)C+=`<p>Government target (2025): <b>${O.toLocaleString()}</b></p>`,C+=`<p>Go Dutch: <b>${k.toLocaleString()}</b></p>`;else{let S=(O/$).toFixed(1),E=(k/$).toFixed(1);C+=`<p>Government target (2025): ${O.toLocaleString()} (<b>${S}x</b> of baseline)</p>`,C+=`<p>Go Dutch: ${k.toLocaleString()} (<b>${E}x</b> of baseline)</p>`}return C}function f(p){a=p,n(2,a)}function u(p){l=p,n(0,l)}function c(p){i=p,n(1,i)}return[l,i,a,t,o,s,f,u,c]}class Hf extends z{constructor(e){super(),q(this,e,Bf,jf,G,{})}}function Rf(r){let e;return{c(){e=w("OS Speeds")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Wf(r){let e;return{c(){e=w("Basemap")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Uf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Gf(r){let e,n,t,o,l,i,a,s,f,u,c,p;return t=new V({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Wf]},$$scope:{ctx:r}}}),u=new V({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Uf]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("The average speed data is collected over a six-month period by "),h(t.$$.fragment),o=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),l=T(),i=L("p"),i.textContent="Data valid as of 1 September, 2023",a=T(),s=L("p"),f=w(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),c=w(".")},m($,O){g($,e,O),y(e,n),b(t,e,null),y(e,o),g($,l,O),g($,i,O),g($,a,O),g($,s,O),y(s,f),b(u,s,null),y(s,c),p=!0},p($,O){const k={};O&256&&(k.$$scope={dirty:O,ctx:$}),t.$set(k);const C={};O&256&&(C.$$scope={dirty:O,ctx:$}),u.$set(C)},i($){p||(m(t.$$.fragment,$),m(u.$$.fragment,$),p=!0)},o($){_(t.$$.fragment,$),_(u.$$.fragment,$),p=!1},d($){$&&(d(e),d(l),d(i),d(a),d(s)),v(t),v(u)}}}function zf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Gf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){g(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&256&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function Qn(r){let e,n,t,o,l;e=new ze({props:{colorScale:r[2],limits:r[3]}});function i(s){r[6](s)}let a={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(a.value=r[0]),t=new pr({props:a}),X.push(()=>Y(t,"value",i)),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(s,f){b(e,s,f),g(s,n,f),b(t,s,f),l=!0},p(s,f){const u={};!o&&f&1&&(o=!0,u.value=s[0],J(()=>o=!1)),t.$set(u)},i(s){l||(m(e.$$.fragment,s),m(t.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),l=!1},d(s){s&&d(n),v(e,s),v(t,s)}}}function qf(r){let e,n,t=r[7][0].properties.indicative_mph+"",o,l,i,a,s,f=r[7][0].properties.highest_mph+"",u,c,p=r[4][r[7][0].properties.highest_description]+"",$,O;return{c(){e=L("p"),n=w("Posted speed limit: "),o=w(t),l=w(" mph"),i=T(),a=L("p"),s=w("Highest average speed: "),u=w(f),c=w(" mph (during "),$=w(p),O=w(")")},m(k,C){g(k,e,C),y(e,n),y(e,o),y(e,l),g(k,i,C),g(k,a,C),y(a,s),y(a,u),y(a,c),y(a,$),y(a,O)},p(k,C){C&128&&t!==(t=k[7][0].properties.indicative_mph+"")&&R(o,t),C&128&&f!==(f=k[7][0].properties.highest_mph+"")&&R(u,f),C&128&&p!==(p=k[4][k[7][0].properties.highest_description]+"")&&R($,p)},d(k){k&&(d(e),d(i),d(a))}}}function Vf(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[qf,({features:t})=>({7:t}),({features:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&384&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xf(r){let e,n;return e=new me({props:{id:Et,sourceLayer:Et,paint:{"line-color":Ae(["get",r[0]],r[3],r[2]),"line-width":Ue,"line-opacity":ie(1,.5)},layout:{visibility:r[1]?"visible":"none"},$$slots:{default:[Vf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1&&(l.paint={"line-color":Ae(["get",t[0]],t[3],t[2]),"line-width":Ue,"line-opacity":ie(1,.5)}),o&2&&(l.layout={visibility:t[1]?"visible":"none"}),o&256&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Kf(r){let e,n,t,o,l,i;function a(u){r[5](u)}let s={id:Et,$$slots:{right:[zf],default:[Rf]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new te({props:s}),X.push(()=>Y(e,"checked",a));let f=r[1]&&Qn(r);return l=new $e({props:{url:`pmtiles://${rn()}/v1/${Et}.pmtiles`,$$slots:{default:[Xf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),f&&f.c(),o=T(),h(l.$$.fragment)},m(u,c){b(e,u,c),g(u,t,c),f&&f.m(u,c),g(u,o,c),b(l,u,c),i=!0},p(u,[c]){const p={};c&256&&(p.$$scope={dirty:c,ctx:u}),!n&&c&2&&(n=!0,p.checked=u[1],J(()=>n=!1)),e.$set(p),u[1]?f?(f.p(u,c),c&2&&m(f,1)):(f=Qn(u),f.c(),m(f,1),f.m(o.parentNode,o)):f&&(ne(),_(f,1,1,()=>{f=null}),re());const $={};c&259&&($.$$scope={dirty:c,ctx:u}),l.$set($)},i(u){i||(m(e.$$.fragment,u),m(f),m(l.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),_(f),_(l.$$.fragment,u),i=!1},d(u){u&&(d(t),d(o)),v(e,u),f&&f.d(u),v(l,u)}}}let Et="road_speeds";function Yf(r,e,n){let t=Z.sequential_low_to_high,o=[0,20,30,40,50,90],l="indicative_mph",i=!1,a={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function s(u){i=u,n(1,i)}function f(u){l=u,n(0,l)}return[l,i,t,o,a,s,f]}class Jf extends z{constructor(e){super(),q(this,e,Yf,Kf,G,{})}}function Zf(r){let e;return{c(){e=w("OS Road widths")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Qf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function xf(r){let e,n,t,o,l,i,a,s,f;return a=new V({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Qf]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=T(),t=L("p"),t.textContent="Data valid as of 1 September, 2023",o=T(),l=L("p"),i=w(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(a.$$.fragment),s=w(".")},m(u,c){g(u,e,c),g(u,n,c),g(u,t,c),g(u,o,c),g(u,l,c),y(l,i),b(a,l,null),y(l,s),f=!0},p(u,c){const p={};c&32&&(p.$$scope={dirty:c,ctx:u}),a.$set(p)},i(u){f||(m(a.$$.fragment,u),f=!0)},o(u){_(a.$$.fragment,u),f=!1},d(u){u&&(d(e),d(n),d(t),d(o),d(l)),v(a)}}}function eu(r){let e,n,t;return n=new oe({props:{$$slots:{default:[xf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){g(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function xn(r){let e,n;return e=new ze({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:Q,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function tu(r){let e,n,t,o=r[4][0].properties.average+"",l,i,a,s,f,u,c=r[4][0].properties.minimum+"",p,$;return{c(){e=L("p"),n=w("Average width: "),t=L("b"),l=w(o),i=w(`
        meters`),a=T(),s=L("p"),f=w("Minimum width: "),u=L("b"),p=w(c),$=w(`
        meters`)},m(O,k){g(O,e,k),y(e,n),y(e,t),y(t,l),y(e,i),g(O,a,k),g(O,s,k),y(s,f),y(s,u),y(u,p),y(s,$)},p(O,k){k&16&&o!==(o=O[4][0].properties.average+"")&&R(l,o),k&16&&c!==(c=O[4][0].properties.minimum+"")&&R(p,c)},d(O){O&&(d(e),d(a),d(s))}}}function nu(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[tu,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&48&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ru(r){let e,n;return e=new me({props:{id:Nt,sourceLayer:Nt,paint:{"line-color":Ae(["get","average"],r[2],r[1]),"line-width":Ue,"line-opacity":ie(1,.5)},layout:{visibility:r[0]?"visible":"none"},$$slots:{default:[nu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1&&(l.layout={visibility:t[0]?"visible":"none"}),o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ou(r){let e,n,t,o,l,i;function a(u){r[3](u)}let s={id:Nt,$$slots:{right:[eu],default:[Zf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new te({props:s}),X.push(()=>Y(e,"checked",a));let f=r[0]&&xn(r);return l=new $e({props:{url:`pmtiles://${rn()}/v1/${Nt}.pmtiles`,$$slots:{default:[ru]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),f&&f.c(),o=T(),h(l.$$.fragment)},m(u,c){b(e,u,c),g(u,t,c),f&&f.m(u,c),g(u,o,c),b(l,u,c),i=!0},p(u,[c]){const p={};c&32&&(p.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,p.checked=u[0],J(()=>n=!1)),e.$set(p),u[0]?f?(f.p(u,c),c&1&&m(f,1)):(f=xn(u),f.c(),m(f,1),f.m(o.parentNode,o)):f&&(ne(),_(f,1,1,()=>{f=null}),re());const $={};c&33&&($.$$scope={dirty:c,ctx:u}),l.$set($)},i(u){i||(m(e.$$.fragment,u),m(f),m(l.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),_(f),_(l.$$.fragment,u),i=!1},d(u){u&&(d(t),d(o)),v(e,u),f&&f.d(u),v(l,u)}}}let Nt="road_widths";function lu(r,e,n){let t=Z.sequential_low_to_high,o=[0,5,10,15,20,100],l=!1;function i(a){l=a,n(0,l)}return[l,t,o,i]}class su extends z{constructor(e){super(),q(this,e,lu,ou,G,{})}}function er(r){const e=r[10][0].properties;r[11]=e}function iu(r){let e,n,t;return{c(){e=L("input"),K(e,"class","govuk-file-upload"),K(e,"id","load-criticals"),K(e,"type","file")},m(o,l){g(o,e,l),r[7](e),n||(t=tt(e,"change",r[5]),n=!0)},p:Q,d(o){o&&d(e),r[7](null),n=!1,t()}}}function tr(r){let e,n;return e=new gt({props:{small:!0,$$slots:{default:[fu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&4102&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function au(r){let e,n,t=r[2].toLocaleString()+"",o,l,i;return e=new we({props:{color:en}}),{c(){h(e.$$.fragment),n=w(`
        Show `),o=w(t),l=w(" issues")},m(a,s){b(e,a,s),g(a,n,s),g(a,o,s),g(a,l,s),i=!0},p(a,s){(!i||s&4)&&t!==(t=a[2].toLocaleString()+"")&&R(o,t)},i(a){i||(m(e.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),i=!1},d(a){a&&(d(n),d(o),d(l)),v(e,a)}}}function fu(r){let e,n,t;function o(i){r[8](i)}let l={id:"show-criticals",$$slots:{default:[au]},$$scope:{ctx:r}};return r[1]!==void 0&&(l.checked=r[1]),e=new te({props:l}),X.push(()=>Y(e,"checked",o)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const s={};a&4100&&(s.$$scope={dirty:a,ctx:i}),!n&&a&2&&(n=!0,s.checked=i[1],J(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function uu(r){let e,n,t,o,l,i;e=new cr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[iu]},$$scope:{ctx:r}}}),t=new mr({props:{errorMessage:r[3]}});let a=r[2]>0&&tr(r);return{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),o=T(),a&&a.c(),l=ve()},m(s,f){b(e,s,f),g(s,n,f),b(t,s,f),g(s,o,f),a&&a.m(s,f),g(s,l,f),i=!0},p(s,f){const u={};f&4097&&(u.$$scope={dirty:f,ctx:s}),e.$set(u);const c={};f&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?a?(a.p(s,f),f&4&&m(a,1)):(a=tr(s),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ne(),_(a,1,1,()=>{a=null}),re())},i(s){i||(m(e.$$.fragment,s),m(t.$$.fragment,s),m(a),i=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),_(a),i=!1},d(s){s&&(d(n),d(o),d(l)),v(e,s),v(t,s),a&&a.d(s)}}}function cu(r){er(r);let e,n,t=r[11].critical_type+"",o,l,i,a,s,f=r[11].location_description+"",u,c,p,$,O,k=r[11].notes+"",C,S,E,B,N,I,D,A=r[11].id+"",P,M,H,F,W,U=(r[11].inspector??"???")+"",le,Ve,ee,ue=r[11].submission_time+"",de,_e,ce,je,ke,ye=r[11].scheme_reference+"",Pe,Se,Be,Me=r[11].current_design_stage+"",j;return{c(){e=L("div"),n=L("h2"),o=w(t),l=T(),i=L("p"),a=L("u"),a.textContent="Location",s=w(`
          : `),u=w(f),c=T(),p=L("p"),$=L("u"),$.textContent="Notes",O=w(`
          : `),C=w(k),S=T(),E=L("hr"),B=T(),N=L("p"),I=w("Critical issue ID: "),D=L("b"),P=w(A),M=T(),H=L("p"),F=w("Submitted by "),W=L("b"),le=w(U),Ve=w(`
          at
          `),ee=L("b"),de=w(ue),_e=T(),ce=L("p"),je=w("For scheme "),ke=L("b"),Pe=w(ye),Se=w(`
          in stage
          `),Be=L("b"),j=w(Me),Ie(e,"max-width","30vw")},m(fe,ge){g(fe,e,ge),y(e,n),y(n,o),y(e,l),y(e,i),y(i,a),y(i,s),y(i,u),y(e,c),y(e,p),y(p,$),y(p,O),y(p,C),y(e,S),y(e,E),y(e,B),y(e,N),y(N,I),y(N,D),y(D,P),y(e,M),y(e,H),y(H,F),y(H,W),y(W,le),y(H,Ve),y(H,ee),y(ee,de),y(e,_e),y(e,ce),y(ce,je),y(ce,ke),y(ke,Pe),y(ce,Se),y(ce,Be),y(Be,j)},p(fe,ge){er(fe),ge&1024&&t!==(t=fe[11].critical_type+"")&&R(o,t),ge&1024&&f!==(f=fe[11].location_description+"")&&R(u,f),ge&1024&&k!==(k=fe[11].notes+"")&&R(C,k),ge&1024&&A!==(A=fe[11].id+"")&&R(P,A),ge&1024&&U!==(U=(fe[11].inspector??"???")+"")&&R(le,U),ge&1024&&ue!==(ue=fe[11].submission_time+"")&&R(de,ue),ge&1024&&ye!==(ye=fe[11].scheme_reference+"")&&R(Pe,ye),ge&1024&&Me!==(Me=fe[11].current_design_stage+"")&&R(j,Me)},d(fe){fe&&d(e)}}}function pu(r){let e,n;return e=new se({props:{openOn:"click",$$slots:{default:[cu,({features:t})=>({10:t}),({features:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&5120&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $u(r){let e,n,t,o,l,i;return e=new nt({props:{id:`${It}-clusters`,applyToClusters:!0,paint:{"circle-color":en,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]},layout:{visibility:r[1]?"visible":"none"},hoverCursor:"pointer"}}),e.$on("click",r[6]),t=new ko({props:{applyToClusters:!0,layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}}),l=new nt({props:{id:`${It}-counts`,applyToClusters:!1,paint:{"circle-color":en,"circle-opacity":.9,"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3},layout:{visibility:r[1]?"visible":"none"},$$slots:{default:[pu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),o=T(),h(l.$$.fragment)},m(a,s){b(e,a,s),g(a,n,s),b(t,a,s),g(a,o,s),b(l,a,s),i=!0},p(a,s){const f={};s&2&&(f.layout={visibility:a[1]?"visible":"none"}),e.$set(f);const u={};s&2&&(u.layout={"text-field":"{point_count_abbreviated}",visibility:a[1]?"visible":"none"}),t.$set(u);const c={};s&2&&(c.layout={visibility:a[1]?"visible":"none"}),s&4096&&(c.$$scope={dirty:s,ctx:a}),l.$set(c)},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(l.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(l.$$.fragment,a),i=!1},d(a){a&&(d(n),d(o)),v(e,a),v(t,a),v(l,a)}}}function mu(r){let e,n,t,o;return e=new Te({props:{label:"Critical Issues",$$slots:{default:[uu]},$$scope:{ctx:r}}}),t=new dt({props:{id:It,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[$u]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(l,i){b(e,l,i),g(l,n,i),b(t,l,i),o=!0},p(l,[i]){const a={};i&4111&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&16&&(s.data=l[4]),i&4098&&(s.$$scope={dirty:i,ctx:l}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}let It="criticals",en="red";function gu(r,e,n){let t;pe(r,ot,$=>n(9,t=$));let o,l=!0,i=0,a="",s=wt();async function f($){try{n(4,s=await As(o.files[0])),n(2,i=s.features.length),n(3,a="")}catch(O){n(3,a=`The file you loaded is broken: ${O}`)}}function u($){t.getSource(It).getClusterExpansionZoom($.detail.features[0].properties.cluster_id,(O,k)=>{O||t.easeTo({center:$.detail.features[0].geometry.coordinates,zoom:k})})}function c($){X[$?"unshift":"push"](()=>{o=$,n(0,o)})}function p($){l=$,n(1,l)}return[o,l,i,a,s,f,u,c,p]}class du extends z{constructor(e){super(),q(this,e,gu,mu,G,{})}}function _u(r){let e,n,t;return e=new we({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Crossings`)},m(o,l){b(e,o,l),g(o,n,l),t=!0},p:Q,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function hu(r){let e;return{c(){e=w("crossing")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function bu(r){let e,n,t,o,l,i,a;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[hu]},$$scope:{ctx:r}}}),i=new qe({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),o=w(" data from OpenStreetMap (as of 9 August 2023)."),l=T(),h(i.$$.fragment)},m(s,f){g(s,e,f),y(e,n),b(t,e,null),y(e,o),g(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&16&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function vu(r){let e,n,t;return n=new oe({props:{$$slots:{default:[bu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){g(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&16&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function wu(r){let e,n=nr(r[3][0])+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){g(o,e,l),y(e,t)},p(o,l){l&8&&n!==(n=nr(o[3][0])+"")&&R(t,n)},d(o){o&&d(e)}}}function ku(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[wu,({features:t})=>({3:t}),({features:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&24&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yu(r){let e,n;return e=new nt({props:{id:Dt,sourceLayer:Dt,paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]},layout:{visibility:r[0]?"visible":"none"},$$slots:{default:[ku]},$$scope:{ctx:r}}}),e.$on("click",Cu),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1&&(l.layout={visibility:t[0]?"visible":"none"}),o&16&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Su(r){let e,n,t,o,l;function i(s){r[2](s)}let a={id:Dt,$$slots:{right:[vu],default:[_u]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new te({props:a}),X.push(()=>Y(e,"checked",i)),o=new $e({props:{url:`pmtiles://${ae()}/v1/${Dt}.pmtiles`,$$slots:{default:[yu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment)},m(s,f){b(e,s,f),g(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&16&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&17&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let Dt="crossings";function nr(r){const e=new Map([["no","Location where crossing is impossible/illegal but where there is a clear desire line to cross"],["traffic_signals","Signalised crossing"],["marked","Crossing with no traffic signals"],["uncontrolled","Crossing with no traffic signals"],["unmarked","Crossing with no markings or signals"],["zebra","Zebra crossing"],["island","Crossing with an island"],["informal","Informal crossing with an obvious desire line, but no official infrastructure to support it"]]),n=r.properties.crossing;return`${e.get(n)??`Crossing with unknown type (${n})`}. Click for details.`}function Cu(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Ou(r,e,n){let t=Z.crossings,o=!1;function l(i){o=i,n(0,o)}return[o,t,l]}class Tu extends z{constructor(e){super(),q(this,e,Ou,Su,G,{})}}function rr(r){const e=r[3][0].properties.capacity??"unknown";r[4]=e}function Lu(r){let e,n,t;return e=new we({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Cycle parking`)},m(o,l){b(e,o,l),g(o,n,l),t=!0},p:Q,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function Au(r){let e;return{c(){e=w("OpenStreetMap")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Pu(r){let e,n,t,o,l,i,a;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Au]},$$scope:{ctx:r}}}),i=new qe({}),{c(){e=L("p"),n=w("Cycle parking, according to "),h(t.$$.fragment),o=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),l=T(),h(i.$$.fragment)},m(s,f){g(s,e,f),y(e,n),b(t,e,null),y(e,o),g(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function Eu(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Pu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){g(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function Nu(r){rr(r);let e,n,t,o=r[4]+"",l;return{c(){e=L("p"),n=w("Capacity: "),t=L("b"),l=w(o)},m(i,a){g(i,e,a),y(e,n),y(e,t),y(t,l)},p(i,a){rr(i),a&8&&o!==(o=i[4]+"")&&R(l,o)},d(i){i&&d(e)}}}function Iu(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[Nu,({features:t})=>({3:t}),({features:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&40&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Du(r){let e,n;return e=new nt({props:{id:Mt,sourceLayer:Mt,paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]},layout:{visibility:r[0]?"visible":"none"},manageHoverState:!0,$$slots:{default:[Iu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1&&(l.layout={visibility:t[0]?"visible":"none"}),o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mu(r){let e,n,t,o,l;function i(s){r[2](s)}let a={id:Mt,$$slots:{right:[Eu],default:[Lu]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new te({props:a}),X.push(()=>Y(e,"checked",i)),o=new $e({props:{url:`pmtiles://${ae()}/v1/${Mt}.pmtiles`,$$slots:{default:[Du]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment)},m(s,f){b(e,s,f),g(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&33&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let Mt="cycle_parking";function Fu(r,e,n){let t=Z.cycle_parking,o=!1;function l(i){o=i,n(0,o)}return[o,t,l]}class ju extends z{constructor(e){super(),q(this,e,Fu,Mu,G,{})}}function Bu(r){let e,n,t,o;return e=new we({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=T(),t=w(r[2])},m(l,i){b(e,l,i),g(l,n,i),g(l,t,i),o=!0},p(l,i){(!o||i&4)&&R(t,l[2])},i(l){o||(m(e.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),o=!1},d(l){l&&(d(n),d(t)),v(e,l)}}}function Hu(r){let e;const n=r[5].default,t=ct(n,r,r[7],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&128)&&pt(t,n,o,o[7],e?mt(n,o[7],l,null):$t(o[7]),null)},i(o){e||(m(t,o),e=!0)},o(o){_(t,o),e=!1},d(o){t&&t.d(o)}}}function Ru(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Hu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){g(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&128&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function Wu(r){let e,n=(r[8][0].properties.name??`Unnamed ${r[1]}`)+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){g(o,e,l),y(e,t)},p(o,l){l&258&&n!==(n=(o[8][0].properties.name??`Unnamed ${o[1]}`)+"")&&R(t,n)},d(o){o&&d(e)}}}function Uu(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[Wu,({features:t})=>({8:t}),({features:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&386&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gu(r){let e,n;return e=new Ge({props:{id:r[0],sourceLayer:r[0],paint:{"fill-color":r[4],"fill-opacity":ie(.7,1)},layout:{visibility:r[3]?"visible":"none"},manageHoverState:!0,$$slots:{default:[Uu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1&&(l.id=t[0]),o&1&&(l.sourceLayer=t[0]),o&8&&(l.layout={visibility:t[3]?"visible":"none"}),o&130&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zu(r){let e,n,t,o,l;function i(s){r[6](s)}let a={id:r[0],$$slots:{right:[Ru],default:[Bu]},$$scope:{ctx:r}};return r[3]!==void 0&&(a.checked=r[3]),e=new te({props:a}),X.push(()=>Y(e,"checked",i)),o=new $e({props:{url:`pmtiles://${ae()}/v1/${r[0]}.pmtiles`,$$slots:{default:[Gu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment)},m(s,f){b(e,s,f),g(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&1&&(u.id=s[0]),f&132&&(u.$$scope={dirty:f,ctx:s}),!n&&f&8&&(n=!0,u.checked=s[3],J(()=>n=!1)),e.$set(u);const c={};f&1&&(c.url=`pmtiles://${ae()}/v1/${s[0]}.pmtiles`),f&139&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}function qu(r,e,n){let{$$slots:t={},$$scope:o}=e,{name:l}=e,{singularNoun:i}=e,{pluralNoun:a}=e,s=Z[l],f=!1;function u(c){f=c,n(3,f)}return r.$$set=c=>{"name"in c&&n(0,l=c.name),"singularNoun"in c&&n(1,i=c.singularNoun),"pluralNoun"in c&&n(2,a=c.pluralNoun),"$$scope"in c&&n(7,o=c.$$scope)},[l,i,a,f,s,t,u,o]}class ln extends z{constructor(e){super(),q(this,e,qu,zu,G,{name:0,singularNoun:1,pluralNoun:2})}}function Vu(r){let e;return{c(){e=w("hospital")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Xu(r){let e,n,t,o,l,i,a;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Vu]},$$scope:{ctx:r}}}),i=new qe({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),o=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),l=T(),h(i.$$.fragment)},m(s,f){g(s,e,f),y(e,n),b(t,e,null),y(e,o),g(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&1&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function Ku(r){let e,n;return e=new ln({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Xu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&1&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Yu extends z{constructor(e){super(),q(this,e,null,Ku,G,{})}}function Ju(r){let e,n,t;return e=new we({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Railway Stations`)},m(o,l){b(e,o,l),g(o,n,l),t=!0},p:Q,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function Zu(r){let e;return{c(){e=w("railway station")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Qu(r){let e,n,t,o,l,i,a;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Zu]},$$scope:{ctx:r}}}),i=new qe({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),o=w(" data from OpenStreetMap (as of 9 August 2023)."),l=T(),h(i.$$.fragment)},m(s,f){g(s,e,f),y(e,n),b(t,e,null),y(e,o),g(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&16&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function xu(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Qu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){g(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&16&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function ec(r){let e,n=(r[3][0].properties.name??"Unnamed railway station")+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){g(o,e,l),y(e,t)},p(o,l){l&8&&n!==(n=(o[3][0].properties.name??"Unnamed railway station")+"")&&R(t,n)},d(o){o&&d(e)}}}function tc(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[ec,({features:t})=>({3:t}),({features:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&24&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function nc(r){let e,n;return e=new nt({props:{id:tn,paint:{"circle-color":r[1],"circle-radius":Zr/2},layout:{visibility:r[0]?"visible":"none"},$$slots:{default:[tc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1&&(l.layout={visibility:t[0]?"visible":"none"}),o&16&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function rc(r){let e,n,t,o,l;function i(s){r[2](s)}let a={id:tn,$$slots:{right:[xu],default:[Ju]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new te({props:a}),X.push(()=>Y(e,"checked",i)),o=new dt({props:{data:`${ae()}/v1/${tn}.geojson`,$$slots:{default:[nc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment)},m(s,f){b(e,s,f),g(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&16&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&17&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let tn="railway_stations";function oc(r,e,n){let t=Z.railway_stations,o=!1;function l(i){o=i,n(0,o)}return[o,t,l]}class lc extends z{constructor(e){super(),q(this,e,oc,rc,G,{})}}function sc(r){let e;return{c(){e=w("primary and secondary schools")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function ic(r){let e,n,t,o,l,i,a;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[sc]},$$scope:{ctx:r}}}),i=new qe({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),o=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),l=T(),h(i.$$.fragment)},m(s,f){g(s,e,f),y(e,n),b(t,e,null),y(e,o),g(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&1&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function ac(r){let e,n;return e=new ln({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[ic]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&1&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class fc extends z{constructor(e){super(),q(this,e,null,ac,G,{})}}function uc(r){let e;return{c(){e=w("sports pitches")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function cc(r){let e;return{c(){e=w("sports centres")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function pc(r){let e,n,t,o,l,i,a,s,f;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[uc]},$$scope:{ctx:r}}}),l=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[cc]},$$scope:{ctx:r}}}),s=new qe({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),o=w(" and "),h(l.$$.fragment),i=w(" data from OpenStreetMap (as of 9 August 2023)."),a=T(),h(s.$$.fragment)},m(u,c){g(u,e,c),y(e,n),b(t,e,null),y(e,o),b(l,e,null),y(e,i),g(u,a,c),b(s,u,c),f=!0},p(u,c){const p={};c&1&&(p.$$scope={dirty:c,ctx:u}),t.$set(p);const $={};c&1&&($.$$scope={dirty:c,ctx:u}),l.$set($)},i(u){f||(m(t.$$.fragment,u),m(l.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),_(l.$$.fragment,u),_(s.$$.fragment,u),f=!1},d(u){u&&(d(e),d(a)),v(t),v(l),v(s,u)}}}function $c(r){let e,n;return e=new ln({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[pc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&1&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class mc extends z{constructor(e){super(),q(this,e,null,$c,G,{})}}function or(r){const e=Sc(r[5][0]);r[6]=e[0],r[7]=e[1],r[8]=e[2],r[9]=e[3]}function gc(r){let e;return{c(){e=w("Vehicle counts")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function dc(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function _c(r){let e;return{c(){e=w("methodology")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function hc(r){let e,n,t,o,l,i,a,s,f,u,c;return t=new V({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[dc]},$$scope:{ctx:r}}}),l=new V({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[_c]},$$scope:{ctx:r}}}),u=new Fe({}),{c(){e=L("p"),n=w("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),o=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(l.$$.fragment),i=w(" for details and caveats about the measurements."),a=T(),s=L("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,f=T(),h(u.$$.fragment)},m(p,$){g(p,e,$),y(e,n),b(t,e,null),y(e,o),b(l,e,null),y(e,i),g(p,a,$),g(p,s,$),g(p,f,$),b(u,p,$),c=!0},p(p,$){const O={};$&1024&&(O.$$scope={dirty:$,ctx:p}),t.$set(O);const k={};$&1024&&(k.$$scope={dirty:$,ctx:p}),l.$set(k)},i(p){c||(m(t.$$.fragment,p),m(l.$$.fragment,p),m(u.$$.fragment,p),c=!0)},o(p){_(t.$$.fragment,p),_(l.$$.fragment,p),_(u.$$.fragment,p),c=!1},d(p){p&&(d(e),d(a),d(s),d(f)),v(t),v(l),v(u,p)}}}function bc(r){let e,n,t;return n=new oe({props:{$$slots:{default:[hc]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){g(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&1024&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function lr(r){let e,n;return e=new ze({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:Q,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vc(r){or(r);let e,n=r[6]+"",t,o,l,i,a,s=r[7]+"",f,u,c,p,$,O=r[8]+"",k,C,S,E,B,N=r[9]+"",I;return{c(){e=L("h2"),t=w(n),o=T(),l=L("p"),i=w("Total motor vehicles (2022 AADF): "),a=L("b"),f=w(s),u=T(),c=L("p"),p=w("Total pedal cycles (2022 AADF): "),$=L("b"),k=w(O),C=T(),S=L("p"),E=w("Count method: "),B=L("b"),I=w(N)},m(D,A){g(D,e,A),y(e,t),g(D,o,A),g(D,l,A),y(l,i),y(l,a),y(a,f),g(D,u,A),g(D,c,A),y(c,p),y(c,$),y($,k),g(D,C,A),g(D,S,A),y(S,E),y(S,B),y(B,I)},p(D,A){or(D),A&32&&n!==(n=D[6]+"")&&R(t,n),A&32&&s!==(s=D[7]+"")&&R(f,s),A&32&&O!==(O=D[8]+"")&&R(k,O),A&32&&N!==(N=D[9]+"")&&R(I,N)},d(D){D&&(d(e),d(o),d(l),d(u),d(c),d(C),d(S))}}}function wc(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[vc,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1056&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function kc(r){let e,n;return e=new nt({props:{id:Ft,sourceLayer:Ft,paint:{"circle-color":Ae(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1},layout:{visibility:r[0]?"visible":"none"},$$slots:{default:[wc]},$$scope:{ctx:r}}}),e.$on("click",Cc),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1&&(l.layout={visibility:t[0]?"visible":"none"}),o&1024&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yc(r){let e,n,t,o,l,i;function a(u){r[4](u)}let s={id:Ft,$$slots:{right:[bc],default:[gc]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new te({props:s}),X.push(()=>Y(e,"checked",a));let f=r[0]&&lr(r);return l=new $e({props:{url:`pmtiles://${ae()}/v1/${Ft}.pmtiles`,$$slots:{default:[kc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),f&&f.c(),o=T(),h(l.$$.fragment)},m(u,c){b(e,u,c),g(u,t,c),f&&f.m(u,c),g(u,o,c),b(l,u,c),i=!0},p(u,[c]){const p={};c&1024&&(p.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,p.checked=u[0],J(()=>n=!1)),e.$set(p),u[0]?f?(f.p(u,c),c&1&&m(f,1)):(f=lr(u),f.c(),m(f,1),f.m(o.parentNode,o)):f&&(ne(),_(f,1,1,()=>{f=null}),re());const $={};c&1025&&($.$$scope={dirty:c,ctx:u}),l.$set($)},i(u){i||(m(e.$$.fragment,u),m(f),m(l.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),_(f),_(l.$$.fragment,u),i=!1},d(u){u&&(d(t),d(o)),v(e,u),f&&f.d(u),v(l,u)}}}let Ft="vehicle_counts";function Sc(r){let e=r.properties;return[e.location,e.motor_vehicles_2022.toLocaleString(),e.pedal_cycles_2022.toLocaleString(),e.method]}function Cc(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function Oc(r,e,n){let t=Z.sequential_low_to_high,o=[0,4e4,8e4,12e4,16e4,205e3],l=["","40k","80k","120k","160k",""],i=!1;function a(s){i=s,n(0,i)}return[i,t,o,l,a]}class Tc extends z{constructor(e){super(),q(this,e,Oc,yc,G,{})}}function Lc(r){let e,n,t,o,l,i,a,s;return e=new fc({}),t=new Yu({}),l=new mc({}),a=new lc({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),o=T(),h(l.$$.fragment),i=T(),h(a.$$.fragment)},m(f,u){b(e,f,u),g(f,n,u),b(t,f,u),g(f,o,u),b(l,f,u),g(f,i,u),b(a,f,u),s=!0},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(l.$$.fragment,f),m(a.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(l.$$.fragment,f),_(a.$$.fragment,f),s=!1},d(f){f&&(d(n),d(o),d(i)),v(e,f),v(t,f),v(l,f),v(a,f)}}}function Ac(r){let e,n;return e=new gt({props:{small:!0,$$slots:{default:[Lc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Pc(r){let e,n,t,o,l,i,a,s,f,u;return e=new gf({}),t=new Cf({}),l=new rf({}),a=new ju({}),f=new Tu({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),o=T(),h(l.$$.fragment),i=T(),h(a.$$.fragment),s=T(),h(f.$$.fragment)},m(c,p){b(e,c,p),g(c,n,p),b(t,c,p),g(c,o,p),b(l,c,p),g(c,i,p),b(a,c,p),g(c,s,p),b(f,c,p),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(l.$$.fragment,c),m(a.$$.fragment,c),m(f.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(l.$$.fragment,c),_(a.$$.fragment,c),_(f.$$.fragment,c),u=!1},d(c){c&&(d(n),d(o),d(i),d(s)),v(e,c),v(t,c),v(l,c),v(a,c),v(f,c)}}}function Ec(r){let e,n;return e=new gt({props:{small:!0,$$slots:{default:[Pc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Nc(r){let e,n,t,o,l,i,a,s,f,u;return e=new Na({}),t=new Ga({}),l=new Hi({}),a=new ia({}),f=new wa({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),o=T(),h(l.$$.fragment),i=T(),h(a.$$.fragment),s=T(),h(f.$$.fragment)},m(c,p){b(e,c,p),g(c,n,p),b(t,c,p),g(c,o,p),b(l,c,p),g(c,i,p),b(a,c,p),g(c,s,p),b(f,c,p),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(l.$$.fragment,c),m(a.$$.fragment,c),m(f.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(l.$$.fragment,c),_(a.$$.fragment,c),_(f.$$.fragment,c),u=!1},d(c){c&&(d(n),d(o),d(i),d(s)),v(e,c),v(t,c),v(l,c),v(a,c),v(f,c)}}}function Ic(r){let e,n;return e=new gt({props:{small:!0,$$slots:{default:[Nc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Dc(r){let e,n,t,o;return e=new Li({}),t=new Ji({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(l,i){b(e,l,i),g(l,n,i),b(t,l,i),o=!0},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function Mc(r){let e,n,t,o;return e=new su({}),t=new Jf({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(l,i){b(e,l,i),g(l,n,i),b(t,l,i),o=!0},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function Fc(r){let e,n,t,o,l=nn()=="Private (development)",i,a;e=new Tc({}),t=new Hf({});let s=l&&Mc();return{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),o=T(),s&&s.c(),i=ve()},m(f,u){b(e,f,u),g(f,n,u),b(t,f,u),g(f,o,u),s&&s.m(f,u),g(f,i,u),a=!0},p:Q,i(f){a||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(s),a=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(s),a=!1},d(f){f&&(d(n),d(o),d(i)),v(e,f),v(t,f),s&&s.d(f)}}}function jc(r){let e,n,t,o,l;function i(s){r[4](s)}let a={displayEnableButton:!0};return r[1]!==void 0&&(a.isInactive=r[1]),e=new xr({props:a}),r[3](e),X.push(()=>Y(e,"isInactive",i)),o=new Zs({}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment)},m(s,f){b(e,s,f),g(s,t,f),b(o,s,f),l=!0},p(s,f){const u={};!n&&f&2&&(n=!0,u.isInactive=s[1],J(()=>n=!1)),e.$set(u)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),r[3](null),v(e,s),v(o,s)}}}function Bc(r){let e,n,t,o,l,i,a,s,f,u,c,p,$,O,k,C;return e=new du({}),t=new Te({props:{label:"Trip generators",$$slots:{default:[Ac]},$$scope:{ctx:r}}}),l=new Te({props:{label:"Existing infrastructure",$$slots:{default:[Ec]},$$scope:{ctx:r}}}),a=new Te({props:{label:"Boundaries",$$slots:{default:[Ic]},$$scope:{ctx:r}}}),f=new Te({props:{label:"Census",$$slots:{default:[Dc]},$$scope:{ctx:r}}}),c=new Te({props:{label:"Other",$$slots:{default:[Fc]},$$scope:{ctx:r}}}),$=new Te({props:{label:"Tools",$$slots:{default:[jc]},$$scope:{ctx:r}}}),k=new Qr({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),o=T(),h(l.$$.fragment),i=T(),h(a.$$.fragment),s=T(),h(f.$$.fragment),u=T(),h(c.$$.fragment),p=T(),h($.$$.fragment),O=T(),h(k.$$.fragment)},m(S,E){b(e,S,E),g(S,n,E),b(t,S,E),g(S,o,E),b(l,S,E),g(S,i,E),b(a,S,E),g(S,s,E),b(f,S,E),g(S,u,E),b(c,S,E),g(S,p,E),b($,S,E),g(S,O,E),b(k,S,E),C=!0},p(S,E){const B={};E&32&&(B.$$scope={dirty:E,ctx:S}),t.$set(B);const N={};E&32&&(N.$$scope={dirty:E,ctx:S}),l.$set(N);const I={};E&32&&(I.$$scope={dirty:E,ctx:S}),a.$set(I);const D={};E&32&&(D.$$scope={dirty:E,ctx:S}),f.$set(D);const A={};E&32&&(A.$$scope={dirty:E,ctx:S}),c.$set(A);const P={};E&35&&(P.$$scope={dirty:E,ctx:S}),$.$set(P);const M={};E&2&&(M.disabled=!S[1]),k.$set(M)},i(S){C||(m(e.$$.fragment,S),m(t.$$.fragment,S),m(l.$$.fragment,S),m(a.$$.fragment,S),m(f.$$.fragment,S),m(c.$$.fragment,S),m($.$$.fragment,S),m(k.$$.fragment,S),C=!0)},o(S){_(e.$$.fragment,S),_(t.$$.fragment,S),_(l.$$.fragment,S),_(a.$$.fragment,S),_(f.$$.fragment,S),_(c.$$.fragment,S),_($.$$.fragment,S),_(k.$$.fragment,S),C=!1},d(S){S&&(d(n),d(o),d(i),d(s),d(u),d(p),d(O)),v(e,S),v(t,S),v(l,S),v(a,S),v(f,S),v(c,S),v($,S),v(k,S)}}}function Hc(r){let e,n,t,o;return e=new Te({props:{label:"Layers",open:!0,$$slots:{default:[Bc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(l,i){b(e,l,i),n=!0,t||(o=tt(window,"keydown",r[2]),t=!0)},p(l,[i]){const a={};i&35&&(a.$$scope={dirty:i,ctx:l}),e.$set(a)},i(l){n||(m(e.$$.fragment,l),n=!0)},o(l){_(e.$$.fragment,l),n=!1},d(l){v(e,l),t=!1,o()}}}function Rc(r,e,n){let t;pe(r,an,s=>n(1,t=s));let o;function l(s){!t&&s.key=="Escape"&&(o.disableStreetView(),s.preventDefault())}function i(s){X[s?"unshift":"push"](()=>{o=s,n(0,o)})}function a(s){t=s,an.set(t)}return[o,t,l,i,a]}class Wc extends z{constructor(e){super(),q(this,e,Rc,Hc,G,{})}}function Uc(r,e,n){let{loadFile:t}=e;return rt(async()=>{let l=await(await fetch(`${rn()}/v1/random_schemes.geojson`)).text();t(l)}),r.$$set=o=>{"loadFile"in o&&n(0,t=o.loadFile)},[t]}class Gc extends z{constructor(e){super(),q(this,e,Uc,null,G,{loadFile:0})}}function zc(r){let e;return{c(){e=w("Show on map")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function qc(r){let e;return{c(){e=w("Edit scheme locally")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Vc(r){let e,n,t=r[0].authority_or_region+"",o,l,i,a,s=r[0].capital_scheme_id+"",f,u,c,p,$=r[0].funding_programme+"",O,k,C,S,E,B,N;return S=new it({props:{$$slots:{default:[zc]},$$scope:{ctx:r}}}),S.$on("click",r[3]),B=new it({props:{disabled:r[1],title:r[2],$$slots:{default:[qc]},$$scope:{ctx:r}}}),B.$on("click",r[4]),{c(){e=L("p"),n=w("Authority or region: "),o=w(t),l=T(),i=L("p"),a=w("Capital scheme ID: "),f=w(s),u=T(),c=L("p"),p=w("Funding programme: "),O=w($),k=T(),C=L("div"),h(S.$$.fragment),E=T(),h(B.$$.fragment),K(C,"class","govuk-button-group")},m(I,D){g(I,e,D),y(e,n),y(e,o),g(I,l,D),g(I,i,D),y(i,a),y(i,f),g(I,u,D),g(I,c,D),y(c,p),y(c,O),g(I,k,D),g(I,C,D),b(S,C,null),y(C,E),b(B,C,null),N=!0},p(I,D){(!N||D&1)&&t!==(t=I[0].authority_or_region+"")&&R(o,t),(!N||D&1)&&s!==(s=I[0].capital_scheme_id+"")&&R(f,s),(!N||D&1)&&$!==($=I[0].funding_programme+"")&&R(O,$);const A={};D&256&&(A.$$scope={dirty:D,ctx:I}),S.$set(A);const P={};D&256&&(P.$$scope={dirty:D,ctx:I}),B.$set(P)},i(I){N||(m(S.$$.fragment,I),m(B.$$.fragment,I),N=!0)},o(I){_(S.$$.fragment,I),_(B.$$.fragment,I),N=!1},d(I){I&&(d(e),d(l),d(i),d(u),d(c),d(k),d(C)),v(S),v(B)}}}function Xc(r){let e,n;return e=new Te({props:{label:`${r[0].scheme_reference}: ${r[0].num_features} features`,$$slots:{default:[Vc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&1&&(l.label=`${t[0].scheme_reference}: ${t[0].num_features} features`),o&257&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Kc(r,e,n){let t,o;pe(r,Ze,c=>n(6,t=c)),pe(r,ot,c=>n(7,o=c));let{scheme:l}=e,{authorityNames:i}=e,a=!i.has(l.authority_or_region),s=a?"This scheme doesn't have an authority specified correctly, so you can't edit this scheme. We're working to fix this problem.":void 0;function f(){let c={type:"FeatureCollection",features:t.features.filter(p=>p.properties.scheme_reference==l.scheme_reference)};o==null||o.fitBounds(zr(c),{padding:20,animate:!1})}function u(){let c={type:"FeatureCollection",features:t.features.filter($=>$.properties.scheme_reference==l.scheme_reference)},p=l.authority_or_region;window.localStorage.setItem(p,JSON.stringify(c)),window.open(`scheme.html?authority=${l.authority_or_region}`,"_blank")}return r.$$set=c=>{"scheme"in c&&n(0,l=c.scheme),"authorityNames"in c&&n(5,i=c.authorityNames)},[l,a,s,f,u,i]}class Yc extends z{constructor(e){super(),q(this,e,Kc,Xc,G,{scheme:0,authorityNames:5})}}const Jc=["Adur","Allerdale","Amber Valley","Arun","Ashfield","Ashford","Babergh","Barking and Dagenham","Barnet","Barnsley","Barrow-in-Furness","Basildon","Basingstoke and Deane","Bassetlaw","Bath and North East Somerset","Bedford","Bexley","Birmingham","Blaby","Blackburn with Darwen","Blackpool","Bolsover","Bolton","Boston","Bournemouth, Christchurch and Poole","Bracknell Forest","Bradford","Braintree","Breckland","Brent","Brentwood","Brighton and Hove","Bristol, City of","Broadland","Bromley","Bromsgrove","Broxbourne","Broxtowe","Buckinghamshire","Burnley","Bury","Calderdale","Cambridge","Cambridgeshire and Peterborough Combined Authority","Camden","Cannock Chase","Canterbury","Carlisle","Castle Point","Central Bedfordshire","Charnwood","Chelmsford","Cheltenham","Cherwell","Cheshire East","Cheshire West and Chester","Chesterfield","Chichester","Chorley","City of London","Colchester","Copeland","Cornwall","Cotswold","County Durham","Coventry","Craven","Crawley","Croydon","Cumbria","Dacorum","Darlington","Dartford","Derby","Derbyshire","Derbyshire Dales","Devon","Doncaster","Dorset","Dover","Dudley","Ealing","Eastbourne","East Cambridgeshire","East Devon","East Hampshire","East Hertfordshire","Eastleigh","East Lindsey","East Riding of Yorkshire","East Staffordshire","East Suffolk","East Sussex","Eden","Elmbridge","Enfield","Epping Forest","Epsom and Ewell","Erewash","Essex","Exeter","Fareham","Fenland","Folkestone and Hythe","Forest of Dean","Fylde","Gateshead","Gedling","Gloucester","Gloucestershire","Gosport","Gravesham","Greater London","Greater Manchester Combined Authority","Great Yarmouth","Greenwich","Guildford","Hackney","Halton","Hambleton","Hammersmith and Fulham","Hampshire","Harborough","Haringey","Harlow","Harrogate","Harrow","Hart","Hartlepool","Hastings","Havant","Havering","Herefordshire","Herefordshire, County of","Hertfordshire","Hertsmere","High Peak","Hillingdon","Hinckley and Bosworth","Horsham","Hounslow","Huntingdonshire","Hyndburn","Ipswich","Isle of Wight","Isles of Scilly","Islington","Kensington and Chelsea","Kent","King's Lynn and West Norfolk","Kingston upon Hull","Kingston upon Hull, City of","Kingston upon Thames","Kirklees","Knowsley","Lambeth","Lancashire","Lancaster","Leeds","Leicester","Leicestershire","Lewes","Lewisham","Lichfield","Lincoln","Lincolnshire","Liverpool","Liverpool City Region Combined Authority","Luton","Maidstone","Maldon","Malvern Hills","Manchester","Mansfield","Medway","Melton","Mendip","Merton","Mid Devon","Middlesbrough","Mid Suffolk","Mid Sussex","Milton Keynes","Mole Valley","Newark and Sherwood","Newcastle-under-Lyme","Newcastle upon Tyne","New Forest","Newham","Norfolk","North Devon","North East Derbyshire","North East Joint Transport Committee","North East Lincolnshire","North Hertfordshire","North Kesteven","North Lincolnshire","North Norfolk","North Northamptonshire","North Somerset","North Tyneside","Northumberland","North Warwickshire","North West Leicestershire","North Yorkshire","Norwich","Nottingham","Nottinghamshire","Nuneaton and Bedworth","Oadby and Wigston","Oldham","Oxford","Oxfordshire","Pendle","Peterborough","Plymouth","Portsmouth","Preston","Reading","Redbridge","Redcar and Cleveland","Redditch","Reigate and Banstead","Ribble Valley","Richmondshire","Richmond upon Thames","Rochdale","Rochford","Rossendale","Rother","Rotherham","Rugby","Runnymede","Rushcliffe","Rushmoor","Rutland","Ryedale","Salford","Sandwell","Scarborough","Sedgemoor","Sefton","Selby","Sevenoaks","Sheffield","Sheffield City Region Combined Authority","Shropshire","Slough","Solihull","Somerset","Somerset West and Taunton","Southampton","South Cambridgeshire","South Derbyshire","Southend-on-Sea","South Gloucestershire","South Hams","South Holland","South Kesteven","South Lakeland","South Norfolk","South Oxfordshire","South Ribble","South Somerset","South Staffordshire","South Tyneside","Southwark","Spelthorne","Stafford","Staffordshire","Staffordshire Moorlands","St Albans","Stevenage","St. Helens","Stockport","Stockton-on-Tees","Stoke-on-Trent","Stratford-on-Avon","Stroud","Suffolk","Sunderland","Surrey","Surrey Heath","Sutton","Swale","Swindon","Tameside","Tamworth","Tandridge","Tees Valley Combined Authority","Teignbridge","Telford and Wrekin","Tendring","Test Valley","Tewkesbury","Thanet","Three Rivers","Thurrock","Tonbridge and Malling","Torbay","Torridge","Tower Hamlets","Trafford","Tunbridge Wells","Uttlesford","Vale of White Horse","Wakefield","Walsall","Waltham Forest","Wandsworth","Warrington","Warwick","Warwickshire","Watford","Waverley","Wealden","Welwyn Hatfield","West Berkshire","West Devon","West Lancashire","West Lindsey","West Midlands ITA","Westminster","West Northamptonshire","West of England Combined Authority","West Oxfordshire","West Suffolk","West Sussex","West Yorkshire Combined Authority","Wigan","Wiltshire","Winchester","Windsor and Maidenhead","Wirral","Woking","Wokingham","Wolverhampton","Worcester","Worcestershire","Worthing","Wychavon","Wyre","Wyre Forest","York"];function sr(r,e,n){const t=r.slice();return t[13]=e[n],t}function Zc(r){let e,n;return e=new Gc({props:{loadFile:r[7]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:Q,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ir(r){let e,n,t,o;function l(s){r[9](s)}function i(s){r[10](s)}let a={schemes:r[1]};return r[2]!==void 0&&(a.schemesToBeShown=r[2]),r[3]!==void 0&&(a.filterText=r[3]),e=new Rs({props:a}),X.push(()=>Y(e,"schemesToBeShown",l)),X.push(()=>Y(e,"filterText",i)),{c(){h(e.$$.fragment)},m(s,f){b(e,s,f),o=!0},p(s,f){const u={};f&2&&(u.schemes=s[1]),!n&&f&4&&(n=!0,u.schemesToBeShown=s[2],J(()=>n=!1)),!t&&f&8&&(t=!0,u.filterText=s[3],J(()=>t=!1)),e.$set(u)},i(s){o||(m(e.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),o=!1},d(s){v(e,s)}}}function ar(r){let e,n;return e=new Yc({props:{scheme:r[13],authorityNames:r[6]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.scheme=t[13]),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fr(r){let e=r[2].has(r[13].scheme_reference),n,t,o=e&&ar(r);return{c(){o&&o.c(),n=ve()},m(l,i){o&&o.m(l,i),g(l,n,i),t=!0},p(l,i){i&6&&(e=l[2].has(l[13].scheme_reference)),e?o?(o.p(l,i),i&6&&m(o,1)):(o=ar(l),o.c(),m(o,1),o.m(n.parentNode,n)):o&&(ne(),_(o,1,1,()=>{o=null}),re())},i(l){t||(m(o),t=!0)},o(l){_(o),t=!1},d(l){l&&d(n),o&&o.d(l)}}}function Qc(r){let e,n,t,o,l,i,a,s,f,u,c=nn()=="Private (development)",p,$,O,k,C,S,E,B;l=new so({props:{boundaryGeojson:r[5]}}),a=new To({}),f=new qr({});let N=c&&Zc(r);$=new ao({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[7]}}),k=new mr({props:{errorMessage:r[0]}});let I=r[1].size>0&&ir(r),D=Ne(r[1].values()),A=[];for(let M=0;M<D.length;M+=1)A[M]=fr(sr(r,D,M));const P=M=>_(A[M],1,1,()=>{A[M]=null});return{c(){e=L("div"),n=L("div"),t=L("h1"),t.textContent="Browse schemes",o=T(),h(l.$$.fragment),i=T(),h(a.$$.fragment),s=T(),h(f.$$.fragment),u=T(),N&&N.c(),p=T(),h($.$$.fragment),O=T(),h(k.$$.fragment),C=T(),I&&I.c(),S=T(),E=L("ul");for(let M=0;M<A.length;M+=1)A[M].c();Ie(n,"display","flex"),Ie(n,"justify-content","space-between"),K(e,"slot","sidebar"),K(e,"class","govuk-prose")},m(M,H){g(M,e,H),y(e,n),y(n,t),y(n,o),b(l,n,null),y(e,i),b(a,e,null),y(e,s),b(f,e,null),y(e,u),N&&N.m(e,null),y(e,p),b($,e,null),y(e,O),b(k,e,null),y(e,C),I&&I.m(e,null),y(e,S),y(e,E);for(let F=0;F<A.length;F+=1)A[F]&&A[F].m(E,null);B=!0},p(M,H){const F={};H&32&&(F.boundaryGeojson=M[5]),l.$set(F),c&&N.p(M,H);const W={};if(H&1&&(W.errorMessage=M[0]),k.$set(W),M[1].size>0?I?(I.p(M,H),H&2&&m(I,1)):(I=ir(M),I.c(),m(I,1),I.m(e,S)):I&&(ne(),_(I,1,1,()=>{I=null}),re()),H&70){D=Ne(M[1].values());let U;for(U=0;U<D.length;U+=1){const le=sr(M,D,U);A[U]?(A[U].p(le,H),m(A[U],1)):(A[U]=fr(le),A[U].c(),m(A[U],1),A[U].m(E,null))}for(ne(),U=D.length;U<A.length;U+=1)P(U);re()}},i(M){if(!B){m(l.$$.fragment,M),m(a.$$.fragment,M),m(f.$$.fragment,M),m(N),m($.$$.fragment,M),m(k.$$.fragment,M),m(I);for(let H=0;H<D.length;H+=1)m(A[H]);B=!0}},o(M){_(l.$$.fragment,M),_(a.$$.fragment,M),_(f.$$.fragment,M),_(N),_($.$$.fragment,M),_(k.$$.fragment,M),_(I),A=A.filter(Boolean);for(let H=0;H<A.length;H+=1)_(A[H]);B=!1},d(M){M&&d(e),v(l),v(a),v(f),N&&N.d(),v($),v(k),I&&I.d(),kt(A,M)}}}function xc(r){let e,n,t,o,l,i,a,s,f,u,c;return e=new io({props:{colorInterventions:dr("v1")}}),t=new Bt({props:{layer:"interventions-points",tooltip:r[8],clickable:!1}}),l=new Bt({props:{layer:"interventions-lines",tooltip:r[8],clickable:!1}}),a=new Bt({props:{layer:"interventions-polygons",tooltip:r[8],clickable:!1}}),u=new Wc({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),o=T(),h(l.$$.fragment),i=T(),h(a.$$.fragment),s=T(),f=L("div"),h(u.$$.fragment),K(f,"class","top-right svelte-u44ed2")},m(p,$){b(e,p,$),g(p,n,$),b(t,p,$),g(p,o,$),b(l,p,$),g(p,i,$),b(a,p,$),g(p,s,$),g(p,f,$),b(u,f,null),c=!0},p:Q,i(p){c||(m(e.$$.fragment,p),m(t.$$.fragment,p),m(l.$$.fragment,p),m(a.$$.fragment,p),m(u.$$.fragment,p),c=!0)},o(p){_(e.$$.fragment,p),_(t.$$.fragment,p),_(l.$$.fragment,p),_(a.$$.fragment,p),_(u.$$.fragment,p),c=!1},d(p){p&&(d(n),d(o),d(i),d(s),d(f)),v(e,p),v(t,p),v(l,p),v(a,p),v(u)}}}function ep(r){let e,n,t;return n=new to({props:{style:r[4],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[xc]},$$scope:{ctx:r}}}),{c(){e=L("div"),h(n.$$.fragment),K(e,"slot","main")},m(o,l){g(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&16&&(i.style=o[4]),l&65536&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function tp(r){let e,n;return e=new eo({props:{$$slots:{main:[ep],sidebar:[Qc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&65599&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function np(r,e,n){let t,o;pe(r,fn,C=>n(4,t=C)),pe(r,Ze,C=>n(5,o=C));let l=new Set(Jc);rt(()=>{Vr()});const i=new URLSearchParams(window.location.search);fn.set(i.get("style")||"dataviz");let a="",s=new Map,f=new Set,u="";jt(()=>{Ze.set(wt())});function c(C){try{let S=JSON.parse(C);n(1,s=Ls(S)),Ze.set(S),n(0,a="")}catch(S){n(0,a=`The file you loaded is broken: ${S}`)}}function p(C){let S=C.properties;var E='<div style="max-width: 30vw;">';return E+=`<h2>${$(S.name)} (${S.intervention_type})</h2>`,E+=`<p>Scheme reference: ${S.scheme_reference}</p>`,S.length_meters&&(E+=`<p>Length: ${Xr(S.length_meters)}</p>`),S.description&&(E+=`<p>${$(S.description)}</p>`),E+="</div>",E}function $(C){return u?C.replace(new RegExp(u,"gi"),S=>`<mark>${S}</mark>`):C}function O(C){f=C,n(2,f)}function k(C){u=C,n(3,u)}return[a,s,f,u,t,o,l,c,p,O,k]}class rp extends z{constructor(e){super(),q(this,e,np,tp,G,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new rp({target:document.getElementById("app")});
