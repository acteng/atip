import{S as V,i as q,s as G,M as Xr,b as X,c as Z,e as M,d as O,g as h,av as Kr,h as J,j as $,k as C,m as b,w as ut,l as Y,t as m,n as _,p as d,q as v,aH as Re,aI as ze,aJ as We,aK as Ue,a2 as he,y as le,o as se,H as Zr,N as ae,a5 as pt,aQ as tt,x,aR as ie,aS as Ke,aT as Yr,aU as Jr,aV as Qr,r as mt,u as y,f as an,am as xr,C as $t,ao as kr,T as st,F as Sr,a as gt,v as $n,I as W,B as Qt,aA as eo,ax as je,aL as to,aM as no,ad as ro,_ as fn,P as oo,Y as lo,aP as K,an as Be,ay as Ct,aW as _e,aX as De,R as Cr,aY as Tr,aZ as un,E as Lr,a_ as dn,D as so,aO as gn,L as io,z as ao,aE as fo}from"./index-ce0806b9.js";import{g as ot,u as uo,e as Or,m as co,f as Tt,C as Ee,b as vt,d as ue,c as po,a as mo,B as $o,S as go,L as _o,M as ho}from"./StreetViewController-dbaf1fd4.js";import{L as bo,h as _n,f as Ar,l as vo,C as Ae,Z as yo,I as wo}from"./index-737d8ea1.js";import{F as ko}from"./FileInput-49e31f74.js";import{I as Gt}from"./InteractiveLayer-c6d1a4ca.js";const So="/atip/svelte_maplibre_v2/assets/help-d011708a.svg";function Co(r){let e,n;const t=r[1].default,o=Re(t,r,r[4],null);return{c(){e=M("div"),o&&o.c(),J(e,"class","govuk-prose")},m(l,i){$(l,e,i),o&&o.m(e,null),n=!0},p(l,i){o&&o.p&&(!n||i&16)&&ze(o,t,l,l[4],n?Ue(t,l[4],i,null):We(l[4]),null)},i(l){n||(m(o,l),n=!0)},o(l){_(o,l),n=!1},d(l){l&&d(e),o&&o.d(l)}}}function To(r){let e,n,t,o,l,i,a,s,f;function u(p){r[3](p)}let c={title:"Help",$$slots:{default:[Co]},$$scope:{ctx:r}};return r[0]!==void 0&&(c.open=r[0]),l=new Xr({props:c}),X.push(()=>Z(l,"open",u)),{c(){e=M("button"),n=M("img"),o=O(),h(l.$$.fragment),Kr(n.src,t=So)||J(n,"src",t),J(n,"title","Help"),J(n,"alt","Help"),J(e,"class","svelte-7d9d1l")},m(p,g){$(p,e,g),C(e,n),$(p,o,g),b(l,p,g),a=!0,s||(f=ut(e,"click",r[2]),s=!0)},p(p,[g]){const k={};g&16&&(k.$$scope={dirty:g,ctx:p}),!i&&g&1&&(i=!0,k.open=p[0],Y(()=>i=!1)),l.$set(k)},i(p){a||(m(l.$$.fragment,p),a=!0)},o(p){_(l.$$.fragment,p),a=!1},d(p){p&&(d(e),d(o)),v(l,p),s=!1,f()}}}function Lo(r,e,n){let{$$slots:t={},$$scope:o}=e,l=!1;const i=()=>n(0,l=!0);function a(s){l=s,n(0,l)}return r.$$set=s=>{"$$scope"in s&&n(4,o=s.$$scope)},[l,t,i,a,o]}class pe extends V{constructor(e){super(),q(this,e,Lo,To,G,{})}}function hn(r){let e;return n=>{if(n)for(let t in n){let o=e==null?void 0:e[t],l=n[t];o!==l&&r(t,l,o)}else if(e)for(let t in e)r(t,void 0,e[t]);e=n}}function Oo(r,...e){let n=[r];for(let t of e)if(t)Array.isArray(t)&&t[0]===r?n.push(...t.slice(1)):n.push(t);else continue;if(n.length!==1)return n.length===2?n[1]:n}function Ao(r){return r===!0?["has","point_count"]:r===!1?["!",["has","point_count"]]:void 0}function ge(r,e){return["case",["boolean",["feature-state","hover"],!1],e,r]}var Lt=Io;function Io(r){var e,n,t;if(r){if(Array.isArray(r)){for(e=[],n=r.length,t=0;t<n;t++){var o=r[t];o!=null&&e.push(o)}return e}if(typeof r=="object"){e={};var l=Object.keys(r);for(n=l.length,t=0;t<n;t++){var i=l[t],a=r[i];a!=null&&(e[i]=a)}return e}}}function bn(r){let e=r[0],n,t,o=vn(r);return{c(){o.c(),n=he()},m(l,i){o.m(l,i),$(l,n,i),t=!0},p(l,i){i[0]&1&&G(e,e=l[0])?(le(),_(o,1,1,x),se(),o=vn(l),o.c(),m(o,1),o.m(n.parentNode,n)):o.p(l,i)},i(l){t||(m(o),t=!0)},o(l){_(o),t=!1},d(l){l&&d(n),o.d(l)}}}function vn(r){let e;const n=r[35].default,t=Re(n,r,r[34],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l[1]&8)&&ze(t,n,o,o[34],e?Ue(n,o[34],l,null):We(o[34]),null)},i(o){e||(m(t,o),e=!0)},o(o){_(t,o),e=!1},d(o){t&&t.d(o)}}}function Mo(r){let e,n,t=r[0]&&bn(r);return{c(){t&&t.c(),e=he()},m(o,l){t&&t.m(o,l),$(o,e,l),n=!0},p(o,l){o[0]?t?(t.p(o,l),l[0]&1&&m(t,1)):(t=bn(o),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(le(),_(t,1,1,()=>{t=null}),se())},i(o){n||(m(t),n=!0)},o(o){_(t),n=!1},d(o){o&&d(e),t&&t.d(o)}}}function Po(r,e,n){let t,o,l,i,a,s,f,u,c,p,g,k,{$$slots:w={},$$scope:T}=e,{id:S=ot("layer")}=e,{source:A=void 0}=e,{sourceLayer:B=void 0}=e,{beforeId:P=void 0}=e,{beforeLayerType:D=void 0}=e,{type:F}=e,{paint:I=void 0}=e,{layout:N=void 0}=e,{filter:j=void 0}=e,{applyToClusters:L=void 0}=e,{minzoom:E=void 0}=e,{maxzoom:z=void 0}=e,{manageHoverState:U=!1}=e,{hovered:ne=null}=e,{hoverCursor:Te=void 0}=e,{eventsIfTopMost:ee=!1}=e;const ce=Zr(),{map:be,source:ve,self:me,minzoom:Ie,maxzoom:we,eventTopMost:ke}=uo();ae(r,be,R=>n(30,c=R)),ae(r,ve,R=>n(31,p=R)),ae(r,me,R=>n(0,u=R)),ae(r,Ie,R=>n(33,k=R)),ae(r,we,R=>n(32,g=R)),pt(()=>{u&&c&&(c==null||c.removeLayer(u))});let de;return r.$$set=R=>{"id"in R&&n(7,S=R.id),"source"in R&&n(8,A=R.source),"sourceLayer"in R&&n(9,B=R.sourceLayer),"beforeId"in R&&n(10,P=R.beforeId),"beforeLayerType"in R&&n(11,D=R.beforeLayerType),"type"in R&&n(12,F=R.type),"paint"in R&&n(13,I=R.paint),"layout"in R&&n(14,N=R.layout),"filter"in R&&n(15,j=R.filter),"applyToClusters"in R&&n(16,L=R.applyToClusters),"minzoom"in R&&n(17,E=R.minzoom),"maxzoom"in R&&n(18,z=R.maxzoom),"manageHoverState"in R&&n(19,U=R.manageHoverState),"hovered"in R&&n(6,ne=R.hovered),"hoverCursor"in R&&n(20,Te=R.hoverCursor),"eventsIfTopMost"in R&&n(21,ee=R.eventsIfTopMost),"$$scope"in R&&n(34,T=R.$$scope)},r.$$.update=()=>{if(r.$$.dirty[0]&65536&&n(29,t=Ao(L)),r.$$.dirty[0]&536903680&&n(28,o=Oo("all",t,j)),r.$$.dirty[0]&131072|r.$$.dirty[1]&4&&n(24,l=E??k),r.$$.dirty[0]&262144|r.$$.dirty[1]&2&&n(23,i=z??g),r.$$.dirty[0]&256|r.$$.dirty[1]&1&&n(27,a=A||p),r.$$.dirty[0]&1509457537&&c&&u!==S&&a){let R=function(te){var Ve,qe;if(!u||!c||ee&&ke(te)!==u)return;let H=te.features??[],re=(qe=(Ve=H[0])==null?void 0:Ve.properties)==null?void 0:qe.cluster_id,fe={event:te,map:c,clusterId:re,layer:u,source:a,features:H};ce(te.type,fe)},Se=P;if(!P&&D){let te=c.getStyle().layers,H=typeof D=="function"?D:fe=>fe.type===D,re=te==null?void 0:te.find(H);re&&(Se=re.id)}tt(me,u=S,u),c.addLayer(Lt({id:u,type:F,source:a,"source-layer":B,filter:o,paint:I,layout:N,minzoom:l,maxzoom:i}),Se),c.on("click",u,R),c.on("dblclick",u,R),c.on("contextmenu",u,R),c.on("mouseenter",u,te=>{var Ve,qe;if(!u||!c||ee&&ke(te)!==u)return;Te&&(c.getCanvas().style.cursor=Te);let H=te.features??[];n(6,ne=H[0]??null);let re=(qe=(Ve=H[0])==null?void 0:Ve.properties)==null?void 0:qe.cluster_id;ce("mouseenter",{event:te,map:c,clusterId:re,layer:u,source:a,features:H})}),c.on("mousemove",u,te=>{var Ve,qe,mn;if(ee&&ke(te)!==u)return;let H=te.features??[],re=(qe=(Ve=H[0])==null?void 0:Ve.properties)==null?void 0:qe.cluster_id,fe=(mn=H[0])==null?void 0:mn.id;fe!==de&&(U&&(de!==void 0&&(c==null||c.setFeatureState({source:a,id:de},{hover:!1})),c==null||c.setFeatureState({source:a,id:fe},{hover:!0})),n(22,de=fe),n(6,ne=H[0]??null)),ce("mousemove",{event:te,map:c,clusterId:re,layer:u,source:a,features:H})}),c.on("mouseleave",u,te=>{!u||!c||(Te&&(c.getCanvas().style.cursor=""),n(6,ne=null),U&&de!==void 0&&(c==null||c.setFeatureState({source:a,id:de},{hover:!1}),n(22,de=void 0)),ce("mouseleave",{map:c,layer:u,source:a}))})}r.$$.dirty[0]&1073741825&&n(26,s=u?hn((R,Se)=>c==null?void 0:c.setPaintProperty(u,R,Se)):void 0),r.$$.dirty[0]&1073741825&&n(25,f=u?hn((R,Se)=>c==null?void 0:c.setLayoutProperty(u,R,Se)):void 0),r.$$.dirty[0]&67117056&&(s==null||s(I)),r.$$.dirty[0]&33570816&&(f==null||f(N)),r.$$.dirty[0]&1098907649&&u&&(c==null||c.setLayerZoomRange(u,l,i))},[u,be,ve,me,Ie,we,ne,S,A,B,P,D,F,I,N,j,L,E,z,U,Te,ee,de,i,l,f,s,a,o,t,c,p,g,k,T,w]}class Wt extends V{constructor(e){super(),q(this,e,Po,Mo,G,{id:7,source:8,sourceLayer:9,beforeId:10,beforeLayerType:11,type:12,paint:13,layout:14,filter:15,applyToClusters:16,minzoom:17,maxzoom:18,manageHoverState:19,hovered:6,hoverCursor:20,eventsIfTopMost:21},null,[-1,-1])}}function Eo(r){let e;const n=r[15].default,t=Re(n,r,r[23],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&8388608)&&ze(t,n,o,o[23],e?Ue(n,o[23],l,null):We(o[23]),null)},i(o){e||(m(t,o),e=!0)},o(o){_(t,o),e=!1},d(o){t&&t.d(o)}}}function No(r){let e,n,t;function o(i){r[16](i)}let l={id:r[1],type:"circle",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],$$slots:{default:[Eo]},$$scope:{ctx:r}};return r[0]!==void 0&&(l.hovered=r[0]),e=new Wt({props:l}),X.push(()=>Z(e,"hovered",o)),e.$on("click",r[17]),e.$on("dblclick",r[18]),e.$on("contextmenu",r[19]),e.$on("mouseenter",r[20]),e.$on("mousemove",r[21]),e.$on("mouseleave",r[22]),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,[a]){const s={};a&2&&(s.id=i[1]),a&4&&(s.source=i[2]),a&8&&(s.sourceLayer=i[3]),a&16&&(s.beforeId=i[4]),a&32&&(s.beforeLayerType=i[5]),a&64&&(s.paint=i[6]),a&128&&(s.layout=i[7]),a&256&&(s.filter=i[8]),a&512&&(s.applyToClusters=i[9]),a&1024&&(s.minzoom=i[10]),a&2048&&(s.maxzoom=i[11]),a&4096&&(s.hoverCursor=i[12]),a&8192&&(s.manageHoverState=i[13]),a&16384&&(s.eventsIfTopMost=i[14]),a&8388608&&(s.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,s.hovered=i[0],Y(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Do(r,e,n){let{$$slots:t={},$$scope:o}=e,{id:l=ot("circle")}=e,{source:i=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:f=void 0}=e,{paint:u}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{applyToClusters:g=void 0}=e,{minzoom:k=void 0}=e,{maxzoom:w=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:S=!1}=e,{hovered:A=null}=e,{eventsIfTopMost:B=!1}=e;function P(E){A=E,n(0,A)}function D(E){ie.call(this,r,E)}function F(E){ie.call(this,r,E)}function I(E){ie.call(this,r,E)}function N(E){ie.call(this,r,E)}function j(E){ie.call(this,r,E)}function L(E){ie.call(this,r,E)}return r.$$set=E=>{"id"in E&&n(1,l=E.id),"source"in E&&n(2,i=E.source),"sourceLayer"in E&&n(3,a=E.sourceLayer),"beforeId"in E&&n(4,s=E.beforeId),"beforeLayerType"in E&&n(5,f=E.beforeLayerType),"paint"in E&&n(6,u=E.paint),"layout"in E&&n(7,c=E.layout),"filter"in E&&n(8,p=E.filter),"applyToClusters"in E&&n(9,g=E.applyToClusters),"minzoom"in E&&n(10,k=E.minzoom),"maxzoom"in E&&n(11,w=E.maxzoom),"hoverCursor"in E&&n(12,T=E.hoverCursor),"manageHoverState"in E&&n(13,S=E.manageHoverState),"hovered"in E&&n(0,A=E.hovered),"eventsIfTopMost"in E&&n(14,B=E.eventsIfTopMost),"$$scope"in E&&n(23,o=E.$$scope)},[A,l,i,a,s,f,u,c,p,g,k,w,T,S,B,t,P,D,F,I,N,j,L,o]}class ct extends V{constructor(e){super(),q(this,e,Do,No,G,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14})}}function Fo(r){let e;const n=r[14].default,t=Re(n,r,r[22],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&4194304)&&ze(t,n,o,o[22],e?Ue(n,o[22],l,null):We(o[22]),null)},i(o){e||(m(t,o),e=!0)},o(o){_(t,o),e=!1},d(o){t&&t.d(o)}}}function jo(r){let e,n,t;function o(i){r[15](i)}let l={id:r[1],type:"fill",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],minzoom:r[9],maxzoom:r[10],hoverCursor:r[11],manageHoverState:r[12],eventsIfTopMost:r[13],$$slots:{default:[Fo]},$$scope:{ctx:r}};return r[0]!==void 0&&(l.hovered=r[0]),e=new Wt({props:l}),X.push(()=>Z(e,"hovered",o)),e.$on("click",r[16]),e.$on("dblclick",r[17]),e.$on("contextmenu",r[18]),e.$on("mouseenter",r[19]),e.$on("mousemove",r[20]),e.$on("mouseleave",r[21]),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,[a]){const s={};a&2&&(s.id=i[1]),a&4&&(s.source=i[2]),a&8&&(s.sourceLayer=i[3]),a&16&&(s.beforeId=i[4]),a&32&&(s.beforeLayerType=i[5]),a&64&&(s.paint=i[6]),a&128&&(s.layout=i[7]),a&256&&(s.filter=i[8]),a&512&&(s.minzoom=i[9]),a&1024&&(s.maxzoom=i[10]),a&2048&&(s.hoverCursor=i[11]),a&4096&&(s.manageHoverState=i[12]),a&8192&&(s.eventsIfTopMost=i[13]),a&4194304&&(s.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,s.hovered=i[0],Y(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Bo(r,e,n){let{$$slots:t={},$$scope:o}=e,{id:l=ot("fill")}=e,{source:i=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:f=void 0}=e,{paint:u}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{minzoom:g=void 0}=e,{maxzoom:k=void 0}=e,{hoverCursor:w=void 0}=e,{manageHoverState:T=!1}=e,{hovered:S=null}=e,{eventsIfTopMost:A=!1}=e;function B(L){S=L,n(0,S)}function P(L){ie.call(this,r,L)}function D(L){ie.call(this,r,L)}function F(L){ie.call(this,r,L)}function I(L){ie.call(this,r,L)}function N(L){ie.call(this,r,L)}function j(L){ie.call(this,r,L)}return r.$$set=L=>{"id"in L&&n(1,l=L.id),"source"in L&&n(2,i=L.source),"sourceLayer"in L&&n(3,a=L.sourceLayer),"beforeId"in L&&n(4,s=L.beforeId),"beforeLayerType"in L&&n(5,f=L.beforeLayerType),"paint"in L&&n(6,u=L.paint),"layout"in L&&n(7,c=L.layout),"filter"in L&&n(8,p=L.filter),"minzoom"in L&&n(9,g=L.minzoom),"maxzoom"in L&&n(10,k=L.maxzoom),"hoverCursor"in L&&n(11,w=L.hoverCursor),"manageHoverState"in L&&n(12,T=L.manageHoverState),"hovered"in L&&n(0,S=L.hovered),"eventsIfTopMost"in L&&n(13,A=L.eventsIfTopMost),"$$scope"in L&&n(22,o=L.$$scope)},[S,l,i,a,s,f,u,c,p,g,k,w,T,A,t,B,P,D,F,I,N,j,o]}class Ye extends V{constructor(e){super(),q(this,e,Bo,jo,G,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13})}}function yn(r){let e=r[0],n,t,o=wn(r);return{c(){o.c(),n=he()},m(l,i){o.m(l,i),$(l,n,i),t=!0},p(l,i){i&1&&G(e,e=l[0])?(le(),_(o,1,1,x),se(),o=wn(l),o.c(),m(o,1),o.m(n.parentNode,n)):o.p(l,i)},i(l){t||(m(o),t=!0)},o(l){_(o),t=!1},d(l){l&&d(n),o.d(l)}}}function wn(r){let e;const n=r[15].default,t=Re(n,r,r[14],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&16384)&&ze(t,n,o,o[14],e?Ue(n,o[14],l,null):We(o[14]),null)},i(o){e||(m(t,o),e=!0)},o(o){_(t,o),e=!1},d(o){t&&t.d(o)}}}function Ho(r){let e,n,t=r[0]&&yn(r);return{c(){t&&t.c(),e=he()},m(o,l){t&&t.m(o,l),$(o,e,l),n=!0},p(o,[l]){o[0]?t?(t.p(o,l),l&1&&m(t,1)):(t=yn(o),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(le(),_(t,1,1,()=>{t=null}),se())},i(o){n||(m(t),n=!0)},o(o){_(t),n=!1},d(o){o&&d(e),t&&t.d(o)}}}function Ro(r,e){if(r.getSource(e)){let n=[];for(let t of r.getStyle().layers)"source"in t&&t.source==e&&n.push(t.id);for(let t of n)console.log(`had to remove ${t} first`),r.removeLayer(t);r.removeSource(e)}}function zo(r,e,n){let t,o,l,{$$slots:i={},$$scope:a}=e,{id:s=ot("geojson")}=e,{data:f}=e,{generateId:u=!1}=e,{promoteId:c=void 0}=e,{filter:p=void 0}=e,{lineMetrics:g=void 0}=e,{cluster:k=void 0}=e;const{map:w,cluster:T,self:S}=Or();ae(r,w,P=>n(13,t=P)),ae(r,T,P=>n(16,l=P)),ae(r,S,P=>n(0,o=P));let A,B=!0;return pt(()=>{if(console.log("gj source getting torn down"),o){let P=o;if(console.log(`... will be removing ${P}`),tt(S,o=null,o),n(11,A=void 0),t!=null&&t.loaded()){console.log(`... actually removed ${P}`),Ro(t,P);let D=t.getSource(P);console.log(`its gone, right? ${D}`)}}}),r.$$set=P=>{"id"in P&&n(4,s=P.id),"data"in P&&n(5,f=P.data),"generateId"in P&&n(6,u=P.generateId),"promoteId"in P&&n(7,c=P.promoteId),"filter"in P&&n(8,p=P.filter),"lineMetrics"in P&&n(9,g=P.lineMetrics),"cluster"in P&&n(10,k=P.cluster),"$$scope"in P&&n(14,a=P.$$scope)},r.$$.update=()=>{r.$$.dirty&1024&&tt(T,l=k,l),r.$$.dirty&10225&&t&&o!==s&&(console.log(`$source is ${o}, id is ${s}`),o&&(console.log(`removing existing $source ${o}`),t.removeSource(o)),tt(S,o=s,o),console.log(`just set $source to ${s}. adding source now.`),t.addSource(o,Lt({type:"geojson",data:f,filter:p,lineMetrics:g,generateId:u,promoteId:c,cluster:!!k,clusterMinPoints:k==null?void 0:k.minPoints,clusterMaxZoom:k==null?void 0:k.maxZoom,clusterRadius:k==null?void 0:k.radius,clusterProperties:k==null?void 0:k.properties})),n(11,A=t.getSource(o)),n(12,B=!0)),r.$$.dirty&6176&&A&&(B?n(12,B=!1):A.setData(f)),r.$$.dirty&3072&&(A==null||A.setClusterOptions(Lt({cluster:!!k,clusterMaxZoom:k==null?void 0:k.maxZoom,clusterRadius:k==null?void 0:k.radius})))},[o,w,T,S,s,f,u,c,p,g,k,A,B,t,a,i]}class Ut extends V{constructor(e){super(),q(this,e,zo,Ho,G,{id:4,data:5,generateId:6,promoteId:7,filter:8,lineMetrics:9,cluster:10})}}function Wo(r){let e;const n=r[14].default,t=Re(n,r,r[22],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&4194304)&&ze(t,n,o,o[22],e?Ue(n,o[22],l,null):We(o[22]),null)},i(o){e||(m(t,o),e=!0)},o(o){_(t,o),e=!1},d(o){t&&t.d(o)}}}function Uo(r){let e,n,t;function o(i){r[15](i)}let l={id:r[1],type:"line",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],minzoom:r[9],maxzoom:r[10],hoverCursor:r[11],manageHoverState:r[12],eventsIfTopMost:r[13],$$slots:{default:[Wo]},$$scope:{ctx:r}};return r[0]!==void 0&&(l.hovered=r[0]),e=new Wt({props:l}),X.push(()=>Z(e,"hovered",o)),e.$on("click",r[16]),e.$on("dblclick",r[17]),e.$on("contextmenu",r[18]),e.$on("mouseenter",r[19]),e.$on("mousemove",r[20]),e.$on("mouseleave",r[21]),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,[a]){const s={};a&2&&(s.id=i[1]),a&4&&(s.source=i[2]),a&8&&(s.sourceLayer=i[3]),a&16&&(s.beforeId=i[4]),a&32&&(s.beforeLayerType=i[5]),a&64&&(s.paint=i[6]),a&128&&(s.layout=i[7]),a&256&&(s.filter=i[8]),a&512&&(s.minzoom=i[9]),a&1024&&(s.maxzoom=i[10]),a&2048&&(s.hoverCursor=i[11]),a&4096&&(s.manageHoverState=i[12]),a&8192&&(s.eventsIfTopMost=i[13]),a&4194304&&(s.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,s.hovered=i[0],Y(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Go(r,e,n){let{$$slots:t={},$$scope:o}=e,{id:l=ot("line")}=e,{source:i=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:f=void 0}=e,{paint:u}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{minzoom:g=void 0}=e,{maxzoom:k=void 0}=e,{hoverCursor:w=void 0}=e,{manageHoverState:T=!1}=e,{hovered:S=null}=e,{eventsIfTopMost:A=!1}=e;function B(L){S=L,n(0,S)}function P(L){ie.call(this,r,L)}function D(L){ie.call(this,r,L)}function F(L){ie.call(this,r,L)}function I(L){ie.call(this,r,L)}function N(L){ie.call(this,r,L)}function j(L){ie.call(this,r,L)}return r.$$set=L=>{"id"in L&&n(1,l=L.id),"source"in L&&n(2,i=L.source),"sourceLayer"in L&&n(3,a=L.sourceLayer),"beforeId"in L&&n(4,s=L.beforeId),"beforeLayerType"in L&&n(5,f=L.beforeLayerType),"paint"in L&&n(6,u=L.paint),"layout"in L&&n(7,c=L.layout),"filter"in L&&n(8,p=L.filter),"minzoom"in L&&n(9,g=L.minzoom),"maxzoom"in L&&n(10,k=L.maxzoom),"hoverCursor"in L&&n(11,w=L.hoverCursor),"manageHoverState"in L&&n(12,T=L.manageHoverState),"hovered"in L&&n(0,S=L.hovered),"eventsIfTopMost"in L&&n(13,A=L.eventsIfTopMost),"$$scope"in L&&n(22,o=L.$$scope)},[S,l,i,a,s,f,u,c,p,g,k,w,T,A,t,B,P,D,F,I,N,j,o]}class Ce extends V{constructor(e){super(),q(this,e,Go,Uo,G,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13})}}function kn(r){let e=r[0],n,t,o=Sn(r);return{c(){o.c(),n=he()},m(l,i){o.m(l,i),$(l,n,i),t=!0},p(l,i){i&1&&G(e,e=l[0])?(le(),_(o,1,1,x),se(),o=Sn(l),o.c(),m(o,1),o.m(n.parentNode,n)):o.p(l,i)},i(l){t||(m(o),t=!0)},o(l){_(o),t=!1},d(l){l&&d(n),o.d(l)}}}function Sn(r){let e;const n=r[8].default,t=Re(n,r,r[7],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&128)&&ze(t,n,o,o[7],e?Ue(n,o[7],l,null):We(o[7]),null)},i(o){e||(m(t,o),e=!0)},o(o){_(t,o),e=!1},d(o){t&&t.d(o)}}}function Vo(r){let e,n,t=r[0]&&kn(r);return{c(){t&&t.c(),e=he()},m(o,l){t&&t.m(o,l),$(o,e,l),n=!0},p(o,[l]){o[0]?t?(t.p(o,l),l&1&&m(t,1)):(t=kn(o),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(le(),_(t,1,1,()=>{t=null}),se())},i(o){n||(m(t),n=!0)},o(o){_(t),n=!1},d(o){o&&d(e),t&&t.d(o)}}}function qo(r,e,n){let t,o,{$$slots:l={},$$scope:i}=e,{id:a=ot("vector")}=e,{url:s=null}=e,{tiles:f=null}=e;if(s&&s.includes("pmtiles://")&&!Ke.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let p=new Jr;Ke.addProtocol("pmtiles",p.tile)}const{map:u,self:c}=Or();return ae(r,u,p=>n(6,t=p)),ae(r,c,p=>n(0,o=p)),pt(()=>{if(o){let p=o;tt(c,o=null,o),Yr().then(()=>{t!=null&&t.loaded()&&(t==null||t.removeSource(p))})}}),r.$$set=p=>{"id"in p&&n(3,a=p.id),"url"in p&&n(4,s=p.url),"tiles"in p&&n(5,f=p.tiles),"$$scope"in p&&n(7,i=p.$$scope)},r.$$.update=()=>{r.$$.dirty&121&&t&&o!==a&&(o&&t.removeSource(o),tt(c,o=a,o),t.addSource(o,Lt({type:"vector",url:s,tiles:f})))},[o,u,c,a,s,f,t,i,l]}class ye extends V{constructor(e){super(),q(this,e,qo,Vo,G,{id:3,url:4,tiles:5})}}const Xo=r=>({features:r[0]&16,data:r[0]&16,map:r[0]&4,close:r[0]&1}),Cn=r=>{var e;return{features:r[4],data:(e=r[4])==null?void 0:e[0],map:r[2],close:r[29]}};function Tn(r){let e,n,t=(r[4]||r[3]instanceof Ke.Marker)&&Ln(r);return{c(){e=M("div"),t&&t.c()},m(o,l){$(o,e,l),t&&t.m(e,null),r[30](e),n=!0},p(o,l){o[4]||o[3]instanceof Ke.Marker?t?(t.p(o,l),l[0]&24&&m(t,1)):(t=Ln(o),t.c(),m(t,1),t.m(e,null)):t&&(le(),_(t,1,1,()=>{t=null}),se())},i(o){n||(m(t),n=!0)},o(o){_(t),n=!1},d(o){o&&d(e),t&&t.d(),r[30](null)}}}function Ln(r){let e;const n=r[28].default,t=Re(n,r,r[27],Cn);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l[0]&134217749)&&ze(t,n,o,o[27],e?Ue(n,o[27],l,Xo):We(o[27]),Cn)},i(o){e||(m(t,o),e=!0)},o(o){_(t,o),e=!1},d(o){t&&t.d(o)}}}function Ko(r){let e,n,t=r[8].default&&Tn(r);return{c(){t&&t.c(),e=he()},m(o,l){t&&t.m(o,l),$(o,e,l),n=!0},p(o,l){o[8].default?t?(t.p(o,l),l[0]&256&&m(t,1)):(t=Tn(o),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(le(),_(t,1,1,()=>{t=null}),se())},i(o){n||(m(t),n=!0)},o(o){_(t),n=!1},d(o){o&&d(e),t&&t.d(o)}}}function Zo(r,e,n){let t,o,l,i,a,{$$slots:s={},$$scope:f}=e;const u=Qr(s);let{closeButton:c=void 0}=e,{closeOnClickOutside:p=!0}=e,{closeOnClickInside:g=!1}=e,{closeOnMove:k=!1}=e,{openOn:w="click"}=e,{focusAfterOpen:T=!0}=e,{anchor:S=void 0}=e,{offset:A=void 0}=e,{popupClass:B=void 0}=e,{maxWidth:P=void 0}=e,{lngLat:D=void 0}=e,{html:F=void 0}=e,{open:I=!1}=e;const{map:N,popupTarget:j,layerEvent:L}=co();ae(r,N,H=>n(2,l=H)),ae(r,j,H=>n(3,a=H)),ae(r,L,H=>n(26,i=H));const E=["click","dblclick","contextmenu"];let z,U=!1,ne;function Te(){if(!z)return;let H=z.getElement();!H||H===ne||(ne=H,w==="hover"&&(ne.style.pointerEvents="none"),ne.addEventListener("mouseenter",()=>{n(22,U=!0)},{passive:!0}),ne.addEventListener("mouseleave",()=>{n(22,U=!1)},{passive:!0}),ne.addEventListener("click",()=>{g&&n(0,I=!1)},{passive:!0}))}mt(()=>{if(l)return l.on("click",de),typeof a=="string"&&(l.on("click",a,be),l.on("dblclick",a,be),l.on("contextmenu",a,be),l.on("mousemove",a,ke),l.on("mouseleave",a,we),l.on("touchstart",a,me),l.on("touchend",a,Ie)),()=>{l!=null&&l.loaded()&&(z==null||z.remove(),l.off("click",de),a instanceof Ke.Marker?a.getPopup()===z&&a.setPopup(void 0):typeof a=="string"&&(l.off("click",a,be),l.off("dblclick",a,be),l.off("contextmenu",a,be),l.off("mousemove",a,ke),l.off("mouseleave",a,we),l.off("touchstart",a,me),l.off("touchend",a,Ie)))}});let ee=null,ce="normal";function be(H){H.type===w&&("layerType"in H?H.layerType==="deckgl"?(n(9,D=H.coordinate),n(4,ee=H.object?[H.object]:null)):(n(9,D=H.lngLat),n(4,ee=H.features??[])):(n(9,D=H.lngLat),n(4,ee=H.features??[])),setTimeout(()=>n(0,I=!0)))}let ve=null;function me(H){ve=H.point}function Ie(H){if(!ve||w!=="hover")return;let re=ve.dist(H.point);ve=null,re<3&&(n(9,D=H.lngLat),n(4,ee=H.features??[]),z.isOpen()?n(23,ce="justOpened"):(n(23,ce="opening"),n(0,I=!0)))}function we(H){w!=="hover"||ve||ce!=="normal"||(n(0,I=!1),n(4,ee=null))}function ke(H){w!=="hover"||ve||ce!=="normal"||(n(0,I=!0),n(4,ee=H.features??[]),n(9,D=H.lngLat))}function de(H){if(ce==="justOpened"){n(23,ce="normal");return}if(!p)return;let re=[ne,a instanceof Ke.Marker?a==null?void 0:a.getElement():null];I&&z.isOpen()&&!re.some(fe=>fe==null?void 0:fe.contains(H.originalEvent.target))&&n(0,I=!1)}let R;const Se=()=>n(0,I=!1);function te(H){X[H?"unshift":"push"](()=>{R=H,n(1,R)})}return r.$$set=H=>{"closeButton"in H&&n(10,c=H.closeButton),"closeOnClickOutside"in H&&n(11,p=H.closeOnClickOutside),"closeOnClickInside"in H&&n(12,g=H.closeOnClickInside),"closeOnMove"in H&&n(13,k=H.closeOnMove),"openOn"in H&&n(14,w=H.openOn),"focusAfterOpen"in H&&n(15,T=H.focusAfterOpen),"anchor"in H&&n(16,S=H.anchor),"offset"in H&&n(17,A=H.offset),"popupClass"in H&&n(18,B=H.popupClass),"maxWidth"in H&&n(19,P=H.maxWidth),"lngLat"in H&&n(9,D=H.lngLat),"html"in H&&n(20,F=H.html),"open"in H&&n(0,I=H.open),"$$scope"in H&&n(27,f=H.$$scope)},r.$$.update=()=>{if(r.$$.dirty[0]&7168&&n(25,t=c??(!p&&!g)),r.$$.dirty[0]&36675584&&(z||(n(21,z=new Ke.Popup({closeButton:t,closeOnClick:!1,closeOnMove:k,focusAfterOpen:T,maxWidth:P,className:B,anchor:S,offset:A})),ne=z.getElement(),z.on("open",()=>{n(0,I=!0),Te()}),z.on("close",H=>{n(0,I=!1)}))),r.$$.dirty[0]&2113544&&z&&a instanceof Ke.Marker&&(w==="click"?a.setPopup(z):a.getPopup()===z&&a.setPopup(void 0)),r.$$.dirty[0]&67125248&&E.includes(w)&&(i==null?void 0:i.type)===w&&(be(i),tt(L,i=null,i)),r.$$.dirty[0]&67125248&&n(24,o=w==="hover"&&((i==null?void 0:i.type)==="mousemove"||(i==null?void 0:i.type)==="mouseenter")),r.$$.dirty[0]&88096768&&w==="hover"&&L&&(o&&i&&(i.layerType==="deckgl"?(n(9,D=i.coordinate),n(4,ee=i.object?[i.object]:null)):(n(9,D=i.lngLat),n(4,ee=i.features??[]))),n(0,I=(o||U)??!1)),r.$$.dirty[0]&3145730&&(R?z.setDOMContent(R):F&&z.setHTML(F)),r.$$.dirty[0]&2097664&&D&&z.setLngLat(D),r.$$.dirty[0]&10485765&&l){let H=z.isOpen();I&&!H?(z.addTo(l),ce==="opening"&&n(23,ce="justOpened")):!I&&H&&z.remove()}},[I,R,l,a,ee,N,j,L,u,D,c,p,g,k,w,T,S,A,B,P,F,z,U,ce,o,t,i,f,s,Se,te]}class $e extends V{constructor(e){super(),q(this,e,Zo,Ko,G,{closeButton:10,closeOnClickOutside:11,closeOnClickInside:12,closeOnMove:13,openOn:14,focusAfterOpen:15,anchor:16,offset:17,popupClass:18,maxWidth:19,lngLat:9,html:20,open:0},null,[-1,-1])}}function Yo(r){let e;const n=r[15].default,t=Re(n,r,r[23],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&8388608)&&ze(t,n,o,o[23],e?Ue(n,o[23],l,null):We(o[23]),null)},i(o){e||(m(t,o),e=!0)},o(o){_(t,o),e=!1},d(o){t&&t.d(o)}}}function Jo(r){let e,n,t;function o(i){r[16](i)}let l={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],$$slots:{default:[Yo]},$$scope:{ctx:r}};return r[0]!==void 0&&(l.hovered=r[0]),e=new Wt({props:l}),X.push(()=>Z(e,"hovered",o)),e.$on("click",r[17]),e.$on("dblclick",r[18]),e.$on("contextmenu",r[19]),e.$on("mouseenter",r[20]),e.$on("mousemove",r[21]),e.$on("mouseleave",r[22]),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,[a]){const s={};a&2&&(s.id=i[1]),a&4&&(s.source=i[2]),a&8&&(s.sourceLayer=i[3]),a&16&&(s.beforeId=i[4]),a&32&&(s.beforeLayerType=i[5]),a&64&&(s.paint=i[6]),a&128&&(s.layout=i[7]),a&256&&(s.filter=i[8]),a&512&&(s.applyToClusters=i[9]),a&1024&&(s.minzoom=i[10]),a&2048&&(s.maxzoom=i[11]),a&4096&&(s.hoverCursor=i[12]),a&8192&&(s.manageHoverState=i[13]),a&16384&&(s.eventsIfTopMost=i[14]),a&8388608&&(s.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,s.hovered=i[0],Y(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Qo(r,e,n){let{$$slots:t={},$$scope:o}=e,{id:l=ot("symbol")}=e,{source:i=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:f=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{applyToClusters:g=void 0}=e,{minzoom:k=void 0}=e,{maxzoom:w=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:S=!1}=e,{hovered:A=null}=e,{eventsIfTopMost:B=!1}=e;function P(E){A=E,n(0,A)}function D(E){ie.call(this,r,E)}function F(E){ie.call(this,r,E)}function I(E){ie.call(this,r,E)}function N(E){ie.call(this,r,E)}function j(E){ie.call(this,r,E)}function L(E){ie.call(this,r,E)}return r.$$set=E=>{"id"in E&&n(1,l=E.id),"source"in E&&n(2,i=E.source),"sourceLayer"in E&&n(3,a=E.sourceLayer),"beforeId"in E&&n(4,s=E.beforeId),"beforeLayerType"in E&&n(5,f=E.beforeLayerType),"paint"in E&&n(6,u=E.paint),"layout"in E&&n(7,c=E.layout),"filter"in E&&n(8,p=E.filter),"applyToClusters"in E&&n(9,g=E.applyToClusters),"minzoom"in E&&n(10,k=E.minzoom),"maxzoom"in E&&n(11,w=E.maxzoom),"hoverCursor"in E&&n(12,T=E.hoverCursor),"manageHoverState"in E&&n(13,S=E.manageHoverState),"hovered"in E&&n(0,A=E.hovered),"eventsIfTopMost"in E&&n(14,B=E.eventsIfTopMost),"$$scope"in E&&n(23,o=E.$$scope)},[A,l,i,a,s,f,u,c,p,g,k,w,T,S,B,t,P,D,F,I,N,j,L,o]}class xo extends V{constructor(e){super(),q(this,e,Qo,Jo,G,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14})}}function el(r){let e;return{c(){e=M("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function tl(r){let e,n,t,o,l=r[0]=="Private (development)"&&el();return{c(){l&&l.c(),e=O(),n=M("p"),n.textContent="Note the ATF scheme data has not been validated.",t=O(),o=M("p"),o.innerHTML=`Please contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      about any problems, ideas, or feedback for this site.`},m(i,a){l&&l.m(i,a),$(i,e,a),$(i,n,a),$(i,t,a),$(i,o,a)},p:x,d(i){i&&(d(e),d(n),d(t),d(o)),l&&l.d(i)}}}function nl(r){let e,n,t,o,l,i;return l=new pe({props:{$$slots:{default:[tl]},$$scope:{ctx:r}}}),{c(){e=M("p"),n=y("App version: "),t=y(r[0]),o=O(),h(l.$$.fragment)},m(a,s){$(a,e,s),C(e,n),C(e,t),C(e,o),b(l,e,null),i=!0},p(a,[s]){const f={};s&2&&(f.$$scope={dirty:s,ctx:a}),l.$set(f)},i(a){i||(m(l.$$.fragment,a),i=!0)},o(a){_(l.$$.fragment,a),i=!1},d(a){a&&d(e),v(l)}}}function rl(r){return[an()]}class ol extends V{constructor(e){super(),q(this,e,rl,nl,G,{})}}const ll={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Le=Uint8Array,et=Uint16Array,Ir=Uint32Array,Mr=new Le([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Pr=new Le([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),sl=new Le([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Er=function(r,e){for(var n=new et(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var o=new Ir(n[30]),t=1;t<30;++t)for(var l=n[t];l<n[t+1];++l)o[l]=l-n[t]<<5|t;return[n,o]},Nr=Er(Mr,2),Dr=Nr[0],il=Nr[1];Dr[28]=258,il[258]=28;var al=Er(Pr,0),fl=al[0],xt=new et(32768);for(var oe=0;oe<32768;++oe){var Xe=(oe&43690)>>>1|(oe&21845)<<1;Xe=(Xe&52428)>>>2|(Xe&13107)<<2,Xe=(Xe&61680)>>>4|(Xe&3855)<<4,xt[oe]=((Xe&65280)>>>8|(Xe&255)<<8)>>>1}var dt=function(r,e,n){for(var t=r.length,o=0,l=new et(e);o<t;++o)r[o]&&++l[r[o]-1];var i=new et(e);for(o=0;o<e;++o)i[o]=i[o-1]+l[o-1]<<1;var a;if(n){a=new et(1<<e);var s=15-e;for(o=0;o<t;++o)if(r[o])for(var f=o<<4|r[o],u=e-r[o],c=i[r[o]-1]++<<u,p=c|(1<<u)-1;c<=p;++c)a[xt[c]>>>s]=f}else for(a=new et(t),o=0;o<t;++o)r[o]&&(a[o]=xt[i[r[o]-1]++]>>>15-r[o]);return a},yt=new Le(288);for(var oe=0;oe<144;++oe)yt[oe]=8;for(var oe=144;oe<256;++oe)yt[oe]=9;for(var oe=256;oe<280;++oe)yt[oe]=7;for(var oe=280;oe<288;++oe)yt[oe]=8;var Fr=new Le(32);for(var oe=0;oe<32;++oe)Fr[oe]=5;var ul=dt(yt,9,1),cl=dt(Fr,5,1),Vt=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},Me=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},qt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},pl=function(r){return(r+7)/8|0},cn=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?et:r.BYTES_PER_ELEMENT==4?Ir:Le)(n-e);return t.set(r.subarray(e,n)),t},ml=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Pe=function(r,e,n){var t=new Error(e||ml[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Pe),!n)throw t;return t},$l=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new Le(0);var o=!e||n,l=!n||n.i;n||(n={}),e||(e=new Le(t*3));var i=function(Se){var te=e.length;if(Se>te){var H=new Le(Math.max(te*2,Se));H.set(e),e=H}},a=n.f||0,s=n.p||0,f=n.b||0,u=n.l,c=n.d,p=n.m,g=n.n,k=t*8;do{if(!u){a=Me(r,s,1);var w=Me(r,s+1,3);if(s+=3,w)if(w==1)u=ul,c=cl,p=9,g=5;else if(w==2){var B=Me(r,s,31)+257,P=Me(r,s+10,15)+4,D=B+Me(r,s+5,31)+1;s+=14;for(var F=new Le(D),I=new Le(19),N=0;N<P;++N)I[sl[N]]=Me(r,s+N*3,7);s+=P*3;for(var j=Vt(I),L=(1<<j)-1,E=dt(I,j,1),N=0;N<D;){var z=E[Me(r,s,L)];s+=z&15;var T=z>>>4;if(T<16)F[N++]=T;else{var U=0,ne=0;for(T==16?(ne=3+Me(r,s,3),s+=2,U=F[N-1]):T==17?(ne=3+Me(r,s,7),s+=3):T==18&&(ne=11+Me(r,s,127),s+=7);ne--;)F[N++]=U}}var Te=F.subarray(0,B),ee=F.subarray(B);p=Vt(Te),g=Vt(ee),u=dt(Te,p,1),c=dt(ee,g,1)}else Pe(1);else{var T=pl(s)+4,S=r[T-4]|r[T-3]<<8,A=T+S;if(A>t){l&&Pe(0);break}o&&i(f+S),e.set(r.subarray(T,A),f),n.b=f+=S,n.p=s=A*8,n.f=a;continue}if(s>k){l&&Pe(0);break}}o&&i(f+131072);for(var ce=(1<<p)-1,be=(1<<g)-1,ve=s;;ve=s){var U=u[qt(r,s)&ce],me=U>>>4;if(s+=U&15,s>k){l&&Pe(0);break}if(U||Pe(2),me<256)e[f++]=me;else if(me==256){ve=s,u=null;break}else{var Ie=me-254;if(me>264){var N=me-257,we=Mr[N];Ie=Me(r,s,(1<<we)-1)+Dr[N],s+=we}var ke=c[qt(r,s)&be],de=ke>>>4;ke||Pe(3),s+=ke&15;var ee=fl[de];if(de>3){var we=Pr[de];ee+=qt(r,s)&(1<<we)-1,s+=we}if(s>k){l&&Pe(0);break}o&&i(f+131072);for(var R=f+Ie;f<R;f+=4)e[f]=e[f-ee],e[f+1]=e[f+1-ee],e[f+2]=e[f+2-ee],e[f+3]=e[f+3-ee];f=R}}n.l=u,n.p=ve,n.b=f,n.f=a,u&&(a=1,n.m=p,n.d=c,n.n=g)}while(!a);return f==e.length?e:cn(e,0,f)},dl=new Le(0),Fe=function(r,e){return r[e]|r[e+1]<<8},Ne=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},Xt=function(r,e){return Ne(r,e)+Ne(r,e+4)*4294967296};function gl(r,e){return $l(r,e)}var en=typeof TextDecoder<"u"&&new TextDecoder,_l=0;try{en.decode(dl,{stream:!0}),_l=1}catch{}var hl=function(r){for(var e="",n=0;;){var t=r[n++],o=(t>127)+(t>223)+(t>239);if(n+o>r.length)return[e,cn(r,n-1)];o?o==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):o&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function jr(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(en)return en.decode(r);var o=hl(r),l=o[0],i=o[1];return i.length&&Pe(8),l}}var bl=function(r,e){return e+30+Fe(r,e+26)+Fe(r,e+28)},vl=function(r,e,n){var t=Fe(r,e+28),o=jr(r.subarray(e+46,e+46+t),!(Fe(r,e+8)&2048)),l=e+46+t,i=Ne(r,e+20),a=n&&i==4294967295?yl(r,l):[i,Ne(r,e+24),Ne(r,e+42)],s=a[0],f=a[1],u=a[2];return[Fe(r,e+10),s,f,o,l+Fe(r,e+30)+Fe(r,e+32),u]},yl=function(r,e){for(;Fe(r,e)!=1;e+=4+Fe(r,e+2));return[Xt(r,e+12),Xt(r,e+4),Xt(r,e+20)]};function wl(r,e){for(var n={},t=r.length-22;Ne(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Pe(13);var o=Fe(r,t+8);if(!o)return{};var l=Ne(r,t+16),i=l==4294967295||o==65535;if(i){var a=Ne(r,t-12);i=Ne(r,a)==101075792,i&&(o=Ne(r,a+32),l=Ne(r,a+48))}for(var s=e&&e.filter,f=0;f<o;++f){var u=vl(r,l,i),c=u[0],p=u[1],g=u[2],k=u[3],w=u[4],T=u[5],S=bl(r,T);l=w,(!s||s({name:k,size:p,originalSize:g,compression:c}))&&(c?c==8?n[k]=gl(r.subarray(S,S+p),new Le(g)):Pe(14,"unknown compression type "+c):n[k]=cn(r,S,S+p))}return n}function kl(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(Kt):Kt(r)}function Kt(r){var e=new Uint8Array(r),n=wl(e);return Promise.resolve(Sl(n))}function Sl(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var o=t[n];e[o]=jr(r[o])}return e}function He(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&rt(t)===e)return t;n++}}function wt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var o=r.childNodes[t];o.nodeType===1&&rt(o)===e&&n.push(o),t++}return n}function Ot(r,e,n){for(var t=0;t<r.childNodes.length;){var o=r.childNodes[t];e?o.nodeType===1&&rt(o)===e&&n(o,t):n(o,t),t++}}function Cl(r,e,n){var t=[];return Ot(r,e,function(o,l){t.push(n(o,l))}),t}var Tl=/.+\:/;function rt(r){return r.tagName.replace(Tl,"")}function Br(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+rt(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=Br(r.childNodes[t]),t++;return e+="</"+rt(r)+">",e}function Ll(r){var e=r.documentElement,n=He(e,"sheetData"),t=[];return Ot(n,"row",function(o){Ot(o,"c",function(l){t.push(l)})}),t}function Ol(r,e){return He(e,"v")}function Al(r,e){if(e.firstChild&&rt(e.firstChild)==="is"&&e.firstChild.firstChild&&rt(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Il(r){var e=r.documentElement,n=He(e,"dimension");if(n)return n.getAttribute("ref")}function Ml(r){var e=r.documentElement,n=He(e,"cellStyleXfs");return n?wt(n,"xf"):[]}function Pl(r){var e=r.documentElement,n=He(e,"cellXfs");return n?wt(n,"xf"):[]}function El(r){var e=r.documentElement,n=He(e,"numFmts");return n?wt(n,"numFmt"):[]}function Nl(r){var e=r.documentElement;return Cl(e,"si",function(n){var t=He(n,"t");if(t)return t.textContent;var o="";return Ot(n,"r",function(l){o+=He(l,"t").textContent}),o})}function Dl(r){var e=r.documentElement;return He(e,"workbookPr")}function Fl(r){var e=r.documentElement;return wt(e,"Relationship")}function jl(r){var e=r.documentElement,n=He(e,"sheets");return wt(n,"sheet")}function Bl(r,e){var n=e.createDocument(r),t={},o=Dl(n);o&&o.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var l=function(a){a.getAttribute("name")&&t.sheets.push({id:a.getAttribute("sheetId"),name:a.getAttribute("name"),relationId:a.getAttribute("r:id")})};return jl(n).forEach(l),t}function Hl(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},o=function(i){var a=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=Zt(a);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=Zt(a);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=Zt(a);break}};return Fl(n).forEach(o),t}function Zt(r){return r[0]==="/"?r.slice(1):"xl/"+r}function On(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function An(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?On(Object(n),!0).forEach(function(t){Rl(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):On(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Rl(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function zl(r,e){if(!r)return{};var n=e.createDocument(r),t=Ml(n).map(Yt),o=El(n).map(Wl).reduce(function(i,a){return i[a.id]=a,i},[]),l=function(a){return a.hasAttribute("xfId")?An(An({},t[a.xfId]),Yt(a,o)):Yt(a,o)};return Pl(n).map(l)}function Wl(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function Yt(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function Ul(r,e){return r?Nl(e.createDocument(r)):[]}function Hr(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function Gl(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Vl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vl(r,e){if(r){if(typeof r=="string")return In(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return In(r,e)}}function In(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ql(r,e,n,t){if(e){var o=n[e];if(!o)throw new Error("Cell style not found: ".concat(e));if(!o.numberFormat)return!1;if(Xl.indexOf(Number(o.numberFormat.id))>=0||t.dateFormat&&o.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&o.numberFormat.template&&Yl(o.numberFormat.template))return!0}}var Xl=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],Kl=/^\[\$-414\]/,Zl=/;@$/;function Yl(r){r=r.toLowerCase(),r=r.replace(Kl,""),r=r.replace(Zl,"");for(var e=r.split(/\W+/),n=Gl(e),t;!(t=n()).done;){var o=t.value;if(Jl.indexOf(o)<0)return!1}return!0}var Jl=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function Ql(r,e,n){var t=n.getInlineStringValue,o=n.getInlineStringXml,l=n.getStyleId,i=n.styles,a=n.values,s=n.properties,f=n.options;switch(e||(e="n"),e){case"str":r=Jt(r,f);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(o()));r=Jt(r,f);break;case"s":var u=Number(r);if(isNaN(u))throw new Error('Invalid "shared" string index: '.concat(r));if(u>=a.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=a[u],r=Jt(r,f);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=xl(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var p=Number(r);if(isNaN(p))throw new Error('Invalid "numeric" cell value: '.concat(r));r=p,ql(r,l(),i,f)&&(r=Hr(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function xl(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function Jt(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var es=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function ts(r){var e=function(f,u){return f-u},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),o=n[0],l=n[n.length-1],i=t[0],a=t[t.length-1];return[{row:o,column:i},{row:l,column:a}]}function ns(r){for(var e=0,n=0;n<r.length;)e*=26,e+=es.indexOf(r[n]),n++;return e}function Rr(r){return r=r.split(/(\d+)/),[parseInt(r[1]),ns(r[0].trim())]}function rs(r,e,n,t,o,l,i){var a=Rr(r.getAttribute("r")),s=Ol(e,r),f=s&&s.textContent,u;return r.hasAttribute("t")&&(u=r.getAttribute("t")),{row:a[0],column:a[1],value:Ql(f,u,{getInlineStringValue:function(){return Al(e,r)},getInlineStringXml:function(){return Br(r)},getStyleId:function(){return r.getAttribute("s")},styles:o,values:t,properties:l,options:i})}}function os(r,e,n,t,o,l){var i=Ll(r);return i.length===0?[]:i.map(function(a){return rs(a,r,e,n,t,o,l)})}function ls(r,e){return fs(r)||as(r,e)||is(r,e)||ss()}function ss(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function is(r,e){if(r){if(typeof r=="string")return Mn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mn(r,e)}}function Mn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function as(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],o=!0,l=!1,i,a;try{for(n=n.call(r);!(o=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));o=!0);}catch(s){l=!0,a=s}finally{try{!o&&n.return!=null&&n.return()}finally{if(l)throw a}}return t}}function fs(r){if(Array.isArray(r))return r}function us(r){var e=Il(r);if(e)return e=e.split(":").map(Rr).map(function(n){var t=ls(n,2),o=t[0],l=t[1];return{row:o,column:l}}),e.length===1&&(e=[e[0],e[0]]),e}function cs(r,e,n,t,o,l){var i=e.createDocument(r),a=os(i,e,n,t,o,l),s=us(i)||ts(a);return{cells:a,dimensions:s}}function ps(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ms(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ms(r,e){if(r){if(typeof r=="string")return Pn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pn(r,e)}}function Pn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function $s(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,o=t===void 0?function(c){return c}:t,l=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var a=!0,s=ps(r[i]),f;!(f=s()).done;){var u=f.value;if(o(u)!==null){a=!1;break}}if(a)r.splice(i,1),n&&n.splice(i,1);else if(l)break;i--}return r}function ds(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=gs(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gs(r,e){if(r){if(typeof r=="string")return En(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return En(r,e)}}function En(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function _s(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,o=e.onlyTrimAtTheEnd,l=r[0].length-1;l>=0;){for(var i=!0,a=ds(r),s;!(s=a()).done;){var f=s.value;if(t(f[l])!==null){i=!1;break}}if(i)for(var u=0;u<r.length;)r[u].splice(l,1),u++;else if(o)break;l--}return r}function hs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=zr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bs(r,e){return ws(r)||ys(r,e)||zr(r,e)||vs()}function vs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zr(r,e){if(r){if(typeof r=="string")return Nn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nn(r,e)}}function Nn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ys(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],o=!0,l=!1,i,a;try{for(n=n.call(r);!(o=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));o=!0);}catch(s){l=!0,a=s}finally{try{!o&&n.return!=null&&n.return()}finally{if(l)throw a}}return t}}function ws(r){if(Array.isArray(r))return r}function ks(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var o=bs(n,2);o[0];for(var l=o[1],i=l.column,a=l.row,s=new Array(a),f=0;f<a;){s[f]=new Array(i);for(var u=0;u<i;)s[f][u]=null,u++;f++}for(var c=hs(t),p;!(p=c()).done;){var g=p.value,k=g.row-1,w=g.column-1;w<i&&k<a&&(s[k][w]=g.value)}var T=e.rowMap;if(T)for(var S=0;S<s.length;)T[S]=S,S++;return s=$s(_s(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:T}),e.transformData&&(s=e.transformData(s)),s}function Ss(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Cs(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cs(r,e){if(r){if(typeof r=="string")return Dn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dn(r,e)}}function Dn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Fn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function Ts(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fn(Object(n),!0).forEach(function(t){Ls(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Fn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ls(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Os(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Ts({sheet:1},n));var t=function(p){if(!r[p])throw new Error('"'.concat(p,'" file not found inside the *.xlsx file zip archive'));return r[p]},o=Hl(t("xl/_rels/workbook.xml.rels"),e),l=o.sharedStrings?Ul(t(o.sharedStrings),e):[],i=o.styles?zl(t(o.styles),e):{},a=Bl(t("xl/workbook.xml"),e);if(n.getSheets)return a.sheets.map(function(c){var p=c.name;return{name:p}});var s=As(n.sheet,a.sheets);if(!s||!o.sheets[s])throw Is(n.sheet,a.sheets);var f=cs(t(o.sheets[s]),e,l,i,a,n),u=ks(f,n);return n.properties?{data:u,properties:a}:u}function As(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=Ss(e),o;!(o=t()).done;){var l=o.value;if(l.name===r)return l.relationId}}function Is(r,e){var n=e&&e.map(function(t,o){return'"'.concat(t.name,'" (#').concat(o+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function tn(r){"@babel/helpers - typeof";return tn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tn(r)}function jn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function Ms(r,e,n){return e&&jn(r.prototype,e),n&&jn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function Ps(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Es(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&_t(r,e)}function Ns(r){var e=Wr();return function(){var t=ht(r),o;if(e){var l=ht(this).constructor;o=Reflect.construct(t,arguments,l)}else o=t.apply(this,arguments);return Ds(this,o)}}function Ds(r,e){if(e&&(tn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fs(r)}function Fs(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function nn(r){var e=typeof Map=="function"?new Map:void 0;return nn=function(t){if(t===null||!js(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,o)}function o(){return St(t,arguments,ht(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),_t(o,t)},nn(r)}function St(r,e,n){return Wr()?St=Reflect.construct:St=function(o,l,i){var a=[null];a.push.apply(a,l);var s=Function.bind.apply(o,a),f=new s;return i&&_t(f,i.prototype),f},St.apply(null,arguments)}function Wr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function js(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function _t(r,e){return _t=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t},_t(r,e)}function ht(r){return ht=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ht(r)}var Oe=function(r){Es(n,r);var e=Ns(n);function n(t){var o;return Ps(this,n),o=e.call(this,"invalid"),o.reason=t,o}return Ms(n)}(nn(Error));function Bs(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new Oe("not_a_number")}if(typeof r!="number")throw new Oe("not_a_number");if(isNaN(r))throw new Oe("invalid_number");if(!isFinite(r))throw new Oe("out_of_bounds");return r}function Hs(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new Oe("invalid_number");if(!isFinite(r))throw new Oe("out_of_bounds");return String(r)}throw new Oe("not_a_string")}function Rs(r){if(typeof r=="boolean")return r;throw new Oe("not_a_boolean")}function zs(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new Oe("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new Oe("invalid_number");if(!isFinite(r))throw new Oe("out_of_bounds");var t=Hr(r,n);if(isNaN(t.valueOf()))throw new Oe("out_of_bounds");return t}throw new Oe("not_a_date")}function Ws(r,e){return Vs(r)||Gs(r,e)||Ur(r,e)||Us()}function Us(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gs(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],o=!0,l=!1,i,a;try{for(n=n.call(r);!(o=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));o=!0);}catch(s){l=!0,a=s}finally{try{!o&&n.return!=null&&n.return()}finally{if(l)throw a}}return t}}function Vs(r){if(Array.isArray(r))return r}function rn(r){"@babel/helpers - typeof";return rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rn(r)}function qs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ur(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ur(r,e){if(r){if(typeof r=="string")return Bn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bn(r,e)}}function Bn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Hn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function Rn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Hn(Object(n),!0).forEach(function(t){Xs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Hn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Xs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var zn={isColumnOriented:!1};function Ks(r,e,n){n?n=Rn(Rn({},zn),n):n=zn;var t=n,o=t.isColumnOriented,l=t.rowMap,i=t.ignoreEmptyRows;Qs(e),o&&(r=Js(r));for(var a=r[0],s=[],f=[],u=1;u<r.length;u++){var c=Gr(e,r[u],u,a,f,n);(c!==null||i===!1)&&s.push(c)}if(l)for(var p=qs(f),g;!(g=p()).done;){var k=g.value;k.row=l[k.row-1]+1}return{rows:s,errors:f}}function Gr(r,e,n,t,o,l){for(var i={},a=!0,s=function(){var p=u[f],g=r[p],k=rn(g.type)==="object"&&!Array.isArray(g.type),w=e[t.indexOf(p)];w===void 0&&(w=null);var T=void 0,S=void 0,A=void 0;if(k)T=Gr(g.type,e,n,t,o,l);else if(w===null)T=null;else if(Array.isArray(g.type)){var B=!1,P=Ys(w).map(function(F){var I=Wn(F,g,l);return I.error&&(T=F,S=I.error,A=I.reason),I.value!==null&&(B=!0),I.value});S||(T=B?P:null)}else{var D=Wn(w,g,l);S=D.error,A=D.reason,T=S?w:D.value}!S&&T===null&&g.required&&(S="required"),S?(S={error:S,row:n+1,column:p,value:T},A&&(S.reason=A),g.type&&(S.type=g.type),o.push(S)):(a&&T!==null&&(a=!1),(T!==null||l.includeNullValues)&&(i[g.prop]=T))},f=0,u=Object.keys(r);f<u.length;f++)s();return a?null:i}function Wn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=lt(r,e.parse):e.type?t=Zs(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(o){return{error:o.message}}}return t}function lt(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function Zs(r,e,n){switch(e){case String:return lt(r,Hs);case Number:return lt(r,Bs);case Date:return lt(r,function(t){return zs(t,{properties:n.properties})});case Boolean:return lt(r,Rs);default:if(typeof e=="function")return lt(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Vr(r,e,n){for(var t=0,o="";n+t<r.length;){var l=r[n+t];if(l===e)return[o,t];if(l==='"'){var i=Vr(r,'"',n+t+1);o+=i[0],t+=1+i[1]+1}else o+=l,t++}return[o,t]}function Ys(r){for(var e=[],n=0;n<r.length;){var t=Vr(r,",",n),o=Ws(t,2),l=o[0],i=o[1];n+=i+1,e.push(l.trim())}return e}var Js=function(e){return e[0].map(function(n,t){return e.map(function(o){return o[t]})})};function Qs(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],o=r[t];if(!o.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function on(r){"@babel/helpers - typeof";return on=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},on(r)}function qr(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var o=t[n],l=r[o],i=void 0;on(l)==="object"&&(l=Object.keys(r[o])[0],i=qr(r[o][l])),e[o]={prop:l},i&&(e[o].type=i)}return e}var xs=["schema","map"];function Un(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function kt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Un(Object(n),!0).forEach(function(t){ei(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function ei(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ti(r,e){if(r==null)return{};var n=ni(r,e),t,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);for(o=0;o<l.length;o++)t=l[o],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function ni(r,e){if(r==null)return{};var n={},t=Object.keys(r),o,l;for(l=0;l<t.length;l++)o=t[l],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}function ri(r,e,n){var t=n.schema,o=n.map,l=ti(n,xs);!t&&o&&(t=qr(o));var i=Os(r,e,kt(kt({},l),{},{properties:t||l.properties}));return t?Ks(i.data,t,kt(kt({},l),{},{properties:i.properties})):i}function oi(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return kl(r).then(function(n){return ri(n,ll,e)})}function li(r){let e=new Map;for(let[t,o]of Object.entries(r.schemes))e.set(t,{scheme_reference:t,num_features:0,authority_or_region:o.authority_or_region,capital_scheme_id:o.capital_scheme_id,funding_programme:o.funding_programme});let n=1;for(let t of r.features){let o=e.get(t.properties.scheme_reference);o.num_features++,t.properties.funding_programme=o.funding_programme,t.id=n++}return e}async function si(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await oi(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let o of n){let l=xr(o.lat_lon.split(",").map(parseFloat).reverse()),i=o;i.submission_time=o.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:l},id:t.features.length+1})}return t}const Q={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"},Ze=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function ii(r){let e,n,t,o,l;function i(s){r[3](s)}let a={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return r[0]!==void 0&&(a.value=r[0]),e=new Tt({props:a}),X.push(()=>Z(e,"value",i)),e.$on("change",r[2]),o=new bo({props:{rows:r[1]}}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};!n&&f&1&&(n=!0,u.value=s[0],Y(()=>n=!1)),e.$set(u);const c={};f&2&&(c.rows=s[1]),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}function ai(r,e,n){let t;ae(r,$t,s=>n(4,t=s));let o="interventionType",l=_n("v1");function i(){let s;o=="interventionType"?(s=Ar("v1"),n(1,l=_n("v1"))):(s=kr(["get","funding_programme"],{ATF2:Q.atf2,ATF3:Q.atf3,ATF4:Q.atf4},"grey"),n(1,l=[["ATF2",Q.atf2],["ATF3",Q.atf3],["ATF4",Q.atf4]])),t.setPaintProperty("interventions-points","circle-color",s),t.setPaintProperty("interventions-lines","line-color",s),t.setPaintProperty("interventions-polygons","fill-color",s),t.setPaintProperty("interventions-polygon-outlines","line-color",s)}function a(s){o=s,n(0,o)}return[o,l,i,a]}class fi extends V{constructor(e){super(),q(this,e,ai,ii,G,{})}}function ui(r){let e;return{c(){e=y("Clear")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function ci(r){let e,n,t,o,l,i;return t=new gt({props:{$$slots:{default:[ui]},$$scope:{ctx:r}}}),t.$on("click",r[13]),{c(){e=M("input"),n=O(),h(t.$$.fragment),J(e,"type","text"),J(e,"class","govuk-input govuk-input--width-10"),J(e,"id","filterText")},m(a,s){$(a,e,s),$n(e,r[0]),$(a,n,s),b(t,a,s),o=!0,l||(i=ut(e,"input",r[12]),l=!0)},p(a,s){s&1&&e.value!==a[0]&&$n(e,a[0]);const f={};s&131072&&(f.$$scope={dirty:s,ctx:a}),t.$set(f)},i(a){o||(m(t.$$.fragment,a),o=!0)},o(a){_(t.$$.fragment,a),o=!1},d(a){a&&(d(e),d(n)),v(t,a),l=!1,i()}}}function pi(r){let e,n,t,o,l,i,a,s,f,u;function c(w){r[10](w)}let p={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[2]!==void 0&&(p.value=r[2]),e=new Tt({props:p}),X.push(()=>Z(e,"value",c));function g(w){r[11](w)}let k={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[3]!==void 0&&(k.value=r[3]),o=new Tt({props:k}),X.push(()=>Z(o,"value",g)),a=new Sr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[ci]},$$scope:{ctx:r}}}),f=new fi({}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment),i=O(),h(a.$$.fragment),s=O(),h(f.$$.fragment)},m(w,T){b(e,w,T),$(w,t,T),b(o,w,T),$(w,i,T),b(a,w,T),$(w,s,T),b(f,w,T),u=!0},p(w,T){const S={};T&32&&(S.choices=w[5]),!n&&T&4&&(n=!0,S.value=w[2],Y(()=>n=!1)),e.$set(S);const A={};T&64&&(A.choices=w[6]),!l&&T&8&&(l=!0,A.value=w[3],Y(()=>l=!1)),o.$set(A);const B={};T&131073&&(B.$$scope={dirty:T,ctx:w}),a.$set(B)},i(w){u||(m(e.$$.fragment,w),m(o.$$.fragment,w),m(a.$$.fragment,w),m(f.$$.fragment,w),u=!0)},o(w){_(e.$$.fragment,w),_(o.$$.fragment,w),_(a.$$.fragment,w),_(f.$$.fragment,w),u=!1},d(w){w&&(d(t),d(i),d(s)),v(e,w),v(o,w),v(a,w),v(f,w)}}}function mi(r){let e,n=r[1].size.toLocaleString()+"",t,o,l=r[7].route.toLocaleString()+"",i,a,s=r[7].area.toLocaleString()+"",f,u,c=r[7].crossing.toLocaleString()+"",p,g,k=r[7].other.toLocaleString()+"",w,T;return{c(){e=y("Showing "),t=y(n),o=y(" schemes ("),i=y(l),a=y(`
    routes, `),f=y(s),u=y(` areas,
    `),p=y(c),g=y(" crossings, "),w=y(k),T=y(`
    other)`)},m(S,A){$(S,e,A),$(S,t,A),$(S,o,A),$(S,i,A),$(S,a,A),$(S,f,A),$(S,u,A),$(S,p,A),$(S,g,A),$(S,w,A),$(S,T,A)},p(S,A){A&2&&n!==(n=S[1].size.toLocaleString()+"")&&W(t,n),A&128&&l!==(l=S[7].route.toLocaleString()+"")&&W(i,l),A&128&&s!==(s=S[7].area.toLocaleString()+"")&&W(f,s),A&128&&c!==(c=S[7].crossing.toLocaleString()+"")&&W(p,c),A&128&&k!==(k=S[7].other.toLocaleString()+"")&&W(w,k)},d(S){S&&(d(e),d(t),d(o),d(i),d(a),d(f),d(u),d(p),d(g),d(w),d(T))}}}function $i(r){let e,n,t;function o(i){r[14](i)}let l={id:"show-schemes",$$slots:{default:[mi]},$$scope:{ctx:r}};return r[4]!==void 0&&(l.checked=r[4]),e=new ue({props:l}),X.push(()=>Z(e,"checked",o)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const s={};a&131202&&(s.$$scope={dirty:a,ctx:i}),!n&&a&16&&(n=!0,s.checked=i[4],Y(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function di(r){let e,n,t,o;return e=new Ee({props:{label:"Filters",$$slots:{default:[pi]},$$scope:{ctx:r}}}),t=new vt({props:{small:!0,$$slots:{default:[$i]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},p(l,[i]){const a={};i&131181&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&131218&&(s.$$scope={dirty:i,ctx:l}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function gi(r,e,n){let t,o;ae(r,st,P=>n(15,t=P)),ae(r,$t,P=>n(9,o=P));let{schemes:l}=e,{schemesToBeShown:i=new Set}=e,{filterText:a=""}=e,s=[],f="",u=[],c="",p={area:0,route:0,crossing:0,other:0},g=!0;mt(()=>{let P=new Set,D=new Set;for(let F of l.values())F.authority_or_region&&P.add(F.authority_or_region),F.funding_programme&&D.add(F.funding_programme);n(5,s=Array.from(P.entries())),s.sort(),n(6,u=Array.from(D.entries())),u.sort()});function k(P,D,F){let I=P.toLowerCase(),N=L=>{var E,z;if(I&&!((E=L.properties.name)!=null&&E.toLowerCase().includes(I))&&!((z=L.properties.description)!=null&&z.toLowerCase().includes(I)))return!1;if(D||F){let U=l.get(L.properties.scheme_reference);if(D&&U.authority_or_region!=D||F&&U.funding_programme!=F)return!1}return!0};n(1,i=new Set(t.features.filter(N).map(L=>L.properties.scheme_reference))),n(7,p={area:0,route:0,crossing:0,other:0});let j=L=>{var E,z;return!(!i.has(L.properties.scheme_reference)||I&&!((E=L.properties.name)!=null&&E.toLowerCase().includes(I))&&!((z=L.properties.description)!=null&&z.toLowerCase().includes(I)))};st.update(L=>{for(let E of L.features)j(E)?(delete E.properties.hide_while_editing,n(7,p[E.properties.intervention_type]++,p)):E.properties.hide_while_editing=!0;return L}),n(7,p)}function w(P){f=P,n(2,f)}function T(P){c=P,n(3,c)}function S(){a=this.value,n(0,a)}const A=()=>n(0,a="");function B(P){g=P,n(4,g)}return r.$$set=P=>{"schemes"in P&&n(8,l=P.schemes),"schemesToBeShown"in P&&n(1,i=P.schemesToBeShown),"filterText"in P&&n(0,a=P.filterText)},r.$$.update=()=>{if(r.$$.dirty&528&&o)for(let P of["interventions-polygons","interventions-polygon-outlines","interventions-lines","interventions-lines-endpoints","interventions-points"])o.getLayer(P)&&o.setLayoutProperty(P,"visibility",g?"visible":"none");r.$$.dirty&13&&k(a,f,c)},[a,i,f,c,g,s,u,p,l,o,w,T,S,A,B]}class _i extends V{constructor(e){super(),q(this,e,gi,di,G,{schemes:8,schemesToBeShown:1,filterText:0})}}function hi(r,e,n){let t;ae(r,$t,a=>n(3,t=a));let o=null,{markerPosition:l}=e,{markerPositionUpdated:i}=e;return mt(()=>{o=new Qt.Marker({draggable:!0}).setLngLat(l).addTo(t),o.on("dragstart",()=>{t.getCanvas().style.cursor="grabbing"}),o.on("drag",()=>{n(0,l=o.getLngLat()),i()}),o.on("dragend",()=>{t.getCanvas().style.cursor="inherit"})}),pt(()=>{o&&o.remove()}),r.$$set=a=>{"markerPosition"in a&&n(0,l=a.markerPosition),"markerPositionUpdated"in a&&n(1,i=a.markerPositionUpdated)},[l,i]}class bi extends V{constructor(e){super(),q(this,e,hi,null,G,{markerPosition:0,markerPositionUpdated:1})}}function Gn(r,e,n){const t=r.slice();return t[16]=e[n],t[17]=e,t[18]=n,t}function vi(r){let e,n;return e=new gt({props:{$$slots:{default:[wi]},$$scope:{ctx:r}}}),e.$on("click",r[4]),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&524288&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yi(r){let e,n;return e=new gt({props:{$$slots:{default:[ki]},$$scope:{ctx:r}}}),e.$on("click",r[3]),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&524288&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wi(r){let e;return{c(){e=y("Disable Line Measurement Tool")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function ki(r){let e;return{c(){e=y("Enable Line Measurement Tool")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Vn(r){var c;let e,n,t,o=[],l=new Map,i,a,s=r[2]&&((c=r[2].properties)==null?void 0:c.length)&&qn(r);n=new Ee({props:{label:"Help",$$slots:{default:[Si]},$$scope:{ctx:r}}});let f=je(r[1]);const u=p=>p[16].id;for(let p=0;p<f.length;p+=1){let g=Gn(r,f,p),k=u(g);l.set(k,o[p]=Xn(k,g))}return{c(){s&&s.c(),e=O(),h(n.$$.fragment),t=O();for(let p=0;p<o.length;p+=1)o[p].c();i=he()},m(p,g){s&&s.m(p,g),$(p,e,g),b(n,p,g),$(p,t,g);for(let k=0;k<o.length;k+=1)o[k]&&o[k].m(p,g);$(p,i,g),a=!0},p(p,g){var w;p[2]&&((w=p[2].properties)!=null&&w.length)?s?s.p(p,g):(s=qn(p),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null);const k={};g&524288&&(k.$$scope={dirty:g,ctx:p}),n.$set(k),g&130&&(f=je(p[1]),le(),o=to(o,g,u,1,p,f,l,i.parentNode,no,Xn,i,Gn),se())},i(p){if(!a){m(n.$$.fragment,p);for(let g=0;g<f.length;g+=1)m(o[g]);a=!0}},o(p){_(n.$$.fragment,p);for(let g=0;g<o.length;g+=1)_(o[g]);a=!1},d(p){p&&(d(e),d(t),d(i)),s&&s.d(p),v(n,p);for(let g=0;g<o.length;g+=1)o[g].d(p)}}}function qn(r){var i;let e,n,t=((i=r[2].properties)==null?void 0:i.length)+"",o,l;return{c(){e=M("p"),n=y("Length: "),o=y(t),l=y("m")},m(a,s){$(a,e,s),C(e,n),C(e,o),C(e,l)},p(a,s){var f;s&4&&t!==(t=((f=a[2].properties)==null?void 0:f.length)+"")&&W(o,t)},d(a){a&&d(e)}}}function Si(r){let e;return{c(){e=M("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and Drag</b>
        an existing waypoint to move it</li> <li><b>Hold shift and click on</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(n,t){$(n,e,t)},p:x,d(n){n&&d(e)}}}function Xn(r,e){let n,t,o,l;function i(s){e[8](s,e[16])}let a={markerPositionUpdated:e[7]};return e[16].lngLat!==void 0&&(a.markerPosition=e[16].lngLat),t=new bi({props:a}),X.push(()=>Z(t,"markerPosition",i)),{key:r,first:null,c(){n=he(),h(t.$$.fragment),this.first=n},m(s,f){$(s,n,f),b(t,s,f),l=!0},p(s,f){e=s;const u={};!o&&f&2&&(o=!0,u.markerPosition=e[16].lngLat,Y(()=>o=!1)),t.$set(u)},i(s){l||(m(t.$$.fragment,s),l=!0)},o(s){_(t.$$.fragment,s),l=!1},d(s){s&&d(n),v(t,s)}}}function Ci(r){let e,n,t,o,l,i,a;const s=[yi,vi],f=[];function u(p,g){return p[0]?0:1}e=u(r),n=f[e]=s[e](r);let c=!r[0]&&Vn(r);return{c(){n.c(),t=O(),c&&c.c(),o=he()},m(p,g){f[e].m(p,g),$(p,t,g),c&&c.m(p,g),$(p,o,g),l=!0,i||(a=[ut(window,"keydown",r[5]),ut(window,"keyup",r[6])],i=!0)},p(p,[g]){let k=e;e=u(p),e===k?f[e].p(p,g):(le(),_(f[k],1,1,()=>{f[k]=null}),se(),n=f[e],n?n.p(p,g):(n=f[e]=s[e](p),n.c()),m(n,1),n.m(t.parentNode,t)),p[0]?c&&(le(),_(c,1,1,()=>{c=null}),se()):c?(c.p(p,g),g&1&&m(c,1)):(c=Vn(p),c.c(),m(c,1),c.m(o.parentNode,o))},i(p){l||(m(n),m(c),l=!0)},o(p){_(n),_(c),l=!1},d(p){p&&(d(t),d(o)),f[e].d(p),c&&c.d(p),i=!1,eo(a)}}}const xe="measurement-line";function Ti(r,e,n){let t;ae(r,$t,B=>n(11,t=B));let o=!0,l=[],i,a=!1,s=0;function f(B){o||(a||(l.push({id:s++,lngLat:B.lngLat}),n(1,l),w()),a&&l.length>0&&(u(B.lngLat),w()))}function u(B){let D=new Qt.LngLat(0,-90).distanceTo(new Qt.LngLat(0,90)),F;l.forEach(I=>{const N=I.lngLat;D>=B.distanceTo(N)&&(F=N,D=B.distanceTo(N))}),F&&n(1,l=l.filter(I=>{const N=I.lngLat;return N.lng!=(F==null?void 0:F.lng)||N.lat!=(F==null?void 0:F.lat)}))}function c(){n(0,o=!1)}function p(){n(0,o=!0),n(1,l=[]),T()}function g(B){B.key==="Shift"&&(a=!0),B.key==="Escape"&&p()}function k(B){B.key==="Shift"&&(a=!1)}function w(){if(l.length<2){T();return}const B=l.map(P=>[P.lngLat.lng,P.lngLat.lat]);n(2,i=ro(B,{})),i.properties&&n(2,i.properties.length=(vo(i)*1e3).toFixed(2),i),S()}function T(){t.getSource(xe)&&(t.getSource(xe).setData(fn()),n(2,i=void 0))}function S(){t.getSource(xe)?t.getSource(xe).setData(i):(oo(t,xe,i),lo(t,{id:xe,source:xe,color:po.measuringLine,width:5}))}mt(()=>{t.on("click",f)}),pt(()=>{t.off("click",f)});function A(B,P){r.$$.not_equal(P.lngLat,B)&&(P.lngLat=B,n(1,l))}return[o,l,i,c,p,g,k,w,A]}class Li extends V{constructor(e){super(),q(this,e,Ti,Ci,G,{})}}function Oi(r){let e;return{c(){e=y(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Ai(r){let e,n,t,o,l;return t=new K({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Oi]},$$scope:{ctx:r}}}),{c(){e=M("p"),n=y("License: "),h(t.$$.fragment),o=y(`. Contains OS data © Crown copyright and database right
  2023.`)},m(i,a){$(i,e,a),C(e,n),b(t,e,null),C(e,o),l=!0},p(i,[a]){const s={};a&1&&(s.$$scope={dirty:a,ctx:i}),t.$set(s)},i(i){l||(m(t.$$.fragment,i),l=!0)},o(i){_(t.$$.fragment,i),l=!1},d(i){i&&d(e),v(t)}}}class Ge extends V{constructor(e){super(),q(this,e,null,Ai,G,{})}}function Kn(r,e,n){const t=r.slice();return t[2]=e[n],t}function Zn(r,e,n){const t=r.slice();return t[5]=e[n],t}function Yn(r){let e,n;return{c(){e=M("span"),n=y(` 
    `),Be(e,"background",r[5]),Be(e,"width","100%"),Be(e,"border","1px solid black")},m(t,o){$(t,e,o),C(e,n)},p(t,o){o&1&&Be(e,"background",t[5])},d(t){t&&d(e)}}}function Jn(r){let e,n=r[2]+"",t;return{c(){e=M("span"),t=y(n)},m(o,l){$(o,e,l),C(e,t)},p(o,l){l&2&&n!==(n=o[2]+"")&&W(t,n)},d(o){o&&d(e)}}}function Ii(r){let e,n,t,o=je(r[0]),l=[];for(let s=0;s<o.length;s+=1)l[s]=Yn(Zn(r,o,s));let i=je(r[1]),a=[];for(let s=0;s<i.length;s+=1)a[s]=Jn(Kn(r,i,s));return{c(){e=M("div");for(let s=0;s<l.length;s+=1)l[s].c();n=O(),t=M("div");for(let s=0;s<a.length;s+=1)a[s].c();Be(e,"display","flex"),Be(t,"display","flex"),Be(t,"justify-content","space-between")},m(s,f){$(s,e,f);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(e,null);$(s,n,f),$(s,t,f);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(t,null)},p(s,[f]){if(f&1){o=je(s[0]);let u;for(u=0;u<o.length;u+=1){const c=Zn(s,o,u);l[u]?l[u].p(c,f):(l[u]=Yn(c),l[u].c(),l[u].m(e,null))}for(;u<l.length;u+=1)l[u].d(1);l.length=o.length}if(f&2){i=je(s[1]);let u;for(u=0;u<i.length;u+=1){const c=Kn(s,i,u);a[u]?a[u].p(c,f):(a[u]=Jn(c),a[u].c(),a[u].m(t,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=i.length}},i:x,o:x,d(s){s&&(d(e),d(n),d(t)),Ct(l,s),Ct(a,s)}}}function Mi(r,e,n){let{colorScale:t}=e,{limits:o}=e;return r.$$set=l=>{"colorScale"in l&&n(0,t=l.colorScale),"limits"in l&&n(1,o=l.limits)},[t,o]}class Je extends V{constructor(e){super(),q(this,e,Mi,Ii,G,{colorScale:0,limits:1})}}function Qn(r){const e=r[15][0].properties.OA21CD;r[16]=e;const n=r[15][0].properties[r[3]];r[17]=n}function Pi(r){let e;return{c(){e=y("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Ei(r){let e;return{c(){e=y(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Ni(r){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Di(r){let e;return{c(){e=y(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Fi(r){let e,n,t,o,l,i,a,s,f,u,c,p;return t=new K({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ei]},$$scope:{ctx:r}}}),l=new K({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ni]},$$scope:{ctx:r}}}),u=new K({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Di]},$$scope:{ctx:r}}}),{c(){e=M("p"),n=y("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),o=y(". Output area boundaries from "),h(l.$$.fragment),i=y("."),a=O(),s=M("p"),f=y("License: "),h(u.$$.fragment),c=y(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(g,k){$(g,e,k),C(e,n),b(t,e,null),C(e,o),b(l,e,null),C(e,i),$(g,a,k),$(g,s,k),C(s,f),b(u,s,null),C(s,c),p=!0},p(g,k){const w={};k&262144&&(w.$$scope={dirty:k,ctx:g}),t.$set(w);const T={};k&262144&&(T.$$scope={dirty:k,ctx:g}),l.$set(T);const S={};k&262144&&(S.$$scope={dirty:k,ctx:g}),u.$set(S)},i(g){p||(m(t.$$.fragment,g),m(l.$$.fragment,g),m(u.$$.fragment,g),p=!0)},o(g){_(t.$$.fragment,g),_(l.$$.fragment,g),_(u.$$.fragment,g),p=!1},d(g){g&&(d(e),d(a),d(s)),v(t),v(l),v(u)}}}function ji(r){let e,n,t;return n=new pe({props:{$$slots:{default:[Fi]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),J(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&262144&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function xn(r){let e,n;return e=new Je({props:{colorScale:r[6],limits:r[8]()}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:x,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Bi(r){let e;return{c(){e=y("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Hi(r){let e;return{c(){e=y(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Ri(r){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function zi(r){let e;return{c(){e=y(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Wi(r){let e,n,t,o,l,i,a,s,f,u,c,p,g,k;return l=new K({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Hi]},$$scope:{ctx:r}}}),a=new K({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ri]},$$scope:{ctx:r}}}),p=new K({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[zi]},$$scope:{ctx:r}}}),{c(){e=M("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=O(),t=M("p"),o=y("Car/van availability data is from the 2021 census, via "),h(l.$$.fragment),i=y(". Output area boundaries from "),h(a.$$.fragment),s=y("."),f=O(),u=M("p"),c=y("License: "),h(p.$$.fragment),g=y(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(w,T){$(w,e,T),$(w,n,T),$(w,t,T),C(t,o),b(l,t,null),C(t,i),b(a,t,null),C(t,s),$(w,f,T),$(w,u,T),C(u,c),b(p,u,null),C(u,g),k=!0},p(w,T){const S={};T&262144&&(S.$$scope={dirty:T,ctx:w}),l.$set(S);const A={};T&262144&&(A.$$scope={dirty:T,ctx:w}),a.$set(A);const B={};T&262144&&(B.$$scope={dirty:T,ctx:w}),p.$set(B)},i(w){k||(m(l.$$.fragment,w),m(a.$$.fragment,w),m(p.$$.fragment,w),k=!0)},o(w){_(l.$$.fragment,w),_(a.$$.fragment,w),_(p.$$.fragment,w),k=!1},d(w){w&&(d(e),d(n),d(t),d(f),d(u)),v(l),v(a),v(p)}}}function Ui(r){let e,n,t;return n=new pe({props:{$$slots:{default:[Wi]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),J(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&262144&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function er(r){let e,n;return e=new Je({props:{colorScale:r[6],limits:r[8]()}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:x,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gi(r){let e;return{c(){e=y("Population density")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Vi(r){let e;return{c(){e=y(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function qi(r){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Xi(r){let e,n,t,o,l,i,a,s,f;return t=new K({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Vi]},$$scope:{ctx:r}}}),l=new K({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[qi]},$$scope:{ctx:r}}}),s=new Ge({}),{c(){e=M("p"),n=y("Population density data is from the 2021 census, via "),h(t.$$.fragment),o=y(". Output area boundaries from "),h(l.$$.fragment),i=y("."),a=O(),h(s.$$.fragment)},m(u,c){$(u,e,c),C(e,n),b(t,e,null),C(e,o),b(l,e,null),C(e,i),$(u,a,c),b(s,u,c),f=!0},p(u,c){const p={};c&262144&&(p.$$scope={dirty:c,ctx:u}),t.$set(p);const g={};c&262144&&(g.$$scope={dirty:c,ctx:u}),l.$set(g)},i(u){f||(m(t.$$.fragment,u),m(l.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),_(l.$$.fragment,u),_(s.$$.fragment,u),f=!1},d(u){u&&(d(e),d(a)),v(t),v(l),v(s,u)}}}function Ki(r){let e,n,t;return n=new pe({props:{$$slots:{default:[Xi]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),J(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&262144&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function tr(r){let e,n,t,o;return t=new Je({props:{colorScale:r[6],limits:r[8]().map(na)}}),{c(){e=M("p"),e.textContent="(people per square kilometres)",n=O(),h(t.$$.fragment)},m(l,i){$(l,e,i),$(l,n,i),b(t,l,i),o=!0},p:x,i(l){o||(m(t.$$.fragment,l),o=!0)},o(l){_(t.$$.fragment,l),o=!1},d(l){l&&(d(e),d(n)),v(t,l)}}}function Zi(r){let e,n,t,o=r[17].toLocaleString()+"",l,i,a=r[16]+"",s;return{c(){e=M("p"),n=y("There are "),t=M("b"),l=y(o),i=y(`
          people per square kilometre in `),s=y(a)},m(f,u){$(f,e,u),C(e,n),C(e,t),C(t,l),C(e,i),C(e,s)},p(f,u){u&32776&&o!==(o=f[17].toLocaleString()+"")&&W(l,o),u&32768&&a!==(a=f[16]+"")&&W(s,a)},d(f){f&&d(e)}}}function Yi(r){let e,n,t=r[16]+"",o,l,i,a=r[17]+"",s,f;return{c(){e=M("p"),n=y("Households in "),o=y(t),l=y(` have an average of
          `),i=M("b"),s=y(a),f=y(`
          cars`)},m(u,c){$(u,e,c),C(e,n),C(e,o),C(e,l),C(e,i),C(i,s),C(e,f)},p(u,c){c&32768&&t!==(t=u[16]+"")&&W(o,t),c&32776&&a!==(a=u[17]+"")&&W(s,a)},d(u){u&&d(e)}}}function Ji(r){let e,n,t=r[17]+"",o,l,i,a=r[16]+"",s,f;return{c(){e=M("p"),n=M("b"),o=y(t),l=y("%"),i=y(`
          of households in `),s=y(a),f=y(" have 1 or more cars")},m(u,c){$(u,e,c),C(e,n),C(n,o),C(n,l),C(e,i),C(e,s),C(e,f)},p(u,c){c&32776&&t!==(t=u[17]+"")&&W(o,t),c&32768&&a!==(a=u[16]+"")&&W(s,a)},d(u){u&&d(e)}}}function Qi(r){Qn(r);let e;function n(l,i){return l[3]=="percent_households_with_car"?Ji:l[3]=="average_cars_per_household"?Yi:Zi}let t=n(r),o=t(r);return{c(){o.c(),e=he()},m(l,i){o.m(l,i),$(l,e,i)},p(l,i){Qn(l),t===(t=n(l))&&o?o.p(l,i):(o.d(1),o=t(l),o&&(o.c(),o.m(e.parentNode,e)))},d(l){l&&d(e),o.d(l)}}}function xi(r){let e,n;return e=new $e({props:{openOn:"hover",$$slots:{default:[Qi,({features:t})=>({15:t}),({features:t})=>t?32768:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&294920&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ea(r){let e,n,t,o;return e=new Ye({props:{id:At,sourceLayer:At,paint:{"fill-color":De(["get",r[3]],r[8](),r[6]),"fill-opacity":ge(.5,.7)},layout:{visibility:r[4]},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[xi]},$$scope:{ctx:r}}}),e.$on("click",r[7]),t=new Ce({props:{id:r[5],paint:{"line-color":"black","line-width":.5},layout:{visibility:r[4]}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&8&&(a.paint={"fill-color":De(["get",l[3]],l[8](),l[6]),"fill-opacity":ge(.5,.7)}),i&16&&(a.layout={visibility:l[4]}),i&262152&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&16&&(s.layout={visibility:l[4]}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function ta(r){let e,n,t,o,l,i,a,s,f,u,c,p,g,k;function w(N){r[9](N)}let T={id:"percent_households_with_car",$$slots:{right:[ji],default:[Pi]},$$scope:{ctx:r}};r[0]!==void 0&&(T.checked=r[0]),e=new ue({props:T}),X.push(()=>Z(e,"checked",w)),e.$on("change",r[10]);let S=r[3]=="percent_households_with_car"&&xn(r);function A(N){r[11](N)}let B={id:"average_cars_per_household",$$slots:{right:[Ui],default:[Bi]},$$scope:{ctx:r}};r[1]!==void 0&&(B.checked=r[1]),l=new ue({props:B}),X.push(()=>Z(l,"checked",A)),l.$on("change",r[12]);let P=r[3]=="average_cars_per_household"&&er(r);function D(N){r[13](N)}let F={id:"population_density",$$slots:{right:[Ki],default:[Gi]},$$scope:{ctx:r}};r[2]!==void 0&&(F.checked=r[2]),f=new ue({props:F}),X.push(()=>Z(f,"checked",D)),f.$on("change",r[14]);let I=r[3]=="population_density"&&tr(r);return g=new ye({props:{url:`pmtiles://${_e()}/v1/${At}.pmtiles`,$$slots:{default:[ea]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),S&&S.c(),o=O(),h(l.$$.fragment),a=O(),P&&P.c(),s=O(),h(f.$$.fragment),c=O(),I&&I.c(),p=O(),h(g.$$.fragment)},m(N,j){b(e,N,j),$(N,t,j),S&&S.m(N,j),$(N,o,j),b(l,N,j),$(N,a,j),P&&P.m(N,j),$(N,s,j),b(f,N,j),$(N,c,j),I&&I.m(N,j),$(N,p,j),b(g,N,j),k=!0},p(N,[j]){const L={};j&262144&&(L.$$scope={dirty:j,ctx:N}),!n&&j&1&&(n=!0,L.checked=N[0],Y(()=>n=!1)),e.$set(L),N[3]=="percent_households_with_car"?S?(S.p(N,j),j&8&&m(S,1)):(S=xn(N),S.c(),m(S,1),S.m(o.parentNode,o)):S&&(le(),_(S,1,1,()=>{S=null}),se());const E={};j&262144&&(E.$$scope={dirty:j,ctx:N}),!i&&j&2&&(i=!0,E.checked=N[1],Y(()=>i=!1)),l.$set(E),N[3]=="average_cars_per_household"?P?(P.p(N,j),j&8&&m(P,1)):(P=er(N),P.c(),m(P,1),P.m(s.parentNode,s)):P&&(le(),_(P,1,1,()=>{P=null}),se());const z={};j&262144&&(z.$$scope={dirty:j,ctx:N}),!u&&j&4&&(u=!0,z.checked=N[2],Y(()=>u=!1)),f.$set(z),N[3]=="population_density"?I?(I.p(N,j),j&8&&m(I,1)):(I=tr(N),I.c(),m(I,1),I.m(p.parentNode,p)):I&&(le(),_(I,1,1,()=>{I=null}),se());const U={};j&262168&&(U.$$scope={dirty:j,ctx:N}),g.$set(U)},i(N){k||(m(e.$$.fragment,N),m(S),m(l.$$.fragment,N),m(P),m(f.$$.fragment,N),m(I),m(g.$$.fragment,N),k=!0)},o(N){_(e.$$.fragment,N),_(S),_(l.$$.fragment,N),_(P),_(f.$$.fragment,N),_(I),_(g.$$.fragment,N),k=!1},d(N){N&&(d(t),d(o),d(a),d(s),d(c),d(p)),v(e,N),S&&S.d(N),v(l,N),P&&P.d(N),v(f,N),I&&I.d(N),v(g,N)}}}let At="census_output_areas";const na=r=>r.toLocaleString();function ra(r,e,n){let t,o=`${At}-outline`,l=Q.sequential_low_to_high,i=!1,a=!1,s=!1,f="";function u(A){let B=A.detail.features[0].properties.OA21CD;f=="percent_households_with_car"||f=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${B}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${B}`,"_blank")}function c(){return f=="percent_households_with_car"?[0,20,40,60,80,100]:f=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function p(A){i=A,n(0,i)}const g=()=>{n(1,a=!1),n(2,s=!1)};function k(A){a=A,n(1,a)}const w=()=>{n(0,i=!1),n(2,s=!1)};function T(A){s=A,n(2,s)}const S=()=>{n(0,i=!1),n(1,a=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(i?n(3,f="percent_households_with_car"):a?n(3,f="average_cars_per_household"):s?n(3,f="population_density"):n(3,f="")),r.$$.dirty&8&&n(4,t=f!=""?"visible":"none")},[i,a,s,f,t,o,l,u,c,p,g,k,w,T,S]}class oa extends V{constructor(e){super(),q(this,e,ra,ta,G,{})}}function la(r){let e,n,t;return e=new Ae({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=y(`
  Combined authorities`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:x,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function sa(r){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function ia(r){let e,n,t,o,l,i,a;return t=new K({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[sa]},$$scope:{ctx:r}}}),i=new Ge({}),{c(){e=M("p"),n=y("Data from "),h(t.$$.fragment),o=y(", as of December 2022."),l=O(),h(i.$$.fragment)},m(s,f){$(s,e,f),C(e,n),b(t,e,null),C(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function aa(r){let e,n,t;return n=new pe({props:{$$slots:{default:[ia]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),J(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function fa(r){let e,n=r[5][0].properties.name+"",t;return{c(){e=M("p"),t=y(n)},m(o,l){$(o,e,l),C(e,t)},p(o,l){l&32&&n!==(n=o[5][0].properties.name+"")&&W(t,n)},d(o){o&&d(e)}}}function ua(r){let e,n;return e=new $e({props:{openOn:"hover",$$slots:{default:[fa,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&96&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ca(r){let e,n,t,o;return e=new Ye({props:{id:It,paint:{"fill-color":r[2],"fill-opacity":ge(0,.5)},layout:{visibility:r[1]},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[ua]},$$scope:{ctx:r}}}),e.$on("click",ma),t=new Ce({props:{id:r[3],paint:{"line-color":r[2],"line-width":2.5},layout:{visibility:r[1]}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&2&&(a.layout={visibility:l[1]}),i&64&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&2&&(s.layout={visibility:l[1]}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function pa(r){let e,n,t,o,l;function i(s){r[4](s)}let a={id:It,$$slots:{right:[aa],default:[la]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ue({props:a}),X.push(()=>Z(e,"checked",i)),o=new Ut({props:{data:`${_e()}/v1/${It}.geojson`,$$slots:{default:[ca]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],Y(()=>n=!1)),e.$set(u);const c={};f&66&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let It="combined_authorities";function ma(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function $a(r,e,n){let t,o=Q.combined_authorities,l=`${It}-outline`,i=!1;function a(s){i=s,n(0,i)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=i?"visible":"none")},[i,t,o,l,a]}class da extends V{constructor(e){super(),q(this,e,$a,pa,G,{})}}function nr(r){const e=r[6][0].properties;r[7]=e}function ga(r){let e;return{c(){e=y("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function _a(r){let e;return{c(){e=y(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function ha(r){let e;return{c(){e=y(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function ba(r){let e,n,t,o,l,i,a,s,f;return t=new K({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[_a]},$$scope:{ctx:r}}}),l=new K({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[ha]},$$scope:{ctx:r}}}),s=new Ge({}),{c(){e=M("p"),n=y("The 2019 English IMD scores come from "),h(t.$$.fragment),o=y(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(l.$$.fragment),i=y("."),a=O(),h(s.$$.fragment)},m(u,c){$(u,e,c),C(e,n),b(t,e,null),C(e,o),b(l,e,null),C(e,i),$(u,a,c),b(s,u,c),f=!0},p(u,c){const p={};c&256&&(p.$$scope={dirty:c,ctx:u}),t.$set(p);const g={};c&256&&(g.$$scope={dirty:c,ctx:u}),l.$set(g)},i(u){f||(m(t.$$.fragment,u),m(l.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),_(l.$$.fragment,u),_(s.$$.fragment,u),f=!1},d(u){u&&(d(e),d(a)),v(t),v(l),v(s,u)}}}function va(r){let e,n,t;return n=new pe({props:{$$slots:{default:[ba]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),J(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&256&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function rr(r){let e,n;return e=new Je({props:{colorScale:r[3],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:x,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ya(r){nr(r);let e,n=r[7].LSOA11CD+"",t,o,l,i=r[7].score+"",a,s,f,u,c,p=r[7].rank.toLocaleString()+"",g,k;return{c(){e=M("p"),t=y(n),o=y(` has an IMD score of
        `),l=M("b"),a=y(i),s=O(),f=M("p"),u=y("Rank: "),c=M("b"),g=y(p),k=y(`
        / 32,844 LSOAs`)},m(w,T){$(w,e,T),C(e,t),C(e,o),C(e,l),C(l,a),$(w,s,T),$(w,f,T),C(f,u),C(f,c),C(c,g),C(f,k)},p(w,T){nr(w),T&64&&n!==(n=w[7].LSOA11CD+"")&&W(t,n),T&64&&i!==(i=w[7].score+"")&&W(a,i),T&64&&p!==(p=w[7].rank.toLocaleString()+"")&&W(g,p)},d(w){w&&(d(e),d(s),d(f))}}}function wa(r){let e,n;return e=new $e({props:{openOn:"hover",$$slots:{default:[ya,({features:t})=>({6:t}),({features:t})=>t?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&320&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ka(r){let e,n,t,o;return e=new Ye({props:{id:bt,sourceLayer:bt,paint:{"fill-color":De(["-",10,["get","decile"]],r[4],r[3]),"fill-opacity":ge(.5,.7)},layout:{visibility:r[1]},manageHoverState:!0,$$slots:{default:[wa]},$$scope:{ctx:r}}}),t=new Ce({props:{id:r[2],paint:{"line-color":"black","line-width":.5},layout:{visibility:r[1]}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&2&&(a.layout={visibility:l[1]}),i&256&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&2&&(s.layout={visibility:l[1]}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function Sa(r){let e,n,t,o,l,i;function a(u){r[5](u)}let s={id:bt,$$slots:{right:[va],default:[ga]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ue({props:s}),X.push(()=>Z(e,"checked",a));let f=r[0]&&rr(r);return l=new ye({props:{url:`pmtiles://${_e()}/v1/${bt}.pmtiles`,$$slots:{default:[ka]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),f&&f.c(),o=O(),h(l.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),f&&f.m(u,c),$(u,o,c),b(l,u,c),i=!0},p(u,[c]){const p={};c&256&&(p.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,p.checked=u[0],Y(()=>n=!1)),e.$set(p),u[0]?f?(f.p(u,c),c&1&&m(f,1)):(f=rr(u),f.c(),m(f,1),f.m(o.parentNode,o)):f&&(le(),_(f,1,1,()=>{f=null}),se());const g={};c&258&&(g.$$scope={dirty:c,ctx:u}),l.$set(g)},i(u){i||(m(e.$$.fragment,u),m(f),m(l.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),_(f),_(l.$$.fragment,u),i=!1},d(u){u&&(d(t),d(o)),v(e,u),f&&f.d(u),v(l,u)}}}let bt="imd";function Ca(r,e,n){let t,o=`${bt}-outline`,l=Q.sequential_low_to_high,i=[0,2,4,6,8,10],a=!1;function s(f){a=f,n(0,a)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=a?"visible":"none")},[a,t,o,l,i,s]}class Ta extends V{constructor(e){super(),q(this,e,Ca,Sa,G,{})}}function La(r){let e,n,t;return e=new Ae({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=y(`
  Local Authority Districts`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:x,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function Oa(r){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Aa(r){let e,n,t,o,l,i,a;return t=new K({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Oa]},$$scope:{ctx:r}}}),i=new Ge({}),{c(){e=M("p"),n=y("Data from "),h(t.$$.fragment),o=y(", as of May 2023."),l=O(),h(i.$$.fragment)},m(s,f){$(s,e,f),C(e,n),b(t,e,null),C(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function Ia(r){let e,n,t;return n=new pe({props:{$$slots:{default:[Aa]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),J(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function Ma(r){let e,n=r[5][0].properties.name+"",t;return{c(){e=M("p"),t=y(n)},m(o,l){$(o,e,l),C(e,t)},p(o,l){l&32&&n!==(n=o[5][0].properties.name+"")&&W(t,n)},d(o){o&&d(e)}}}function Pa(r){let e,n;return e=new $e({props:{openOn:"hover",$$slots:{default:[Ma,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&96&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ea(r){let e,n,t,o;return e=new Ye({props:{id:Mt,paint:{"fill-color":r[2],"fill-opacity":ge(0,.5)},layout:{visibility:r[1]},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[Pa]},$$scope:{ctx:r}}}),e.$on("click",Da),t=new Ce({props:{id:r[3],paint:{"line-color":r[2],"line-width":2.5},layout:{visibility:r[1]}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&2&&(a.layout={visibility:l[1]}),i&64&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&2&&(s.layout={visibility:l[1]}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function Na(r){let e,n,t,o,l;function i(s){r[4](s)}let a={id:Mt,$$slots:{right:[Ia],default:[La]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ue({props:a}),X.push(()=>Z(e,"checked",i)),o=new Ut({props:{data:`${_e()}/v1/${Mt}.geojson`,$$slots:{default:[Ea]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],Y(()=>n=!1)),e.$set(u);const c={};f&66&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let Mt="local_authority_districts";function Da(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function Fa(r,e,n){let t,o=Q.local_authority_districts,l=`${Mt}-outline`,i=!1;function a(s){i=s,n(0,i)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=i?"visible":"none")},[i,t,o,l,a]}class ja extends V{constructor(e){super(),q(this,e,Fa,Na,G,{})}}function Ba(r){let e,n,t;return e=new Ae({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=y(`
  Local Planning Authorities`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:x,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function Ha(r){let e;return{c(){e=y(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Ra(r){let e;return{c(){e=y(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function za(r){let e;return{c(){e=y(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Wa(r){let e;return{c(){e=y("this map")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Ua(r){let e;return{c(){e=y(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Ga(r){let e,n,t,o,l,i,a,s,f,u,c,p,g,k,w,T,S,A,B,P,D,F;return t=new K({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Ha]},$$scope:{ctx:r}}}),l=new K({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Ra]},$$scope:{ctx:r}}}),a=new K({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[za]},$$scope:{ctx:r}}}),g=new K({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Wa]},$$scope:{ctx:r}}}),A=new K({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Ua]},$$scope:{ctx:r}}}),D=new Ge({}),{c(){e=M("p"),n=y("LPAs may be a "),h(t.$$.fragment),o=y(", "),h(l.$$.fragment),i=y("y, or "),h(a.$$.fragment),s=y("."),f=O(),u=M("p"),c=M("strong"),p=y(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(g.$$.fragment),k=y(" to get more details."),w=O(),T=M("p"),S=y("Data from ONS Geography via "),h(A.$$.fragment),B=y(", as of November 2022."),P=O(),h(D.$$.fragment)},m(I,N){$(I,e,N),C(e,n),b(t,e,null),C(e,o),b(l,e,null),C(e,i),b(a,e,null),C(e,s),$(I,f,N),$(I,u,N),C(u,c),C(c,p),b(g,c,null),C(c,k),$(I,w,N),$(I,T,N),C(T,S),b(A,T,null),C(T,B),$(I,P,N),b(D,I,N),F=!0},p(I,N){const j={};N&64&&(j.$$scope={dirty:N,ctx:I}),t.$set(j);const L={};N&64&&(L.$$scope={dirty:N,ctx:I}),l.$set(L);const E={};N&64&&(E.$$scope={dirty:N,ctx:I}),a.$set(E);const z={};N&64&&(z.$$scope={dirty:N,ctx:I}),g.$set(z);const U={};N&64&&(U.$$scope={dirty:N,ctx:I}),A.$set(U)},i(I){F||(m(t.$$.fragment,I),m(l.$$.fragment,I),m(a.$$.fragment,I),m(g.$$.fragment,I),m(A.$$.fragment,I),m(D.$$.fragment,I),F=!0)},o(I){_(t.$$.fragment,I),_(l.$$.fragment,I),_(a.$$.fragment,I),_(g.$$.fragment,I),_(A.$$.fragment,I),_(D.$$.fragment,I),F=!1},d(I){I&&(d(e),d(f),d(u),d(w),d(T),d(P)),v(t),v(l),v(a),v(g),v(A),v(D,I)}}}function Va(r){let e,n,t;return n=new pe({props:{$$slots:{default:[Ga]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),J(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function qa(r){let e,n=r[5][0].properties.name+"",t;return{c(){e=M("p"),t=y(n)},m(o,l){$(o,e,l),C(e,t)},p(o,l){l&32&&n!==(n=o[5][0].properties.name+"")&&W(t,n)},d(o){o&&d(e)}}}function Xa(r){let e,n;return e=new $e({props:{openOn:"hover",$$slots:{default:[qa,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&96&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ka(r){let e,n,t,o;return e=new Ye({props:{id:it,sourceLayer:it,paint:{"fill-color":r[2],"fill-opacity":ge(0,.5)},layout:{visibility:r[1]},manageHoverState:!0,$$slots:{default:[Xa]},$$scope:{ctx:r}}}),t=new Ce({props:{id:r[3],sourceLayer:it,paint:{"line-color":r[2],"line-width":2.5},layout:{visibility:r[1]}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&2&&(a.layout={visibility:l[1]}),i&64&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&2&&(s.layout={visibility:l[1]}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function Za(r){let e,n,t,o,l;function i(s){r[4](s)}let a={id:it,$$slots:{right:[Va],default:[Ba]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ue({props:a}),X.push(()=>Z(e,"checked",i)),o=new ye({props:{url:`pmtiles://${_e()}/v1/${it}.pmtiles`,$$slots:{default:[Ka]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],Y(()=>n=!1)),e.$set(u);const c={};f&66&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let it="local_planning_authorities";function Ya(r,e,n){let t,o=Q.local_planning_authorities,l=`${it}-outline`,i=!1;function a(s){i=s,n(0,i)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=i?"visible":"none")},[i,t,o,l,a]}class Ja extends V{constructor(e){super(),q(this,e,Ya,Za,G,{})}}function Qa(r){let e,n,t;return e=new Ae({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=y(`
  Parliamentary constituencies`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:x,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function xa(r){let e;return{c(){e=y(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function ef(r){let e,n,t,o,l,i,a;return t=new K({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[xa]},$$scope:{ctx:r}}}),i=new Ge({}),{c(){e=M("p"),n=y("Data from "),h(t.$$.fragment),o=y(", as of May 2023."),l=O(),h(i.$$.fragment)},m(s,f){$(s,e,f),C(e,n),b(t,e,null),C(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function tf(r){let e,n,t;return n=new pe({props:{$$slots:{default:[ef]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),J(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function nf(r){let e,n=r[5][0].properties.Name+"",t;return{c(){e=M("p"),t=y(n)},m(o,l){$(o,e,l),C(e,t)},p(o,l){l&32&&n!==(n=o[5][0].properties.Name+"")&&W(t,n)},d(o){o&&d(e)}}}function rf(r){let e,n;return e=new $e({props:{openOn:"hover",$$slots:{default:[nf,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&96&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function of(r){let e,n,t,o;return e=new Ye({props:{id:at,sourceLayer:at,paint:{"fill-color":r[2],"fill-opacity":ge(0,.5)},layout:{visibility:r[1]},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[rf]},$$scope:{ctx:r}}}),e.$on("click",sf),t=new Ce({props:{id:r[3],sourceLayer:at,paint:{"line-color":r[2],"line-width":5},layout:{visibility:r[1]}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&2&&(a.layout={visibility:l[1]}),i&64&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&2&&(s.layout={visibility:l[1]}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function lf(r){let e,n,t,o,l;function i(s){r[4](s)}let a={id:at,$$slots:{right:[tf],default:[Qa]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ue({props:a}),X.push(()=>Z(e,"checked",i)),o=new ye({props:{url:`pmtiles://${_e()}/v1/${at}.pmtiles`,$$slots:{default:[of]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],Y(()=>n=!1)),e.$set(u);const c={};f&66&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let at="parliamentary_constituencies";function sf(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function af(r,e,n){let t,o=Q.parliamentary_constituencies,l=`${at}-outline`,i=!1;function a(s){i=s,n(0,i)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=i?"visible":"none")},[i,t,o,l,a]}class ff extends V{constructor(e){super(),q(this,e,af,lf,G,{})}}function uf(r){let e,n,t;return e=new Ae({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=y(`
  Wards`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:x,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function cf(r){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function pf(r){let e,n,t,o,l,i,a;return t=new K({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[cf]},$$scope:{ctx:r}}}),i=new Ge({}),{c(){e=M("p"),n=y("Data from "),h(t.$$.fragment),o=y(", as of May 2023."),l=O(),h(i.$$.fragment)},m(s,f){$(s,e,f),C(e,n),b(t,e,null),C(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function mf(r){let e,n,t;return n=new pe({props:{$$slots:{default:[pf]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),J(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function $f(r){let e,n=r[5][0].properties.name+"",t;return{c(){e=M("p"),t=y(n)},m(o,l){$(o,e,l),C(e,t)},p(o,l){l&32&&n!==(n=o[5][0].properties.name+"")&&W(t,n)},d(o){o&&d(e)}}}function df(r){let e,n;return e=new $e({props:{openOn:"hover",$$slots:{default:[$f,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&96&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gf(r){let e,n,t,o;return e=new Ye({props:{id:ft,sourceLayer:ft,paint:{"fill-color":r[2],"fill-opacity":ge(0,.5)},layout:{visibility:r[1]},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[df]},$$scope:{ctx:r}}}),e.$on("click",hf),t=new Ce({props:{id:r[3],sourceLayer:ft,paint:{"line-color":r[2],"line-width":2.5},layout:{visibility:r[1]}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&2&&(a.layout={visibility:l[1]}),i&64&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&2&&(s.layout={visibility:l[1]}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function _f(r){let e,n,t,o,l;function i(s){r[4](s)}let a={id:ft,$$slots:{right:[mf],default:[uf]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ue({props:a}),X.push(()=>Z(e,"checked",i)),o=new ye({props:{url:`pmtiles://${_e()}/v1/${ft}.pmtiles`,$$slots:{default:[gf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],Y(()=>n=!1)),e.$set(u);const c={};f&66&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let ft="wards";function hf(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function bf(r,e,n){let t,o=Q.wards,l=`${ft}-outline`,i=!1;function a(s){i=s,n(0,i)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=i?"visible":"none")},[i,t,o,l,a]}class vf extends V{constructor(e){super(),q(this,e,bf,_f,G,{})}}function yf(r){let e;return{c(){e=y("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function wf(r){let e,n,t,o;return t=new K({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[yf]},$$scope:{ctx:r}}}),{c(){e=M("p"),n=y("License: "),h(t.$$.fragment)},m(l,i){$(l,e,i),C(e,n),b(t,e,null),o=!0},p(l,[i]){const a={};i&1&&(a.$$scope={dirty:i,ctx:l}),t.$set(a)},i(l){o||(m(t.$$.fragment,l),o=!0)},o(l){_(t.$$.fragment,l),o=!1},d(l){l&&d(e),v(t)}}}class Qe extends V{constructor(e){super(),q(this,e,null,wf,G,{})}}function kf(r){let e,n,t;return e=new Ae({props:{color:Q.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=y(`
  Bus routes`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:x,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function Sf(r){let e;return{c(){e=y(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Cf(r){let e,n,t,o,l,i,a,s,f;return l=new K({props:{href:"https://gtfs.org",$$slots:{default:[Sf]},$$scope:{ctx:r}}}),s=new Qe({}),{c(){e=M("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=O(),t=M("p"),o=y("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(l.$$.fragment),i=y(`, and doesn't include which routes are run or the
        frequency of service.`),a=O(),h(s.$$.fragment)},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),C(t,o),b(l,t,null),C(t,i),$(u,a,c),b(s,u,c),f=!0},p(u,c){const p={};c&16&&(p.$$scope={dirty:c,ctx:u}),l.$set(p)},i(u){f||(m(l.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){_(l.$$.fragment,u),_(s.$$.fragment,u),f=!1},d(u){u&&(d(e),d(n),d(t),d(a)),v(l),v(s,u)}}}function Tf(r){let e,n,t;return n=new pe({props:{$$slots:{default:[Cf]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),J(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&16&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function Lf(r){let e;return{c(){e=M("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Of(r){let e;return{c(){e=M("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Af(r){let e;function n(l,i){return l[3][0].properties.has_bus_lane?Of:Lf}let t=n(r),o=t(r);return{c(){o.c(),e=he()},m(l,i){o.m(l,i),$(l,e,i)},p(l,i){t!==(t=n(l))&&(o.d(1),o=t(l),o&&(o.c(),o.m(e.parentNode,e)))},d(l){l&&d(e),o.d(l)}}}function If(r){let e,n;return e=new $e({props:{openOn:"hover",$$slots:{default:[Af,({features:t})=>({3:t}),({features:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&24&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mf(r){let e,n;return e=new Ce({props:{id:Pt,sourceLayer:Pt,paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Q.bus_route_with_lane,Q.bus_route_without_lane],"line-width":5,"line-opacity":ge(1,.5)},layout:{visibility:r[1]},$$slots:{default:[If]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&16&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Pf(r){let e,n,t,o,l;function i(s){r[2](s)}let a={id:Pt,$$slots:{right:[Tf],default:[kf]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ue({props:a}),X.push(()=>Z(e,"checked",i)),o=new ye({props:{url:`pmtiles://${_e()}/v1/${Pt}.pmtiles`,$$slots:{default:[Mf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&16&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],Y(()=>n=!1)),e.$set(u);const c={};f&18&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let Pt="bus_routes";function Ef(r,e,n){let t,o=!1;function l(i){o=i,n(0,o)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=o?"visible":"none")},[o,t,l]}class Nf extends V{constructor(e){super(),q(this,e,Ef,Pf,G,{})}}function or(r){const e=Wf(r[4][0]);r[5]=e[0],r[6]=e[1],r[7]=e[2]}function lr(r,e,n){const t=r.slice();return t[8]=e[n][0],t[9]=e[n][1],t}function Df(r){let e;return{c(){e=y("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Ff(r){let e,n,t,o,l,i,a,s;return a=new Qe({}),{c(){e=M("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=O(),t=M("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,o=O(),l=M("p"),l.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=O(),h(a.$$.fragment)},m(f,u){$(f,e,u),$(f,n,u),$(f,t,u),$(f,o,u),$(f,l,u),$(f,i,u),b(a,f,u),s=!0},p:x,i(f){s||(m(a.$$.fragment,f),s=!0)},o(f){_(a.$$.fragment,f),s=!1},d(f){f&&(d(e),d(n),d(t),d(o),d(l),d(i)),v(a,f)}}}function jf(r){let e,n,t;return n=new pe({props:{$$slots:{default:[Ff]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),J(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&4096&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function sr(r){let e,n,t=je(r[2]),o=[];for(let i=0;i<t.length;i+=1)o[i]=ir(lr(r,t,i));const l=i=>_(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=he()},m(i,a){for(let s=0;s<o.length;s+=1)o[s]&&o[s].m(i,a);$(i,e,a),n=!0},p(i,a){if(a&4){t=je(i[2]);let s;for(s=0;s<t.length;s+=1){const f=lr(i,t,s);o[s]?(o[s].p(f,a),m(o[s],1)):(o[s]=ir(f),o[s].c(),m(o[s],1),o[s].m(e.parentNode,e))}for(le(),s=t.length;s<o.length;s+=1)l(s);se()}},i(i){if(!n){for(let a=0;a<t.length;a+=1)m(o[a]);n=!0}},o(i){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)_(o[a]);n=!1},d(i){i&&d(e),Ct(o,i)}}}function ir(r){let e,n,t,o=r[8]+"",l,i,a;return n=new Ae({props:{color:r[9]}}),{c(){e=M("div"),h(n.$$.fragment),t=O(),l=y(o),i=O()},m(s,f){$(s,e,f),b(n,e,null),C(e,t),C(e,l),C(e,i),a=!0},p:x,i(s){a||(m(n.$$.fragment,s),a=!0)},o(s){_(n.$$.fragment,s),a=!1},d(s){s&&d(e),v(n)}}}function Bf(r){or(r);let e,n=r[5]+"",t,o,l,i,a,s=r[6]+"",f,u,c,p,g=r[7]+"",k;return{c(){e=M("h2"),t=y(n),o=O(),l=M("p"),i=y("Direction: "),a=M("b"),f=O(),u=M("p"),c=y("Width: "),p=M("b"),k=y(g)},m(w,T){$(w,e,T),C(e,t),$(w,o,T),$(w,l,T),C(l,i),C(l,a),a.innerHTML=s,$(w,f,T),$(w,u,T),C(u,c),C(u,p),C(p,k)},p(w,T){or(w),T&16&&n!==(n=w[5]+"")&&W(t,n),T&16&&s!==(s=w[6]+"")&&(a.innerHTML=s),T&16&&g!==(g=w[7]+"")&&W(k,g)},d(w){w&&(d(e),d(o),d(l),d(f),d(u))}}}function Hf(r){let e,n;return e=new $e({props:{openOn:"hover",$$slots:{default:[Bf,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&4112&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Rf(r){let e,n;return e=new Ce({props:{id:Et,sourceLayer:Et,paint:{"line-color":kr(["get","kind"],{track:Q.cycle_paths.track,lane:Q.cycle_paths.lane,shared_use_segregated:Q.cycle_paths.shared_use_segregated,shared_use_unsegregated:Q.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ze,"line-opacity":ge(1,.5)},layout:{visibility:r[1]},hoverCursor:"pointer",$$slots:{default:[Hf]},$$scope:{ctx:r}}}),e.$on("click",Uf),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&4096&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zf(r){let e,n,t,o,l,i;function a(u){r[3](u)}let s={id:Et,$$slots:{right:[jf],default:[Df]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ue({props:s}),X.push(()=>Z(e,"checked",a));let f=r[0]&&sr(r);return l=new ye({props:{url:`pmtiles://${_e()}/v1/${Et}.pmtiles`,$$slots:{default:[Rf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),f&&f.c(),o=O(),h(l.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),f&&f.m(u,c),$(u,o,c),b(l,u,c),i=!0},p(u,[c]){const p={};c&4096&&(p.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,p.checked=u[0],Y(()=>n=!1)),e.$set(p),u[0]?f?(f.p(u,c),c&1&&m(f,1)):(f=sr(u),f.c(),m(f,1),f.m(o.parentNode,o)):f&&(le(),_(f,1,1,()=>{f=null}),se());const g={};c&4098&&(g.$$scope={dirty:c,ctx:u}),l.$set(g)},i(u){i||(m(e.$$.fragment,u),m(f),m(l.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),_(f),_(l.$$.fragment,u),i=!1},d(u){u&&(d(t),d(o)),v(e,u),f&&f.d(u),v(l,u)}}}let Et="cycle_paths";function Wf(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.properties.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.properties.direction],t=r.properties.width=="unknown"?"unknown":`${r.properties.width} meters`;return[e,`${n} ${r.properties.direction}`,t]}function Uf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Gf(r,e,n){let t,o=[["Separated tracks",Q.cycle_paths.track],["Unprotected lanes",Q.cycle_paths.lane],["Shared-use (segregated)",Q.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",Q.cycle_paths.shared_use_unsegregated]],l=!1;function i(a){l=a,n(0,l)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=l?"visible":"none")},[l,t,o,i]}class Vf extends V{constructor(e){super(),q(this,e,Gf,zf,G,{})}}function ar(r){const e=r[4][0].properties.name??"Unknown MRN road";r[5]=e}function qf(r){let e,n,t;return e=new Ae({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=y(`
  Major Road Network`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:x,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function Xf(r){let e;return{c(){e=y(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Kf(r){let e,n,t,o,l,i,a;return t=new K({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Xf]},$$scope:{ctx:r}}}),i=new Ge({}),{c(){e=M("p"),n=y("Data from the "),h(t.$$.fragment),o=y(", as of September 2021."),l=O(),h(i.$$.fragment)},m(s,f){$(s,e,f),C(e,n),b(t,e,null),C(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function Zf(r){let e,n,t;return n=new pe({props:{$$slots:{default:[Kf]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),J(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function Yf(r){ar(r);let e,n=r[5]+"",t;return{c(){e=M("p"),t=y(n)},m(o,l){$(o,e,l),C(e,t)},p(o,l){ar(o),l&16&&n!==(n=o[5]+"")&&W(t,n)},d(o){o&&d(e)}}}function Jf(r){let e,n;return e=new $e({props:{openOn:"hover",$$slots:{default:[Yf,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&80&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qf(r){let e,n;return e=new Ce({props:{id:Nt,sourceLayer:Nt,paint:{"line-color":r[2],"line-width":7,"line-opacity":ge(1,.5)},layout:{visibility:r[1]},$$slots:{default:[Jf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&64&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xf(r){let e,n,t,o,l;function i(s){r[3](s)}let a={id:Nt,$$slots:{right:[Zf],default:[qf]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ue({props:a}),X.push(()=>Z(e,"checked",i)),o=new ye({props:{url:`pmtiles://${_e()}/v1/${Nt}.pmtiles`,$$slots:{default:[Qf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],Y(()=>n=!1)),e.$set(u);const c={};f&66&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let Nt="mrn";function eu(r,e,n){let t,o=Q.mrn,l=!1;function i(a){l=a,n(0,l)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=l?"visible":"none")},[l,t,o,i]}class tu extends V{constructor(e){super(),q(this,e,eu,xf,G,{})}}function nu(r){let e;return{c(){e=y("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function ru(r){let e;return{c(){e=y("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function ou(r){let e;return{c(){e=y("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function lu(r){let e,n,t,o,l,i,a,s,f,u,c;return a=new K({props:{href:"https://www.pct.bike",$$slots:{default:[ru]},$$scope:{ctx:r}}}),f=new K({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[ou]},$$scope:{ctx:r}}}),{c(){e=M("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=O(),t=M("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,o=O(),l=M("p"),i=y("See "),h(a.$$.fragment),s=y(" and "),h(f.$$.fragment),u=y(" for details on methodology and data sources.")},m(p,g){$(p,e,g),$(p,n,g),$(p,t,g),$(p,o,g),$(p,l,g),C(l,i),b(a,l,null),C(l,s),b(f,l,null),C(l,u),c=!0},p(p,g){const k={};g&4096&&(k.$$scope={dirty:g,ctx:p}),a.$set(k);const w={};g&4096&&(w.$$scope={dirty:g,ctx:p}),f.$set(w)},i(p){c||(m(a.$$.fragment,p),m(f.$$.fragment,p),c=!0)},o(p){_(a.$$.fragment,p),_(f.$$.fragment,p),c=!1},d(p){p&&(d(e),d(n),d(t),d(o),d(l)),v(a),v(f)}}}function su(r){let e,n,t;return n=new pe({props:{$$slots:{default:[lu]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),J(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&4096&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function fr(r){let e,n,t,o,l,i,a,s;e=new Je({props:{colorScale:r[5],limits:r[6]}});function f(g){r[9](g)}let u={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(u.value=r[0]),t=new Cr({props:u}),X.push(()=>Z(t,"value",f));function c(g){r[10](g)}let p={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[2]!==void 0&&(p.value=r[2]),i=new Tt({props:p}),X.push(()=>Z(i,"value",c)),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),h(i.$$.fragment)},m(g,k){b(e,g,k),$(g,n,k),b(t,g,k),$(g,l,k),b(i,g,k),s=!0},p(g,k){const w={};!o&&k&1&&(o=!0,w.value=g[0],Y(()=>o=!1)),t.$set(w);const T={};!a&&k&4&&(a=!0,T.value=g[2],Y(()=>a=!1)),i.$set(T)},i(g){s||(m(e.$$.fragment,g),m(t.$$.fragment,g),m(i.$$.fragment,g),s=!0)},o(g){_(e.$$.fragment,g),_(t.$$.fragment,g),_(i.$$.fragment,g),s=!1},d(g){g&&(d(n),d(l)),v(e,g),v(t,g),v(i,g)}}}function iu(r){let e,n=r[7](r[11][0])+"",t;return{c(){e=new Tr(!1),t=he(),e.a=t},m(o,l){e.m(n,o,l),$(o,t,l)},p(o,l){l&2048&&n!==(n=o[7](o[11][0])+"")&&e.p(n)},d(o){o&&(d(t),e.d())}}}function au(r){let e,n;return e=new $e({props:{openOn:"hover",$$slots:{default:[iu,({features:t})=>({11:t}),({features:t})=>t?2048:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&6144&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fu(r){let e,n;return e=new Ce({props:{id:nt,sourceLayer:nt,paint:{"line-color":De(["get",r[2]],r[6],r[5]),"line-width":Ze,"line-opacity":ge(1,.5)},layout:{visibility:r[4]},$$slots:{default:[au]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&4&&(l.paint={"line-color":De(["get",t[2]],t[6],t[5]),"line-width":Ze,"line-opacity":ge(1,.5)}),o&16&&(l.layout={visibility:t[4]}),o&4096&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function uu(r){let e,n=r[7](r[11][0])+"",t;return{c(){e=new Tr(!1),t=he(),e.a=t},m(o,l){e.m(n,o,l),$(o,t,l)},p(o,l){l&2048&&n!==(n=o[7](o[11][0])+"")&&e.p(n)},d(o){o&&(d(t),e.d())}}}function cu(r){let e,n;return e=new $e({props:{openOn:"hover",$$slots:{default:[uu,({features:t})=>({11:t}),({features:t})=>t?2048:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&6144&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pu(r){let e,n;return e=new Ce({props:{id:Dt,sourceLayer:Dt,paint:{"line-color":De(["get",r[2]],r[6],r[5]),"line-width":Ze,"line-opacity":ge(1,.5)},layout:{visibility:r[3]},$$slots:{default:[cu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&4&&(l.paint={"line-color":De(["get",t[2]],t[6],t[5]),"line-width":Ze,"line-opacity":ge(1,.5)}),o&8&&(l.layout={visibility:t[3]}),o&4096&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mu(r){let e,n,t,o,l,i,a,s;function f(p){r[8](p)}let u={id:nt,$$slots:{right:[su],default:[nu]},$$scope:{ctx:r}};r[1]!==void 0&&(u.checked=r[1]),e=new ue({props:u}),X.push(()=>Z(e,"checked",f));let c=r[1]&&fr(r);return l=new ye({props:{url:`pmtiles://${_e()}/v1/${nt}.pmtiles`,$$slots:{default:[fu]},$$scope:{ctx:r}}}),a=new ye({props:{url:`pmtiles://${_e()}/v1/${Dt}.pmtiles`,$$slots:{default:[pu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),c&&c.c(),o=O(),h(l.$$.fragment),i=O(),h(a.$$.fragment)},m(p,g){b(e,p,g),$(p,t,g),c&&c.m(p,g),$(p,o,g),b(l,p,g),$(p,i,g),b(a,p,g),s=!0},p(p,[g]){const k={};g&4096&&(k.$$scope={dirty:g,ctx:p}),!n&&g&2&&(n=!0,k.checked=p[1],Y(()=>n=!1)),e.$set(k),p[1]?c?(c.p(p,g),g&2&&m(c,1)):(c=fr(p),c.c(),m(c,1),c.m(o.parentNode,o)):c&&(le(),_(c,1,1,()=>{c=null}),se());const w={};g&4116&&(w.$$scope={dirty:g,ctx:p}),l.$set(w);const T={};g&4108&&(T.$$scope={dirty:g,ctx:p}),a.$set(T)},i(p){s||(m(e.$$.fragment,p),m(c),m(l.$$.fragment,p),m(a.$$.fragment,p),s=!0)},o(p){_(e.$$.fragment,p),_(c),_(l.$$.fragment,p),_(a.$$.fragment,p),s=!1},d(p){p&&(d(t),d(o),d(i)),v(e,p),c&&c.d(p),v(l,p),v(a,p)}}}let nt="pct_commute",Dt="pct_school";function $u(r,e,n){let t,o,l=Q.sequential_low_to_high,i=[0,50,100,500,1e3,2e3],a=nt,s="baseline",f=!1;function u(k){let w=k.properties.baseline,T=k.properties.gov_target,S=k.properties.go_dutch,A=`<h2>Trip purpose: ${a==nt?"commuting":"school"}</h2>`;if(A+=`<p>Baseline (2011): <b>${w.toLocaleString()}</b></p>`,w==0)A+=`<p>Government target (2025): <b>${T.toLocaleString()}</b></p>`,A+=`<p>Go Dutch: <b>${S.toLocaleString()}</b></p>`;else{let B=(T/w).toFixed(1),P=(S/w).toFixed(1);A+=`<p>Government target (2025): ${T.toLocaleString()} (<b>${B}x</b> of baseline)</p>`,A+=`<p>Go Dutch: ${S.toLocaleString()} (<b>${P}x</b> of baseline)</p>`}return A}function c(k){f=k,n(1,f)}function p(k){a=k,n(0,a)}function g(k){s=k,n(2,s)}return r.$$.update=()=>{r.$$.dirty&3&&n(4,t=f&&a==nt?"visible":"none"),r.$$.dirty&3&&n(3,o=f&&a==Dt?"visible":"none")},[a,f,s,o,t,l,i,u,c,p,g]}class du extends V{constructor(e){super(),q(this,e,$u,mu,G,{})}}function gu(r){let e;return{c(){e=y("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function _u(r){let e;return{c(){e=y("Basemap")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function hu(r){let e;return{c(){e=y(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function bu(r){let e,n,t,o,l,i,a,s,f,u,c,p;return t=new K({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[_u]},$$scope:{ctx:r}}}),u=new K({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[hu]},$$scope:{ctx:r}}}),{c(){e=M("p"),n=y("The average speed data is collected over a six-month period by "),h(t.$$.fragment),o=y(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),l=O(),i=M("p"),i.textContent="Data valid as of 1 September, 2023",a=O(),s=M("p"),f=y(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),c=y(".")},m(g,k){$(g,e,k),C(e,n),b(t,e,null),C(e,o),$(g,l,k),$(g,i,k),$(g,a,k),$(g,s,k),C(s,f),b(u,s,null),C(s,c),p=!0},p(g,k){const w={};k&512&&(w.$$scope={dirty:k,ctx:g}),t.$set(w);const T={};k&512&&(T.$$scope={dirty:k,ctx:g}),u.$set(T)},i(g){p||(m(t.$$.fragment,g),m(u.$$.fragment,g),p=!0)},o(g){_(t.$$.fragment,g),_(u.$$.fragment,g),p=!1},d(g){g&&(d(e),d(l),d(i),d(a),d(s)),v(t),v(u)}}}function vu(r){let e,n,t;return n=new pe({props:{$$slots:{default:[bu]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),J(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&512&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function ur(r){let e,n,t,o,l;e=new Je({props:{colorScale:r[3],limits:r[4]}});function i(s){r[7](s)}let a={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[1]!==void 0&&(a.value=r[1]),t=new Cr({props:a}),X.push(()=>Z(t,"value",i)),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(s,f){b(e,s,f),$(s,n,f),b(t,s,f),l=!0},p(s,f){const u={};!o&&f&2&&(o=!0,u.value=s[1],Y(()=>o=!1)),t.$set(u)},i(s){l||(m(e.$$.fragment,s),m(t.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),l=!1},d(s){s&&d(n),v(e,s),v(t,s)}}}function yu(r){let e,n,t=r[8][0].properties.indicative_mph+"",o,l,i,a,s,f=r[8][0].properties.highest_mph+"",u,c,p=r[5][r[8][0].properties.highest_description]+"",g,k;return{c(){e=M("p"),n=y("Posted speed limit: "),o=y(t),l=y(" mph"),i=O(),a=M("p"),s=y("Highest average speed: "),u=y(f),c=y(" mph (during "),g=y(p),k=y(")")},m(w,T){$(w,e,T),C(e,n),C(e,o),C(e,l),$(w,i,T),$(w,a,T),C(a,s),C(a,u),C(a,c),C(a,g),C(a,k)},p(w,T){T&256&&t!==(t=w[8][0].properties.indicative_mph+"")&&W(o,t),T&256&&f!==(f=w[8][0].properties.highest_mph+"")&&W(u,f),T&256&&p!==(p=w[5][w[8][0].properties.highest_description]+"")&&W(g,p)},d(w){w&&(d(e),d(i),d(a))}}}function wu(r){let e,n;return e=new $e({props:{openOn:"hover",$$slots:{default:[yu,({features:t})=>({8:t}),({features:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&768&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ku(r){let e,n;return e=new Ce({props:{id:Ft,sourceLayer:Ft,paint:{"line-color":De(["get",r[1]],r[4],r[3]),"line-width":Ze,"line-opacity":ge(1,.5)},layout:{visibility:r[2]},$$slots:{default:[wu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.paint={"line-color":De(["get",t[1]],t[4],t[3]),"line-width":Ze,"line-opacity":ge(1,.5)}),o&4&&(l.layout={visibility:t[2]}),o&512&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Su(r){let e,n,t,o,l,i;function a(u){r[6](u)}let s={id:Ft,$$slots:{right:[vu],default:[gu]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ue({props:s}),X.push(()=>Z(e,"checked",a));let f=r[0]&&ur(r);return l=new ye({props:{url:`pmtiles://${un()}/v1/${Ft}.pmtiles`,$$slots:{default:[ku]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),f&&f.c(),o=O(),h(l.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),f&&f.m(u,c),$(u,o,c),b(l,u,c),i=!0},p(u,[c]){const p={};c&512&&(p.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,p.checked=u[0],Y(()=>n=!1)),e.$set(p),u[0]?f?(f.p(u,c),c&1&&m(f,1)):(f=ur(u),f.c(),m(f,1),f.m(o.parentNode,o)):f&&(le(),_(f,1,1,()=>{f=null}),se());const g={};c&518&&(g.$$scope={dirty:c,ctx:u}),l.$set(g)},i(u){i||(m(e.$$.fragment,u),m(f),m(l.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),_(f),_(l.$$.fragment,u),i=!1},d(u){u&&(d(t),d(o)),v(e,u),f&&f.d(u),v(l,u)}}}let Ft="road_speeds";function Cu(r,e,n){let t,o=Q.sequential_low_to_high,l=[0,20,30,40,50,90],i="indicative_mph",a=!1,s={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function f(c){a=c,n(0,a)}function u(c){i=c,n(1,i)}return r.$$.update=()=>{r.$$.dirty&1&&n(2,t=a?"visible":"none")},[a,i,t,o,l,s,f,u]}class Tu extends V{constructor(e){super(),q(this,e,Cu,Su,G,{})}}function Lu(r){let e;return{c(){e=y("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Ou(r){let e;return{c(){e=y(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Au(r){let e,n,t,o,l,i,a,s,f;return a=new K({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Ou]},$$scope:{ctx:r}}}),{c(){e=M("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=O(),t=M("p"),t.textContent="Data valid as of 1 September, 2023",o=O(),l=M("p"),i=y(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(a.$$.fragment),s=y(".")},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),$(u,o,c),$(u,l,c),C(l,i),b(a,l,null),C(l,s),f=!0},p(u,c){const p={};c&64&&(p.$$scope={dirty:c,ctx:u}),a.$set(p)},i(u){f||(m(a.$$.fragment,u),f=!0)},o(u){_(a.$$.fragment,u),f=!1},d(u){u&&(d(e),d(n),d(t),d(o),d(l)),v(a)}}}function Iu(r){let e,n,t;return n=new pe({props:{$$slots:{default:[Au]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),J(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function cr(r){let e,n;return e=new Je({props:{colorScale:r[2],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:x,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mu(r){let e,n,t,o=r[5][0].properties.average+"",l,i,a,s,f,u,c=r[5][0].properties.minimum+"",p,g;return{c(){e=M("p"),n=y("Average width: "),t=M("b"),l=y(o),i=y(`
        meters`),a=O(),s=M("p"),f=y("Minimum width: "),u=M("b"),p=y(c),g=y(`
        meters`)},m(k,w){$(k,e,w),C(e,n),C(e,t),C(t,l),C(e,i),$(k,a,w),$(k,s,w),C(s,f),C(s,u),C(u,p),C(s,g)},p(k,w){w&32&&o!==(o=k[5][0].properties.average+"")&&W(l,o),w&32&&c!==(c=k[5][0].properties.minimum+"")&&W(p,c)},d(k){k&&(d(e),d(a),d(s))}}}function Pu(r){let e,n;return e=new $e({props:{openOn:"hover",$$slots:{default:[Mu,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&96&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Eu(r){let e,n;return e=new Ce({props:{id:jt,sourceLayer:jt,paint:{"line-color":De(["get","average"],r[3],r[2]),"line-width":Ze,"line-opacity":ge(1,.5)},layout:{visibility:r[1]},$$slots:{default:[Pu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&64&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Nu(r){let e,n,t,o,l,i;function a(u){r[4](u)}let s={id:jt,$$slots:{right:[Iu],default:[Lu]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ue({props:s}),X.push(()=>Z(e,"checked",a));let f=r[0]&&cr(r);return l=new ye({props:{url:`pmtiles://${un()}/v1/${jt}.pmtiles`,$$slots:{default:[Eu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),f&&f.c(),o=O(),h(l.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),f&&f.m(u,c),$(u,o,c),b(l,u,c),i=!0},p(u,[c]){const p={};c&64&&(p.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,p.checked=u[0],Y(()=>n=!1)),e.$set(p),u[0]?f?(f.p(u,c),c&1&&m(f,1)):(f=cr(u),f.c(),m(f,1),f.m(o.parentNode,o)):f&&(le(),_(f,1,1,()=>{f=null}),se());const g={};c&66&&(g.$$scope={dirty:c,ctx:u}),l.$set(g)},i(u){i||(m(e.$$.fragment,u),m(f),m(l.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),_(f),_(l.$$.fragment,u),i=!1},d(u){u&&(d(t),d(o)),v(e,u),f&&f.d(u),v(l,u)}}}let jt="road_widths";function Du(r,e,n){let t,o=Q.sequential_low_to_high,l=[0,5,10,15,20,100],i=!1;function a(s){i=s,n(0,i)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=i?"visible":"none")},[i,t,o,l,a]}class Fu extends V{constructor(e){super(),q(this,e,Du,Nu,G,{})}}function pr(r){const e=r[11][0].properties;r[12]=e}function ju(r){let e,n,t;return{c(){e=M("input"),J(e,"class","govuk-file-upload"),J(e,"id","load-criticals"),J(e,"type","file")},m(o,l){$(o,e,l),r[8](e),n||(t=ut(e,"change",r[6]),n=!0)},p:x,d(o){o&&d(e),r[8](null),n=!1,t()}}}function mr(r){let e,n;return e=new vt({props:{small:!0,$$slots:{default:[Hu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&8197&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Bu(r){let e,n,t=r[2].toLocaleString()+"",o,l,i;return e=new Ae({props:{color:ln}}),{c(){h(e.$$.fragment),n=y(`
        Show `),o=y(t),l=y(" issues")},m(a,s){b(e,a,s),$(a,n,s),$(a,o,s),$(a,l,s),i=!0},p(a,s){(!i||s&4)&&t!==(t=a[2].toLocaleString()+"")&&W(o,t)},i(a){i||(m(e.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),i=!1},d(a){a&&(d(n),d(o),d(l)),v(e,a)}}}function Hu(r){let e,n,t;function o(i){r[9](i)}let l={id:"show-criticals",$$slots:{default:[Bu]},$$scope:{ctx:r}};return r[0]!==void 0&&(l.checked=r[0]),e=new ue({props:l}),X.push(()=>Z(e,"checked",o)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const s={};a&8196&&(s.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,s.checked=i[0],Y(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Ru(r){let e,n,t,o,l,i;e=new Sr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[ju]},$$scope:{ctx:r}}}),t=new Lr({props:{errorMessage:r[3]}});let a=r[2]>0&&mr(r);return{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),o=O(),a&&a.c(),l=he()},m(s,f){b(e,s,f),$(s,n,f),b(t,s,f),$(s,o,f),a&&a.m(s,f),$(s,l,f),i=!0},p(s,f){const u={};f&8194&&(u.$$scope={dirty:f,ctx:s}),e.$set(u);const c={};f&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?a?(a.p(s,f),f&4&&m(a,1)):(a=mr(s),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(le(),_(a,1,1,()=>{a=null}),se())},i(s){i||(m(e.$$.fragment,s),m(t.$$.fragment,s),m(a),i=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),_(a),i=!1},d(s){s&&(d(n),d(o),d(l)),v(e,s),v(t,s),a&&a.d(s)}}}function zu(r){pr(r);let e,n,t=r[12].critical_type+"",o,l,i,a,s,f=r[12].location_description+"",u,c,p,g,k,w=r[12].notes+"",T,S,A,B,P,D,F,I=r[12].id+"",N,j,L,E,z,U=(r[12].inspector??"???")+"",ne,Te,ee,ce=r[12].submission_time+"",be,ve,me,Ie,we,ke=r[12].scheme_reference+"",de,R,Se,te=r[12].current_design_stage+"",H;return{c(){e=M("div"),n=M("h2"),o=y(t),l=O(),i=M("p"),a=M("u"),a.textContent="Location",s=y(`
          : `),u=y(f),c=O(),p=M("p"),g=M("u"),g.textContent="Notes",k=y(`
          : `),T=y(w),S=O(),A=M("hr"),B=O(),P=M("p"),D=y("Critical issue ID: "),F=M("b"),N=y(I),j=O(),L=M("p"),E=y("Submitted by "),z=M("b"),ne=y(U),Te=y(`
          at
          `),ee=M("b"),be=y(ce),ve=O(),me=M("p"),Ie=y("For scheme "),we=M("b"),de=y(ke),R=y(`
          in stage
          `),Se=M("b"),H=y(te),Be(e,"max-width","30vw")},m(re,fe){$(re,e,fe),C(e,n),C(n,o),C(e,l),C(e,i),C(i,a),C(i,s),C(i,u),C(e,c),C(e,p),C(p,g),C(p,k),C(p,T),C(e,S),C(e,A),C(e,B),C(e,P),C(P,D),C(P,F),C(F,N),C(e,j),C(e,L),C(L,E),C(L,z),C(z,ne),C(L,Te),C(L,ee),C(ee,be),C(e,ve),C(e,me),C(me,Ie),C(me,we),C(we,de),C(me,R),C(me,Se),C(Se,H)},p(re,fe){pr(re),fe&2048&&t!==(t=re[12].critical_type+"")&&W(o,t),fe&2048&&f!==(f=re[12].location_description+"")&&W(u,f),fe&2048&&w!==(w=re[12].notes+"")&&W(T,w),fe&2048&&I!==(I=re[12].id+"")&&W(N,I),fe&2048&&U!==(U=(re[12].inspector??"???")+"")&&W(ne,U),fe&2048&&ce!==(ce=re[12].submission_time+"")&&W(be,ce),fe&2048&&ke!==(ke=re[12].scheme_reference+"")&&W(de,ke),fe&2048&&te!==(te=re[12].current_design_stage+"")&&W(H,te)},d(re){re&&d(e)}}}function Wu(r){let e,n;return e=new $e({props:{openOn:"click",$$slots:{default:[zu,({features:t})=>({11:t}),({features:t})=>t?2048:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&10240&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Uu(r){let e,n,t,o,l,i;return e=new ct({props:{id:`${Bt}-clusters`,applyToClusters:!0,paint:{"circle-color":ln,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]},layout:{visibility:r[5]},hoverCursor:"pointer"}}),e.$on("click",r[7]),t=new xo({props:{applyToClusters:!0,layout:{"text-field":"{point_count_abbreviated}",visibility:r[5]}}}),l=new ct({props:{id:`${Bt}-counts`,applyToClusters:!1,paint:{"circle-color":ln,"circle-opacity":.9,"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3},layout:{visibility:r[5]},$$slots:{default:[Wu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),o=O(),h(l.$$.fragment)},m(a,s){b(e,a,s),$(a,n,s),b(t,a,s),$(a,o,s),b(l,a,s),i=!0},p(a,s){const f={};s&32&&(f.layout={visibility:a[5]}),e.$set(f);const u={};s&32&&(u.layout={"text-field":"{point_count_abbreviated}",visibility:a[5]}),t.$set(u);const c={};s&32&&(c.layout={visibility:a[5]}),s&8192&&(c.$$scope={dirty:s,ctx:a}),l.$set(c)},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(l.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(l.$$.fragment,a),i=!1},d(a){a&&(d(n),d(o)),v(e,a),v(t,a),v(l,a)}}}function Gu(r){let e,n,t,o;return e=new Ee({props:{label:"Critical Issues",$$slots:{default:[Ru]},$$scope:{ctx:r}}}),t=new Ut({props:{id:Bt,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Uu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},p(l,[i]){const a={};i&8207&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&16&&(s.data=l[4]),i&8224&&(s.$$scope={dirty:i,ctx:l}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}let Bt="criticals",ln="red";function Vu(r,e,n){let t,o;ae(r,$t,k=>n(10,o=k));let l,i=!0,a=0,s="",f=fn();async function u(k){try{n(4,f=await si(l.files[0])),n(2,a=f.features.length),n(3,s="")}catch(w){n(3,s=`The file you loaded is broken: ${w}`)}}function c(k){o.getSource(Bt).getClusterExpansionZoom(k.detail.features[0].properties.cluster_id,(w,T)=>{w||o.easeTo({center:k.detail.features[0].geometry.coordinates,zoom:T})})}function p(k){X[k?"unshift":"push"](()=>{l=k,n(1,l)})}function g(k){i=k,n(0,i)}return r.$$.update=()=>{r.$$.dirty&1&&n(5,t=i?"visible":"none")},[i,l,a,s,f,t,u,c,p,g]}class qu extends V{constructor(e){super(),q(this,e,Vu,Gu,G,{})}}function Xu(r){let e,n,t;return e=new Ae({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=y(`
  Crossings`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:x,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function Ku(r){let e;return{c(){e=y("crossing")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Zu(r){let e,n,t,o,l,i,a;return t=new K({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Ku]},$$scope:{ctx:r}}}),i=new Qe({}),{c(){e=M("p"),n=y("This shows "),h(t.$$.fragment),o=y(" data from OpenStreetMap (as of 9 August 2023)."),l=O(),h(i.$$.fragment)},m(s,f){$(s,e,f),C(e,n),b(t,e,null),C(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function Yu(r){let e,n,t;return n=new pe({props:{$$slots:{default:[Zu]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),J(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function Ju(r){let e,n=$r(r[4][0])+"",t;return{c(){e=M("p"),t=y(n)},m(o,l){$(o,e,l),C(e,t)},p(o,l){l&16&&n!==(n=$r(o[4][0])+"")&&W(t,n)},d(o){o&&d(e)}}}function Qu(r){let e,n;return e=new $e({props:{openOn:"hover",$$slots:{default:[Ju,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&48&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xu(r){let e,n;return e=new ct({props:{id:Ht,sourceLayer:Ht,paint:{"circle-color":r[2],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]},layout:{visibility:r[1]},$$slots:{default:[Qu]},$$scope:{ctx:r}}}),e.$on("click",tc),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ec(r){let e,n,t,o,l;function i(s){r[3](s)}let a={id:Ht,$$slots:{right:[Yu],default:[Xu]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ue({props:a}),X.push(()=>Z(e,"checked",i)),o=new ye({props:{url:`pmtiles://${_e()}/v1/${Ht}.pmtiles`,$$slots:{default:[xu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],Y(()=>n=!1)),e.$set(u);const c={};f&34&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let Ht="crossings";function $r(r){const e=new Map([["no","Location where crossing is impossible/illegal but where there is a clear desire line to cross"],["traffic_signals","Signalised crossing"],["marked","Crossing with no traffic signals"],["uncontrolled","Crossing with no traffic signals"],["unmarked","Crossing with no markings or signals"],["zebra","Zebra crossing"],["island","Crossing with an island"],["informal","Informal crossing with an obvious desire line, but no official infrastructure to support it"]]),n=r.properties.crossing;return`${e.get(n)??`Crossing with unknown type (${n})`}. Click for details.`}function tc(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function nc(r,e,n){let t,o=Q.crossings,l=!1;function i(a){l=a,n(0,l)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=l?"visible":"none")},[l,t,o,i]}class rc extends V{constructor(e){super(),q(this,e,nc,ec,G,{})}}function oc(r){let e,n,t;return e=new Ae({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=y(`
  Cycle parking`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:x,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function lc(r){let e;return{c(){e=y("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function sc(r){let e,n,t,o,l,i,a;return t=new K({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[lc]},$$scope:{ctx:r}}}),i=new Qe({}),{c(){e=M("p"),n=y("Cycle parking, according to "),h(t.$$.fragment),o=y(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),l=O(),h(i.$$.fragment)},m(s,f){$(s,e,f),C(e,n),b(t,e,null),C(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function ic(r){let e,n,t;return n=new pe({props:{$$slots:{default:[sc]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),J(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function ac(r){let e,n=dr(r[4][0])+"",t;return{c(){e=M("p"),t=y(n)},m(o,l){$(o,e,l),C(e,t)},p(o,l){l&16&&n!==(n=dr(o[4][0])+"")&&W(t,n)},d(o){o&&d(e)}}}function fc(r){let e,n;return e=new $e({props:{openOn:"hover",$$slots:{default:[ac,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&48&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function uc(r){let e,n;return e=new ct({props:{id:Rt,sourceLayer:Rt,paint:{"circle-color":r[2],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]},layout:{visibility:r[1]},manageHoverState:!0,$$slots:{default:[fc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function cc(r){let e,n,t,o,l;function i(s){r[3](s)}let a={id:Rt,$$slots:{right:[ic],default:[oc]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ue({props:a}),X.push(()=>Z(e,"checked",i)),o=new ye({props:{url:`pmtiles://${_e()}/v1/${Rt}.pmtiles`,$$slots:{default:[uc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],Y(()=>n=!1)),e.$set(u);const c={};f&34&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let Rt="cycle_parking";function dr(r){return`Capacity: ${r.properties.capacity??"unknown"}`}function pc(r,e,n){let t,o=Q.cycle_parking,l=!1;function i(a){l=a,n(0,l)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=l?"visible":"none")},[l,t,o,i]}class mc extends V{constructor(e){super(),q(this,e,pc,cc,G,{})}}function $c(r){let e,n,t,o;return e=new Ae({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=O(),t=y(r[1])},m(l,i){b(e,l,i),$(l,n,i),$(l,t,i),o=!0},p(l,i){(!o||i&2)&&W(t,l[1])},i(l){o||(m(e.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),o=!1},d(l){l&&(d(n),d(t)),v(e,l)}}}function dc(r){let e;const n=r[7].default,t=Re(n,r,r[9],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&512)&&ze(t,n,o,o[9],e?Ue(n,o[9],l,null):We(o[9]),null)},i(o){e||(m(t,o),e=!0)},o(o){_(t,o),e=!1},d(o){t&&t.d(o)}}}function gc(r){let e,n,t;return n=new pe({props:{$$slots:{default:[dc]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),J(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&512&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function _c(r){let e,n=r[5](r[10][0])+"",t;return{c(){e=M("p"),t=y(n)},m(o,l){$(o,e,l),C(e,t)},p(o,l){l&1024&&n!==(n=o[5](o[10][0])+"")&&W(t,n)},d(o){o&&d(e)}}}function hc(r){let e,n;return e=new $e({props:{openOn:"hover",$$slots:{default:[_c,({features:t})=>({10:t}),({features:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1536&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bc(r){let e,n;return e=new Ye({props:{id:r[0],sourceLayer:r[0],paint:{"fill-color":r[4],"fill-opacity":ge(.7,1)},layout:{visibility:r[3]},manageHoverState:!0,$$slots:{default:[hc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1&&(l.id=t[0]),o&1&&(l.sourceLayer=t[0]),o&8&&(l.layout={visibility:t[3]}),o&512&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vc(r){let e,n,t,o,l;function i(s){r[8](s)}let a={id:r[0],$$slots:{right:[gc],default:[$c]},$$scope:{ctx:r}};return r[2]!==void 0&&(a.checked=r[2]),e=new ue({props:a}),X.push(()=>Z(e,"checked",i)),o=new ye({props:{url:`pmtiles://${_e()}/v1/${r[0]}.pmtiles`,$$slots:{default:[bc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&1&&(u.id=s[0]),f&514&&(u.$$scope={dirty:f,ctx:s}),!n&&f&4&&(n=!0,u.checked=s[2],Y(()=>n=!1)),e.$set(u);const c={};f&1&&(c.url=`pmtiles://${_e()}/v1/${s[0]}.pmtiles`),f&521&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}function yc(r,e,n){let t,{$$slots:o={},$$scope:l}=e,{name:i}=e,{singularNoun:a}=e,{pluralNoun:s}=e,f=Q[i],u=!1;function c(g){return g.properties.name??`Unnamed ${a}`}function p(g){u=g,n(2,u)}return r.$$set=g=>{"name"in g&&n(0,i=g.name),"singularNoun"in g&&n(6,a=g.singularNoun),"pluralNoun"in g&&n(1,s=g.pluralNoun),"$$scope"in g&&n(9,l=g.$$scope)},r.$$.update=()=>{r.$$.dirty&4&&n(3,t=u?"visible":"none")},[i,s,u,t,f,c,a,o,p,l]}class pn extends V{constructor(e){super(),q(this,e,yc,vc,G,{name:0,singularNoun:6,pluralNoun:1})}}function wc(r){let e;return{c(){e=y("hospital")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function kc(r){let e,n,t,o,l,i,a;return t=new K({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[wc]},$$scope:{ctx:r}}}),i=new Qe({}),{c(){e=M("p"),n=y("This shows "),h(t.$$.fragment),o=y(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),l=O(),h(i.$$.fragment)},m(s,f){$(s,e,f),C(e,n),b(t,e,null),C(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&1&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function Sc(r){let e,n;return e=new pn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[kc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&1&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Cc extends V{constructor(e){super(),q(this,e,null,Sc,G,{})}}function Tc(r){let e,n,t;return e=new Ae({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=y(`
  Railway Stations`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:x,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function Lc(r){let e;return{c(){e=y("railway station")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Oc(r){let e,n,t,o,l,i,a;return t=new K({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Lc]},$$scope:{ctx:r}}}),i=new Qe({}),{c(){e=M("p"),n=y("This shows "),h(t.$$.fragment),o=y(" data from OpenStreetMap (as of 9 August 2023)."),l=O(),h(i.$$.fragment)},m(s,f){$(s,e,f),C(e,n),b(t,e,null),C(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function Ac(r){let e,n,t;return n=new pe({props:{$$slots:{default:[Oc]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),J(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function Ic(r){let e,n=gr(r[4][0])+"",t;return{c(){e=M("p"),t=y(n)},m(o,l){$(o,e,l),C(e,t)},p(o,l){l&16&&n!==(n=gr(o[4][0])+"")&&W(t,n)},d(o){o&&d(e)}}}function Mc(r){let e,n;return e=new $e({props:{openOn:"hover",$$slots:{default:[Ic,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&48&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Pc(r){let e,n;return e=new ct({props:{id:sn,paint:{"circle-color":r[2],"circle-radius":mo/2},layout:{visibility:r[1]},$$slots:{default:[Mc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ec(r){let e,n,t,o,l;function i(s){r[3](s)}let a={id:sn,$$slots:{right:[Ac],default:[Tc]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ue({props:a}),X.push(()=>Z(e,"checked",i)),o=new Ut({props:{data:`${_e()}/v1/${sn}.geojson`,$$slots:{default:[Pc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],Y(()=>n=!1)),e.$set(u);const c={};f&34&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let sn="railway_stations";function gr(r){return r.properties.name??"Unnamed railway station"}function Nc(r,e,n){let t,o=Q.railway_stations,l=!1;function i(a){l=a,n(0,l)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=l?"visible":"none")},[l,t,o,i]}class Dc extends V{constructor(e){super(),q(this,e,Nc,Ec,G,{})}}function Fc(r){let e;return{c(){e=y("primary and secondary schools")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function jc(r){let e,n,t,o,l,i,a;return t=new K({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[Fc]},$$scope:{ctx:r}}}),i=new Qe({}),{c(){e=M("p"),n=y("This shows "),h(t.$$.fragment),o=y(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),l=O(),h(i.$$.fragment)},m(s,f){$(s,e,f),C(e,n),b(t,e,null),C(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&1&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function Bc(r){let e,n;return e=new pn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[jc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&1&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Hc extends V{constructor(e){super(),q(this,e,null,Bc,G,{})}}function Rc(r){let e;return{c(){e=y("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function zc(r){let e;return{c(){e=y("sports centres")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Wc(r){let e,n,t,o,l,i,a,s,f;return t=new K({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Rc]},$$scope:{ctx:r}}}),l=new K({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[zc]},$$scope:{ctx:r}}}),s=new Qe({}),{c(){e=M("p"),n=y("This shows "),h(t.$$.fragment),o=y(" and "),h(l.$$.fragment),i=y(" data from OpenStreetMap (as of 9 August 2023)."),a=O(),h(s.$$.fragment)},m(u,c){$(u,e,c),C(e,n),b(t,e,null),C(e,o),b(l,e,null),C(e,i),$(u,a,c),b(s,u,c),f=!0},p(u,c){const p={};c&1&&(p.$$scope={dirty:c,ctx:u}),t.$set(p);const g={};c&1&&(g.$$scope={dirty:c,ctx:u}),l.$set(g)},i(u){f||(m(t.$$.fragment,u),m(l.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),_(l.$$.fragment,u),_(s.$$.fragment,u),f=!1},d(u){u&&(d(e),d(a)),v(t),v(l),v(s,u)}}}function Uc(r){let e,n;return e=new pn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Wc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&1&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Gc extends V{constructor(e){super(),q(this,e,null,Uc,G,{})}}function _r(r){const e=ep(r[6][0]);r[7]=e[0],r[8]=e[1],r[9]=e[2],r[10]=e[3]}function Vc(r){let e;return{c(){e=y("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function qc(r){let e;return{c(){e=y(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Xc(r){let e;return{c(){e=y("methodology")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Kc(r){let e,n,t,o,l,i,a,s,f,u,c;return t=new K({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[qc]},$$scope:{ctx:r}}}),l=new K({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Xc]},$$scope:{ctx:r}}}),u=new Ge({}),{c(){e=M("p"),n=y("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),o=y(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(l.$$.fragment),i=y(" for details and caveats about the measurements."),a=O(),s=M("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,f=O(),h(u.$$.fragment)},m(p,g){$(p,e,g),C(e,n),b(t,e,null),C(e,o),b(l,e,null),C(e,i),$(p,a,g),$(p,s,g),$(p,f,g),b(u,p,g),c=!0},p(p,g){const k={};g&2048&&(k.$$scope={dirty:g,ctx:p}),t.$set(k);const w={};g&2048&&(w.$$scope={dirty:g,ctx:p}),l.$set(w)},i(p){c||(m(t.$$.fragment,p),m(l.$$.fragment,p),m(u.$$.fragment,p),c=!0)},o(p){_(t.$$.fragment,p),_(l.$$.fragment,p),_(u.$$.fragment,p),c=!1},d(p){p&&(d(e),d(a),d(s),d(f)),v(t),v(l),v(u,p)}}}function Zc(r){let e,n,t;return n=new pe({props:{$$slots:{default:[Kc]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),J(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&2048&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function hr(r){let e,n;return e=new Je({props:{colorScale:r[2],limits:r[4]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:x,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Yc(r){_r(r);let e,n=r[7]+"",t,o,l,i,a,s=r[8]+"",f,u,c,p,g,k=r[9]+"",w,T,S,A,B,P=r[10]+"",D;return{c(){e=M("h2"),t=y(n),o=O(),l=M("p"),i=y("Total motor vehicles (2022 AADF): "),a=M("b"),f=y(s),u=O(),c=M("p"),p=y("Total pedal cycles (2022 AADF): "),g=M("b"),w=y(k),T=O(),S=M("p"),A=y("Count method: "),B=M("b"),D=y(P)},m(F,I){$(F,e,I),C(e,t),$(F,o,I),$(F,l,I),C(l,i),C(l,a),C(a,f),$(F,u,I),$(F,c,I),C(c,p),C(c,g),C(g,w),$(F,T,I),$(F,S,I),C(S,A),C(S,B),C(B,D)},p(F,I){_r(F),I&64&&n!==(n=F[7]+"")&&W(t,n),I&64&&s!==(s=F[8]+"")&&W(f,s),I&64&&k!==(k=F[9]+"")&&W(w,k),I&64&&P!==(P=F[10]+"")&&W(D,P)},d(F){F&&(d(e),d(o),d(l),d(u),d(c),d(T),d(S))}}}function Jc(r){let e,n;return e=new $e({props:{openOn:"hover",$$slots:{default:[Yc,({features:t})=>({6:t}),({features:t})=>t?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2112&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qc(r){let e,n;return e=new ct({props:{id:zt,sourceLayer:zt,paint:{"circle-color":De(["get","motor_vehicles_2022"],r[3],r[2]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1},layout:{visibility:r[1]},$$slots:{default:[Jc]},$$scope:{ctx:r}}}),e.$on("click",tp),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&2048&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xc(r){let e,n,t,o,l,i;function a(u){r[5](u)}let s={id:zt,$$slots:{right:[Zc],default:[Vc]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ue({props:s}),X.push(()=>Z(e,"checked",a));let f=r[0]&&hr(r);return l=new ye({props:{url:`pmtiles://${_e()}/v1/${zt}.pmtiles`,$$slots:{default:[Qc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),f&&f.c(),o=O(),h(l.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),f&&f.m(u,c),$(u,o,c),b(l,u,c),i=!0},p(u,[c]){const p={};c&2048&&(p.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,p.checked=u[0],Y(()=>n=!1)),e.$set(p),u[0]?f?(f.p(u,c),c&1&&m(f,1)):(f=hr(u),f.c(),m(f,1),f.m(o.parentNode,o)):f&&(le(),_(f,1,1,()=>{f=null}),se());const g={};c&2050&&(g.$$scope={dirty:c,ctx:u}),l.$set(g)},i(u){i||(m(e.$$.fragment,u),m(f),m(l.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),_(f),_(l.$$.fragment,u),i=!1},d(u){u&&(d(t),d(o)),v(e,u),f&&f.d(u),v(l,u)}}}let zt="vehicle_counts";function ep(r){let e=r.properties;return[e.location,e.motor_vehicles_2022.toLocaleString(),e.pedal_cycles_2022.toLocaleString(),e.method]}function tp(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function np(r,e,n){let t,o=Q.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],i=["","40k","80k","120k","160k",""],a=!1;function s(f){a=f,n(0,a)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=a?"visible":"none")},[a,t,o,l,i,s]}class rp extends V{constructor(e){super(),q(this,e,np,xc,G,{})}}function op(r){let e,n,t,o,l,i,a,s;return e=new Hc({}),t=new Cc({}),l=new Gc({}),a=new Dc({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),o=O(),h(l.$$.fragment),i=O(),h(a.$$.fragment)},m(f,u){b(e,f,u),$(f,n,u),b(t,f,u),$(f,o,u),b(l,f,u),$(f,i,u),b(a,f,u),s=!0},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(l.$$.fragment,f),m(a.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(l.$$.fragment,f),_(a.$$.fragment,f),s=!1},d(f){f&&(d(n),d(o),d(i)),v(e,f),v(t,f),v(l,f),v(a,f)}}}function lp(r){let e,n;return e=new vt({props:{small:!0,$$slots:{default:[op]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function sp(r){let e,n,t,o,l,i,a,s,f,u;return e=new Vf({}),t=new tu({}),l=new Nf({}),a=new mc({}),f=new rc({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),o=O(),h(l.$$.fragment),i=O(),h(a.$$.fragment),s=O(),h(f.$$.fragment)},m(c,p){b(e,c,p),$(c,n,p),b(t,c,p),$(c,o,p),b(l,c,p),$(c,i,p),b(a,c,p),$(c,s,p),b(f,c,p),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(l.$$.fragment,c),m(a.$$.fragment,c),m(f.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(l.$$.fragment,c),_(a.$$.fragment,c),_(f.$$.fragment,c),u=!1},d(c){c&&(d(n),d(o),d(i),d(s)),v(e,c),v(t,c),v(l,c),v(a,c),v(f,c)}}}function ip(r){let e,n;return e=new vt({props:{small:!0,$$slots:{default:[sp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ap(r){let e,n,t,o,l,i,a,s,f,u;return e=new ff({}),t=new vf({}),l=new da({}),a=new ja({}),f=new Ja({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),o=O(),h(l.$$.fragment),i=O(),h(a.$$.fragment),s=O(),h(f.$$.fragment)},m(c,p){b(e,c,p),$(c,n,p),b(t,c,p),$(c,o,p),b(l,c,p),$(c,i,p),b(a,c,p),$(c,s,p),b(f,c,p),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(l.$$.fragment,c),m(a.$$.fragment,c),m(f.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(l.$$.fragment,c),_(a.$$.fragment,c),_(f.$$.fragment,c),u=!1},d(c){c&&(d(n),d(o),d(i),d(s)),v(e,c),v(t,c),v(l,c),v(a,c),v(f,c)}}}function fp(r){let e,n;return e=new vt({props:{small:!0,$$slots:{default:[ap]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function up(r){let e,n,t,o;return e=new oa({}),t=new Ta({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function cp(r){let e,n,t,o;return e=new Fu({}),t=new Tu({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function pp(r){let e,n,t,o,l=an()=="Private (development)",i,a;e=new rp({}),t=new du({});let s=l&&cp();return{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),o=O(),s&&s.c(),i=he()},m(f,u){b(e,f,u),$(f,n,u),b(t,f,u),$(f,o,u),s&&s.m(f,u),$(f,i,u),a=!0},p:x,i(f){a||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(s),a=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(s),a=!1},d(f){f&&(d(n),d(o),d(i)),v(e,f),v(t,f),s&&s.d(f)}}}function mp(r){let e,n,t,o,l;function i(s){r[4](s)}let a={displayEnableButton:!0};return r[1]!==void 0&&(a.isInactive=r[1]),e=new go({props:a}),r[3](e),X.push(()=>Z(e,"isInactive",i)),o=new Li({}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,f){const u={};!n&&f&2&&(n=!0,u.isInactive=s[1],Y(()=>n=!1)),e.$set(u)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),r[3](null),v(e,s),v(o,s)}}}function $p(r){let e,n,t,o,l,i,a,s,f,u,c,p,g,k,w,T;return e=new qu({}),t=new Ee({props:{label:"Trip generators",$$slots:{default:[lp]},$$scope:{ctx:r}}}),l=new Ee({props:{label:"Existing infrastructure",$$slots:{default:[ip]},$$scope:{ctx:r}}}),a=new Ee({props:{label:"Boundaries",$$slots:{default:[fp]},$$scope:{ctx:r}}}),f=new Ee({props:{label:"Census",$$slots:{default:[up]},$$scope:{ctx:r}}}),c=new Ee({props:{label:"Other",$$slots:{default:[pp]},$$scope:{ctx:r}}}),g=new Ee({props:{label:"Tools",$$slots:{default:[mp]},$$scope:{ctx:r}}}),w=new $o({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),o=O(),h(l.$$.fragment),i=O(),h(a.$$.fragment),s=O(),h(f.$$.fragment),u=O(),h(c.$$.fragment),p=O(),h(g.$$.fragment),k=O(),h(w.$$.fragment)},m(S,A){b(e,S,A),$(S,n,A),b(t,S,A),$(S,o,A),b(l,S,A),$(S,i,A),b(a,S,A),$(S,s,A),b(f,S,A),$(S,u,A),b(c,S,A),$(S,p,A),b(g,S,A),$(S,k,A),b(w,S,A),T=!0},p(S,A){const B={};A&32&&(B.$$scope={dirty:A,ctx:S}),t.$set(B);const P={};A&32&&(P.$$scope={dirty:A,ctx:S}),l.$set(P);const D={};A&32&&(D.$$scope={dirty:A,ctx:S}),a.$set(D);const F={};A&32&&(F.$$scope={dirty:A,ctx:S}),f.$set(F);const I={};A&32&&(I.$$scope={dirty:A,ctx:S}),c.$set(I);const N={};A&35&&(N.$$scope={dirty:A,ctx:S}),g.$set(N);const j={};A&2&&(j.disabled=!S[1]),w.$set(j)},i(S){T||(m(e.$$.fragment,S),m(t.$$.fragment,S),m(l.$$.fragment,S),m(a.$$.fragment,S),m(f.$$.fragment,S),m(c.$$.fragment,S),m(g.$$.fragment,S),m(w.$$.fragment,S),T=!0)},o(S){_(e.$$.fragment,S),_(t.$$.fragment,S),_(l.$$.fragment,S),_(a.$$.fragment,S),_(f.$$.fragment,S),_(c.$$.fragment,S),_(g.$$.fragment,S),_(w.$$.fragment,S),T=!1},d(S){S&&(d(n),d(o),d(i),d(s),d(u),d(p),d(k)),v(e,S),v(t,S),v(l,S),v(a,S),v(f,S),v(c,S),v(g,S),v(w,S)}}}function dp(r){let e,n,t,o;return e=new Ee({props:{label:"Layers",open:!0,$$slots:{default:[$p]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(l,i){b(e,l,i),n=!0,t||(o=ut(window,"keydown",r[2]),t=!0)},p(l,[i]){const a={};i&35&&(a.$$scope={dirty:i,ctx:l}),e.$set(a)},i(l){n||(m(e.$$.fragment,l),n=!0)},o(l){_(e.$$.fragment,l),n=!1},d(l){v(e,l),t=!1,o()}}}function gp(r,e,n){let t;ae(r,dn,s=>n(1,t=s));let o;function l(s){!t&&s.key=="Escape"&&(o.disableStreetView(),s.preventDefault())}function i(s){X[s?"unshift":"push"](()=>{o=s,n(0,o)})}function a(s){t=s,dn.set(t)}return[o,t,l,i,a]}class _p extends V{constructor(e){super(),q(this,e,gp,dp,G,{})}}function hp(r,e,n){let{loadFile:t}=e;return mt(async()=>{let l=await(await fetch(`${un()}/v1/random_schemes.geojson`)).text();t(l)}),r.$$set=o=>{"loadFile"in o&&n(0,t=o.loadFile)},[t]}class bp extends V{constructor(e){super(),q(this,e,hp,null,G,{loadFile:0})}}function vp(r){let e;return{c(){e=y("Show on map")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function yp(r){let e;return{c(){e=y("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function wp(r){let e,n,t=r[0].authority_or_region+"",o,l,i,a,s=r[0].capital_scheme_id+"",f,u,c,p,g=r[0].funding_programme+"",k,w,T,S,A,B,P;return S=new gt({props:{$$slots:{default:[vp]},$$scope:{ctx:r}}}),S.$on("click",r[3]),B=new gt({props:{disabled:r[1],title:r[2],$$slots:{default:[yp]},$$scope:{ctx:r}}}),B.$on("click",r[4]),{c(){e=M("p"),n=y("Authority or region: "),o=y(t),l=O(),i=M("p"),a=y("Capital scheme ID: "),f=y(s),u=O(),c=M("p"),p=y("Funding programme: "),k=y(g),w=O(),T=M("div"),h(S.$$.fragment),A=O(),h(B.$$.fragment),J(T,"class","govuk-button-group")},m(D,F){$(D,e,F),C(e,n),C(e,o),$(D,l,F),$(D,i,F),C(i,a),C(i,f),$(D,u,F),$(D,c,F),C(c,p),C(c,k),$(D,w,F),$(D,T,F),b(S,T,null),C(T,A),b(B,T,null),P=!0},p(D,F){(!P||F&1)&&t!==(t=D[0].authority_or_region+"")&&W(o,t),(!P||F&1)&&s!==(s=D[0].capital_scheme_id+"")&&W(f,s),(!P||F&1)&&g!==(g=D[0].funding_programme+"")&&W(k,g);const I={};F&256&&(I.$$scope={dirty:F,ctx:D}),S.$set(I);const N={};F&256&&(N.$$scope={dirty:F,ctx:D}),B.$set(N)},i(D){P||(m(S.$$.fragment,D),m(B.$$.fragment,D),P=!0)},o(D){_(S.$$.fragment,D),_(B.$$.fragment,D),P=!1},d(D){D&&(d(e),d(l),d(i),d(u),d(c),d(w),d(T)),v(S),v(B)}}}function kp(r){let e,n;return e=new Ee({props:{label:`${r[0].scheme_reference}: ${r[0].num_features} features`,$$slots:{default:[wp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&1&&(l.label=`${t[0].scheme_reference}: ${t[0].num_features} features`),o&257&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Sp(r,e,n){let t,o;ae(r,st,c=>n(6,t=c)),ae(r,$t,c=>n(7,o=c));let{scheme:l}=e,{authorityNames:i}=e,a=!i.has(l.authority_or_region),s=a?"This scheme doesn't have an authority specified correctly, so you can't edit this scheme. We're working to fix this problem.":void 0;function f(){let c={type:"FeatureCollection",features:t.features.filter(p=>p.properties.scheme_reference==l.scheme_reference)};o==null||o.fitBounds(so(c),{padding:20,animate:!1})}function u(){let c={type:"FeatureCollection",features:t.features.filter(g=>g.properties.scheme_reference==l.scheme_reference)},p=l.authority_or_region;window.localStorage.setItem(p,JSON.stringify(c)),window.open(`scheme.html?authority=${l.authority_or_region}`,"_blank")}return r.$$set=c=>{"scheme"in c&&n(0,l=c.scheme),"authorityNames"in c&&n(5,i=c.authorityNames)},[l,a,s,f,u,i]}class Cp extends V{constructor(e){super(),q(this,e,Sp,kp,G,{scheme:0,authorityNames:5})}}const Tp=["Adur","Allerdale","Amber Valley","Arun","Ashfield","Ashford","Babergh","Barking and Dagenham","Barnet","Barnsley","Barrow-in-Furness","Basildon","Basingstoke and Deane","Bassetlaw","Bath and North East Somerset","Bedford","Bexley","Birmingham","Blaby","Blackburn with Darwen","Blackpool","Bolsover","Bolton","Boston","Bournemouth, Christchurch and Poole","Bracknell Forest","Bradford","Braintree","Breckland","Brent","Brentwood","Brighton and Hove","Bristol, City of","Broadland","Bromley","Bromsgrove","Broxbourne","Broxtowe","Buckinghamshire","Burnley","Bury","Calderdale","Cambridge","Cambridgeshire and Peterborough Combined Authority","Camden","Cannock Chase","Canterbury","Carlisle","Castle Point","Central Bedfordshire","Charnwood","Chelmsford","Cheltenham","Cherwell","Cheshire East","Cheshire West and Chester","Chesterfield","Chichester","Chorley","City of London","Colchester","Copeland","Cornwall","Cotswold","County Durham","Coventry","Craven","Crawley","Croydon","Cumbria","Dacorum","Darlington","Dartford","Derby","Derbyshire","Derbyshire Dales","Devon","Doncaster","Dorset","Dover","Dudley","Ealing","Eastbourne","East Cambridgeshire","East Devon","East Hampshire","East Hertfordshire","Eastleigh","East Lindsey","East Riding of Yorkshire","East Staffordshire","East Suffolk","East Sussex","Eden","Elmbridge","Enfield","Epping Forest","Epsom and Ewell","Erewash","Essex","Exeter","Fareham","Fenland","Folkestone and Hythe","Forest of Dean","Fylde","Gateshead","Gedling","Gloucester","Gloucestershire","Gosport","Gravesham","Greater London","Greater Manchester Combined Authority","Great Yarmouth","Greenwich","Guildford","Hackney","Halton","Hambleton","Hammersmith and Fulham","Hampshire","Harborough","Haringey","Harlow","Harrogate","Harrow","Hart","Hartlepool","Hastings","Havant","Havering","Herefordshire","Herefordshire, County of","Hertfordshire","Hertsmere","High Peak","Hillingdon","Hinckley and Bosworth","Horsham","Hounslow","Huntingdonshire","Hyndburn","Ipswich","Isle of Wight","Isles of Scilly","Islington","Kensington and Chelsea","Kent","King's Lynn and West Norfolk","Kingston upon Hull","Kingston upon Hull, City of","Kingston upon Thames","Kirklees","Knowsley","Lambeth","Lancashire","Lancaster","Leeds","Leicester","Leicestershire","Lewes","Lewisham","Lichfield","Lincoln","Lincolnshire","Liverpool","Liverpool City Region Combined Authority","Luton","Maidstone","Maldon","Malvern Hills","Manchester","Mansfield","Medway","Melton","Mendip","Merton","Mid Devon","Middlesbrough","Mid Suffolk","Mid Sussex","Milton Keynes","Mole Valley","Newark and Sherwood","Newcastle-under-Lyme","Newcastle upon Tyne","New Forest","Newham","Norfolk","North Devon","North East Derbyshire","North East Joint Transport Committee","North East Lincolnshire","North Hertfordshire","North Kesteven","North Lincolnshire","North Norfolk","North Northamptonshire","North Somerset","North Tyneside","Northumberland","North Warwickshire","North West Leicestershire","North Yorkshire","Norwich","Nottingham","Nottinghamshire","Nuneaton and Bedworth","Oadby and Wigston","Oldham","Oxford","Oxfordshire","Pendle","Peterborough","Plymouth","Portsmouth","Preston","Reading","Redbridge","Redcar and Cleveland","Redditch","Reigate and Banstead","Ribble Valley","Richmondshire","Richmond upon Thames","Rochdale","Rochford","Rossendale","Rother","Rotherham","Rugby","Runnymede","Rushcliffe","Rushmoor","Rutland","Ryedale","Salford","Sandwell","Scarborough","Sedgemoor","Sefton","Selby","Sevenoaks","Sheffield","Sheffield City Region Combined Authority","Shropshire","Slough","Solihull","Somerset","Somerset West and Taunton","Southampton","South Cambridgeshire","South Derbyshire","Southend-on-Sea","South Gloucestershire","South Hams","South Holland","South Kesteven","South Lakeland","South Norfolk","South Oxfordshire","South Ribble","South Somerset","South Staffordshire","South Tyneside","Southwark","Spelthorne","Stafford","Staffordshire","Staffordshire Moorlands","St Albans","Stevenage","St. Helens","Stockport","Stockton-on-Tees","Stoke-on-Trent","Stratford-on-Avon","Stroud","Suffolk","Sunderland","Surrey","Surrey Heath","Sutton","Swale","Swindon","Tameside","Tamworth","Tandridge","Tees Valley Combined Authority","Teignbridge","Telford and Wrekin","Tendring","Test Valley","Tewkesbury","Thanet","Three Rivers","Thurrock","Tonbridge and Malling","Torbay","Torridge","Tower Hamlets","Trafford","Tunbridge Wells","Uttlesford","Vale of White Horse","Wakefield","Walsall","Waltham Forest","Wandsworth","Warrington","Warwick","Warwickshire","Watford","Waverley","Wealden","Welwyn Hatfield","West Berkshire","West Devon","West Lancashire","West Lindsey","West Midlands ITA","Westminster","West Northamptonshire","West of England Combined Authority","West Oxfordshire","West Suffolk","West Sussex","West Yorkshire Combined Authority","Wigan","Wiltshire","Winchester","Windsor and Maidenhead","Wirral","Woking","Wokingham","Wolverhampton","Worcester","Worcestershire","Worthing","Wychavon","Wyre","Wyre Forest","York"];function br(r,e,n){const t=r.slice();return t[13]=e[n],t}function Lp(r){let e,n;return e=new bp({props:{loadFile:r[7]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:x,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vr(r){let e,n,t,o;function l(s){r[9](s)}function i(s){r[10](s)}let a={schemes:r[1]};return r[2]!==void 0&&(a.schemesToBeShown=r[2]),r[3]!==void 0&&(a.filterText=r[3]),e=new _i({props:a}),X.push(()=>Z(e,"schemesToBeShown",l)),X.push(()=>Z(e,"filterText",i)),{c(){h(e.$$.fragment)},m(s,f){b(e,s,f),o=!0},p(s,f){const u={};f&2&&(u.schemes=s[1]),!n&&f&4&&(n=!0,u.schemesToBeShown=s[2],Y(()=>n=!1)),!t&&f&8&&(t=!0,u.filterText=s[3],Y(()=>t=!1)),e.$set(u)},i(s){o||(m(e.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),o=!1},d(s){v(e,s)}}}function yr(r){let e,n;return e=new Cp({props:{scheme:r[13],authorityNames:r[6]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.scheme=t[13]),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wr(r){let e=r[2].has(r[13].scheme_reference),n,t,o=e&&yr(r);return{c(){o&&o.c(),n=he()},m(l,i){o&&o.m(l,i),$(l,n,i),t=!0},p(l,i){i&6&&(e=l[2].has(l[13].scheme_reference)),e?o?(o.p(l,i),i&6&&m(o,1)):(o=yr(l),o.c(),m(o,1),o.m(n.parentNode,n)):o&&(le(),_(o,1,1,()=>{o=null}),se())},i(l){t||(m(o),t=!0)},o(l){_(o),t=!1},d(l){l&&d(n),o&&o.d(l)}}}function Op(r){let e,n,t,o,l,i,a,s,f,u,c=an()=="Private (development)",p,g,k,w,T,S,A,B;l=new yo({props:{boundaryGeojson:r[5]}}),a=new ol({}),f=new io({});let P=c&&Lp(r);g=new ko({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[7]}}),w=new Lr({props:{errorMessage:r[0]}});let D=r[1].size>0&&vr(r),F=je(r[1].values()),I=[];for(let j=0;j<F.length;j+=1)I[j]=wr(br(r,F,j));const N=j=>_(I[j],1,1,()=>{I[j]=null});return{c(){e=M("div"),n=M("div"),t=M("h1"),t.textContent="Browse schemes",o=O(),h(l.$$.fragment),i=O(),h(a.$$.fragment),s=O(),h(f.$$.fragment),u=O(),P&&P.c(),p=O(),h(g.$$.fragment),k=O(),h(w.$$.fragment),T=O(),D&&D.c(),S=O(),A=M("ul");for(let j=0;j<I.length;j+=1)I[j].c();Be(n,"display","flex"),Be(n,"justify-content","space-between"),J(e,"slot","sidebar"),J(e,"class","govuk-prose")},m(j,L){$(j,e,L),C(e,n),C(n,t),C(n,o),b(l,n,null),C(e,i),b(a,e,null),C(e,s),b(f,e,null),C(e,u),P&&P.m(e,null),C(e,p),b(g,e,null),C(e,k),b(w,e,null),C(e,T),D&&D.m(e,null),C(e,S),C(e,A);for(let E=0;E<I.length;E+=1)I[E]&&I[E].m(A,null);B=!0},p(j,L){const E={};L&32&&(E.boundaryGeojson=j[5]),l.$set(E),c&&P.p(j,L);const z={};if(L&1&&(z.errorMessage=j[0]),w.$set(z),j[1].size>0?D?(D.p(j,L),L&2&&m(D,1)):(D=vr(j),D.c(),m(D,1),D.m(e,S)):D&&(le(),_(D,1,1,()=>{D=null}),se()),L&70){F=je(j[1].values());let U;for(U=0;U<F.length;U+=1){const ne=br(j,F,U);I[U]?(I[U].p(ne,L),m(I[U],1)):(I[U]=wr(ne),I[U].c(),m(I[U],1),I[U].m(A,null))}for(le(),U=F.length;U<I.length;U+=1)N(U);se()}},i(j){if(!B){m(l.$$.fragment,j),m(a.$$.fragment,j),m(f.$$.fragment,j),m(P),m(g.$$.fragment,j),m(w.$$.fragment,j),m(D);for(let L=0;L<F.length;L+=1)m(I[L]);B=!0}},o(j){_(l.$$.fragment,j),_(a.$$.fragment,j),_(f.$$.fragment,j),_(P),_(g.$$.fragment,j),_(w.$$.fragment,j),_(D),I=I.filter(Boolean);for(let L=0;L<I.length;L+=1)_(I[L]);B=!1},d(j){j&&d(e),v(l),v(a),v(f),P&&P.d(),v(g),v(w),D&&D.d(),Ct(I,j)}}}function Ap(r){let e,n,t,o,l,i,a,s,f,u,c;return e=new wo({props:{colorInterventions:Ar("v1")}}),t=new Gt({props:{layer:"interventions-points",tooltip:r[8],clickable:!1}}),l=new Gt({props:{layer:"interventions-lines",tooltip:r[8],clickable:!1}}),a=new Gt({props:{layer:"interventions-polygons",tooltip:r[8],clickable:!1}}),u=new _p({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),o=O(),h(l.$$.fragment),i=O(),h(a.$$.fragment),s=O(),f=M("div"),h(u.$$.fragment),J(f,"class","top-right svelte-u44ed2")},m(p,g){b(e,p,g),$(p,n,g),b(t,p,g),$(p,o,g),b(l,p,g),$(p,i,g),b(a,p,g),$(p,s,g),$(p,f,g),b(u,f,null),c=!0},p:x,i(p){c||(m(e.$$.fragment,p),m(t.$$.fragment,p),m(l.$$.fragment,p),m(a.$$.fragment,p),m(u.$$.fragment,p),c=!0)},o(p){_(e.$$.fragment,p),_(t.$$.fragment,p),_(l.$$.fragment,p),_(a.$$.fragment,p),_(u.$$.fragment,p),c=!1},d(p){p&&(d(n),d(o),d(i),d(s),d(f)),v(e,p),v(t,p),v(l,p),v(a,p),v(u)}}}function Ip(r){let e,n,t;return n=new ho({props:{style:r[4],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Ap]},$$scope:{ctx:r}}}),{c(){e=M("div"),h(n.$$.fragment),J(e,"slot","main")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&16&&(i.style=o[4]),l&65536&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function Mp(r){let e,n;return e=new _o({props:{$$slots:{main:[Ip],sidebar:[Op]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&65599&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Pp(r,e,n){let t,o;ae(r,gn,T=>n(4,t=T)),ae(r,st,T=>n(5,o=T));let l=new Set(Tp);mt(()=>{ao()});const i=new URLSearchParams(window.location.search);gn.set(i.get("style")||"dataviz");let a="",s=new Map,f=new Set,u="";pt(()=>{st.set(fn())});function c(T){try{let S=JSON.parse(T);n(1,s=li(S)),st.set(S),n(0,a="")}catch(S){n(0,a=`The file you loaded is broken: ${S}`)}}function p(T){let S=T.properties;var A='<div style="max-width: 30vw;">';return A+=`<h2>${g(S.name)} (${S.intervention_type})</h2>`,A+=`<p>Scheme reference: ${S.scheme_reference}</p>`,S.length_meters&&(A+=`<p>Length: ${fo(S.length_meters)}</p>`),S.description&&(A+=`<p>${g(S.description)}</p>`),A+="</div>",A}function g(T){return u?T.replace(new RegExp(u,"gi"),S=>`<mark>${S}</mark>`):T}function k(T){f=T,n(2,f)}function w(T){u=T,n(3,u)}return[a,s,f,u,t,o,l,c,p,k,w]}class Ep extends V{constructor(e){super(),q(this,e,Pp,Mp,G,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new Ep({target:document.getElementById("app")});
