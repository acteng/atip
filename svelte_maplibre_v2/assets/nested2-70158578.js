import{S as G,i as z,s as U,M as Br,g as V,h as Y,j as L,k as O,n as h,ax as Hr,p as K,q as m,r as y,t as b,C as tt,u as J,v as p,w as d,y as g,z as v,aJ as rt,aK as ot,aL as lt,aM as st,a1 as ve,G as re,x as oe,aS as We,c as pe,e as tn,aT as zt,aU as Rr,D as Q,aV as Wr,aW as Ur,o as it,aX as Je,A as w,l as nn,ao as Gr,m as gt,aq as pr,T as nt,F as mr,f as ct,B as fn,N as H,d as qt,aC as zr,az as Me,aN as qr,aO as Vr,Y as Vt,ab as Xr,aR as X,ap as Ae,aA as wt,aY as ae,aZ as Pe,R as gr,a_ as rn,a$ as on,E as _r,a as un,J as Kr,aG as cn,a0 as Yr,$ as Jr,_ as Zr,Z as $n,aQ as pn,L as Qr,H as xr}from"./index-c3a200ef.js";import{g as dr,u as eo,e as to,m as no,f as kt,C as Oe,b as _t,d as ne,c as hr,a as br,B as ro,S as oo,l as Ft,L as lo,M as so}from"./StreetViewController-265a8389.js";import{j as io,h as ao,i as mn,f as vr,G as at,L as fe,l as fo,F as Fe,k as ie,m as we,C as Ge,Z as uo}from"./index-42ceb116.js";import{F as co}from"./FileInput-d31b7730.js";const $o="/atip/svelte_maplibre_v2/assets/help-d011708a.svg";function po(r){let e,n;const t=r[1].default,o=rt(t,r,r[4],null);return{c(){e=L("div"),o&&o.c(),K(e,"class","govuk-prose")},m(l,i){m(l,e,i),o&&o.m(e,null),n=!0},p(l,i){o&&o.p&&(!n||i&16)&&ot(o,t,l,l[4],n?st(t,l[4],i,null):lt(l[4]),null)},i(l){n||(p(o,l),n=!0)},o(l){d(o,l),n=!1},d(l){l&&g(e),o&&o.d(l)}}}function mo(r){let e,n,t,o,l,i,a,s,f;function u($){r[3]($)}let c={title:"Help",$$slots:{default:[po]},$$scope:{ctx:r}};return r[0]!==void 0&&(c.open=r[0]),l=new Br({props:c}),V.push(()=>Y(l,"open",u)),{c(){e=L("button"),n=L("img"),o=O(),h(l.$$.fragment),Hr(n.src,t=$o)||K(n,"src",t),K(n,"title","Help"),K(n,"alt","Help"),K(e,"class","svelte-7d9d1l")},m($,_){m($,e,_),y(e,n),m($,o,_),b(l,$,_),a=!0,s||(f=tt(e,"click",r[2]),s=!0)},p($,[_]){const T={};_&16&&(T.$$scope={dirty:_,ctx:$}),!i&&_&1&&(i=!0,T.open=$[0],J(()=>i=!1)),l.$set(T)},i($){a||(p(l.$$.fragment,$),a=!0)},o($){d(l.$$.fragment,$),a=!1},d($){$&&(g(e),g(o)),v(l,$),s=!1,f()}}}function go(r,e,n){let{$$slots:t={},$$scope:o}=e,l=!1;const i=()=>n(0,l=!0);function a(s){l=s,n(0,l)}return r.$$set=s=>{"$$scope"in s&&n(4,o=s.$$scope)},[l,t,i,a,o]}class le extends G{constructor(e){super(),z(this,e,go,mo,U,{})}}function gn(r){let e=r[0],n,t,o=_n(r);return{c(){o.c(),n=ve()},m(l,i){o.m(l,i),m(l,n,i),t=!0},p(l,i){i&1&&U(e,e=l[0])?(re(),d(o,1,1,Q),oe(),o=_n(l),o.c(),p(o,1),o.m(n.parentNode,n)):o.p(l,i)},i(l){t||(p(o),t=!0)},o(l){d(o),t=!1},d(l){l&&g(n),o.d(l)}}}function _n(r){let e;const n=r[8].default,t=rt(n,r,r[7],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&128)&&ot(t,n,o,o[7],e?st(n,o[7],l,null):lt(o[7]),null)},i(o){e||(p(t,o),e=!0)},o(o){d(t,o),e=!1},d(o){t&&t.d(o)}}}function _o(r){let e,n,t=r[0]&&gn(r);return{c(){t&&t.c(),e=ve()},m(o,l){t&&t.m(o,l),m(o,e,l),n=!0},p(o,[l]){o[0]?t?(t.p(o,l),l&1&&p(t,1)):(t=gn(o),t.c(),p(t,1),t.m(e.parentNode,e)):t&&(re(),d(t,1,1,()=>{t=null}),oe())},i(o){n||(p(t),n=!0)},o(o){d(t),n=!1},d(o){o&&g(e),t&&t.d(o)}}}function ho(r,e,n){let t,o,{$$slots:l={},$$scope:i}=e,{id:a=dr("vector")}=e,{url:s=null}=e,{tiles:f=null}=e;if(s&&s.includes("pmtiles://")&&!We.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let $=new Wr;We.addProtocol("pmtiles",$.tile)}const{map:u,self:c}=eo();return pe(r,u,$=>n(6,t=$)),pe(r,c,$=>n(0,o=$)),tn(()=>{if(o){let $=o;zt(c,o=null,o),Rr().then(()=>{t!=null&&t.loaded()&&(t==null||t.removeSource($))})}}),r.$$set=$=>{"id"in $&&n(3,a=$.id),"url"in $&&n(4,s=$.url),"tiles"in $&&n(5,f=$.tiles),"$$scope"in $&&n(7,i=$.$$scope)},r.$$.update=()=>{r.$$.dirty&121&&t&&o!==a&&(o&&t.removeSource(o),zt(c,o=a,o),t.addSource(o,to({type:"vector",url:s,tiles:f})))},[o,u,c,a,s,f,t,i,l]}class me extends G{constructor(e){super(),z(this,e,ho,_o,U,{id:3,url:4,tiles:5})}}const bo=r=>({features:r[0]&16,data:r[0]&16,map:r[0]&4,close:r[0]&1}),dn=r=>{var e;return{features:r[4],data:(e=r[4])==null?void 0:e[0],map:r[2],close:r[29]}};function hn(r){let e,n,t=(r[4]||r[3]instanceof We.Marker)&&bn(r);return{c(){e=L("div"),t&&t.c()},m(o,l){m(o,e,l),t&&t.m(e,null),r[30](e),n=!0},p(o,l){o[4]||o[3]instanceof We.Marker?t?(t.p(o,l),l[0]&24&&p(t,1)):(t=bn(o),t.c(),p(t,1),t.m(e,null)):t&&(re(),d(t,1,1,()=>{t=null}),oe())},i(o){n||(p(t),n=!0)},o(o){d(t),n=!1},d(o){o&&g(e),t&&t.d(),r[30](null)}}}function bn(r){let e;const n=r[28].default,t=rt(n,r,r[27],dn);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l[0]&134217749)&&ot(t,n,o,o[27],e?st(n,o[27],l,bo):lt(o[27]),dn)},i(o){e||(p(t,o),e=!0)},o(o){d(t,o),e=!1},d(o){t&&t.d(o)}}}function vo(r){let e,n,t=r[8].default&&hn(r);return{c(){t&&t.c(),e=ve()},m(o,l){t&&t.m(o,l),m(o,e,l),n=!0},p(o,l){o[8].default?t?(t.p(o,l),l[0]&256&&p(t,1)):(t=hn(o),t.c(),p(t,1),t.m(e.parentNode,e)):t&&(re(),d(t,1,1,()=>{t=null}),oe())},i(o){n||(p(t),n=!0)},o(o){d(t),n=!1},d(o){o&&g(e),t&&t.d(o)}}}function wo(r,e,n){let t,o,l,i,a,{$$slots:s={},$$scope:f}=e;const u=Ur(s);let{closeButton:c=void 0}=e,{closeOnClickOutside:$=!0}=e,{closeOnClickInside:_=!1}=e,{closeOnMove:T=!1}=e,{openOn:k="click"}=e,{focusAfterOpen:C=!0}=e,{anchor:S=void 0}=e,{offset:P=void 0}=e,{popupClass:M=void 0}=e,{maxWidth:F=void 0}=e,{lngLat:I=void 0}=e,{html:D=void 0}=e,{open:A=!1}=e;const{map:E,popupTarget:N,layerEvent:R}=no();pe(r,E,j=>n(2,l=j)),pe(r,N,j=>n(3,a=j)),pe(r,R,j=>n(26,i=j));const B=["click","dblclick","contextmenu"];let W,q=!1,se;function Xe(){if(!W)return;let j=W.getElement();!j||j===se||(se=j,k==="hover"&&(se.style.pointerEvents="none"),se.addEventListener("mouseenter",()=>{n(22,q=!0)},{passive:!0}),se.addEventListener("mouseleave",()=>{n(22,q=!1)},{passive:!0}),se.addEventListener("click",()=>{_&&n(0,A=!1)},{passive:!0}))}it(()=>{if(l)return l.on("click",Ee),typeof a=="string"&&(l.on("click",a,_e),l.on("dblclick",a,_e),l.on("contextmenu",a,_e),l.on("mousemove",a,ye),l.on("mouseleave",a,ke),l.on("touchstart",a,ce),l.on("touchend",a,Be)),()=>{l!=null&&l.loaded()&&(W==null||W.remove(),l.off("click",Ee),a instanceof We.Marker?a.getPopup()===W&&a.setPopup(void 0):typeof a=="string"&&(l.off("click",a,_e),l.off("dblclick",a,_e),l.off("contextmenu",a,_e),l.off("mousemove",a,ye),l.off("mouseleave",a,ke),l.off("touchstart",a,ce),l.off("touchend",a,Be)))}});let te=null,ue="normal";function _e(j){j.type===k&&("layerType"in j?j.layerType==="deckgl"?(n(9,I=j.coordinate),n(4,te=j.object?[j.object]:null)):(n(9,I=j.lngLat),n(4,te=j.features??[])):(n(9,I=j.lngLat),n(4,te=j.features??[])),setTimeout(()=>n(0,A=!0)))}let de=null;function ce(j){de=j.point}function Be(j){if(!de||k!=="hover")return;let $e=de.dist(j.point);de=null,$e<3&&(n(9,I=j.lngLat),n(4,te=j.features??[]),W.isOpen()?n(23,ue="justOpened"):(n(23,ue="opening"),n(0,A=!0)))}function ke(j){k!=="hover"||de||ue!=="normal"||(n(0,A=!1),n(4,te=null))}function ye(j){k!=="hover"||de||ue!=="normal"||(n(0,A=!0),n(4,te=j.features??[]),n(9,I=j.lngLat))}function Ee(j){if(ue==="justOpened"){n(23,ue="normal");return}if(!$)return;let $e=[se,a instanceof We.Marker?a==null?void 0:a.getElement():null];A&&W.isOpen()&&!$e.some(ge=>ge==null?void 0:ge.contains(j.originalEvent.target))&&n(0,A=!1)}let Se;const He=()=>n(0,A=!1);function De(j){V[j?"unshift":"push"](()=>{Se=j,n(1,Se)})}return r.$$set=j=>{"closeButton"in j&&n(10,c=j.closeButton),"closeOnClickOutside"in j&&n(11,$=j.closeOnClickOutside),"closeOnClickInside"in j&&n(12,_=j.closeOnClickInside),"closeOnMove"in j&&n(13,T=j.closeOnMove),"openOn"in j&&n(14,k=j.openOn),"focusAfterOpen"in j&&n(15,C=j.focusAfterOpen),"anchor"in j&&n(16,S=j.anchor),"offset"in j&&n(17,P=j.offset),"popupClass"in j&&n(18,M=j.popupClass),"maxWidth"in j&&n(19,F=j.maxWidth),"lngLat"in j&&n(9,I=j.lngLat),"html"in j&&n(20,D=j.html),"open"in j&&n(0,A=j.open),"$$scope"in j&&n(27,f=j.$$scope)},r.$$.update=()=>{if(r.$$.dirty[0]&7168&&n(25,t=c??(!$&&!_)),r.$$.dirty[0]&36675584&&(W||(n(21,W=new We.Popup({closeButton:t,closeOnClick:!1,closeOnMove:T,focusAfterOpen:C,maxWidth:F,className:M,anchor:S,offset:P})),se=W.getElement(),W.on("open",()=>{n(0,A=!0),Xe()}),W.on("close",j=>{n(0,A=!1)}))),r.$$.dirty[0]&2113544&&W&&a instanceof We.Marker&&(k==="click"?a.setPopup(W):a.getPopup()===W&&a.setPopup(void 0)),r.$$.dirty[0]&67125248&&B.includes(k)&&(i==null?void 0:i.type)===k&&(_e(i),zt(R,i=null,i)),r.$$.dirty[0]&67125248&&n(24,o=k==="hover"&&((i==null?void 0:i.type)==="mousemove"||(i==null?void 0:i.type)==="mouseenter")),r.$$.dirty[0]&88096768&&k==="hover"&&R&&(o&&i&&(i.layerType==="deckgl"?(n(9,I=i.coordinate),n(4,te=i.object?[i.object]:null)):(n(9,I=i.lngLat),n(4,te=i.features??[]))),n(0,A=(o||q)??!1)),r.$$.dirty[0]&3145730&&(Se?W.setDOMContent(Se):D&&W.setHTML(D)),r.$$.dirty[0]&2097664&&I&&W.setLngLat(I),r.$$.dirty[0]&10485765&&l){let j=W.isOpen();A&&!j?(W.addTo(l),ue==="opening"&&n(23,ue="justOpened")):!A&&j&&W.remove()}},[A,Se,l,a,te,E,N,R,u,I,c,$,_,T,k,C,S,P,M,F,D,W,q,ue,o,t,i,f,s,He,De]}class ko extends G{constructor(e){super(),z(this,e,wo,vo,U,{closeButton:10,closeOnClickOutside:11,closeOnClickInside:12,closeOnMove:13,openOn:14,focusAfterOpen:15,anchor:16,offset:17,popupClass:18,maxWidth:19,lngLat:9,html:20,open:0},null,[-1,-1])}}function yo(r){let e;const n=r[15].default,t=rt(n,r,r[23],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&8388608)&&ot(t,n,o,o[23],e?st(n,o[23],l,null):lt(o[23]),null)},i(o){e||(p(t,o),e=!0)},o(o){d(t,o),e=!1},d(o){t&&t.d(o)}}}function So(r){let e,n,t;function o(i){r[16](i)}let l={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],$$slots:{default:[yo]},$$scope:{ctx:r}};return r[0]!==void 0&&(l.hovered=r[0]),e=new io({props:l}),V.push(()=>Y(e,"hovered",o)),e.$on("click",r[17]),e.$on("dblclick",r[18]),e.$on("contextmenu",r[19]),e.$on("mouseenter",r[20]),e.$on("mousemove",r[21]),e.$on("mouseleave",r[22]),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,[a]){const s={};a&2&&(s.id=i[1]),a&4&&(s.source=i[2]),a&8&&(s.sourceLayer=i[3]),a&16&&(s.beforeId=i[4]),a&32&&(s.beforeLayerType=i[5]),a&64&&(s.paint=i[6]),a&128&&(s.layout=i[7]),a&256&&(s.filter=i[8]),a&512&&(s.applyToClusters=i[9]),a&1024&&(s.minzoom=i[10]),a&2048&&(s.maxzoom=i[11]),a&4096&&(s.hoverCursor=i[12]),a&8192&&(s.manageHoverState=i[13]),a&16384&&(s.eventsIfTopMost=i[14]),a&8388608&&(s.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,s.hovered=i[0],J(()=>n=!1)),e.$set(s)},i(i){t||(p(e.$$.fragment,i),t=!0)},o(i){d(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Co(r,e,n){let{$$slots:t={},$$scope:o}=e,{id:l=dr("symbol")}=e,{source:i=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:f=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:$=void 0}=e,{applyToClusters:_=void 0}=e,{minzoom:T=void 0}=e,{maxzoom:k=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:S=!1}=e,{hovered:P=null}=e,{eventsIfTopMost:M=!1}=e;function F(B){P=B,n(0,P)}function I(B){Je.call(this,r,B)}function D(B){Je.call(this,r,B)}function A(B){Je.call(this,r,B)}function E(B){Je.call(this,r,B)}function N(B){Je.call(this,r,B)}function R(B){Je.call(this,r,B)}return r.$$set=B=>{"id"in B&&n(1,l=B.id),"source"in B&&n(2,i=B.source),"sourceLayer"in B&&n(3,a=B.sourceLayer),"beforeId"in B&&n(4,s=B.beforeId),"beforeLayerType"in B&&n(5,f=B.beforeLayerType),"paint"in B&&n(6,u=B.paint),"layout"in B&&n(7,c=B.layout),"filter"in B&&n(8,$=B.filter),"applyToClusters"in B&&n(9,_=B.applyToClusters),"minzoom"in B&&n(10,T=B.minzoom),"maxzoom"in B&&n(11,k=B.maxzoom),"hoverCursor"in B&&n(12,C=B.hoverCursor),"manageHoverState"in B&&n(13,S=B.manageHoverState),"hovered"in B&&n(0,P=B.hovered),"eventsIfTopMost"in B&&n(14,M=B.eventsIfTopMost),"$$scope"in B&&n(23,o=B.$$scope)},[P,l,i,a,s,f,u,c,$,_,T,k,C,S,M,t,F,I,D,A,E,N,R,o]}class To extends G{constructor(e){super(),z(this,e,Co,So,U,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14})}}const Oo=r=>({props:r&8}),vn=r=>({props:Po(r[3])});function Lo(r){let e,n;const t=r[1].default,o=rt(t,r,r[2],vn);return{c(){e=L("div"),o&&o.c(),K(e,"class","govuk-prose")},m(l,i){m(l,e,i),o&&o.m(e,null),n=!0},p(l,i){o&&o.p&&(!n||i&12)&&ot(o,t,l,l[2],n?st(t,l[2],i,Oo):lt(l[2]),vn)},i(l){n||(p(o,l),n=!0)},o(l){d(o,l),n=!1},d(l){l&&g(e),o&&o.d(l)}}}function Ao(r){let e,n;return e=new ko({props:{openOn:r[0],$$slots:{default:[Lo,({features:t})=>({3:t}),({features:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&1&&(l.openOn=t[0]),o&12&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Po(r){return r?r[0].properties??{}:{}}function Eo(r,e,n){let{$$slots:t={},$$scope:o}=e,{openOn:l="hover"}=e;return r.$$set=i=>{"openOn"in i&&n(0,l=i.openOn),"$$scope"in i&&n(2,o=i.$$scope)},[l,t,o]}class ee extends G{constructor(e){super(),z(this,e,Eo,Ao,U,{openOn:0})}}function No(r){let e;return{c(){e=L("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Mo(r){let e,n,t,o,l=r[0]=="Private (development)"&&No();return{c(){l&&l.c(),e=O(),n=L("p"),n.textContent="Note the ATF scheme data has not been validated.",t=O(),o=L("p"),o.innerHTML=`Please contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      about any problems, ideas, or feedback for this site.`},m(i,a){l&&l.m(i,a),m(i,e,a),m(i,n,a),m(i,t,a),m(i,o,a)},p:Q,d(i){i&&(g(e),g(n),g(t),g(o)),l&&l.d(i)}}}function Io(r){let e,n,t,o,l,i;return l=new le({props:{$$slots:{default:[Mo]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("App version: "),t=w(r[0]),o=O(),h(l.$$.fragment)},m(a,s){m(a,e,s),y(e,n),y(e,t),y(e,o),b(l,e,null),i=!0},p(a,[s]){const f={};s&2&&(f.$$scope={dirty:s,ctx:a}),l.$set(f)},i(a){i||(p(l.$$.fragment,a),i=!0)},o(a){d(l.$$.fragment,a),i=!1},d(a){a&&g(e),v(l)}}}function Do(r){return[nn()]}class Fo extends G{constructor(e){super(),z(this,e,Do,Io,U,{})}}const jo={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var he=Uint8Array,Ke=Uint16Array,wr=Uint32Array,kr=new he([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),yr=new he([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Bo=new he([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Sr=function(r,e){for(var n=new Ke(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var o=new wr(n[30]),t=1;t<30;++t)for(var l=n[t];l<n[t+1];++l)o[l]=l-n[t]<<5|t;return[n,o]},Cr=Sr(kr,2),Tr=Cr[0],Ho=Cr[1];Tr[28]=258,Ho[258]=28;var Ro=Sr(yr,0),Wo=Ro[0],Xt=new Ke(32768);for(var x=0;x<32768;++x){var Re=(x&43690)>>>1|(x&21845)<<1;Re=(Re&52428)>>>2|(Re&13107)<<2,Re=(Re&61680)>>>4|(Re&3855)<<4,Xt[x]=((Re&65280)>>>8|(Re&255)<<8)>>>1}var ut=function(r,e,n){for(var t=r.length,o=0,l=new Ke(e);o<t;++o)r[o]&&++l[r[o]-1];var i=new Ke(e);for(o=0;o<e;++o)i[o]=i[o-1]+l[o-1]<<1;var a;if(n){a=new Ke(1<<e);var s=15-e;for(o=0;o<t;++o)if(r[o])for(var f=o<<4|r[o],u=e-r[o],c=i[r[o]-1]++<<u,$=c|(1<<u)-1;c<=$;++c)a[Xt[c]>>>s]=f}else for(a=new Ke(t),o=0;o<t;++o)r[o]&&(a[o]=Xt[i[r[o]-1]++]>>>15-r[o]);return a},dt=new he(288);for(var x=0;x<144;++x)dt[x]=8;for(var x=144;x<256;++x)dt[x]=9;for(var x=256;x<280;++x)dt[x]=7;for(var x=280;x<288;++x)dt[x]=8;var Or=new he(32);for(var x=0;x<32;++x)Or[x]=5;var Uo=ut(dt,9,1),Go=ut(Or,5,1),jt=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},Ce=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},Bt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},zo=function(r){return(r+7)/8|0},ln=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?Ke:r.BYTES_PER_ELEMENT==4?wr:he)(n-e);return t.set(r.subarray(e,n)),t},qo=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Te=function(r,e,n){var t=new Error(e||qo[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Te),!n)throw t;return t},Vo=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new he(0);var o=!e||n,l=!n||n.i;n||(n={}),e||(e=new he(t*3));var i=function(He){var De=e.length;if(He>De){var j=new he(Math.max(De*2,He));j.set(e),e=j}},a=n.f||0,s=n.p||0,f=n.b||0,u=n.l,c=n.d,$=n.m,_=n.n,T=t*8;do{if(!u){a=Ce(r,s,1);var k=Ce(r,s+1,3);if(s+=3,k)if(k==1)u=Uo,c=Go,$=9,_=5;else if(k==2){var M=Ce(r,s,31)+257,F=Ce(r,s+10,15)+4,I=M+Ce(r,s+5,31)+1;s+=14;for(var D=new he(I),A=new he(19),E=0;E<F;++E)A[Bo[E]]=Ce(r,s+E*3,7);s+=F*3;for(var N=jt(A),R=(1<<N)-1,B=ut(A,N,1),E=0;E<I;){var W=B[Ce(r,s,R)];s+=W&15;var C=W>>>4;if(C<16)D[E++]=C;else{var q=0,se=0;for(C==16?(se=3+Ce(r,s,3),s+=2,q=D[E-1]):C==17?(se=3+Ce(r,s,7),s+=3):C==18&&(se=11+Ce(r,s,127),s+=7);se--;)D[E++]=q}}var Xe=D.subarray(0,M),te=D.subarray(M);$=jt(Xe),_=jt(te),u=ut(Xe,$,1),c=ut(te,_,1)}else Te(1);else{var C=zo(s)+4,S=r[C-4]|r[C-3]<<8,P=C+S;if(P>t){l&&Te(0);break}o&&i(f+S),e.set(r.subarray(C,P),f),n.b=f+=S,n.p=s=P*8,n.f=a;continue}if(s>T){l&&Te(0);break}}o&&i(f+131072);for(var ue=(1<<$)-1,_e=(1<<_)-1,de=s;;de=s){var q=u[Bt(r,s)&ue],ce=q>>>4;if(s+=q&15,s>T){l&&Te(0);break}if(q||Te(2),ce<256)e[f++]=ce;else if(ce==256){de=s,u=null;break}else{var Be=ce-254;if(ce>264){var E=ce-257,ke=kr[E];Be=Ce(r,s,(1<<ke)-1)+Tr[E],s+=ke}var ye=c[Bt(r,s)&_e],Ee=ye>>>4;ye||Te(3),s+=ye&15;var te=Wo[Ee];if(Ee>3){var ke=yr[Ee];te+=Bt(r,s)&(1<<ke)-1,s+=ke}if(s>T){l&&Te(0);break}o&&i(f+131072);for(var Se=f+Be;f<Se;f+=4)e[f]=e[f-te],e[f+1]=e[f+1-te],e[f+2]=e[f+2-te],e[f+3]=e[f+3-te];f=Se}}n.l=u,n.p=de,n.b=f,n.f=a,u&&(a=1,n.m=$,n.d=c,n.n=_)}while(!a);return f==e.length?e:ln(e,0,f)},Xo=new he(0),Ne=function(r,e){return r[e]|r[e+1]<<8},Le=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},Ht=function(r,e){return Le(r,e)+Le(r,e+4)*4294967296};function Ko(r,e){return Vo(r,e)}var Kt=typeof TextDecoder<"u"&&new TextDecoder,Yo=0;try{Kt.decode(Xo,{stream:!0}),Yo=1}catch{}var Jo=function(r){for(var e="",n=0;;){var t=r[n++],o=(t>127)+(t>223)+(t>239);if(n+o>r.length)return[e,ln(r,n-1)];o?o==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):o&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function Lr(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(Kt)return Kt.decode(r);var o=Jo(r),l=o[0],i=o[1];return i.length&&Te(8),l}}var Zo=function(r,e){return e+30+Ne(r,e+26)+Ne(r,e+28)},Qo=function(r,e,n){var t=Ne(r,e+28),o=Lr(r.subarray(e+46,e+46+t),!(Ne(r,e+8)&2048)),l=e+46+t,i=Le(r,e+20),a=n&&i==4294967295?xo(r,l):[i,Le(r,e+24),Le(r,e+42)],s=a[0],f=a[1],u=a[2];return[Ne(r,e+10),s,f,o,l+Ne(r,e+30)+Ne(r,e+32),u]},xo=function(r,e){for(;Ne(r,e)!=1;e+=4+Ne(r,e+2));return[Ht(r,e+12),Ht(r,e+4),Ht(r,e+20)]};function el(r,e){for(var n={},t=r.length-22;Le(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Te(13);var o=Ne(r,t+8);if(!o)return{};var l=Le(r,t+16),i=l==4294967295||o==65535;if(i){var a=Le(r,t-12);i=Le(r,a)==101075792,i&&(o=Le(r,a+32),l=Le(r,a+48))}for(var s=e&&e.filter,f=0;f<o;++f){var u=Qo(r,l,i),c=u[0],$=u[1],_=u[2],T=u[3],k=u[4],C=u[5],S=Zo(r,C);l=k,(!s||s({name:T,size:$,originalSize:_,compression:c}))&&(c?c==8?n[T]=Ko(r.subarray(S,S+$),new he(_)):Te(14,"unknown compression type "+c):n[T]=ln(r,S,S+$))}return n}function tl(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(Rt):Rt(r)}function Rt(r){var e=new Uint8Array(r),n=el(e);return Promise.resolve(nl(n))}function nl(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var o=t[n];e[o]=Lr(r[o])}return e}function Ie(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&Ye(t)===e)return t;n++}}function ht(r,e){for(var n=[],t=0;t<r.childNodes.length;){var o=r.childNodes[t];o.nodeType===1&&Ye(o)===e&&n.push(o),t++}return n}function yt(r,e,n){for(var t=0;t<r.childNodes.length;){var o=r.childNodes[t];e?o.nodeType===1&&Ye(o)===e&&n(o,t):n(o,t),t++}}function rl(r,e,n){var t=[];return yt(r,e,function(o,l){t.push(n(o,l))}),t}var ol=/.+\:/;function Ye(r){return r.tagName.replace(ol,"")}function Ar(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+Ye(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=Ar(r.childNodes[t]),t++;return e+="</"+Ye(r)+">",e}function ll(r){var e=r.documentElement,n=Ie(e,"sheetData"),t=[];return yt(n,"row",function(o){yt(o,"c",function(l){t.push(l)})}),t}function sl(r,e){return Ie(e,"v")}function il(r,e){if(e.firstChild&&Ye(e.firstChild)==="is"&&e.firstChild.firstChild&&Ye(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function al(r){var e=r.documentElement,n=Ie(e,"dimension");if(n)return n.getAttribute("ref")}function fl(r){var e=r.documentElement,n=Ie(e,"cellStyleXfs");return n?ht(n,"xf"):[]}function ul(r){var e=r.documentElement,n=Ie(e,"cellXfs");return n?ht(n,"xf"):[]}function cl(r){var e=r.documentElement,n=Ie(e,"numFmts");return n?ht(n,"numFmt"):[]}function $l(r){var e=r.documentElement;return rl(e,"si",function(n){var t=Ie(n,"t");if(t)return t.textContent;var o="";return yt(n,"r",function(l){o+=Ie(l,"t").textContent}),o})}function pl(r){var e=r.documentElement;return Ie(e,"workbookPr")}function ml(r){var e=r.documentElement;return ht(e,"Relationship")}function gl(r){var e=r.documentElement,n=Ie(e,"sheets");return ht(n,"sheet")}function _l(r,e){var n=e.createDocument(r),t={},o=pl(n);o&&o.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var l=function(a){a.getAttribute("name")&&t.sheets.push({id:a.getAttribute("sheetId"),name:a.getAttribute("name"),relationId:a.getAttribute("r:id")})};return gl(n).forEach(l),t}function dl(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},o=function(i){var a=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=Wt(a);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=Wt(a);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=Wt(a);break}};return ml(n).forEach(o),t}function Wt(r){return r[0]==="/"?r.slice(1):"xl/"+r}function wn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function kn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wn(Object(n),!0).forEach(function(t){hl(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):wn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function hl(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function bl(r,e){if(!r)return{};var n=e.createDocument(r),t=fl(n).map(Ut),o=cl(n).map(vl).reduce(function(i,a){return i[a.id]=a,i},[]),l=function(a){return a.hasAttribute("xfId")?kn(kn({},t[a.xfId]),Ut(a,o)):Ut(a,o)};return ul(n).map(l)}function vl(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function Ut(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function wl(r,e){return r?$l(e.createDocument(r)):[]}function Pr(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function kl(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=yl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yl(r,e){if(r){if(typeof r=="string")return yn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yn(r,e)}}function yn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Sl(r,e,n,t){if(e){var o=n[e];if(!o)throw new Error("Cell style not found: ".concat(e));if(!o.numberFormat)return!1;if(Cl.indexOf(Number(o.numberFormat.id))>=0||t.dateFormat&&o.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&o.numberFormat.template&&Ll(o.numberFormat.template))return!0}}var Cl=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],Tl=/^\[\$-414\]/,Ol=/;@$/;function Ll(r){r=r.toLowerCase(),r=r.replace(Tl,""),r=r.replace(Ol,"");for(var e=r.split(/\W+/),n=kl(e),t;!(t=n()).done;){var o=t.value;if(Al.indexOf(o)<0)return!1}return!0}var Al=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function Pl(r,e,n){var t=n.getInlineStringValue,o=n.getInlineStringXml,l=n.getStyleId,i=n.styles,a=n.values,s=n.properties,f=n.options;switch(e||(e="n"),e){case"str":r=Gt(r,f);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(o()));r=Gt(r,f);break;case"s":var u=Number(r);if(isNaN(u))throw new Error('Invalid "shared" string index: '.concat(r));if(u>=a.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=a[u],r=Gt(r,f);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=El(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var $=Number(r);if(isNaN($))throw new Error('Invalid "numeric" cell value: '.concat(r));r=$,Sl(r,l(),i,f)&&(r=Pr(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function El(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function Gt(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var Nl=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function Ml(r){var e=function(f,u){return f-u},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),o=n[0],l=n[n.length-1],i=t[0],a=t[t.length-1];return[{row:o,column:i},{row:l,column:a}]}function Il(r){for(var e=0,n=0;n<r.length;)e*=26,e+=Nl.indexOf(r[n]),n++;return e}function Er(r){return r=r.split(/(\d+)/),[parseInt(r[1]),Il(r[0].trim())]}function Dl(r,e,n,t,o,l,i){var a=Er(r.getAttribute("r")),s=sl(e,r),f=s&&s.textContent,u;return r.hasAttribute("t")&&(u=r.getAttribute("t")),{row:a[0],column:a[1],value:Pl(f,u,{getInlineStringValue:function(){return il(e,r)},getInlineStringXml:function(){return Ar(r)},getStyleId:function(){return r.getAttribute("s")},styles:o,values:t,properties:l,options:i})}}function Fl(r,e,n,t,o,l){var i=ll(r);return i.length===0?[]:i.map(function(a){return Dl(a,r,e,n,t,o,l)})}function jl(r,e){return Wl(r)||Rl(r,e)||Hl(r,e)||Bl()}function Bl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hl(r,e){if(r){if(typeof r=="string")return Sn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sn(r,e)}}function Sn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Rl(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],o=!0,l=!1,i,a;try{for(n=n.call(r);!(o=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));o=!0);}catch(s){l=!0,a=s}finally{try{!o&&n.return!=null&&n.return()}finally{if(l)throw a}}return t}}function Wl(r){if(Array.isArray(r))return r}function Ul(r){var e=al(r);if(e)return e=e.split(":").map(Er).map(function(n){var t=jl(n,2),o=t[0],l=t[1];return{row:o,column:l}}),e.length===1&&(e=[e[0],e[0]]),e}function Gl(r,e,n,t,o,l){var i=e.createDocument(r),a=Fl(i,e,n,t,o,l),s=Ul(i)||Ml(a);return{cells:a,dimensions:s}}function zl(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ql(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ql(r,e){if(r){if(typeof r=="string")return Cn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cn(r,e)}}function Cn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Vl(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,o=t===void 0?function(c){return c}:t,l=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var a=!0,s=zl(r[i]),f;!(f=s()).done;){var u=f.value;if(o(u)!==null){a=!1;break}}if(a)r.splice(i,1),n&&n.splice(i,1);else if(l)break;i--}return r}function Xl(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Kl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kl(r,e){if(r){if(typeof r=="string")return Tn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tn(r,e)}}function Tn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Yl(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,o=e.onlyTrimAtTheEnd,l=r[0].length-1;l>=0;){for(var i=!0,a=Xl(r),s;!(s=a()).done;){var f=s.value;if(t(f[l])!==null){i=!1;break}}if(i)for(var u=0;u<r.length;)r[u].splice(l,1),u++;else if(o)break;l--}return r}function Jl(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Nr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zl(r,e){return es(r)||xl(r,e)||Nr(r,e)||Ql()}function Ql(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nr(r,e){if(r){if(typeof r=="string")return On(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return On(r,e)}}function On(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function xl(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],o=!0,l=!1,i,a;try{for(n=n.call(r);!(o=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));o=!0);}catch(s){l=!0,a=s}finally{try{!o&&n.return!=null&&n.return()}finally{if(l)throw a}}return t}}function es(r){if(Array.isArray(r))return r}function ts(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var o=Zl(n,2);o[0];for(var l=o[1],i=l.column,a=l.row,s=new Array(a),f=0;f<a;){s[f]=new Array(i);for(var u=0;u<i;)s[f][u]=null,u++;f++}for(var c=Jl(t),$;!($=c()).done;){var _=$.value,T=_.row-1,k=_.column-1;k<i&&T<a&&(s[T][k]=_.value)}var C=e.rowMap;if(C)for(var S=0;S<s.length;)C[S]=S,S++;return s=Vl(Yl(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:C}),e.transformData&&(s=e.transformData(s)),s}function ns(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=rs(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rs(r,e){if(r){if(typeof r=="string")return Ln(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ln(r,e)}}function Ln(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function An(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function os(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?An(Object(n),!0).forEach(function(t){ls(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):An(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function ls(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ss(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=os({sheet:1},n));var t=function($){if(!r[$])throw new Error('"'.concat($,'" file not found inside the *.xlsx file zip archive'));return r[$]},o=dl(t("xl/_rels/workbook.xml.rels"),e),l=o.sharedStrings?wl(t(o.sharedStrings),e):[],i=o.styles?bl(t(o.styles),e):{},a=_l(t("xl/workbook.xml"),e);if(n.getSheets)return a.sheets.map(function(c){var $=c.name;return{name:$}});var s=is(n.sheet,a.sheets);if(!s||!o.sheets[s])throw as(n.sheet,a.sheets);var f=Gl(t(o.sheets[s]),e,l,i,a,n),u=ts(f,n);return n.properties?{data:u,properties:a}:u}function is(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=ns(e),o;!(o=t()).done;){var l=o.value;if(l.name===r)return l.relationId}}function as(r,e){var n=e&&e.map(function(t,o){return'"'.concat(t.name,'" (#').concat(o+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function Yt(r){"@babel/helpers - typeof";return Yt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yt(r)}function Pn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function fs(r,e,n){return e&&Pn(r.prototype,e),n&&Pn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function us(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function cs(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&$t(r,e)}function $s(r){var e=Mr();return function(){var t=pt(r),o;if(e){var l=pt(this).constructor;o=Reflect.construct(t,arguments,l)}else o=t.apply(this,arguments);return ps(this,o)}}function ps(r,e){if(e&&(Yt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ms(r)}function ms(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Jt(r){var e=typeof Map=="function"?new Map:void 0;return Jt=function(t){if(t===null||!gs(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,o)}function o(){return vt(t,arguments,pt(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),$t(o,t)},Jt(r)}function vt(r,e,n){return Mr()?vt=Reflect.construct:vt=function(o,l,i){var a=[null];a.push.apply(a,l);var s=Function.bind.apply(o,a),f=new s;return i&&$t(f,i.prototype),f},vt.apply(null,arguments)}function Mr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gs(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function $t(r,e){return $t=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t},$t(r,e)}function pt(r){return pt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},pt(r)}var be=function(r){cs(n,r);var e=$s(n);function n(t){var o;return us(this,n),o=e.call(this,"invalid"),o.reason=t,o}return fs(n)}(Jt(Error));function _s(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new be("not_a_number")}if(typeof r!="number")throw new be("not_a_number");if(isNaN(r))throw new be("invalid_number");if(!isFinite(r))throw new be("out_of_bounds");return r}function ds(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new be("invalid_number");if(!isFinite(r))throw new be("out_of_bounds");return String(r)}throw new be("not_a_string")}function hs(r){if(typeof r=="boolean")return r;throw new be("not_a_boolean")}function bs(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new be("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new be("invalid_number");if(!isFinite(r))throw new be("out_of_bounds");var t=Pr(r,n);if(isNaN(t.valueOf()))throw new be("out_of_bounds");return t}throw new be("not_a_date")}function vs(r,e){return ys(r)||ks(r,e)||Ir(r,e)||ws()}function ws(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ks(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],o=!0,l=!1,i,a;try{for(n=n.call(r);!(o=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));o=!0);}catch(s){l=!0,a=s}finally{try{!o&&n.return!=null&&n.return()}finally{if(l)throw a}}return t}}function ys(r){if(Array.isArray(r))return r}function Zt(r){"@babel/helpers - typeof";return Zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zt(r)}function Ss(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ir(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ir(r,e){if(r){if(typeof r=="string")return En(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return En(r,e)}}function En(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Nn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function Mn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nn(Object(n),!0).forEach(function(t){Cs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Cs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var In={isColumnOriented:!1};function Ts(r,e,n){n?n=Mn(Mn({},In),n):n=In;var t=n,o=t.isColumnOriented,l=t.rowMap,i=t.ignoreEmptyRows;Ps(e),o&&(r=As(r));for(var a=r[0],s=[],f=[],u=1;u<r.length;u++){var c=Dr(e,r[u],u,a,f,n);(c!==null||i===!1)&&s.push(c)}if(l)for(var $=Ss(f),_;!(_=$()).done;){var T=_.value;T.row=l[T.row-1]+1}return{rows:s,errors:f}}function Dr(r,e,n,t,o,l){for(var i={},a=!0,s=function(){var $=u[f],_=r[$],T=Zt(_.type)==="object"&&!Array.isArray(_.type),k=e[t.indexOf($)];k===void 0&&(k=null);var C=void 0,S=void 0,P=void 0;if(T)C=Dr(_.type,e,n,t,o,l);else if(k===null)C=null;else if(Array.isArray(_.type)){var M=!1,F=Ls(k).map(function(D){var A=Dn(D,_,l);return A.error&&(C=D,S=A.error,P=A.reason),A.value!==null&&(M=!0),A.value});S||(C=M?F:null)}else{var I=Dn(k,_,l);S=I.error,P=I.reason,C=S?k:I.value}!S&&C===null&&_.required&&(S="required"),S?(S={error:S,row:n+1,column:$,value:C},P&&(S.reason=P),_.type&&(S.type=_.type),o.push(S)):(a&&C!==null&&(a=!1),(C!==null||l.includeNullValues)&&(i[_.prop]=C))},f=0,u=Object.keys(r);f<u.length;f++)s();return a?null:i}function Dn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=Ze(r,e.parse):e.type?t=Os(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(o){return{error:o.message}}}return t}function Ze(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function Os(r,e,n){switch(e){case String:return Ze(r,ds);case Number:return Ze(r,_s);case Date:return Ze(r,function(t){return bs(t,{properties:n.properties})});case Boolean:return Ze(r,hs);default:if(typeof e=="function")return Ze(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Fr(r,e,n){for(var t=0,o="";n+t<r.length;){var l=r[n+t];if(l===e)return[o,t];if(l==='"'){var i=Fr(r,'"',n+t+1);o+=i[0],t+=1+i[1]+1}else o+=l,t++}return[o,t]}function Ls(r){for(var e=[],n=0;n<r.length;){var t=Fr(r,",",n),o=vs(t,2),l=o[0],i=o[1];n+=i+1,e.push(l.trim())}return e}var As=function(e){return e[0].map(function(n,t){return e.map(function(o){return o[t]})})};function Ps(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],o=r[t];if(!o.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function Qt(r){"@babel/helpers - typeof";return Qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qt(r)}function jr(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var o=t[n],l=r[o],i=void 0;Qt(l)==="object"&&(l=Object.keys(r[o])[0],i=jr(r[o][l])),e[o]={prop:l},i&&(e[o].type=i)}return e}var Es=["schema","map"];function Fn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function bt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fn(Object(n),!0).forEach(function(t){Ns(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Fn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ns(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Ms(r,e){if(r==null)return{};var n=Is(r,e),t,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);for(o=0;o<l.length;o++)t=l[o],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function Is(r,e){if(r==null)return{};var n={},t=Object.keys(r),o,l;for(l=0;l<t.length;l++)o=t[l],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}function Ds(r,e,n){var t=n.schema,o=n.map,l=Ms(n,Es);!t&&o&&(t=jr(o));var i=ss(r,e,bt(bt({},l),{},{properties:t||l.properties}));return t?Ts(i.data,t,bt(bt({},l),{},{properties:i.properties})):i}function Fs(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return tl(r).then(function(n){return Ds(n,jo,e)})}function js(r){let e=new Map;for(let[t,o]of Object.entries(r.schemes))e.set(t,{scheme_reference:t,num_features:0,authority_or_region:o.authority_or_region,capital_scheme_id:o.capital_scheme_id,funding_programme:o.funding_programme});let n=1;for(let t of r.features){let o=e.get(t.properties.scheme_reference);o.num_features++,t.properties.funding_programme=o.funding_programme,t.id=n++}return e}async function Bs(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Fs(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let o of n){let l=Gr(o.lat_lon.split(",").map(parseFloat).reverse()),i=o;i.submission_time=o.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:l},id:t.features.length+1})}return t}const Z={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"},ze=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Hs(r){let e,n,t,o,l;function i(s){r[3](s)}let a={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return r[0]!==void 0&&(a.value=r[0]),e=new kt({props:a}),V.push(()=>Y(e,"value",i)),e.$on("change",r[2]),o=new ao({props:{rows:r[1]}}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment)},m(s,f){b(e,s,f),m(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};!n&&f&1&&(n=!0,u.value=s[0],J(()=>n=!1)),e.$set(u);const c={};f&2&&(c.rows=s[1]),o.$set(c)},i(s){l||(p(e.$$.fragment,s),p(o.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),d(o.$$.fragment,s),l=!1},d(s){s&&g(t),v(e,s),v(o,s)}}}function Rs(r,e,n){let t;pe(r,gt,s=>n(4,t=s));let o="interventionType",l=mn("v1");function i(){let s;o=="interventionType"?(s=vr("v1"),n(1,l=mn("v1"))):(s=pr(["get","funding_programme"],{ATF2:Z.atf2,ATF3:Z.atf3,ATF4:Z.atf4},"grey"),n(1,l=[["ATF2",Z.atf2],["ATF3",Z.atf3],["ATF4",Z.atf4]])),t.setPaintProperty("interventions-points","circle-color",s),t.setPaintProperty("interventions-lines","line-color",s),t.setPaintProperty("interventions-polygons","fill-color",s),t.setPaintProperty("interventions-polygon-outlines","line-color",s)}function a(s){o=s,n(0,o)}return[o,l,i,a]}class Ws extends G{constructor(e){super(),z(this,e,Rs,Hs,U,{})}}function Us(r){let e;return{c(){e=w("Clear")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Gs(r){let e,n,t,o,l,i;return t=new ct({props:{$$slots:{default:[Us]},$$scope:{ctx:r}}}),t.$on("click",r[12]),{c(){e=L("input"),n=O(),h(t.$$.fragment),K(e,"type","text"),K(e,"class","govuk-input govuk-input--width-10"),K(e,"id","filterText")},m(a,s){m(a,e,s),fn(e,r[0]),m(a,n,s),b(t,a,s),o=!0,l||(i=tt(e,"input",r[11]),l=!0)},p(a,s){s&1&&e.value!==a[0]&&fn(e,a[0]);const f={};s&65536&&(f.$$scope={dirty:s,ctx:a}),t.$set(f)},i(a){o||(p(t.$$.fragment,a),o=!0)},o(a){d(t.$$.fragment,a),o=!1},d(a){a&&(g(e),g(n)),v(t,a),l=!1,i()}}}function zs(r){let e,n,t,o,l,i,a,s,f,u;function c(k){r[9](k)}let $={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[3]!==void 0&&($.value=r[3]),e=new kt({props:$}),V.push(()=>Y(e,"value",c));function _(k){r[10](k)}let T={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[4]!==void 0&&(T.value=r[4]),o=new kt({props:T}),V.push(()=>Y(o,"value",_)),a=new mr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[Gs]},$$scope:{ctx:r}}}),f=new Ws({}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment),i=O(),h(a.$$.fragment),s=O(),h(f.$$.fragment)},m(k,C){b(e,k,C),m(k,t,C),b(o,k,C),m(k,i,C),b(a,k,C),m(k,s,C),b(f,k,C),u=!0},p(k,C){const S={};C&32&&(S.choices=k[5]),!n&&C&8&&(n=!0,S.value=k[3],J(()=>n=!1)),e.$set(S);const P={};C&64&&(P.choices=k[6]),!l&&C&16&&(l=!0,P.value=k[4],J(()=>l=!1)),o.$set(P);const M={};C&65537&&(M.$$scope={dirty:C,ctx:k}),a.$set(M)},i(k){u||(p(e.$$.fragment,k),p(o.$$.fragment,k),p(a.$$.fragment,k),p(f.$$.fragment,k),u=!0)},o(k){d(e.$$.fragment,k),d(o.$$.fragment,k),d(a.$$.fragment,k),d(f.$$.fragment,k),u=!1},d(k){k&&(g(t),g(i),g(s)),v(e,k),v(o,k),v(a,k),v(f,k)}}}function qs(r){let e,n=r[1].size.toLocaleString()+"",t,o,l=r[7].route.toLocaleString()+"",i,a,s=r[7].area.toLocaleString()+"",f,u,c=r[7].crossing.toLocaleString()+"",$,_,T=r[7].other.toLocaleString()+"",k,C;return{c(){e=w("Showing "),t=w(n),o=w(" schemes ("),i=w(l),a=w(`
    routes, `),f=w(s),u=w(` areas,
    `),$=w(c),_=w(" crossings, "),k=w(T),C=w(`
    other)`)},m(S,P){m(S,e,P),m(S,t,P),m(S,o,P),m(S,i,P),m(S,a,P),m(S,f,P),m(S,u,P),m(S,$,P),m(S,_,P),m(S,k,P),m(S,C,P)},p(S,P){P&2&&n!==(n=S[1].size.toLocaleString()+"")&&H(t,n),P&128&&l!==(l=S[7].route.toLocaleString()+"")&&H(i,l),P&128&&s!==(s=S[7].area.toLocaleString()+"")&&H(f,s),P&128&&c!==(c=S[7].crossing.toLocaleString()+"")&&H($,c),P&128&&T!==(T=S[7].other.toLocaleString()+"")&&H(k,T)},d(S){S&&(g(e),g(t),g(o),g(i),g(a),g(f),g(u),g($),g(_),g(k),g(C))}}}function Vs(r){let e,n,t;function o(i){r[13](i)}let l={id:"show-schemes",$$slots:{default:[qs]},$$scope:{ctx:r}};return r[2]!==void 0&&(l.checked=r[2]),e=new ne({props:l}),V.push(()=>Y(e,"checked",o)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const s={};a&65666&&(s.$$scope={dirty:a,ctx:i}),!n&&a&4&&(n=!0,s.checked=i[2],J(()=>n=!1)),e.$set(s)},i(i){t||(p(e.$$.fragment,i),t=!0)},o(i){d(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Xs(r){let e,n,t,o;return e=new Oe({props:{label:"Filters",$$slots:{default:[zs]},$$scope:{ctx:r}}}),t=new _t({props:{small:!0,$$slots:{default:[Vs]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(l,i){b(e,l,i),m(l,n,i),b(t,l,i),o=!0},p(l,[i]){const a={};i&65657&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&65670&&(s.$$scope={dirty:i,ctx:l}),t.$set(s)},i(l){o||(p(e.$$.fragment,l),p(t.$$.fragment,l),o=!0)},o(l){d(e.$$.fragment,l),d(t.$$.fragment,l),o=!1},d(l){l&&g(n),v(e,l),v(t,l)}}}function Ks(r,e,n){let t;pe(r,nt,M=>n(14,t=M));let{schemes:o}=e,{schemesToBeShown:l=new Set}=e,{filterText:i=""}=e,{show:a=!0}=e,s=[],f="",u=[],c="",$={area:0,route:0,crossing:0,other:0};it(()=>{let M=new Set,F=new Set;for(let I of o.values())I.authority_or_region&&M.add(I.authority_or_region),I.funding_programme&&F.add(I.funding_programme);n(5,s=Array.from(M.entries())),s.sort(),n(6,u=Array.from(F.entries())),u.sort()});function _(M,F,I){let D=M.toLowerCase(),A=N=>{var R,B;if(D&&!((R=N.properties.name)!=null&&R.toLowerCase().includes(D))&&!((B=N.properties.description)!=null&&B.toLowerCase().includes(D)))return!1;if(F||I){let W=o.get(N.properties.scheme_reference);if(F&&W.authority_or_region!=F||I&&W.funding_programme!=I)return!1}return!0};n(1,l=new Set(t.features.filter(A).map(N=>N.properties.scheme_reference))),n(7,$={area:0,route:0,crossing:0,other:0});let E=N=>{var R,B;return!(!l.has(N.properties.scheme_reference)||D&&!((R=N.properties.name)!=null&&R.toLowerCase().includes(D))&&!((B=N.properties.description)!=null&&B.toLowerCase().includes(D)))};nt.update(N=>{for(let R of N.features)E(R)?(delete R.properties.hide_while_editing,n(7,$[R.properties.intervention_type]++,$)):R.properties.hide_while_editing=!0;return N}),n(7,$)}function T(M){f=M,n(3,f)}function k(M){c=M,n(4,c)}function C(){i=this.value,n(0,i)}const S=()=>n(0,i="");function P(M){a=M,n(2,a)}return r.$$set=M=>{"schemes"in M&&n(8,o=M.schemes),"schemesToBeShown"in M&&n(1,l=M.schemesToBeShown),"filterText"in M&&n(0,i=M.filterText),"show"in M&&n(2,a=M.show)},r.$$.update=()=>{r.$$.dirty&25&&_(i,f,c)},[i,l,a,f,c,s,u,$,o,T,k,C,S,P]}class Ys extends G{constructor(e){super(),z(this,e,Ks,Xs,U,{schemes:8,schemesToBeShown:1,filterText:0,show:2})}}function Js(r,e,n){let t;pe(r,gt,a=>n(3,t=a));let o=null,{markerPosition:l}=e,{markerPositionUpdated:i}=e;return it(()=>{o=new qt.Marker({draggable:!0}).setLngLat(l).addTo(t),o.on("dragstart",()=>{t.getCanvas().style.cursor="grabbing"}),o.on("drag",()=>{n(0,l=o.getLngLat()),i()}),o.on("dragend",()=>{t.getCanvas().style.cursor="inherit"})}),tn(()=>{o&&o.remove()}),r.$$set=a=>{"markerPosition"in a&&n(0,l=a.markerPosition),"markerPositionUpdated"in a&&n(1,i=a.markerPositionUpdated)},[l,i]}class Zs extends G{constructor(e){super(),z(this,e,Js,null,U,{markerPosition:0,markerPositionUpdated:1})}}function jn(r,e,n){const t=r.slice();return t[16]=e[n],t[17]=e,t[18]=n,t}function Qs(r){let e,n;return e=new ct({props:{$$slots:{default:[ei]},$$scope:{ctx:r}}}),e.$on("click",r[5]),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&524288&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xs(r){let e,n;return e=new ct({props:{$$slots:{default:[ti]},$$scope:{ctx:r}}}),e.$on("click",r[4]),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&524288&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ei(r){let e;return{c(){e=w("Disable Line Measurement Tool")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function ti(r){let e;return{c(){e=w("Enable Line Measurement Tool")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Bn(r){var c;let e,n,t,o=[],l=new Map,i,a,s=r[2]&&((c=r[2].properties)==null?void 0:c.length)&&Hn(r);n=new Oe({props:{label:"Help",$$slots:{default:[ni]},$$scope:{ctx:r}}});let f=Me(r[1]);const u=$=>$[16].id;for(let $=0;$<f.length;$+=1){let _=jn(r,f,$),T=u(_);l.set(T,o[$]=Rn(T,_))}return{c(){s&&s.c(),e=O(),h(n.$$.fragment),t=O();for(let $=0;$<o.length;$+=1)o[$].c();i=ve()},m($,_){s&&s.m($,_),m($,e,_),b(n,$,_),m($,t,_);for(let T=0;T<o.length;T+=1)o[T]&&o[T].m($,_);m($,i,_),a=!0},p($,_){var k;$[2]&&((k=$[2].properties)!=null&&k.length)?s?s.p($,_):(s=Hn($),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null);const T={};_&524288&&(T.$$scope={dirty:_,ctx:$}),n.$set(T),_&258&&(f=Me($[1]),re(),o=qr(o,_,u,1,$,f,l,i.parentNode,Vr,Rn,i,jn),oe())},i($){if(!a){p(n.$$.fragment,$);for(let _=0;_<f.length;_+=1)p(o[_]);a=!0}},o($){d(n.$$.fragment,$);for(let _=0;_<o.length;_+=1)d(o[_]);a=!1},d($){$&&(g(e),g(t),g(i)),s&&s.d($),v(n,$);for(let _=0;_<o.length;_+=1)o[_].d($)}}}function Hn(r){var i;let e,n,t=((i=r[2].properties)==null?void 0:i.length)+"",o,l;return{c(){e=L("p"),n=w("Length: "),o=w(t),l=w("m")},m(a,s){m(a,e,s),y(e,n),y(e,o),y(e,l)},p(a,s){var f;s&4&&t!==(t=((f=a[2].properties)==null?void 0:f.length)+"")&&H(o,t)},d(a){a&&g(e)}}}function ni(r){let e;return{c(){e=L("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and Drag</b>
        an existing waypoint to move it</li> <li><b>Hold shift and click on</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(n,t){m(n,e,t)},p:Q,d(n){n&&g(e)}}}function Rn(r,e){let n,t,o,l;function i(s){e[9](s,e[16])}let a={markerPositionUpdated:e[8]};return e[16].lngLat!==void 0&&(a.markerPosition=e[16].lngLat),t=new Zs({props:a}),V.push(()=>Y(t,"markerPosition",i)),{key:r,first:null,c(){n=ve(),h(t.$$.fragment),this.first=n},m(s,f){m(s,n,f),b(t,s,f),l=!0},p(s,f){e=s;const u={};!o&&f&2&&(o=!0,u.markerPosition=e[16].lngLat,J(()=>o=!1)),t.$set(u)},i(s){l||(p(t.$$.fragment,s),l=!0)},o(s){d(t.$$.fragment,s),l=!1},d(s){s&&g(n),v(t,s)}}}function ri(r){let e,n;return e=new fe({props:{id:"measurement-line",paint:{"line-color":hr.measuringLine,"line-width":5}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:Q,i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function oi(r){let e,n,t,o,l,i,a,s;const f=[xs,Qs],u=[];function c(_,T){return _[0]?0:1}e=c(r),n=u[e]=f[e](r);let $=!r[0]&&Bn(r);return l=new at({props:{data:r[3],$$slots:{default:[ri]},$$scope:{ctx:r}}}),{c(){n.c(),t=O(),$&&$.c(),o=O(),h(l.$$.fragment)},m(_,T){u[e].m(_,T),m(_,t,T),$&&$.m(_,T),m(_,o,T),b(l,_,T),i=!0,a||(s=[tt(window,"keydown",r[6]),tt(window,"keyup",r[7])],a=!0)},p(_,[T]){let k=e;e=c(_),e===k?u[e].p(_,T):(re(),d(u[k],1,1,()=>{u[k]=null}),oe(),n=u[e],n?n.p(_,T):(n=u[e]=f[e](_),n.c()),p(n,1),n.m(t.parentNode,t)),_[0]?$&&(re(),d($,1,1,()=>{$=null}),oe()):$?($.p(_,T),T&1&&p($,1)):($=Bn(_),$.c(),p($,1),$.m(o.parentNode,o));const C={};T&8&&(C.data=_[3]),T&524288&&(C.$$scope={dirty:T,ctx:_}),l.$set(C)},i(_){i||(p(n),p($),p(l.$$.fragment,_),i=!0)},o(_){d(n),d($),d(l.$$.fragment,_),i=!1},d(_){_&&(g(t),g(o)),u[e].d(_),$&&$.d(_),v(l,_),a=!1,zr(s)}}}function li(r,e,n){let t;pe(r,gt,M=>n(12,t=M));let o=!0,l=[],i,a=!1,s=0,f=Vt();function u(M){o||(a||(l.push({id:s++,lngLat:M.lngLat}),n(1,l),C()),a&&l.length>0&&(c(M.lngLat),C()))}function c(M){let I=new qt.LngLat(0,-90).distanceTo(new qt.LngLat(0,90)),D;l.forEach(A=>{const E=A.lngLat;I>=M.distanceTo(E)&&(D=E,I=M.distanceTo(E))}),D&&n(1,l=l.filter(A=>{const E=A.lngLat;return E.lng!=(D==null?void 0:D.lng)||E.lat!=(D==null?void 0:D.lat)}))}function $(){n(0,o=!1)}function _(){n(0,o=!0),n(1,l=[]),S()}function T(M){M.key==="Shift"&&(a=!0),M.key==="Escape"&&_()}function k(M){M.key==="Shift"&&(a=!1)}function C(){if(l.length<2){S();return}const M=l.map(F=>[F.lngLat.lng,F.lngLat.lat]);n(2,i=Xr(M,{})),i.properties&&n(2,i.properties.length=(fo(i)*1e3).toFixed(2),i),n(3,f=JSON.parse(JSON.stringify(i)))}function S(){n(2,i=void 0),n(3,f=Vt())}it(()=>{t.on("click",u)}),tn(()=>{t.off("click",u)});function P(M,F){r.$$.not_equal(F.lngLat,M)&&(F.lngLat=M,n(1,l))}return[o,l,i,f,$,_,T,k,C,P]}class si extends G{constructor(e){super(),z(this,e,li,oi,U,{})}}function ii(r){let e;return{c(){e=w(`Open Government License
  `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function ai(r){let e,n,t,o,l;return t=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ii]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("License: "),h(t.$$.fragment),o=w(`. Contains OS data  Crown copyright and database right
  2023.`)},m(i,a){m(i,e,a),y(e,n),b(t,e,null),y(e,o),l=!0},p(i,[a]){const s={};a&1&&(s.$$scope={dirty:a,ctx:i}),t.$set(s)},i(i){l||(p(t.$$.fragment,i),l=!0)},o(i){d(t.$$.fragment,i),l=!1},d(i){i&&g(e),v(t)}}}class je extends G{constructor(e){super(),z(this,e,null,ai,U,{})}}function Wn(r,e,n){const t=r.slice();return t[2]=e[n],t}function Un(r,e,n){const t=r.slice();return t[5]=e[n],t}function Gn(r){let e,n;return{c(){e=L("span"),n=w(`
    `),Ae(e,"background",r[5]),Ae(e,"width","100%"),Ae(e,"border","1px solid black")},m(t,o){m(t,e,o),y(e,n)},p(t,o){o&1&&Ae(e,"background",t[5])},d(t){t&&g(e)}}}function zn(r){let e,n=r[2]+"",t;return{c(){e=L("span"),t=w(n)},m(o,l){m(o,e,l),y(e,t)},p(o,l){l&2&&n!==(n=o[2]+"")&&H(t,n)},d(o){o&&g(e)}}}function fi(r){let e,n,t,o=Me(r[0]),l=[];for(let s=0;s<o.length;s+=1)l[s]=Gn(Un(r,o,s));let i=Me(r[1]),a=[];for(let s=0;s<i.length;s+=1)a[s]=zn(Wn(r,i,s));return{c(){e=L("div");for(let s=0;s<l.length;s+=1)l[s].c();n=O(),t=L("div");for(let s=0;s<a.length;s+=1)a[s].c();Ae(e,"display","flex"),Ae(t,"display","flex"),Ae(t,"justify-content","space-between")},m(s,f){m(s,e,f);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(e,null);m(s,n,f),m(s,t,f);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(t,null)},p(s,[f]){if(f&1){o=Me(s[0]);let u;for(u=0;u<o.length;u+=1){const c=Un(s,o,u);l[u]?l[u].p(c,f):(l[u]=Gn(c),l[u].c(),l[u].m(e,null))}for(;u<l.length;u+=1)l[u].d(1);l.length=o.length}if(f&2){i=Me(s[1]);let u;for(u=0;u<i.length;u+=1){const c=Wn(s,i,u);a[u]?a[u].p(c,f):(a[u]=zn(c),a[u].c(),a[u].m(t,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=i.length}},i:Q,o:Q,d(s){s&&(g(e),g(n),g(t)),wt(l,s),wt(a,s)}}}function ui(r,e,n){let{colorScale:t}=e,{limits:o}=e;return r.$$set=l=>{"colorScale"in l&&n(0,t=l.colorScale),"limits"in l&&n(1,o=l.limits)},[t,o]}class qe extends G{constructor(e){super(),z(this,e,ui,fi,U,{colorScale:0,limits:1})}}function qn(r){const e=r[14].OA21CD;r[15]=e;const n=r[14][r[3]];r[16]=n}function ci(r){let e;return{c(){e=w("Percent of households with a car")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function $i(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function pi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function mi(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function gi(r){let e,n,t,o,l,i,a,s,f,u,c,$;return t=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[$i]},$$scope:{ctx:r}}}),l=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[pi]},$$scope:{ctx:r}}}),u=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[mi]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),o=w(". Output area boundaries from "),h(l.$$.fragment),i=w("."),a=O(),s=L("p"),f=w("License: "),h(u.$$.fragment),c=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(_,T){m(_,e,T),y(e,n),b(t,e,null),y(e,o),b(l,e,null),y(e,i),m(_,a,T),m(_,s,T),y(s,f),b(u,s,null),y(s,c),$=!0},p(_,T){const k={};T&131072&&(k.$$scope={dirty:T,ctx:_}),t.$set(k);const C={};T&131072&&(C.$$scope={dirty:T,ctx:_}),l.$set(C);const S={};T&131072&&(S.$$scope={dirty:T,ctx:_}),u.$set(S)},i(_){$||(p(t.$$.fragment,_),p(l.$$.fragment,_),p(u.$$.fragment,_),$=!0)},o(_){d(t.$$.fragment,_),d(l.$$.fragment,_),d(u.$$.fragment,_),$=!1},d(_){_&&(g(e),g(a),g(s)),v(t),v(l),v(u)}}}function _i(r){let e,n,t;return n=new le({props:{$$slots:{default:[gi]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){m(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&131072&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(p(n.$$.fragment,o),t=!0)},o(o){d(n.$$.fragment,o),t=!1},d(o){o&&g(e),v(n)}}}function Vn(r){let e,n;return e=new qe({props:{colorScale:r[5],limits:r[7]()}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:Q,i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function di(r){let e;return{c(){e=w("Average cars per household")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function hi(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function bi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function vi(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function wi(r){let e,n,t,o,l,i,a,s,f,u,c,$,_,T;return l=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[hi]},$$scope:{ctx:r}}}),a=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[bi]},$$scope:{ctx:r}}}),$=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[vi]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=O(),t=L("p"),o=w("Car/van availability data is from the 2021 census, via "),h(l.$$.fragment),i=w(". Output area boundaries from "),h(a.$$.fragment),s=w("."),f=O(),u=L("p"),c=w("License: "),h($.$$.fragment),_=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(k,C){m(k,e,C),m(k,n,C),m(k,t,C),y(t,o),b(l,t,null),y(t,i),b(a,t,null),y(t,s),m(k,f,C),m(k,u,C),y(u,c),b($,u,null),y(u,_),T=!0},p(k,C){const S={};C&131072&&(S.$$scope={dirty:C,ctx:k}),l.$set(S);const P={};C&131072&&(P.$$scope={dirty:C,ctx:k}),a.$set(P);const M={};C&131072&&(M.$$scope={dirty:C,ctx:k}),$.$set(M)},i(k){T||(p(l.$$.fragment,k),p(a.$$.fragment,k),p($.$$.fragment,k),T=!0)},o(k){d(l.$$.fragment,k),d(a.$$.fragment,k),d($.$$.fragment,k),T=!1},d(k){k&&(g(e),g(n),g(t),g(f),g(u)),v(l),v(a),v($)}}}function ki(r){let e,n,t;return n=new le({props:{$$slots:{default:[wi]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){m(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&131072&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(p(n.$$.fragment,o),t=!0)},o(o){d(n.$$.fragment,o),t=!1},d(o){o&&g(e),v(n)}}}function Xn(r){let e,n;return e=new qe({props:{colorScale:r[5],limits:r[7]()}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:Q,i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yi(r){let e;return{c(){e=w("Population density")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Si(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Ci(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Ti(r){let e,n,t,o,l,i,a,s,f;return t=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Si]},$$scope:{ctx:r}}}),l=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ci]},$$scope:{ctx:r}}}),s=new je({}),{c(){e=L("p"),n=w("Population density data is from the 2021 census, via "),h(t.$$.fragment),o=w(". Output area boundaries from "),h(l.$$.fragment),i=w("."),a=O(),h(s.$$.fragment)},m(u,c){m(u,e,c),y(e,n),b(t,e,null),y(e,o),b(l,e,null),y(e,i),m(u,a,c),b(s,u,c),f=!0},p(u,c){const $={};c&131072&&($.$$scope={dirty:c,ctx:u}),t.$set($);const _={};c&131072&&(_.$$scope={dirty:c,ctx:u}),l.$set(_)},i(u){f||(p(t.$$.fragment,u),p(l.$$.fragment,u),p(s.$$.fragment,u),f=!0)},o(u){d(t.$$.fragment,u),d(l.$$.fragment,u),d(s.$$.fragment,u),f=!1},d(u){u&&(g(e),g(a)),v(t),v(l),v(s,u)}}}function Oi(r){let e,n,t;return n=new le({props:{$$slots:{default:[Ti]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){m(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&131072&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(p(n.$$.fragment,o),t=!0)},o(o){d(n.$$.fragment,o),t=!1},d(o){o&&g(e),v(n)}}}function Kn(r){let e,n,t,o;return t=new qe({props:{colorScale:r[5],limits:r[7]().map(Di)}}),{c(){e=L("p"),e.textContent="(people per square kilometres)",n=O(),h(t.$$.fragment)},m(l,i){m(l,e,i),m(l,n,i),b(t,l,i),o=!0},p:Q,i(l){o||(p(t.$$.fragment,l),o=!0)},o(l){d(t.$$.fragment,l),o=!1},d(l){l&&(g(e),g(n)),v(t,l)}}}function Li(r){let e,n,t,o=r[16].toLocaleString()+"",l,i,a=r[15]+"",s;return{c(){e=L("p"),n=w("There are "),t=L("b"),l=w(o),i=w(`
          people per square kilometre in `),s=w(a)},m(f,u){m(f,e,u),y(e,n),y(e,t),y(t,l),y(e,i),y(e,s)},p(f,u){u&16392&&o!==(o=f[16].toLocaleString()+"")&&H(l,o),u&16384&&a!==(a=f[15]+"")&&H(s,a)},d(f){f&&g(e)}}}function Ai(r){let e,n,t=r[15]+"",o,l,i,a=r[16]+"",s,f;return{c(){e=L("p"),n=w("Households in "),o=w(t),l=w(` have an average of
          `),i=L("b"),s=w(a),f=w(`
          cars`)},m(u,c){m(u,e,c),y(e,n),y(e,o),y(e,l),y(e,i),y(i,s),y(e,f)},p(u,c){c&16384&&t!==(t=u[15]+"")&&H(o,t),c&16392&&a!==(a=u[16]+"")&&H(s,a)},d(u){u&&g(e)}}}function Pi(r){let e,n,t=r[16]+"",o,l,i,a=r[15]+"",s,f;return{c(){e=L("p"),n=L("b"),o=w(t),l=w("%"),i=w(`
          of households in `),s=w(a),f=w(" have 1 or more cars")},m(u,c){m(u,e,c),y(e,n),y(n,o),y(n,l),y(e,i),y(e,s),y(e,f)},p(u,c){c&16392&&t!==(t=u[16]+"")&&H(o,t),c&16384&&a!==(a=u[15]+"")&&H(s,a)},d(u){u&&g(e)}}}function Ei(r){qn(r);let e;function n(l,i){return l[3]=="percent_households_with_car"?Pi:l[3]=="average_cars_per_household"?Ai:Li}let t=n(r),o=t(r);return{c(){o.c(),e=ve()},m(l,i){o.m(l,i),m(l,e,i)},p(l,i){qn(l),t===(t=n(l))&&o?o.p(l,i):(o.d(1),o=t(l),o&&(o.c(),o.m(e.parentNode,e)))},d(l){l&&g(e),o.d(l)}}}function Ni(r){let e,n;return e=new ee({props:{$$slots:{default:[Ei,({props:t})=>({14:t}),({props:t})=>t?16384:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&147464&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mi(r){let e,n,t,o;return e=new Fe({props:{id:St,sourceLayer:St,paint:{"fill-color":Pe(["get",r[3]],r[7](),r[5]),"fill-opacity":ie(.5,.7)},layout:{visibility:r[3]!=""?"visible":"none"},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[Ni]},$$scope:{ctx:r}}}),e.$on("click",r[6]),t=new fe({props:{id:r[4],paint:{"line-color":"black","line-width":.5},layout:{visibility:r[3]!=""?"visible":"none"}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(l,i){b(e,l,i),m(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&8&&(a.paint={"fill-color":Pe(["get",l[3]],l[7](),l[5]),"fill-opacity":ie(.5,.7)}),i&8&&(a.layout={visibility:l[3]!=""?"visible":"none"}),i&131080&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&8&&(s.layout={visibility:l[3]!=""?"visible":"none"}),t.$set(s)},i(l){o||(p(e.$$.fragment,l),p(t.$$.fragment,l),o=!0)},o(l){d(e.$$.fragment,l),d(t.$$.fragment,l),o=!1},d(l){l&&g(n),v(e,l),v(t,l)}}}function Ii(r){let e,n,t,o,l,i,a,s,f,u,c,$,_,T;function k(E){r[8](E)}let C={id:"percent_households_with_car",$$slots:{right:[_i],default:[ci]},$$scope:{ctx:r}};r[0]!==void 0&&(C.checked=r[0]),e=new ne({props:C}),V.push(()=>Y(e,"checked",k)),e.$on("change",r[9]);let S=r[3]=="percent_households_with_car"&&Vn(r);function P(E){r[10](E)}let M={id:"average_cars_per_household",$$slots:{right:[ki],default:[di]},$$scope:{ctx:r}};r[1]!==void 0&&(M.checked=r[1]),l=new ne({props:M}),V.push(()=>Y(l,"checked",P)),l.$on("change",r[11]);let F=r[3]=="average_cars_per_household"&&Xn(r);function I(E){r[12](E)}let D={id:"population_density",$$slots:{right:[Oi],default:[yi]},$$scope:{ctx:r}};r[2]!==void 0&&(D.checked=r[2]),f=new ne({props:D}),V.push(()=>Y(f,"checked",I)),f.$on("change",r[13]);let A=r[3]=="population_density"&&Kn(r);return _=new me({props:{url:`pmtiles://${ae()}/v1/${St}.pmtiles`,$$slots:{default:[Mi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),S&&S.c(),o=O(),h(l.$$.fragment),a=O(),F&&F.c(),s=O(),h(f.$$.fragment),c=O(),A&&A.c(),$=O(),h(_.$$.fragment)},m(E,N){b(e,E,N),m(E,t,N),S&&S.m(E,N),m(E,o,N),b(l,E,N),m(E,a,N),F&&F.m(E,N),m(E,s,N),b(f,E,N),m(E,c,N),A&&A.m(E,N),m(E,$,N),b(_,E,N),T=!0},p(E,[N]){const R={};N&131072&&(R.$$scope={dirty:N,ctx:E}),!n&&N&1&&(n=!0,R.checked=E[0],J(()=>n=!1)),e.$set(R),E[3]=="percent_households_with_car"?S?(S.p(E,N),N&8&&p(S,1)):(S=Vn(E),S.c(),p(S,1),S.m(o.parentNode,o)):S&&(re(),d(S,1,1,()=>{S=null}),oe());const B={};N&131072&&(B.$$scope={dirty:N,ctx:E}),!i&&N&2&&(i=!0,B.checked=E[1],J(()=>i=!1)),l.$set(B),E[3]=="average_cars_per_household"?F?(F.p(E,N),N&8&&p(F,1)):(F=Xn(E),F.c(),p(F,1),F.m(s.parentNode,s)):F&&(re(),d(F,1,1,()=>{F=null}),oe());const W={};N&131072&&(W.$$scope={dirty:N,ctx:E}),!u&&N&4&&(u=!0,W.checked=E[2],J(()=>u=!1)),f.$set(W),E[3]=="population_density"?A?(A.p(E,N),N&8&&p(A,1)):(A=Kn(E),A.c(),p(A,1),A.m($.parentNode,$)):A&&(re(),d(A,1,1,()=>{A=null}),oe());const q={};N&131080&&(q.$$scope={dirty:N,ctx:E}),_.$set(q)},i(E){T||(p(e.$$.fragment,E),p(S),p(l.$$.fragment,E),p(F),p(f.$$.fragment,E),p(A),p(_.$$.fragment,E),T=!0)},o(E){d(e.$$.fragment,E),d(S),d(l.$$.fragment,E),d(F),d(f.$$.fragment,E),d(A),d(_.$$.fragment,E),T=!1},d(E){E&&(g(t),g(o),g(a),g(s),g(c),g($)),v(e,E),S&&S.d(E),v(l,E),F&&F.d(E),v(f,E),A&&A.d(E),v(_,E)}}}let St="census_output_areas";const Di=r=>r.toLocaleString();function Fi(r,e,n){let t=`${St}-outline`,o=Z.sequential_low_to_high,l=!1,i=!1,a=!1,s="";function f(S){let P=S.detail.features[0].properties.OA21CD;s=="percent_households_with_car"||s=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${P}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${P}`,"_blank")}function u(){return s=="percent_households_with_car"?[0,20,40,60,80,100]:s=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function c(S){l=S,n(0,l)}const $=()=>{n(1,i=!1),n(2,a=!1)};function _(S){i=S,n(1,i)}const T=()=>{n(0,l=!1),n(2,a=!1)};function k(S){a=S,n(2,a)}const C=()=>{n(0,l=!1),n(1,i=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,s="percent_households_with_car"):i?n(3,s="average_cars_per_household"):a?n(3,s="population_density"):n(3,s=""))},[l,i,a,s,t,o,f,u,c,$,_,T,k,C]}class ji extends G{constructor(e){super(),z(this,e,Fi,Ii,U,{})}}function Bi(r){let e,n,t;return e=new we({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Combined authorities`)},m(o,l){b(e,o,l),m(o,n,l),t=!0},p:Q,i(o){t||(p(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){o&&g(n),v(e,o)}}}function Hi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Ri(r){let e,n,t,o,l,i,a;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Hi]},$$scope:{ctx:r}}}),i=new je({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),o=w(", as of December 2022."),l=O(),h(i.$$.fragment)},m(s,f){m(s,e,f),y(e,n),b(t,e,null),y(e,o),m(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(p(t.$$.fragment,s),p(i.$$.fragment,s),a=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),a=!1},d(s){s&&(g(e),g(l)),v(t),v(i,s)}}}function Wi(r){let e,n,t;return n=new le({props:{$$slots:{default:[Ri]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){m(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(p(n.$$.fragment,o),t=!0)},o(o){d(n.$$.fragment,o),t=!1},d(o){o&&g(e),v(n)}}}function Ui(r){let e,n=r[4].name+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){m(o,e,l),y(e,t)},p(o,l){l&16&&n!==(n=o[4].name+"")&&H(t,n)},d(o){o&&g(e)}}}function Gi(r){let e,n;return e=new ee({props:{$$slots:{default:[Ui,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&48&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zi(r){let e,n,t,o;return e=new Fe({props:{id:Ct,paint:{"fill-color":r[1],"fill-opacity":ie(0,.5)},layout:{visibility:r[0]?"visible":"none"},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[Gi]},$$scope:{ctx:r}}}),e.$on("click",Vi),t=new fe({props:{id:r[2],paint:{"line-color":r[1],"line-width":2.5},layout:{visibility:r[0]?"visible":"none"}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(l,i){b(e,l,i),m(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&1&&(a.layout={visibility:l[0]?"visible":"none"}),i&32&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&1&&(s.layout={visibility:l[0]?"visible":"none"}),t.$set(s)},i(l){o||(p(e.$$.fragment,l),p(t.$$.fragment,l),o=!0)},o(l){d(e.$$.fragment,l),d(t.$$.fragment,l),o=!1},d(l){l&&g(n),v(e,l),v(t,l)}}}function qi(r){let e,n,t,o,l;function i(s){r[3](s)}let a={id:Ct,$$slots:{right:[Wi],default:[Bi]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ne({props:a}),V.push(()=>Y(e,"checked",i)),o=new at({props:{data:`${ae()}/v1/${Ct}.geojson`,$$slots:{default:[zi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment)},m(s,f){b(e,s,f),m(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&33&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(p(e.$$.fragment,s),p(o.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),d(o.$$.fragment,s),l=!1},d(s){s&&g(t),v(e,s),v(o,s)}}}let Ct="combined_authorities";function Vi(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Xi(r,e,n){let t=Z.combined_authorities,o=`${Ct}-outline`,l=!1;function i(a){l=a,n(0,l)}return[l,t,o,i]}class Ki extends G{constructor(e){super(),z(this,e,Xi,qi,U,{})}}function Yi(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Ji(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Zi(r){let e;return{c(){e=w(`here
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Qi(r){let e,n,t,o,l,i,a,s,f;return t=new X({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Ji]},$$scope:{ctx:r}}}),l=new X({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Zi]},$$scope:{ctx:r}}}),s=new je({}),{c(){e=L("p"),n=w("The 2019 English IMD scores come from "),h(t.$$.fragment),o=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(l.$$.fragment),i=w("."),a=O(),h(s.$$.fragment)},m(u,c){m(u,e,c),y(e,n),b(t,e,null),y(e,o),b(l,e,null),y(e,i),m(u,a,c),b(s,u,c),f=!0},p(u,c){const $={};c&64&&($.$$scope={dirty:c,ctx:u}),t.$set($);const _={};c&64&&(_.$$scope={dirty:c,ctx:u}),l.$set(_)},i(u){f||(p(t.$$.fragment,u),p(l.$$.fragment,u),p(s.$$.fragment,u),f=!0)},o(u){d(t.$$.fragment,u),d(l.$$.fragment,u),d(s.$$.fragment,u),f=!1},d(u){u&&(g(e),g(a)),v(t),v(l),v(s,u)}}}function xi(r){let e,n,t;return n=new le({props:{$$slots:{default:[Qi]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){m(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(p(n.$$.fragment,o),t=!0)},o(o){d(n.$$.fragment,o),t=!1},d(o){o&&g(e),v(n)}}}function Yn(r){let e,n;return e=new qe({props:{colorScale:r[2],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:Q,i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ea(r){let e,n=r[5].LSOA11CD+"",t,o,l,i=r[5].score+"",a,s,f,u,c,$=r[5].rank.toLocaleString()+"",_,T;return{c(){e=L("p"),t=w(n),o=w(` has an IMD score of
        `),l=L("b"),a=w(i),s=O(),f=L("p"),u=w("Rank: "),c=L("b"),_=w($),T=w(`
        / 32,844 LSOAs`)},m(k,C){m(k,e,C),y(e,t),y(e,o),y(e,l),y(l,a),m(k,s,C),m(k,f,C),y(f,u),y(f,c),y(c,_),y(f,T)},p(k,C){C&32&&n!==(n=k[5].LSOA11CD+"")&&H(t,n),C&32&&i!==(i=k[5].score+"")&&H(a,i),C&32&&$!==($=k[5].rank.toLocaleString()+"")&&H(_,$)},d(k){k&&(g(e),g(s),g(f))}}}function ta(r){let e,n;return e=new ee({props:{$$slots:{default:[ea,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&96&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function na(r){let e,n,t,o;return e=new Fe({props:{id:mt,sourceLayer:mt,paint:{"fill-color":Pe(["-",10,["get","decile"]],r[3],r[2]),"fill-opacity":ie(.5,.7)},layout:{visibility:r[0]?"visible":"none"},manageHoverState:!0,$$slots:{default:[ta]},$$scope:{ctx:r}}}),t=new fe({props:{id:r[1],paint:{"line-color":"black","line-width":.5},layout:{visibility:r[0]?"visible":"none"}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(l,i){b(e,l,i),m(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&1&&(a.layout={visibility:l[0]?"visible":"none"}),i&64&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&1&&(s.layout={visibility:l[0]?"visible":"none"}),t.$set(s)},i(l){o||(p(e.$$.fragment,l),p(t.$$.fragment,l),o=!0)},o(l){d(e.$$.fragment,l),d(t.$$.fragment,l),o=!1},d(l){l&&g(n),v(e,l),v(t,l)}}}function ra(r){let e,n,t,o,l,i;function a(u){r[4](u)}let s={id:mt,$$slots:{right:[xi],default:[Yi]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ne({props:s}),V.push(()=>Y(e,"checked",a));let f=r[0]&&Yn(r);return l=new me({props:{url:`pmtiles://${ae()}/v1/${mt}.pmtiles`,$$slots:{default:[na]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),f&&f.c(),o=O(),h(l.$$.fragment)},m(u,c){b(e,u,c),m(u,t,c),f&&f.m(u,c),m(u,o,c),b(l,u,c),i=!0},p(u,[c]){const $={};c&64&&($.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,$.checked=u[0],J(()=>n=!1)),e.$set($),u[0]?f?(f.p(u,c),c&1&&p(f,1)):(f=Yn(u),f.c(),p(f,1),f.m(o.parentNode,o)):f&&(re(),d(f,1,1,()=>{f=null}),oe());const _={};c&65&&(_.$$scope={dirty:c,ctx:u}),l.$set(_)},i(u){i||(p(e.$$.fragment,u),p(f),p(l.$$.fragment,u),i=!0)},o(u){d(e.$$.fragment,u),d(f),d(l.$$.fragment,u),i=!1},d(u){u&&(g(t),g(o)),v(e,u),f&&f.d(u),v(l,u)}}}let mt="imd";function oa(r,e,n){let t=`${mt}-outline`,o=Z.sequential_low_to_high,l=[0,2,4,6,8,10],i=!1;function a(s){i=s,n(0,i)}return[i,t,o,l,a]}class la extends G{constructor(e){super(),z(this,e,oa,ra,U,{})}}function sa(r){let e,n,t;return e=new we({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(o,l){b(e,o,l),m(o,n,l),t=!0},p:Q,i(o){t||(p(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){o&&g(n),v(e,o)}}}function ia(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function aa(r){let e,n,t,o,l,i,a;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[ia]},$$scope:{ctx:r}}}),i=new je({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),o=w(", as of May 2023."),l=O(),h(i.$$.fragment)},m(s,f){m(s,e,f),y(e,n),b(t,e,null),y(e,o),m(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(p(t.$$.fragment,s),p(i.$$.fragment,s),a=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),a=!1},d(s){s&&(g(e),g(l)),v(t),v(i,s)}}}function fa(r){let e,n,t;return n=new le({props:{$$slots:{default:[aa]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){m(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(p(n.$$.fragment,o),t=!0)},o(o){d(n.$$.fragment,o),t=!1},d(o){o&&g(e),v(n)}}}function ua(r){let e,n=r[4].name+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){m(o,e,l),y(e,t)},p(o,l){l&16&&n!==(n=o[4].name+"")&&H(t,n)},d(o){o&&g(e)}}}function ca(r){let e,n;return e=new ee({props:{$$slots:{default:[ua,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&48&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $a(r){let e,n,t,o;return e=new Fe({props:{id:Tt,paint:{"fill-color":r[1],"fill-opacity":ie(0,.5)},layout:{visibility:r[0]?"visible":"none"},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[ca]},$$scope:{ctx:r}}}),e.$on("click",ma),t=new fe({props:{id:r[2],paint:{"line-color":r[1],"line-width":2.5},layout:{visibility:r[0]?"visible":"none"}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(l,i){b(e,l,i),m(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&1&&(a.layout={visibility:l[0]?"visible":"none"}),i&32&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&1&&(s.layout={visibility:l[0]?"visible":"none"}),t.$set(s)},i(l){o||(p(e.$$.fragment,l),p(t.$$.fragment,l),o=!0)},o(l){d(e.$$.fragment,l),d(t.$$.fragment,l),o=!1},d(l){l&&g(n),v(e,l),v(t,l)}}}function pa(r){let e,n,t,o,l;function i(s){r[3](s)}let a={id:Tt,$$slots:{right:[fa],default:[sa]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ne({props:a}),V.push(()=>Y(e,"checked",i)),o=new at({props:{data:`${ae()}/v1/${Tt}.geojson`,$$slots:{default:[$a]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment)},m(s,f){b(e,s,f),m(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&33&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(p(e.$$.fragment,s),p(o.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),d(o.$$.fragment,s),l=!1},d(s){s&&g(t),v(e,s),v(o,s)}}}let Tt="local_authority_districts";function ma(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function ga(r,e,n){let t=Z.local_authority_districts,o=`${Tt}-outline`,l=!1;function i(a){l=a,n(0,l)}return[l,t,o,i]}class _a extends G{constructor(e){super(),z(this,e,ga,pa,U,{})}}function da(r){let e,n,t;return e=new we({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(o,l){b(e,o,l),m(o,n,l),t=!0},p:Q,i(o){t||(p(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){o&&g(n),v(e,o)}}}function ha(r){let e;return{c(){e=w(`local authority
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function ba(r){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function va(r){let e;return{c(){e=w(`development corporation
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function wa(r){let e;return{c(){e=w("this map")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function ka(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function ya(r){let e,n,t,o,l,i,a,s,f,u,c,$,_,T,k,C,S,P,M,F,I,D;return t=new X({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[ha]},$$scope:{ctx:r}}}),l=new X({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ba]},$$scope:{ctx:r}}}),a=new X({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[va]},$$scope:{ctx:r}}}),_=new X({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[wa]},$$scope:{ctx:r}}}),P=new X({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[ka]},$$scope:{ctx:r}}}),I=new je({}),{c(){e=L("p"),n=w("LPAs may be a "),h(t.$$.fragment),o=w(", "),h(l.$$.fragment),i=w("y, or "),h(a.$$.fragment),s=w("."),f=O(),u=L("p"),c=L("strong"),$=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(_.$$.fragment),T=w(" to get more details."),k=O(),C=L("p"),S=w("Data from ONS Geography via "),h(P.$$.fragment),M=w(", as of November 2022."),F=O(),h(I.$$.fragment)},m(A,E){m(A,e,E),y(e,n),b(t,e,null),y(e,o),b(l,e,null),y(e,i),b(a,e,null),y(e,s),m(A,f,E),m(A,u,E),y(u,c),y(c,$),b(_,c,null),y(c,T),m(A,k,E),m(A,C,E),y(C,S),b(P,C,null),y(C,M),m(A,F,E),b(I,A,E),D=!0},p(A,E){const N={};E&32&&(N.$$scope={dirty:E,ctx:A}),t.$set(N);const R={};E&32&&(R.$$scope={dirty:E,ctx:A}),l.$set(R);const B={};E&32&&(B.$$scope={dirty:E,ctx:A}),a.$set(B);const W={};E&32&&(W.$$scope={dirty:E,ctx:A}),_.$set(W);const q={};E&32&&(q.$$scope={dirty:E,ctx:A}),P.$set(q)},i(A){D||(p(t.$$.fragment,A),p(l.$$.fragment,A),p(a.$$.fragment,A),p(_.$$.fragment,A),p(P.$$.fragment,A),p(I.$$.fragment,A),D=!0)},o(A){d(t.$$.fragment,A),d(l.$$.fragment,A),d(a.$$.fragment,A),d(_.$$.fragment,A),d(P.$$.fragment,A),d(I.$$.fragment,A),D=!1},d(A){A&&(g(e),g(f),g(u),g(k),g(C),g(F)),v(t),v(l),v(a),v(_),v(P),v(I,A)}}}function Sa(r){let e,n,t;return n=new le({props:{$$slots:{default:[ya]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){m(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(p(n.$$.fragment,o),t=!0)},o(o){d(n.$$.fragment,o),t=!1},d(o){o&&g(e),v(n)}}}function Ca(r){let e,n=r[4].name+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){m(o,e,l),y(e,t)},p(o,l){l&16&&n!==(n=o[4].name+"")&&H(t,n)},d(o){o&&g(e)}}}function Ta(r){let e,n;return e=new ee({props:{$$slots:{default:[Ca,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&48&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Oa(r){let e,n,t,o;return e=new Fe({props:{id:Qe,sourceLayer:Qe,paint:{"fill-color":r[1],"fill-opacity":ie(0,.5)},layout:{visibility:r[0]?"visible":"none"},manageHoverState:!0,$$slots:{default:[Ta]},$$scope:{ctx:r}}}),t=new fe({props:{id:r[2],sourceLayer:Qe,paint:{"line-color":r[1],"line-width":2.5},layout:{visibility:r[0]?"visible":"none"}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(l,i){b(e,l,i),m(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&1&&(a.layout={visibility:l[0]?"visible":"none"}),i&32&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&1&&(s.layout={visibility:l[0]?"visible":"none"}),t.$set(s)},i(l){o||(p(e.$$.fragment,l),p(t.$$.fragment,l),o=!0)},o(l){d(e.$$.fragment,l),d(t.$$.fragment,l),o=!1},d(l){l&&g(n),v(e,l),v(t,l)}}}function La(r){let e,n,t,o,l;function i(s){r[3](s)}let a={id:Qe,$$slots:{right:[Sa],default:[da]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ne({props:a}),V.push(()=>Y(e,"checked",i)),o=new me({props:{url:`pmtiles://${ae()}/v1/${Qe}.pmtiles`,$$slots:{default:[Oa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment)},m(s,f){b(e,s,f),m(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&33&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(p(e.$$.fragment,s),p(o.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),d(o.$$.fragment,s),l=!1},d(s){s&&g(t),v(e,s),v(o,s)}}}let Qe="local_planning_authorities";function Aa(r,e,n){let t=Z.local_planning_authorities,o=`${Qe}-outline`,l=!1;function i(a){l=a,n(0,l)}return[l,t,o,i]}class Pa extends G{constructor(e){super(),z(this,e,Aa,La,U,{})}}function Ea(r){let e,n,t;return e=new we({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(o,l){b(e,o,l),m(o,n,l),t=!0},p:Q,i(o){t||(p(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){o&&g(n),v(e,o)}}}function Na(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Ma(r){let e,n,t,o,l,i,a;return t=new X({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Na]},$$scope:{ctx:r}}}),i=new je({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),o=w(", as of May 2023."),l=O(),h(i.$$.fragment)},m(s,f){m(s,e,f),y(e,n),b(t,e,null),y(e,o),m(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(p(t.$$.fragment,s),p(i.$$.fragment,s),a=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),a=!1},d(s){s&&(g(e),g(l)),v(t),v(i,s)}}}function Ia(r){let e,n,t;return n=new le({props:{$$slots:{default:[Ma]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){m(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(p(n.$$.fragment,o),t=!0)},o(o){d(n.$$.fragment,o),t=!1},d(o){o&&g(e),v(n)}}}function Da(r){let e,n=r[4].Name+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){m(o,e,l),y(e,t)},p(o,l){l&16&&n!==(n=o[4].Name+"")&&H(t,n)},d(o){o&&g(e)}}}function Fa(r){let e,n;return e=new ee({props:{$$slots:{default:[Da,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&48&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ja(r){let e,n,t,o;return e=new Fe({props:{id:xe,sourceLayer:xe,paint:{"fill-color":r[1],"fill-opacity":ie(0,.5)},layout:{visibility:r[0]?"visible":"none"},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[Fa]},$$scope:{ctx:r}}}),e.$on("click",Ha),t=new fe({props:{id:r[2],sourceLayer:xe,paint:{"line-color":r[1],"line-width":5},layout:{visibility:r[0]?"visible":"none"}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(l,i){b(e,l,i),m(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&1&&(a.layout={visibility:l[0]?"visible":"none"}),i&32&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&1&&(s.layout={visibility:l[0]?"visible":"none"}),t.$set(s)},i(l){o||(p(e.$$.fragment,l),p(t.$$.fragment,l),o=!0)},o(l){d(e.$$.fragment,l),d(t.$$.fragment,l),o=!1},d(l){l&&g(n),v(e,l),v(t,l)}}}function Ba(r){let e,n,t,o,l;function i(s){r[3](s)}let a={id:xe,$$slots:{right:[Ia],default:[Ea]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ne({props:a}),V.push(()=>Y(e,"checked",i)),o=new me({props:{url:`pmtiles://${ae()}/v1/${xe}.pmtiles`,$$slots:{default:[ja]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment)},m(s,f){b(e,s,f),m(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&33&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(p(e.$$.fragment,s),p(o.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),d(o.$$.fragment,s),l=!1},d(s){s&&g(t),v(e,s),v(o,s)}}}let xe="parliamentary_constituencies";function Ha(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Ra(r,e,n){let t=Z.parliamentary_constituencies,o=`${xe}-outline`,l=!1;function i(a){l=a,n(0,l)}return[l,t,o,i]}class Wa extends G{constructor(e){super(),z(this,e,Ra,Ba,U,{})}}function Ua(r){let e,n,t;return e=new we({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Wards`)},m(o,l){b(e,o,l),m(o,n,l),t=!0},p:Q,i(o){t||(p(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){o&&g(n),v(e,o)}}}function Ga(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function za(r){let e,n,t,o,l,i,a;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Ga]},$$scope:{ctx:r}}}),i=new je({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),o=w(", as of May 2023."),l=O(),h(i.$$.fragment)},m(s,f){m(s,e,f),y(e,n),b(t,e,null),y(e,o),m(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(p(t.$$.fragment,s),p(i.$$.fragment,s),a=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),a=!1},d(s){s&&(g(e),g(l)),v(t),v(i,s)}}}function qa(r){let e,n,t;return n=new le({props:{$$slots:{default:[za]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){m(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(p(n.$$.fragment,o),t=!0)},o(o){d(n.$$.fragment,o),t=!1},d(o){o&&g(e),v(n)}}}function Va(r){let e,n=r[4].name+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){m(o,e,l),y(e,t)},p(o,l){l&16&&n!==(n=o[4].name+"")&&H(t,n)},d(o){o&&g(e)}}}function Xa(r){let e,n;return e=new ee({props:{$$slots:{default:[Va,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&48&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ka(r){let e,n,t,o;return e=new Fe({props:{id:et,sourceLayer:et,paint:{"fill-color":r[1],"fill-opacity":ie(0,.5)},layout:{visibility:r[0]?"visible":"none"},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[Xa]},$$scope:{ctx:r}}}),e.$on("click",Ja),t=new fe({props:{id:r[2],sourceLayer:et,paint:{"line-color":r[1],"line-width":2.5},layout:{visibility:r[0]?"visible":"none"}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(l,i){b(e,l,i),m(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&1&&(a.layout={visibility:l[0]?"visible":"none"}),i&32&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&1&&(s.layout={visibility:l[0]?"visible":"none"}),t.$set(s)},i(l){o||(p(e.$$.fragment,l),p(t.$$.fragment,l),o=!0)},o(l){d(e.$$.fragment,l),d(t.$$.fragment,l),o=!1},d(l){l&&g(n),v(e,l),v(t,l)}}}function Ya(r){let e,n,t,o,l;function i(s){r[3](s)}let a={id:et,$$slots:{right:[qa],default:[Ua]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ne({props:a}),V.push(()=>Y(e,"checked",i)),o=new me({props:{url:`pmtiles://${ae()}/v1/${et}.pmtiles`,$$slots:{default:[Ka]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment)},m(s,f){b(e,s,f),m(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&33&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(p(e.$$.fragment,s),p(o.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),d(o.$$.fragment,s),l=!1},d(s){s&&g(t),v(e,s),v(o,s)}}}let et="wards";function Ja(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Za(r,e,n){let t=Z.wards,o=`${et}-outline`,l=!1;function i(a){l=a,n(0,l)}return[l,t,o,i]}class Qa extends G{constructor(e){super(),z(this,e,Za,Ya,U,{})}}function xa(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function ef(r){let e,n,t,o;return t=new X({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[xa]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("License: "),h(t.$$.fragment)},m(l,i){m(l,e,i),y(e,n),b(t,e,null),o=!0},p(l,[i]){const a={};i&1&&(a.$$scope={dirty:i,ctx:l}),t.$set(a)},i(l){o||(p(t.$$.fragment,l),o=!0)},o(l){d(t.$$.fragment,l),o=!1},d(l){l&&g(e),v(t)}}}class Ve extends G{constructor(e){super(),z(this,e,null,ef,U,{})}}function tf(r){let e,n,t;return e=new we({props:{color:Z.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=w(`
  Bus routes`)},m(o,l){b(e,o,l),m(o,n,l),t=!0},p:Q,i(o){t||(p(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){o&&g(n),v(e,o)}}}function nf(r){let e;return{c(){e=w(`GTFS
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function rf(r){let e,n,t,o,l,i,a,s,f;return l=new X({props:{href:"https://gtfs.org",$$slots:{default:[nf]},$$scope:{ctx:r}}}),s=new Ve({}),{c(){e=L("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=O(),t=L("p"),o=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(l.$$.fragment),i=w(`, and doesn't include which routes are run or the
        frequency of service.`),a=O(),h(s.$$.fragment)},m(u,c){m(u,e,c),m(u,n,c),m(u,t,c),y(t,o),b(l,t,null),y(t,i),m(u,a,c),b(s,u,c),f=!0},p(u,c){const $={};c&8&&($.$$scope={dirty:c,ctx:u}),l.$set($)},i(u){f||(p(l.$$.fragment,u),p(s.$$.fragment,u),f=!0)},o(u){d(l.$$.fragment,u),d(s.$$.fragment,u),f=!1},d(u){u&&(g(e),g(n),g(t),g(a)),v(l),v(s,u)}}}function of(r){let e,n,t;return n=new le({props:{$$slots:{default:[rf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){m(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&8&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(p(n.$$.fragment,o),t=!0)},o(o){d(n.$$.fragment,o),t=!1},d(o){o&&g(e),v(n)}}}function lf(r){let e;return{c(){e=L("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function sf(r){let e;return{c(){e=L("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function af(r){let e;function n(l,i){return l[2].has_bus_lane?sf:lf}let t=n(r),o=t(r);return{c(){o.c(),e=ve()},m(l,i){o.m(l,i),m(l,e,i)},p(l,i){t!==(t=n(l))&&(o.d(1),o=t(l),o&&(o.c(),o.m(e.parentNode,e)))},d(l){l&&g(e),o.d(l)}}}function ff(r){let e,n;return e=new ee({props:{$$slots:{default:[af,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&12&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function uf(r){let e,n;return e=new fe({props:{id:Ot,sourceLayer:Ot,paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Z.bus_route_with_lane,Z.bus_route_without_lane],"line-width":5,"line-opacity":ie(1,.5)},layout:{visibility:r[0]?"visible":"none"},$$slots:{default:[ff]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1&&(l.layout={visibility:t[0]?"visible":"none"}),o&8&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function cf(r){let e,n,t,o,l;function i(s){r[1](s)}let a={id:Ot,$$slots:{right:[of],default:[tf]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ne({props:a}),V.push(()=>Y(e,"checked",i)),o=new me({props:{url:`pmtiles://${ae()}/v1/${Ot}.pmtiles`,$$slots:{default:[uf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment)},m(s,f){b(e,s,f),m(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&8&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&9&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(p(e.$$.fragment,s),p(o.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),d(o.$$.fragment,s),l=!1},d(s){s&&g(t),v(e,s),v(o,s)}}}let Ot="bus_routes";function $f(r,e,n){let t=!1;function o(l){t=l,n(0,t)}return[t,o]}class pf extends G{constructor(e){super(),z(this,e,$f,cf,U,{})}}function Jn(r){const e=wf(r[3]);r[4]=e[0],r[5]=e[1],r[6]=e[2]}function Zn(r,e,n){const t=r.slice();return t[7]=e[n][0],t[8]=e[n][1],t}function mf(r){let e;return{c(){e=w("Cycle paths")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function gf(r){let e,n,t,o,l,i,a,s;return a=new Ve({}),{c(){e=L("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=O(),t=L("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,o=O(),l=L("p"),l.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=O(),h(a.$$.fragment)},m(f,u){m(f,e,u),m(f,n,u),m(f,t,u),m(f,o,u),m(f,l,u),m(f,i,u),b(a,f,u),s=!0},p:Q,i(f){s||(p(a.$$.fragment,f),s=!0)},o(f){d(a.$$.fragment,f),s=!1},d(f){f&&(g(e),g(n),g(t),g(o),g(l),g(i)),v(a,f)}}}function _f(r){let e,n,t;return n=new le({props:{$$slots:{default:[gf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){m(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&2048&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(p(n.$$.fragment,o),t=!0)},o(o){d(n.$$.fragment,o),t=!1},d(o){o&&g(e),v(n)}}}function Qn(r){let e,n,t=Me(r[1]),o=[];for(let i=0;i<t.length;i+=1)o[i]=xn(Zn(r,t,i));const l=i=>d(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=ve()},m(i,a){for(let s=0;s<o.length;s+=1)o[s]&&o[s].m(i,a);m(i,e,a),n=!0},p(i,a){if(a&2){t=Me(i[1]);let s;for(s=0;s<t.length;s+=1){const f=Zn(i,t,s);o[s]?(o[s].p(f,a),p(o[s],1)):(o[s]=xn(f),o[s].c(),p(o[s],1),o[s].m(e.parentNode,e))}for(re(),s=t.length;s<o.length;s+=1)l(s);oe()}},i(i){if(!n){for(let a=0;a<t.length;a+=1)p(o[a]);n=!0}},o(i){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)d(o[a]);n=!1},d(i){i&&g(e),wt(o,i)}}}function xn(r){let e,n,t,o=r[7]+"",l,i,a;return n=new we({props:{color:r[8]}}),{c(){e=L("div"),h(n.$$.fragment),t=O(),l=w(o),i=O()},m(s,f){m(s,e,f),b(n,e,null),y(e,t),y(e,l),y(e,i),a=!0},p:Q,i(s){a||(p(n.$$.fragment,s),a=!0)},o(s){d(n.$$.fragment,s),a=!1},d(s){s&&g(e),v(n)}}}function df(r){Jn(r);let e,n=r[4]+"",t,o,l,i,a,s=r[5]+"",f,u,c,$,_=r[6]+"",T;return{c(){e=L("h2"),t=w(n),o=O(),l=L("p"),i=w("Direction: "),a=L("b"),f=O(),u=L("p"),c=w("Width: "),$=L("b"),T=w(_)},m(k,C){m(k,e,C),y(e,t),m(k,o,C),m(k,l,C),y(l,i),y(l,a),a.innerHTML=s,m(k,f,C),m(k,u,C),y(u,c),y(u,$),y($,T)},p(k,C){Jn(k),C&8&&n!==(n=k[4]+"")&&H(t,n),C&8&&s!==(s=k[5]+"")&&(a.innerHTML=s),C&8&&_!==(_=k[6]+"")&&H(T,_)},d(k){k&&(g(e),g(o),g(l),g(f),g(u))}}}function hf(r){let e,n;return e=new ee({props:{$$slots:{default:[df,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2056&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bf(r){let e,n;return e=new fe({props:{id:Lt,sourceLayer:Lt,paint:{"line-color":pr(["get","kind"],{track:Z.cycle_paths.track,lane:Z.cycle_paths.lane,shared_use_segregated:Z.cycle_paths.shared_use_segregated,shared_use_unsegregated:Z.cycle_paths.shared_use_unsegregated},"red"),"line-width":ze,"line-opacity":ie(1,.5)},layout:{visibility:r[0]?"visible":"none"},hoverCursor:"pointer",$$slots:{default:[hf]},$$scope:{ctx:r}}}),e.$on("click",kf),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1&&(l.layout={visibility:t[0]?"visible":"none"}),o&2048&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vf(r){let e,n,t,o,l,i;function a(u){r[2](u)}let s={id:Lt,$$slots:{right:[_f],default:[mf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ne({props:s}),V.push(()=>Y(e,"checked",a));let f=r[0]&&Qn(r);return l=new me({props:{url:`pmtiles://${ae()}/v1/${Lt}.pmtiles`,$$slots:{default:[bf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),f&&f.c(),o=O(),h(l.$$.fragment)},m(u,c){b(e,u,c),m(u,t,c),f&&f.m(u,c),m(u,o,c),b(l,u,c),i=!0},p(u,[c]){const $={};c&2048&&($.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,$.checked=u[0],J(()=>n=!1)),e.$set($),u[0]?f?(f.p(u,c),c&1&&p(f,1)):(f=Qn(u),f.c(),p(f,1),f.m(o.parentNode,o)):f&&(re(),d(f,1,1,()=>{f=null}),oe());const _={};c&2049&&(_.$$scope={dirty:c,ctx:u}),l.$set(_)},i(u){i||(p(e.$$.fragment,u),p(f),p(l.$$.fragment,u),i=!0)},o(u){d(e.$$.fragment,u),d(f),d(l.$$.fragment,u),i=!1},d(u){u&&(g(t),g(o)),v(e,u),f&&f.d(u),v(l,u)}}}let Lt="cycle_paths";function wf(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function kf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function yf(r,e,n){let t=[["Separated tracks",Z.cycle_paths.track],["Unprotected lanes",Z.cycle_paths.lane],["Shared-use (segregated)",Z.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",Z.cycle_paths.shared_use_unsegregated]],o=!1;function l(i){o=i,n(0,o)}return[o,t,l]}class Sf extends G{constructor(e){super(),z(this,e,yf,vf,U,{})}}function Cf(r){let e,n,t;return e=new we({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Major Road Network`)},m(o,l){b(e,o,l),m(o,n,l),t=!0},p:Q,i(o){t||(p(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){o&&g(n),v(e,o)}}}function Tf(r){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Of(r){let e,n,t,o,l,i,a;return t=new X({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Tf]},$$scope:{ctx:r}}}),i=new je({}),{c(){e=L("p"),n=w("Data from the "),h(t.$$.fragment),o=w(", as of September 2021."),l=O(),h(i.$$.fragment)},m(s,f){m(s,e,f),y(e,n),b(t,e,null),y(e,o),m(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&16&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(p(t.$$.fragment,s),p(i.$$.fragment,s),a=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),a=!1},d(s){s&&(g(e),g(l)),v(t),v(i,s)}}}function Lf(r){let e,n,t;return n=new le({props:{$$slots:{default:[Of]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){m(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&16&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(p(n.$$.fragment,o),t=!0)},o(o){d(n.$$.fragment,o),t=!1},d(o){o&&g(e),v(n)}}}function Af(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){m(o,e,l),y(e,t)},p(o,l){l&8&&n!==(n=(o[3].name??"Unknown MRN road")+"")&&H(t,n)},d(o){o&&g(e)}}}function Pf(r){let e,n;return e=new ee({props:{$$slots:{default:[Af,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&24&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ef(r){let e,n;return e=new fe({props:{id:At,sourceLayer:At,paint:{"line-color":r[1],"line-width":7,"line-opacity":ie(1,.5)},layout:{visibility:r[0]?"visible":"none"},$$slots:{default:[Pf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1&&(l.layout={visibility:t[0]?"visible":"none"}),o&16&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Nf(r){let e,n,t,o,l;function i(s){r[2](s)}let a={id:At,$$slots:{right:[Lf],default:[Cf]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ne({props:a}),V.push(()=>Y(e,"checked",i)),o=new me({props:{url:`pmtiles://${ae()}/v1/${At}.pmtiles`,$$slots:{default:[Ef]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment)},m(s,f){b(e,s,f),m(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&16&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&17&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(p(e.$$.fragment,s),p(o.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),d(o.$$.fragment,s),l=!1},d(s){s&&g(t),v(e,s),v(o,s)}}}let At="mrn";function Mf(r,e,n){let t=Z.mrn,o=!1;function l(i){o=i,n(0,o)}return[o,t,l]}class If extends G{constructor(e){super(),z(this,e,Mf,Nf,U,{})}}function Df(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Ff(r){let e;return{c(){e=w("the PCT website")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function jf(r){let e;return{c(){e=w("2017 journal article")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Bf(r){let e,n,t,o,l,i,a,s,f,u,c;return a=new X({props:{href:"https://www.pct.bike",$$slots:{default:[Ff]},$$scope:{ctx:r}}}),f=new X({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[jf]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=O(),t=L("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,o=O(),l=L("p"),i=w("See "),h(a.$$.fragment),s=w(" and "),h(f.$$.fragment),u=w(" for details on methodology and data sources.")},m($,_){m($,e,_),m($,n,_),m($,t,_),m($,o,_),m($,l,_),y(l,i),b(a,l,null),y(l,s),b(f,l,null),y(l,u),c=!0},p($,_){const T={};_&1024&&(T.$$scope={dirty:_,ctx:$}),a.$set(T);const k={};_&1024&&(k.$$scope={dirty:_,ctx:$}),f.$set(k)},i($){c||(p(a.$$.fragment,$),p(f.$$.fragment,$),c=!0)},o($){d(a.$$.fragment,$),d(f.$$.fragment,$),c=!1},d($){$&&(g(e),g(n),g(t),g(o),g(l)),v(a),v(f)}}}function Hf(r){let e,n,t;return n=new le({props:{$$slots:{default:[Bf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){m(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&1024&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(p(n.$$.fragment,o),t=!0)},o(o){d(n.$$.fragment,o),t=!1},d(o){o&&g(e),v(n)}}}function er(r){let e,n,t,o,l,i,a,s;e=new qe({props:{colorScale:r[3],limits:r[4]}});function f(_){r[7](_)}let u={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(u.value=r[0]),t=new gr({props:u}),V.push(()=>Y(t,"value",f));function c(_){r[8](_)}let $={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&($.value=r[1]),i=new kt({props:$}),V.push(()=>Y(i,"value",c)),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),h(i.$$.fragment)},m(_,T){b(e,_,T),m(_,n,T),b(t,_,T),m(_,l,T),b(i,_,T),s=!0},p(_,T){const k={};!o&&T&1&&(o=!0,k.value=_[0],J(()=>o=!1)),t.$set(k);const C={};!a&&T&2&&(a=!0,C.value=_[1],J(()=>a=!1)),i.$set(C)},i(_){s||(p(e.$$.fragment,_),p(t.$$.fragment,_),p(i.$$.fragment,_),s=!0)},o(_){d(e.$$.fragment,_),d(t.$$.fragment,_),d(i.$$.fragment,_),s=!1},d(_){_&&(g(n),g(l)),v(e,_),v(t,_),v(i,_)}}}function Rf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new rn(!1),t=ve(),e.a=t},m(o,l){e.m(n,o,l),m(o,t,l)},p(o,l){l&512&&n!==(n=o[5](o[9])+"")&&e.p(n)},d(o){o&&(g(t),e.d())}}}function Wf(r){let e,n;return e=new ee({props:{$$slots:{default:[Rf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1536&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Uf(r){let e,n;return e=new fe({props:{id:Ue,sourceLayer:Ue,paint:{"line-color":Pe(["get",r[1]],r[4],r[3]),"line-width":ze,"line-opacity":ie(1,.5)},layout:{visibility:r[2]&&r[0]==Ue?"visible":"none"},$$slots:{default:[Wf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.paint={"line-color":Pe(["get",t[1]],t[4],t[3]),"line-width":ze,"line-opacity":ie(1,.5)}),o&5&&(l.layout={visibility:t[2]&&t[0]==Ue?"visible":"none"}),o&1024&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new rn(!1),t=ve(),e.a=t},m(o,l){e.m(n,o,l),m(o,t,l)},p(o,l){l&512&&n!==(n=o[5](o[9])+"")&&e.p(n)},d(o){o&&(g(t),e.d())}}}function zf(r){let e,n;return e=new ee({props:{$$slots:{default:[Gf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1536&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qf(r){let e,n;return e=new fe({props:{id:ft,sourceLayer:ft,paint:{"line-color":Pe(["get",r[1]],r[4],r[3]),"line-width":ze,"line-opacity":ie(1,.5)},layout:{visibility:r[2]&&r[0]==ft?"visible":"none"},$$slots:{default:[zf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.paint={"line-color":Pe(["get",t[1]],t[4],t[3]),"line-width":ze,"line-opacity":ie(1,.5)}),o&5&&(l.layout={visibility:t[2]&&t[0]==ft?"visible":"none"}),o&1024&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Vf(r){let e,n,t,o,l,i,a,s;function f($){r[6]($)}let u={id:Ue,$$slots:{right:[Hf],default:[Df]},$$scope:{ctx:r}};r[2]!==void 0&&(u.checked=r[2]),e=new ne({props:u}),V.push(()=>Y(e,"checked",f));let c=r[2]&&er(r);return l=new me({props:{url:`pmtiles://${ae()}/v1/${Ue}.pmtiles`,$$slots:{default:[Uf]},$$scope:{ctx:r}}}),a=new me({props:{url:`pmtiles://${ae()}/v1/${ft}.pmtiles`,$$slots:{default:[qf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),c&&c.c(),o=O(),h(l.$$.fragment),i=O(),h(a.$$.fragment)},m($,_){b(e,$,_),m($,t,_),c&&c.m($,_),m($,o,_),b(l,$,_),m($,i,_),b(a,$,_),s=!0},p($,[_]){const T={};_&1024&&(T.$$scope={dirty:_,ctx:$}),!n&&_&4&&(n=!0,T.checked=$[2],J(()=>n=!1)),e.$set(T),$[2]?c?(c.p($,_),_&4&&p(c,1)):(c=er($),c.c(),p(c,1),c.m(o.parentNode,o)):c&&(re(),d(c,1,1,()=>{c=null}),oe());const k={};_&1031&&(k.$$scope={dirty:_,ctx:$}),l.$set(k);const C={};_&1031&&(C.$$scope={dirty:_,ctx:$}),a.$set(C)},i($){s||(p(e.$$.fragment,$),p(c),p(l.$$.fragment,$),p(a.$$.fragment,$),s=!0)},o($){d(e.$$.fragment,$),d(c),d(l.$$.fragment,$),d(a.$$.fragment,$),s=!1},d($){$&&(g(t),g(o),g(i)),v(e,$),c&&c.d($),v(l,$),v(a,$)}}}let Ue="pct_commute",ft="pct_school";function Xf(r,e,n){let t=Z.sequential_low_to_high,o=[0,50,100,500,1e3,2e3],l=Ue,i="baseline",a=!1;function s($){let _=$.baseline,T=$.gov_target,k=$.go_dutch,C=`<h2>Trip purpose: ${l==Ue?"commuting":"school"}</h2>`;if(C+=`<p>Baseline (2011): <b>${_.toLocaleString()}</b></p>`,_==0)C+=`<p>Government target (2025): <b>${T.toLocaleString()}</b></p>`,C+=`<p>Go Dutch: <b>${k.toLocaleString()}</b></p>`;else{let S=(T/_).toFixed(1),P=(k/_).toFixed(1);C+=`<p>Government target (2025): ${T.toLocaleString()} (<b>${S}x</b> of baseline)</p>`,C+=`<p>Go Dutch: ${k.toLocaleString()} (<b>${P}x</b> of baseline)</p>`}return C}function f($){a=$,n(2,a)}function u($){l=$,n(0,l)}function c($){i=$,n(1,i)}return[l,i,a,t,o,s,f,u,c]}class Kf extends G{constructor(e){super(),z(this,e,Xf,Vf,U,{})}}function Yf(r){let e;return{c(){e=w("OS Speeds")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Jf(r){let e;return{c(){e=w("Basemap")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Zf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Qf(r){let e,n,t,o,l,i,a,s,f,u,c,$;return t=new X({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Jf]},$$scope:{ctx:r}}}),u=new X({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Zf]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("The average speed data is collected over a six-month period by "),h(t.$$.fragment),o=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),l=O(),i=L("p"),i.textContent="Data valid as of 1 September, 2023",a=O(),s=L("p"),f=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),c=w(".")},m(_,T){m(_,e,T),y(e,n),b(t,e,null),y(e,o),m(_,l,T),m(_,i,T),m(_,a,T),m(_,s,T),y(s,f),b(u,s,null),y(s,c),$=!0},p(_,T){const k={};T&256&&(k.$$scope={dirty:T,ctx:_}),t.$set(k);const C={};T&256&&(C.$$scope={dirty:T,ctx:_}),u.$set(C)},i(_){$||(p(t.$$.fragment,_),p(u.$$.fragment,_),$=!0)},o(_){d(t.$$.fragment,_),d(u.$$.fragment,_),$=!1},d(_){_&&(g(e),g(l),g(i),g(a),g(s)),v(t),v(u)}}}function xf(r){let e,n,t;return n=new le({props:{$$slots:{default:[Qf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){m(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&256&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(p(n.$$.fragment,o),t=!0)},o(o){d(n.$$.fragment,o),t=!1},d(o){o&&g(e),v(n)}}}function tr(r){let e,n,t,o,l;e=new qe({props:{colorScale:r[2],limits:r[3]}});function i(s){r[6](s)}let a={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(a.value=r[0]),t=new gr({props:a}),V.push(()=>Y(t,"value",i)),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(s,f){b(e,s,f),m(s,n,f),b(t,s,f),l=!0},p(s,f){const u={};!o&&f&1&&(o=!0,u.value=s[0],J(()=>o=!1)),t.$set(u)},i(s){l||(p(e.$$.fragment,s),p(t.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),l=!1},d(s){s&&g(n),v(e,s),v(t,s)}}}function eu(r){let e,n,t=r[7].indicative_mph+"",o,l,i,a,s,f=r[7].highest_mph+"",u,c,$=r[4][r[7].highest_description]+"",_,T;return{c(){e=L("p"),n=w("Posted speed limit: "),o=w(t),l=w(" mph"),i=O(),a=L("p"),s=w("Highest average speed: "),u=w(f),c=w(" mph (during "),_=w($),T=w(")")},m(k,C){m(k,e,C),y(e,n),y(e,o),y(e,l),m(k,i,C),m(k,a,C),y(a,s),y(a,u),y(a,c),y(a,_),y(a,T)},p(k,C){C&128&&t!==(t=k[7].indicative_mph+"")&&H(o,t),C&128&&f!==(f=k[7].highest_mph+"")&&H(u,f),C&128&&$!==($=k[4][k[7].highest_description]+"")&&H(_,$)},d(k){k&&(g(e),g(i),g(a))}}}function tu(r){let e,n;return e=new ee({props:{$$slots:{default:[eu,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&384&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function nu(r){let e,n;return e=new fe({props:{id:Pt,sourceLayer:Pt,paint:{"line-color":Pe(["get",r[0]],r[3],r[2]),"line-width":ze,"line-opacity":ie(1,.5)},layout:{visibility:r[1]?"visible":"none"},$$slots:{default:[tu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1&&(l.paint={"line-color":Pe(["get",t[0]],t[3],t[2]),"line-width":ze,"line-opacity":ie(1,.5)}),o&2&&(l.layout={visibility:t[1]?"visible":"none"}),o&256&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ru(r){let e,n,t,o,l,i;function a(u){r[5](u)}let s={id:Pt,$$slots:{right:[xf],default:[Yf]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new ne({props:s}),V.push(()=>Y(e,"checked",a));let f=r[1]&&tr(r);return l=new me({props:{url:`pmtiles://${on()}/v1/${Pt}.pmtiles`,$$slots:{default:[nu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),f&&f.c(),o=O(),h(l.$$.fragment)},m(u,c){b(e,u,c),m(u,t,c),f&&f.m(u,c),m(u,o,c),b(l,u,c),i=!0},p(u,[c]){const $={};c&256&&($.$$scope={dirty:c,ctx:u}),!n&&c&2&&(n=!0,$.checked=u[1],J(()=>n=!1)),e.$set($),u[1]?f?(f.p(u,c),c&2&&p(f,1)):(f=tr(u),f.c(),p(f,1),f.m(o.parentNode,o)):f&&(re(),d(f,1,1,()=>{f=null}),oe());const _={};c&259&&(_.$$scope={dirty:c,ctx:u}),l.$set(_)},i(u){i||(p(e.$$.fragment,u),p(f),p(l.$$.fragment,u),i=!0)},o(u){d(e.$$.fragment,u),d(f),d(l.$$.fragment,u),i=!1},d(u){u&&(g(t),g(o)),v(e,u),f&&f.d(u),v(l,u)}}}let Pt="road_speeds";function ou(r,e,n){let t=Z.sequential_low_to_high,o=[0,20,30,40,50,90],l="indicative_mph",i=!1,a={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function s(u){i=u,n(1,i)}function f(u){l=u,n(0,l)}return[l,i,t,o,a,s,f]}class lu extends G{constructor(e){super(),z(this,e,ou,ru,U,{})}}function su(r){let e;return{c(){e=w("OS Road widths")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function iu(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function au(r){let e,n,t,o,l,i,a,s,f;return a=new X({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[iu]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=O(),t=L("p"),t.textContent="Data valid as of 1 September, 2023",o=O(),l=L("p"),i=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(a.$$.fragment),s=w(".")},m(u,c){m(u,e,c),m(u,n,c),m(u,t,c),m(u,o,c),m(u,l,c),y(l,i),b(a,l,null),y(l,s),f=!0},p(u,c){const $={};c&32&&($.$$scope={dirty:c,ctx:u}),a.$set($)},i(u){f||(p(a.$$.fragment,u),f=!0)},o(u){d(a.$$.fragment,u),f=!1},d(u){u&&(g(e),g(n),g(t),g(o),g(l)),v(a)}}}function fu(r){let e,n,t;return n=new le({props:{$$slots:{default:[au]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){m(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(p(n.$$.fragment,o),t=!0)},o(o){d(n.$$.fragment,o),t=!1},d(o){o&&g(e),v(n)}}}function nr(r){let e,n;return e=new qe({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:Q,i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function uu(r){let e,n,t,o=r[4].average+"",l,i,a,s,f,u,c=r[4].minimum+"",$,_;return{c(){e=L("p"),n=w("Average width: "),t=L("b"),l=w(o),i=w(`
        meters`),a=O(),s=L("p"),f=w("Minimum width: "),u=L("b"),$=w(c),_=w(`
        meters`)},m(T,k){m(T,e,k),y(e,n),y(e,t),y(t,l),y(e,i),m(T,a,k),m(T,s,k),y(s,f),y(s,u),y(u,$),y(s,_)},p(T,k){k&16&&o!==(o=T[4].average+"")&&H(l,o),k&16&&c!==(c=T[4].minimum+"")&&H($,c)},d(T){T&&(g(e),g(a),g(s))}}}function cu(r){let e,n;return e=new ee({props:{$$slots:{default:[uu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&48&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $u(r){let e,n;return e=new fe({props:{id:Et,sourceLayer:Et,paint:{"line-color":Pe(["get","average"],r[2],r[1]),"line-width":ze,"line-opacity":ie(1,.5)},layout:{visibility:r[0]?"visible":"none"},$$slots:{default:[cu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1&&(l.layout={visibility:t[0]?"visible":"none"}),o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pu(r){let e,n,t,o,l,i;function a(u){r[3](u)}let s={id:Et,$$slots:{right:[fu],default:[su]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ne({props:s}),V.push(()=>Y(e,"checked",a));let f=r[0]&&nr(r);return l=new me({props:{url:`pmtiles://${on()}/v1/${Et}.pmtiles`,$$slots:{default:[$u]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),f&&f.c(),o=O(),h(l.$$.fragment)},m(u,c){b(e,u,c),m(u,t,c),f&&f.m(u,c),m(u,o,c),b(l,u,c),i=!0},p(u,[c]){const $={};c&32&&($.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,$.checked=u[0],J(()=>n=!1)),e.$set($),u[0]?f?(f.p(u,c),c&1&&p(f,1)):(f=nr(u),f.c(),p(f,1),f.m(o.parentNode,o)):f&&(re(),d(f,1,1,()=>{f=null}),oe());const _={};c&33&&(_.$$scope={dirty:c,ctx:u}),l.$set(_)},i(u){i||(p(e.$$.fragment,u),p(f),p(l.$$.fragment,u),i=!0)},o(u){d(e.$$.fragment,u),d(f),d(l.$$.fragment,u),i=!1},d(u){u&&(g(t),g(o)),v(e,u),f&&f.d(u),v(l,u)}}}let Et="road_widths";function mu(r,e,n){let t=Z.sequential_low_to_high,o=[0,5,10,15,20,100],l=!1;function i(a){l=a,n(0,l)}return[l,t,o,i]}class gu extends G{constructor(e){super(),z(this,e,mu,pu,U,{})}}function _u(r){let e,n,t;return{c(){e=L("input"),K(e,"class","govuk-file-upload"),K(e,"id","load-criticals"),K(e,"type","file")},m(o,l){m(o,e,l),r[7](e),n||(t=tt(e,"change",r[5]),n=!0)},p:Q,d(o){o&&g(e),r[7](null),n=!1,t()}}}function rr(r){let e,n;return e=new _t({props:{small:!0,$$slots:{default:[hu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2054&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function du(r){let e,n,t=r[2].toLocaleString()+"",o,l,i;return e=new we({props:{color:xt}}),{c(){h(e.$$.fragment),n=w(`
        Show `),o=w(t),l=w(" issues")},m(a,s){b(e,a,s),m(a,n,s),m(a,o,s),m(a,l,s),i=!0},p(a,s){(!i||s&4)&&t!==(t=a[2].toLocaleString()+"")&&H(o,t)},i(a){i||(p(e.$$.fragment,a),i=!0)},o(a){d(e.$$.fragment,a),i=!1},d(a){a&&(g(n),g(o),g(l)),v(e,a)}}}function hu(r){let e,n,t;function o(i){r[8](i)}let l={id:"show-criticals",$$slots:{default:[du]},$$scope:{ctx:r}};return r[1]!==void 0&&(l.checked=r[1]),e=new ne({props:l}),V.push(()=>Y(e,"checked",o)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const s={};a&2052&&(s.$$scope={dirty:a,ctx:i}),!n&&a&2&&(n=!0,s.checked=i[1],J(()=>n=!1)),e.$set(s)},i(i){t||(p(e.$$.fragment,i),t=!0)},o(i){d(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function bu(r){let e,n,t,o,l,i;e=new mr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[_u]},$$scope:{ctx:r}}}),t=new _r({props:{errorMessage:r[3]}});let a=r[2]>0&&rr(r);return{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),o=O(),a&&a.c(),l=ve()},m(s,f){b(e,s,f),m(s,n,f),b(t,s,f),m(s,o,f),a&&a.m(s,f),m(s,l,f),i=!0},p(s,f){const u={};f&2049&&(u.$$scope={dirty:f,ctx:s}),e.$set(u);const c={};f&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?a?(a.p(s,f),f&4&&p(a,1)):(a=rr(s),a.c(),p(a,1),a.m(l.parentNode,l)):a&&(re(),d(a,1,1,()=>{a=null}),oe())},i(s){i||(p(e.$$.fragment,s),p(t.$$.fragment,s),p(a),i=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),d(a),i=!1},d(s){s&&(g(n),g(o),g(l)),v(e,s),v(t,s),a&&a.d(s)}}}function vu(r){let e,n,t=r[10].critical_type+"",o,l,i,a,s,f=r[10].location_description+"",u,c,$,_,T,k=r[10].notes+"",C,S,P,M,F,I,D,A=r[10].id+"",E,N,R,B,W,q=(r[10].inspector??"???")+"",se,Xe,te,ue=r[10].submission_time+"",_e,de,ce,Be,ke,ye=r[10].scheme_reference+"",Ee,Se,He,De=r[10].current_design_stage+"",j;return{c(){e=L("div"),n=L("h2"),o=w(t),l=O(),i=L("p"),a=L("u"),a.textContent="Location",s=w(`
          : `),u=w(f),c=O(),$=L("p"),_=L("u"),_.textContent="Notes",T=w(`
          : `),C=w(k),S=O(),P=L("hr"),M=O(),F=L("p"),I=w("Critical issue ID: "),D=L("b"),E=w(A),N=O(),R=L("p"),B=w("Submitted by "),W=L("b"),se=w(q),Xe=w(`
          at
          `),te=L("b"),_e=w(ue),de=O(),ce=L("p"),Be=w("For scheme "),ke=L("b"),Ee=w(ye),Se=w(`
          in stage
          `),He=L("b"),j=w(De),Ae(e,"max-width","30vw")},m($e,ge){m($e,e,ge),y(e,n),y(n,o),y(e,l),y(e,i),y(i,a),y(i,s),y(i,u),y(e,c),y(e,$),y($,_),y($,T),y($,C),y(e,S),y(e,P),y(e,M),y(e,F),y(F,I),y(F,D),y(D,E),y(e,N),y(e,R),y(R,B),y(R,W),y(W,se),y(R,Xe),y(R,te),y(te,_e),y(e,de),y(e,ce),y(ce,Be),y(ce,ke),y(ke,Ee),y(ce,Se),y(ce,He),y(He,j)},p($e,ge){ge&1024&&t!==(t=$e[10].critical_type+"")&&H(o,t),ge&1024&&f!==(f=$e[10].location_description+"")&&H(u,f),ge&1024&&k!==(k=$e[10].notes+"")&&H(C,k),ge&1024&&A!==(A=$e[10].id+"")&&H(E,A),ge&1024&&q!==(q=($e[10].inspector??"???")+"")&&H(se,q),ge&1024&&ue!==(ue=$e[10].submission_time+"")&&H(_e,ue),ge&1024&&ye!==(ye=$e[10].scheme_reference+"")&&H(Ee,ye),ge&1024&&De!==(De=$e[10].current_design_stage+"")&&H(j,De)},d($e){$e&&g(e)}}}function wu(r){let e,n;return e=new ee({props:{$$slots:{default:[vu,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&3072&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ku(r){let e,n,t,o,l,i;return e=new Ge({props:{id:`${Nt}-clusters`,applyToClusters:!0,paint:{"circle-color":xt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]},layout:{visibility:r[1]?"visible":"none"},hoverCursor:"pointer"}}),e.$on("click",r[6]),t=new To({props:{applyToClusters:!0,layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}}),l=new Ge({props:{id:`${Nt}-counts`,applyToClusters:!1,paint:{"circle-color":xt,"circle-opacity":.9,"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3},layout:{visibility:r[1]?"visible":"none"},$$slots:{default:[wu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),o=O(),h(l.$$.fragment)},m(a,s){b(e,a,s),m(a,n,s),b(t,a,s),m(a,o,s),b(l,a,s),i=!0},p(a,s){const f={};s&2&&(f.layout={visibility:a[1]?"visible":"none"}),e.$set(f);const u={};s&2&&(u.layout={"text-field":"{point_count_abbreviated}",visibility:a[1]?"visible":"none"}),t.$set(u);const c={};s&2&&(c.layout={visibility:a[1]?"visible":"none"}),s&2048&&(c.$$scope={dirty:s,ctx:a}),l.$set(c)},i(a){i||(p(e.$$.fragment,a),p(t.$$.fragment,a),p(l.$$.fragment,a),i=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(l.$$.fragment,a),i=!1},d(a){a&&(g(n),g(o)),v(e,a),v(t,a),v(l,a)}}}function yu(r){let e,n,t,o;return e=new Oe({props:{label:"Critical Issues",$$slots:{default:[bu]},$$scope:{ctx:r}}}),t=new at({props:{id:Nt,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[ku]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(l,i){b(e,l,i),m(l,n,i),b(t,l,i),o=!0},p(l,[i]){const a={};i&2063&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&16&&(s.data=l[4]),i&2050&&(s.$$scope={dirty:i,ctx:l}),t.$set(s)},i(l){o||(p(e.$$.fragment,l),p(t.$$.fragment,l),o=!0)},o(l){d(e.$$.fragment,l),d(t.$$.fragment,l),o=!1},d(l){l&&g(n),v(e,l),v(t,l)}}}let Nt="criticals",xt="red";function Su(r,e,n){let t;pe(r,gt,_=>n(9,t=_));let o,l=!0,i=0,a="",s=Vt();async function f(_){try{n(4,s=await Bs(o.files[0])),n(2,i=s.features.length),n(3,a="")}catch(T){n(3,a=`The file you loaded is broken: ${T}`)}}function u(_){t.getSource(Nt).getClusterExpansionZoom(_.detail.features[0].properties.cluster_id,(T,k)=>{T||t.easeTo({center:_.detail.features[0].geometry.coordinates,zoom:k})})}function c(_){V[_?"unshift":"push"](()=>{o=_,n(0,o)})}function $(_){l=_,n(1,l)}return[o,l,i,a,s,f,u,c,$]}class Cu extends G{constructor(e){super(),z(this,e,Su,yu,U,{})}}function Tu(r){let e,n,t;return e=new we({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Crossings`)},m(o,l){b(e,o,l),m(o,n,l),t=!0},p:Q,i(o){t||(p(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){o&&g(n),v(e,o)}}}function Ou(r){let e;return{c(){e=w("crossing")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Lu(r){let e,n,t,o,l,i,a;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Ou]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),o=w(" data from OpenStreetMap (as of 9 August 2023)."),l=O(),h(i.$$.fragment)},m(s,f){m(s,e,f),y(e,n),b(t,e,null),y(e,o),m(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&16&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(p(t.$$.fragment,s),p(i.$$.fragment,s),a=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),a=!1},d(s){s&&(g(e),g(l)),v(t),v(i,s)}}}function Au(r){let e,n,t;return n=new le({props:{$$slots:{default:[Lu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){m(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&16&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(p(n.$$.fragment,o),t=!0)},o(o){d(n.$$.fragment,o),t=!1},d(o){o&&g(e),v(n)}}}function Pu(r){let e,n=or(r[3])+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){m(o,e,l),y(e,t)},p(o,l){l&8&&n!==(n=or(o[3])+"")&&H(t,n)},d(o){o&&g(e)}}}function Eu(r){let e,n;return e=new ee({props:{$$slots:{default:[Pu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&24&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Nu(r){let e,n;return e=new Ge({props:{id:Mt,sourceLayer:Mt,paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]},layout:{visibility:r[0]?"visible":"none"},hoverCursor:"pointer",$$slots:{default:[Eu]},$$scope:{ctx:r}}}),e.$on("click",Iu),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1&&(l.layout={visibility:t[0]?"visible":"none"}),o&16&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mu(r){let e,n,t,o,l;function i(s){r[2](s)}let a={id:Mt,$$slots:{right:[Au],default:[Tu]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ne({props:a}),V.push(()=>Y(e,"checked",i)),o=new me({props:{url:`pmtiles://${ae()}/v1/${Mt}.pmtiles`,$$slots:{default:[Nu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment)},m(s,f){b(e,s,f),m(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&16&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&17&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(p(e.$$.fragment,s),p(o.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),d(o.$$.fragment,s),l=!1},d(s){s&&g(t),v(e,s),v(o,s)}}}let Mt="crossings";function or(r){return new Map([["no","Location where crossing is impossible/illegal but where there is a clear desire line to cross"],["traffic_signals","Signalised crossing"],["marked","Crossing with no traffic signals"],["uncontrolled","Crossing with no traffic signals"],["unmarked","Crossing with no markings or signals"],["zebra","Zebra crossing"],["island","Crossing with an island"],["informal","Informal crossing with an obvious desire line, but no official infrastructure to support it"]]).get(r.crossing)??`Unknown crossing type (${r.crossing})`}function Iu(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Du(r,e,n){let t=Z.crossings,o=!1;function l(i){o=i,n(0,o)}return[o,t,l]}class Fu extends G{constructor(e){super(),z(this,e,Du,Mu,U,{})}}function ju(r){let e,n,t;return e=new we({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Cycle parking`)},m(o,l){b(e,o,l),m(o,n,l),t=!0},p:Q,i(o){t||(p(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){o&&g(n),v(e,o)}}}function Bu(r){let e;return{c(){e=w("OpenStreetMap")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Hu(r){let e,n,t,o,l,i,a;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Bu]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=L("p"),n=w("Cycle parking, according to "),h(t.$$.fragment),o=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),l=O(),h(i.$$.fragment)},m(s,f){m(s,e,f),y(e,n),b(t,e,null),y(e,o),m(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&16&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(p(t.$$.fragment,s),p(i.$$.fragment,s),a=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),a=!1},d(s){s&&(g(e),g(l)),v(t),v(i,s)}}}function Ru(r){let e,n,t;return n=new le({props:{$$slots:{default:[Hu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){m(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&16&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(p(n.$$.fragment,o),t=!0)},o(o){d(n.$$.fragment,o),t=!1},d(o){o&&g(e),v(n)}}}function Wu(r){let e,n,t,o=(r[3].capacity??"unknown")+"",l;return{c(){e=L("p"),n=w("Capacity: "),t=L("b"),l=w(o)},m(i,a){m(i,e,a),y(e,n),y(e,t),y(t,l)},p(i,a){a&8&&o!==(o=(i[3].capacity??"unknown")+"")&&H(l,o)},d(i){i&&g(e)}}}function Uu(r){let e,n;return e=new ee({props:{$$slots:{default:[Wu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&24&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gu(r){let e,n;return e=new Ge({props:{id:It,sourceLayer:It,paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]},layout:{visibility:r[0]?"visible":"none"},manageHoverState:!0,$$slots:{default:[Uu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1&&(l.layout={visibility:t[0]?"visible":"none"}),o&16&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zu(r){let e,n,t,o,l;function i(s){r[2](s)}let a={id:It,$$slots:{right:[Ru],default:[ju]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ne({props:a}),V.push(()=>Y(e,"checked",i)),o=new me({props:{url:`pmtiles://${ae()}/v1/${It}.pmtiles`,$$slots:{default:[Gu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment)},m(s,f){b(e,s,f),m(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&16&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&17&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(p(e.$$.fragment,s),p(o.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),d(o.$$.fragment,s),l=!1},d(s){s&&g(t),v(e,s),v(o,s)}}}let It="cycle_parking";function qu(r,e,n){let t=Z.cycle_parking,o=!1;function l(i){o=i,n(0,o)}return[o,t,l]}class Vu extends G{constructor(e){super(),z(this,e,qu,zu,U,{})}}function Xu(r){let e,n,t,o;return e=new we({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=O(),t=w(r[2])},m(l,i){b(e,l,i),m(l,n,i),m(l,t,i),o=!0},p(l,i){(!o||i&4)&&H(t,l[2])},i(l){o||(p(e.$$.fragment,l),o=!0)},o(l){d(e.$$.fragment,l),o=!1},d(l){l&&(g(n),g(t)),v(e,l)}}}function Ku(r){let e;const n=r[5].default,t=rt(n,r,r[7],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&128)&&ot(t,n,o,o[7],e?st(n,o[7],l,null):lt(o[7]),null)},i(o){e||(p(t,o),e=!0)},o(o){d(t,o),e=!1},d(o){t&&t.d(o)}}}function Yu(r){let e,n,t;return n=new le({props:{$$slots:{default:[Ku]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){m(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&128&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(p(n.$$.fragment,o),t=!0)},o(o){d(n.$$.fragment,o),t=!1},d(o){o&&g(e),v(n)}}}function Ju(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){m(o,e,l),y(e,t)},p(o,l){l&258&&n!==(n=(o[8].name??`Unnamed ${o[1]}`)+"")&&H(t,n)},d(o){o&&g(e)}}}function Zu(r){let e,n;return e=new ee({props:{$$slots:{default:[Ju,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&386&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qu(r){let e,n;return e=new Fe({props:{id:r[0],sourceLayer:r[0],paint:{"fill-color":r[4],"fill-opacity":ie(.7,1)},layout:{visibility:r[3]?"visible":"none"},manageHoverState:!0,$$slots:{default:[Zu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1&&(l.id=t[0]),o&1&&(l.sourceLayer=t[0]),o&8&&(l.layout={visibility:t[3]?"visible":"none"}),o&130&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xu(r){let e,n,t,o,l;function i(s){r[6](s)}let a={id:r[0],$$slots:{right:[Yu],default:[Xu]},$$scope:{ctx:r}};return r[3]!==void 0&&(a.checked=r[3]),e=new ne({props:a}),V.push(()=>Y(e,"checked",i)),o=new me({props:{url:`pmtiles://${ae()}/v1/${r[0]}.pmtiles`,$$slots:{default:[Qu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment)},m(s,f){b(e,s,f),m(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&1&&(u.id=s[0]),f&132&&(u.$$scope={dirty:f,ctx:s}),!n&&f&8&&(n=!0,u.checked=s[3],J(()=>n=!1)),e.$set(u);const c={};f&1&&(c.url=`pmtiles://${ae()}/v1/${s[0]}.pmtiles`),f&139&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(p(e.$$.fragment,s),p(o.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),d(o.$$.fragment,s),l=!1},d(s){s&&g(t),v(e,s),v(o,s)}}}function ec(r,e,n){let{$$slots:t={},$$scope:o}=e,{name:l}=e,{singularNoun:i}=e,{pluralNoun:a}=e,s=Z[l],f=!1;function u(c){f=c,n(3,f)}return r.$$set=c=>{"name"in c&&n(0,l=c.name),"singularNoun"in c&&n(1,i=c.singularNoun),"pluralNoun"in c&&n(2,a=c.pluralNoun),"$$scope"in c&&n(7,o=c.$$scope)},[l,i,a,f,s,t,u,o]}class sn extends G{constructor(e){super(),z(this,e,ec,xu,U,{name:0,singularNoun:1,pluralNoun:2})}}function tc(r){let e;return{c(){e=w("hospital")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function nc(r){let e,n,t,o,l,i,a;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[tc]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),o=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),l=O(),h(i.$$.fragment)},m(s,f){m(s,e,f),y(e,n),b(t,e,null),y(e,o),m(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&1&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(p(t.$$.fragment,s),p(i.$$.fragment,s),a=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),a=!1},d(s){s&&(g(e),g(l)),v(t),v(i,s)}}}function rc(r){let e,n;return e=new sn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[nc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&1&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class oc extends G{constructor(e){super(),z(this,e,null,rc,U,{})}}function lc(r){let e,n,t;return e=new we({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Railway Stations`)},m(o,l){b(e,o,l),m(o,n,l),t=!0},p:Q,i(o){t||(p(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){o&&g(n),v(e,o)}}}function sc(r){let e;return{c(){e=w("railway station")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function ic(r){let e,n,t,o,l,i,a;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[sc]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),o=w(" data from OpenStreetMap (as of 9 August 2023)."),l=O(),h(i.$$.fragment)},m(s,f){m(s,e,f),y(e,n),b(t,e,null),y(e,o),m(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&16&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(p(t.$$.fragment,s),p(i.$$.fragment,s),a=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),a=!1},d(s){s&&(g(e),g(l)),v(t),v(i,s)}}}function ac(r){let e,n,t;return n=new le({props:{$$slots:{default:[ic]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){m(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&16&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(p(n.$$.fragment,o),t=!0)},o(o){d(n.$$.fragment,o),t=!1},d(o){o&&g(e),v(n)}}}function fc(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){m(o,e,l),y(e,t)},p(o,l){l&8&&n!==(n=(o[3].name??"Unnamed railway station")+"")&&H(t,n)},d(o){o&&g(e)}}}function uc(r){let e,n;return e=new ee({props:{$$slots:{default:[fc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&24&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function cc(r){let e,n;return e=new Ge({props:{id:en,paint:{"circle-color":r[1],"circle-radius":br/2},layout:{visibility:r[0]?"visible":"none"},$$slots:{default:[uc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1&&(l.layout={visibility:t[0]?"visible":"none"}),o&16&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $c(r){let e,n,t,o,l;function i(s){r[2](s)}let a={id:en,$$slots:{right:[ac],default:[lc]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ne({props:a}),V.push(()=>Y(e,"checked",i)),o=new at({props:{data:`${ae()}/v1/${en}.geojson`,$$slots:{default:[cc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment)},m(s,f){b(e,s,f),m(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&16&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&17&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(p(e.$$.fragment,s),p(o.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),d(o.$$.fragment,s),l=!1},d(s){s&&g(t),v(e,s),v(o,s)}}}let en="railway_stations";function pc(r,e,n){let t=Z.railway_stations,o=!1;function l(i){o=i,n(0,o)}return[o,t,l]}class mc extends G{constructor(e){super(),z(this,e,pc,$c,U,{})}}function gc(r){let e;return{c(){e=w("primary and secondary schools")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function _c(r){let e,n,t,o,l,i,a;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[gc]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),o=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),l=O(),h(i.$$.fragment)},m(s,f){m(s,e,f),y(e,n),b(t,e,null),y(e,o),m(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&1&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(p(t.$$.fragment,s),p(i.$$.fragment,s),a=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),a=!1},d(s){s&&(g(e),g(l)),v(t),v(i,s)}}}function dc(r){let e,n;return e=new sn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[_c]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&1&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class hc extends G{constructor(e){super(),z(this,e,null,dc,U,{})}}function bc(r){let e;return{c(){e=w("sports pitches")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function vc(r){let e;return{c(){e=w("sports centres")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function wc(r){let e,n,t,o,l,i,a,s,f;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[bc]},$$scope:{ctx:r}}}),l=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[vc]},$$scope:{ctx:r}}}),s=new Ve({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),o=w(" and "),h(l.$$.fragment),i=w(" data from OpenStreetMap (as of 9 August 2023)."),a=O(),h(s.$$.fragment)},m(u,c){m(u,e,c),y(e,n),b(t,e,null),y(e,o),b(l,e,null),y(e,i),m(u,a,c),b(s,u,c),f=!0},p(u,c){const $={};c&1&&($.$$scope={dirty:c,ctx:u}),t.$set($);const _={};c&1&&(_.$$scope={dirty:c,ctx:u}),l.$set(_)},i(u){f||(p(t.$$.fragment,u),p(l.$$.fragment,u),p(s.$$.fragment,u),f=!0)},o(u){d(t.$$.fragment,u),d(l.$$.fragment,u),d(s.$$.fragment,u),f=!1},d(u){u&&(g(e),g(a)),v(t),v(l),v(s,u)}}}function kc(r){let e,n;return e=new sn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[wc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&1&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class yc extends G{constructor(e){super(),z(this,e,null,kc,U,{})}}function lr(r){const e=Mc(r[5]);r[6]=e[0],r[7]=e[1],r[8]=e[2],r[9]=e[3]}function Sc(r){let e;return{c(){e=w("Vehicle counts")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Cc(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Tc(r){let e;return{c(){e=w("methodology")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function Oc(r){let e,n,t,o,l,i,a,s,f,u,c;return t=new X({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Cc]},$$scope:{ctx:r}}}),l=new X({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Tc]},$$scope:{ctx:r}}}),u=new je({}),{c(){e=L("p"),n=w("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),o=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(l.$$.fragment),i=w(" for details and caveats about the measurements."),a=O(),s=L("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,f=O(),h(u.$$.fragment)},m($,_){m($,e,_),y(e,n),b(t,e,null),y(e,o),b(l,e,null),y(e,i),m($,a,_),m($,s,_),m($,f,_),b(u,$,_),c=!0},p($,_){const T={};_&1024&&(T.$$scope={dirty:_,ctx:$}),t.$set(T);const k={};_&1024&&(k.$$scope={dirty:_,ctx:$}),l.$set(k)},i($){c||(p(t.$$.fragment,$),p(l.$$.fragment,$),p(u.$$.fragment,$),c=!0)},o($){d(t.$$.fragment,$),d(l.$$.fragment,$),d(u.$$.fragment,$),c=!1},d($){$&&(g(e),g(a),g(s),g(f)),v(t),v(l),v(u,$)}}}function Lc(r){let e,n,t;return n=new le({props:{$$slots:{default:[Oc]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){m(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&1024&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(p(n.$$.fragment,o),t=!0)},o(o){d(n.$$.fragment,o),t=!1},d(o){o&&g(e),v(n)}}}function sr(r){let e,n;return e=new qe({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:Q,i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ac(r){lr(r);let e,n=r[6]+"",t,o,l,i,a,s=r[7]+"",f,u,c,$,_,T=r[8]+"",k,C,S,P,M,F=r[9]+"",I;return{c(){e=L("h2"),t=w(n),o=O(),l=L("p"),i=w("Total motor vehicles (2022 AADF): "),a=L("b"),f=w(s),u=O(),c=L("p"),$=w("Total pedal cycles (2022 AADF): "),_=L("b"),k=w(T),C=O(),S=L("p"),P=w("Count method: "),M=L("b"),I=w(F)},m(D,A){m(D,e,A),y(e,t),m(D,o,A),m(D,l,A),y(l,i),y(l,a),y(a,f),m(D,u,A),m(D,c,A),y(c,$),y(c,_),y(_,k),m(D,C,A),m(D,S,A),y(S,P),y(S,M),y(M,I)},p(D,A){lr(D),A&32&&n!==(n=D[6]+"")&&H(t,n),A&32&&s!==(s=D[7]+"")&&H(f,s),A&32&&T!==(T=D[8]+"")&&H(k,T),A&32&&F!==(F=D[9]+"")&&H(I,F)},d(D){D&&(g(e),g(o),g(l),g(u),g(c),g(C),g(S))}}}function Pc(r){let e,n;return e=new ee({props:{$$slots:{default:[Ac,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1056&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ec(r){let e,n;return e=new Ge({props:{id:Dt,sourceLayer:Dt,paint:{"circle-color":Pe(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1},layout:{visibility:r[0]?"visible":"none"},hoverCursor:"pointer",$$slots:{default:[Pc]},$$scope:{ctx:r}}}),e.$on("click",Ic),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1&&(l.layout={visibility:t[0]?"visible":"none"}),o&1024&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Nc(r){let e,n,t,o,l,i;function a(u){r[4](u)}let s={id:Dt,$$slots:{right:[Lc],default:[Sc]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ne({props:s}),V.push(()=>Y(e,"checked",a));let f=r[0]&&sr(r);return l=new me({props:{url:`pmtiles://${ae()}/v1/${Dt}.pmtiles`,$$slots:{default:[Ec]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),f&&f.c(),o=O(),h(l.$$.fragment)},m(u,c){b(e,u,c),m(u,t,c),f&&f.m(u,c),m(u,o,c),b(l,u,c),i=!0},p(u,[c]){const $={};c&1024&&($.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,$.checked=u[0],J(()=>n=!1)),e.$set($),u[0]?f?(f.p(u,c),c&1&&p(f,1)):(f=sr(u),f.c(),p(f,1),f.m(o.parentNode,o)):f&&(re(),d(f,1,1,()=>{f=null}),oe());const _={};c&1025&&(_.$$scope={dirty:c,ctx:u}),l.$set(_)},i(u){i||(p(e.$$.fragment,u),p(f),p(l.$$.fragment,u),i=!0)},o(u){d(e.$$.fragment,u),d(f),d(l.$$.fragment,u),i=!1},d(u){u&&(g(t),g(o)),v(e,u),f&&f.d(u),v(l,u)}}}let Dt="vehicle_counts";function Mc(r){return[r.location,r.motor_vehicles_2022.toLocaleString(),r.pedal_cycles_2022.toLocaleString(),r.method]}function Ic(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function Dc(r,e,n){let t=Z.sequential_low_to_high,o=[0,4e4,8e4,12e4,16e4,205e3],l=["","40k","80k","120k","160k",""],i=!1;function a(s){i=s,n(0,i)}return[i,t,o,l,a]}class Fc extends G{constructor(e){super(),z(this,e,Dc,Nc,U,{})}}function jc(r){let e,n,t,o,l,i,a,s;return e=new hc({}),t=new oc({}),l=new yc({}),a=new mc({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),o=O(),h(l.$$.fragment),i=O(),h(a.$$.fragment)},m(f,u){b(e,f,u),m(f,n,u),b(t,f,u),m(f,o,u),b(l,f,u),m(f,i,u),b(a,f,u),s=!0},i(f){s||(p(e.$$.fragment,f),p(t.$$.fragment,f),p(l.$$.fragment,f),p(a.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),d(l.$$.fragment,f),d(a.$$.fragment,f),s=!1},d(f){f&&(g(n),g(o),g(i)),v(e,f),v(t,f),v(l,f),v(a,f)}}}function Bc(r){let e,n;return e=new _t({props:{small:!0,$$slots:{default:[jc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Hc(r){let e,n,t,o,l,i,a,s,f,u;return e=new Sf({}),t=new If({}),l=new pf({}),a=new Vu({}),f=new Fu({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),o=O(),h(l.$$.fragment),i=O(),h(a.$$.fragment),s=O(),h(f.$$.fragment)},m(c,$){b(e,c,$),m(c,n,$),b(t,c,$),m(c,o,$),b(l,c,$),m(c,i,$),b(a,c,$),m(c,s,$),b(f,c,$),u=!0},i(c){u||(p(e.$$.fragment,c),p(t.$$.fragment,c),p(l.$$.fragment,c),p(a.$$.fragment,c),p(f.$$.fragment,c),u=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(l.$$.fragment,c),d(a.$$.fragment,c),d(f.$$.fragment,c),u=!1},d(c){c&&(g(n),g(o),g(i),g(s)),v(e,c),v(t,c),v(l,c),v(a,c),v(f,c)}}}function Rc(r){let e,n;return e=new _t({props:{small:!0,$$slots:{default:[Hc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wc(r){let e,n,t,o,l,i,a,s,f,u;return e=new Wa({}),t=new Qa({}),l=new Ki({}),a=new _a({}),f=new Pa({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),o=O(),h(l.$$.fragment),i=O(),h(a.$$.fragment),s=O(),h(f.$$.fragment)},m(c,$){b(e,c,$),m(c,n,$),b(t,c,$),m(c,o,$),b(l,c,$),m(c,i,$),b(a,c,$),m(c,s,$),b(f,c,$),u=!0},i(c){u||(p(e.$$.fragment,c),p(t.$$.fragment,c),p(l.$$.fragment,c),p(a.$$.fragment,c),p(f.$$.fragment,c),u=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(l.$$.fragment,c),d(a.$$.fragment,c),d(f.$$.fragment,c),u=!1},d(c){c&&(g(n),g(o),g(i),g(s)),v(e,c),v(t,c),v(l,c),v(a,c),v(f,c)}}}function Uc(r){let e,n;return e=new _t({props:{small:!0,$$slots:{default:[Wc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gc(r){let e,n,t,o;return e=new ji({}),t=new la({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(l,i){b(e,l,i),m(l,n,i),b(t,l,i),o=!0},i(l){o||(p(e.$$.fragment,l),p(t.$$.fragment,l),o=!0)},o(l){d(e.$$.fragment,l),d(t.$$.fragment,l),o=!1},d(l){l&&g(n),v(e,l),v(t,l)}}}function zc(r){let e,n,t,o;return e=new gu({}),t=new lu({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(l,i){b(e,l,i),m(l,n,i),b(t,l,i),o=!0},i(l){o||(p(e.$$.fragment,l),p(t.$$.fragment,l),o=!0)},o(l){d(e.$$.fragment,l),d(t.$$.fragment,l),o=!1},d(l){l&&g(n),v(e,l),v(t,l)}}}function qc(r){let e,n,t,o,l=nn()=="Private (development)",i,a;e=new Fc({}),t=new Kf({});let s=l&&zc();return{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),o=O(),s&&s.c(),i=ve()},m(f,u){b(e,f,u),m(f,n,u),b(t,f,u),m(f,o,u),s&&s.m(f,u),m(f,i,u),a=!0},p:Q,i(f){a||(p(e.$$.fragment,f),p(t.$$.fragment,f),p(s),a=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),d(s),a=!1},d(f){f&&(g(n),g(o),g(i)),v(e,f),v(t,f),s&&s.d(f)}}}function Vc(r){let e,n,t,o,l;function i(s){r[4](s)}let a={displayEnableButton:!0};return r[1]!==void 0&&(a.isInactive=r[1]),e=new oo({props:a}),r[3](e),V.push(()=>Y(e,"isInactive",i)),o=new si({}),{c(){h(e.$$.fragment),t=O(),h(o.$$.fragment)},m(s,f){b(e,s,f),m(s,t,f),b(o,s,f),l=!0},p(s,f){const u={};!n&&f&2&&(n=!0,u.isInactive=s[1],J(()=>n=!1)),e.$set(u)},i(s){l||(p(e.$$.fragment,s),p(o.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),d(o.$$.fragment,s),l=!1},d(s){s&&g(t),r[3](null),v(e,s),v(o,s)}}}function Xc(r){let e,n,t,o,l,i,a,s,f,u,c,$,_,T,k,C;return e=new Cu({}),t=new Oe({props:{label:"Trip generators",$$slots:{default:[Bc]},$$scope:{ctx:r}}}),l=new Oe({props:{label:"Existing infrastructure",$$slots:{default:[Rc]},$$scope:{ctx:r}}}),a=new Oe({props:{label:"Boundaries",$$slots:{default:[Uc]},$$scope:{ctx:r}}}),f=new Oe({props:{label:"Census",$$slots:{default:[Gc]},$$scope:{ctx:r}}}),c=new Oe({props:{label:"Other",$$slots:{default:[qc]},$$scope:{ctx:r}}}),_=new Oe({props:{label:"Tools",$$slots:{default:[Vc]},$$scope:{ctx:r}}}),k=new ro({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),o=O(),h(l.$$.fragment),i=O(),h(a.$$.fragment),s=O(),h(f.$$.fragment),u=O(),h(c.$$.fragment),$=O(),h(_.$$.fragment),T=O(),h(k.$$.fragment)},m(S,P){b(e,S,P),m(S,n,P),b(t,S,P),m(S,o,P),b(l,S,P),m(S,i,P),b(a,S,P),m(S,s,P),b(f,S,P),m(S,u,P),b(c,S,P),m(S,$,P),b(_,S,P),m(S,T,P),b(k,S,P),C=!0},p(S,P){const M={};P&32&&(M.$$scope={dirty:P,ctx:S}),t.$set(M);const F={};P&32&&(F.$$scope={dirty:P,ctx:S}),l.$set(F);const I={};P&32&&(I.$$scope={dirty:P,ctx:S}),a.$set(I);const D={};P&32&&(D.$$scope={dirty:P,ctx:S}),f.$set(D);const A={};P&32&&(A.$$scope={dirty:P,ctx:S}),c.$set(A);const E={};P&35&&(E.$$scope={dirty:P,ctx:S}),_.$set(E);const N={};P&2&&(N.disabled=!S[1]),k.$set(N)},i(S){C||(p(e.$$.fragment,S),p(t.$$.fragment,S),p(l.$$.fragment,S),p(a.$$.fragment,S),p(f.$$.fragment,S),p(c.$$.fragment,S),p(_.$$.fragment,S),p(k.$$.fragment,S),C=!0)},o(S){d(e.$$.fragment,S),d(t.$$.fragment,S),d(l.$$.fragment,S),d(a.$$.fragment,S),d(f.$$.fragment,S),d(c.$$.fragment,S),d(_.$$.fragment,S),d(k.$$.fragment,S),C=!1},d(S){S&&(g(n),g(o),g(i),g(s),g(u),g($),g(T)),v(e,S),v(t,S),v(l,S),v(a,S),v(f,S),v(c,S),v(_,S),v(k,S)}}}function Kc(r){let e,n,t,o;return e=new Oe({props:{label:"Layers",open:!0,$$slots:{default:[Xc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(l,i){b(e,l,i),n=!0,t||(o=tt(window,"keydown",r[2]),t=!0)},p(l,[i]){const a={};i&35&&(a.$$scope={dirty:i,ctx:l}),e.$set(a)},i(l){n||(p(e.$$.fragment,l),n=!0)},o(l){d(e.$$.fragment,l),n=!1},d(l){v(e,l),t=!1,o()}}}function Yc(r,e,n){let t;pe(r,un,s=>n(1,t=s));let o;function l(s){!t&&s.key=="Escape"&&(o.disableStreetView(),s.preventDefault())}function i(s){V[s?"unshift":"push"](()=>{o=s,n(0,o)})}function a(s){t=s,un.set(t)}return[o,t,l,i,a]}class Jc extends G{constructor(e){super(),z(this,e,Yc,Kc,U,{})}}function Zc(r,e,n){let{loadFile:t}=e;return it(async()=>{let l=await(await fetch(`${on()}/v1/random_schemes.geojson`)).text();t(l)}),r.$$set=o=>{"loadFile"in o&&n(0,t=o.loadFile)},[t]}class Qc extends G{constructor(e){super(),z(this,e,Zc,null,U,{loadFile:0})}}function xc(r){let e;return{c(){e=w("Show on map")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function e$(r){let e;return{c(){e=w("Edit scheme locally")},m(n,t){m(n,e,t)},d(n){n&&g(e)}}}function t$(r){let e,n,t=r[0].authority_or_region+"",o,l,i,a,s=r[0].capital_scheme_id+"",f,u,c,$,_=r[0].funding_programme+"",T,k,C,S,P,M,F;return S=new ct({props:{$$slots:{default:[xc]},$$scope:{ctx:r}}}),S.$on("click",r[3]),M=new ct({props:{disabled:r[1],title:r[2],$$slots:{default:[e$]},$$scope:{ctx:r}}}),M.$on("click",r[4]),{c(){e=L("p"),n=w("Authority or region: "),o=w(t),l=O(),i=L("p"),a=w("Capital scheme ID: "),f=w(s),u=O(),c=L("p"),$=w("Funding programme: "),T=w(_),k=O(),C=L("div"),h(S.$$.fragment),P=O(),h(M.$$.fragment),K(C,"class","govuk-button-group")},m(I,D){m(I,e,D),y(e,n),y(e,o),m(I,l,D),m(I,i,D),y(i,a),y(i,f),m(I,u,D),m(I,c,D),y(c,$),y(c,T),m(I,k,D),m(I,C,D),b(S,C,null),y(C,P),b(M,C,null),F=!0},p(I,D){(!F||D&1)&&t!==(t=I[0].authority_or_region+"")&&H(o,t),(!F||D&1)&&s!==(s=I[0].capital_scheme_id+"")&&H(f,s),(!F||D&1)&&_!==(_=I[0].funding_programme+"")&&H(T,_);const A={};D&256&&(A.$$scope={dirty:D,ctx:I}),S.$set(A);const E={};D&256&&(E.$$scope={dirty:D,ctx:I}),M.$set(E)},i(I){F||(p(S.$$.fragment,I),p(M.$$.fragment,I),F=!0)},o(I){d(S.$$.fragment,I),d(M.$$.fragment,I),F=!1},d(I){I&&(g(e),g(l),g(i),g(u),g(c),g(k),g(C)),v(S),v(M)}}}function n$(r){let e,n;return e=new Oe({props:{label:`${r[0].scheme_reference}: ${r[0].num_features} features`,$$slots:{default:[t$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&1&&(l.label=`${t[0].scheme_reference}: ${t[0].num_features} features`),o&257&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function r$(r,e,n){let t,o;pe(r,nt,c=>n(6,t=c)),pe(r,gt,c=>n(7,o=c));let{scheme:l}=e,{authorityNames:i}=e,a=!i.has(l.authority_or_region),s=a?"This scheme doesn't have an authority specified correctly, so you can't edit this scheme. We're working to fix this problem.":void 0;function f(){let c={type:"FeatureCollection",features:t.features.filter($=>$.properties.scheme_reference==l.scheme_reference)};o==null||o.fitBounds(Kr(c),{padding:20,animate:!1})}function u(){let c={type:"FeatureCollection",features:t.features.filter(_=>_.properties.scheme_reference==l.scheme_reference)},$=l.authority_or_region;window.localStorage.setItem($,JSON.stringify(c)),window.open(`scheme.html?authority=${l.authority_or_region}`,"_blank")}return r.$$set=c=>{"scheme"in c&&n(0,l=c.scheme),"authorityNames"in c&&n(5,i=c.authorityNames)},[l,a,s,f,u,i]}class o$ extends G{constructor(e){super(),z(this,e,r$,n$,U,{scheme:0,authorityNames:5})}}const l$=["Adur","Allerdale","Amber Valley","Arun","Ashfield","Ashford","Babergh","Barking and Dagenham","Barnet","Barnsley","Barrow-in-Furness","Basildon","Basingstoke and Deane","Bassetlaw","Bath and North East Somerset","Bedford","Bexley","Birmingham","Blaby","Blackburn with Darwen","Blackpool","Bolsover","Bolton","Boston","Bournemouth, Christchurch and Poole","Bracknell Forest","Bradford","Braintree","Breckland","Brent","Brentwood","Brighton and Hove","Bristol, City of","Broadland","Bromley","Bromsgrove","Broxbourne","Broxtowe","Buckinghamshire","Burnley","Bury","Calderdale","Cambridge","Cambridgeshire and Peterborough Combined Authority","Camden","Cannock Chase","Canterbury","Carlisle","Castle Point","Central Bedfordshire","Charnwood","Chelmsford","Cheltenham","Cherwell","Cheshire East","Cheshire West and Chester","Chesterfield","Chichester","Chorley","City of London","Colchester","Copeland","Cornwall","Cotswold","County Durham","Coventry","Craven","Crawley","Croydon","Cumbria","Dacorum","Darlington","Dartford","Derby","Derbyshire","Derbyshire Dales","Devon","Doncaster","Dorset","Dover","Dudley","Ealing","Eastbourne","East Cambridgeshire","East Devon","East Hampshire","East Hertfordshire","Eastleigh","East Lindsey","East Riding of Yorkshire","East Staffordshire","East Suffolk","East Sussex","Eden","Elmbridge","Enfield","Epping Forest","Epsom and Ewell","Erewash","Essex","Exeter","Fareham","Fenland","Folkestone and Hythe","Forest of Dean","Fylde","Gateshead","Gedling","Gloucester","Gloucestershire","Gosport","Gravesham","Greater London","Greater Manchester Combined Authority","Great Yarmouth","Greenwich","Guildford","Hackney","Halton","Hambleton","Hammersmith and Fulham","Hampshire","Harborough","Haringey","Harlow","Harrogate","Harrow","Hart","Hartlepool","Hastings","Havant","Havering","Herefordshire","Herefordshire, County of","Hertfordshire","Hertsmere","High Peak","Hillingdon","Hinckley and Bosworth","Horsham","Hounslow","Huntingdonshire","Hyndburn","Ipswich","Isle of Wight","Isles of Scilly","Islington","Kensington and Chelsea","Kent","King's Lynn and West Norfolk","Kingston upon Hull","Kingston upon Hull, City of","Kingston upon Thames","Kirklees","Knowsley","Lambeth","Lancashire","Lancaster","Leeds","Leicester","Leicestershire","Lewes","Lewisham","Lichfield","Lincoln","Lincolnshire","Liverpool","Liverpool City Region Combined Authority","Luton","Maidstone","Maldon","Malvern Hills","Manchester","Mansfield","Medway","Melton","Mendip","Merton","Mid Devon","Middlesbrough","Mid Suffolk","Mid Sussex","Milton Keynes","Mole Valley","Newark and Sherwood","Newcastle-under-Lyme","Newcastle upon Tyne","New Forest","Newham","Norfolk","North Devon","North East Derbyshire","North East Joint Transport Committee","North East Lincolnshire","North Hertfordshire","North Kesteven","North Lincolnshire","North Norfolk","North Northamptonshire","North Somerset","North Tyneside","Northumberland","North Warwickshire","North West Leicestershire","North Yorkshire","Norwich","Nottingham","Nottinghamshire","Nuneaton and Bedworth","Oadby and Wigston","Oldham","Oxford","Oxfordshire","Pendle","Peterborough","Plymouth","Portsmouth","Preston","Reading","Redbridge","Redcar and Cleveland","Redditch","Reigate and Banstead","Ribble Valley","Richmondshire","Richmond upon Thames","Rochdale","Rochford","Rossendale","Rother","Rotherham","Rugby","Runnymede","Rushcliffe","Rushmoor","Rutland","Ryedale","Salford","Sandwell","Scarborough","Sedgemoor","Sefton","Selby","Sevenoaks","Sheffield","Sheffield City Region Combined Authority","Shropshire","Slough","Solihull","Somerset","Somerset West and Taunton","Southampton","South Cambridgeshire","South Derbyshire","Southend-on-Sea","South Gloucestershire","South Hams","South Holland","South Kesteven","South Lakeland","South Norfolk","South Oxfordshire","South Ribble","South Somerset","South Staffordshire","South Tyneside","Southwark","Spelthorne","Stafford","Staffordshire","Staffordshire Moorlands","St Albans","Stevenage","St. Helens","Stockport","Stockton-on-Tees","Stoke-on-Trent","Stratford-on-Avon","Stroud","Suffolk","Sunderland","Surrey","Surrey Heath","Sutton","Swale","Swindon","Tameside","Tamworth","Tandridge","Tees Valley Combined Authority","Teignbridge","Telford and Wrekin","Tendring","Test Valley","Tewkesbury","Thanet","Three Rivers","Thurrock","Tonbridge and Malling","Torbay","Torridge","Tower Hamlets","Trafford","Tunbridge Wells","Uttlesford","Vale of White Horse","Wakefield","Walsall","Waltham Forest","Wandsworth","Warrington","Warwick","Warwickshire","Watford","Waverley","Wealden","Welwyn Hatfield","West Berkshire","West Devon","West Lancashire","West Lindsey","West Midlands ITA","Westminster","West Northamptonshire","West of England Combined Authority","West Oxfordshire","West Suffolk","West Sussex","West Yorkshire Combined Authority","Wigan","Wiltshire","Winchester","Windsor and Maidenhead","Wirral","Woking","Wokingham","Wolverhampton","Worcester","Worcestershire","Worthing","Wychavon","Wyre","Wyre Forest","York"];function ir(r){let e,n,t=cn(r[0].length_meters)+"",o;return{c(){e=L("p"),n=w("Length: "),o=w(t)},m(l,i){m(l,e,i),y(e,n),y(e,o)},p(l,i){i&1&&t!==(t=cn(l[0].length_meters)+"")&&H(o,t)},d(l){l&&g(e)}}}function ar(r){let e,n=r[1](r[0].description)+"";return{c(){e=L("p")},m(t,o){m(t,e,o),e.innerHTML=n},p(t,o){o&1&&n!==(n=t[1](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&g(e)}}}function s$(r){let e,n,t,o=r[1](r[0].name)+"",l,i=r[0].intervention_type+"",a,s,f,u,c,$=r[0].scheme_reference+"",_,T,k,C=r[0].length_meters&&ir(r),S=r[0].description&&ar(r);return{c(){e=L("div"),n=L("h2"),t=new rn(!1),l=w(" ("),a=w(i),s=w(")"),f=O(),u=L("p"),c=w("Scheme reference: "),_=w($),T=O(),C&&C.c(),k=O(),S&&S.c(),t.a=l,Ae(e,"max-width","30vw")},m(P,M){m(P,e,M),y(e,n),t.m(o,n),y(n,l),y(n,a),y(n,s),y(e,f),y(e,u),y(u,c),y(u,_),y(e,T),C&&C.m(e,null),y(e,k),S&&S.m(e,null)},p(P,[M]){M&1&&o!==(o=P[1](P[0].name)+"")&&t.p(o),M&1&&i!==(i=P[0].intervention_type+"")&&H(a,i),M&1&&$!==($=P[0].scheme_reference+"")&&H(_,$),P[0].length_meters?C?C.p(P,M):(C=ir(P),C.c(),C.m(e,k)):C&&(C.d(1),C=null),P[0].description?S?S.p(P,M):(S=ar(P),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},i:Q,o:Q,d(P){P&&g(e),C&&C.d(),S&&S.d()}}}function i$(r,e,n){let{props:t}=e,{filterText:o}=e;function l(i){return o?i.replace(new RegExp(o,"gi"),a=>`<mark>${a}</mark>`):i}return r.$$set=i=>{"props"in i&&n(0,t=i.props),"filterText"in i&&n(2,o=i.filterText)},[t,l,o]}class an extends G{constructor(e){super(),z(this,e,i$,s$,U,{props:0,filterText:2})}}function a$(r){let e,n;return e=new an({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&128&&(l.props=t[7]),o&2&&(l.filterText=t[1]),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function f$(r){let e,n;return e=new ee({props:{$$slots:{default:[a$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&386&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function u$(r){let e,n;return e=new an({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&128&&(l.props=t[7]),o&2&&(l.filterText=t[1]),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function c$(r){let e,n;return e=new ee({props:{$$slots:{default:[u$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&386&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $$(r){let e,n;return e=new an({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&128&&(l.props=t[7]),o&2&&(l.filterText=t[1]),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function p$(r){let e,n;return e=new ee({props:{$$slots:{default:[$$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&386&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function m$(r){let e,n,t,o,l,i,a,s,f,u;return e=new Ge({props:{id:"interventions-points",filter:["all",Jr,r[4],r[5]],paint:{"circle-color":r[3],"circle-radius":br},layout:{visibility:r[0]?"visible":"none"},$$slots:{default:[f$]},$$scope:{ctx:r}}}),t=new fe({props:{id:"interventions-lines",filter:["all",Zr,r[4]],paint:{"line-color":r[3],"line-width":Ft},layout:{visibility:r[0]?"visible":"none"},$$slots:{default:[c$]},$$scope:{ctx:r}}}),l=new Ge({props:{id:"interventions-lines-endpoints",filter:["==","endpoint",!0],paint:{"circle-radius":.5*Ft,"circle-opacity":0,"circle-stroke-color":hr.lineEndpointColor,"circle-stroke-width":2},layout:{visibility:r[0]?"visible":"none"}}}),a=new Fe({props:{id:"interventions-polygons",filter:["all",$n,r[4]],paint:{"fill-color":r[3],"fill-opacity":.2},layout:{visibility:r[0]?"visible":"none"},$$slots:{default:[p$]},$$scope:{ctx:r}}}),f=new fe({props:{id:"interventions-polygons-outlines",filter:["all",$n,r[4]],paint:{"line-color":r[3],"line-opacity":.5,"line-width":.7*Ft},layout:{visibility:r[0]?"visible":"none"}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),o=O(),h(l.$$.fragment),i=O(),h(a.$$.fragment),s=O(),h(f.$$.fragment)},m(c,$){b(e,c,$),m(c,n,$),b(t,c,$),m(c,o,$),b(l,c,$),m(c,i,$),b(a,c,$),m(c,s,$),b(f,c,$),u=!0},p(c,$){const _={};$&1&&(_.layout={visibility:c[0]?"visible":"none"}),$&258&&(_.$$scope={dirty:$,ctx:c}),e.$set(_);const T={};$&1&&(T.layout={visibility:c[0]?"visible":"none"}),$&258&&(T.$$scope={dirty:$,ctx:c}),t.$set(T);const k={};$&1&&(k.layout={visibility:c[0]?"visible":"none"}),l.$set(k);const C={};$&1&&(C.layout={visibility:c[0]?"visible":"none"}),$&258&&(C.$$scope={dirty:$,ctx:c}),a.$set(C);const S={};$&1&&(S.layout={visibility:c[0]?"visible":"none"}),f.$set(S)},i(c){u||(p(e.$$.fragment,c),p(t.$$.fragment,c),p(l.$$.fragment,c),p(a.$$.fragment,c),p(f.$$.fragment,c),u=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(l.$$.fragment,c),d(a.$$.fragment,c),d(f.$$.fragment,c),u=!1},d(c){c&&(g(n),g(o),g(i),g(s)),v(e,c),v(t,c),v(l,c),v(a,c),v(f,c)}}}function g$(r){let e,n;return e=new at({props:{data:r[2],$$slots:{default:[m$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&4&&(l.data=t[2]),o&259&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _$(r,e,n){let t,o;pe(r,nt,u=>n(6,o=u));let{showSchemes:l}=e,{filterText:i}=e,a=vr("v1");const s=["!=","hide_while_editing",!0],f=["!=","endpoint",!0];return r.$$set=u=>{"showSchemes"in u&&n(0,l=u.showSchemes),"filterText"in u&&n(1,i=u.filterText)},r.$$.update=()=>{r.$$.dirty&64&&n(2,t=Yr(o))},[l,i,t,a,s,f,o]}class d$ extends G{constructor(e){super(),z(this,e,_$,g$,U,{showSchemes:0,filterText:1})}}function fr(r,e,n){const t=r.slice();return t[13]=e[n],t}function h$(r){let e,n;return e=new Qc({props:{loadFile:r[8]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:Q,i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ur(r){let e,n,t,o,l;function i(u){r[9](u)}function a(u){r[10](u)}function s(u){r[11](u)}let f={schemes:r[1]};return r[2]!==void 0&&(f.schemesToBeShown=r[2]),r[3]!==void 0&&(f.filterText=r[3]),r[4]!==void 0&&(f.show=r[4]),e=new Ys({props:f}),V.push(()=>Y(e,"schemesToBeShown",i)),V.push(()=>Y(e,"filterText",a)),V.push(()=>Y(e,"show",s)),{c(){h(e.$$.fragment)},m(u,c){b(e,u,c),l=!0},p(u,c){const $={};c&2&&($.schemes=u[1]),!n&&c&4&&(n=!0,$.schemesToBeShown=u[2],J(()=>n=!1)),!t&&c&8&&(t=!0,$.filterText=u[3],J(()=>t=!1)),!o&&c&16&&(o=!0,$.show=u[4],J(()=>o=!1)),e.$set($)},i(u){l||(p(e.$$.fragment,u),l=!0)},o(u){d(e.$$.fragment,u),l=!1},d(u){v(e,u)}}}function cr(r){let e,n;return e=new o$({props:{scheme:r[13],authorityNames:r[7]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.scheme=t[13]),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $r(r){let e=r[2].has(r[13].scheme_reference),n,t,o=e&&cr(r);return{c(){o&&o.c(),n=ve()},m(l,i){o&&o.m(l,i),m(l,n,i),t=!0},p(l,i){i&6&&(e=l[2].has(l[13].scheme_reference)),e?o?(o.p(l,i),i&6&&p(o,1)):(o=cr(l),o.c(),p(o,1),o.m(n.parentNode,n)):o&&(re(),d(o,1,1,()=>{o=null}),oe())},i(l){t||(p(o),t=!0)},o(l){d(o),t=!1},d(l){l&&g(n),o&&o.d(l)}}}function b$(r){let e,n,t,o,l,i,a,s,f,u,c=nn()=="Private (development)",$,_,T,k,C,S,P,M;l=new uo({props:{boundaryGeojson:r[5]}}),a=new Fo({}),f=new Qr({});let F=c&&h$(r);_=new co({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[8]}}),k=new _r({props:{errorMessage:r[0]}});let I=r[1].size>0&&ur(r),D=Me(r[1].values()),A=[];for(let N=0;N<D.length;N+=1)A[N]=$r(fr(r,D,N));const E=N=>d(A[N],1,1,()=>{A[N]=null});return{c(){e=L("div"),n=L("div"),t=L("h1"),t.textContent="Browse schemes",o=O(),h(l.$$.fragment),i=O(),h(a.$$.fragment),s=O(),h(f.$$.fragment),u=O(),F&&F.c(),$=O(),h(_.$$.fragment),T=O(),h(k.$$.fragment),C=O(),I&&I.c(),S=O(),P=L("ul");for(let N=0;N<A.length;N+=1)A[N].c();Ae(n,"display","flex"),Ae(n,"justify-content","space-between"),K(e,"slot","sidebar"),K(e,"class","govuk-prose")},m(N,R){m(N,e,R),y(e,n),y(n,t),y(n,o),b(l,n,null),y(e,i),b(a,e,null),y(e,s),b(f,e,null),y(e,u),F&&F.m(e,null),y(e,$),b(_,e,null),y(e,T),b(k,e,null),y(e,C),I&&I.m(e,null),y(e,S),y(e,P);for(let B=0;B<A.length;B+=1)A[B]&&A[B].m(P,null);M=!0},p(N,R){const B={};R&32&&(B.boundaryGeojson=N[5]),l.$set(B),c&&F.p(N,R);const W={};if(R&1&&(W.errorMessage=N[0]),k.$set(W),N[1].size>0?I?(I.p(N,R),R&2&&p(I,1)):(I=ur(N),I.c(),p(I,1),I.m(e,S)):I&&(re(),d(I,1,1,()=>{I=null}),oe()),R&134){D=Me(N[1].values());let q;for(q=0;q<D.length;q+=1){const se=fr(N,D,q);A[q]?(A[q].p(se,R),p(A[q],1)):(A[q]=$r(se),A[q].c(),p(A[q],1),A[q].m(P,null))}for(re(),q=D.length;q<A.length;q+=1)E(q);oe()}},i(N){if(!M){p(l.$$.fragment,N),p(a.$$.fragment,N),p(f.$$.fragment,N),p(F),p(_.$$.fragment,N),p(k.$$.fragment,N),p(I);for(let R=0;R<D.length;R+=1)p(A[R]);M=!0}},o(N){d(l.$$.fragment,N),d(a.$$.fragment,N),d(f.$$.fragment,N),d(F),d(_.$$.fragment,N),d(k.$$.fragment,N),d(I),A=A.filter(Boolean);for(let R=0;R<A.length;R+=1)d(A[R]);M=!1},d(N){N&&g(e),v(l),v(a),v(f),F&&F.d(),v(_),v(k),I&&I.d(),wt(A,N)}}}function v$(r){let e,n,t,o,l;return e=new d$({props:{filterText:r[3],showSchemes:r[4]}}),o=new Jc({}),{c(){h(e.$$.fragment),n=O(),t=L("div"),h(o.$$.fragment),K(t,"class","top-right svelte-u44ed2")},m(i,a){b(e,i,a),m(i,n,a),m(i,t,a),b(o,t,null),l=!0},p(i,a){const s={};a&8&&(s.filterText=i[3]),a&16&&(s.showSchemes=i[4]),e.$set(s)},i(i){l||(p(e.$$.fragment,i),p(o.$$.fragment,i),l=!0)},o(i){d(e.$$.fragment,i),d(o.$$.fragment,i),l=!1},d(i){i&&(g(n),g(t)),v(e,i),v(o)}}}function w$(r){let e,n,t;return n=new so({props:{style:r[6],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[v$]},$$scope:{ctx:r}}}),{c(){e=L("div"),h(n.$$.fragment),K(e,"slot","main")},m(o,l){m(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&64&&(i.style=o[6]),l&65560&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(p(n.$$.fragment,o),t=!0)},o(o){d(n.$$.fragment,o),t=!1},d(o){o&&g(e),v(n)}}}function k$(r){let e,n;return e=new lo({props:{$$slots:{main:[w$],sidebar:[b$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&65663&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function y$(r,e,n){let t,o;pe(r,nt,C=>n(5,t=C)),pe(r,pn,C=>n(6,o=C));let l=new Set(l$);it(()=>{xr()});const i=new URLSearchParams(window.location.search);pn.set(i.get("style")||"dataviz");let a="",s=new Map,f=new Set,u="",c=!0;function $(C){try{nt.set(JSON.parse(C)),n(1,s=js(t)),n(0,a="")}catch(S){n(0,a=`The file you loaded is broken: ${S}`)}}function _(C){f=C,n(2,f)}function T(C){u=C,n(3,u)}function k(C){c=C,n(4,c)}return[a,s,f,u,c,t,o,l,$,_,T,k]}class S$ extends G{constructor(e){super(),z(this,e,y$,k$,U,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new S$({target:document.getElementById("app")});
