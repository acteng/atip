import{S as Z,i as K,s as V,a5 as Qe,j as h,t as $,y as pe,n as g,o as me,p as d,H as co,Q as q,a8 as Xt,aS as Ot,x as ne,aK as $t,aL as gt,aM as _t,aN as bt,b as G,c as x,g as b,m as v,l as X,q as y,aT as $e,aU as po,aV as mo,r as Ft,aW as nt,e as N,u as w,d as I,k as E,f as _r,aq as ho,C as he,ar as Ln,W as St,F as Tn,a as lr,h as ee,v as Or,w as br,I as Le,aX as Se,aY as ge,$ as Ue,G as Pe,aR as H,J as ot,N as Je,K as Zt,V as Ct,aZ as st,a_ as $o,a1 as On,a0 as Mt,E as An,R as In,a$ as vr,b0 as Ar,D as go,L as _o,z as bo,aH as vo}from"./index-73f03f95.js";import{H as ue,L as yo,d as Ir,c as Dn,C as Ee,B as wo,Z as ko,I as So}from"./schemas-4bcfaebb.js";import{g as Bt,u as Co,f as Lo,m as To,e as Kt,C as Ye,b as jt,d as le,a as Oo,S as Ao,L as Io,M as Do}from"./StreetViewController-2cbb0f4e.js";import{I as fe,F as Eo}from"./InteractiveLayer-e40bdd0d.js";function Dr(r){let e;return t=>{if(t)for(let n in t){let o=e==null?void 0:e[n],s=t[n];o!==s&&r(n,s,o)}else if(e)for(let n in e)r(n,void 0,e[n]);e=t}}function Mo(r,...e){let t=[r];for(let n of e)if(n)Array.isArray(n)&&n[0]===r?t.push(...n.slice(1)):t.push(n);else continue;if(t.length!==1)return t.length===2?t[1]:t}function Po(r){return r===!0?["has","point_count"]:r===!1?["!",["has","point_count"]]:void 0}function En(r,e){return["case",["boolean",["feature-state","hover"],!1],e,r]}var ar=No;function No(r){var e,t,n;if(r){if(Array.isArray(r)){for(e=[],t=r.length,n=0;n<t;n++){var o=r[n];o!=null&&e.push(o)}return e}if(typeof r=="object"){e={};var s=Object.keys(r);for(t=s.length,n=0;n<t;n++){var l=s[n],a=r[l];a!=null&&(e[l]=a)}return e}}}function Er(r){let e=r[0],t,n,o=Mr(r);return{c(){o.c(),t=Qe()},m(s,l){o.m(s,l),h(s,t,l),n=!0},p(s,l){l[0]&1&&V(e,e=s[0])?(pe(),g(o,1,1,ne),me(),o=Mr(s),o.c(),$(o,1),o.m(t.parentNode,t)):o.p(s,l)},i(s){n||($(o),n=!0)},o(s){g(o),n=!1},d(s){s&&d(t),o.d(s)}}}function Mr(r){let e;const t=r[35].default,n=$t(t,r,r[34],null);return{c(){n&&n.c()},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s[1]&8)&&gt(n,t,o,o[34],e?bt(t,o[34],s,null):_t(o[34]),null)},i(o){e||($(n,o),e=!0)},o(o){g(n,o),e=!1},d(o){n&&n.d(o)}}}function Fo(r){let e,t,n=r[0]&&Er(r);return{c(){n&&n.c(),e=Qe()},m(o,s){n&&n.m(o,s),h(o,e,s),t=!0},p(o,s){o[0]?n?(n.p(o,s),s[0]&1&&$(n,1)):(n=Er(o),n.c(),$(n,1),n.m(e.parentNode,e)):n&&(pe(),g(n,1,1,()=>{n=null}),me())},i(o){t||($(n),t=!0)},o(o){g(n),t=!1},d(o){o&&d(e),n&&n.d(o)}}}function Bo(r,e,t){let n,o,s,l,a,i,u,f,c,p,m,_,{$$slots:k={},$$scope:L}=e,{id:T=Bt("layer")}=e,{source:D=void 0}=e,{sourceLayer:B=void 0}=e,{beforeId:C=void 0}=e,{beforeLayerType:A=void 0}=e,{type:j}=e,{paint:M=void 0}=e,{layout:P=void 0}=e,{filter:O=void 0}=e,{applyToClusters:S=void 0}=e,{minzoom:R=void 0}=e,{maxzoom:U=void 0}=e,{manageHoverState:W=!0}=e,{hovered:te=null}=e,{hoverCursor:ce=void 0}=e,{eventsIfTopMost:J=!1}=e;const ie=co(),{map:se,source:_e,self:be,minzoom:Me,maxzoom:de,eventTopMost:Te}=Co();q(r,se,z=>t(30,c=z)),q(r,_e,z=>t(31,p=z)),q(r,be,z=>t(0,f=z)),q(r,Me,z=>t(33,_=z)),q(r,de,z=>t(32,m=z)),Xt(()=>{f&&c&&(c==null||c.removeLayer(f))});let ae;return r.$$set=z=>{"id"in z&&t(7,T=z.id),"source"in z&&t(8,D=z.source),"sourceLayer"in z&&t(9,B=z.sourceLayer),"beforeId"in z&&t(10,C=z.beforeId),"beforeLayerType"in z&&t(11,A=z.beforeLayerType),"type"in z&&t(12,j=z.type),"paint"in z&&t(13,M=z.paint),"layout"in z&&t(14,P=z.layout),"filter"in z&&t(15,O=z.filter),"applyToClusters"in z&&t(16,S=z.applyToClusters),"minzoom"in z&&t(17,R=z.minzoom),"maxzoom"in z&&t(18,U=z.maxzoom),"manageHoverState"in z&&t(19,W=z.manageHoverState),"hovered"in z&&t(6,te=z.hovered),"hoverCursor"in z&&t(20,ce=z.hoverCursor),"eventsIfTopMost"in z&&t(21,J=z.eventsIfTopMost),"$$scope"in z&&t(34,L=z.$$scope)},r.$$.update=()=>{if(r.$$.dirty[0]&65536&&t(29,n=Po(S)),r.$$.dirty[0]&536903680&&t(28,o=Mo("all",n,O)),r.$$.dirty[0]&131072|r.$$.dirty[1]&4&&t(24,s=R??_),r.$$.dirty[0]&262144|r.$$.dirty[1]&2&&t(23,l=U??m),r.$$.dirty[0]&256|r.$$.dirty[1]&1&&t(27,a=D||p),r.$$.dirty[0]&1509457537&&c&&f!==T&&a){let z=function(re){var Ne,Fe;if(!f||!c||J&&Te(re)!==f)return;let F=re.features??[],Ce=(Fe=(Ne=F[0])==null?void 0:Ne.properties)==null?void 0:Fe.cluster_id,ye={event:re,map:c,clusterId:Ce,layer:f,source:a,features:F};ie(re.type,ye)},ve=C;if(!C&&A){let re=c.getStyle().layers,F=typeof A=="function"?A:ye=>ye.type===A,Ce=re==null?void 0:re.find(F);Ce&&(ve=Ce.id)}Ot(be,f=T,f),c.addLayer(ar({id:f,type:j,source:a,"source-layer":B,filter:o,paint:M,layout:P,minzoom:s,maxzoom:l}),ve),c.on("click",f,z),c.on("dblclick",f,z),c.on("contextmenu",f,z),c.on("mouseenter",f,re=>{var Ne,Fe;if(!f||!c||J&&Te(re)!==f)return;ce&&(c.getCanvas().style.cursor=ce);let F=re.features??[];t(6,te=F[0]??null);let Ce=(Fe=(Ne=F[0])==null?void 0:Ne.properties)==null?void 0:Fe.cluster_id;ie("mouseenter",{event:re,map:c,clusterId:Ce,layer:f,source:a,features:F})}),c.on("mousemove",f,re=>{var Ne,Fe,Tr;if(J&&Te(re)!==f)return;let F=re.features??[],Ce=(Fe=(Ne=F[0])==null?void 0:Ne.properties)==null?void 0:Fe.cluster_id,ye=(Tr=F[0])==null?void 0:Tr.id;ye!==ae&&(W&&(ae!==void 0&&(c==null||c.setFeatureState({source:a,id:ae},{hover:!1})),c==null||c.setFeatureState({source:a,id:ye},{hover:!0})),t(22,ae=ye),t(6,te=F[0]??null)),ie("mousemove",{event:re,map:c,clusterId:Ce,layer:f,source:a,features:F})}),c.on("mouseleave",f,re=>{!f||!c||(ce&&(c.getCanvas().style.cursor=""),t(6,te=null),W&&ae!==void 0&&(c==null||c.setFeatureState({source:a,id:ae},{hover:!1}),t(22,ae=void 0)),ie("mouseleave",{map:c,layer:f,source:a}))})}r.$$.dirty[0]&1073741825&&t(26,i=f?Dr((z,ve)=>c==null?void 0:c.setPaintProperty(f,z,ve)):void 0),r.$$.dirty[0]&1073741825&&t(25,u=f?Dr((z,ve)=>c==null?void 0:c.setLayoutProperty(f,z,ve)):void 0),r.$$.dirty[0]&67117056&&(i==null||i(M)),r.$$.dirty[0]&33570816&&(u==null||u(P)),r.$$.dirty[0]&1098907649&&f&&(c==null||c.setLayerZoomRange(f,s,l))},[f,se,_e,be,Me,de,te,T,D,B,C,A,j,M,P,O,S,R,U,W,ce,J,ae,l,s,u,i,a,o,n,c,p,m,_,L,k]}class yr extends Z{constructor(e){super(),K(this,e,Bo,Fo,V,{id:7,source:8,sourceLayer:9,beforeId:10,beforeLayerType:11,type:12,paint:13,layout:14,filter:15,applyToClusters:16,minzoom:17,maxzoom:18,manageHoverState:19,hovered:6,hoverCursor:20,eventsIfTopMost:21},null,[-1,-1])}}function jo(r){let e;const t=r[14].default,n=$t(t,r,r[22],null);return{c(){n&&n.c()},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&4194304)&&gt(n,t,o,o[22],e?bt(t,o[22],s,null):_t(o[22]),null)},i(o){e||($(n,o),e=!0)},o(o){g(n,o),e=!1},d(o){n&&n.d(o)}}}function zo(r){let e,t,n;function o(l){r[15](l)}let s={id:r[1],type:"circle",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],eventsIfTopMost:r[13],$$slots:{default:[jo]},$$scope:{ctx:r}};return r[0]!==void 0&&(s.hovered=r[0]),e=new yr({props:s}),G.push(()=>x(e,"hovered",o)),e.$on("click",r[16]),e.$on("dblclick",r[17]),e.$on("contextmenu",r[18]),e.$on("mouseenter",r[19]),e.$on("mousemove",r[20]),e.$on("mouseleave",r[21]),{c(){b(e.$$.fragment)},m(l,a){v(e,l,a),n=!0},p(l,[a]){const i={};a&2&&(i.id=l[1]),a&4&&(i.source=l[2]),a&8&&(i.sourceLayer=l[3]),a&16&&(i.beforeId=l[4]),a&32&&(i.beforeLayerType=l[5]),a&64&&(i.paint=l[6]),a&128&&(i.layout=l[7]),a&256&&(i.filter=l[8]),a&512&&(i.applyToClusters=l[9]),a&1024&&(i.minzoom=l[10]),a&2048&&(i.maxzoom=l[11]),a&4096&&(i.hoverCursor=l[12]),a&8192&&(i.eventsIfTopMost=l[13]),a&4194304&&(i.$$scope={dirty:a,ctx:l}),!t&&a&1&&(t=!0,i.hovered=l[0],X(()=>t=!1)),e.$set(i)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){y(e,l)}}}function Ro(r,e,t){let{$$slots:n={},$$scope:o}=e,{id:s=Bt("circle")}=e,{source:l=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:u=void 0}=e,{paint:f}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{applyToClusters:m=void 0}=e,{minzoom:_=void 0}=e,{maxzoom:k=void 0}=e,{hoverCursor:L=void 0}=e,{hovered:T=null}=e,{eventsIfTopMost:D=!1}=e;function B(S){T=S,t(0,T)}function C(S){$e.call(this,r,S)}function A(S){$e.call(this,r,S)}function j(S){$e.call(this,r,S)}function M(S){$e.call(this,r,S)}function P(S){$e.call(this,r,S)}function O(S){$e.call(this,r,S)}return r.$$set=S=>{"id"in S&&t(1,s=S.id),"source"in S&&t(2,l=S.source),"sourceLayer"in S&&t(3,a=S.sourceLayer),"beforeId"in S&&t(4,i=S.beforeId),"beforeLayerType"in S&&t(5,u=S.beforeLayerType),"paint"in S&&t(6,f=S.paint),"layout"in S&&t(7,c=S.layout),"filter"in S&&t(8,p=S.filter),"applyToClusters"in S&&t(9,m=S.applyToClusters),"minzoom"in S&&t(10,_=S.minzoom),"maxzoom"in S&&t(11,k=S.maxzoom),"hoverCursor"in S&&t(12,L=S.hoverCursor),"hovered"in S&&t(0,T=S.hovered),"eventsIfTopMost"in S&&t(13,D=S.eventsIfTopMost),"$$scope"in S&&t(22,o=S.$$scope)},[T,s,l,a,i,u,f,c,p,m,_,k,L,D,n,B,C,A,j,M,P,O,o]}class Ho extends Z{constructor(e){super(),K(this,e,Ro,zo,V,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,hovered:0,eventsIfTopMost:13})}}function Uo(r){let e;const t=r[13].default,n=$t(t,r,r[21],null);return{c(){n&&n.c()},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&2097152)&&gt(n,t,o,o[21],e?bt(t,o[21],s,null):_t(o[21]),null)},i(o){e||($(n,o),e=!0)},o(o){g(n,o),e=!1},d(o){n&&n.d(o)}}}function Wo(r){let e,t,n;function o(l){r[14](l)}let s={id:r[1],type:"fill",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],minzoom:r[9],maxzoom:r[10],hoverCursor:r[11],eventsIfTopMost:r[12],$$slots:{default:[Uo]},$$scope:{ctx:r}};return r[0]!==void 0&&(s.hovered=r[0]),e=new yr({props:s}),G.push(()=>x(e,"hovered",o)),e.$on("click",r[15]),e.$on("dblclick",r[16]),e.$on("contextmenu",r[17]),e.$on("mouseenter",r[18]),e.$on("mousemove",r[19]),e.$on("mouseleave",r[20]),{c(){b(e.$$.fragment)},m(l,a){v(e,l,a),n=!0},p(l,[a]){const i={};a&2&&(i.id=l[1]),a&4&&(i.source=l[2]),a&8&&(i.sourceLayer=l[3]),a&16&&(i.beforeId=l[4]),a&32&&(i.beforeLayerType=l[5]),a&64&&(i.paint=l[6]),a&128&&(i.layout=l[7]),a&256&&(i.filter=l[8]),a&512&&(i.minzoom=l[9]),a&1024&&(i.maxzoom=l[10]),a&2048&&(i.hoverCursor=l[11]),a&4096&&(i.eventsIfTopMost=l[12]),a&2097152&&(i.$$scope={dirty:a,ctx:l}),!t&&a&1&&(t=!0,i.hovered=l[0],X(()=>t=!1)),e.$set(i)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){y(e,l)}}}function Vo(r,e,t){let{$$slots:n={},$$scope:o}=e,{id:s=Bt("fill")}=e,{source:l=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:u=void 0}=e,{paint:f}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{minzoom:m=void 0}=e,{maxzoom:_=void 0}=e,{hoverCursor:k=void 0}=e,{hovered:L=null}=e,{eventsIfTopMost:T=!1}=e;function D(O){L=O,t(0,L)}function B(O){$e.call(this,r,O)}function C(O){$e.call(this,r,O)}function A(O){$e.call(this,r,O)}function j(O){$e.call(this,r,O)}function M(O){$e.call(this,r,O)}function P(O){$e.call(this,r,O)}return r.$$set=O=>{"id"in O&&t(1,s=O.id),"source"in O&&t(2,l=O.source),"sourceLayer"in O&&t(3,a=O.sourceLayer),"beforeId"in O&&t(4,i=O.beforeId),"beforeLayerType"in O&&t(5,u=O.beforeLayerType),"paint"in O&&t(6,f=O.paint),"layout"in O&&t(7,c=O.layout),"filter"in O&&t(8,p=O.filter),"minzoom"in O&&t(9,m=O.minzoom),"maxzoom"in O&&t(10,_=O.maxzoom),"hoverCursor"in O&&t(11,k=O.hoverCursor),"hovered"in O&&t(0,L=O.hovered),"eventsIfTopMost"in O&&t(12,T=O.eventsIfTopMost),"$$scope"in O&&t(21,o=O.$$scope)},[L,s,l,a,i,u,f,c,p,m,_,k,T,n,D,B,C,A,j,M,P,o]}class Mn extends Z{constructor(e){super(),K(this,e,Vo,Wo,V,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,hovered:0,eventsIfTopMost:12})}}function Pr(r){let e=r[0],t,n,o=Nr(r);return{c(){o.c(),t=Qe()},m(s,l){o.m(s,l),h(s,t,l),n=!0},p(s,l){l&1&&V(e,e=s[0])?(pe(),g(o,1,1,ne),me(),o=Nr(s),o.c(),$(o,1),o.m(t.parentNode,t)):o.p(s,l)},i(s){n||($(o),n=!0)},o(s){g(o),n=!1},d(s){s&&d(t),o.d(s)}}}function Nr(r){let e;const t=r[15].default,n=$t(t,r,r[14],null);return{c(){n&&n.c()},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&16384)&&gt(n,t,o,o[14],e?bt(t,o[14],s,null):_t(o[14]),null)},i(o){e||($(n,o),e=!0)},o(o){g(n,o),e=!1},d(o){n&&n.d(o)}}}function Go(r){let e,t,n=r[0]&&Pr(r);return{c(){n&&n.c(),e=Qe()},m(o,s){n&&n.m(o,s),h(o,e,s),t=!0},p(o,[s]){o[0]?n?(n.p(o,s),s&1&&$(n,1)):(n=Pr(o),n.c(),$(n,1),n.m(e.parentNode,e)):n&&(pe(),g(n,1,1,()=>{n=null}),me())},i(o){t||($(n),t=!0)},o(o){g(n),t=!1},d(o){o&&d(e),n&&n.d(o)}}}function Zo(r,e,t){let n,o,s,{$$slots:l={},$$scope:a}=e,{id:i=Bt("geojson")}=e,{data:u}=e,{generateId:f=!1}=e,{promoteId:c=void 0}=e,{filter:p=void 0}=e,{lineMetrics:m=void 0}=e,{cluster:_=void 0}=e;const{map:k,cluster:L,self:T}=Lo();q(r,k,C=>t(13,n=C)),q(r,L,C=>t(16,s=C)),q(r,T,C=>t(0,o=C));let D,B=!0;return Xt(()=>{if(o){let C=o;Ot(T,o=null,o),t(11,D=void 0),po().then(()=>{n!=null&&n.loaded()&&(n==null||n.removeSource(C))})}}),r.$$set=C=>{"id"in C&&t(4,i=C.id),"data"in C&&t(5,u=C.data),"generateId"in C&&t(6,f=C.generateId),"promoteId"in C&&t(7,c=C.promoteId),"filter"in C&&t(8,p=C.filter),"lineMetrics"in C&&t(9,m=C.lineMetrics),"cluster"in C&&t(10,_=C.cluster),"$$scope"in C&&t(14,a=C.$$scope)},r.$$.update=()=>{r.$$.dirty&1024&&Ot(L,s=_,s),r.$$.dirty&10225&&n&&o!==i&&(o&&n.removeSource(o),Ot(T,o=i,o),n.addSource(o,ar({type:"geojson",data:u,filter:p,lineMetrics:m,generateId:f,promoteId:c,cluster:!!_,clusterMinPoints:_==null?void 0:_.minPoints,clusterMaxZoom:_==null?void 0:_.maxZoom,clusterRadius:_==null?void 0:_.radius,clusterProperties:_==null?void 0:_.properties})),t(11,D=n.getSource(o)),t(12,B=!0)),r.$$.dirty&6176&&D&&(B?t(12,B=!1):D.setData(u)),r.$$.dirty&3072&&(D==null||D.setClusterOptions(ar({cluster:!!_,clusterMaxZoom:_==null?void 0:_.maxZoom,clusterRadius:_==null?void 0:_.radius})))},[o,k,L,T,i,u,f,c,p,m,_,D,B,n,a,l]}class wr extends Z{constructor(e){super(),K(this,e,Zo,Go,V,{id:4,data:5,generateId:6,promoteId:7,filter:8,lineMetrics:9,cluster:10})}}function Ko(r){let e;const t=r[14].default,n=$t(t,r,r[22],null);return{c(){n&&n.c()},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&4194304)&&gt(n,t,o,o[22],e?bt(t,o[22],s,null):_t(o[22]),null)},i(o){e||($(n,o),e=!0)},o(o){g(n,o),e=!1},d(o){n&&n.d(o)}}}function qo(r){let e,t,n;function o(l){r[15](l)}let s={id:r[1],type:"line",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],minzoom:r[9],maxzoom:r[10],hoverCursor:r[11],manageHoverState:r[12],eventsIfTopMost:r[13],$$slots:{default:[Ko]},$$scope:{ctx:r}};return r[0]!==void 0&&(s.hovered=r[0]),e=new yr({props:s}),G.push(()=>x(e,"hovered",o)),e.$on("click",r[16]),e.$on("dblclick",r[17]),e.$on("contextmenu",r[18]),e.$on("mouseenter",r[19]),e.$on("mousemove",r[20]),e.$on("mouseleave",r[21]),{c(){b(e.$$.fragment)},m(l,a){v(e,l,a),n=!0},p(l,[a]){const i={};a&2&&(i.id=l[1]),a&4&&(i.source=l[2]),a&8&&(i.sourceLayer=l[3]),a&16&&(i.beforeId=l[4]),a&32&&(i.beforeLayerType=l[5]),a&64&&(i.paint=l[6]),a&128&&(i.layout=l[7]),a&256&&(i.filter=l[8]),a&512&&(i.minzoom=l[9]),a&1024&&(i.maxzoom=l[10]),a&2048&&(i.hoverCursor=l[11]),a&4096&&(i.manageHoverState=l[12]),a&8192&&(i.eventsIfTopMost=l[13]),a&4194304&&(i.$$scope={dirty:a,ctx:l}),!t&&a&1&&(t=!0,i.hovered=l[0],X(()=>t=!1)),e.$set(i)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){y(e,l)}}}function xo(r,e,t){let{$$slots:n={},$$scope:o}=e,{id:s=Bt("line")}=e,{source:l=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:u=void 0}=e,{paint:f}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{minzoom:m=void 0}=e,{maxzoom:_=void 0}=e,{hoverCursor:k=void 0}=e,{manageHoverState:L=!1}=e,{hovered:T=null}=e,{eventsIfTopMost:D=!1}=e;function B(S){T=S,t(0,T)}function C(S){$e.call(this,r,S)}function A(S){$e.call(this,r,S)}function j(S){$e.call(this,r,S)}function M(S){$e.call(this,r,S)}function P(S){$e.call(this,r,S)}function O(S){$e.call(this,r,S)}return r.$$set=S=>{"id"in S&&t(1,s=S.id),"source"in S&&t(2,l=S.source),"sourceLayer"in S&&t(3,a=S.sourceLayer),"beforeId"in S&&t(4,i=S.beforeId),"beforeLayerType"in S&&t(5,u=S.beforeLayerType),"paint"in S&&t(6,f=S.paint),"layout"in S&&t(7,c=S.layout),"filter"in S&&t(8,p=S.filter),"minzoom"in S&&t(9,m=S.minzoom),"maxzoom"in S&&t(10,_=S.maxzoom),"hoverCursor"in S&&t(11,k=S.hoverCursor),"manageHoverState"in S&&t(12,L=S.manageHoverState),"hovered"in S&&t(0,T=S.hovered),"eventsIfTopMost"in S&&t(13,D=S.eventsIfTopMost),"$$scope"in S&&t(22,o=S.$$scope)},[T,s,l,a,i,u,f,c,p,m,_,k,L,D,n,B,C,A,j,M,P,O,o]}class Pn extends Z{constructor(e){super(),K(this,e,xo,qo,V,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13})}}const Xo=r=>({features:r[0]&16,data:r[0]&16,map:r[0]&4,close:r[0]&1}),Fr=r=>{var e;return{features:r[4],data:(e=r[4])==null?void 0:e[0],map:r[2],close:r[29]}};function Br(r){let e,t,n=(r[4]||r[3]instanceof nt.Marker)&&jr(r);return{c(){e=N("div"),n&&n.c()},m(o,s){h(o,e,s),n&&n.m(e,null),r[30](e),t=!0},p(o,s){o[4]||o[3]instanceof nt.Marker?n?(n.p(o,s),s[0]&24&&$(n,1)):(n=jr(o),n.c(),$(n,1),n.m(e,null)):n&&(pe(),g(n,1,1,()=>{n=null}),me())},i(o){t||($(n),t=!0)},o(o){g(n),t=!1},d(o){o&&d(e),n&&n.d(),r[30](null)}}}function jr(r){let e;const t=r[28].default,n=$t(t,r,r[27],Fr);return{c(){n&&n.c()},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s[0]&134217749)&&gt(n,t,o,o[27],e?bt(t,o[27],s,Xo):_t(o[27]),Fr)},i(o){e||($(n,o),e=!0)},o(o){g(n,o),e=!1},d(o){n&&n.d(o)}}}function Yo(r){let e,t,n=r[8].default&&Br(r);return{c(){n&&n.c(),e=Qe()},m(o,s){n&&n.m(o,s),h(o,e,s),t=!0},p(o,s){o[8].default?n?(n.p(o,s),s[0]&256&&$(n,1)):(n=Br(o),n.c(),$(n,1),n.m(e.parentNode,e)):n&&(pe(),g(n,1,1,()=>{n=null}),me())},i(o){t||($(n),t=!0)},o(o){g(n),t=!1},d(o){o&&d(e),n&&n.d(o)}}}function Jo(r,e,t){let n,o,s,l,a,{$$slots:i={},$$scope:u}=e;const f=mo(i);let{closeButton:c=void 0}=e,{closeOnClickOutside:p=!0}=e,{closeOnClickInside:m=!1}=e,{closeOnMove:_=!1}=e,{openOn:k="click"}=e,{focusAfterOpen:L=!0}=e,{anchor:T=void 0}=e,{offset:D=void 0}=e,{popupClass:B=void 0}=e,{maxWidth:C=void 0}=e,{lngLat:A=void 0}=e,{html:j=void 0}=e,{open:M=!1}=e;const{map:P,popupTarget:O,layerEvent:S}=To();q(r,P,F=>t(2,s=F)),q(r,O,F=>t(3,a=F)),q(r,S,F=>t(26,l=F));const R=["click","dblclick","contextmenu"];let U,W=!1,te;function ce(){if(!U)return;let F=U.getElement();!F||F===te||(te=F,k==="hover"&&(te.style.pointerEvents="none"),te.addEventListener("mouseenter",()=>{t(22,W=!0)},{passive:!0}),te.addEventListener("mouseleave",()=>{t(22,W=!1)},{passive:!0}),te.addEventListener("click",()=>{m&&t(0,M=!1)},{passive:!0}))}Ft(()=>{if(s)return s.on("click",ae),typeof a=="string"&&(s.on("click",a,se),s.on("dblclick",a,se),s.on("contextmenu",a,se),s.on("mousemove",a,Te),s.on("mouseleave",a,de),s.on("touchstart",a,be),s.on("touchend",a,Me)),()=>{s!=null&&s.loaded()&&(U==null||U.remove(),s.off("click",ae),a instanceof nt.Marker?a.getPopup()===U&&a.setPopup(void 0):typeof a=="string"&&(s.off("click",a,se),s.off("dblclick",a,se),s.off("contextmenu",a,se),s.off("mousemove",a,Te),s.off("mouseleave",a,de),s.off("touchstart",a,be),s.off("touchend",a,Me)))}});let J=null,ie="normal";function se(F){F.type===k&&("layerType"in F?F.layerType==="deckgl"?(t(9,A=F.coordinate),t(4,J=F.object?[F.object]:null)):(t(9,A=F.lngLat),t(4,J=F.features??[])):(t(9,A=F.lngLat),t(4,J=F.features??[])),setTimeout(()=>t(0,M=!0)))}let _e=null;function be(F){_e=F.point}function Me(F){if(!_e||k!=="hover")return;let Ce=_e.dist(F.point);_e=null,Ce<3&&(t(9,A=F.lngLat),t(4,J=F.features??[]),U.isOpen()?t(23,ie="justOpened"):(t(23,ie="opening"),t(0,M=!0)))}function de(F){k!=="hover"||_e||ie!=="normal"||(t(0,M=!1),t(4,J=null))}function Te(F){k!=="hover"||_e||ie!=="normal"||(t(0,M=!0),t(4,J=F.features??[]),t(9,A=F.lngLat))}function ae(F){if(ie==="justOpened"){t(23,ie="normal");return}if(!p)return;let Ce=[te,a instanceof nt.Marker?a==null?void 0:a.getElement():null];M&&U.isOpen()&&!Ce.some(ye=>ye==null?void 0:ye.contains(F.originalEvent.target))&&t(0,M=!1)}let z;const ve=()=>t(0,M=!1);function re(F){G[F?"unshift":"push"](()=>{z=F,t(1,z)})}return r.$$set=F=>{"closeButton"in F&&t(10,c=F.closeButton),"closeOnClickOutside"in F&&t(11,p=F.closeOnClickOutside),"closeOnClickInside"in F&&t(12,m=F.closeOnClickInside),"closeOnMove"in F&&t(13,_=F.closeOnMove),"openOn"in F&&t(14,k=F.openOn),"focusAfterOpen"in F&&t(15,L=F.focusAfterOpen),"anchor"in F&&t(16,T=F.anchor),"offset"in F&&t(17,D=F.offset),"popupClass"in F&&t(18,B=F.popupClass),"maxWidth"in F&&t(19,C=F.maxWidth),"lngLat"in F&&t(9,A=F.lngLat),"html"in F&&t(20,j=F.html),"open"in F&&t(0,M=F.open),"$$scope"in F&&t(27,u=F.$$scope)},r.$$.update=()=>{if(r.$$.dirty[0]&7168&&t(25,n=c??(!p&&!m)),r.$$.dirty[0]&36675584&&(U||(t(21,U=new nt.Popup({closeButton:n,closeOnClick:!1,closeOnMove:_,focusAfterOpen:L,maxWidth:C,className:B,anchor:T,offset:D})),te=U.getElement(),U.on("open",()=>{t(0,M=!0),ce()}),U.on("close",F=>{t(0,M=!1)}))),r.$$.dirty[0]&2113544&&U&&a instanceof nt.Marker&&(k==="click"?a.setPopup(U):a.getPopup()===U&&a.setPopup(void 0)),r.$$.dirty[0]&67125248&&R.includes(k)&&(l==null?void 0:l.type)===k&&(se(l),Ot(S,l=null,l)),r.$$.dirty[0]&67125248&&t(24,o=k==="hover"&&((l==null?void 0:l.type)==="mousemove"||(l==null?void 0:l.type)==="mouseenter")),r.$$.dirty[0]&88096768&&k==="hover"&&S&&(o&&l&&(l.layerType==="deckgl"?(t(9,A=l.coordinate),t(4,J=l.object?[l.object]:null)):(t(9,A=l.lngLat),t(4,J=l.features??[]))),t(0,M=(o||W)??!1)),r.$$.dirty[0]&3145730&&(z?U.setDOMContent(z):j&&U.setHTML(j)),r.$$.dirty[0]&2097664&&A&&U.setLngLat(A),r.$$.dirty[0]&10485765&&s){let F=U.isOpen();M&&!F?(U.addTo(s),ie==="opening"&&t(23,ie="justOpened")):!M&&F&&U.remove()}},[M,z,s,a,J,P,O,S,f,A,c,p,m,_,k,L,T,D,B,C,j,U,W,ie,o,n,l,u,i,ve,re]}class kr extends Z{constructor(e){super(),K(this,e,Jo,Yo,V,{closeButton:10,closeOnClickOutside:11,closeOnClickInside:12,closeOnMove:13,openOn:14,focusAfterOpen:15,anchor:16,offset:17,popupClass:18,maxWidth:19,lngLat:9,html:20,open:0},null,[-1,-1])}}function Qo(r){let e;return{c(){e=N("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function es(r){let e,t,n,o,s=r[0]=="Private (development)"&&Qo();return{c(){s&&s.c(),e=I(),t=N("p"),t.textContent="Note the ATF scheme data has not been validated.",n=I(),o=N("p"),o.innerHTML=`Please contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      about any problems, ideas, or feedback for this site.`},m(l,a){s&&s.m(l,a),h(l,e,a),h(l,t,a),h(l,n,a),h(l,o,a)},p:ne,d(l){l&&(d(e),d(t),d(n),d(o)),s&&s.d(l)}}}function ts(r){let e,t,n,o,s,l;return s=new ue({props:{$$slots:{default:[es]},$$scope:{ctx:r}}}),{c(){e=N("p"),t=w("App version: "),n=w(r[0]),o=I(),b(s.$$.fragment)},m(a,i){h(a,e,i),E(e,t),E(e,n),E(e,o),v(s,e,null),l=!0},p(a,[i]){const u={};i&2&&(u.$$scope={dirty:i,ctx:a}),s.$set(u)},i(a){l||($(s.$$.fragment,a),l=!0)},o(a){g(s.$$.fragment,a),l=!1},d(a){a&&d(e),y(s)}}}function rs(r){return[_r()]}class ns extends Z{constructor(e){super(),K(this,e,rs,ts,V,{})}}const os={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Ae=Uint8Array,mt=Uint16Array,Nn=Uint32Array,Fn=new Ae([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Bn=new Ae([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ss=new Ae([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),jn=function(r,e){for(var t=new mt(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var o=new Nn(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)o[s]=s-t[n]<<5|n;return[t,o]},zn=jn(Fn,2),Rn=zn[0],is=zn[1];Rn[28]=258,is[258]=28;var ls=jn(Bn,0),as=ls[0],fr=new mt(32768);for(var oe=0;oe<32768;++oe){var et=(oe&43690)>>>1|(oe&21845)<<1;et=(et&52428)>>>2|(et&13107)<<2,et=(et&61680)>>>4|(et&3855)<<4,fr[oe]=((et&65280)>>>8|(et&255)<<8)>>>1}var At=function(r,e,t){for(var n=r.length,o=0,s=new mt(e);o<n;++o)r[o]&&++s[r[o]-1];var l=new mt(e);for(o=0;o<e;++o)l[o]=l[o-1]+s[o-1]<<1;var a;if(t){a=new mt(1<<e);var i=15-e;for(o=0;o<n;++o)if(r[o])for(var u=o<<4|r[o],f=e-r[o],c=l[r[o]-1]++<<f,p=c|(1<<f)-1;c<=p;++c)a[fr[c]>>>i]=u}else for(a=new mt(n),o=0;o<n;++o)r[o]&&(a[o]=fr[l[r[o]-1]++]>>>15-r[o]);return a},zt=new Ae(288);for(var oe=0;oe<144;++oe)zt[oe]=8;for(var oe=144;oe<256;++oe)zt[oe]=9;for(var oe=256;oe<280;++oe)zt[oe]=7;for(var oe=280;oe<288;++oe)zt[oe]=8;var Hn=new Ae(32);for(var oe=0;oe<32;++oe)Hn[oe]=5;var fs=At(zt,9,1),us=At(Hn,5,1),Jt=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},Be=function(r,e,t){var n=e/8|0;return(r[n]|r[n+1]<<8)>>(e&7)&t},Qt=function(r,e){var t=e/8|0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>(e&7)},cs=function(r){return(r+7)/8|0},Sr=function(r,e,t){(e==null||e<0)&&(e=0),(t==null||t>r.length)&&(t=r.length);var n=new(r.BYTES_PER_ELEMENT==2?mt:r.BYTES_PER_ELEMENT==4?Nn:Ae)(t-e);return n.set(r.subarray(e,t)),n},ps=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Re=function(r,e,t){var n=new Error(e||ps[r]);if(n.code=r,Error.captureStackTrace&&Error.captureStackTrace(n,Re),!t)throw n;return n},ms=function(r,e,t){var n=r.length;if(!n||t&&t.f&&!t.l)return e||new Ae(0);var o=!e||t,s=!t||t.i;t||(t={}),e||(e=new Ae(n*3));var l=function(ve){var re=e.length;if(ve>re){var F=new Ae(Math.max(re*2,ve));F.set(e),e=F}},a=t.f||0,i=t.p||0,u=t.b||0,f=t.l,c=t.d,p=t.m,m=t.n,_=n*8;do{if(!f){a=Be(r,i,1);var k=Be(r,i+1,3);if(i+=3,k)if(k==1)f=fs,c=us,p=9,m=5;else if(k==2){var B=Be(r,i,31)+257,C=Be(r,i+10,15)+4,A=B+Be(r,i+5,31)+1;i+=14;for(var j=new Ae(A),M=new Ae(19),P=0;P<C;++P)M[ss[P]]=Be(r,i+P*3,7);i+=C*3;for(var O=Jt(M),S=(1<<O)-1,R=At(M,O,1),P=0;P<A;){var U=R[Be(r,i,S)];i+=U&15;var L=U>>>4;if(L<16)j[P++]=L;else{var W=0,te=0;for(L==16?(te=3+Be(r,i,3),i+=2,W=j[P-1]):L==17?(te=3+Be(r,i,7),i+=3):L==18&&(te=11+Be(r,i,127),i+=7);te--;)j[P++]=W}}var ce=j.subarray(0,B),J=j.subarray(B);p=Jt(ce),m=Jt(J),f=At(ce,p,1),c=At(J,m,1)}else Re(1);else{var L=cs(i)+4,T=r[L-4]|r[L-3]<<8,D=L+T;if(D>n){s&&Re(0);break}o&&l(u+T),e.set(r.subarray(L,D),u),t.b=u+=T,t.p=i=D*8,t.f=a;continue}if(i>_){s&&Re(0);break}}o&&l(u+131072);for(var ie=(1<<p)-1,se=(1<<m)-1,_e=i;;_e=i){var W=f[Qt(r,i)&ie],be=W>>>4;if(i+=W&15,i>_){s&&Re(0);break}if(W||Re(2),be<256)e[u++]=be;else if(be==256){_e=i,f=null;break}else{var Me=be-254;if(be>264){var P=be-257,de=Fn[P];Me=Be(r,i,(1<<de)-1)+Rn[P],i+=de}var Te=c[Qt(r,i)&se],ae=Te>>>4;Te||Re(3),i+=Te&15;var J=as[ae];if(ae>3){var de=Bn[ae];J+=Qt(r,i)&(1<<de)-1,i+=de}if(i>_){s&&Re(0);break}o&&l(u+131072);for(var z=u+Me;u<z;u+=4)e[u]=e[u-J],e[u+1]=e[u+1-J],e[u+2]=e[u+2-J],e[u+3]=e[u+3-J];u=z}}t.l=f,t.p=_e,t.b=u,t.f=a,f&&(a=1,t.m=p,t.d=c,t.n=m)}while(!a);return u==e.length?e:Sr(e,0,u)},hs=new Ae(0),qe=function(r,e){return r[e]|r[e+1]<<8},He=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},er=function(r,e){return He(r,e)+He(r,e+4)*4294967296};function ds(r,e){return ms(r,e)}var ur=typeof TextDecoder<"u"&&new TextDecoder,$s=0;try{ur.decode(hs,{stream:!0}),$s=1}catch{}var gs=function(r){for(var e="",t=0;;){var n=r[t++],o=(n>127)+(n>223)+(n>239);if(t+o>r.length)return[e,Sr(r,t-1)];o?o==3?(n=((n&15)<<18|(r[t++]&63)<<12|(r[t++]&63)<<6|r[t++]&63)-65536,e+=String.fromCharCode(55296|n>>10,56320|n&1023)):o&1?e+=String.fromCharCode((n&31)<<6|r[t++]&63):e+=String.fromCharCode((n&15)<<12|(r[t++]&63)<<6|r[t++]&63):e+=String.fromCharCode(n)}};function Un(r,e){if(e){for(var t="",n=0;n<r.length;n+=16384)t+=String.fromCharCode.apply(null,r.subarray(n,n+16384));return t}else{if(ur)return ur.decode(r);var o=gs(r),s=o[0],l=o[1];return l.length&&Re(8),s}}var _s=function(r,e){return e+30+qe(r,e+26)+qe(r,e+28)},bs=function(r,e,t){var n=qe(r,e+28),o=Un(r.subarray(e+46,e+46+n),!(qe(r,e+8)&2048)),s=e+46+n,l=He(r,e+20),a=t&&l==4294967295?vs(r,s):[l,He(r,e+24),He(r,e+42)],i=a[0],u=a[1],f=a[2];return[qe(r,e+10),i,u,o,s+qe(r,e+30)+qe(r,e+32),f]},vs=function(r,e){for(;qe(r,e)!=1;e+=4+qe(r,e+2));return[er(r,e+12),er(r,e+4),er(r,e+20)]};function ys(r,e){for(var t={},n=r.length-22;He(r,n)!=101010256;--n)(!n||r.length-n>65558)&&Re(13);var o=qe(r,n+8);if(!o)return{};var s=He(r,n+16),l=s==4294967295||o==65535;if(l){var a=He(r,n-12);l=He(r,a)==101075792,l&&(o=He(r,a+32),s=He(r,a+48))}for(var i=e&&e.filter,u=0;u<o;++u){var f=bs(r,s,l),c=f[0],p=f[1],m=f[2],_=f[3],k=f[4],L=f[5],T=_s(r,L);s=k,(!i||i({name:_,size:p,originalSize:m,compression:c}))&&(c?c==8?t[_]=ds(r.subarray(T,T+p),new Ae(m)):Re(14,"unknown compression type "+c):t[_]=Sr(r,T,T+p))}return t}function ws(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(tr):tr(r)}function tr(r){var e=new Uint8Array(r),t=ys(e);return Promise.resolve(ks(t))}function ks(r){for(var e=[],t=0,n=Object.keys(r);t<n.length;t++){var o=n[t];e[o]=Un(r[o])}return e}function xe(r,e){for(var t=0;t<r.childNodes.length;){var n=r.childNodes[t];if(n.nodeType===1&&dt(n)===e)return n;t++}}function Rt(r,e){for(var t=[],n=0;n<r.childNodes.length;){var o=r.childNodes[n];o.nodeType===1&&dt(o)===e&&t.push(o),n++}return t}function qt(r,e,t){for(var n=0;n<r.childNodes.length;){var o=r.childNodes[n];e?o.nodeType===1&&dt(o)===e&&t(o,n):t(o,n),n++}}function Ss(r,e,t){var n=[];return qt(r,e,function(o,s){n.push(t(o,s))}),n}var Cs=/.+\:/;function dt(r){return r.tagName.replace(Cs,"")}function Wn(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+dt(r),t=0;t<r.attributes.length;)e+=" "+r.attributes[t].name+'="'+r.attributes[t].value+'"',t++;e+=">";for(var n=0;n<r.childNodes.length;)e+=Wn(r.childNodes[n]),n++;return e+="</"+dt(r)+">",e}function Ls(r){var e=r.documentElement,t=xe(e,"sheetData"),n=[];return qt(t,"row",function(o){qt(o,"c",function(s){n.push(s)})}),n}function Ts(r,e){return xe(e,"v")}function Os(r,e){if(e.firstChild&&dt(e.firstChild)==="is"&&e.firstChild.firstChild&&dt(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function As(r){var e=r.documentElement,t=xe(e,"dimension");if(t)return t.getAttribute("ref")}function Is(r){var e=r.documentElement,t=xe(e,"cellStyleXfs");return t?Rt(t,"xf"):[]}function Ds(r){var e=r.documentElement,t=xe(e,"cellXfs");return t?Rt(t,"xf"):[]}function Es(r){var e=r.documentElement,t=xe(e,"numFmts");return t?Rt(t,"numFmt"):[]}function Ms(r){var e=r.documentElement;return Ss(e,"si",function(t){var n=xe(t,"t");if(n)return n.textContent;var o="";return qt(t,"r",function(s){o+=xe(s,"t").textContent}),o})}function Ps(r){var e=r.documentElement;return xe(e,"workbookPr")}function Ns(r){var e=r.documentElement;return Rt(e,"Relationship")}function Fs(r){var e=r.documentElement,t=xe(e,"sheets");return Rt(t,"sheet")}function Bs(r,e){var t=e.createDocument(r),n={},o=Ps(t);o&&o.getAttribute("date1904")==="1"&&(n.epoch1904=!0),n.sheets=[];var s=function(a){a.getAttribute("name")&&n.sheets.push({id:a.getAttribute("sheetId"),name:a.getAttribute("name"),relationId:a.getAttribute("r:id")})};return Fs(t).forEach(s),n}function js(r,e){var t=e.createDocument(r),n={sheets:{},sharedStrings:void 0,styles:void 0},o=function(l){var a=l.getAttribute("Target"),i=l.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":n.styles=rr(a);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":n.sharedStrings=rr(a);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":n.sheets[l.getAttribute("Id")]=rr(a);break}};return Ns(t).forEach(o),n}function rr(r){return r[0]==="/"?r.slice(1):"xl/"+r}function zr(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)}return t}function Rr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zr(Object(t),!0).forEach(function(n){zs(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):zr(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function zs(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Rs(r,e){if(!r)return{};var t=e.createDocument(r),n=Is(t).map(nr),o=Es(t).map(Hs).reduce(function(l,a){return l[a.id]=a,l},[]),s=function(a){return a.hasAttribute("xfId")?Rr(Rr({},n[a.xfId]),nr(a,o)):nr(a,o)};return Ds(t).map(s)}function Hs(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function nr(r,e){var t={};if(r.hasAttribute("numFmtId")){var n=r.getAttribute("numFmtId");e[n]?t.numberFormat=e[n]:t.numberFormat={id:n}}return t}function Us(r,e){return r?Ms(e.createDocument(r)):[]}function Vn(r,e){e&&e.epoch1904&&(r+=1462);var t=70*365+19,n=60*60*1e3;return new Date(Math.round((r-t)*24*n))}function Ws(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t)return(t=t.call(r)).next.bind(t);if(Array.isArray(r)||(t=Vs(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var n=0;return function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vs(r,e){if(r){if(typeof r=="string")return Hr(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Hr(r,e)}}function Hr(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Gs(r,e,t,n){if(e){var o=t[e];if(!o)throw new Error("Cell style not found: ".concat(e));if(!o.numberFormat)return!1;if(Zs.indexOf(Number(o.numberFormat.id))>=0||n.dateFormat&&o.numberFormat.template===n.dateFormat||n.smartDateParser!==!1&&o.numberFormat.template&&xs(o.numberFormat.template))return!0}}var Zs=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],Ks=/^\[\$-414\]/,qs=/;@$/;function xs(r){r=r.toLowerCase(),r=r.replace(Ks,""),r=r.replace(qs,"");for(var e=r.split(/\W+/),t=Ws(e),n;!(n=t()).done;){var o=n.value;if(Xs.indexOf(o)<0)return!1}return!0}var Xs=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function Ys(r,e,t){var n=t.getInlineStringValue,o=t.getInlineStringXml,s=t.getStyleId,l=t.styles,a=t.values,i=t.properties,u=t.options;switch(e||(e="n"),e){case"str":r=or(r,u);break;case"inlineStr":if(r=n(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(o()));r=or(r,u);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=a.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=a[f],r=or(r,u);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=Js(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var p=Number(r);if(isNaN(p))throw new Error('Invalid "numeric" cell value: '.concat(r));r=p,Gs(r,s(),l,u)&&(r=Vn(r,i));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function Js(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function or(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var Qs=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function ei(r){var e=function(u,f){return u-f},t=r.map(function(i){return i.row}).sort(e),n=r.map(function(i){return i.column}).sort(e),o=t[0],s=t[t.length-1],l=n[0],a=n[n.length-1];return[{row:o,column:l},{row:s,column:a}]}function ti(r){for(var e=0,t=0;t<r.length;)e*=26,e+=Qs.indexOf(r[t]),t++;return e}function Gn(r){return r=r.split(/(\d+)/),[parseInt(r[1]),ti(r[0].trim())]}function ri(r,e,t,n,o,s,l){var a=Gn(r.getAttribute("r")),i=Ts(e,r),u=i&&i.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:a[0],column:a[1],value:Ys(u,f,{getInlineStringValue:function(){return Os(e,r)},getInlineStringXml:function(){return Wn(r)},getStyleId:function(){return r.getAttribute("s")},styles:o,values:n,properties:s,options:l})}}function ni(r,e,t,n,o,s){var l=Ls(r);return l.length===0?[]:l.map(function(a){return ri(a,r,e,t,n,o,s)})}function oi(r,e){return ai(r)||li(r,e)||ii(r,e)||si()}function si(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ii(r,e){if(r){if(typeof r=="string")return Ur(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ur(r,e)}}function Ur(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function li(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],o=!0,s=!1,l,a;try{for(t=t.call(r);!(o=(l=t.next()).done)&&(n.push(l.value),!(e&&n.length===e));o=!0);}catch(i){s=!0,a=i}finally{try{!o&&t.return!=null&&t.return()}finally{if(s)throw a}}return n}}function ai(r){if(Array.isArray(r))return r}function fi(r){var e=As(r);if(e)return e=e.split(":").map(Gn).map(function(t){var n=oi(t,2),o=n[0],s=n[1];return{row:o,column:s}}),e.length===1&&(e=[e[0],e[0]]),e}function ui(r,e,t,n,o,s){var l=e.createDocument(r),a=ni(l,e,t,n,o,s),i=fi(l)||ei(a);return{cells:a,dimensions:i}}function ci(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t)return(t=t.call(r)).next.bind(t);if(Array.isArray(r)||(t=pi(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var n=0;return function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pi(r,e){if(r){if(typeof r=="string")return Wr(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Wr(r,e)}}function Wr(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function mi(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.rowMap,n=e.accessor,o=n===void 0?function(c){return c}:n,s=e.onlyTrimAtTheEnd,l=r.length-1;l>=0;){for(var a=!0,i=ci(r[l]),u;!(u=i()).done;){var f=u.value;if(o(f)!==null){a=!1;break}}if(a)r.splice(l,1),t&&t.splice(l,1);else if(s)break;l--}return r}function hi(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t)return(t=t.call(r)).next.bind(t);if(Array.isArray(r)||(t=di(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var n=0;return function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function di(r,e){if(r){if(typeof r=="string")return Vr(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Vr(r,e)}}function Vr(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function $i(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.accessor,n=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=r[0].length-1;s>=0;){for(var l=!0,a=hi(r),i;!(i=a()).done;){var u=i.value;if(n(u[s])!==null){l=!1;break}}if(l)for(var f=0;f<r.length;)r[f].splice(s,1),f++;else if(o)break;s--}return r}function gi(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t)return(t=t.call(r)).next.bind(t);if(Array.isArray(r)||(t=Zn(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var n=0;return function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _i(r,e){return yi(r)||vi(r,e)||Zn(r,e)||bi()}function bi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zn(r,e){if(r){if(typeof r=="string")return Gr(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Gr(r,e)}}function Gr(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function vi(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],o=!0,s=!1,l,a;try{for(t=t.call(r);!(o=(l=t.next()).done)&&(n.push(l.value),!(e&&n.length===e));o=!0);}catch(i){s=!0,a=i}finally{try{!o&&t.return!=null&&t.return()}finally{if(s)throw a}}return n}}function yi(r){if(Array.isArray(r))return r}function wi(r,e){var t=r.dimensions,n=r.cells;if(n.length===0)return[];var o=_i(t,2);o[0];for(var s=o[1],l=s.column,a=s.row,i=new Array(a),u=0;u<a;){i[u]=new Array(l);for(var f=0;f<l;)i[u][f]=null,f++;u++}for(var c=gi(n),p;!(p=c()).done;){var m=p.value,_=m.row-1,k=m.column-1;k<l&&_<a&&(i[_][k]=m.value)}var L=e.rowMap;if(L)for(var T=0;T<i.length;)L[T]=T,T++;return i=mi($i(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:L}),e.transformData&&(i=e.transformData(i)),i}function ki(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t)return(t=t.call(r)).next.bind(t);if(Array.isArray(r)||(t=Si(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var n=0;return function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Si(r,e){if(r){if(typeof r=="string")return Zr(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Zr(r,e)}}function Zr(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Kr(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)}return t}function Ci(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Kr(Object(t),!0).forEach(function(n){Li(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Kr(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Li(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ti(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};t.sheet||(t=Ci({sheet:1},t));var n=function(p){if(!r[p])throw new Error('"'.concat(p,'" file not found inside the *.xlsx file zip archive'));return r[p]},o=js(n("xl/_rels/workbook.xml.rels"),e),s=o.sharedStrings?Us(n(o.sharedStrings),e):[],l=o.styles?Rs(n(o.styles),e):{},a=Bs(n("xl/workbook.xml"),e);if(t.getSheets)return a.sheets.map(function(c){var p=c.name;return{name:p}});var i=Oi(t.sheet,a.sheets);if(!i||!o.sheets[i])throw Ai(t.sheet,a.sheets);var u=ui(n(o.sheets[i]),e,s,l,a,t),f=wi(u,t);return t.properties?{data:f,properties:a}:f}function Oi(r,e){if(typeof r=="number"){var t=e[r-1];return t&&t.relationId}for(var n=ki(e),o;!(o=n()).done;){var s=o.value;if(s.name===r)return s.relationId}}function Ai(r,e){var t=e&&e.map(function(n,o){return'"'.concat(n.name,'" (#').concat(o+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+t+".":""))}function cr(r){"@babel/helpers - typeof";return cr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cr(r)}function qr(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Ii(r,e,t){return e&&qr(r.prototype,e),t&&qr(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function Di(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Ei(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Pt(r,e)}function Mi(r){var e=Kn();return function(){var n=Nt(r),o;if(e){var s=Nt(this).constructor;o=Reflect.construct(n,arguments,s)}else o=n.apply(this,arguments);return Pi(this,o)}}function Pi(r,e){if(e&&(cr(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ni(r)}function Ni(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function pr(r){var e=typeof Map=="function"?new Map:void 0;return pr=function(n){if(n===null||!Fi(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,o)}function o(){return Wt(n,arguments,Nt(this).constructor)}return o.prototype=Object.create(n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Pt(o,n)},pr(r)}function Wt(r,e,t){return Kn()?Wt=Reflect.construct:Wt=function(o,s,l){var a=[null];a.push.apply(a,s);var i=Function.bind.apply(o,a),u=new i;return l&&Pt(u,l.prototype),u},Wt.apply(null,arguments)}function Kn(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Fi(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Pt(r,e){return Pt=Object.setPrototypeOf||function(n,o){return n.__proto__=o,n},Pt(r,e)}function Nt(r){return Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Nt(r)}var Ie=function(r){Ei(t,r);var e=Mi(t);function t(n){var o;return Di(this,t),o=e.call(this,"invalid"),o.reason=n,o}return Ii(t)}(pr(Error));function Bi(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new Ie("not_a_number")}if(typeof r!="number")throw new Ie("not_a_number");if(isNaN(r))throw new Ie("invalid_number");if(!isFinite(r))throw new Ie("out_of_bounds");return r}function ji(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new Ie("invalid_number");if(!isFinite(r))throw new Ie("out_of_bounds");return String(r)}throw new Ie("not_a_string")}function zi(r){if(typeof r=="boolean")return r;throw new Ie("not_a_boolean")}function Ri(r,e){var t=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new Ie("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new Ie("invalid_number");if(!isFinite(r))throw new Ie("out_of_bounds");var n=Vn(r,t);if(isNaN(n.valueOf()))throw new Ie("out_of_bounds");return n}throw new Ie("not_a_date")}function Hi(r,e){return Vi(r)||Wi(r,e)||qn(r,e)||Ui()}function Ui(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wi(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],o=!0,s=!1,l,a;try{for(t=t.call(r);!(o=(l=t.next()).done)&&(n.push(l.value),!(e&&n.length===e));o=!0);}catch(i){s=!0,a=i}finally{try{!o&&t.return!=null&&t.return()}finally{if(s)throw a}}return n}}function Vi(r){if(Array.isArray(r))return r}function mr(r){"@babel/helpers - typeof";return mr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mr(r)}function Gi(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t)return(t=t.call(r)).next.bind(t);if(Array.isArray(r)||(t=qn(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var n=0;return function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qn(r,e){if(r){if(typeof r=="string")return xr(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xr(r,e)}}function xr(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Xr(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)}return t}function Yr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Xr(Object(t),!0).forEach(function(n){Zi(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Xr(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Zi(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var Jr={isColumnOriented:!1};function Ki(r,e,t){t?t=Yr(Yr({},Jr),t):t=Jr;var n=t,o=n.isColumnOriented,s=n.rowMap,l=n.ignoreEmptyRows;Yi(e),o&&(r=Xi(r));for(var a=r[0],i=[],u=[],f=1;f<r.length;f++){var c=xn(e,r[f],f,a,u,t);(c!==null||l===!1)&&i.push(c)}if(s)for(var p=Gi(u),m;!(m=p()).done;){var _=m.value;_.row=s[_.row-1]+1}return{rows:i,errors:u}}function xn(r,e,t,n,o,s){for(var l={},a=!0,i=function(){var p=f[u],m=r[p],_=mr(m.type)==="object"&&!Array.isArray(m.type),k=e[n.indexOf(p)];k===void 0&&(k=null);var L=void 0,T=void 0,D=void 0;if(_)L=xn(m.type,e,t,n,o,s);else if(k===null)L=null;else if(Array.isArray(m.type)){var B=!1,C=xi(k).map(function(j){var M=Qr(j,m,s);return M.error&&(L=j,T=M.error,D=M.reason),M.value!==null&&(B=!0),M.value});T||(L=B?C:null)}else{var A=Qr(k,m,s);T=A.error,D=A.reason,L=T?k:A.value}!T&&L===null&&m.required&&(T="required"),T?(T={error:T,row:t+1,column:p,value:L},D&&(T.reason=D),m.type&&(T.type=m.type),o.push(T)):(a&&L!==null&&(a=!1),(L!==null||s.includeNullValues)&&(l[m.prop]=L))},u=0,f=Object.keys(r);u<f.length;u++)i();return a?null:l}function Qr(r,e,t){if(r===null)return{value:null};var n;if(e.parse?n=yt(r,e.parse):e.type?n=qi(r,Array.isArray(e.type)?e.type[0]:e.type,t):n={value:r},n.error)return n;if(n.value!==null){if(e.oneOf&&e.oneOf.indexOf(n.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(n.value)}catch(o){return{error:o.message}}}return n}function yt(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(n){var t={error:n.message};return n.reason&&(t.reason=n.reason),t}}function qi(r,e,t){switch(e){case String:return yt(r,ji);case Number:return yt(r,Bi);case Date:return yt(r,function(n){return Ri(n,{properties:t.properties})});case Boolean:return yt(r,zi);default:if(typeof e=="function")return yt(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Xn(r,e,t){for(var n=0,o="";t+n<r.length;){var s=r[t+n];if(s===e)return[o,n];if(s==='"'){var l=Xn(r,'"',t+n+1);o+=l[0],n+=1+l[1]+1}else o+=s,n++}return[o,n]}function xi(r){for(var e=[],t=0;t<r.length;){var n=Xn(r,",",t),o=Hi(n,2),s=o[0],l=o[1];t+=l+1,e.push(s.trim())}return e}var Xi=function(e){return e[0].map(function(t,n){return e.map(function(o){return o[n]})})};function Yi(r){for(var e=0,t=Object.keys(r);e<t.length;e++){var n=t[e],o=r[n];if(!o.prop)throw new Error('"prop" not defined for schema entry "'.concat(n,'".'))}}function hr(r){"@babel/helpers - typeof";return hr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hr(r)}function Yn(r){for(var e={},t=0,n=Object.keys(r);t<n.length;t++){var o=n[t],s=r[o],l=void 0;hr(s)==="object"&&(s=Object.keys(r[o])[0],l=Yn(r[o][s])),e[o]={prop:s},l&&(e[o].type=l)}return e}var Ji=["schema","map"];function en(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)}return t}function Ut(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?en(Object(t),!0).forEach(function(n){Qi(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):en(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Qi(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function el(r,e){if(r==null)return{};var t=tl(r,e),n,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(o=0;o<s.length;o++)n=s[o],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function tl(r,e){if(r==null)return{};var t={},n=Object.keys(r),o,s;for(s=0;s<n.length;s++)o=n[s],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function rl(r,e,t){var n=t.schema,o=t.map,s=el(t,Ji);!n&&o&&(n=Yn(o));var l=Ti(r,e,Ut(Ut({},s),{},{properties:n||s.properties}));return n?Ki(l.data,n,Ut(Ut({},s),{},{properties:l.properties})):l}function nl(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ws(r).then(function(t){return rl(t,os,e)})}function ol(r){let e=new Map;for(let[n,o]of Object.entries(r.schemes))e.set(n,{scheme_reference:n,num_features:0,authority_or_region:o.authority_or_region,capital_scheme_id:o.capital_scheme_id,funding_programme:o.funding_programme});let t=1;for(let n of r.features){let o=e.get(n.properties.scheme_reference);o.num_features++,n.properties.funding_programme=o.funding_programme,n.id=t++}return e}async function sl(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:t}=await nl(r,{map:e,sheet:"Form Input"}),n={type:"FeatureCollection",features:[]};for(let o of t){let s=ho(o.lat_lon.split(",").map(parseFloat).reverse()),l=o;l.submission_time=o.submission_time.toLocaleString(),n.features.push({type:"Feature",properties:l,geometry:{type:"Point",coordinates:s},id:n.features.length+1})}return n}const Y={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"},Yt=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function il(r){let e,t,n,o,s;function l(i){r[3](i)}let a={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return r[0]!==void 0&&(a.value=r[0]),e=new Kt({props:a}),G.push(()=>x(e,"value",l)),e.$on("change",r[2]),o=new yo({props:{rows:r[1]}}),{c(){b(e.$$.fragment),n=I(),b(o.$$.fragment)},m(i,u){v(e,i,u),h(i,n,u),v(o,i,u),s=!0},p(i,[u]){const f={};!t&&u&1&&(t=!0,f.value=i[0],X(()=>t=!1)),e.$set(f);const c={};u&2&&(c.rows=i[1]),o.$set(c)},i(i){s||($(e.$$.fragment,i),$(o.$$.fragment,i),s=!0)},o(i){g(e.$$.fragment,i),g(o.$$.fragment,i),s=!1},d(i){i&&d(n),y(e,i),y(o,i)}}}function ll(r,e,t){let n;q(r,he,i=>t(4,n=i));let o="interventionType",s=Ir("v1");function l(){let i;o=="interventionType"?(i=Dn("v1"),t(1,s=Ir("v1"))):(i=Ln(["get","funding_programme"],{ATF2:Y.atf2,ATF3:Y.atf3,ATF4:Y.atf4},"grey"),t(1,s=[["ATF2",Y.atf2],["ATF3",Y.atf3],["ATF4",Y.atf4]])),n.setPaintProperty("interventions-points","circle-color",i),n.setPaintProperty("interventions-lines","line-color",i),n.setPaintProperty("interventions-polygons","fill-color",i),n.setPaintProperty("interventions-polygon-outlines","line-color",i)}function a(i){o=i,t(0,o)}return[o,s,l,a]}class al extends Z{constructor(e){super(),K(this,e,ll,il,V,{})}}function fl(r){let e;return{c(){e=w("Clear")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function ul(r){let e,t,n,o,s,l;return n=new lr({props:{$$slots:{default:[fl]},$$scope:{ctx:r}}}),n.$on("click",r[13]),{c(){e=N("input"),t=I(),b(n.$$.fragment),ee(e,"type","text"),ee(e,"class","govuk-input govuk-input--width-10"),ee(e,"id","filterText")},m(a,i){h(a,e,i),Or(e,r[0]),h(a,t,i),v(n,a,i),o=!0,s||(l=br(e,"input",r[12]),s=!0)},p(a,i){i&1&&e.value!==a[0]&&Or(e,a[0]);const u={};i&131072&&(u.$$scope={dirty:i,ctx:a}),n.$set(u)},i(a){o||($(n.$$.fragment,a),o=!0)},o(a){g(n.$$.fragment,a),o=!1},d(a){a&&(d(e),d(t)),y(n,a),s=!1,l()}}}function cl(r){let e,t,n,o,s,l,a,i,u,f;function c(k){r[10](k)}let p={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[2]!==void 0&&(p.value=r[2]),e=new Kt({props:p}),G.push(()=>x(e,"value",c));function m(k){r[11](k)}let _={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[3]!==void 0&&(_.value=r[3]),o=new Kt({props:_}),G.push(()=>x(o,"value",m)),a=new Tn({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[ul]},$$scope:{ctx:r}}}),u=new al({}),{c(){b(e.$$.fragment),n=I(),b(o.$$.fragment),l=I(),b(a.$$.fragment),i=I(),b(u.$$.fragment)},m(k,L){v(e,k,L),h(k,n,L),v(o,k,L),h(k,l,L),v(a,k,L),h(k,i,L),v(u,k,L),f=!0},p(k,L){const T={};L&32&&(T.choices=k[5]),!t&&L&4&&(t=!0,T.value=k[2],X(()=>t=!1)),e.$set(T);const D={};L&64&&(D.choices=k[6]),!s&&L&8&&(s=!0,D.value=k[3],X(()=>s=!1)),o.$set(D);const B={};L&131073&&(B.$$scope={dirty:L,ctx:k}),a.$set(B)},i(k){f||($(e.$$.fragment,k),$(o.$$.fragment,k),$(a.$$.fragment,k),$(u.$$.fragment,k),f=!0)},o(k){g(e.$$.fragment,k),g(o.$$.fragment,k),g(a.$$.fragment,k),g(u.$$.fragment,k),f=!1},d(k){k&&(d(n),d(l),d(i)),y(e,k),y(o,k),y(a,k),y(u,k)}}}function pl(r){let e,t=r[1].size.toLocaleString()+"",n,o,s=r[7].route.toLocaleString()+"",l,a,i=r[7].area.toLocaleString()+"",u,f,c=r[7].crossing.toLocaleString()+"",p,m,_=r[7].other.toLocaleString()+"",k,L;return{c(){e=w("Showing "),n=w(t),o=w(" schemes ("),l=w(s),a=w(`
    routes, `),u=w(i),f=w(` areas,
    `),p=w(c),m=w(" crossings, "),k=w(_),L=w(`
    other)`)},m(T,D){h(T,e,D),h(T,n,D),h(T,o,D),h(T,l,D),h(T,a,D),h(T,u,D),h(T,f,D),h(T,p,D),h(T,m,D),h(T,k,D),h(T,L,D)},p(T,D){D&2&&t!==(t=T[1].size.toLocaleString()+"")&&Le(n,t),D&128&&s!==(s=T[7].route.toLocaleString()+"")&&Le(l,s),D&128&&i!==(i=T[7].area.toLocaleString()+"")&&Le(u,i),D&128&&c!==(c=T[7].crossing.toLocaleString()+"")&&Le(p,c),D&128&&_!==(_=T[7].other.toLocaleString()+"")&&Le(k,_)},d(T){T&&(d(e),d(n),d(o),d(l),d(a),d(u),d(f),d(p),d(m),d(k),d(L))}}}function ml(r){let e,t,n;function o(l){r[14](l)}let s={id:"show-schemes",$$slots:{default:[pl]},$$scope:{ctx:r}};return r[4]!==void 0&&(s.checked=r[4]),e=new le({props:s}),G.push(()=>x(e,"checked",o)),{c(){b(e.$$.fragment)},m(l,a){v(e,l,a),n=!0},p(l,a){const i={};a&131202&&(i.$$scope={dirty:a,ctx:l}),!t&&a&16&&(t=!0,i.checked=l[4],X(()=>t=!1)),e.$set(i)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){y(e,l)}}}function hl(r){let e,t,n,o;return e=new Ye({props:{label:"Filters",$$slots:{default:[cl]},$$scope:{ctx:r}}}),n=new jt({props:{small:!0,$$slots:{default:[ml]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment)},m(s,l){v(e,s,l),h(s,t,l),v(n,s,l),o=!0},p(s,[l]){const a={};l&131181&&(a.$$scope={dirty:l,ctx:s}),e.$set(a);const i={};l&131218&&(i.$$scope={dirty:l,ctx:s}),n.$set(i)},i(s){o||($(e.$$.fragment,s),$(n.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(n.$$.fragment,s),o=!1},d(s){s&&d(t),y(e,s),y(n,s)}}}function dl(r,e,t){let n,o;q(r,St,C=>t(15,n=C)),q(r,he,C=>t(9,o=C));let{schemes:s}=e,{schemesToBeShown:l=new Set}=e,{filterText:a=""}=e,i=[],u="",f=[],c="",p={area:0,route:0,crossing:0,other:0},m=!0;Ft(()=>{let C=new Set,A=new Set;for(let j of s.values())j.authority_or_region&&C.add(j.authority_or_region),j.funding_programme&&A.add(j.funding_programme);t(5,i=Array.from(C.entries())),i.sort(),t(6,f=Array.from(A.entries())),f.sort()});function _(C,A,j){let M=C.toLowerCase(),P=S=>{var R,U;if(M&&!((R=S.properties.name)!=null&&R.toLowerCase().includes(M))&&!((U=S.properties.description)!=null&&U.toLowerCase().includes(M)))return!1;if(A||j){let W=s.get(S.properties.scheme_reference);if(A&&W.authority_or_region!=A||j&&W.funding_programme!=j)return!1}return!0};t(1,l=new Set(n.features.filter(P).map(S=>S.properties.scheme_reference))),t(7,p={area:0,route:0,crossing:0,other:0});let O=S=>{var R,U;return!(!l.has(S.properties.scheme_reference)||M&&!((R=S.properties.name)!=null&&R.toLowerCase().includes(M))&&!((U=S.properties.description)!=null&&U.toLowerCase().includes(M)))};St.update(S=>{for(let R of S.features)O(R)?(delete R.properties.hide_while_editing,t(7,p[R.properties.intervention_type]++,p)):R.properties.hide_while_editing=!0;return S}),t(7,p)}function k(C){u=C,t(2,u)}function L(C){c=C,t(3,c)}function T(){a=this.value,t(0,a)}const D=()=>t(0,a="");function B(C){m=C,t(4,m)}return r.$$set=C=>{"schemes"in C&&t(8,s=C.schemes),"schemesToBeShown"in C&&t(1,l=C.schemesToBeShown),"filterText"in C&&t(0,a=C.filterText)},r.$$.update=()=>{if(r.$$.dirty&528&&o)for(let C of["interventions-polygons","interventions-polygon-outlines","interventions-lines","interventions-lines-endpoints","interventions-points"])o.getLayer(C)&&o.setLayoutProperty(C,"visibility",m?"visible":"none");r.$$.dirty&13&&_(a,u,c)},[a,l,u,c,m,i,f,p,s,o,k,L,T,D,B]}class $l extends Z{constructor(e){super(),K(this,e,dl,hl,V,{schemes:8,schemesToBeShown:1,filterText:0})}}function gl(r){let e,t,n;return e=new Ee({props:{color:Y.bus_route_with_lane}}),{c(){b(e.$$.fragment),t=w(`
  Bus routes`)},m(o,s){v(e,o,s),h(o,t,s),n=!0},p:ne,i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){o&&d(t),y(e,o)}}}function _l(r){let e;return{c(){e=w(`GTFS
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function bl(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function vl(r){let e,t,n,o,s,l,a,i,u,f,c;return s=new H({props:{href:"https://gtfs.org",$$slots:{default:[_l]},$$scope:{ctx:r}}}),f=new H({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[bl]},$$scope:{ctx:r}}}),{c(){e=N("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,t=I(),n=N("p"),o=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),b(s.$$.fragment),l=w(`, and doesn't include which routes are run or the
        frequency of service.`),a=I(),i=N("p"),u=w("License: "),b(f.$$.fragment)},m(p,m){h(p,e,m),h(p,t,m),h(p,n,m),E(n,o),v(s,n,null),E(n,l),h(p,a,m),h(p,i,m),E(i,u),v(f,i,null),c=!0},p(p,m){const _={};m&8&&(_.$$scope={dirty:m,ctx:p}),s.$set(_);const k={};m&8&&(k.$$scope={dirty:m,ctx:p}),f.$set(k)},i(p){c||($(s.$$.fragment,p),$(f.$$.fragment,p),c=!0)},o(p){g(s.$$.fragment,p),g(f.$$.fragment,p),c=!1},d(p){p&&(d(e),d(t),d(n),d(a),d(i)),y(s),y(f)}}}function yl(r){let e,t,n;return t=new ue({props:{$$slots:{default:[vl]},$$scope:{ctx:r}}}),{c(){e=N("span"),b(t.$$.fragment),ee(e,"slot","right")},m(o,s){h(o,e,s),v(t,e,null),n=!0},p(o,s){const l={};s&8&&(l.$$scope={dirty:s,ctx:o}),t.$set(l)},i(o){n||($(t.$$.fragment,o),n=!0)},o(o){g(t.$$.fragment,o),n=!1},d(o){o&&d(e),y(t)}}}function wl(r){let e,t,n,o,s;function l(i){r[1](i)}let a={id:lt,$$slots:{right:[yl],default:[gl]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),G.push(()=>x(e,"checked",l)),o=new fe({props:{layer:lt,tooltip:kl,show:r[0],clickable:!1}}),{c(){b(e.$$.fragment),n=I(),b(o.$$.fragment)},m(i,u){v(e,i,u),h(i,n,u),v(o,i,u),s=!0},p(i,[u]){const f={};u&8&&(f.$$scope={dirty:u,ctx:i}),!t&&u&1&&(t=!0,f.checked=i[0],X(()=>t=!1)),e.$set(f);const c={};u&1&&(c.show=i[0]),o.$set(c)},i(i){s||($(e.$$.fragment,i),$(o.$$.fragment,i),s=!0)},o(i){g(e.$$.fragment,i),g(o.$$.fragment,i),s=!1},d(i){i&&d(n),y(e,i),y(o,i)}}}let lt="bus_routes";function kl(r){return r.properties.has_bus_lane?"<p>At least one bus route crosses here, with a bus lane in one or more directions</p>":"<p>At least one bus route crosses here, without any bus lanes</p>"}function Sl(r,e,t){let n;q(r,he,l=>t(2,n=l)),Se(n,lt,`${ge()}/v1/${lt}.pmtiles`),Ue(n,{id:lt,source:lt,sourceLayer:lt,color:["case",["boolean",["get","has_bus_lane"],!1],Y.bus_route_with_lane,Y.bus_route_without_lane],width:5,opacity:Pe(.5,1)});let o=!1;function s(l){o=l,t(0,o)}return[o,s]}class Cl extends Z{constructor(e){super(),K(this,e,Sl,wl,V,{})}}function tn(r,e,t){const n=r.slice();return n[2]=e[t],n}function rn(r,e,t){const n=r.slice();return n[5]=e[t],n}function nn(r){let e,t;return{c(){e=N("span"),t=w(`
    `),Je(e,"background",r[5]),Je(e,"width","100%"),Je(e,"border","1px solid black")},m(n,o){h(n,e,o),E(e,t)},p(n,o){o&1&&Je(e,"background",n[5])},d(n){n&&d(e)}}}function on(r){let e,t=r[2]+"",n;return{c(){e=N("span"),n=w(t)},m(o,s){h(o,e,s),E(e,n)},p(o,s){s&2&&t!==(t=o[2]+"")&&Le(n,t)},d(o){o&&d(e)}}}function Ll(r){let e,t,n,o=ot(r[0]),s=[];for(let i=0;i<o.length;i+=1)s[i]=nn(rn(r,o,i));let l=ot(r[1]),a=[];for(let i=0;i<l.length;i+=1)a[i]=on(tn(r,l,i));return{c(){e=N("div");for(let i=0;i<s.length;i+=1)s[i].c();t=I(),n=N("div");for(let i=0;i<a.length;i+=1)a[i].c();Je(e,"display","flex"),Je(n,"display","flex"),Je(n,"justify-content","space-between")},m(i,u){h(i,e,u);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(e,null);h(i,t,u),h(i,n,u);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(n,null)},p(i,[u]){if(u&1){o=ot(i[0]);let f;for(f=0;f<o.length;f+=1){const c=rn(i,o,f);s[f]?s[f].p(c,u):(s[f]=nn(c),s[f].c(),s[f].m(e,null))}for(;f<s.length;f+=1)s[f].d(1);s.length=o.length}if(u&2){l=ot(i[1]);let f;for(f=0;f<l.length;f+=1){const c=tn(i,l,f);a[f]?a[f].p(c,u):(a[f]=on(c),a[f].c(),a[f].m(n,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=l.length}},i:ne,o:ne,d(i){i&&(d(e),d(t),d(n)),Zt(s,i),Zt(a,i)}}}function Tl(r,e,t){let{colorScale:n}=e,{limits:o}=e;return r.$$set=s=>{"colorScale"in s&&t(0,n=s.colorScale),"limits"in s&&t(1,o=s.limits)},[n,o]}class it extends Z{constructor(e){super(),K(this,e,Tl,Ll,V,{colorScale:0,limits:1})}}function Ol(r){let e;return{c(){e=w("Percent of households with a car")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Al(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Il(r){let e;return{c(){e=w(`ONS Geography
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Dl(r){let e;return{c(){e=w(`Open Government License
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function El(r){let e,t,n,o,s,l,a,i,u,f,c,p;return n=new H({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Al]},$$scope:{ctx:r}}}),s=new H({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Il]},$$scope:{ctx:r}}}),f=new H({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Dl]},$$scope:{ctx:r}}}),{c(){e=N("p"),t=w("Car/van availability data is from the 2021 census, via "),b(n.$$.fragment),o=w(". Output area boundaries from "),b(s.$$.fragment),l=w("."),a=I(),i=N("p"),u=w("License: "),b(f.$$.fragment),c=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(m,_){h(m,e,_),E(e,t),v(n,e,null),E(e,o),v(s,e,null),E(e,l),h(m,a,_),h(m,i,_),E(i,u),v(f,i,null),E(i,c),p=!0},p(m,_){const k={};_&65536&&(k.$$scope={dirty:_,ctx:m}),n.$set(k);const L={};_&65536&&(L.$$scope={dirty:_,ctx:m}),s.$set(L);const T={};_&65536&&(T.$$scope={dirty:_,ctx:m}),f.$set(T)},i(m){p||($(n.$$.fragment,m),$(s.$$.fragment,m),$(f.$$.fragment,m),p=!0)},o(m){g(n.$$.fragment,m),g(s.$$.fragment,m),g(f.$$.fragment,m),p=!1},d(m){m&&(d(e),d(a),d(i)),y(n),y(s),y(f)}}}function Ml(r){let e,t,n;return t=new ue({props:{$$slots:{default:[El]},$$scope:{ctx:r}}}),{c(){e=N("span"),b(t.$$.fragment),ee(e,"slot","right")},m(o,s){h(o,e,s),v(t,e,null),n=!0},p(o,s){const l={};s&65536&&(l.$$scope={dirty:s,ctx:o}),t.$set(l)},i(o){n||($(t.$$.fragment,o),n=!0)},o(o){g(t.$$.fragment,o),n=!1},d(o){o&&d(e),y(t)}}}function sn(r){let e,t;return e=new it({props:{colorScale:r[4],limits:r[7]()}}),{c(){b(e.$$.fragment)},m(n,o){v(e,n,o),t=!0},p:ne,i(n){t||($(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){y(e,n)}}}function Pl(r){let e;return{c(){e=w("Average cars per household")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Nl(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Fl(r){let e;return{c(){e=w(`ONS Geography
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Bl(r){let e;return{c(){e=w(`Open Government License
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function jl(r){let e,t,n,o,s,l,a,i,u,f,c,p,m,_;return s=new H({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Nl]},$$scope:{ctx:r}}}),a=new H({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Fl]},$$scope:{ctx:r}}}),p=new H({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Bl]},$$scope:{ctx:r}}}),{c(){e=N("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,t=I(),n=N("p"),o=w("Car/van availability data is from the 2021 census, via "),b(s.$$.fragment),l=w(". Output area boundaries from "),b(a.$$.fragment),i=w("."),u=I(),f=N("p"),c=w("License: "),b(p.$$.fragment),m=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(k,L){h(k,e,L),h(k,t,L),h(k,n,L),E(n,o),v(s,n,null),E(n,l),v(a,n,null),E(n,i),h(k,u,L),h(k,f,L),E(f,c),v(p,f,null),E(f,m),_=!0},p(k,L){const T={};L&65536&&(T.$$scope={dirty:L,ctx:k}),s.$set(T);const D={};L&65536&&(D.$$scope={dirty:L,ctx:k}),a.$set(D);const B={};L&65536&&(B.$$scope={dirty:L,ctx:k}),p.$set(B)},i(k){_||($(s.$$.fragment,k),$(a.$$.fragment,k),$(p.$$.fragment,k),_=!0)},o(k){g(s.$$.fragment,k),g(a.$$.fragment,k),g(p.$$.fragment,k),_=!1},d(k){k&&(d(e),d(t),d(n),d(u),d(f)),y(s),y(a),y(p)}}}function zl(r){let e,t,n;return t=new ue({props:{$$slots:{default:[jl]},$$scope:{ctx:r}}}),{c(){e=N("span"),b(t.$$.fragment),ee(e,"slot","right")},m(o,s){h(o,e,s),v(t,e,null),n=!0},p(o,s){const l={};s&65536&&(l.$$scope={dirty:s,ctx:o}),t.$set(l)},i(o){n||($(t.$$.fragment,o),n=!0)},o(o){g(t.$$.fragment,o),n=!1},d(o){o&&d(e),y(t)}}}function ln(r){let e,t;return e=new it({props:{colorScale:r[4],limits:r[7]()}}),{c(){b(e.$$.fragment)},m(n,o){v(e,n,o),t=!0},p:ne,i(n){t||($(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){y(e,n)}}}function Rl(r){let e;return{c(){e=w("Population density")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Hl(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Ul(r){let e;return{c(){e=w(`ONS Geography
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Wl(r){let e;return{c(){e=w(`Open Government License
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Vl(r){let e,t,n,o,s,l,a,i,u,f,c,p;return n=new H({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Hl]},$$scope:{ctx:r}}}),s=new H({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ul]},$$scope:{ctx:r}}}),f=new H({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Wl]},$$scope:{ctx:r}}}),{c(){e=N("p"),t=w("Population density data is from the 2021 census, via "),b(n.$$.fragment),o=w(". Output area boundaries from "),b(s.$$.fragment),l=w("."),a=I(),i=N("p"),u=w("License: "),b(f.$$.fragment),c=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(m,_){h(m,e,_),E(e,t),v(n,e,null),E(e,o),v(s,e,null),E(e,l),h(m,a,_),h(m,i,_),E(i,u),v(f,i,null),E(i,c),p=!0},p(m,_){const k={};_&65536&&(k.$$scope={dirty:_,ctx:m}),n.$set(k);const L={};_&65536&&(L.$$scope={dirty:_,ctx:m}),s.$set(L);const T={};_&65536&&(T.$$scope={dirty:_,ctx:m}),f.$set(T)},i(m){p||($(n.$$.fragment,m),$(s.$$.fragment,m),$(f.$$.fragment,m),p=!0)},o(m){g(n.$$.fragment,m),g(s.$$.fragment,m),g(f.$$.fragment,m),p=!1},d(m){m&&(d(e),d(a),d(i)),y(n),y(s),y(f)}}}function Gl(r){let e,t,n;return t=new ue({props:{$$slots:{default:[Vl]},$$scope:{ctx:r}}}),{c(){e=N("span"),b(t.$$.fragment),ee(e,"slot","right")},m(o,s){h(o,e,s),v(t,e,null),n=!0},p(o,s){const l={};s&65536&&(l.$$scope={dirty:s,ctx:o}),t.$set(l)},i(o){n||($(t.$$.fragment,o),n=!0)},o(o){g(t.$$.fragment,o),n=!1},d(o){o&&d(e),y(t)}}}function an(r){let e,t,n,o;return n=new it({props:{colorScale:r[4],limits:r[7]().map(Kl)}}),{c(){e=N("p"),e.textContent="(people per square kilometres)",t=I(),b(n.$$.fragment)},m(s,l){h(s,e,l),h(s,t,l),v(n,s,l),o=!0},p:ne,i(s){o||($(n.$$.fragment,s),o=!0)},o(s){g(n.$$.fragment,s),o=!1},d(s){s&&(d(e),d(t)),y(n,s)}}}function Zl(r){let e,t,n,o,s,l,a,i,u,f,c,p,m,_;function k(P){r[9](P)}let L={id:"percent_households_with_car",$$slots:{right:[Ml],default:[Ol]},$$scope:{ctx:r}};r[0]!==void 0&&(L.checked=r[0]),e=new le({props:L}),G.push(()=>x(e,"checked",k)),e.$on("change",r[10]);let T=r[3]=="percent_households_with_car"&&sn(r);function D(P){r[11](P)}let B={id:"average_cars_per_household",$$slots:{right:[zl],default:[Pl]},$$scope:{ctx:r}};r[1]!==void 0&&(B.checked=r[1]),s=new le({props:B}),G.push(()=>x(s,"checked",D)),s.$on("change",r[12]);let C=r[3]=="average_cars_per_household"&&ln(r);function A(P){r[13](P)}let j={id:"population_density",$$slots:{right:[Gl],default:[Rl]},$$scope:{ctx:r}};r[2]!==void 0&&(j.checked=r[2]),u=new le({props:j}),G.push(()=>x(u,"checked",A)),u.$on("change",r[14]);let M=r[3]=="population_density"&&an(r);return m=new fe({props:{layer:We,tooltip:r[5],show:r[3]!="",clickable:!0}}),m.$on("click",r[6]),{c(){b(e.$$.fragment),n=I(),T&&T.c(),o=I(),b(s.$$.fragment),a=I(),C&&C.c(),i=I(),b(u.$$.fragment),c=I(),M&&M.c(),p=I(),b(m.$$.fragment)},m(P,O){v(e,P,O),h(P,n,O),T&&T.m(P,O),h(P,o,O),v(s,P,O),h(P,a,O),C&&C.m(P,O),h(P,i,O),v(u,P,O),h(P,c,O),M&&M.m(P,O),h(P,p,O),v(m,P,O),_=!0},p(P,[O]){const S={};O&65536&&(S.$$scope={dirty:O,ctx:P}),!t&&O&1&&(t=!0,S.checked=P[0],X(()=>t=!1)),e.$set(S),P[3]=="percent_households_with_car"?T?(T.p(P,O),O&8&&$(T,1)):(T=sn(P),T.c(),$(T,1),T.m(o.parentNode,o)):T&&(pe(),g(T,1,1,()=>{T=null}),me());const R={};O&65536&&(R.$$scope={dirty:O,ctx:P}),!l&&O&2&&(l=!0,R.checked=P[1],X(()=>l=!1)),s.$set(R),P[3]=="average_cars_per_household"?C?(C.p(P,O),O&8&&$(C,1)):(C=ln(P),C.c(),$(C,1),C.m(i.parentNode,i)):C&&(pe(),g(C,1,1,()=>{C=null}),me());const U={};O&65536&&(U.$$scope={dirty:O,ctx:P}),!f&&O&4&&(f=!0,U.checked=P[2],X(()=>f=!1)),u.$set(U),P[3]=="population_density"?M?(M.p(P,O),O&8&&$(M,1)):(M=an(P),M.c(),$(M,1),M.m(p.parentNode,p)):M&&(pe(),g(M,1,1,()=>{M=null}),me());const W={};O&8&&(W.show=P[3]!=""),m.$set(W)},i(P){_||($(e.$$.fragment,P),$(T),$(s.$$.fragment,P),$(C),$(u.$$.fragment,P),$(M),$(m.$$.fragment,P),_=!0)},o(P){g(e.$$.fragment,P),g(T),g(s.$$.fragment,P),g(C),g(u.$$.fragment,P),g(M),g(m.$$.fragment,P),_=!1},d(P){P&&(d(n),d(o),d(a),d(i),d(c),d(p)),y(e,P),T&&T.d(P),y(s,P),C&&C.d(P),y(u,P),M&&M.d(P),y(m,P)}}}let We="census_output_areas";const Kl=r=>r.toLocaleString();function ql(r,e,t){let n;q(r,he,B=>t(8,n=B));let o=`${We}-outline`,s=Y.sequential_low_to_high,l=!1,a=!1,i=!1,u="";Se(n,We,`${ge()}/v1/${We}.pmtiles`),Ct(n,{id:We,source:We,sourceLayer:We,color:"black",opacity:Pe(.5,.7)}),Ue(n,{id:o,source:We,sourceLayer:We,color:"black",width:.5});function f(B){let C=B.properties.OA21CD,A=B.properties[u];return u=="percent_households_with_car"?`<p>${A}% of households in ${C} have 1 or more cars</p>`:u=="average_cars_per_household"?`<p>Households in ${C} have an average of ${A} cars</p>`:`<p>There are ${A.toLocaleString()} people per square kilometre in ${C}</p>`}function c(B){let C=B.detail.properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${C}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${C}`,"_blank")}function p(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function m(B){l=B,t(0,l)}const _=()=>{t(1,a=!1),t(2,i=!1)};function k(B){a=B,t(1,a)}const L=()=>{t(0,l=!1),t(2,i=!1)};function T(B){i=B,t(2,i)}const D=()=>{t(0,l=!1),t(1,a=!1)};return r.$$.update=()=>{r.$$.dirty&271&&(l?t(3,u="percent_households_with_car"):a?t(3,u="average_cars_per_household"):i?t(3,u="population_density"):t(3,u=""),u?(n.setPaintProperty(We,"fill-color",st(["get",u],p(),s)),n.setLayoutProperty(o,"visibility","visible")):n.setLayoutProperty(o,"visibility","none"))},[l,a,i,u,s,f,c,p,n,m,_,k,L,T,D]}class xl extends Z{constructor(e){super(),K(this,e,ql,Zl,V,{})}}function Xl(r){let e,t,n;return e=new Ee({props:{color:r[2]}}),{c(){b(e.$$.fragment),t=w(`
  Combined authorities`)},m(o,s){v(e,o,s),h(o,t,s),n=!0},p:ne,i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){o&&d(t),y(e,o)}}}function Yl(r){let e;return{c(){e=w(`ONS Geography
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Jl(r){let e;return{c(){e=w(`Open Government License
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Ql(r){let e,t,n,o,s,l,a,i,u,f;return n=new H({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Yl]},$$scope:{ctx:r}}}),i=new H({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Jl]},$$scope:{ctx:r}}}),{c(){e=N("p"),t=w("Data from "),b(n.$$.fragment),o=w(", as of December 2022."),s=I(),l=N("p"),a=w("License: "),b(i.$$.fragment),u=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(c,p){h(c,e,p),E(e,t),v(n,e,null),E(e,o),h(c,s,p),h(c,l,p),E(l,a),v(i,l,null),E(l,u),f=!0},p(c,p){const m={};p&64&&(m.$$scope={dirty:p,ctx:c}),n.$set(m);const _={};p&64&&(_.$$scope={dirty:p,ctx:c}),i.$set(_)},i(c){f||($(n.$$.fragment,c),$(i.$$.fragment,c),f=!0)},o(c){g(n.$$.fragment,c),g(i.$$.fragment,c),f=!1},d(c){c&&(d(e),d(s),d(l)),y(n),y(i)}}}function ea(r){let e,t,n;return t=new ue({props:{$$slots:{default:[Ql]},$$scope:{ctx:r}}}),{c(){e=N("span"),b(t.$$.fragment),ee(e,"slot","right")},m(o,s){h(o,e,s),v(t,e,null),n=!0},p(o,s){const l={};s&64&&(l.$$scope={dirty:s,ctx:o}),t.$set(l)},i(o){n||($(t.$$.fragment,o),n=!0)},o(o){g(t.$$.fragment,o),n=!1},d(o){o&&d(e),y(t)}}}function ta(r){let e,t=r[5][0].properties.name+"",n;return{c(){e=N("p"),n=w(t)},m(o,s){h(o,e,s),E(e,n)},p(o,s){s&32&&t!==(t=o[5][0].properties.name+"")&&Le(n,t)},d(o){o&&d(e)}}}function ra(r){let e,t;return e=new kr({props:{openOn:"hover",$$slots:{default:[ta,({features:n})=>({5:n}),({features:n})=>n?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(n,o){v(e,n,o),t=!0},p(n,o){const s={};o&96&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){y(e,n)}}}function na(r){let e,t,n,o;return e=new Mn({props:{id:It,paint:{"fill-color":r[2],"fill-opacity":En(0,.5)},layout:{visibility:r[1]},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[ra]},$$scope:{ctx:r}}}),e.$on("click",sa),n=new Pn({props:{id:r[3],paint:{"line-color":r[2],"line-width":2.5},layout:{visibility:r[1]}}}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment)},m(s,l){v(e,s,l),h(s,t,l),v(n,s,l),o=!0},p(s,l){const a={};l&2&&(a.layout={visibility:s[1]}),l&64&&(a.$$scope={dirty:l,ctx:s}),e.$set(a);const i={};l&2&&(i.layout={visibility:s[1]}),n.$set(i)},i(s){o||($(e.$$.fragment,s),$(n.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(n.$$.fragment,s),o=!1},d(s){s&&d(t),y(e,s),y(n,s)}}}function oa(r){let e,t,n,o,s;function l(i){r[4](i)}let a={id:It,$$slots:{right:[ea],default:[Xl]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),G.push(()=>x(e,"checked",l)),o=new wr({props:{id:It,data:`${ge()}/v1/${It}.geojson`,$$slots:{default:[na]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=I(),b(o.$$.fragment)},m(i,u){v(e,i,u),h(i,n,u),v(o,i,u),s=!0},p(i,[u]){const f={};u&64&&(f.$$scope={dirty:u,ctx:i}),!t&&u&1&&(t=!0,f.checked=i[0],X(()=>t=!1)),e.$set(f);const c={};u&66&&(c.$$scope={dirty:u,ctx:i}),o.$set(c)},i(i){s||($(e.$$.fragment,i),$(o.$$.fragment,i),s=!0)},o(i){g(e.$$.fragment,i),g(o.$$.fragment,i),s=!1},d(i){i&&d(n),y(e,i),y(o,i)}}}let It="combined_authorities";function sa(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function ia(r,e,t){let n,o=Y.combined_authorities,s=`${It}-outline`,l=!1;function a(i){l=i,t(0,l)}return r.$$.update=()=>{r.$$.dirty&1&&t(1,n=l?"visible":"none")},[l,n,o,s,a]}class la extends Z{constructor(e){super(),K(this,e,ia,oa,V,{})}}function aa(r){let e,t,n;return{c(){e=N("input"),ee(e,"class","govuk-file-upload"),ee(e,"id","load-criticals"),ee(e,"type","file")},m(o,s){h(o,e,s),r[7](e),t||(n=br(e,"change",r[4]),t=!0)},p:ne,d(o){o&&d(e),r[7](null),t=!1,n()}}}function fn(r){let e,t;return e=new jt({props:{small:!0,$$slots:{default:[ua]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(n,o){v(e,n,o),t=!0},p(n,o){const s={};o&517&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){y(e,n)}}}function fa(r){let e,t,n=r[2].toLocaleString()+"",o,s,l;return e=new Ee({props:{color:dr}}),{c(){b(e.$$.fragment),t=w(`
        Show `),o=w(n),s=w(" issues")},m(a,i){v(e,a,i),h(a,t,i),h(a,o,i),h(a,s,i),l=!0},p(a,i){(!l||i&4)&&n!==(n=a[2].toLocaleString()+"")&&Le(o,n)},i(a){l||($(e.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),l=!1},d(a){a&&(d(t),d(o),d(s)),y(e,a)}}}function ua(r){let e,t,n;function o(l){r[8](l)}let s={id:"show-criticals",$$slots:{default:[fa]},$$scope:{ctx:r}};return r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),G.push(()=>x(e,"checked",o)),{c(){b(e.$$.fragment)},m(l,a){v(e,l,a),n=!0},p(l,a){const i={};a&516&&(i.$$scope={dirty:a,ctx:l}),!t&&a&1&&(t=!0,i.checked=l[0],X(()=>t=!1)),e.$set(i)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){y(e,l)}}}function ca(r){let e,t,n,o,s,l;e=new Tn({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[aa]},$$scope:{ctx:r}}}),n=new An({props:{errorMessage:r[3]}});let a=r[2]>0&&fn(r);return{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment),o=I(),a&&a.c(),s=Qe()},m(i,u){v(e,i,u),h(i,t,u),v(n,i,u),h(i,o,u),a&&a.m(i,u),h(i,s,u),l=!0},p(i,u){const f={};u&514&&(f.$$scope={dirty:u,ctx:i}),e.$set(f);const c={};u&8&&(c.errorMessage=i[3]),n.$set(c),i[2]>0?a?(a.p(i,u),u&4&&$(a,1)):(a=fn(i),a.c(),$(a,1),a.m(s.parentNode,s)):a&&(pe(),g(a,1,1,()=>{a=null}),me())},i(i){l||($(e.$$.fragment,i),$(n.$$.fragment,i),$(a),l=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),g(a),l=!1},d(i){i&&(d(t),d(o),d(s)),y(e,i),y(n,i),a&&a.d(i)}}}function pa(r){let e,t,n,o,s,l;return e=new Ye({props:{label:"Critical Issues",$$slots:{default:[ca]},$$scope:{ctx:r}}}),n=new fe({props:{layer:we+"-points",tooltip:ma,show:r[0],clickable:!1}}),s=new fe({props:{layer:we+"-clusters",show:r[0],clickable:!0,ignoreHigherLayers:[we+"-counts"]}}),s.$on("click",r[5]),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment),o=I(),b(s.$$.fragment)},m(a,i){v(e,a,i),h(a,t,i),v(n,a,i),h(a,o,i),v(s,a,i),l=!0},p(a,[i]){const u={};i&527&&(u.$$scope={dirty:i,ctx:a}),e.$set(u);const f={};i&1&&(f.show=a[0]),n.$set(f);const c={};i&1&&(c.show=a[0]),s.$set(c)},i(a){l||($(e.$$.fragment,a),$(n.$$.fragment,a),$(s.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),g(s.$$.fragment,a),l=!1},d(a){a&&(d(t),d(o)),y(e,a),y(n,a),y(s,a)}}}let we="criticals",dr="red";function ma(r){let e='<div style="max-width: 30vw;">';return e+=`<h2>${r.properties.critical_type}</h2>`,e+=`<p><u>Location</u>: ${r.properties.location_description}</p>`,e+=`<p><u>Notes</u>: ${r.properties.notes}</p>`,e+="<hr />",e+=`<p>Critical issue ID: <b>${r.properties.id}</b></p>`,e+=`<p>Submitted by <b>${r.properties.inspector??"???"}</b> at <b>${r.properties.submission_time}</b></p>`,e+=`<p>For scheme <b>${r.properties.scheme_reference}</b> in stage <b>${r.properties.current_design_stage}</b></p>`,e+="</div>",e}function ha(r,e,t){let n;q(r,he,p=>t(6,n=p));let o,s=!0,l=0,a="";$o(n,we),n.addSource(we,{type:"geojson",data:On(),cluster:!0,clusterMaxZoom:14,clusterRadius:50}),Mt(n,{id:`${we}-clusters`,source:we,filter:["has","point_count"],color:dr,opacity:.9,radius:["step",["get","point_count"],20,15,30,30,40]}),n.addLayer({id:`${we}-counts`,source:we,type:"symbol",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}"}}),Mt(n,{id:`${we}-points`,source:we,filter:["!",["has","point_count"]],color:dr,opacity:.9,radius:15,strokeColor:"black",strokeWidth:3});async function i(p){try{let m=await sl(o.files[0]);n.getSource(we).setData(m),t(2,l=m.features.length),t(3,a="")}catch(m){t(3,a=`The file you loaded is broken: ${m}`)}}function u(p){n.getSource(we).getClusterExpansionZoom(p.detail.properties.cluster_id,(m,_)=>{m||n.easeTo({center:p.detail.geometry.coordinates,zoom:_})})}function f(p){G[p?"unshift":"push"](()=>{o=p,t(1,o)})}function c(p){s=p,t(0,s)}return r.$$.update=()=>{r.$$.dirty&65&&n.getLayer(`${we}-counts`)&&n.setLayoutProperty(`${we}-counts`,"visibility",s?"visible":"none")},[s,o,l,a,i,u,n,f,c]}class da extends Z{constructor(e){super(),K(this,e,ha,pa,V,{})}}function $a(r){let e,t,n;return e=new Ee({props:{color:r[2]}}),{c(){b(e.$$.fragment),t=w(`
  Crossings`)},m(o,s){v(e,o,s),h(o,t,s),n=!0},p:ne,i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){o&&d(t),y(e,o)}}}function ga(r){let e;return{c(){e=w("crossing")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function _a(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function ba(r){let e,t,n,o,s,l,a,i,u;return n=new H({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[ga]},$$scope:{ctx:r}}}),i=new H({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[_a]},$$scope:{ctx:r}}}),{c(){e=N("p"),t=w("This shows "),b(n.$$.fragment),o=w(" data from OpenStreetMap (as of 9 August 2023)."),s=I(),l=N("p"),a=w("License: "),b(i.$$.fragment)},m(f,c){h(f,e,c),E(e,t),v(n,e,null),E(e,o),h(f,s,c),h(f,l,c),E(l,a),v(i,l,null),u=!0},p(f,c){const p={};c&64&&(p.$$scope={dirty:c,ctx:f}),n.$set(p);const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),i.$set(m)},i(f){u||($(n.$$.fragment,f),$(i.$$.fragment,f),u=!0)},o(f){g(n.$$.fragment,f),g(i.$$.fragment,f),u=!1},d(f){f&&(d(e),d(s),d(l)),y(n),y(i)}}}function va(r){let e,t,n;return t=new ue({props:{$$slots:{default:[ba]},$$scope:{ctx:r}}}),{c(){e=N("span"),b(t.$$.fragment),ee(e,"slot","right")},m(o,s){h(o,e,s),v(t,e,null),n=!0},p(o,s){const l={};s&64&&(l.$$scope={dirty:s,ctx:o}),t.$set(l)},i(o){n||($(t.$$.fragment,o),n=!0)},o(o){g(t.$$.fragment,o),n=!1},d(o){o&&d(e),y(t)}}}function ya(r){let e,t,n,o,s;function l(i){r[3](i)}let a={id:tt,$$slots:{right:[va],default:[$a]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),G.push(()=>x(e,"checked",l)),o=new fe({props:{layer:tt,tooltip:r[1],show:r[0],clickable:!0}}),o.$on("click",wa),{c(){b(e.$$.fragment),n=I(),b(o.$$.fragment)},m(i,u){v(e,i,u),h(i,n,u),v(o,i,u),s=!0},p(i,[u]){const f={};u&64&&(f.$$scope={dirty:u,ctx:i}),!t&&u&1&&(t=!0,f.checked=i[0],X(()=>t=!1)),e.$set(f);const c={};u&1&&(c.show=i[0]),o.$set(c)},i(i){s||($(e.$$.fragment,i),$(o.$$.fragment,i),s=!0)},o(i){g(e.$$.fragment,i),g(o.$$.fragment,i),s=!1},d(i){i&&d(n),y(e,i),y(o,i)}}}const tt="crossings";function wa(r){window.open(`http://openstreetmap.org/node/${r.detail.properties.osm_id}`,"_blank")}function ka(r,e,t){let n;q(r,he,u=>t(4,n=u));let o=!1;function s(u){const f=u.properties.crossing;return`<p>${l.get(f)??`Crossing with unknown type (${f})`}. Click for details.</p>`}const l=new Map([["no","Location where crossing is impossible/illegal but where there is a clear desire line to cross"],["traffic_signals","Signalised crossing"],["marked","Crossing with no traffic signals"],["uncontrolled","Crossing with no traffic signals"],["unmarked","Crossing with no markings or signals"],["zebra","Zebra crossing"],["island","Crossing with an island"],["informal","Informal crossing with an obvious desire line, but no official infrastructure to support it"]]);Se(n,tt,`${ge()}/v1/${tt}.pmtiles`);let a=Y[tt];Mt(n,{id:tt,source:tt,sourceLayer:tt,color:a,radius:["interpolate",["linear"],["zoom"],1,2,8,3,13,10]});function i(u){o=u,t(0,o)}return[o,s,a,i]}class Sa extends Z{constructor(e){super(),K(this,e,ka,ya,V,{})}}function Ca(r){let e,t,n;return e=new Ee({props:{color:r[1]}}),{c(){b(e.$$.fragment),t=w(`
  Cycle parking`)},m(o,s){v(e,o,s),h(o,t,s),n=!0},p:ne,i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){o&&d(t),y(e,o)}}}function La(r){let e;return{c(){e=w("OpenStreetMap")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Ta(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Oa(r){let e,t,n,o,s,l,a,i,u;return n=new H({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[La]},$$scope:{ctx:r}}}),i=new H({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Ta]},$$scope:{ctx:r}}}),{c(){e=N("p"),t=w("Cycle parking, according to "),b(n.$$.fragment),o=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),s=I(),l=N("p"),a=w("License: "),b(i.$$.fragment)},m(f,c){h(f,e,c),E(e,t),v(n,e,null),E(e,o),h(f,s,c),h(f,l,c),E(l,a),v(i,l,null),u=!0},p(f,c){const p={};c&16&&(p.$$scope={dirty:c,ctx:f}),n.$set(p);const m={};c&16&&(m.$$scope={dirty:c,ctx:f}),i.$set(m)},i(f){u||($(n.$$.fragment,f),$(i.$$.fragment,f),u=!0)},o(f){g(n.$$.fragment,f),g(i.$$.fragment,f),u=!1},d(f){f&&(d(e),d(s),d(l)),y(n),y(i)}}}function Aa(r){let e,t,n;return t=new ue({props:{$$slots:{default:[Oa]},$$scope:{ctx:r}}}),{c(){e=N("span"),b(t.$$.fragment),ee(e,"slot","right")},m(o,s){h(o,e,s),v(t,e,null),n=!0},p(o,s){const l={};s&16&&(l.$$scope={dirty:s,ctx:o}),t.$set(l)},i(o){n||($(t.$$.fragment,o),n=!0)},o(o){g(t.$$.fragment,o),n=!1},d(o){o&&d(e),y(t)}}}function Ia(r){let e,t,n,o,s;function l(i){r[2](i)}let a={id:at,$$slots:{right:[Aa],default:[Ca]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),G.push(()=>x(e,"checked",l)),o=new fe({props:{layer:at,tooltip:Da,show:r[0],clickable:!1}}),{c(){b(e.$$.fragment),n=I(),b(o.$$.fragment)},m(i,u){v(e,i,u),h(i,n,u),v(o,i,u),s=!0},p(i,[u]){const f={};u&16&&(f.$$scope={dirty:u,ctx:i}),!t&&u&1&&(t=!0,f.checked=i[0],X(()=>t=!1)),e.$set(f);const c={};u&1&&(c.show=i[0]),o.$set(c)},i(i){s||($(e.$$.fragment,i),$(o.$$.fragment,i),s=!0)},o(i){g(e.$$.fragment,i),g(o.$$.fragment,i),s=!1},d(i){i&&d(n),y(e,i),y(o,i)}}}let at="cycle_parking";function Da(r){return`<p>Capacity: ${r.properties.capacity??"unknown"}</p>`}function Ea(r,e,t){let n;q(r,he,a=>t(3,n=a));let o=Y.cycle_parking;Se(n,at,`${ge()}/v1/${at}.pmtiles`),Mt(n,{id:at,source:at,sourceLayer:at,color:o,radius:["interpolate",["linear"],["zoom"],1,2,8,3,13,10]});let s=!1;function l(a){s=a,t(0,s)}return[s,o,l]}class Ma extends Z{constructor(e){super(),K(this,e,Ea,Ia,V,{})}}function un(r,e,t){const n=r.slice();return n[4]=e[t][0],n[5]=e[t][1],n}function Pa(r){let e;return{c(){e=w("Cycle paths")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Na(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Fa(r){let e,t,n,o,s,l,a,i,u,f;return u=new H({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Na]},$$scope:{ctx:r}}}),{c(){e=N("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,t=I(),n=N("ul"),n.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,o=I(),s=N("p"),s.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,l=I(),a=N("p"),i=w("License: "),b(u.$$.fragment)},m(c,p){h(c,e,p),h(c,t,p),h(c,n,p),h(c,o,p),h(c,s,p),h(c,l,p),h(c,a,p),E(a,i),v(u,a,null),f=!0},p(c,p){const m={};p&256&&(m.$$scope={dirty:p,ctx:c}),u.$set(m)},i(c){f||($(u.$$.fragment,c),f=!0)},o(c){g(u.$$.fragment,c),f=!1},d(c){c&&(d(e),d(t),d(n),d(o),d(s),d(l),d(a)),y(u)}}}function Ba(r){let e,t,n;return t=new ue({props:{$$slots:{default:[Fa]},$$scope:{ctx:r}}}),{c(){e=N("span"),b(t.$$.fragment),ee(e,"slot","right")},m(o,s){h(o,e,s),v(t,e,null),n=!0},p(o,s){const l={};s&256&&(l.$$scope={dirty:s,ctx:o}),t.$set(l)},i(o){n||($(t.$$.fragment,o),n=!0)},o(o){g(t.$$.fragment,o),n=!1},d(o){o&&d(e),y(t)}}}function cn(r){let e,t,n=ot(r[1]),o=[];for(let l=0;l<n.length;l+=1)o[l]=pn(un(r,n,l));const s=l=>g(o[l],1,1,()=>{o[l]=null});return{c(){for(let l=0;l<o.length;l+=1)o[l].c();e=Qe()},m(l,a){for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(l,a);h(l,e,a),t=!0},p(l,a){if(a&2){n=ot(l[1]);let i;for(i=0;i<n.length;i+=1){const u=un(l,n,i);o[i]?(o[i].p(u,a),$(o[i],1)):(o[i]=pn(u),o[i].c(),$(o[i],1),o[i].m(e.parentNode,e))}for(pe(),i=n.length;i<o.length;i+=1)s(i);me()}},i(l){if(!t){for(let a=0;a<n.length;a+=1)$(o[a]);t=!0}},o(l){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)g(o[a]);t=!1},d(l){l&&d(e),Zt(o,l)}}}function pn(r){let e,t,n,o=r[4]+"",s,l,a;return t=new Ee({props:{color:r[5]}}),{c(){e=N("div"),b(t.$$.fragment),n=I(),s=w(o),l=I()},m(i,u){h(i,e,u),v(t,e,null),E(e,n),E(e,s),E(e,l),a=!0},p:ne,i(i){a||($(t.$$.fragment,i),a=!0)},o(i){g(t.$$.fragment,i),a=!1},d(i){i&&d(e),y(t)}}}function ja(r){let e,t,n,o,s,l;function a(f){r[2](f)}let i={id:ft,$$slots:{right:[Ba],default:[Pa]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new le({props:i}),G.push(()=>x(e,"checked",a));let u=r[0]&&cn(r);return s=new fe({props:{layer:ft,tooltip:za,show:r[0],clickable:!0}}),s.$on("click",Ra),{c(){b(e.$$.fragment),n=I(),u&&u.c(),o=I(),b(s.$$.fragment)},m(f,c){v(e,f,c),h(f,n,c),u&&u.m(f,c),h(f,o,c),v(s,f,c),l=!0},p(f,[c]){const p={};c&256&&(p.$$scope={dirty:c,ctx:f}),!t&&c&1&&(t=!0,p.checked=f[0],X(()=>t=!1)),e.$set(p),f[0]?u?(u.p(f,c),c&1&&$(u,1)):(u=cn(f),u.c(),$(u,1),u.m(o.parentNode,o)):u&&(pe(),g(u,1,1,()=>{u=null}),me());const m={};c&1&&(m.show=f[0]),s.$set(m)},i(f){l||($(e.$$.fragment,f),$(u),$(s.$$.fragment,f),l=!0)},o(f){g(e.$$.fragment,f),g(u),g(s.$$.fragment,f),l=!1},d(f){f&&(d(n),d(o)),y(e,f),u&&u.d(f),y(s,f)}}}let ft="cycle_paths";function za(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.properties.kind],t={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.properties.direction],n=r.properties.width=="unknown"?"unknown":`${r.properties.width} meters`,o=`<h2>${e}</h2>`;return o+=`<p>Direction: <b>${t} ${r.properties.direction}</b></p>`,o+=`<p>Width: <b>${n}</b></p>`,o}function Ra(r){window.open(`http://openstreetmap.org/way/${r.detail.properties.osm_id}`,"_blank")}function Ha(r,e,t){let n;q(r,he,a=>t(3,n=a));let o=[["Separated tracks",Y.cycle_paths.track],["Unprotected lanes",Y.cycle_paths.lane],["Shared-use (segregated)",Y.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",Y.cycle_paths.shared_use_unsegregated]];Se(n,ft,`${ge()}/v1/${ft}.pmtiles`),Ue(n,{id:ft,source:ft,sourceLayer:ft,color:Ln(["get","kind"],{track:Y.cycle_paths.track,lane:Y.cycle_paths.lane,shared_use_segregated:Y.cycle_paths.shared_use_segregated,shared_use_unsegregated:Y.cycle_paths.shared_use_unsegregated},"red"),width:Yt,opacity:Pe(.5,1)});let s=!1;function l(a){s=a,t(0,s)}return[s,o,l]}class Ua extends Z{constructor(e){super(),K(this,e,Ha,ja,V,{})}}function Wa(r){let e,t,n,o;return e=new Ee({props:{color:r[3]}}),{c(){b(e.$$.fragment),t=I(),n=w(r[1])},m(s,l){v(e,s,l),h(s,t,l),h(s,n,l),o=!0},p(s,l){(!o||l&2)&&Le(n,s[1])},i(s){o||($(e.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),o=!1},d(s){s&&(d(t),d(n)),y(e,s)}}}function Va(r){let e;const t=r[6].default,n=$t(t,r,r[8],null);return{c(){n&&n.c()},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&256)&&gt(n,t,o,o[8],e?bt(t,o[8],s,null):_t(o[8]),null)},i(o){e||($(n,o),e=!0)},o(o){g(n,o),e=!1},d(o){n&&n.d(o)}}}function Ga(r){let e,t,n;return t=new ue({props:{$$slots:{default:[Va]},$$scope:{ctx:r}}}),{c(){e=N("span"),b(t.$$.fragment),ee(e,"slot","right")},m(o,s){h(o,e,s),v(t,e,null),n=!0},p(o,s){const l={};s&256&&(l.$$scope={dirty:s,ctx:o}),t.$set(l)},i(o){n||($(t.$$.fragment,o),n=!0)},o(o){g(t.$$.fragment,o),n=!1},d(o){o&&d(e),y(t)}}}function Za(r){let e,t,n,o,s;function l(i){r[7](i)}let a={id:r[0],$$slots:{right:[Ga],default:[Wa]},$$scope:{ctx:r}};return r[2]!==void 0&&(a.checked=r[2]),e=new le({props:a}),G.push(()=>x(e,"checked",l)),o=new fe({props:{layer:r[0],tooltip:r[4],show:r[2],clickable:!1}}),{c(){b(e.$$.fragment),n=I(),b(o.$$.fragment)},m(i,u){v(e,i,u),h(i,n,u),v(o,i,u),s=!0},p(i,[u]){const f={};u&1&&(f.id=i[0]),u&258&&(f.$$scope={dirty:u,ctx:i}),!t&&u&4&&(t=!0,f.checked=i[2],X(()=>t=!1)),e.$set(f);const c={};u&1&&(c.layer=i[0]),u&4&&(c.show=i[2]),o.$set(c)},i(i){s||($(e.$$.fragment,i),$(o.$$.fragment,i),s=!0)},o(i){g(e.$$.fragment,i),g(o.$$.fragment,i),s=!1},d(i){i&&d(n),y(e,i),y(o,i)}}}function Ka(r,e,t){let n;q(r,he,m=>t(9,n=m));let{$$slots:o={},$$scope:s}=e,{name:l}=e,{singularNoun:a}=e,{pluralNoun:i}=e,u=Y[l];Se(n,l,`${ge()}/v1/${l}.pmtiles`),Ct(n,{id:l,source:l,sourceLayer:l,color:u,opacity:Pe(1,.7)});let f=!1;function c(m){return`<p>${m.properties.name??`Unnamed ${a}`}</p>`}function p(m){f=m,t(2,f)}return r.$$set=m=>{"name"in m&&t(0,l=m.name),"singularNoun"in m&&t(5,a=m.singularNoun),"pluralNoun"in m&&t(1,i=m.pluralNoun),"$$scope"in m&&t(8,s=m.$$scope)},[l,i,f,u,c,a,o,p,s]}class Cr extends Z{constructor(e){super(),K(this,e,Ka,Za,V,{name:0,singularNoun:5,pluralNoun:1})}}function qa(r){let e;return{c(){e=w("hospital")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function xa(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Xa(r){let e,t,n,o,s,l,a,i,u;return n=new H({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[qa]},$$scope:{ctx:r}}}),i=new H({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[xa]},$$scope:{ctx:r}}}),{c(){e=N("p"),t=w("This shows "),b(n.$$.fragment),o=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),s=I(),l=N("p"),a=w("License: "),b(i.$$.fragment)},m(f,c){h(f,e,c),E(e,t),v(n,e,null),E(e,o),h(f,s,c),h(f,l,c),E(l,a),v(i,l,null),u=!0},p(f,c){const p={};c&1&&(p.$$scope={dirty:c,ctx:f}),n.$set(p);const m={};c&1&&(m.$$scope={dirty:c,ctx:f}),i.$set(m)},i(f){u||($(n.$$.fragment,f),$(i.$$.fragment,f),u=!0)},o(f){g(n.$$.fragment,f),g(i.$$.fragment,f),u=!1},d(f){f&&(d(e),d(s),d(l)),y(n),y(i)}}}function Ya(r){let e,t;return e=new Cr({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Xa]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(n,o){v(e,n,o),t=!0},p(n,[o]){const s={};o&1&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){y(e,n)}}}class Ja extends Z{constructor(e){super(),K(this,e,null,Ya,V,{})}}function Qa(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function ef(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function tf(r){let e;return{c(){e=w(`here
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function rf(r){let e;return{c(){e=w(`Open Government License
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function nf(r){let e,t,n,o,s,l,a,i,u,f,c,p;return n=new H({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[ef]},$$scope:{ctx:r}}}),s=new H({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[tf]},$$scope:{ctx:r}}}),f=new H({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[rf]},$$scope:{ctx:r}}}),{c(){e=N("p"),t=w("The 2019 English IMD scores come from "),b(n.$$.fragment),o=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),b(s.$$.fragment),l=w("."),a=I(),i=N("p"),u=w("License: "),b(f.$$.fragment),c=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(m,_){h(m,e,_),E(e,t),v(n,e,null),E(e,o),v(s,e,null),E(e,l),h(m,a,_),h(m,i,_),E(i,u),v(f,i,null),E(i,c),p=!0},p(m,_){const k={};_&64&&(k.$$scope={dirty:_,ctx:m}),n.$set(k);const L={};_&64&&(L.$$scope={dirty:_,ctx:m}),s.$set(L);const T={};_&64&&(T.$$scope={dirty:_,ctx:m}),f.$set(T)},i(m){p||($(n.$$.fragment,m),$(s.$$.fragment,m),$(f.$$.fragment,m),p=!0)},o(m){g(n.$$.fragment,m),g(s.$$.fragment,m),g(f.$$.fragment,m),p=!1},d(m){m&&(d(e),d(a),d(i)),y(n),y(s),y(f)}}}function of(r){let e,t,n;return t=new ue({props:{$$slots:{default:[nf]},$$scope:{ctx:r}}}),{c(){e=N("span"),b(t.$$.fragment),ee(e,"slot","right")},m(o,s){h(o,e,s),v(t,e,null),n=!0},p(o,s){const l={};s&64&&(l.$$scope={dirty:s,ctx:o}),t.$set(l)},i(o){n||($(t.$$.fragment,o),n=!0)},o(o){g(t.$$.fragment,o),n=!1},d(o){o&&d(e),y(t)}}}function mn(r){let e,t;return e=new it({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){b(e.$$.fragment)},m(n,o){v(e,n,o),t=!0},p:ne,i(n){t||($(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){y(e,n)}}}function sf(r){let e,t,n,o,s,l;function a(f){r[3](f)}let i={id:Ve,$$slots:{right:[of],default:[Qa]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new le({props:i}),G.push(()=>x(e,"checked",a));let u=r[0]&&mn(r);return s=new fe({props:{layer:Ve,tooltip:lf,show:r[0],clickable:!1}}),{c(){b(e.$$.fragment),n=I(),u&&u.c(),o=I(),b(s.$$.fragment)},m(f,c){v(e,f,c),h(f,n,c),u&&u.m(f,c),h(f,o,c),v(s,f,c),l=!0},p(f,[c]){const p={};c&64&&(p.$$scope={dirty:c,ctx:f}),!t&&c&1&&(t=!0,p.checked=f[0],X(()=>t=!1)),e.$set(p),f[0]?u?(u.p(f,c),c&1&&$(u,1)):(u=mn(f),u.c(),$(u,1),u.m(o.parentNode,o)):u&&(pe(),g(u,1,1,()=>{u=null}),me());const m={};c&1&&(m.show=f[0]),s.$set(m)},i(f){l||($(e.$$.fragment,f),$(u),$(s.$$.fragment,f),l=!0)},o(f){g(e.$$.fragment,f),g(u),g(s.$$.fragment,f),l=!1},d(f){f&&(d(n),d(o)),y(e,f),u&&u.d(f),y(s,f)}}}let Ve="imd";function lf(r){return`<p>${r.properties.LSOA11CD} has an IMD score of <b>${r.properties.score}</b></p><p>Rank: <b>${r.properties.rank.toLocaleString()}</b> / 32,844 LSOAs</p>`}function af(r,e,t){let n;q(r,he,u=>t(2,n=u));let o=`${Ve}-outline`,s=Y.sequential_low_to_high,l=[0,2,4,6,8,10];Se(n,Ve,`${ge()}/v1/${Ve}.pmtiles`),Ct(n,{id:Ve,source:Ve,sourceLayer:Ve,color:st(["-",10,["get","decile"]],l,s),opacity:Pe(.5,.7)}),Ue(n,{id:o,source:Ve,sourceLayer:Ve,color:"black",width:.5});let a=!1;function i(u){a=u,t(0,a)}return r.$$.update=()=>{r.$$.dirty&5&&n.getLayer(o)&&n.setLayoutProperty(o,"visibility",a?"visible":"none")},[a,s,n,i]}class ff extends Z{constructor(e){super(),K(this,e,af,sf,V,{})}}function uf(r){let e,t,n;return e=new Ee({props:{color:r[2]}}),{c(){b(e.$$.fragment),t=w(`
  Local Authority Districts`)},m(o,s){v(e,o,s),h(o,t,s),n=!0},p:ne,i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){o&&d(t),y(e,o)}}}function cf(r){let e;return{c(){e=w(`ONS Geography
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function pf(r){let e;return{c(){e=w(`Open Government License
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function mf(r){let e,t,n,o,s,l,a,i,u,f;return n=new H({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[cf]},$$scope:{ctx:r}}}),i=new H({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[pf]},$$scope:{ctx:r}}}),{c(){e=N("p"),t=w("Data from "),b(n.$$.fragment),o=w(", as of May 2023."),s=I(),l=N("p"),a=w("License: "),b(i.$$.fragment),u=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(c,p){h(c,e,p),E(e,t),v(n,e,null),E(e,o),h(c,s,p),h(c,l,p),E(l,a),v(i,l,null),E(l,u),f=!0},p(c,p){const m={};p&64&&(m.$$scope={dirty:p,ctx:c}),n.$set(m);const _={};p&64&&(_.$$scope={dirty:p,ctx:c}),i.$set(_)},i(c){f||($(n.$$.fragment,c),$(i.$$.fragment,c),f=!0)},o(c){g(n.$$.fragment,c),g(i.$$.fragment,c),f=!1},d(c){c&&(d(e),d(s),d(l)),y(n),y(i)}}}function hf(r){let e,t,n;return t=new ue({props:{$$slots:{default:[mf]},$$scope:{ctx:r}}}),{c(){e=N("span"),b(t.$$.fragment),ee(e,"slot","right")},m(o,s){h(o,e,s),v(t,e,null),n=!0},p(o,s){const l={};s&64&&(l.$$scope={dirty:s,ctx:o}),t.$set(l)},i(o){n||($(t.$$.fragment,o),n=!0)},o(o){g(t.$$.fragment,o),n=!1},d(o){o&&d(e),y(t)}}}function df(r){let e,t=r[5][0].properties.name+"",n;return{c(){e=N("p"),n=w(t)},m(o,s){h(o,e,s),E(e,n)},p(o,s){s&32&&t!==(t=o[5][0].properties.name+"")&&Le(n,t)},d(o){o&&d(e)}}}function $f(r){let e,t;return e=new kr({props:{openOn:"hover",$$slots:{default:[df,({features:n})=>({5:n}),({features:n})=>n?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(n,o){v(e,n,o),t=!0},p(n,o){const s={};o&96&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){y(e,n)}}}function gf(r){let e,t,n,o;return e=new Mn({props:{id:Dt,paint:{"fill-color":r[2],"fill-opacity":En(0,.5)},layout:{visibility:r[1]},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[$f]},$$scope:{ctx:r}}}),e.$on("click",bf),n=new Pn({props:{id:r[3],paint:{"line-color":r[2],"line-width":2.5},layout:{visibility:r[1]}}}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment)},m(s,l){v(e,s,l),h(s,t,l),v(n,s,l),o=!0},p(s,l){const a={};l&2&&(a.layout={visibility:s[1]}),l&64&&(a.$$scope={dirty:l,ctx:s}),e.$set(a);const i={};l&2&&(i.layout={visibility:s[1]}),n.$set(i)},i(s){o||($(e.$$.fragment,s),$(n.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(n.$$.fragment,s),o=!1},d(s){s&&d(t),y(e,s),y(n,s)}}}function _f(r){let e,t,n,o,s;function l(i){r[4](i)}let a={id:Dt,$$slots:{right:[hf],default:[uf]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),G.push(()=>x(e,"checked",l)),o=new wr({props:{id:Dt,data:`${ge()}/v1/${Dt}.geojson`,$$slots:{default:[gf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=I(),b(o.$$.fragment)},m(i,u){v(e,i,u),h(i,n,u),v(o,i,u),s=!0},p(i,[u]){const f={};u&64&&(f.$$scope={dirty:u,ctx:i}),!t&&u&1&&(t=!0,f.checked=i[0],X(()=>t=!1)),e.$set(f);const c={};u&66&&(c.$$scope={dirty:u,ctx:i}),o.$set(c)},i(i){s||($(e.$$.fragment,i),$(o.$$.fragment,i),s=!0)},o(i){g(e.$$.fragment,i),g(o.$$.fragment,i),s=!1},d(i){i&&d(n),y(e,i),y(o,i)}}}let Dt="local_authority_districts";function bf(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function vf(r,e,t){let n,o=Y.local_authority_districts,s=`${Dt}-outline`,l=!1;function a(i){l=i,t(0,l)}return r.$$.update=()=>{r.$$.dirty&1&&t(1,n=l?"visible":"none")},[l,n,o,s,a]}class yf extends Z{constructor(e){super(),K(this,e,vf,_f,V,{})}}function wf(r){let e,t,n;return e=new Ee({props:{color:r[1]}}),{c(){b(e.$$.fragment),t=w(`
  Local Planning Authorities`)},m(o,s){v(e,o,s),h(o,t,s),n=!0},p:ne,i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){o&&d(t),y(e,o)}}}function kf(r){let e;return{c(){e=w(`local authority
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Sf(r){let e;return{c(){e=w(`national park authorit
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Cf(r){let e;return{c(){e=w(`development corporation
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Lf(r){let e;return{c(){e=w("this map")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Tf(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Of(r){let e;return{c(){e=w(`Open Government License
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Af(r){let e,t,n,o,s,l,a,i,u,f,c,p,m,_,k,L,T,D,B,C,A,j,M,P,O;return n=new H({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[kf]},$$scope:{ctx:r}}}),s=new H({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Sf]},$$scope:{ctx:r}}}),a=new H({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Cf]},$$scope:{ctx:r}}}),m=new H({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Lf]},$$scope:{ctx:r}}}),D=new H({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Tf]},$$scope:{ctx:r}}}),M=new H({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Of]},$$scope:{ctx:r}}}),{c(){e=N("p"),t=w("LPAs may be a "),b(n.$$.fragment),o=w(", "),b(s.$$.fragment),l=w("y, or "),b(a.$$.fragment),i=w("."),u=I(),f=N("p"),c=N("strong"),p=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),b(m.$$.fragment),_=w(" to get more details."),k=I(),L=N("p"),T=w("Data from ONS Geography via "),b(D.$$.fragment),B=w(", as of November 2022."),C=I(),A=N("p"),j=w("License: "),b(M.$$.fragment),P=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(S,R){h(S,e,R),E(e,t),v(n,e,null),E(e,o),v(s,e,null),E(e,l),v(a,e,null),E(e,i),h(S,u,R),h(S,f,R),E(f,c),E(c,p),v(m,c,null),E(c,_),h(S,k,R),h(S,L,R),E(L,T),v(D,L,null),E(L,B),h(S,C,R),h(S,A,R),E(A,j),v(M,A,null),E(A,P),O=!0},p(S,R){const U={};R&32&&(U.$$scope={dirty:R,ctx:S}),n.$set(U);const W={};R&32&&(W.$$scope={dirty:R,ctx:S}),s.$set(W);const te={};R&32&&(te.$$scope={dirty:R,ctx:S}),a.$set(te);const ce={};R&32&&(ce.$$scope={dirty:R,ctx:S}),m.$set(ce);const J={};R&32&&(J.$$scope={dirty:R,ctx:S}),D.$set(J);const ie={};R&32&&(ie.$$scope={dirty:R,ctx:S}),M.$set(ie)},i(S){O||($(n.$$.fragment,S),$(s.$$.fragment,S),$(a.$$.fragment,S),$(m.$$.fragment,S),$(D.$$.fragment,S),$(M.$$.fragment,S),O=!0)},o(S){g(n.$$.fragment,S),g(s.$$.fragment,S),g(a.$$.fragment,S),g(m.$$.fragment,S),g(D.$$.fragment,S),g(M.$$.fragment,S),O=!1},d(S){S&&(d(e),d(u),d(f),d(k),d(L),d(C),d(A)),y(n),y(s),y(a),y(m),y(D),y(M)}}}function If(r){let e,t,n;return t=new ue({props:{$$slots:{default:[Af]},$$scope:{ctx:r}}}),{c(){e=N("span"),b(t.$$.fragment),ee(e,"slot","right")},m(o,s){h(o,e,s),v(t,e,null),n=!0},p(o,s){const l={};s&32&&(l.$$scope={dirty:s,ctx:o}),t.$set(l)},i(o){n||($(t.$$.fragment,o),n=!0)},o(o){g(t.$$.fragment,o),n=!1},d(o){o&&d(e),y(t)}}}function Df(r){let e,t,n,o,s;function l(i){r[3](i)}let a={id:Ge,$$slots:{right:[If],default:[wf]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),G.push(()=>x(e,"checked",l)),o=new fe({props:{layer:Ge,tooltip:Ef,show:r[0],clickable:!1}}),{c(){b(e.$$.fragment),n=I(),b(o.$$.fragment)},m(i,u){v(e,i,u),h(i,n,u),v(o,i,u),s=!0},p(i,[u]){const f={};u&32&&(f.$$scope={dirty:u,ctx:i}),!t&&u&1&&(t=!0,f.checked=i[0],X(()=>t=!1)),e.$set(f);const c={};u&1&&(c.show=i[0]),o.$set(c)},i(i){s||($(e.$$.fragment,i),$(o.$$.fragment,i),s=!0)},o(i){g(e.$$.fragment,i),g(o.$$.fragment,i),s=!1},d(i){i&&d(n),y(e,i),y(o,i)}}}let Ge="local_planning_authorities";function Ef(r){return`<p>${r.properties.name}</p>`}function Mf(r,e,t){let n;q(r,he,i=>t(2,n=i));let o=Y.local_planning_authorities,s=`${Ge}-outline`;Se(n,Ge,`${ge()}/v1/${Ge}.pmtiles`),Ct(n,{id:Ge,source:Ge,sourceLayer:Ge,color:o,opacity:Pe(.5,0)}),Ue(n,{id:s,source:Ge,sourceLayer:Ge,color:o,width:2.5});let l=!1;function a(i){l=i,t(0,l)}return r.$$.update=()=>{r.$$.dirty&5&&n.getLayer(s)&&n.setLayoutProperty(s,"visibility",l?"visible":"none")},[l,o,n,a]}class Pf extends Z{constructor(e){super(),K(this,e,Mf,Df,V,{})}}function Nf(r){let e,t,n;return e=new Ee({props:{color:r[1]}}),{c(){b(e.$$.fragment),t=w(`
  Major Road Network`)},m(o,s){v(e,o,s),h(o,t,s),n=!0},p:ne,i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){o&&d(t),y(e,o)}}}function Ff(r){let e;return{c(){e=w(`Major Road Network
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Bf(r){let e;return{c(){e=w("Open Government License")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function jf(r){let e,t,n,o,s,l,a,i,u;return n=new H({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Ff]},$$scope:{ctx:r}}}),i=new H({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Bf]},$$scope:{ctx:r}}}),{c(){e=N("p"),t=w("Data from the "),b(n.$$.fragment),o=w(", as of September 2021."),s=I(),l=N("p"),a=w("License: "),b(i.$$.fragment)},m(f,c){h(f,e,c),E(e,t),v(n,e,null),E(e,o),h(f,s,c),h(f,l,c),E(l,a),v(i,l,null),u=!0},p(f,c){const p={};c&16&&(p.$$scope={dirty:c,ctx:f}),n.$set(p);const m={};c&16&&(m.$$scope={dirty:c,ctx:f}),i.$set(m)},i(f){u||($(n.$$.fragment,f),$(i.$$.fragment,f),u=!0)},o(f){g(n.$$.fragment,f),g(i.$$.fragment,f),u=!1},d(f){f&&(d(e),d(s),d(l)),y(n),y(i)}}}function zf(r){let e,t,n;return t=new ue({props:{$$slots:{default:[jf]},$$scope:{ctx:r}}}),{c(){e=N("span"),b(t.$$.fragment),ee(e,"slot","right")},m(o,s){h(o,e,s),v(t,e,null),n=!0},p(o,s){const l={};s&16&&(l.$$scope={dirty:s,ctx:o}),t.$set(l)},i(o){n||($(t.$$.fragment,o),n=!0)},o(o){g(t.$$.fragment,o),n=!1},d(o){o&&d(e),y(t)}}}function Rf(r){let e,t,n,o,s;function l(i){r[2](i)}let a={id:ut,$$slots:{right:[zf],default:[Nf]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),G.push(()=>x(e,"checked",l)),o=new fe({props:{layer:ut,tooltip:Hf,show:r[0],clickable:!1}}),{c(){b(e.$$.fragment),n=I(),b(o.$$.fragment)},m(i,u){v(e,i,u),h(i,n,u),v(o,i,u),s=!0},p(i,[u]){const f={};u&16&&(f.$$scope={dirty:u,ctx:i}),!t&&u&1&&(t=!0,f.checked=i[0],X(()=>t=!1)),e.$set(f);const c={};u&1&&(c.show=i[0]),o.$set(c)},i(i){s||($(e.$$.fragment,i),$(o.$$.fragment,i),s=!0)},o(i){g(e.$$.fragment,i),g(o.$$.fragment,i),s=!1},d(i){i&&d(n),y(e,i),y(o,i)}}}let ut="mrn";function Hf(r){return`<p>${r.properties.name??"Unknown MRN road"}</p>`}function Uf(r,e,t){let n;q(r,he,a=>t(3,n=a));let o=Y.mrn;Se(n,ut,`${ge()}/v1/${ut}.pmtiles`),Ue(n,{id:ut,source:ut,sourceLayer:ut,color:o,width:7,opacity:Pe(.5,1)});let s=!1;function l(a){s=a,t(0,s)}return[s,o,l]}class Wf extends Z{constructor(e){super(),K(this,e,Uf,Rf,V,{})}}function Vf(r){let e,t,n;return e=new Ee({props:{color:r[1]}}),{c(){b(e.$$.fragment),t=w(`
  Parliamentary constituencies`)},m(o,s){v(e,o,s),h(o,t,s),n=!0},p:ne,i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){o&&d(t),y(e,o)}}}function Gf(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Zf(r){let e;return{c(){e=w("Open Government License")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Kf(r){let e,t,n,o,s,l,a,i,u;return n=new H({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Gf]},$$scope:{ctx:r}}}),i=new H({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Zf]},$$scope:{ctx:r}}}),{c(){e=N("p"),t=w("Data from "),b(n.$$.fragment),o=w(", as of May 2023."),s=I(),l=N("p"),a=w("License: "),b(i.$$.fragment)},m(f,c){h(f,e,c),E(e,t),v(n,e,null),E(e,o),h(f,s,c),h(f,l,c),E(l,a),v(i,l,null),u=!0},p(f,c){const p={};c&32&&(p.$$scope={dirty:c,ctx:f}),n.$set(p);const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),i.$set(m)},i(f){u||($(n.$$.fragment,f),$(i.$$.fragment,f),u=!0)},o(f){g(n.$$.fragment,f),g(i.$$.fragment,f),u=!1},d(f){f&&(d(e),d(s),d(l)),y(n),y(i)}}}function qf(r){let e,t,n;return t=new ue({props:{$$slots:{default:[Kf]},$$scope:{ctx:r}}}),{c(){e=N("span"),b(t.$$.fragment),ee(e,"slot","right")},m(o,s){h(o,e,s),v(t,e,null),n=!0},p(o,s){const l={};s&32&&(l.$$scope={dirty:s,ctx:o}),t.$set(l)},i(o){n||($(t.$$.fragment,o),n=!0)},o(o){g(t.$$.fragment,o),n=!1},d(o){o&&d(e),y(t)}}}function xf(r){let e,t,n,o,s;function l(i){r[3](i)}let a={id:Ze,$$slots:{right:[qf],default:[Vf]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),G.push(()=>x(e,"checked",l)),o=new fe({props:{layer:Ze,tooltip:Xf,show:r[0],clickable:!0}}),o.$on("click",Yf),{c(){b(e.$$.fragment),n=I(),b(o.$$.fragment)},m(i,u){v(e,i,u),h(i,n,u),v(o,i,u),s=!0},p(i,[u]){const f={};u&32&&(f.$$scope={dirty:u,ctx:i}),!t&&u&1&&(t=!0,f.checked=i[0],X(()=>t=!1)),e.$set(f);const c={};u&1&&(c.show=i[0]),o.$set(c)},i(i){s||($(e.$$.fragment,i),$(o.$$.fragment,i),s=!0)},o(i){g(e.$$.fragment,i),g(o.$$.fragment,i),s=!1},d(i){i&&d(n),y(e,i),y(o,i)}}}let Ze="parliamentary_constituencies";function Xf(r){return`<p>${r.properties.Name}</p>`}function Yf(r){let e=r.detail.properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Jf(r,e,t){let n;q(r,he,i=>t(2,n=i));let o=Y.parliamentary_constituencies,s=`${Ze}-outline`;Se(n,Ze,`${ge()}/v1/${Ze}.pmtiles`),Ct(n,{id:Ze,source:Ze,sourceLayer:Ze,color:o,opacity:Pe(.5,0)}),Ue(n,{id:s,source:Ze,sourceLayer:Ze,color:o,width:5});let l=!1;function a(i){l=i,t(0,l)}return r.$$.update=()=>{r.$$.dirty&5&&n.getLayer(s)&&n.setLayoutProperty(s,"visibility",l?"visible":"none")},[l,o,n,a]}class Qf extends Z{constructor(e){super(),K(this,e,Jf,xf,V,{})}}function eu(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function tu(r){let e;return{c(){e=w("the PCT website")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function ru(r){let e;return{c(){e=w("2017 journal article")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function nu(r){let e,t,n,o,s,l,a,i,u,f,c;return a=new H({props:{href:"https://www.pct.bike",$$slots:{default:[tu]},$$scope:{ctx:r}}}),u=new H({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[ru]},$$scope:{ctx:r}}}),{c(){e=N("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,t=I(),n=N("p"),n.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,o=I(),s=N("p"),l=w("See "),b(a.$$.fragment),i=w(" and "),b(u.$$.fragment),f=w(" for details on methodology and data sources.")},m(p,m){h(p,e,m),h(p,t,m),h(p,n,m),h(p,o,m),h(p,s,m),E(s,l),v(a,s,null),E(s,i),v(u,s,null),E(s,f),c=!0},p(p,m){const _={};m&2048&&(_.$$scope={dirty:m,ctx:p}),a.$set(_);const k={};m&2048&&(k.$$scope={dirty:m,ctx:p}),u.$set(k)},i(p){c||($(a.$$.fragment,p),$(u.$$.fragment,p),c=!0)},o(p){g(a.$$.fragment,p),g(u.$$.fragment,p),c=!1},d(p){p&&(d(e),d(t),d(n),d(o),d(s)),y(a),y(u)}}}function ou(r){let e,t,n;return t=new ue({props:{$$slots:{default:[nu]},$$scope:{ctx:r}}}),{c(){e=N("span"),b(t.$$.fragment),ee(e,"slot","right")},m(o,s){h(o,e,s),v(t,e,null),n=!0},p(o,s){const l={};s&2048&&(l.$$scope={dirty:s,ctx:o}),t.$set(l)},i(o){n||($(t.$$.fragment,o),n=!0)},o(o){g(t.$$.fragment,o),n=!1},d(o){o&&d(e),y(t)}}}function hn(r){let e,t,n,o,s,l,a,i;e=new it({props:{colorScale:r[3],limits:r[4]}});function u(m){r[8](m)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),n=new In({props:f}),G.push(()=>x(n,"value",u)),n.$on("change",r[6]);function c(m){r[9](m)}let p={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(p.value=r[1]),l=new Kt({props:p}),G.push(()=>x(l,"value",c)),l.$on("change",r[6]),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment),s=I(),b(l.$$.fragment)},m(m,_){v(e,m,_),h(m,t,_),v(n,m,_),h(m,s,_),v(l,m,_),i=!0},p(m,_){const k={};!o&&_&1&&(o=!0,k.value=m[0],X(()=>o=!1)),n.$set(k);const L={};!a&&_&2&&(a=!0,L.value=m[1],X(()=>a=!1)),l.$set(L)},i(m){i||($(e.$$.fragment,m),$(n.$$.fragment,m),$(l.$$.fragment,m),i=!0)},o(m){g(e.$$.fragment,m),g(n.$$.fragment,m),g(l.$$.fragment,m),i=!1},d(m){m&&(d(t),d(s)),y(e,m),y(n,m),y(l,m)}}}function su(r){let e,t,n,o,s,l,a,i;function u(p){r[7](p)}let f={id:ht,$$slots:{right:[ou],default:[eu]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new le({props:f}),G.push(()=>x(e,"checked",u));let c=r[2]&&hn(r);return s=new fe({props:{layer:ht,tooltip:r[5],show:r[2]&&r[0]==ht,clickable:!1}}),a=new fe({props:{layer:Vt,tooltip:r[5],show:r[2]&&r[0]==Vt,clickable:!1}}),{c(){b(e.$$.fragment),n=I(),c&&c.c(),o=I(),b(s.$$.fragment),l=I(),b(a.$$.fragment)},m(p,m){v(e,p,m),h(p,n,m),c&&c.m(p,m),h(p,o,m),v(s,p,m),h(p,l,m),v(a,p,m),i=!0},p(p,[m]){const _={};m&2048&&(_.$$scope={dirty:m,ctx:p}),!t&&m&4&&(t=!0,_.checked=p[2],X(()=>t=!1)),e.$set(_),p[2]?c?(c.p(p,m),m&4&&$(c,1)):(c=hn(p),c.c(),$(c,1),c.m(o.parentNode,o)):c&&(pe(),g(c,1,1,()=>{c=null}),me());const k={};m&5&&(k.show=p[2]&&p[0]==ht),s.$set(k);const L={};m&5&&(L.show=p[2]&&p[0]==Vt),a.$set(L)},i(p){i||($(e.$$.fragment,p),$(c),$(s.$$.fragment,p),$(a.$$.fragment,p),i=!0)},o(p){g(e.$$.fragment,p),g(c),g(s.$$.fragment,p),g(a.$$.fragment,p),i=!1},d(p){p&&(d(n),d(o),d(l)),y(e,p),c&&c.d(p),y(s,p),y(a,p)}}}let ht="pct_commute",Vt="pct_school";function iu(r,e,t){let n;q(r,he,_=>t(10,n=_));let o=Y.sequential_low_to_high,s=[0,50,100,500,1e3,2e3],l=ht,a="baseline";for(let _ of[ht,Vt])Se(n,_,`${ge()}/v1/${_}.pmtiles`),Ue(n,{id:_,source:_,sourceLayer:_,color:st(["get",a],s,o),width:Yt,opacity:Pe(.5,1)});let i=!1;function u(_){let k=_.properties.baseline,L=_.properties.gov_target,T=_.properties.go_dutch,D=`<h2>Trip purpose: ${l==ht?"commuting":"school"}</h2>`;if(D+=`<p>Baseline (2011): <b>${k.toLocaleString()}</b></p>`,k==0)D+=`<p>Government target (2025): <b>${L.toLocaleString()}</b></p>`,D+=`<p>Go Dutch: <b>${T.toLocaleString()}</b></p>`;else{let B=(L/k).toFixed(1),C=(T/k).toFixed(1);D+=`<p>Government target (2025): ${L.toLocaleString()} (<b>${B}x</b> of baseline)</p>`,D+=`<p>Go Dutch: ${T.toLocaleString()} (<b>${C}x</b> of baseline)</p>`}return D}function f(){n.setPaintProperty(l,"line-color",st(["get",a],s,o))}function c(_){i=_,t(2,i)}function p(_){l=_,t(0,l)}function m(_){a=_,t(1,a)}return[l,a,i,o,s,u,f,c,p,m]}class lu extends Z{constructor(e){super(),K(this,e,iu,su,V,{})}}function au(r){let e,t,n;return e=new Ee({props:{color:r[2]}}),{c(){b(e.$$.fragment),t=w(`
  Railway Stations`)},m(o,s){v(e,o,s),h(o,t,s),n=!0},p:ne,i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){o&&d(t),y(e,o)}}}function fu(r){let e;return{c(){e=w("railway station")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function uu(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function cu(r){let e,t,n,o,s,l,a,i,u;return n=new H({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[fu]},$$scope:{ctx:r}}}),i=new H({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[uu]},$$scope:{ctx:r}}}),{c(){e=N("p"),t=w("This shows "),b(n.$$.fragment),o=w(" data from OpenStreetMap (as of 9 August 2023)."),s=I(),l=N("p"),a=w("License: "),b(i.$$.fragment)},m(f,c){h(f,e,c),E(e,t),v(n,e,null),E(e,o),h(f,s,c),h(f,l,c),E(l,a),v(i,l,null),u=!0},p(f,c){const p={};c&32&&(p.$$scope={dirty:c,ctx:f}),n.$set(p);const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),i.$set(m)},i(f){u||($(n.$$.fragment,f),$(i.$$.fragment,f),u=!0)},o(f){g(n.$$.fragment,f),g(i.$$.fragment,f),u=!1},d(f){f&&(d(e),d(s),d(l)),y(n),y(i)}}}function pu(r){let e,t,n;return t=new ue({props:{$$slots:{default:[cu]},$$scope:{ctx:r}}}),{c(){e=N("span"),b(t.$$.fragment),ee(e,"slot","right")},m(o,s){h(o,e,s),v(t,e,null),n=!0},p(o,s){const l={};s&32&&(l.$$scope={dirty:s,ctx:o}),t.$set(l)},i(o){n||($(t.$$.fragment,o),n=!0)},o(o){g(t.$$.fragment,o),n=!1},d(o){o&&d(e),y(t)}}}function mu(r){let e,t=dn(r[4][0])+"",n;return{c(){e=N("p"),n=w(t)},m(o,s){h(o,e,s),E(e,n)},p(o,s){s&16&&t!==(t=dn(o[4][0])+"")&&Le(n,t)},d(o){o&&d(e)}}}function hu(r){let e,t;return e=new kr({props:{openOn:"hover",$$slots:{default:[mu,({features:n})=>({4:n}),({features:n})=>n?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(n,o){v(e,n,o),t=!0},p(n,o){const s={};o&48&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){y(e,n)}}}function du(r){let e,t;return e=new Ho({props:{id:Gt,paint:{"circle-color":r[2],"circle-radius":Oo/2},layout:{visibility:r[1]},$$slots:{default:[hu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(n,o){v(e,n,o),t=!0},p(n,o){const s={};o&2&&(s.layout={visibility:n[1]}),o&32&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){y(e,n)}}}function $u(r){let e,t,n,o,s;function l(i){r[3](i)}let a={id:Gt,$$slots:{right:[pu],default:[au]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),G.push(()=>x(e,"checked",l)),o=new wr({props:{id:Gt,data:`${ge()}/v1/${Gt}.geojson`,$$slots:{default:[du]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=I(),b(o.$$.fragment)},m(i,u){v(e,i,u),h(i,n,u),v(o,i,u),s=!0},p(i,[u]){const f={};u&32&&(f.$$scope={dirty:u,ctx:i}),!t&&u&1&&(t=!0,f.checked=i[0],X(()=>t=!1)),e.$set(f);const c={};u&34&&(c.$$scope={dirty:u,ctx:i}),o.$set(c)},i(i){s||($(e.$$.fragment,i),$(o.$$.fragment,i),s=!0)},o(i){g(e.$$.fragment,i),g(o.$$.fragment,i),s=!1},d(i){i&&d(n),y(e,i),y(o,i)}}}let Gt="railway_stations";function dn(r){return r.properties.name??"Unnamed railway station"}function gu(r,e,t){let n,o=Y.railway_stations,s=!1;function l(a){s=a,t(0,s)}return r.$$.update=()=>{r.$$.dirty&1&&t(1,n=s?"visible":"none")},[s,n,o,l]}class _u extends Z{constructor(e){super(),K(this,e,gu,$u,V,{})}}function bu(r){let e;return{c(){e=w("OS Speeds")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function vu(r){let e;return{c(){e=w("Basemap")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function yu(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function wu(r){let e,t,n,o,s,l,a,i,u,f,c,p;return n=new H({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[vu]},$$scope:{ctx:r}}}),f=new H({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[yu]},$$scope:{ctx:r}}}),{c(){e=N("p"),t=w("The average speed data is collected over a six-month period by "),b(n.$$.fragment),o=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),s=I(),l=N("p"),l.textContent="Data valid as of 1 September, 2023",a=I(),i=N("p"),u=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),b(f.$$.fragment),c=w(".")},m(m,_){h(m,e,_),E(e,t),v(n,e,null),E(e,o),h(m,s,_),h(m,l,_),h(m,a,_),h(m,i,_),E(i,u),v(f,i,null),E(i,c),p=!0},p(m,_){const k={};_&256&&(k.$$scope={dirty:_,ctx:m}),n.$set(k);const L={};_&256&&(L.$$scope={dirty:_,ctx:m}),f.$set(L)},i(m){p||($(n.$$.fragment,m),$(f.$$.fragment,m),p=!0)},o(m){g(n.$$.fragment,m),g(f.$$.fragment,m),p=!1},d(m){m&&(d(e),d(s),d(l),d(a),d(i)),y(n),y(f)}}}function ku(r){let e,t,n;return t=new ue({props:{$$slots:{default:[wu]},$$scope:{ctx:r}}}),{c(){e=N("span"),b(t.$$.fragment),ee(e,"slot","right")},m(o,s){h(o,e,s),v(t,e,null),n=!0},p(o,s){const l={};s&256&&(l.$$scope={dirty:s,ctx:o}),t.$set(l)},i(o){n||($(t.$$.fragment,o),n=!0)},o(o){g(t.$$.fragment,o),n=!1},d(o){o&&d(e),y(t)}}}function $n(r){let e,t,n,o,s;e=new it({props:{colorScale:r[2],limits:r[3]}});function l(i){r[6](i)}let a={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(a.value=r[0]),n=new In({props:a}),G.push(()=>x(n,"value",l)),n.$on("change",r[4]),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment)},m(i,u){v(e,i,u),h(i,t,u),v(n,i,u),s=!0},p(i,u){const f={};!o&&u&1&&(o=!0,f.value=i[0],X(()=>o=!1)),n.$set(f)},i(i){s||($(e.$$.fragment,i),$(n.$$.fragment,i),s=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),s=!1},d(i){i&&d(t),y(e,i),y(n,i)}}}function Su(r){let e,t,n,o,s,l;function a(f){r[5](f)}let i={id:rt,$$slots:{right:[ku],default:[bu]},$$scope:{ctx:r}};r[1]!==void 0&&(i.checked=r[1]),e=new le({props:i}),G.push(()=>x(e,"checked",a));let u=r[1]&&$n(r);return s=new fe({props:{layer:rt,tooltip:Cu,show:r[1],clickable:!1}}),{c(){b(e.$$.fragment),n=I(),u&&u.c(),o=I(),b(s.$$.fragment)},m(f,c){v(e,f,c),h(f,n,c),u&&u.m(f,c),h(f,o,c),v(s,f,c),l=!0},p(f,[c]){const p={};c&256&&(p.$$scope={dirty:c,ctx:f}),!t&&c&2&&(t=!0,p.checked=f[1],X(()=>t=!1)),e.$set(p),f[1]?u?(u.p(f,c),c&2&&$(u,1)):(u=$n(f),u.c(),$(u,1),u.m(o.parentNode,o)):u&&(pe(),g(u,1,1,()=>{u=null}),me());const m={};c&2&&(m.show=f[1]),s.$set(m)},i(f){l||($(e.$$.fragment,f),$(u),$(s.$$.fragment,f),l=!0)},o(f){g(e.$$.fragment,f),g(u),g(s.$$.fragment,f),l=!1},d(f){f&&(d(n),d(o)),y(e,f),u&&u.d(f),y(s,f)}}}let rt="road_speeds";function Cu(r){let e={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"}[r.properties.highest_description],t=`<p>Posted speed limit: ${r.properties.indicative_mph} mph</p>`;return t+=`<p>Highest average speed: ${r.properties.highest_mph} mph (during ${e})</p>`,t}function Lu(r,e,t){let n;q(r,he,c=>t(7,n=c));let o=Y.sequential_low_to_high,s=[0,20,30,40,50,90],l="indicative_mph";Se(n,rt,`${vr()}/v1/${rt}.pmtiles`),Ue(n,{id:rt,source:rt,sourceLayer:rt,color:st(["get",l],s,o),width:Yt,opacity:Pe(.5,1)});let a=!1;function i(){n.setPaintProperty(rt,"line-color",st(["get",l],s,o))}function u(c){a=c,t(1,a)}function f(c){l=c,t(0,l)}return[l,a,o,s,i,u,f]}class Tu extends Z{constructor(e){super(),K(this,e,Lu,Su,V,{})}}function Ou(r){let e;return{c(){e=w("OS Road widths")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Au(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Iu(r){let e,t,n,o,s,l,a,i,u;return a=new H({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Au]},$$scope:{ctx:r}}}),{c(){e=N("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,t=I(),n=N("p"),n.textContent="Data valid as of 1 September, 2023",o=I(),s=N("p"),l=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),b(a.$$.fragment),i=w(".")},m(f,c){h(f,e,c),h(f,t,c),h(f,n,c),h(f,o,c),h(f,s,c),E(s,l),v(a,s,null),E(s,i),u=!0},p(f,c){const p={};c&32&&(p.$$scope={dirty:c,ctx:f}),a.$set(p)},i(f){u||($(a.$$.fragment,f),u=!0)},o(f){g(a.$$.fragment,f),u=!1},d(f){f&&(d(e),d(t),d(n),d(o),d(s)),y(a)}}}function Du(r){let e,t,n;return t=new ue({props:{$$slots:{default:[Iu]},$$scope:{ctx:r}}}),{c(){e=N("span"),b(t.$$.fragment),ee(e,"slot","right")},m(o,s){h(o,e,s),v(t,e,null),n=!0},p(o,s){const l={};s&32&&(l.$$scope={dirty:s,ctx:o}),t.$set(l)},i(o){n||($(t.$$.fragment,o),n=!0)},o(o){g(t.$$.fragment,o),n=!1},d(o){o&&d(e),y(t)}}}function gn(r){let e,t;return e=new it({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(n,o){v(e,n,o),t=!0},p:ne,i(n){t||($(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){y(e,n)}}}function Eu(r){let e,t,n,o,s,l;function a(f){r[3](f)}let i={id:ct,$$slots:{right:[Du],default:[Ou]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new le({props:i}),G.push(()=>x(e,"checked",a));let u=r[0]&&gn(r);return s=new fe({props:{layer:ct,tooltip:Mu,show:r[0],clickable:!1}}),{c(){b(e.$$.fragment),n=I(),u&&u.c(),o=I(),b(s.$$.fragment)},m(f,c){v(e,f,c),h(f,n,c),u&&u.m(f,c),h(f,o,c),v(s,f,c),l=!0},p(f,[c]){const p={};c&32&&(p.$$scope={dirty:c,ctx:f}),!t&&c&1&&(t=!0,p.checked=f[0],X(()=>t=!1)),e.$set(p),f[0]?u?(u.p(f,c),c&1&&$(u,1)):(u=gn(f),u.c(),$(u,1),u.m(o.parentNode,o)):u&&(pe(),g(u,1,1,()=>{u=null}),me());const m={};c&1&&(m.show=f[0]),s.$set(m)},i(f){l||($(e.$$.fragment,f),$(u),$(s.$$.fragment,f),l=!0)},o(f){g(e.$$.fragment,f),g(u),g(s.$$.fragment,f),l=!1},d(f){f&&(d(n),d(o)),y(e,f),u&&u.d(f),y(s,f)}}}let ct="road_widths";function Mu(r){let e=`<p>Average width: ${r.properties.average} meters</p>`;return e+=`<p>Minimum width: ${r.properties.minimum} meters</p>`,e}function Pu(r,e,t){let n;q(r,he,i=>t(4,n=i));let o=Y.sequential_low_to_high,s=[0,5,10,15,20,100];Se(n,ct,`${vr()}/v1/${ct}.pmtiles`),Ue(n,{id:ct,source:ct,sourceLayer:ct,color:st(["get","average"],s,o),width:Yt,opacity:Pe(.5,1)});let l=!1;function a(i){l=i,t(0,l)}return[l,o,s,a]}class Nu extends Z{constructor(e){super(),K(this,e,Pu,Eu,V,{})}}function Fu(r){let e;return{c(){e=w("primary and secondary schools")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Bu(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function ju(r){let e,t,n,o,s,l,a,i,u;return n=new H({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[Fu]},$$scope:{ctx:r}}}),i=new H({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Bu]},$$scope:{ctx:r}}}),{c(){e=N("p"),t=w("This shows "),b(n.$$.fragment),o=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),s=I(),l=N("p"),a=w("License: "),b(i.$$.fragment)},m(f,c){h(f,e,c),E(e,t),v(n,e,null),E(e,o),h(f,s,c),h(f,l,c),E(l,a),v(i,l,null),u=!0},p(f,c){const p={};c&1&&(p.$$scope={dirty:c,ctx:f}),n.$set(p);const m={};c&1&&(m.$$scope={dirty:c,ctx:f}),i.$set(m)},i(f){u||($(n.$$.fragment,f),$(i.$$.fragment,f),u=!0)},o(f){g(n.$$.fragment,f),g(i.$$.fragment,f),u=!1},d(f){f&&(d(e),d(s),d(l)),y(n),y(i)}}}function zu(r){let e,t;return e=new Cr({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[ju]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(n,o){v(e,n,o),t=!0},p(n,[o]){const s={};o&1&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){y(e,n)}}}class Ru extends Z{constructor(e){super(),K(this,e,null,zu,V,{})}}function Hu(r){let e;return{c(){e=w("sports pitches")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Uu(r){let e;return{c(){e=w("sports centres")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Wu(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Vu(r){let e,t,n,o,s,l,a,i,u,f,c;return n=new H({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Hu]},$$scope:{ctx:r}}}),s=new H({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Uu]},$$scope:{ctx:r}}}),f=new H({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Wu]},$$scope:{ctx:r}}}),{c(){e=N("p"),t=w("This shows "),b(n.$$.fragment),o=w(" and "),b(s.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),a=I(),i=N("p"),u=w("License: "),b(f.$$.fragment)},m(p,m){h(p,e,m),E(e,t),v(n,e,null),E(e,o),v(s,e,null),E(e,l),h(p,a,m),h(p,i,m),E(i,u),v(f,i,null),c=!0},p(p,m){const _={};m&1&&(_.$$scope={dirty:m,ctx:p}),n.$set(_);const k={};m&1&&(k.$$scope={dirty:m,ctx:p}),s.$set(k);const L={};m&1&&(L.$$scope={dirty:m,ctx:p}),f.$set(L)},i(p){c||($(n.$$.fragment,p),$(s.$$.fragment,p),$(f.$$.fragment,p),c=!0)},o(p){g(n.$$.fragment,p),g(s.$$.fragment,p),g(f.$$.fragment,p),c=!1},d(p){p&&(d(e),d(a),d(i)),y(n),y(s),y(f)}}}function Gu(r){let e,t;return e=new Cr({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Vu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(n,o){v(e,n,o),t=!0},p(n,[o]){const s={};o&1&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){y(e,n)}}}class Zu extends Z{constructor(e){super(),K(this,e,null,Gu,V,{})}}function Ku(r){let e;return{c(){e=w("Vehicle counts")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function qu(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function xu(r){let e;return{c(){e=w("methodology")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Xu(r){let e;return{c(){e=w("Open Government License")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Yu(r){let e,t,n,o,s,l,a,i,u,f,c,p,m;return n=new H({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[qu]},$$scope:{ctx:r}}}),s=new H({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[xu]},$$scope:{ctx:r}}}),p=new H({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Xu]},$$scope:{ctx:r}}}),{c(){e=N("p"),t=w("2022 AADF (annual average daily flow) data from "),b(n.$$.fragment),o=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),b(s.$$.fragment),l=w(" for details and caveats about the measurements."),a=I(),i=N("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,u=I(),f=N("p"),c=w("License: "),b(p.$$.fragment)},m(_,k){h(_,e,k),E(e,t),v(n,e,null),E(e,o),v(s,e,null),E(e,l),h(_,a,k),h(_,i,k),h(_,u,k),h(_,f,k),E(f,c),v(p,f,null),m=!0},p(_,k){const L={};k&64&&(L.$$scope={dirty:k,ctx:_}),n.$set(L);const T={};k&64&&(T.$$scope={dirty:k,ctx:_}),s.$set(T);const D={};k&64&&(D.$$scope={dirty:k,ctx:_}),p.$set(D)},i(_){m||($(n.$$.fragment,_),$(s.$$.fragment,_),$(p.$$.fragment,_),m=!0)},o(_){g(n.$$.fragment,_),g(s.$$.fragment,_),g(p.$$.fragment,_),m=!1},d(_){_&&(d(e),d(a),d(i),d(u),d(f)),y(n),y(s),y(p)}}}function Ju(r){let e,t,n;return t=new ue({props:{$$slots:{default:[Yu]},$$scope:{ctx:r}}}),{c(){e=N("span"),b(t.$$.fragment),ee(e,"slot","right")},m(o,s){h(o,e,s),v(t,e,null),n=!0},p(o,s){const l={};s&64&&(l.$$scope={dirty:s,ctx:o}),t.$set(l)},i(o){n||($(t.$$.fragment,o),n=!0)},o(o){g(t.$$.fragment,o),n=!1},d(o){o&&d(e),y(t)}}}function _n(r){let e,t;return e=new it({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(n,o){v(e,n,o),t=!0},p:ne,i(n){t||($(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){y(e,n)}}}function Qu(r){let e,t,n,o,s,l;function a(f){r[3](f)}let i={id:pt,$$slots:{right:[Ju],default:[Ku]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new le({props:i}),G.push(()=>x(e,"checked",a));let u=r[0]&&_n(r);return s=new fe({props:{layer:pt,tooltip:ec,show:r[0],clickable:!0}}),s.$on("click",tc),{c(){b(e.$$.fragment),n=I(),u&&u.c(),o=I(),b(s.$$.fragment)},m(f,c){v(e,f,c),h(f,n,c),u&&u.m(f,c),h(f,o,c),v(s,f,c),l=!0},p(f,[c]){const p={};c&64&&(p.$$scope={dirty:c,ctx:f}),!t&&c&1&&(t=!0,p.checked=f[0],X(()=>t=!1)),e.$set(p),f[0]?u?(u.p(f,c),c&1&&$(u,1)):(u=_n(f),u.c(),$(u,1),u.m(o.parentNode,o)):u&&(pe(),g(u,1,1,()=>{u=null}),me());const m={};c&1&&(m.show=f[0]),s.$set(m)},i(f){l||($(e.$$.fragment,f),$(u),$(s.$$.fragment,f),l=!0)},o(f){g(e.$$.fragment,f),g(u),g(s.$$.fragment,f),l=!1},d(f){f&&(d(n),d(o)),y(e,f),u&&u.d(f),y(s,f)}}}let pt="vehicle_counts";function ec(r){let e=`<h2>${r.properties.location}</h2>`;return e+=`<p>Total motor vehicles (2022 AADF): <b>${r.properties.motor_vehicles_2022.toLocaleString()}</b></p>`,e+=`<p>Total pedal cycles (2022 AADF): <b>${r.properties.pedal_cycles_2022.toLocaleString()}</b></p>`,e+=`<p>Count method: <b>${r.properties.method}</b></p>`,e}function tc(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.properties.count_point}`,"_blank")}function rc(r,e,t){let n;q(r,he,u=>t(4,n=u));let o=Y.sequential_low_to_high,s=[0,4e4,8e4,12e4,16e4,205e3],l=["","40k","80k","120k","160k",""];Se(n,pt,`${ge()}/v1/${pt}.pmtiles`),Mt(n,{id:pt,source:pt,sourceLayer:pt,color:st(["get","motor_vehicles_2022"],s,o),opacity:.9,radius:["interpolate",["linear"],["zoom"],1,2,8,3,13,15],strokeColor:"black",strokeWidth:.1});let a=!1;function i(u){a=u,t(0,a)}return[a,o,l,i]}class nc extends Z{constructor(e){super(),K(this,e,rc,Qu,V,{})}}function oc(r){let e,t,n;return e=new Ee({props:{color:r[1]}}),{c(){b(e.$$.fragment),t=w(`
  Wards`)},m(o,s){v(e,o,s),h(o,t,s),n=!0},p:ne,i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){o&&d(t),y(e,o)}}}function sc(r){let e;return{c(){e=w(`ONS Geography
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function ic(r){let e;return{c(){e=w(`Open Government License
        `)},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function lc(r){let e,t,n,o,s,l,a,i,u,f;return n=new H({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[sc]},$$scope:{ctx:r}}}),i=new H({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ic]},$$scope:{ctx:r}}}),{c(){e=N("p"),t=w("Data from "),b(n.$$.fragment),o=w(", as of May 2023."),s=I(),l=N("p"),a=w("License: "),b(i.$$.fragment),u=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(c,p){h(c,e,p),E(e,t),v(n,e,null),E(e,o),h(c,s,p),h(c,l,p),E(l,a),v(i,l,null),E(l,u),f=!0},p(c,p){const m={};p&32&&(m.$$scope={dirty:p,ctx:c}),n.$set(m);const _={};p&32&&(_.$$scope={dirty:p,ctx:c}),i.$set(_)},i(c){f||($(n.$$.fragment,c),$(i.$$.fragment,c),f=!0)},o(c){g(n.$$.fragment,c),g(i.$$.fragment,c),f=!1},d(c){c&&(d(e),d(s),d(l)),y(n),y(i)}}}function ac(r){let e,t,n;return t=new ue({props:{$$slots:{default:[lc]},$$scope:{ctx:r}}}),{c(){e=N("span"),b(t.$$.fragment),ee(e,"slot","right")},m(o,s){h(o,e,s),v(t,e,null),n=!0},p(o,s){const l={};s&32&&(l.$$scope={dirty:s,ctx:o}),t.$set(l)},i(o){n||($(t.$$.fragment,o),n=!0)},o(o){g(t.$$.fragment,o),n=!1},d(o){o&&d(e),y(t)}}}function fc(r){let e,t,n,o,s;function l(i){r[3](i)}let a={id:Ke,$$slots:{right:[ac],default:[oc]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),G.push(()=>x(e,"checked",l)),o=new fe({props:{layer:Ke,tooltip:uc,show:r[0],clickable:!0}}),o.$on("click",cc),{c(){b(e.$$.fragment),n=I(),b(o.$$.fragment)},m(i,u){v(e,i,u),h(i,n,u),v(o,i,u),s=!0},p(i,[u]){const f={};u&32&&(f.$$scope={dirty:u,ctx:i}),!t&&u&1&&(t=!0,f.checked=i[0],X(()=>t=!1)),e.$set(f);const c={};u&1&&(c.show=i[0]),o.$set(c)},i(i){s||($(e.$$.fragment,i),$(o.$$.fragment,i),s=!0)},o(i){g(e.$$.fragment,i),g(o.$$.fragment,i),s=!1},d(i){i&&d(n),y(e,i),y(o,i)}}}let Ke="wards";function uc(r){return`<p>${r.properties.name}</p>`}function cc(r){let e=encodeURIComponent(r.detail.properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function pc(r,e,t){let n;q(r,he,i=>t(2,n=i));let o=Y.wards,s=`${Ke}-outline`;Se(n,Ke,`${ge()}/v1/${Ke}.pmtiles`),Ct(n,{id:Ke,source:Ke,sourceLayer:Ke,color:o,opacity:Pe(.5,0)}),Ue(n,{id:s,source:Ke,sourceLayer:Ke,color:o,width:2.5});let l=!1;function a(i){l=i,t(0,l)}return r.$$.update=()=>{r.$$.dirty&5&&n.getLayer(s)&&n.setLayoutProperty(s,"visibility",l?"visible":"none")},[l,o,n,a]}class mc extends Z{constructor(e){super(),K(this,e,pc,fc,V,{})}}function hc(r){let e,t,n,o,s,l,a,i;return e=new Ru({}),n=new Ja({}),s=new Zu({}),a=new _u({}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment),o=I(),b(s.$$.fragment),l=I(),b(a.$$.fragment)},m(u,f){v(e,u,f),h(u,t,f),v(n,u,f),h(u,o,f),v(s,u,f),h(u,l,f),v(a,u,f),i=!0},i(u){i||($(e.$$.fragment,u),$(n.$$.fragment,u),$(s.$$.fragment,u),$(a.$$.fragment,u),i=!0)},o(u){g(e.$$.fragment,u),g(n.$$.fragment,u),g(s.$$.fragment,u),g(a.$$.fragment,u),i=!1},d(u){u&&(d(t),d(o),d(l)),y(e,u),y(n,u),y(s,u),y(a,u)}}}function dc(r){let e,t;return e=new jt({props:{small:!0,$$slots:{default:[hc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(n,o){v(e,n,o),t=!0},p(n,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){y(e,n)}}}function $c(r){let e,t,n,o,s,l,a,i,u,f;return e=new Ua({}),n=new Wf({}),s=new Cl({}),a=new Ma({}),u=new Sa({}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment),o=I(),b(s.$$.fragment),l=I(),b(a.$$.fragment),i=I(),b(u.$$.fragment)},m(c,p){v(e,c,p),h(c,t,p),v(n,c,p),h(c,o,p),v(s,c,p),h(c,l,p),v(a,c,p),h(c,i,p),v(u,c,p),f=!0},i(c){f||($(e.$$.fragment,c),$(n.$$.fragment,c),$(s.$$.fragment,c),$(a.$$.fragment,c),$(u.$$.fragment,c),f=!0)},o(c){g(e.$$.fragment,c),g(n.$$.fragment,c),g(s.$$.fragment,c),g(a.$$.fragment,c),g(u.$$.fragment,c),f=!1},d(c){c&&(d(t),d(o),d(l),d(i)),y(e,c),y(n,c),y(s,c),y(a,c),y(u,c)}}}function gc(r){let e,t;return e=new jt({props:{small:!0,$$slots:{default:[$c]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(n,o){v(e,n,o),t=!0},p(n,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){y(e,n)}}}function _c(r){let e,t,n,o,s,l,a,i,u,f;return e=new Qf({}),n=new mc({}),s=new la({}),a=new yf({}),u=new Pf({}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment),o=I(),b(s.$$.fragment),l=I(),b(a.$$.fragment),i=I(),b(u.$$.fragment)},m(c,p){v(e,c,p),h(c,t,p),v(n,c,p),h(c,o,p),v(s,c,p),h(c,l,p),v(a,c,p),h(c,i,p),v(u,c,p),f=!0},i(c){f||($(e.$$.fragment,c),$(n.$$.fragment,c),$(s.$$.fragment,c),$(a.$$.fragment,c),$(u.$$.fragment,c),f=!0)},o(c){g(e.$$.fragment,c),g(n.$$.fragment,c),g(s.$$.fragment,c),g(a.$$.fragment,c),g(u.$$.fragment,c),f=!1},d(c){c&&(d(t),d(o),d(l),d(i)),y(e,c),y(n,c),y(s,c),y(a,c),y(u,c)}}}function bc(r){let e,t;return e=new jt({props:{small:!0,$$slots:{default:[_c]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(n,o){v(e,n,o),t=!0},p(n,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){y(e,n)}}}function vc(r){let e,t,n,o;return e=new xl({}),n=new ff({}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment)},m(s,l){v(e,s,l),h(s,t,l),v(n,s,l),o=!0},i(s){o||($(e.$$.fragment,s),$(n.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(n.$$.fragment,s),o=!1},d(s){s&&d(t),y(e,s),y(n,s)}}}function yc(r){let e,t,n,o;return e=new Nu({}),n=new Tu({}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment)},m(s,l){v(e,s,l),h(s,t,l),v(n,s,l),o=!0},i(s){o||($(e.$$.fragment,s),$(n.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(n.$$.fragment,s),o=!1},d(s){s&&d(t),y(e,s),y(n,s)}}}function wc(r){let e,t,n,o,s=_r()=="Private (development)",l,a;e=new nc({}),n=new lu({});let i=s&&yc();return{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment),o=I(),i&&i.c(),l=Qe()},m(u,f){v(e,u,f),h(u,t,f),v(n,u,f),h(u,o,f),i&&i.m(u,f),h(u,l,f),a=!0},p:ne,i(u){a||($(e.$$.fragment,u),$(n.$$.fragment,u),$(i),a=!0)},o(u){g(e.$$.fragment,u),g(n.$$.fragment,u),g(i),a=!1},d(u){u&&(d(t),d(o),d(l)),y(e,u),y(n,u),i&&i.d(u)}}}function kc(r){let e,t,n,o,s,l,a,i,u,f,c,p,m,_,k,L,T;e=new da({}),n=new Ye({props:{label:"Trip generators",$$slots:{default:[dc]},$$scope:{ctx:r}}}),s=new Ye({props:{label:"Existing infrastructure",$$slots:{default:[gc]},$$scope:{ctx:r}}}),a=new Ye({props:{label:"Boundaries",$$slots:{default:[bc]},$$scope:{ctx:r}}}),u=new Ye({props:{label:"Census",$$slots:{default:[vc]},$$scope:{ctx:r}}}),c=new Ye({props:{label:"Other",$$slots:{default:[wc]},$$scope:{ctx:r}}});function D(C){r[5](C)}let B={displayEnableButton:!0};return r[2]!==void 0&&(B.isInactive=r[2]),m=new Ao({props:B}),r[4](m),G.push(()=>x(m,"isInactive",D)),L=new wo({props:{style:r[0]}}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment),o=I(),b(s.$$.fragment),l=I(),b(a.$$.fragment),i=I(),b(u.$$.fragment),f=I(),b(c.$$.fragment),p=I(),b(m.$$.fragment),k=I(),b(L.$$.fragment)},m(C,A){v(e,C,A),h(C,t,A),v(n,C,A),h(C,o,A),v(s,C,A),h(C,l,A),v(a,C,A),h(C,i,A),v(u,C,A),h(C,f,A),v(c,C,A),h(C,p,A),v(m,C,A),h(C,k,A),v(L,C,A),T=!0},p(C,A){const j={};A&64&&(j.$$scope={dirty:A,ctx:C}),n.$set(j);const M={};A&64&&(M.$$scope={dirty:A,ctx:C}),s.$set(M);const P={};A&64&&(P.$$scope={dirty:A,ctx:C}),a.$set(P);const O={};A&64&&(O.$$scope={dirty:A,ctx:C}),u.$set(O);const S={};A&64&&(S.$$scope={dirty:A,ctx:C}),c.$set(S);const R={};!_&&A&4&&(_=!0,R.isInactive=C[2],X(()=>_=!1)),m.$set(R);const U={};A&1&&(U.style=C[0]),L.$set(U)},i(C){T||($(e.$$.fragment,C),$(n.$$.fragment,C),$(s.$$.fragment,C),$(a.$$.fragment,C),$(u.$$.fragment,C),$(c.$$.fragment,C),$(m.$$.fragment,C),$(L.$$.fragment,C),T=!0)},o(C){g(e.$$.fragment,C),g(n.$$.fragment,C),g(s.$$.fragment,C),g(a.$$.fragment,C),g(u.$$.fragment,C),g(c.$$.fragment,C),g(m.$$.fragment,C),g(L.$$.fragment,C),T=!1},d(C){C&&(d(t),d(o),d(l),d(i),d(f),d(p),d(k)),y(e,C),y(n,C),y(s,C),y(a,C),y(u,C),y(c,C),r[4](null),y(m,C),y(L,C)}}}function Sc(r){let e,t,n,o;return e=new Ye({props:{label:"Layers",open:!0,$$slots:{default:[kc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(s,l){v(e,s,l),t=!0,n||(o=br(window,"keydown",r[3]),n=!0)},p(s,[l]){const a={};l&71&&(a.$$scope={dirty:l,ctx:s}),e.$set(a)},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){y(e,s),n=!1,o()}}}function Cc(r,e,t){let n;q(r,Ar,u=>t(2,n=u));let{style:o}=e,s;function l(u){!n&&u.key=="Escape"&&(s.disableStreetView(),u.preventDefault())}function a(u){G[u?"unshift":"push"](()=>{s=u,t(1,s)})}function i(u){n=u,Ar.set(n)}return r.$$set=u=>{"style"in u&&t(0,o=u.style)},[o,s,n,l,a,i]}class Lc extends Z{constructor(e){super(),K(this,e,Cc,Sc,V,{style:0})}}function Tc(r,e,t){let{loadFile:n}=e;return Ft(async()=>{let s=await(await fetch(`${vr()}/v1/random_schemes.geojson`)).text();n(s)}),r.$$set=o=>{"loadFile"in o&&t(0,n=o.loadFile)},[n]}class Oc extends Z{constructor(e){super(),K(this,e,Tc,null,V,{loadFile:0})}}function Ac(r){let e;return{c(){e=w("Show on map")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Ic(r){let e;return{c(){e=w("Edit scheme locally")},m(t,n){h(t,e,n)},d(t){t&&d(e)}}}function Dc(r){let e,t,n=r[0].authority_or_region+"",o,s,l,a,i=r[0].capital_scheme_id+"",u,f,c,p,m=r[0].funding_programme+"",_,k,L,T,D,B,C;return T=new lr({props:{$$slots:{default:[Ac]},$$scope:{ctx:r}}}),T.$on("click",r[3]),B=new lr({props:{disabled:r[1],title:r[2],$$slots:{default:[Ic]},$$scope:{ctx:r}}}),B.$on("click",r[4]),{c(){e=N("p"),t=w("Authority or region: "),o=w(n),s=I(),l=N("p"),a=w("Capital scheme ID: "),u=w(i),f=I(),c=N("p"),p=w("Funding programme: "),_=w(m),k=I(),L=N("div"),b(T.$$.fragment),D=I(),b(B.$$.fragment),ee(L,"class","govuk-button-group")},m(A,j){h(A,e,j),E(e,t),E(e,o),h(A,s,j),h(A,l,j),E(l,a),E(l,u),h(A,f,j),h(A,c,j),E(c,p),E(c,_),h(A,k,j),h(A,L,j),v(T,L,null),E(L,D),v(B,L,null),C=!0},p(A,j){(!C||j&1)&&n!==(n=A[0].authority_or_region+"")&&Le(o,n),(!C||j&1)&&i!==(i=A[0].capital_scheme_id+"")&&Le(u,i),(!C||j&1)&&m!==(m=A[0].funding_programme+"")&&Le(_,m);const M={};j&256&&(M.$$scope={dirty:j,ctx:A}),T.$set(M);const P={};j&256&&(P.$$scope={dirty:j,ctx:A}),B.$set(P)},i(A){C||($(T.$$.fragment,A),$(B.$$.fragment,A),C=!0)},o(A){g(T.$$.fragment,A),g(B.$$.fragment,A),C=!1},d(A){A&&(d(e),d(s),d(l),d(f),d(c),d(k),d(L)),y(T),y(B)}}}function Ec(r){let e,t;return e=new Ye({props:{label:`${r[0].scheme_reference}: ${r[0].num_features} features`,$$slots:{default:[Dc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(n,o){v(e,n,o),t=!0},p(n,[o]){const s={};o&1&&(s.label=`${n[0].scheme_reference}: ${n[0].num_features} features`),o&257&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){y(e,n)}}}function Mc(r,e,t){let n,o;q(r,St,c=>t(6,n=c)),q(r,he,c=>t(7,o=c));let{scheme:s}=e,{authorityNames:l}=e,a=!l.has(s.authority_or_region),i=a?"This scheme doesn't have an authority specified correctly, so you can't edit this scheme. We're working to fix this problem.":void 0;function u(){let c={type:"FeatureCollection",features:n.features.filter(p=>p.properties.scheme_reference==s.scheme_reference)};o==null||o.fitBounds(go(c),{padding:20,animate:!1})}function f(){let c={type:"FeatureCollection",features:n.features.filter(m=>m.properties.scheme_reference==s.scheme_reference)},p=s.authority_or_region;window.localStorage.setItem(p,JSON.stringify(c)),window.open(`scheme.html?authority=${s.authority_or_region}`,"_blank")}return r.$$set=c=>{"scheme"in c&&t(0,s=c.scheme),"authorityNames"in c&&t(5,l=c.authorityNames)},[s,a,i,u,f,l]}class Pc extends Z{constructor(e){super(),K(this,e,Mc,Ec,V,{scheme:0,authorityNames:5})}}const Nc=["Adur","Allerdale","Amber Valley","Arun","Ashfield","Ashford","Babergh","Barking and Dagenham","Barnet","Barnsley","Barrow-in-Furness","Basildon","Basingstoke and Deane","Bassetlaw","Bath and North East Somerset","Bedford","Bexley","Birmingham","Blaby","Blackburn with Darwen","Blackpool","Bolsover","Bolton","Boston","Bournemouth, Christchurch and Poole","Bracknell Forest","Bradford","Braintree","Breckland","Brent","Brentwood","Brighton and Hove","Bristol, City of","Broadland","Bromley","Bromsgrove","Broxbourne","Broxtowe","Buckinghamshire","Burnley","Bury","Calderdale","Cambridge","Cambridgeshire and Peterborough Combined Authority","Camden","Cannock Chase","Canterbury","Carlisle","Castle Point","Central Bedfordshire","Charnwood","Chelmsford","Cheltenham","Cherwell","Cheshire East","Cheshire West and Chester","Chesterfield","Chichester","Chorley","City of London","Colchester","Copeland","Cornwall","Cotswold","County Durham","Coventry","Craven","Crawley","Croydon","Cumbria","Dacorum","Darlington","Dartford","Derby","Derbyshire","Derbyshire Dales","Devon","Doncaster","Dorset","Dover","Dudley","Ealing","Eastbourne","East Cambridgeshire","East Devon","East Hampshire","East Hertfordshire","Eastleigh","East Lindsey","East Riding of Yorkshire","East Staffordshire","East Suffolk","East Sussex","Eden","Elmbridge","Enfield","Epping Forest","Epsom and Ewell","Erewash","Essex","Exeter","Fareham","Fenland","Folkestone and Hythe","Forest of Dean","Fylde","Gateshead","Gedling","Gloucester","Gloucestershire","Gosport","Gravesham","Greater London","Greater Manchester Combined Authority","Great Yarmouth","Greenwich","Guildford","Hackney","Halton","Hambleton","Hammersmith and Fulham","Hampshire","Harborough","Haringey","Harlow","Harrogate","Harrow","Hart","Hartlepool","Hastings","Havant","Havering","Herefordshire","Herefordshire, County of","Hertfordshire","Hertsmere","High Peak","Hillingdon","Hinckley and Bosworth","Horsham","Hounslow","Huntingdonshire","Hyndburn","Ipswich","Isle of Wight","Isles of Scilly","Islington","Kensington and Chelsea","Kent","King's Lynn and West Norfolk","Kingston upon Hull","Kingston upon Hull, City of","Kingston upon Thames","Kirklees","Knowsley","Lambeth","Lancashire","Lancaster","Leeds","Leicester","Leicestershire","Lewes","Lewisham","Lichfield","Lincoln","Lincolnshire","Liverpool","Liverpool City Region Combined Authority","Luton","Maidstone","Maldon","Malvern Hills","Manchester","Mansfield","Medway","Melton","Mendip","Merton","Mid Devon","Middlesbrough","Mid Suffolk","Mid Sussex","Milton Keynes","Mole Valley","Newark and Sherwood","Newcastle-under-Lyme","Newcastle upon Tyne","New Forest","Newham","Norfolk","North Devon","North East Derbyshire","North East Joint Transport Committee","North East Lincolnshire","North Hertfordshire","North Kesteven","North Lincolnshire","North Norfolk","North Northamptonshire","North Somerset","North Tyneside","Northumberland","North Warwickshire","North West Leicestershire","North Yorkshire","Norwich","Nottingham","Nottinghamshire","Nuneaton and Bedworth","Oadby and Wigston","Oldham","Oxford","Oxfordshire","Pendle","Peterborough","Plymouth","Portsmouth","Preston","Reading","Redbridge","Redcar and Cleveland","Redditch","Reigate and Banstead","Ribble Valley","Richmondshire","Richmond upon Thames","Rochdale","Rochford","Rossendale","Rother","Rotherham","Rugby","Runnymede","Rushcliffe","Rushmoor","Rutland","Ryedale","Salford","Sandwell","Scarborough","Sedgemoor","Sefton","Selby","Sevenoaks","Sheffield","Sheffield City Region Combined Authority","Shropshire","Slough","Solihull","Somerset","Somerset West and Taunton","Southampton","South Cambridgeshire","South Derbyshire","Southend-on-Sea","South Gloucestershire","South Hams","South Holland","South Kesteven","South Lakeland","South Norfolk","South Oxfordshire","South Ribble","South Somerset","South Staffordshire","South Tyneside","Southwark","Spelthorne","Stafford","Staffordshire","Staffordshire Moorlands","St Albans","Stevenage","St. Helens","Stockport","Stockton-on-Tees","Stoke-on-Trent","Stratford-on-Avon","Stroud","Suffolk","Sunderland","Surrey","Surrey Heath","Sutton","Swale","Swindon","Tameside","Tamworth","Tandridge","Tees Valley Combined Authority","Teignbridge","Telford and Wrekin","Tendring","Test Valley","Tewkesbury","Thanet","Three Rivers","Thurrock","Tonbridge and Malling","Torbay","Torridge","Tower Hamlets","Trafford","Tunbridge Wells","Uttlesford","Vale of White Horse","Wakefield","Walsall","Waltham Forest","Wandsworth","Warrington","Warwick","Warwickshire","Watford","Waverley","Wealden","Welwyn Hatfield","West Berkshire","West Devon","West Lancashire","West Lindsey","West Midlands ITA","Westminster","West Northamptonshire","West of England Combined Authority","West Oxfordshire","West Suffolk","West Sussex","West Yorkshire Combined Authority","Wigan","Wiltshire","Winchester","Windsor and Maidenhead","Wirral","Woking","Wokingham","Wolverhampton","Worcester","Worcestershire","Worthing","Wychavon","Wyre","Wyre Forest","York"];var ke=(r,e,t)=>new Promise((n,o)=>{var s=i=>{try{a(t.next(i))}catch(u){o(u)}},l=i=>{try{a(t.throw(i))}catch(u){o(u)}},a=i=>i.done?n(i.value):Promise.resolve(i.value).then(s,l);a((t=t.apply(r,e)).next())}),De=Uint8Array,wt=Uint16Array,Fc=Int32Array,Jn=new De([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Qn=new De([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Bc=new De([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),eo=function(r,e){for(var t=new wt(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var o=new Fc(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)o[s]=s-t[n]<<5|n;return{b:t,r:o}},to=eo(Jn,2),ro=to.b,jc=to.r;ro[28]=258,jc[258]=28;var zc=eo(Qn,0),Rc=zc.b,$r=new wt(32768);for(Q=0;Q<32768;++Q)Xe=(Q&43690)>>1|(Q&21845)<<1,Xe=(Xe&52428)>>2|(Xe&13107)<<2,Xe=(Xe&61680)>>4|(Xe&3855)<<4,$r[Q]=((Xe&65280)>>8|(Xe&255)<<8)>>1;var Xe,Q,Et=function(r,e,t){for(var n=r.length,o=0,s=new wt(e);o<n;++o)r[o]&&++s[r[o]-1];var l=new wt(e);for(o=1;o<e;++o)l[o]=l[o-1]+s[o-1]<<1;var a;if(t){a=new wt(1<<e);var i=15-e;for(o=0;o<n;++o)if(r[o])for(var u=o<<4|r[o],f=e-r[o],c=l[r[o]-1]++<<f,p=c|(1<<f)-1;c<=p;++c)a[$r[c]>>i]=u}else for(a=new wt(n),o=0;o<n;++o)r[o]&&(a[o]=$r[l[r[o]-1]++]>>15-r[o]);return a},Ht=new De(288);for(Q=0;Q<144;++Q)Ht[Q]=8;var Q;for(Q=144;Q<256;++Q)Ht[Q]=9;var Q;for(Q=256;Q<280;++Q)Ht[Q]=7;var Q;for(Q=280;Q<288;++Q)Ht[Q]=8;var Q,no=new De(32);for(Q=0;Q<32;++Q)no[Q]=5;var Q,Hc=Et(Ht,9,1),Uc=Et(no,5,1),sr=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},je=function(r,e,t){var n=e/8|0;return(r[n]|r[n+1]<<8)>>(e&7)&t},ir=function(r,e){var t=e/8|0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>(e&7)},Wc=function(r){return(r+7)/8|0},Vc=function(r,e,t){(e==null||e<0)&&(e=0),(t==null||t>r.length)&&(t=r.length);var n=new De(t-e);return n.set(r.subarray(e,t)),n},Gc=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Oe=function(r,e,t){var n=new Error(e||Gc[r]);if(n.code=r,Error.captureStackTrace&&Error.captureStackTrace(n,Oe),!t)throw n;return n},Lr=function(r,e,t,n){var o=r.length,s=n?n.length:0;if(!o||e.f&&!e.l)return t||new De(0);var l=!t||e.i!=2,a=e.i;t||(t=new De(o*3));var i=function(ye){var Ne=t.length;if(ye>Ne){var Fe=new De(Math.max(Ne*2,ye));Fe.set(t),t=Fe}},u=e.f||0,f=e.p||0,c=e.b||0,p=e.l,m=e.d,_=e.m,k=e.n,L=o*8;do{if(!p){u=je(r,f,1);var T=je(r,f+1,3);if(f+=3,T)if(T==1)p=Hc,m=Uc,_=9,k=5;else if(T==2){var A=je(r,f,31)+257,j=je(r,f+10,15)+4,M=A+je(r,f+5,31)+1;f+=14;for(var P=new De(M),O=new De(19),S=0;S<j;++S)O[Bc[S]]=je(r,f+S*3,7);f+=j*3;for(var R=sr(O),U=(1<<R)-1,W=Et(O,R,1),S=0;S<M;){var te=W[je(r,f,U)];f+=te&15;var D=te>>4;if(D<16)P[S++]=D;else{var ce=0,J=0;for(D==16?(J=3+je(r,f,3),f+=2,ce=P[S-1]):D==17?(J=3+je(r,f,7),f+=3):D==18&&(J=11+je(r,f,127),f+=7);J--;)P[S++]=ce}}var ie=P.subarray(0,A),se=P.subarray(A);_=sr(ie),k=sr(se),p=Et(ie,_,1),m=Et(se,k,1)}else Oe(1);else{var D=Wc(f)+4,B=r[D-4]|r[D-3]<<8,C=D+B;if(C>o){a&&Oe(0);break}l&&i(c+B),t.set(r.subarray(D,C),c),e.b=c+=B,e.p=f=C*8,e.f=u;continue}if(f>L){a&&Oe(0);break}}l&&i(c+131072);for(var _e=(1<<_)-1,be=(1<<k)-1,Me=f;;Me=f){var ce=p[ir(r,f)&_e],de=ce>>4;if(f+=ce&15,f>L){a&&Oe(0);break}if(ce||Oe(2),de<256)t[c++]=de;else if(de==256){Me=f,p=null;break}else{var Te=de-254;if(de>264){var S=de-257,ae=Jn[S];Te=je(r,f,(1<<ae)-1)+ro[S],f+=ae}var z=m[ir(r,f)&be],ve=z>>4;z||Oe(3),f+=z&15;var se=Rc[ve];if(ve>3){var ae=Qn[ve];se+=ir(r,f)&(1<<ae)-1,f+=ae}if(f>L){a&&Oe(0);break}l&&i(c+131072);var re=c+Te;if(c<se){var F=s-se,Ce=Math.min(se,re);for(F+c<0&&Oe(3);c<Ce;++c)t[c]=n[F+c]}for(;c<re;c+=4)t[c]=t[c-se],t[c+1]=t[c+1-se],t[c+2]=t[c+2-se],t[c+3]=t[c+3-se];c=re}}e.l=p,e.p=Me,e.b=c,e.f=u,p&&(u=1,e.m=_,e.d=m,e.n=k)}while(!u);return c==t.length?t:Vc(t,0,c)},Zc=new De(0),Kc=function(r){(r[0]!=31||r[1]!=139||r[2]!=8)&&Oe(6,"invalid gzip data");var e=r[3],t=10;e&4&&(t+=(r[10]|r[11]<<8)+2);for(var n=(e>>3&1)+(e>>4&1);n>0;n-=!r[t++]);return t+(e&2)},qc=function(r){var e=r.length;return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0},xc=function(r,e){return((r[0]&15)!=8||r[0]>>4>7||(r[0]<<8|r[1])%31)&&Oe(6,"invalid zlib data"),(r[1]>>5&1)==+!e&&Oe(6,"invalid zlib data: "+(r[1]&32?"need":"unexpected")+" dictionary"),(r[1]>>3&4)+2};function Xc(r,e){return Lr(r,{i:2},e&&e.out,e&&e.dictionary)}function Yc(r,e){var t=Kc(r);return t+8>r.length&&Oe(6,"invalid gzip data"),Lr(r.subarray(t,-8),{i:2},e&&e.out||new De(qc(r)),e&&e.dictionary)}function Jc(r,e){return Lr(r.subarray(xc(r,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}function gr(r,e){return r[0]==31&&r[1]==139&&r[2]==8?Yc(r,e):(r[0]&15)!=8||r[0]>>4>7||(r[0]<<8|r[1])%31?Xc(r,e):Jc(r,e)}var Qc=typeof TextDecoder<"u"&&new TextDecoder,ep=0;try{Qc.decode(Zc,{stream:!0}),ep=1}catch{}var oo=(r,e)=>r*Math.pow(2,e),Lt=(r,e)=>Math.floor(r/Math.pow(2,e)),xt=(r,e)=>oo(r.getUint16(e+1,!0),8)+r.getUint8(e),so=(r,e)=>oo(r.getUint32(e+2,!0),16)+r.getUint16(e,!0),tp=(r,e,t,n,o)=>{if(r!=n.getUint8(o))return r-n.getUint8(o);const s=xt(n,o+1);if(e!=s)return e-s;const l=xt(n,o+4);return t!=l?t-l:0},rp=(r,e,t,n)=>{const o=io(r,e|128,t,n);return o?{z:e,x:t,y:n,offset:o[0],length:o[1],is_dir:!0}:null},bn=(r,e,t,n)=>{const o=io(r,e,t,n);return o?{z:e,x:t,y:n,offset:o[0],length:o[1],is_dir:!1}:null},io=(r,e,t,n)=>{let o=0,s=r.byteLength/17-1;for(;o<=s;){const l=s+o>>1,a=tp(e,t,n,r,l*17);if(a>0)o=l+1;else if(a<0)s=l-1;else return[so(r,l*17+7),r.getUint32(l*17+13,!0)]}return null},np=(r,e)=>r.is_dir&&!e.is_dir?1:!r.is_dir&&e.is_dir?-1:r.z!==e.z?r.z-e.z:r.x!==e.x?r.x-e.x:r.y-e.y,lo=(r,e)=>{const t=r.getUint8(e*17);return{z:t&127,x:xt(r,e*17+1),y:xt(r,e*17+4),offset:so(r,e*17+7),length:r.getUint32(e*17+13,!0),is_dir:t>>7===1}},vn=r=>{const e=[],t=new DataView(r);for(let n=0;n<t.byteLength/17;n++)e.push(lo(t,n));return op(e)},op=r=>{r.sort(np);const e=new ArrayBuffer(17*r.length),t=new Uint8Array(e);for(let n=0;n<r.length;n++){const o=r[n];let s=o.z;o.is_dir&&(s=s|128),t[n*17]=s,t[n*17+1]=o.x&255,t[n*17+2]=o.x>>8&255,t[n*17+3]=o.x>>16&255,t[n*17+4]=o.y&255,t[n*17+5]=o.y>>8&255,t[n*17+6]=o.y>>16&255,t[n*17+7]=o.offset&255,t[n*17+8]=Lt(o.offset,8)&255,t[n*17+9]=Lt(o.offset,16)&255,t[n*17+10]=Lt(o.offset,24)&255,t[n*17+11]=Lt(o.offset,32)&255,t[n*17+12]=Lt(o.offset,48)&255,t[n*17+13]=o.length&255,t[n*17+14]=o.length>>8&255,t[n*17+15]=o.length>>16&255,t[n*17+16]=o.length>>24&255}return e},sp=(r,e)=>{if(r.byteLength<17)return null;const t=r.byteLength/17,n=lo(r,t-1);if(n.is_dir){const o=n.z,s=e.z-o,l=Math.trunc(e.x/(1<<s)),a=Math.trunc(e.y/(1<<s));return{z:o,x:l,y:a}}return null};function ip(r){return ke(this,null,function*(){const e=yield r.getBytes(0,512e3),t=new DataView(e.data),n=t.getUint32(4,!0),o=t.getUint16(8,!0),s=new TextDecoder("utf-8"),l=JSON.parse(s.decode(new DataView(e.data,10,n)));let a=0;l.compression==="gzip"&&(a=2);let i=0;"minzoom"in l&&(i=+l.minzoom);let u=0;"maxzoom"in l&&(u=+l.maxzoom);let f=0,c=0,p=0,m=-180,_=-85,k=180,L=85;if(l.bounds){const D=l.bounds.split(",");m=+D[0],_=+D[1],k=+D[2],L=+D[3]}if(l.center){const D=l.center.split(",");f=+D[0],c=+D[1],p=+D[2]}return{specVersion:t.getUint16(2,!0),rootDirectoryOffset:10+n,rootDirectoryLength:o*17,jsonMetadataOffset:10,jsonMetadataLength:n,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:a,tileType:1,minZoom:i,maxZoom:u,minLon:m,minLat:_,maxLon:k,maxLat:L,centerZoom:p,centerLon:f,centerLat:c,etag:e.etag}})}function lp(r,e,t,n,o,s,l){return ke(this,null,function*(){let a=yield t.getArrayBuffer(e,r.rootDirectoryOffset,r.rootDirectoryLength,r);r.specVersion===1&&(a=vn(a));const i=bn(new DataView(a),n,o,s);if(i){let c=(yield e.getBytes(i.offset,i.length,l)).data;const p=new DataView(c);return p.getUint8(0)==31&&p.getUint8(1)==139&&(c=gr(new Uint8Array(c))),{data:c}}const u=sp(new DataView(a),{z:n,x:o,y:s});if(u){const f=rp(new DataView(a),u.z,u.x,u.y);if(f){let c=yield t.getArrayBuffer(e,f.offset,f.length,r);r.specVersion===1&&(c=vn(c));const p=bn(new DataView(c),n,o,s);if(p){let _=(yield e.getBytes(p.offset,p.length,l)).data;const k=new DataView(_);return k.getUint8(0)==31&&k.getUint8(1)==139&&(_=gr(new Uint8Array(_))),{data:_}}}}})}var ao={getHeader:ip,getZxy:lp},ap=class{constructor(){this.tile=(r,e)=>{if(r.type=="json"){const t=r.url.substr(10);let n=this.tiles.get(t);return n||(n=new yn(t),this.tiles.set(t,n)),n.getHeader().then(o=>{const s={tiles:[r.url+"/{z}/{x}/{y}"],minzoom:o.minZoom,maxzoom:o.maxZoom,bounds:[o.minLon,o.minLat,o.maxLon,o.maxLat]};e(null,s,null,null)}).catch(o=>{e(o,null,null,null)}),{cancel:()=>{}}}else{const t=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),n=r.url.match(t);if(!n)throw new Error("Invalid PMTiles protocol URL");const o=n[1];let s=this.tiles.get(o);s||(s=new yn(o),this.tiles.set(o,s));const l=n[2],a=n[3],i=n[4],u=new AbortController,f=u.signal;let c=()=>{u.abort()};return s.getHeader().then(p=>{s.getZxy(+l,+a,+i,f).then(m=>{m?e(null,new Uint8Array(m.data),m.cacheControl,m.expires):p.tileType==1?e(null,new Uint8Array,null,null):e(null,null,null,null)}).catch(m=>{m.name!=="AbortError"&&e(m,null,null,null)})}),{cancel:c}}},this.tiles=new Map}add(r){this.tiles.set(r.source.getKey(),r)}get(r){return this.tiles.get(r)}};function vt(r,e){return(e>>>0)*4294967296+(r>>>0)}function fp(r,e){const t=e.buf;let n,o;if(o=t[e.pos++],n=(o&112)>>4,o<128||(o=t[e.pos++],n|=(o&127)<<3,o<128)||(o=t[e.pos++],n|=(o&127)<<10,o<128)||(o=t[e.pos++],n|=(o&127)<<17,o<128)||(o=t[e.pos++],n|=(o&127)<<24,o<128)||(o=t[e.pos++],n|=(o&1)<<31,o<128))return vt(r,n);throw new Error("Expected varint not more than 10 bytes")}function Tt(r){const e=r.buf;let t,n;return n=e[r.pos++],t=n&127,n<128||(n=e[r.pos++],t|=(n&127)<<7,n<128)||(n=e[r.pos++],t|=(n&127)<<14,n<128)||(n=e[r.pos++],t|=(n&127)<<21,n<128)?t:(n=e[r.pos],t|=(n&15)<<28,fp(t,r))}function up(r,e,t,n){if(n==0){t==1&&(e[0]=r-1-e[0],e[1]=r-1-e[1]);const o=e[0];e[0]=e[1],e[1]=o}}var cp=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function pp(r,e,t){if(r>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(e>Math.pow(2,r)-1||t>Math.pow(2,r)-1)throw Error("tile x/y outside zoom level bounds");const n=cp[r],o=Math.pow(2,r);let s=0,l=0,a=0;const i=[e,t];let u=o/2;for(;u>0;)s=(i[0]&u)>0?1:0,l=(i[1]&u)>0?1:0,a+=u*u*(3*s^l),up(u,i,s,l),u=u/2;return n+a}function fo(r,e){return ke(this,null,function*(){if(e===1||e===0)return r;if(e===2){if(typeof globalThis.DecompressionStream>"u")return gr(new Uint8Array(r));{let n=new Response(r).body.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(n).arrayBuffer()}}else throw Error("Compression method not supported")})}var mp=127;function hp(r,e){let t=0,n=r.length-1;for(;t<=n;){const o=n+t>>1,s=e-r[o].tileId;if(s>0)t=o+1;else if(s<0)n=o-1;else return r[o]}return n>=0&&(r[n].runLength===0||e-r[n].tileId<r[n].runLength)?r[n]:null}var dp=class{constructor(r){this.url=r}getKey(){return this.url}getBytes(r,e,t){return ke(this,null,function*(){let n;t||(n=new AbortController,t=n.signal);let o=yield fetch(this.url,{signal:t,headers:{Range:"bytes="+r+"-"+(r+e-1)}});if(o.status===416&&r===0){const a=o.headers.get("Content-Range");if(!a||!a.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const i=+a.substr(8);o=yield fetch(this.url,{signal:t,headers:{Range:"bytes=0-"+(i-1)}})}if(o.status>=300)throw Error("Bad response code: "+o.status);const s=o.headers.get("Content-Length");if(o.status===200&&(!s||+s>e))throw n&&n.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield o.arrayBuffer(),etag:o.headers.get("ETag")||void 0,cacheControl:o.headers.get("Cache-Control")||void 0,expires:o.headers.get("Expires")||void 0}})}};function ze(r,e){const t=r.getUint32(e+4,!0),n=r.getUint32(e+0,!0);return t*Math.pow(2,32)+n}function $p(r,e){const t=new DataView(r),n=t.getUint8(7);if(n>3)throw Error(`Archive is spec version ${n} but this library supports up to spec version 3`);return{specVersion:n,rootDirectoryOffset:ze(t,8),rootDirectoryLength:ze(t,16),jsonMetadataOffset:ze(t,24),jsonMetadataLength:ze(t,32),leafDirectoryOffset:ze(t,40),leafDirectoryLength:ze(t,48),tileDataOffset:ze(t,56),tileDataLength:ze(t,64),numAddressedTiles:ze(t,72),numTileEntries:ze(t,80),numTileContents:ze(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}function uo(r){const e={buf:new Uint8Array(r),pos:0},t=Tt(e),n=[];let o=0;for(let s=0;s<t;s++){const l=Tt(e);n.push({tileId:o+l,offset:0,length:0,runLength:1}),o+=l}for(let s=0;s<t;s++)n[s].runLength=Tt(e);for(let s=0;s<t;s++)n[s].length=Tt(e);for(let s=0;s<t;s++){const l=Tt(e);l===0&&s>0?n[s].offset=n[s-1].offset+n[s-1].length:n[s].offset=l-1}return n}function gp(r){const e=new DataView(r);return e.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):e.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var kt=class extends Error{};function _p(r,e,t,n){return ke(this,null,function*(){const o=yield r.getBytes(0,16384);if(new DataView(o.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(gp(o.data)<3)return[yield ao.getHeader(r)];const l=o.data.slice(0,mp);let a=o.etag;n&&o.etag!=n&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+r.getKey()),a=void 0);const i=$p(l,a);if(t){const u=o.data.slice(i.rootDirectoryOffset,i.rootDirectoryOffset+i.rootDirectoryLength),f=r.getKey()+"|"+(i.etag||"")+"|"+i.rootDirectoryOffset+"|"+i.rootDirectoryLength,c=uo(yield e(u,i.internalCompression));return[i,[f,c.length,c]]}return[i,void 0]})}function bp(r,e,t,n,o){return ke(this,null,function*(){const s=yield r.getBytes(t,n);if(o.etag&&o.etag!==s.etag)throw new kt(s.etag);const l=yield e(s.data,o.internalCompression),a=uo(l);if(a.length===0)throw new Error("Empty directory is invalid");return a})}var vp=class{constructor(r=100,e=!0,t=fo){this.cache=new Map,this.maxCacheEntries=r,this.counter=1,this.prefetch=e,this.decompress=t}getHeader(r,e){return ke(this,null,function*(){const t=r.getKey();if(this.cache.has(t))return this.cache.get(t).lastUsed=this.counter++,yield this.cache.get(t).data;const n=new Promise((o,s)=>{_p(r,this.decompress,this.prefetch,e).then(l=>{l[1]&&this.cache.set(l[1][0],{lastUsed:this.counter++,data:Promise.resolve(l[1][2])}),o(l[0]),this.prune()}).catch(l=>{s(l)})});return this.cache.set(t,{lastUsed:this.counter++,data:n}),n})}getDirectory(r,e,t,n){return ke(this,null,function*(){const o=r.getKey()+"|"+(n.etag||"")+"|"+e+"|"+t;if(this.cache.has(o))return this.cache.get(o).lastUsed=this.counter++,yield this.cache.get(o).data;const s=new Promise((l,a)=>{bp(r,this.decompress,e,t,n).then(i=>{l(i),this.prune()}).catch(i=>{a(i)})});return this.cache.set(o,{lastUsed:this.counter++,data:s}),s})}getArrayBuffer(r,e,t,n){return ke(this,null,function*(){const o=r.getKey()+"|"+(n.etag||"")+"|"+e+"|"+t;if(this.cache.has(o))return this.cache.get(o).lastUsed=this.counter++,yield this.cache.get(o).data;const s=new Promise((l,a)=>{r.getBytes(e,t).then(i=>{if(n.etag&&n.etag!==i.etag)throw new kt(i.etag);l(i.data),this.cache.has(o),this.prune()}).catch(i=>{a(i)})});return this.cache.set(o,{lastUsed:this.counter++,data:s}),s})}prune(){if(this.cache.size>=this.maxCacheEntries){let r=1/0,e;this.cache.forEach((t,n)=>{t.lastUsed<r&&(r=t.lastUsed,e=n)}),e&&this.cache.delete(e)}}invalidate(r,e){return ke(this,null,function*(){this.cache.delete(r.getKey()),yield this.getHeader(r,e)})}},yn=class{constructor(r,e,t){typeof r=="string"?this.source=new dp(r):this.source=r,t?this.decompress=t:this.decompress=fo,e?this.cache=e:this.cache=new vp}getHeader(){return ke(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(r,e,t,n){return ke(this,null,function*(){const o=pp(r,e,t),s=yield this.cache.getHeader(this.source);if(s.specVersion<3)return ao.getZxy(s,this.source,this.cache,r,e,t,n);if(r<s.minZoom||r>s.maxZoom)return;let l=s.rootDirectoryOffset,a=s.rootDirectoryLength;for(let i=0;i<=3;i++){const u=yield this.cache.getDirectory(this.source,l,a,s),f=hp(u,o);if(f)if(f.runLength>0){const c=yield this.source.getBytes(s.tileDataOffset+f.offset,f.length,n);if(s.etag&&s.etag!==c.etag)throw new kt(c.etag);return{data:yield this.decompress(c.data,s.tileCompression),cacheControl:c.cacheControl,expires:c.expires}}else l=s.leafDirectoryOffset+f.offset,a=f.length;else return}throw Error("Maximum directory depth exceeded")})}getZxy(r,e,t,n){return ke(this,null,function*(){try{return yield this.getZxyAttempt(r,e,t,n)}catch(o){if(o instanceof kt)return this.cache.invalidate(this.source,o.message),yield this.getZxyAttempt(r,e,t,n);throw o}})}getMetadataAttempt(){return ke(this,null,function*(){const r=yield this.cache.getHeader(this.source),e=yield this.source.getBytes(r.jsonMetadataOffset,r.jsonMetadataLength);if(r.etag&&r.etag!==e.etag)throw new kt(e.etag);const t=yield this.decompress(e.data,r.internalCompression),n=new TextDecoder("utf-8");return JSON.parse(n.decode(t))})}getMetadata(){return ke(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(r){if(r instanceof kt)return this.cache.invalidate(this.source,r.message),yield this.getMetadataAttempt();throw r}})}};function yp(r){return Ft(()=>{let e=new ap;nt.addProtocol("pmtiles",e.tile)}),Xt(()=>{nt.removeProtocol("pmtiles")}),[]}class wp extends Z{constructor(e){super(),K(this,e,yp,null,V,{})}}function wn(r,e,t){const n=r.slice();return n[13]=e[t],n}function kp(r){let e,t;return e=new Oc({props:{loadFile:r[7]}}),{c(){b(e.$$.fragment)},m(n,o){v(e,n,o),t=!0},p:ne,i(n){t||($(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){y(e,n)}}}function kn(r){let e,t,n,o;function s(i){r[9](i)}function l(i){r[10](i)}let a={schemes:r[1]};return r[2]!==void 0&&(a.schemesToBeShown=r[2]),r[3]!==void 0&&(a.filterText=r[3]),e=new $l({props:a}),G.push(()=>x(e,"schemesToBeShown",s)),G.push(()=>x(e,"filterText",l)),{c(){b(e.$$.fragment)},m(i,u){v(e,i,u),o=!0},p(i,u){const f={};u&2&&(f.schemes=i[1]),!t&&u&4&&(t=!0,f.schemesToBeShown=i[2],X(()=>t=!1)),!n&&u&8&&(n=!0,f.filterText=i[3],X(()=>n=!1)),e.$set(f)},i(i){o||($(e.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),o=!1},d(i){y(e,i)}}}function Sn(r){let e,t;return e=new Pc({props:{scheme:r[13],authorityNames:r[5]}}),{c(){b(e.$$.fragment)},m(n,o){v(e,n,o),t=!0},p(n,o){const s={};o&2&&(s.scheme=n[13]),e.$set(s)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){y(e,n)}}}function Cn(r){let e=r[2].has(r[13].scheme_reference),t,n,o=e&&Sn(r);return{c(){o&&o.c(),t=Qe()},m(s,l){o&&o.m(s,l),h(s,t,l),n=!0},p(s,l){l&6&&(e=s[2].has(s[13].scheme_reference)),e?o?(o.p(s,l),l&6&&$(o,1)):(o=Sn(s),o.c(),$(o,1),o.m(t.parentNode,t)):o&&(pe(),g(o,1,1,()=>{o=null}),me())},i(s){n||($(o),n=!0)},o(s){g(o),n=!1},d(s){s&&d(t),o&&o.d(s)}}}function Sp(r){let e,t,n,o,s,l,a,i,u,f,c=_r()=="Private (development)",p,m,_,k,L,T,D,B;s=new ko({props:{boundaryGeojson:r[4]}}),a=new ns({}),u=new _o({});let C=c&&kp(r);m=new Eo({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[7]}}),k=new An({props:{errorMessage:r[0]}});let A=r[1].size>0&&kn(r),j=ot(r[1].values()),M=[];for(let O=0;O<j.length;O+=1)M[O]=Cn(wn(r,j,O));const P=O=>g(M[O],1,1,()=>{M[O]=null});return{c(){e=N("div"),t=N("div"),n=N("h1"),n.textContent="Browse schemes",o=I(),b(s.$$.fragment),l=I(),b(a.$$.fragment),i=I(),b(u.$$.fragment),f=I(),C&&C.c(),p=I(),b(m.$$.fragment),_=I(),b(k.$$.fragment),L=I(),A&&A.c(),T=I(),D=N("ul");for(let O=0;O<M.length;O+=1)M[O].c();Je(t,"display","flex"),Je(t,"justify-content","space-between"),ee(e,"slot","sidebar"),ee(e,"class","govuk-prose")},m(O,S){h(O,e,S),E(e,t),E(t,n),E(t,o),v(s,t,null),E(e,l),v(a,e,null),E(e,i),v(u,e,null),E(e,f),C&&C.m(e,null),E(e,p),v(m,e,null),E(e,_),v(k,e,null),E(e,L),A&&A.m(e,null),E(e,T),E(e,D);for(let R=0;R<M.length;R+=1)M[R]&&M[R].m(D,null);B=!0},p(O,S){const R={};S&16&&(R.boundaryGeojson=O[4]),s.$set(R),c&&C.p(O,S);const U={};if(S&1&&(U.errorMessage=O[0]),k.$set(U),O[1].size>0?A?(A.p(O,S),S&2&&$(A,1)):(A=kn(O),A.c(),$(A,1),A.m(e,T)):A&&(pe(),g(A,1,1,()=>{A=null}),me()),S&38){j=ot(O[1].values());let W;for(W=0;W<j.length;W+=1){const te=wn(O,j,W);M[W]?(M[W].p(te,S),$(M[W],1)):(M[W]=Cn(te),M[W].c(),$(M[W],1),M[W].m(D,null))}for(pe(),W=j.length;W<M.length;W+=1)P(W);me()}},i(O){if(!B){$(s.$$.fragment,O),$(a.$$.fragment,O),$(u.$$.fragment,O),$(C),$(m.$$.fragment,O),$(k.$$.fragment,O),$(A);for(let S=0;S<j.length;S+=1)$(M[S]);B=!0}},o(O){g(s.$$.fragment,O),g(a.$$.fragment,O),g(u.$$.fragment,O),g(C),g(m.$$.fragment,O),g(k.$$.fragment,O),g(A),M=M.filter(Boolean);for(let S=0;S<M.length;S+=1)g(M[S]);B=!1},d(O){O&&d(e),y(s),y(a),y(u),C&&C.d(),y(m),y(k),A&&A.d(),Zt(M,O)}}}function Cp(r){let e,t,n,o,s,l,a,i,u,f,c;return e=new So({props:{colorInterventions:Dn("v1")}}),n=new fe({props:{layer:"interventions-points",tooltip:r[8],clickable:!1}}),s=new fe({props:{layer:"interventions-lines",tooltip:r[8],clickable:!1}}),a=new fe({props:{layer:"interventions-polygons",tooltip:r[8],clickable:!1}}),f=new Lc({props:{style:r[6]}}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment),o=I(),b(s.$$.fragment),l=I(),b(a.$$.fragment),i=I(),u=N("div"),b(f.$$.fragment),ee(u,"class","top-right svelte-u44ed2")},m(p,m){v(e,p,m),h(p,t,m),v(n,p,m),h(p,o,m),v(s,p,m),h(p,l,m),v(a,p,m),h(p,i,m),h(p,u,m),v(f,u,null),c=!0},p:ne,i(p){c||($(e.$$.fragment,p),$(n.$$.fragment,p),$(s.$$.fragment,p),$(a.$$.fragment,p),$(f.$$.fragment,p),c=!0)},o(p){g(e.$$.fragment,p),g(n.$$.fragment,p),g(s.$$.fragment,p),g(a.$$.fragment,p),g(f.$$.fragment,p),c=!1},d(p){p&&(d(t),d(o),d(l),d(i),d(u)),y(e,p),y(n,p),y(s,p),y(a,p),y(f)}}}function Lp(r){let e,t,n,o,s;return t=new wp({}),o=new Do({props:{style:r[6],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Cp]},$$scope:{ctx:r}}}),{c(){e=N("div"),b(t.$$.fragment),n=I(),b(o.$$.fragment),ee(e,"slot","main")},m(l,a){h(l,e,a),v(t,e,null),E(e,n),v(o,e,null),s=!0},p(l,a){const i={};a&65536&&(i.$$scope={dirty:a,ctx:l}),o.$set(i)},i(l){s||($(t.$$.fragment,l),$(o.$$.fragment,l),s=!0)},o(l){g(t.$$.fragment,l),g(o.$$.fragment,l),s=!1},d(l){l&&d(e),y(t),y(o)}}}function Tp(r){let e,t;return e=new Io({props:{$$slots:{main:[Lp],sidebar:[Sp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(n,o){v(e,n,o),t=!0},p(n,[o]){const s={};o&65567&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){y(e,n)}}}function Op(r,e,t){let n;q(r,St,L=>t(4,n=L));let o=new Set(Nc);Ft(()=>{bo()});let l=new URLSearchParams(window.location.search).get("style")||"dataviz",a="",i=new Map,u=new Set,f="";Xt(()=>{St.set(On())});function c(L){try{let T=JSON.parse(L);t(1,i=ol(T)),St.set(T),t(0,a="")}catch(T){t(0,a=`The file you loaded is broken: ${T}`)}}function p(L){let T=L.properties;var D='<div style="max-width: 30vw;">';return D+=`<h2>${m(T.name)} (${T.intervention_type})</h2>`,D+=`<p>Scheme reference: ${T.scheme_reference}</p>`,T.length_meters&&(D+=`<p>Length: ${vo(T.length_meters)}</p>`),T.description&&(D+=`<p>${m(T.description)}</p>`),D+="</div>",D}function m(L){return f?L.replace(new RegExp(f,"gi"),T=>`<mark>${T}</mark>`):L}function _(L){u=L,t(2,u)}function k(L){f=L,t(3,f)}return[a,i,u,f,n,o,l,c,p,_,k]}class Ap extends Z{constructor(e){super(),K(this,e,Op,Tp,V,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new Ap({target:document.getElementById("app")});
