import{S as G,i as z,s as W,C as Hr,b as X,c as Q,e as O,d as L,g as h,az as Rr,h as K,j as _,k,m as b,w as _t,l as x,t as m,n as d,o as g,p as v,aL as Wt,aM as Ut,aN as Gt,aO as zt,$ as ve,as as ie,at as ae,aU as dr,aV as _n,aW as Wr,q as ge,a3 as an,aX as gn,aY as Ur,aZ as Gr,a0 as te,a_ as zr,a$ as nt,u as w,f as fn,ao as qr,A as Lt,aq as Qt,Q as gt,r as Ot,F as hr,a as St,v as dn,B as H,b0 as xt,aE as Vr,aB as Ie,aP as Xr,aQ as Kr,K as B,N as Y,O as J,P as Z,x as en,ab as Yr,aT as V,ap as Te,aC as Ft,b1 as fe,b2 as $e,R as br,b3 as un,b4 as cn,E as vr,b5 as hn,J as Jr,aI as bn,_ as Zr,Z as vn,Y as wn,X as Nt,aS as kn,L as Qr,M as xr,y as el}from"./index-55e37244.js";import{e as Mt,C as Se,b as At,d as le,c as jt,a as Bt,B as tl,S as nl,l as rt,L as rl}from"./StreetViewController-459ce417.js";import{h as ll,i as yn,f as wr,L as ue,l as ol,j as de,C as Ge,Z as sl}from"./index-dcc3cac0.js";import{L as il,G as dt,h as q,a as je,F as al}from"./GeoJSON-4baf95b3.js";import{P as re}from"./Popup-23b0cc0c.js";const fl="/atip/svelte_maplibre_v2/assets/help-d011708a.svg";function ul(r){let e,n;const t=r[1].default,l=Wt(t,r,r[4],null);return{c(){e=O("div"),l&&l.c(),K(e,"class","govuk-prose")},m(o,i){_(o,e,i),l&&l.m(e,null),n=!0},p(o,i){l&&l.p&&(!n||i&16)&&Ut(l,t,o,o[4],n?zt(t,o[4],i,null):Gt(o[4]),null)},i(o){n||(m(l,o),n=!0)},o(o){d(l,o),n=!1},d(o){o&&g(e),l&&l.d(o)}}}function cl(r){let e,n,t,l,o,i,u,s,a;function f($){r[3]($)}let c={title:"Help",$$slots:{default:[ul]},$$scope:{ctx:r}};return r[0]!==void 0&&(c.open=r[0]),o=new Hr({props:c}),X.push(()=>Q(o,"open",f)),{c(){e=O("button"),n=O("img"),l=L(),h(o.$$.fragment),Rr(n.src,t=fl)||K(n,"src",t),K(n,"title","Help"),K(n,"alt","Help"),K(e,"class","svelte-7d9d1l")},m($,p){_($,e,p),k(e,n),_($,l,p),b(o,$,p),u=!0,s||(a=_t(e,"click",r[2]),s=!0)},p($,[p]){const C={};p&16&&(C.$$scope={dirty:p,ctx:$}),!i&&p&1&&(i=!0,C.open=$[0],x(()=>i=!1)),o.$set(C)},i($){u||(m(o.$$.fragment,$),u=!0)},o($){d(o.$$.fragment,$),u=!1},d($){$&&(g(e),g(l)),v(o,$),s=!1,a()}}}function $l(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const i=()=>n(0,o=!0);function u(s){o=s,n(0,o)}return r.$$set=s=>{"$$scope"in s&&n(4,l=s.$$scope)},[o,t,i,u,l]}class oe extends G{constructor(e){super(),z(this,e,$l,cl,W,{})}}function Sn(r){let e=r[0],n,t,l=Cn(r);return{c(){l.c(),n=ve()},m(o,i){l.m(o,i),_(o,n,i),t=!0},p(o,i){i&1&&W(e,e=o[0])?(ie(),d(l,1,1,te),ae(),l=Cn(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||(m(l),t=!0)},o(o){d(l),t=!1},d(o){o&&g(n),l.d(o)}}}function Cn(r){let e;const n=r[8].default,t=Wt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&Ut(t,n,l,l[7],e?zt(n,l[7],o,null):Gt(l[7]),null)},i(l){e||(m(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function pl(r){let e,n,t=r[0]&&Sn(r);return{c(){t&&t.c(),e=ve()},m(l,o){t&&t.m(l,o),_(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=Sn(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ie(),d(t,1,1,()=>{t=null}),ae())},i(l){n||(m(t),n=!0)},o(l){d(t),n=!1},d(l){l&&g(e),t&&t.d(l)}}}function ml(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=dr("vector")}=e,{url:s=null}=e,{tiles:a=null}=e;if(s&&s.includes("pmtiles://")&&!_n.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let $=new zr;_n.addProtocol("pmtiles",$.tile)}const{map:f,self:c}=Wr();return ge(r,f,$=>n(6,t=$)),ge(r,c,$=>n(0,l=$)),an(()=>{if(l){let $=l;gn(c,l=null,l),Ur().then(()=>{t!=null&&t.loaded()&&(t==null||t.removeSource($))})}}),r.$$set=$=>{"id"in $&&n(3,u=$.id),"url"in $&&n(4,s=$.url),"tiles"in $&&n(5,a=$.tiles),"$$scope"in $&&n(7,i=$.$$scope)},r.$$.update=()=>{r.$$.dirty&121&&t&&l!==u&&(l&&t.removeSource(l),gn(c,l=u,l),t.addSource(l,Gr({type:"vector",url:s,tiles:a})))},[l,f,c,u,s,a,t,i,o]}class ce extends G{constructor(e){super(),z(this,e,ml,pl,W,{id:3,url:4,tiles:5})}}function _l(r){let e;const n=r[15].default,t=Wt(n,r,r[23],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&8388608)&&Ut(t,n,l,l[23],e?zt(n,l[23],o,null):Gt(l[23]),null)},i(l){e||(m(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function gl(r){let e,n,t;function l(i){r[16](i)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],$$slots:{default:[_l]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new il({props:o}),X.push(()=>Q(e,"hovered",l)),e.$on("click",r[17]),e.$on("dblclick",r[18]),e.$on("contextmenu",r[19]),e.$on("mouseenter",r[20]),e.$on("mousemove",r[21]),e.$on("mouseleave",r[22]),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,[u]){const s={};u&2&&(s.id=i[1]),u&4&&(s.source=i[2]),u&8&&(s.sourceLayer=i[3]),u&16&&(s.beforeId=i[4]),u&32&&(s.beforeLayerType=i[5]),u&64&&(s.paint=i[6]),u&128&&(s.layout=i[7]),u&256&&(s.filter=i[8]),u&512&&(s.applyToClusters=i[9]),u&1024&&(s.minzoom=i[10]),u&2048&&(s.maxzoom=i[11]),u&4096&&(s.hoverCursor=i[12]),u&8192&&(s.manageHoverState=i[13]),u&16384&&(s.eventsIfTopMost=i[14]),u&8388608&&(s.$$scope={dirty:u,ctx:i}),!n&&u&1&&(n=!0,s.hovered=i[0],x(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){d(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function dl(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=dr("symbol")}=e,{source:i=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:$=void 0}=e,{applyToClusters:p=void 0}=e,{minzoom:C=void 0}=e,{maxzoom:y=void 0}=e,{hoverCursor:S=void 0}=e,{manageHoverState:T=!1}=e,{hovered:E=null}=e,{eventsIfTopMost:F=!1}=e;function M(j){E=j,n(0,E)}function A(j){nt.call(this,r,j)}function P(j){nt.call(this,r,j)}function N(j){nt.call(this,r,j)}function I(j){nt.call(this,r,j)}function D(j){nt.call(this,r,j)}function R(j){nt.call(this,r,j)}return r.$$set=j=>{"id"in j&&n(1,o=j.id),"source"in j&&n(2,i=j.source),"sourceLayer"in j&&n(3,u=j.sourceLayer),"beforeId"in j&&n(4,s=j.beforeId),"beforeLayerType"in j&&n(5,a=j.beforeLayerType),"paint"in j&&n(6,f=j.paint),"layout"in j&&n(7,c=j.layout),"filter"in j&&n(8,$=j.filter),"applyToClusters"in j&&n(9,p=j.applyToClusters),"minzoom"in j&&n(10,C=j.minzoom),"maxzoom"in j&&n(11,y=j.maxzoom),"hoverCursor"in j&&n(12,S=j.hoverCursor),"manageHoverState"in j&&n(13,T=j.manageHoverState),"hovered"in j&&n(0,E=j.hovered),"eventsIfTopMost"in j&&n(14,F=j.eventsIfTopMost),"$$scope"in j&&n(23,l=j.$$scope)},[E,o,i,u,s,a,f,c,$,p,C,y,S,T,F,t,M,A,P,N,I,D,R,l]}class hl extends G{constructor(e){super(),z(this,e,dl,gl,W,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14})}}function bl(r){let e;return{c(){e=O("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function vl(r){let e,n,t,l,o=r[0]=="Private (development)"&&bl();return{c(){o&&o.c(),e=L(),n=O("p"),n.textContent="Note the ATF scheme data has not been validated.",t=L(),l=O("p"),l.innerHTML=`Please contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      about any problems, ideas, or feedback for this site.`},m(i,u){o&&o.m(i,u),_(i,e,u),_(i,n,u),_(i,t,u),_(i,l,u)},p:te,d(i){i&&(g(e),g(n),g(t),g(l)),o&&o.d(i)}}}function wl(r){let e,n,t,l,o,i;return o=new oe({props:{$$slots:{default:[vl]},$$scope:{ctx:r}}}),{c(){e=O("p"),n=w("App version: "),t=w(r[0]),l=L(),h(o.$$.fragment)},m(u,s){_(u,e,s),k(e,n),k(e,t),k(e,l),b(o,e,null),i=!0},p(u,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:u}),o.$set(a)},i(u){i||(m(o.$$.fragment,u),i=!0)},o(u){d(o.$$.fragment,u),i=!1},d(u){u&&g(e),v(o)}}}function kl(r){return[fn()]}class yl extends G{constructor(e){super(),z(this,e,kl,wl,W,{})}}const Sl={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var me=Uint8Array,Je=Uint16Array,kr=Uint32Array,yr=new me([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Sr=new me([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Cl=new me([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Cr=function(r,e){for(var n=new Je(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new kr(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},Tr=Cr(yr,2),Lr=Tr[0],Tl=Tr[1];Lr[28]=258,Tl[258]=28;var Ll=Cr(Sr,0),Ol=Ll[0],tn=new Je(32768);for(var ne=0;ne<32768;++ne){var Re=(ne&43690)>>>1|(ne&21845)<<1;Re=(Re&52428)>>>2|(Re&13107)<<2,Re=(Re&61680)>>>4|(Re&3855)<<4,tn[ne]=((Re&65280)>>>8|(Re&255)<<8)>>>1}var yt=function(r,e,n){for(var t=r.length,l=0,o=new Je(e);l<t;++l)r[l]&&++o[r[l]-1];var i=new Je(e);for(l=0;l<e;++l)i[l]=i[l-1]+o[l-1]<<1;var u;if(n){u=new Je(1<<e);var s=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],f=e-r[l],c=i[r[l]-1]++<<f,$=c|(1<<f)-1;c<=$;++c)u[tn[c]>>>s]=a}else for(u=new Je(t),l=0;l<t;++l)r[l]&&(u[l]=tn[i[r[l]-1]++]>>>15-r[l]);return u},Pt=new me(288);for(var ne=0;ne<144;++ne)Pt[ne]=8;for(var ne=144;ne<256;++ne)Pt[ne]=9;for(var ne=256;ne<280;++ne)Pt[ne]=7;for(var ne=280;ne<288;++ne)Pt[ne]=8;var Or=new me(32);for(var ne=0;ne<32;++ne)Or[ne]=5;var Al=yt(Pt,9,1),Pl=yt(Or,5,1),qt=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},ke=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},Vt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},El=function(r){return(r+7)/8|0},$n=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?Je:r.BYTES_PER_ELEMENT==4?kr:me)(n-e);return t.set(r.subarray(e,n)),t},Nl=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ye=function(r,e,n){var t=new Error(e||Nl[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,ye),!n)throw t;return t},Il=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new me(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new me(t*3));var i=function(et){var Xe=e.length;if(et>Xe){var tt=new me(Math.max(Xe*2,et));tt.set(e),e=tt}},u=n.f||0,s=n.p||0,a=n.b||0,f=n.l,c=n.d,$=n.m,p=n.n,C=t*8;do{if(!f){u=ke(r,s,1);var y=ke(r,s+1,3);if(s+=3,y)if(y==1)f=Al,c=Pl,$=9,p=5;else if(y==2){var F=ke(r,s,31)+257,M=ke(r,s+10,15)+4,A=F+ke(r,s+5,31)+1;s+=14;for(var P=new me(A),N=new me(19),I=0;I<M;++I)N[Cl[I]]=ke(r,s+I*3,7);s+=M*3;for(var D=qt(N),R=(1<<D)-1,j=yt(N,D,1),I=0;I<A;){var se=j[ke(r,s,R)];s+=se&15;var S=se>>>4;if(S<16)P[I++]=S;else{var ee=0,we=0;for(S==16?(we=3+ke(r,s,3),s+=2,ee=P[I-1]):S==17?(we=3+ke(r,s,7),s+=3):S==18&&(we=11+ke(r,s,127),s+=7);we--;)P[I++]=ee}}var ht=P.subarray(0,F),he=P.subarray(F);$=qt(ht),p=qt(he),f=yt(ht,$,1),c=yt(he,p,1)}else ye(1);else{var S=El(s)+4,T=r[S-4]|r[S-3]<<8,E=S+T;if(E>t){o&&ye(0);break}l&&i(a+T),e.set(r.subarray(S,E),a),n.b=a+=T,n.p=s=E*8,n.f=u;continue}if(s>C){o&&ye(0);break}}l&&i(a+131072);for(var Qe=(1<<$)-1,bt=(1<<p)-1,xe=s;;xe=s){var ee=f[Vt(r,s)&Qe],pe=ee>>>4;if(s+=ee&15,s>C){o&&ye(0);break}if(ee||ye(2),pe<256)e[a++]=pe;else if(pe==256){xe=s,f=null;break}else{var vt=pe-254;if(pe>264){var I=pe-257,Me=yr[I];vt=ke(r,s,(1<<Me)-1)+Lr[I],s+=Me}var He=c[Vt(r,s)&bt],Ve=He>>>4;He||ye(3),s+=He&15;var he=Ol[Ve];if(Ve>3){var Me=Sr[Ve];he+=Vt(r,s)&(1<<Me)-1,s+=Me}if(s>C){o&&ye(0);break}l&&i(a+131072);for(var wt=a+vt;a<wt;a+=4)e[a]=e[a-he],e[a+1]=e[a+1-he],e[a+2]=e[a+2-he],e[a+3]=e[a+3-he];a=wt}}n.l=f,n.p=xe,n.b=a,n.f=u,f&&(u=1,n.m=$,n.d=c,n.n=p)}while(!u);return a==e.length?e:$n(e,0,a)},Dl=new me(0),Ne=function(r,e){return r[e]|r[e+1]<<8},Ce=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},Xt=function(r,e){return Ce(r,e)+Ce(r,e+4)*4294967296};function Fl(r,e){return Il(r,e)}var nn=typeof TextDecoder<"u"&&new TextDecoder,Ml=0;try{nn.decode(Dl,{stream:!0}),Ml=1}catch{}var jl=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,$n(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function Ar(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(nn)return nn.decode(r);var l=jl(r),o=l[0],i=l[1];return i.length&&ye(8),o}}var Bl=function(r,e){return e+30+Ne(r,e+26)+Ne(r,e+28)},Hl=function(r,e,n){var t=Ne(r,e+28),l=Ar(r.subarray(e+46,e+46+t),!(Ne(r,e+8)&2048)),o=e+46+t,i=Ce(r,e+20),u=n&&i==4294967295?Rl(r,o):[i,Ce(r,e+24),Ce(r,e+42)],s=u[0],a=u[1],f=u[2];return[Ne(r,e+10),s,a,l,o+Ne(r,e+30)+Ne(r,e+32),f]},Rl=function(r,e){for(;Ne(r,e)!=1;e+=4+Ne(r,e+2));return[Xt(r,e+12),Xt(r,e+4),Xt(r,e+20)]};function Wl(r,e){for(var n={},t=r.length-22;Ce(r,t)!=101010256;--t)(!t||r.length-t>65558)&&ye(13);var l=Ne(r,t+8);if(!l)return{};var o=Ce(r,t+16),i=o==4294967295||l==65535;if(i){var u=Ce(r,t-12);i=Ce(r,u)==101075792,i&&(l=Ce(r,u+32),o=Ce(r,u+48))}for(var s=e&&e.filter,a=0;a<l;++a){var f=Hl(r,o,i),c=f[0],$=f[1],p=f[2],C=f[3],y=f[4],S=f[5],T=Bl(r,S);o=y,(!s||s({name:C,size:$,originalSize:p,compression:c}))&&(c?c==8?n[C]=Fl(r.subarray(T,T+$),new me(p)):ye(14,"unknown compression type "+c):n[C]=$n(r,T,T+$))}return n}function Ul(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(Kt):Kt(r)}function Kt(r){var e=new Uint8Array(r),n=Wl(e);return Promise.resolve(Gl(n))}function Gl(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=Ar(r[l])}return e}function De(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&Ze(t)===e)return t;n++}}function Et(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&Ze(l)===e&&n.push(l),t++}return n}function Ht(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&Ze(l)===e&&n(l,t):n(l,t),t++}}function zl(r,e,n){var t=[];return Ht(r,e,function(l,o){t.push(n(l,o))}),t}var ql=/.+\:/;function Ze(r){return r.tagName.replace(ql,"")}function Pr(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+Ze(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=Pr(r.childNodes[t]),t++;return e+="</"+Ze(r)+">",e}function Vl(r){var e=r.documentElement,n=De(e,"sheetData"),t=[];return Ht(n,"row",function(l){Ht(l,"c",function(o){t.push(o)})}),t}function Xl(r,e){return De(e,"v")}function Kl(r,e){if(e.firstChild&&Ze(e.firstChild)==="is"&&e.firstChild.firstChild&&Ze(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Yl(r){var e=r.documentElement,n=De(e,"dimension");if(n)return n.getAttribute("ref")}function Jl(r){var e=r.documentElement,n=De(e,"cellStyleXfs");return n?Et(n,"xf"):[]}function Zl(r){var e=r.documentElement,n=De(e,"cellXfs");return n?Et(n,"xf"):[]}function Ql(r){var e=r.documentElement,n=De(e,"numFmts");return n?Et(n,"numFmt"):[]}function xl(r){var e=r.documentElement;return zl(e,"si",function(n){var t=De(n,"t");if(t)return t.textContent;var l="";return Ht(n,"r",function(o){l+=De(o,"t").textContent}),l})}function eo(r){var e=r.documentElement;return De(e,"workbookPr")}function to(r){var e=r.documentElement;return Et(e,"Relationship")}function no(r){var e=r.documentElement,n=De(e,"sheets");return Et(n,"sheet")}function ro(r,e){var n=e.createDocument(r),t={},l=eo(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return no(n).forEach(o),t}function lo(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(i){var u=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=Yt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=Yt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=Yt(u);break}};return to(n).forEach(l),t}function Yt(r){return r[0]==="/"?r.slice(1):"xl/"+r}function Tn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Ln(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tn(Object(n),!0).forEach(function(t){oo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Tn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function oo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function so(r,e){if(!r)return{};var n=e.createDocument(r),t=Jl(n).map(Jt),l=Ql(n).map(io).reduce(function(i,u){return i[u.id]=u,i},[]),o=function(u){return u.hasAttribute("xfId")?Ln(Ln({},t[u.xfId]),Jt(u,l)):Jt(u,l)};return Zl(n).map(o)}function io(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function Jt(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function ao(r,e){return r?xl(e.createDocument(r)):[]}function Er(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function fo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=uo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uo(r,e){if(r){if(typeof r=="string")return On(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return On(r,e)}}function On(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function co(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if($o.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&_o(l.numberFormat.template))return!0}}var $o=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],po=/^\[\$-414\]/,mo=/;@$/;function _o(r){r=r.toLowerCase(),r=r.replace(po,""),r=r.replace(mo,"");for(var e=r.split(/\W+/),n=fo(e),t;!(t=n()).done;){var l=t.value;if(go.indexOf(l)<0)return!1}return!0}var go=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function ho(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,i=n.styles,u=n.values,s=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=Zt(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=Zt(r,a);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=Zt(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=bo(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var $=Number(r);if(isNaN($))throw new Error('Invalid "numeric" cell value: '.concat(r));r=$,co(r,o(),i,a)&&(r=Er(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function bo(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function Zt(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var vo=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function wo(r){var e=function(a,f){return a-f},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),l=n[0],o=n[n.length-1],i=t[0],u=t[t.length-1];return[{row:l,column:i},{row:o,column:u}]}function ko(r){for(var e=0,n=0;n<r.length;)e*=26,e+=vo.indexOf(r[n]),n++;return e}function Nr(r){return r=r.split(/(\d+)/),[parseInt(r[1]),ko(r[0].trim())]}function yo(r,e,n,t,l,o,i){var u=Nr(r.getAttribute("r")),s=Xl(e,r),a=s&&s.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:ho(a,f,{getInlineStringValue:function(){return Kl(e,r)},getInlineStringXml:function(){return Pr(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:i})}}function So(r,e,n,t,l,o){var i=Vl(r);return i.length===0?[]:i.map(function(u){return yo(u,r,e,n,t,l,o)})}function Co(r,e){return Ao(r)||Oo(r,e)||Lo(r,e)||To()}function To(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lo(r,e){if(r){if(typeof r=="string")return An(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return An(r,e)}}function An(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Oo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Ao(r){if(Array.isArray(r))return r}function Po(r){var e=Yl(r);if(e)return e=e.split(":").map(Nr).map(function(n){var t=Co(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Eo(r,e,n,t,l,o){var i=e.createDocument(r),u=So(i,e,n,t,l,o),s=Po(i)||wo(u);return{cells:u,dimensions:s}}function No(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Io(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Io(r,e){if(r){if(typeof r=="string")return Pn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pn(r,e)}}function Pn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Do(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var u=!0,s=No(r[i]),a;!(a=s()).done;){var f=a.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(i,1),n&&n.splice(i,1);else if(o)break;i--}return r}function Fo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Mo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mo(r,e){if(r){if(typeof r=="string")return En(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return En(r,e)}}function En(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function jo(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var i=!0,u=Fo(r),s;!(s=u()).done;){var a=s.value;if(t(a[o])!==null){i=!1;break}}if(i)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function Bo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ir(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ho(r,e){return Uo(r)||Wo(r,e)||Ir(r,e)||Ro()}function Ro(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ir(r,e){if(r){if(typeof r=="string")return Nn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nn(r,e)}}function Nn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Wo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Uo(r){if(Array.isArray(r))return r}function Go(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=Ho(n,2);l[0];for(var o=l[1],i=o.column,u=o.row,s=new Array(u),a=0;a<u;){s[a]=new Array(i);for(var f=0;f<i;)s[a][f]=null,f++;a++}for(var c=Bo(t),$;!($=c()).done;){var p=$.value,C=p.row-1,y=p.column-1;y<i&&C<u&&(s[C][y]=p.value)}var S=e.rowMap;if(S)for(var T=0;T<s.length;)S[T]=T,T++;return s=Do(jo(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:S}),e.transformData&&(s=e.transformData(s)),s}function zo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=qo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qo(r,e){if(r){if(typeof r=="string")return In(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return In(r,e)}}function In(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Dn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Vo(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Dn(Object(n),!0).forEach(function(t){Xo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Dn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Xo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Ko(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Vo({sheet:1},n));var t=function($){if(!r[$])throw new Error('"'.concat($,'" file not found inside the *.xlsx file zip archive'));return r[$]},l=lo(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?ao(t(l.sharedStrings),e):[],i=l.styles?so(t(l.styles),e):{},u=ro(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var $=c.name;return{name:$}});var s=Yo(n.sheet,u.sheets);if(!s||!l.sheets[s])throw Jo(n.sheet,u.sheets);var a=Eo(t(l.sheets[s]),e,o,i,u,n),f=Go(a,n);return n.properties?{data:f,properties:u}:f}function Yo(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=zo(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function Jo(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function rn(r){"@babel/helpers - typeof";return rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rn(r)}function Fn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function Zo(r,e,n){return e&&Fn(r.prototype,e),n&&Fn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function Qo(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function xo(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Ct(r,e)}function es(r){var e=Dr();return function(){var t=Tt(r),l;if(e){var o=Tt(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return ts(this,l)}}function ts(r,e){if(e&&(rn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ns(r)}function ns(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function ln(r){var e=typeof Map=="function"?new Map:void 0;return ln=function(t){if(t===null||!rs(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Dt(t,arguments,Tt(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Ct(l,t)},ln(r)}function Dt(r,e,n){return Dr()?Dt=Reflect.construct:Dt=function(l,o,i){var u=[null];u.push.apply(u,o);var s=Function.bind.apply(l,u),a=new s;return i&&Ct(a,i.prototype),a},Dt.apply(null,arguments)}function Dr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function rs(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Ct(r,e){return Ct=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},Ct(r,e)}function Tt(r){return Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Tt(r)}var _e=function(r){xo(n,r);var e=es(n);function n(t){var l;return Qo(this,n),l=e.call(this,"invalid"),l.reason=t,l}return Zo(n)}(ln(Error));function ls(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new _e("not_a_number")}if(typeof r!="number")throw new _e("not_a_number");if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");return r}function os(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");return String(r)}throw new _e("not_a_string")}function ss(r){if(typeof r=="boolean")return r;throw new _e("not_a_boolean")}function is(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new _e("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");var t=Er(r,n);if(isNaN(t.valueOf()))throw new _e("out_of_bounds");return t}throw new _e("not_a_date")}function as(r,e){return cs(r)||us(r,e)||Fr(r,e)||fs()}function fs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function us(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function cs(r){if(Array.isArray(r))return r}function on(r){"@babel/helpers - typeof";return on=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},on(r)}function $s(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Fr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fr(r,e){if(r){if(typeof r=="string")return Mn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mn(r,e)}}function Mn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function jn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Bn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jn(Object(n),!0).forEach(function(t){ps(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):jn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function ps(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Hn={isColumnOriented:!1};function ms(r,e,n){n?n=Bn(Bn({},Hn),n):n=Hn;var t=n,l=t.isColumnOriented,o=t.rowMap,i=t.ignoreEmptyRows;hs(e),l&&(r=ds(r));for(var u=r[0],s=[],a=[],f=1;f<r.length;f++){var c=Mr(e,r[f],f,u,a,n);(c!==null||i===!1)&&s.push(c)}if(o)for(var $=$s(a),p;!(p=$()).done;){var C=p.value;C.row=o[C.row-1]+1}return{rows:s,errors:a}}function Mr(r,e,n,t,l,o){for(var i={},u=!0,s=function(){var $=f[a],p=r[$],C=on(p.type)==="object"&&!Array.isArray(p.type),y=e[t.indexOf($)];y===void 0&&(y=null);var S=void 0,T=void 0,E=void 0;if(C)S=Mr(p.type,e,n,t,l,o);else if(y===null)S=null;else if(Array.isArray(p.type)){var F=!1,M=gs(y).map(function(P){var N=Rn(P,p,o);return N.error&&(S=P,T=N.error,E=N.reason),N.value!==null&&(F=!0),N.value});T||(S=F?M:null)}else{var A=Rn(y,p,o);T=A.error,E=A.reason,S=T?y:A.value}!T&&S===null&&p.required&&(T="required"),T?(T={error:T,row:n+1,column:$,value:S},E&&(T.reason=E),p.type&&(T.type=p.type),l.push(T)):(u&&S!==null&&(u=!1),(S!==null||o.includeNullValues)&&(i[p.prop]=S))},a=0,f=Object.keys(r);a<f.length;a++)s();return u?null:i}function Rn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=lt(r,e.parse):e.type?t=_s(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function lt(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function _s(r,e,n){switch(e){case String:return lt(r,os);case Number:return lt(r,ls);case Date:return lt(r,function(t){return is(t,{properties:n.properties})});case Boolean:return lt(r,ss);default:if(typeof e=="function")return lt(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function jr(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var i=jr(r,'"',n+t+1);l+=i[0],t+=1+i[1]+1}else l+=o,t++}return[l,t]}function gs(r){for(var e=[],n=0;n<r.length;){var t=jr(r,",",n),l=as(t,2),o=l[0],i=l[1];n+=i+1,e.push(o.trim())}return e}var ds=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function hs(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function sn(r){"@babel/helpers - typeof";return sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sn(r)}function Br(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],i=void 0;sn(o)==="object"&&(o=Object.keys(r[l])[0],i=Br(r[l][o])),e[l]={prop:o},i&&(e[l].type=i)}return e}var bs=["schema","map"];function Wn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function It(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wn(Object(n),!0).forEach(function(t){vs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function vs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ws(r,e){if(r==null)return{};var n=ks(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function ks(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function ys(r,e,n){var t=n.schema,l=n.map,o=ws(n,bs);!t&&l&&(t=Br(l));var i=Ko(r,e,It(It({},o),{},{properties:t||o.properties}));return t?ms(i.data,t,It(It({},o),{},{properties:i.properties})):i}function Ss(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ul(r).then(function(n){return ys(n,Sl,e)})}function Cs(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,{scheme_reference:t,num_features:0,authority_or_region:l.authority_or_region,capital_scheme_id:l.capital_scheme_id,funding_programme:l.funding_programme});let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.num_features++,t.properties.funding_programme=l.funding_programme,t.id=n++}return e}async function Ts(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Ss(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=qr(l.lat_lon.split(",").map(parseFloat).reverse()),i=l;i.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const U={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"},Fe=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Ls(r){let e,n,t,l,o;function i(s){r[3](s)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return r[0]!==void 0&&(u.value=r[0]),e=new Mt({props:u}),X.push(()=>Q(e,"value",i)),e.$on("change",r[2]),l=new ll({props:{rows:r[1]}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};!n&&a&1&&(n=!0,f.value=s[0],x(()=>n=!1)),e.$set(f);const c={};a&2&&(c.rows=s[1]),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}function Os(r,e,n){let t;ge(r,Lt,s=>n(4,t=s));let l="interventionType",o=yn("v1");function i(){let s;l=="interventionType"?(s=wr("v1"),n(1,o=yn("v1"))):(s=Qt(["get","funding_programme"],{ATF2:U.atf2,ATF3:U.atf3,ATF4:U.atf4},"grey"),n(1,o=[["ATF2",U.atf2],["ATF3",U.atf3],["ATF4",U.atf4]])),t.setPaintProperty("interventions-points","circle-color",s),t.setPaintProperty("interventions-lines","line-color",s),t.setPaintProperty("interventions-polygons","fill-color",s),t.setPaintProperty("interventions-polygons-outlines","line-color",s)}function u(s){l=s,n(0,l)}return[l,o,i,u]}class As extends G{constructor(e){super(),z(this,e,Os,Ls,W,{})}}function Ps(r){let e;return{c(){e=w("Clear")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Es(r){let e,n,t,l,o,i;return t=new St({props:{$$slots:{default:[Ps]},$$scope:{ctx:r}}}),t.$on("click",r[12]),{c(){e=O("input"),n=L(),h(t.$$.fragment),K(e,"type","text"),K(e,"class","govuk-input govuk-input--width-10"),K(e,"id","filterText")},m(u,s){_(u,e,s),dn(e,r[0]),_(u,n,s),b(t,u,s),l=!0,o||(i=_t(e,"input",r[11]),o=!0)},p(u,s){s&1&&e.value!==u[0]&&dn(e,u[0]);const a={};s&65536&&(a.$$scope={dirty:s,ctx:u}),t.$set(a)},i(u){l||(m(t.$$.fragment,u),l=!0)},o(u){d(t.$$.fragment,u),l=!1},d(u){u&&(g(e),g(n)),v(t,u),o=!1,i()}}}function Ns(r){let e,n,t,l,o,i,u,s,a,f;function c(y){r[9](y)}let $={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[3]!==void 0&&($.value=r[3]),e=new Mt({props:$}),X.push(()=>Q(e,"value",c));function p(y){r[10](y)}let C={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[4]!==void 0&&(C.value=r[4]),l=new Mt({props:C}),X.push(()=>Q(l,"value",p)),u=new hr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[Es]},$$scope:{ctx:r}}}),a=new As({}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment),i=L(),h(u.$$.fragment),s=L(),h(a.$$.fragment)},m(y,S){b(e,y,S),_(y,t,S),b(l,y,S),_(y,i,S),b(u,y,S),_(y,s,S),b(a,y,S),f=!0},p(y,S){const T={};S&32&&(T.choices=y[5]),!n&&S&8&&(n=!0,T.value=y[3],x(()=>n=!1)),e.$set(T);const E={};S&64&&(E.choices=y[6]),!o&&S&16&&(o=!0,E.value=y[4],x(()=>o=!1)),l.$set(E);const F={};S&65537&&(F.$$scope={dirty:S,ctx:y}),u.$set(F)},i(y){f||(m(e.$$.fragment,y),m(l.$$.fragment,y),m(u.$$.fragment,y),m(a.$$.fragment,y),f=!0)},o(y){d(e.$$.fragment,y),d(l.$$.fragment,y),d(u.$$.fragment,y),d(a.$$.fragment,y),f=!1},d(y){y&&(g(t),g(i),g(s)),v(e,y),v(l,y),v(u,y),v(a,y)}}}function Is(r){let e,n=r[1].size.toLocaleString()+"",t,l,o=r[7].route.toLocaleString()+"",i,u,s=r[7].area.toLocaleString()+"",a,f,c=r[7].crossing.toLocaleString()+"",$,p,C=r[7].other.toLocaleString()+"",y,S;return{c(){e=w("Showing "),t=w(n),l=w(" schemes ("),i=w(o),u=w(`
    routes, `),a=w(s),f=w(` areas,
    `),$=w(c),p=w(" crossings, "),y=w(C),S=w(`
    other)`)},m(T,E){_(T,e,E),_(T,t,E),_(T,l,E),_(T,i,E),_(T,u,E),_(T,a,E),_(T,f,E),_(T,$,E),_(T,p,E),_(T,y,E),_(T,S,E)},p(T,E){E&2&&n!==(n=T[1].size.toLocaleString()+"")&&H(t,n),E&128&&o!==(o=T[7].route.toLocaleString()+"")&&H(i,o),E&128&&s!==(s=T[7].area.toLocaleString()+"")&&H(a,s),E&128&&c!==(c=T[7].crossing.toLocaleString()+"")&&H($,c),E&128&&C!==(C=T[7].other.toLocaleString()+"")&&H(y,C)},d(T){T&&(g(e),g(t),g(l),g(i),g(u),g(a),g(f),g($),g(p),g(y),g(S))}}}function Ds(r){let e,n,t;function l(i){r[13](i)}let o={id:"show-schemes",$$slots:{default:[Is]},$$scope:{ctx:r}};return r[2]!==void 0&&(o.checked=r[2]),e=new le({props:o}),X.push(()=>Q(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&65666&&(s.$$scope={dirty:u,ctx:i}),!n&&u&4&&(n=!0,s.checked=i[2],x(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){d(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Fs(r){let e,n,t,l;return e=new Se({props:{label:"Filters",$$slots:{default:[Ns]},$$scope:{ctx:r}}}),t=new At({props:{small:!0,$$slots:{default:[Ds]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,i){b(e,o,i),_(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&65657&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&65670&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&g(n),v(e,o),v(t,o)}}}function Ms(r,e,n){let t;ge(r,gt,F=>n(14,t=F));let{schemes:l}=e,{schemesToBeShown:o=new Set}=e,{filterText:i=""}=e,{show:u=!0}=e,s=[],a="",f=[],c="",$={area:0,route:0,crossing:0,other:0};Ot(()=>{let F=new Set,M=new Set;for(let A of l.values())A.authority_or_region&&F.add(A.authority_or_region),A.funding_programme&&M.add(A.funding_programme);n(5,s=Array.from(F.entries())),s.sort(),n(6,f=Array.from(M.entries())),f.sort()});function p(F,M,A){let P=F.toLowerCase(),N=D=>{var R,j;if(P&&!((R=D.properties.name)!=null&&R.toLowerCase().includes(P))&&!((j=D.properties.description)!=null&&j.toLowerCase().includes(P)))return!1;if(M||A){let se=l.get(D.properties.scheme_reference);if(M&&se.authority_or_region!=M||A&&se.funding_programme!=A)return!1}return!0};n(1,o=new Set(t.features.filter(N).map(D=>D.properties.scheme_reference))),n(7,$={area:0,route:0,crossing:0,other:0});let I=D=>{var R,j;return!(!o.has(D.properties.scheme_reference)||P&&!((R=D.properties.name)!=null&&R.toLowerCase().includes(P))&&!((j=D.properties.description)!=null&&j.toLowerCase().includes(P)))};gt.update(D=>{for(let R of D.features)I(R)?(delete R.properties.hide_while_editing,n(7,$[R.properties.intervention_type]++,$)):R.properties.hide_while_editing=!0;return D}),n(7,$)}function C(F){a=F,n(3,a)}function y(F){c=F,n(4,c)}function S(){i=this.value,n(0,i)}const T=()=>n(0,i="");function E(F){u=F,n(2,u)}return r.$$set=F=>{"schemes"in F&&n(8,l=F.schemes),"schemesToBeShown"in F&&n(1,o=F.schemesToBeShown),"filterText"in F&&n(0,i=F.filterText),"show"in F&&n(2,u=F.show)},r.$$.update=()=>{r.$$.dirty&25&&p(i,a,c)},[i,o,u,a,c,s,f,$,l,C,y,S,T,E]}class js extends G{constructor(e){super(),z(this,e,Ms,Fs,W,{schemes:8,schemesToBeShown:1,filterText:0,show:2})}}function Bs(r,e,n){let t;ge(r,Lt,u=>n(3,t=u));let l=null,{markerPosition:o}=e,{markerPositionUpdated:i}=e;return Ot(()=>{l=new xt.Marker({draggable:!0}).setLngLat(o).addTo(t),l.on("dragstart",()=>{t.getCanvas().style.cursor="grabbing"}),l.on("drag",()=>{n(0,o=l.getLngLat()),i()}),l.on("dragend",()=>{t.getCanvas().style.cursor="inherit"})}),an(()=>{l&&l.remove()}),r.$$set=u=>{"markerPosition"in u&&n(0,o=u.markerPosition),"markerPositionUpdated"in u&&n(1,i=u.markerPositionUpdated)},[o,i]}class Hs extends G{constructor(e){super(),z(this,e,Bs,null,W,{markerPosition:0,markerPositionUpdated:1})}}function Un(r,e,n){const t=r.slice();return t[16]=e[n],t[17]=e,t[18]=n,t}function Rs(r){let e,n;return e=new St({props:{$$slots:{default:[Us]},$$scope:{ctx:r}}}),e.$on("click",r[5]),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&524288&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ws(r){let e,n;return e=new St({props:{$$slots:{default:[Gs]},$$scope:{ctx:r}}}),e.$on("click",r[4]),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&524288&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Us(r){let e;return{c(){e=w("Disable Line Measurement Tool")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Gs(r){let e;return{c(){e=w("Enable Line Measurement Tool")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Gn(r){var c;let e,n,t,l=[],o=new Map,i,u,s=r[2]&&((c=r[2].properties)==null?void 0:c.length)&&zn(r);n=new Se({props:{label:"Help",$$slots:{default:[zs]},$$scope:{ctx:r}}});let a=Ie(r[1]);const f=$=>$[16].id;for(let $=0;$<a.length;$+=1){let p=Un(r,a,$),C=f(p);o.set(C,l[$]=qn(C,p))}return{c(){s&&s.c(),e=L(),h(n.$$.fragment),t=L();for(let $=0;$<l.length;$+=1)l[$].c();i=ve()},m($,p){s&&s.m($,p),_($,e,p),b(n,$,p),_($,t,p);for(let C=0;C<l.length;C+=1)l[C]&&l[C].m($,p);_($,i,p),u=!0},p($,p){var y;$[2]&&((y=$[2].properties)!=null&&y.length)?s?s.p($,p):(s=zn($),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null);const C={};p&524288&&(C.$$scope={dirty:p,ctx:$}),n.$set(C),p&258&&(a=Ie($[1]),ie(),l=Xr(l,p,f,1,$,a,o,i.parentNode,Kr,qn,i,Un),ae())},i($){if(!u){m(n.$$.fragment,$);for(let p=0;p<a.length;p+=1)m(l[p]);u=!0}},o($){d(n.$$.fragment,$);for(let p=0;p<l.length;p+=1)d(l[p]);u=!1},d($){$&&(g(e),g(t),g(i)),s&&s.d($),v(n,$);for(let p=0;p<l.length;p+=1)l[p].d($)}}}function zn(r){var i;let e,n,t=((i=r[2].properties)==null?void 0:i.length)+"",l,o;return{c(){e=O("p"),n=w("Length: "),l=w(t),o=w("m")},m(u,s){_(u,e,s),k(e,n),k(e,l),k(e,o)},p(u,s){var a;s&4&&t!==(t=((a=u[2].properties)==null?void 0:a.length)+"")&&H(l,t)},d(u){u&&g(e)}}}function zs(r){let e;return{c(){e=O("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and Drag</b>
        an existing waypoint to move it</li> <li><b>Hold shift and click on</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(n,t){_(n,e,t)},p:te,d(n){n&&g(e)}}}function qn(r,e){let n,t,l,o;function i(s){e[9](s,e[16])}let u={markerPositionUpdated:e[8]};return e[16].lngLat!==void 0&&(u.markerPosition=e[16].lngLat),t=new Hs({props:u}),X.push(()=>Q(t,"markerPosition",i)),{key:r,first:null,c(){n=ve(),h(t.$$.fragment),this.first=n},m(s,a){_(s,n,a),b(t,s,a),o=!0},p(s,a){e=s;const f={};!l&&a&2&&(l=!0,f.markerPosition=e[16].lngLat,x(()=>l=!1)),t.$set(f)},i(s){o||(m(t.$$.fragment,s),o=!0)},o(s){d(t.$$.fragment,s),o=!1},d(s){s&&g(n),v(t,s)}}}function qs(r){let e,n;const t=[B("measurement-line"),{paint:{"line-color":jt.measuringLine,"line-width":5}}];let l={};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&0?J(t,[i&0&&Z(B("measurement-line")),i&0&&{paint:{"line-color":jt.measuringLine,"line-width":5}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Vs(r){let e,n,t,l,o,i,u,s;const a=[Ws,Rs],f=[];function c(p,C){return p[0]?0:1}e=c(r),n=f[e]=a[e](r);let $=!r[0]&&Gn(r);return o=new dt({props:{data:r[3],$$slots:{default:[qs]},$$scope:{ctx:r}}}),{c(){n.c(),t=L(),$&&$.c(),l=L(),h(o.$$.fragment)},m(p,C){f[e].m(p,C),_(p,t,C),$&&$.m(p,C),_(p,l,C),b(o,p,C),i=!0,u||(s=[_t(window,"keydown",r[6]),_t(window,"keyup",r[7])],u=!0)},p(p,[C]){let y=e;e=c(p),e===y?f[e].p(p,C):(ie(),d(f[y],1,1,()=>{f[y]=null}),ae(),n=f[e],n?n.p(p,C):(n=f[e]=a[e](p),n.c()),m(n,1),n.m(t.parentNode,t)),p[0]?$&&(ie(),d($,1,1,()=>{$=null}),ae()):$?($.p(p,C),C&1&&m($,1)):($=Gn(p),$.c(),m($,1),$.m(l.parentNode,l));const S={};C&8&&(S.data=p[3]),C&524288&&(S.$$scope={dirty:C,ctx:p}),o.$set(S)},i(p){i||(m(n),m($),m(o.$$.fragment,p),i=!0)},o(p){d(n),d($),d(o.$$.fragment,p),i=!1},d(p){p&&(g(t),g(l)),f[e].d(p),$&&$.d(p),v(o,p),u=!1,Vr(s)}}}function Xs(r,e,n){let t;ge(r,Lt,F=>n(12,t=F));let l=!0,o=[],i,u=!1,s=0,a=en();function f(F){l||(u||(o.push({id:s++,lngLat:F.lngLat}),n(1,o),S()),u&&o.length>0&&(c(F.lngLat),S()))}function c(F){let A=new xt.LngLat(0,-90).distanceTo(new xt.LngLat(0,90)),P;o.forEach(N=>{const I=N.lngLat;A>=F.distanceTo(I)&&(P=I,A=F.distanceTo(I))}),P&&n(1,o=o.filter(N=>{const I=N.lngLat;return I.lng!=(P==null?void 0:P.lng)||I.lat!=(P==null?void 0:P.lat)}))}function $(){n(0,l=!1)}function p(){n(0,l=!0),n(1,o=[]),T()}function C(F){F.key==="Shift"&&(u=!0),F.key==="Escape"&&p()}function y(F){F.key==="Shift"&&(u=!1)}function S(){if(o.length<2){T();return}const F=o.map(M=>[M.lngLat.lng,M.lngLat.lat]);n(2,i=Yr(F,{})),i.properties&&n(2,i.properties.length=(ol(i)*1e3).toFixed(2),i),n(3,a=JSON.parse(JSON.stringify(i)))}function T(){n(2,i=void 0),n(3,a=en())}Ot(()=>{t.on("click",f)}),an(()=>{t.off("click",f)});function E(F,M){r.$$.not_equal(M.lngLat,F)&&(M.lngLat=F,n(1,o))}return[l,o,i,a,$,p,C,y,S,E]}class Ks extends G{constructor(e){super(),z(this,e,Xs,Vs,W,{})}}function Ys(r){let e;return{c(){e=w(`Open Government License
  `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Js(r){let e,n,t,l,o;return t=new V({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ys]},$$scope:{ctx:r}}}),{c(){e=O("p"),n=w("License: "),h(t.$$.fragment),l=w(`. Contains OS data © Crown copyright and database right
  2023.`)},m(i,u){_(i,e,u),k(e,n),b(t,e,null),k(e,l),o=!0},p(i,[u]){const s={};u&1&&(s.$$scope={dirty:u,ctx:i}),t.$set(s)},i(i){o||(m(t.$$.fragment,i),o=!0)},o(i){d(t.$$.fragment,i),o=!1},d(i){i&&g(e),v(t)}}}class Be extends G{constructor(e){super(),z(this,e,null,Js,W,{})}}function Vn(r,e,n){const t=r.slice();return t[2]=e[n],t}function Xn(r,e,n){const t=r.slice();return t[5]=e[n],t}function Kn(r){let e,n;return{c(){e=O("span"),n=w(` 
    `),Te(e,"background",r[5]),Te(e,"width","100%"),Te(e,"border","1px solid black")},m(t,l){_(t,e,l),k(e,n)},p(t,l){l&1&&Te(e,"background",t[5])},d(t){t&&g(e)}}}function Yn(r){let e,n=r[2]+"",t;return{c(){e=O("span"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&H(t,n)},d(l){l&&g(e)}}}function Zs(r){let e,n,t,l=Ie(r[0]),o=[];for(let s=0;s<l.length;s+=1)o[s]=Kn(Xn(r,l,s));let i=Ie(r[1]),u=[];for(let s=0;s<i.length;s+=1)u[s]=Yn(Vn(r,i,s));return{c(){e=O("div");for(let s=0;s<o.length;s+=1)o[s].c();n=L(),t=O("div");for(let s=0;s<u.length;s+=1)u[s].c();Te(e,"display","flex"),Te(t,"display","flex"),Te(t,"justify-content","space-between")},m(s,a){_(s,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);_(s,n,a),_(s,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(s,[a]){if(a&1){l=Ie(s[0]);let f;for(f=0;f<l.length;f+=1){const c=Xn(s,l,f);o[f]?o[f].p(c,a):(o[f]=Kn(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(a&2){i=Ie(s[1]);let f;for(f=0;f<i.length;f+=1){const c=Vn(s,i,f);u[f]?u[f].p(c,a):(u[f]=Yn(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=i.length}},i:te,o:te,d(s){s&&(g(e),g(n),g(t)),Ft(o,s),Ft(u,s)}}}function Qs(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class ze extends G{constructor(e){super(),z(this,e,Qs,Zs,W,{colorScale:0,limits:1})}}function Jn(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function xs(r){let e;return{c(){e=w("Percent of households with a car")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ei(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ti(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ni(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ri(r){let e,n,t,l,o,i,u,s,a,f,c,$;return t=new V({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ei]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ti]},$$scope:{ctx:r}}}),f=new V({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ni]},$$scope:{ctx:r}}}),{c(){e=O("p"),n=w("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=L(),s=O("p"),a=w("License: "),h(f.$$.fragment),c=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(p,C){_(p,e,C),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),_(p,u,C),_(p,s,C),k(s,a),b(f,s,null),k(s,c),$=!0},p(p,C){const y={};C&65536&&(y.$$scope={dirty:C,ctx:p}),t.$set(y);const S={};C&65536&&(S.$$scope={dirty:C,ctx:p}),o.$set(S);const T={};C&65536&&(T.$$scope={dirty:C,ctx:p}),f.$set(T)},i(p){$||(m(t.$$.fragment,p),m(o.$$.fragment,p),m(f.$$.fragment,p),$=!0)},o(p){d(t.$$.fragment,p),d(o.$$.fragment,p),d(f.$$.fragment,p),$=!1},d(p){p&&(g(e),g(u),g(s)),v(t),v(o),v(f)}}}function li(r){let e,n,t;return n=new oe({props:{$$slots:{default:[ri]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Zn(r){let e,n;return e=new ze({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function oi(r){let e;return{c(){e=w("Average cars per household")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function si(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ii(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ai(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function fi(r){let e,n,t,l,o,i,u,s,a,f,c,$,p,C;return o=new V({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[si]},$$scope:{ctx:r}}}),u=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ii]},$$scope:{ctx:r}}}),$=new V({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ai]},$$scope:{ctx:r}}}),{c(){e=O("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=L(),t=O("p"),l=w("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),i=w(". Output area boundaries from "),h(u.$$.fragment),s=w("."),a=L(),f=O("p"),c=w("License: "),h($.$$.fragment),p=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(y,S){_(y,e,S),_(y,n,S),_(y,t,S),k(t,l),b(o,t,null),k(t,i),b(u,t,null),k(t,s),_(y,a,S),_(y,f,S),k(f,c),b($,f,null),k(f,p),C=!0},p(y,S){const T={};S&65536&&(T.$$scope={dirty:S,ctx:y}),o.$set(T);const E={};S&65536&&(E.$$scope={dirty:S,ctx:y}),u.$set(E);const F={};S&65536&&(F.$$scope={dirty:S,ctx:y}),$.$set(F)},i(y){C||(m(o.$$.fragment,y),m(u.$$.fragment,y),m($.$$.fragment,y),C=!0)},o(y){d(o.$$.fragment,y),d(u.$$.fragment,y),d($.$$.fragment,y),C=!1},d(y){y&&(g(e),g(n),g(t),g(a),g(f)),v(o),v(u),v($)}}}function ui(r){let e,n,t;return n=new oe({props:{$$slots:{default:[fi]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Qn(r){let e,n;return e=new ze({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ci(r){let e;return{c(){e=w("Population density")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function $i(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function pi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function mi(r){let e,n,t,l,o,i,u,s,a;return t=new V({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[$i]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[pi]},$$scope:{ctx:r}}}),s=new Be({}),{c(){e=O("p"),n=w("Population density data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=L(),h(s.$$.fragment)},m(f,c){_(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),_(f,u,c),b(s,f,c),a=!0},p(f,c){const $={};c&65536&&($.$$scope={dirty:c,ctx:f}),t.$set($);const p={};c&65536&&(p.$$scope={dirty:c,ctx:f}),o.$set(p)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(s.$$.fragment,f),a=!1},d(f){f&&(g(e),g(u)),v(t),v(o),v(s,f)}}}function _i(r){let e,n,t;return n=new oe({props:{$$slots:{default:[mi]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function xn(r){let e,n,t,l;return t=new ze({props:{colorScale:r[4],limits:r[6]().map(yi)}}),{c(){e=O("p"),e.textContent="(people per square kilometres)",n=L(),h(t.$$.fragment)},m(o,i){_(o,e,i),_(o,n,i),b(t,o,i),l=!0},p:te,i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&(g(e),g(n)),v(t,o)}}}function gi(r){let e,n,t,l=r[15].toLocaleString()+"",o,i,u=r[14]+"",s;return{c(){e=O("p"),n=w("There are "),t=O("b"),o=w(l),i=w(`
          people per square kilometre in `),s=w(u)},m(a,f){_(a,e,f),k(e,n),k(e,t),k(t,o),k(e,i),k(e,s)},p(a,f){f&8200&&l!==(l=a[15].toLocaleString()+"")&&H(o,l),f&8192&&u!==(u=a[14]+"")&&H(s,u)},d(a){a&&g(e)}}}function di(r){let e,n,t=r[14]+"",l,o,i,u=r[15]+"",s,a;return{c(){e=O("p"),n=w("Households in "),l=w(t),o=w(` have an average of
          `),i=O("b"),s=w(u),a=w(`
          cars`)},m(f,c){_(f,e,c),k(e,n),k(e,l),k(e,o),k(e,i),k(i,s),k(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&H(l,t),c&8200&&u!==(u=f[15]+"")&&H(s,u)},d(f){f&&g(e)}}}function hi(r){let e,n,t=r[15]+"",l,o,i,u=r[14]+"",s,a;return{c(){e=O("p"),n=O("b"),l=w(t),o=w("%"),i=w(`
          of households in `),s=w(u),a=w(" have 1 or more cars")},m(f,c){_(f,e,c),k(e,n),k(n,l),k(n,o),k(e,i),k(e,s),k(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&H(l,t),c&8192&&u!==(u=f[14]+"")&&H(s,u)},d(f){f&&g(e)}}}function bi(r){Jn(r);let e;function n(o,i){return o[3]=="percent_households_with_car"?hi:o[3]=="average_cars_per_household"?di:gi}let t=n(r),l=t(r);return{c(){l.c(),e=ve()},m(o,i){l.m(o,i),_(o,e,i)},p(o,i){Jn(o),t===(t=n(o))&&l?l.p(o,i):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&g(e),l.d(o)}}}function vi(r){let e,n;return e=new re({props:{$$slots:{default:[bi,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wi(r){let e,n,t,l;const o=[B(Ke),{sourceLayer:Ke},{paint:{"fill-color":$e(["get",r[3]],r[6](),r[4]),"fill-opacity":q(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[vi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new je({props:i}),e.$on("click",r[5]);const u=[B(`${Ke}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&88?J(o,[f&0&&Z(B(Ke)),f&0&&{sourceLayer:Ke},f&88&&{paint:{"fill-color":$e(["get",a[3]],a[6](),a[4]),"fill-opacity":q(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const $=f&8?J(u,[f&0&&Z(B(`${Ke}-outline`)),u[1],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set($)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function ki(r){let e,n,t,l,o,i,u,s,a,f,c,$,p,C;function y(I){r[7](I)}let S={id:"percent_households_with_car",$$slots:{right:[li],default:[xs]},$$scope:{ctx:r}};r[0]!==void 0&&(S.checked=r[0]),e=new le({props:S}),X.push(()=>Q(e,"checked",y)),e.$on("change",r[8]);let T=r[3]=="percent_households_with_car"&&Zn(r);function E(I){r[9](I)}let F={id:"average_cars_per_household",$$slots:{right:[ui],default:[oi]},$$scope:{ctx:r}};r[1]!==void 0&&(F.checked=r[1]),o=new le({props:F}),X.push(()=>Q(o,"checked",E)),o.$on("change",r[10]);let M=r[3]=="average_cars_per_household"&&Qn(r);function A(I){r[11](I)}let P={id:"population_density",$$slots:{right:[_i],default:[ci]},$$scope:{ctx:r}};r[2]!==void 0&&(P.checked=r[2]),a=new le({props:P}),X.push(()=>Q(a,"checked",A)),a.$on("change",r[12]);let N=r[3]=="population_density"&&xn(r);return p=new ce({props:{url:`pmtiles://${fe()}/v1/${Ke}.pmtiles`,$$slots:{default:[wi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),T&&T.c(),l=L(),h(o.$$.fragment),u=L(),M&&M.c(),s=L(),h(a.$$.fragment),c=L(),N&&N.c(),$=L(),h(p.$$.fragment)},m(I,D){b(e,I,D),_(I,t,D),T&&T.m(I,D),_(I,l,D),b(o,I,D),_(I,u,D),M&&M.m(I,D),_(I,s,D),b(a,I,D),_(I,c,D),N&&N.m(I,D),_(I,$,D),b(p,I,D),C=!0},p(I,[D]){const R={};D&65536&&(R.$$scope={dirty:D,ctx:I}),!n&&D&1&&(n=!0,R.checked=I[0],x(()=>n=!1)),e.$set(R),I[3]=="percent_households_with_car"?T?(T.p(I,D),D&8&&m(T,1)):(T=Zn(I),T.c(),m(T,1),T.m(l.parentNode,l)):T&&(ie(),d(T,1,1,()=>{T=null}),ae());const j={};D&65536&&(j.$$scope={dirty:D,ctx:I}),!i&&D&2&&(i=!0,j.checked=I[1],x(()=>i=!1)),o.$set(j),I[3]=="average_cars_per_household"?M?(M.p(I,D),D&8&&m(M,1)):(M=Qn(I),M.c(),m(M,1),M.m(s.parentNode,s)):M&&(ie(),d(M,1,1,()=>{M=null}),ae());const se={};D&65536&&(se.$$scope={dirty:D,ctx:I}),!f&&D&4&&(f=!0,se.checked=I[2],x(()=>f=!1)),a.$set(se),I[3]=="population_density"?N?(N.p(I,D),D&8&&m(N,1)):(N=xn(I),N.c(),m(N,1),N.m($.parentNode,$)):N&&(ie(),d(N,1,1,()=>{N=null}),ae());const ee={};D&65544&&(ee.$$scope={dirty:D,ctx:I}),p.$set(ee)},i(I){C||(m(e.$$.fragment,I),m(T),m(o.$$.fragment,I),m(M),m(a.$$.fragment,I),m(N),m(p.$$.fragment,I),C=!0)},o(I){d(e.$$.fragment,I),d(T),d(o.$$.fragment,I),d(M),d(a.$$.fragment,I),d(N),d(p.$$.fragment,I),C=!1},d(I){I&&(g(t),g(l),g(u),g(s),g(c),g($)),v(e,I),T&&T.d(I),v(o,I),M&&M.d(I),v(a,I),N&&N.d(I),v(p,I)}}}let Ke="census_output_areas";const yi=r=>r.toLocaleString();function Si(r,e,n){let t=U.sequential_low_to_high,l=!1,o=!1,i=!1,u="";function s(S){let T=S.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${T}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${T}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(S){l=S,n(0,l)}const c=()=>{n(1,o=!1),n(2,i=!1)};function $(S){o=S,n(1,o)}const p=()=>{n(0,l=!1),n(2,i=!1)};function C(S){i=S,n(2,i)}const y=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):i?n(3,u="population_density"):n(3,u=""))},[l,o,i,u,t,s,a,f,c,$,p,C,y]}class Ci extends G{constructor(e){super(),z(this,e,Si,ki,W,{})}}function Ti(r){let e,n,t;return e=new de({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Combined authorities`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function Li(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Oi(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Li]},$$scope:{ctx:r}}}),i=new Be({}),{c(){e=O("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of December 2022."),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function Ai(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Oi]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Pi(r){let e,n=r[3].name+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&g(e)}}}function Ei(r){let e,n;return e=new re({props:{$$slots:{default:[Pi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ni(r){let e,n,t,l;const o=[B(ot),{paint:{"fill-color":r[1],"fill-opacity":q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ei]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new je({props:i}),e.$on("click",Di);const u=[B(`${ot}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?J(o,[f&0&&Z(B(ot)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const $=f&3?J(u,[f&0&&Z(B(`${ot}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function Ii(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ot,$$slots:{right:[Ai],default:[Ti]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),X.push(()=>Q(e,"checked",i)),l=new dt({props:{data:`${fe()}/v1/${ot}.geojson`,$$slots:{default:[Ni]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let ot="combined_authorities";function Di(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Fi(r,e,n){let t=U.combined_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Mi extends G{constructor(e){super(),z(this,e,Fi,Ii,W,{})}}function ji(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Bi(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Hi(r){let e;return{c(){e=w(`here
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ri(r){let e,n,t,l,o,i,u,s,a;return t=new V({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Bi]},$$scope:{ctx:r}}}),o=new V({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Hi]},$$scope:{ctx:r}}}),s=new Be({}),{c(){e=O("p"),n=w("The 2019 English IMD scores come from "),h(t.$$.fragment),l=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),i=w("."),u=L(),h(s.$$.fragment)},m(f,c){_(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),_(f,u,c),b(s,f,c),a=!0},p(f,c){const $={};c&32&&($.$$scope={dirty:c,ctx:f}),t.$set($);const p={};c&32&&(p.$$scope={dirty:c,ctx:f}),o.$set(p)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(s.$$.fragment,f),a=!1},d(f){f&&(g(e),g(u)),v(t),v(o),v(s,f)}}}function Wi(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Ri]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function er(r){let e,n;return e=new ze({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ui(r){let e,n=r[4].LSOA11CD+"",t,l,o,i=r[4].score+"",u,s,a,f,c,$=r[4].rank.toLocaleString()+"",p,C;return{c(){e=O("p"),t=w(n),l=w(` has an IMD score of
        `),o=O("b"),u=w(i),s=L(),a=O("p"),f=w("Rank: "),c=O("b"),p=w($),C=w(`
        / 32,844 LSOAs`)},m(y,S){_(y,e,S),k(e,t),k(e,l),k(e,o),k(o,u),_(y,s,S),_(y,a,S),k(a,f),k(a,c),k(c,p),k(a,C)},p(y,S){S&16&&n!==(n=y[4].LSOA11CD+"")&&H(t,n),S&16&&i!==(i=y[4].score+"")&&H(u,i),S&16&&$!==($=y[4].rank.toLocaleString()+"")&&H(p,$)},d(y){y&&(g(e),g(s),g(a))}}}function Gi(r){let e,n;return e=new re({props:{$$slots:{default:[Ui,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zi(r){let e,n,t,l;const o=[B(We),{sourceLayer:We},{paint:{"fill-color":$e(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":q(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0}];let i={$$slots:{default:[Gi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new je({props:i});const u=[B(`${We}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&7?J(o,[f&0&&Z(B(We)),f&0&&{sourceLayer:We},f&6&&{paint:{"fill-color":$e(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":q(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const $=f&1?J(u,[f&0&&Z(B(`${We}-outline`)),u[1],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function qi(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:We,$$slots:{right:[Wi],default:[ji]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),X.push(()=>Q(e,"checked",u));let a=r[0]&&er(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${We}.pmtiles`,$$slots:{default:[zi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),l=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),_(f,t,c),a&&a.m(f,c),_(f,l,c),b(o,f,c),i=!0},p(f,[c]){const $={};c&32&&($.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,$.checked=f[0],x(()=>n=!1)),e.$set($),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=er(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ie(),d(a,1,1,()=>{a=null}),ae());const p={};c&33&&(p.$$scope={dirty:c,ctx:f}),o.$set(p)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(g(t),g(l)),v(e,f),a&&a.d(f),v(o,f)}}}let We="imd";function Vi(r,e,n){let t=U.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class Xi extends G{constructor(e){super(),z(this,e,Vi,qi,W,{})}}function Ki(r){let e,n,t;return e=new de({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function Yi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ji(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Yi]},$$scope:{ctx:r}}}),i=new Be({}),{c(){e=O("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function Zi(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Ji]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Qi(r){let e,n=r[3].name+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&g(e)}}}function xi(r){let e,n;return e=new re({props:{$$slots:{default:[Qi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ea(r){let e,n,t,l;const o=[B(st),{paint:{"fill-color":r[1],"fill-opacity":q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[xi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new je({props:i}),e.$on("click",na);const u=[B(`${st}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?J(o,[f&0&&Z(B(st)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const $=f&3?J(u,[f&0&&Z(B(`${st}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function ta(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:st,$$slots:{right:[Zi],default:[Ki]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),X.push(()=>Q(e,"checked",i)),l=new dt({props:{data:`${fe()}/v1/${st}.geojson`,$$slots:{default:[ea]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let st="local_authority_districts";function na(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function ra(r,e,n){let t=U.local_authority_districts,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class la extends G{constructor(e){super(),z(this,e,ra,ta,W,{})}}function oa(r){let e,n,t;return e=new de({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function sa(r){let e;return{c(){e=w(`local authority
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ia(r){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function aa(r){let e;return{c(){e=w(`development corporation
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function fa(r){let e;return{c(){e=w("this map")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ua(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ca(r){let e,n,t,l,o,i,u,s,a,f,c,$,p,C,y,S,T,E,F,M,A,P;return t=new V({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[sa]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ia]},$$scope:{ctx:r}}}),u=new V({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[aa]},$$scope:{ctx:r}}}),p=new V({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[fa]},$$scope:{ctx:r}}}),E=new V({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[ua]},$$scope:{ctx:r}}}),A=new Be({}),{c(){e=O("p"),n=w("LPAs may be a "),h(t.$$.fragment),l=w(", "),h(o.$$.fragment),i=w("y, or "),h(u.$$.fragment),s=w("."),a=L(),f=O("p"),c=O("strong"),$=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(p.$$.fragment),C=w(" to get more details."),y=L(),S=O("p"),T=w("Data from ONS Geography via "),h(E.$$.fragment),F=w(", as of November 2022."),M=L(),h(A.$$.fragment)},m(N,I){_(N,e,I),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),b(u,e,null),k(e,s),_(N,a,I),_(N,f,I),k(f,c),k(c,$),b(p,c,null),k(c,C),_(N,y,I),_(N,S,I),k(S,T),b(E,S,null),k(S,F),_(N,M,I),b(A,N,I),P=!0},p(N,I){const D={};I&16&&(D.$$scope={dirty:I,ctx:N}),t.$set(D);const R={};I&16&&(R.$$scope={dirty:I,ctx:N}),o.$set(R);const j={};I&16&&(j.$$scope={dirty:I,ctx:N}),u.$set(j);const se={};I&16&&(se.$$scope={dirty:I,ctx:N}),p.$set(se);const ee={};I&16&&(ee.$$scope={dirty:I,ctx:N}),E.$set(ee)},i(N){P||(m(t.$$.fragment,N),m(o.$$.fragment,N),m(u.$$.fragment,N),m(p.$$.fragment,N),m(E.$$.fragment,N),m(A.$$.fragment,N),P=!0)},o(N){d(t.$$.fragment,N),d(o.$$.fragment,N),d(u.$$.fragment,N),d(p.$$.fragment,N),d(E.$$.fragment,N),d(A.$$.fragment,N),P=!1},d(N){N&&(g(e),g(a),g(f),g(y),g(S),g(M)),v(t),v(o),v(u),v(p),v(E),v(A,N)}}}function $a(r){let e,n,t;return n=new oe({props:{$$slots:{default:[ca]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function pa(r){let e,n=r[3].name+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&g(e)}}}function ma(r){let e,n;return e=new re({props:{$$slots:{default:[pa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _a(r){let e,n,t,l;const o=[B(Oe),{sourceLayer:Oe},{paint:{"fill-color":r[1],"fill-opacity":q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0}];let i={$$slots:{default:[ma]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new je({props:i});const u=[B(`${Oe}-outline`),{sourceLayer:Oe},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?J(o,[f&0&&Z(B(Oe)),f&0&&{sourceLayer:Oe},f&2&&{paint:{"fill-color":a[1],"fill-opacity":q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const $=f&3?J(u,[f&0&&Z(B(`${Oe}-outline`)),f&0&&{sourceLayer:Oe},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function ga(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Oe,$$slots:{right:[$a],default:[oa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),X.push(()=>Q(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Oe}.pmtiles`,$$slots:{default:[_a]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let Oe="local_planning_authorities";function da(r,e,n){let t=U.local_planning_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class ha extends G{constructor(e){super(),z(this,e,da,ga,W,{})}}function ba(r){let e,n,t;return e=new de({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function va(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function wa(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[va]},$$scope:{ctx:r}}}),i=new Be({}),{c(){e=O("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function ka(r){let e,n,t;return n=new oe({props:{$$slots:{default:[wa]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function ya(r){let e,n=r[3].Name+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&H(t,n)},d(l){l&&g(e)}}}function Sa(r){let e,n;return e=new re({props:{$$slots:{default:[ya,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ca(r){let e,n,t,l;const o=[B(Ae),{sourceLayer:Ae},{paint:{"fill-color":r[1],"fill-opacity":q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Sa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new je({props:i}),e.$on("click",La);const u=[B(`${Ae}-outline`),{sourceLayer:Ae},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?J(o,[f&0&&Z(B(Ae)),f&0&&{sourceLayer:Ae},f&2&&{paint:{"fill-color":a[1],"fill-opacity":q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const $=f&3?J(u,[f&0&&Z(B(`${Ae}-outline`)),f&0&&{sourceLayer:Ae},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function Ta(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ae,$$slots:{right:[ka],default:[ba]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),X.push(()=>Q(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Ae}.pmtiles`,$$slots:{default:[Ca]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let Ae="parliamentary_constituencies";function La(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Oa(r,e,n){let t=U.parliamentary_constituencies,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Aa extends G{constructor(e){super(),z(this,e,Oa,Ta,W,{})}}function Pa(r){let e,n,t;return e=new de({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Wards`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function Ea(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Na(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Ea]},$$scope:{ctx:r}}}),i=new Be({}),{c(){e=O("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function Ia(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Na]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Da(r){let e,n=r[3].name+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&g(e)}}}function Fa(r){let e,n;return e=new re({props:{$$slots:{default:[Da,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ma(r){let e,n,t,l;const o=[B(Pe),{sourceLayer:Pe},{paint:{"fill-color":r[1],"fill-opacity":q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Fa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new je({props:i}),e.$on("click",Ba);const u=[B(`${Pe}-outline`),{sourceLayer:Pe},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?J(o,[f&0&&Z(B(Pe)),f&0&&{sourceLayer:Pe},f&2&&{paint:{"fill-color":a[1],"fill-opacity":q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const $=f&3?J(u,[f&0&&Z(B(`${Pe}-outline`)),f&0&&{sourceLayer:Pe},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function ja(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Pe,$$slots:{right:[Ia],default:[Pa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),X.push(()=>Q(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Pe}.pmtiles`,$$slots:{default:[Ma]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let Pe="wards";function Ba(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Ha(r,e,n){let t=U.wards,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ra extends G{constructor(e){super(),z(this,e,Ha,ja,W,{})}}function Wa(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ua(r){let e,n,t,l;return t=new V({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Wa]},$$scope:{ctx:r}}}),{c(){e=O("p"),n=w("License: "),h(t.$$.fragment)},m(o,i){_(o,e,i),k(e,n),b(t,e,null),l=!0},p(o,[i]){const u={};i&1&&(u.$$scope={dirty:i,ctx:o}),t.$set(u)},i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&g(e),v(t)}}}class qe extends G{constructor(e){super(),z(this,e,null,Ua,W,{})}}function Ga(r){let e,n,t;return e=new de({props:{color:U.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=w(`
  Bus routes`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function za(r){let e;return{c(){e=w(`GTFS
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function qa(r){let e,n,t,l,o,i,u,s,a;return o=new V({props:{href:"https://gtfs.org",$$slots:{default:[za]},$$scope:{ctx:r}}}),s=new qe({}),{c(){e=O("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=L(),t=O("p"),l=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),i=w(`, and doesn't include which routes are run or the
        frequency of service.`),u=L(),h(s.$$.fragment)},m(f,c){_(f,e,c),_(f,n,c),_(f,t,c),k(t,l),b(o,t,null),k(t,i),_(f,u,c),b(s,f,c),a=!0},p(f,c){const $={};c&8&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){a||(m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){d(o.$$.fragment,f),d(s.$$.fragment,f),a=!1},d(f){f&&(g(e),g(n),g(t),g(u)),v(o),v(s,f)}}}function Va(r){let e,n,t;return n=new oe({props:{$$slots:{default:[qa]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&8&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Xa(r){let e;return{c(){e=O("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ka(r){let e;return{c(){e=O("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ya(r){let e;function n(o,i){return o[2].has_bus_lane?Ka:Xa}let t=n(r),l=t(r);return{c(){l.c(),e=ve()},m(o,i){l.m(o,i),_(o,e,i)},p(o,i){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&g(e),l.d(o)}}}function Ja(r){let e,n;return e=new re({props:{$$slots:{default:[Ya,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Za(r){let e,n;const t=[B(it),{sourceLayer:it},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],U.bus_route_with_lane,U.bus_route_without_lane],"line-width":5,"line-opacity":q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0}];let l={$$slots:{default:[Ja]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?J(t,[i&0&&Z(B(it)),i&0&&{sourceLayer:it},i&0&&{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],U.bus_route_with_lane,U.bus_route_without_lane],"line-width":5,"line-opacity":q(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4]]):{};i&8&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Qa(r){let e,n,t,l,o;function i(s){r[1](s)}let u={id:it,$$slots:{right:[Va],default:[Ga]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),X.push(()=>Q(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${it}.pmtiles`,$$slots:{default:[Za]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let it="bus_routes";function xa(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class ef extends G{constructor(e){super(),z(this,e,xa,Qa,W,{})}}function tr(r){const e=ff(r[3]);r[4]=e[0],r[5]=e[1],r[6]=e[2]}function nr(r,e,n){const t=r.slice();return t[7]=e[n][0],t[8]=e[n][1],t}function tf(r){let e;return{c(){e=w("Cycle paths")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function nf(r){let e,n,t,l,o,i,u,s;return u=new qe({}),{c(){e=O("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=L(),t=O("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=L(),o=O("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=L(),h(u.$$.fragment)},m(a,f){_(a,e,f),_(a,n,f),_(a,t,f),_(a,l,f),_(a,o,f),_(a,i,f),b(u,a,f),s=!0},p:te,i(a){s||(m(u.$$.fragment,a),s=!0)},o(a){d(u.$$.fragment,a),s=!1},d(a){a&&(g(e),g(n),g(t),g(l),g(o),g(i)),v(u,a)}}}function rf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[nf]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function rr(r){let e,n,t=Ie(r[1]),l=[];for(let i=0;i<t.length;i+=1)l[i]=lr(nr(r,t,i));const o=i=>d(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=ve()},m(i,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,u);_(i,e,u),n=!0},p(i,u){if(u&2){t=Ie(i[1]);let s;for(s=0;s<t.length;s+=1){const a=nr(i,t,s);l[s]?(l[s].p(a,u),m(l[s],1)):(l[s]=lr(a),l[s].c(),m(l[s],1),l[s].m(e.parentNode,e))}for(ie(),s=t.length;s<l.length;s+=1)o(s);ae()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)m(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)d(l[u]);n=!1},d(i){i&&g(e),Ft(l,i)}}}function lr(r){let e,n,t,l=r[7]+"",o,i,u;return n=new de({props:{color:r[8]}}),{c(){e=O("div"),h(n.$$.fragment),t=L(),o=w(l),i=L()},m(s,a){_(s,e,a),b(n,e,null),k(e,t),k(e,o),k(e,i),u=!0},p:te,i(s){u||(m(n.$$.fragment,s),u=!0)},o(s){d(n.$$.fragment,s),u=!1},d(s){s&&g(e),v(n)}}}function lf(r){tr(r);let e,n=r[4]+"",t,l,o,i,u,s=r[5]+"",a,f,c,$,p=r[6]+"",C;return{c(){e=O("h2"),t=w(n),l=L(),o=O("p"),i=w("Direction: "),u=O("b"),a=L(),f=O("p"),c=w("Width: "),$=O("b"),C=w(p)},m(y,S){_(y,e,S),k(e,t),_(y,l,S),_(y,o,S),k(o,i),k(o,u),u.innerHTML=s,_(y,a,S),_(y,f,S),k(f,c),k(f,$),k($,C)},p(y,S){tr(y),S&8&&n!==(n=y[4]+"")&&H(t,n),S&8&&s!==(s=y[5]+"")&&(u.innerHTML=s),S&8&&p!==(p=y[6]+"")&&H(C,p)},d(y){y&&(g(e),g(l),g(o),g(a),g(f))}}}function of(r){let e,n;return e=new re({props:{$$slots:{default:[lf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2056&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function sf(r){let e,n;const t=[B(at),{sourceLayer:at},{paint:{"line-color":Qt(["get","kind"],{track:U.cycle_paths.track,lane:U.cycle_paths.lane,shared_use_segregated:U.cycle_paths.shared_use_segregated,shared_use_unsegregated:U.cycle_paths.shared_use_unsegregated},"red"),"line-width":Fe,"line-opacity":q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[of]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),e.$on("click",uf),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?J(t,[i&0&&Z(B(at)),i&0&&{sourceLayer:at},i&0&&{paint:{"line-color":Qt(["get","kind"],{track:U.cycle_paths.track,lane:U.cycle_paths.lane,shared_use_segregated:U.cycle_paths.shared_use_segregated,shared_use_unsegregated:U.cycle_paths.shared_use_unsegregated},"red"),"line-width":Fe,"line-opacity":q(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&2048&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function af(r){let e,n,t,l,o,i;function u(f){r[2](f)}let s={id:at,$$slots:{right:[rf],default:[tf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),X.push(()=>Q(e,"checked",u));let a=r[0]&&rr(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${at}.pmtiles`,$$slots:{default:[sf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),l=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),_(f,t,c),a&&a.m(f,c),_(f,l,c),b(o,f,c),i=!0},p(f,[c]){const $={};c&2048&&($.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,$.checked=f[0],x(()=>n=!1)),e.$set($),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=rr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ie(),d(a,1,1,()=>{a=null}),ae());const p={};c&2049&&(p.$$scope={dirty:c,ctx:f}),o.$set(p)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(g(t),g(l)),v(e,f),a&&a.d(f),v(o,f)}}}let at="cycle_paths";function ff(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function uf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function cf(r,e,n){let t=[["Separated tracks",U.cycle_paths.track],["Unprotected lanes",U.cycle_paths.lane],["Shared-use (segregated)",U.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",U.cycle_paths.shared_use_unsegregated]],l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class $f extends G{constructor(e){super(),z(this,e,cf,af,W,{})}}function pf(r){let e,n,t;return e=new de({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Major Road Network`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function mf(r){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function _f(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[mf]},$$scope:{ctx:r}}}),i=new Be({}),{c(){e=O("p"),n=w("Data from the "),h(t.$$.fragment),l=w(", as of September 2021."),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function gf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[_f]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function df(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&H(t,n)},d(l){l&&g(e)}}}function hf(r){let e,n;return e=new re({props:{$$slots:{default:[df,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bf(r){let e,n;const t=[B(ft),{sourceLayer:ft},{manageHoverState:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[hf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?J(t,[i&0&&Z(B(ft)),i&0&&{sourceLayer:ft},t[2],i&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":q(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function vf(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ft,$$slots:{right:[gf],default:[pf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),X.push(()=>Q(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${ft}.pmtiles`,$$slots:{default:[bf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let ft="mrn";function wf(r,e,n){let t=U.mrn,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class kf extends G{constructor(e){super(),z(this,e,wf,vf,W,{})}}function yf(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Sf(r){let e;return{c(){e=w("the PCT website")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Cf(r){let e;return{c(){e=w("2017 journal article")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Tf(r){let e,n,t,l,o,i,u,s,a,f,c;return u=new V({props:{href:"https://www.pct.bike",$$slots:{default:[Sf]},$$scope:{ctx:r}}}),a=new V({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Cf]},$$scope:{ctx:r}}}),{c(){e=O("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=L(),t=O("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=L(),o=O("p"),i=w("See "),h(u.$$.fragment),s=w(" and "),h(a.$$.fragment),f=w(" for details on methodology and data sources.")},m($,p){_($,e,p),_($,n,p),_($,t,p),_($,l,p),_($,o,p),k(o,i),b(u,o,null),k(o,s),b(a,o,null),k(o,f),c=!0},p($,p){const C={};p&1024&&(C.$$scope={dirty:p,ctx:$}),u.$set(C);const y={};p&1024&&(y.$$scope={dirty:p,ctx:$}),a.$set(y)},i($){c||(m(u.$$.fragment,$),m(a.$$.fragment,$),c=!0)},o($){d(u.$$.fragment,$),d(a.$$.fragment,$),c=!1},d($){$&&(g(e),g(n),g(t),g(l),g(o)),v(u),v(a)}}}function Lf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Tf]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&1024&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function or(r){let e,n,t,l,o,i,u,s;e=new ze({props:{colorScale:r[3],limits:r[4]}});function a(p){r[7](p)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new br({props:f}),X.push(()=>Q(t,"value",a));function c(p){r[8](p)}let $={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&($.value=r[1]),i=new Mt({props:$}),X.push(()=>Q(i,"value",c)),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),o=L(),h(i.$$.fragment)},m(p,C){b(e,p,C),_(p,n,C),b(t,p,C),_(p,o,C),b(i,p,C),s=!0},p(p,C){const y={};!l&&C&1&&(l=!0,y.value=p[0],x(()=>l=!1)),t.$set(y);const S={};!u&&C&2&&(u=!0,S.value=p[1],x(()=>u=!1)),i.$set(S)},i(p){s||(m(e.$$.fragment,p),m(t.$$.fragment,p),m(i.$$.fragment,p),s=!0)},o(p){d(e.$$.fragment,p),d(t.$$.fragment,p),d(i.$$.fragment,p),s=!1},d(p){p&&(g(n),g(o)),v(e,p),v(t,p),v(i,p)}}}function Of(r){let e,n=r[5](r[9])+"",t;return{c(){e=new un(!1),t=ve(),e.a=t},m(l,o){e.m(n,l,o),_(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(g(t),e.d())}}}function Af(r){let e,n;return e=new re({props:{$$slots:{default:[Of,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Pf(r){let e,n;const t=[B(Ee),{sourceLayer:Ee},{paint:{"line-color":$e(["get",r[1]],r[4],r[3]),"line-width":Fe,"line-opacity":q(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ee?"visible":"none"}}];let l={$$slots:{default:[Af]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?J(t,[i&0&&Z(B(Ee)),i&0&&{sourceLayer:Ee},i&26&&{paint:{"line-color":$e(["get",o[1]],o[4],o[3]),"line-width":Fe,"line-opacity":q(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Ee?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ef(r){let e,n=r[5](r[9])+"",t;return{c(){e=new un(!1),t=ve(),e.a=t},m(l,o){e.m(n,l,o),_(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(g(t),e.d())}}}function Nf(r){let e,n;return e=new re({props:{$$slots:{default:[Ef,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function If(r){let e,n;const t=[B(Ye),{sourceLayer:Ye},{manageHoverState:!0},{paint:{"line-color":$e(["get",r[1]],r[4],r[3]),"line-width":Fe,"line-opacity":q(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ye?"visible":"none"}}];let l={$$slots:{default:[Nf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?J(t,[i&0&&Z(B(Ye)),i&0&&{sourceLayer:Ye},t[2],i&26&&{paint:{"line-color":$e(["get",o[1]],o[4],o[3]),"line-width":Fe,"line-opacity":q(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Ye?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Df(r){let e,n,t,l,o,i,u,s;function a($){r[6]($)}let f={id:Ee,$$slots:{right:[Lf],default:[yf]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new le({props:f}),X.push(()=>Q(e,"checked",a));let c=r[2]&&or(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${Ee}.pmtiles`,$$slots:{default:[Pf]},$$scope:{ctx:r}}}),u=new ce({props:{url:`pmtiles://${fe()}/v1/${Ye}.pmtiles`,$$slots:{default:[If]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),c&&c.c(),l=L(),h(o.$$.fragment),i=L(),h(u.$$.fragment)},m($,p){b(e,$,p),_($,t,p),c&&c.m($,p),_($,l,p),b(o,$,p),_($,i,p),b(u,$,p),s=!0},p($,[p]){const C={};p&1024&&(C.$$scope={dirty:p,ctx:$}),!n&&p&4&&(n=!0,C.checked=$[2],x(()=>n=!1)),e.$set(C),$[2]?c?(c.p($,p),p&4&&m(c,1)):(c=or($),c.c(),m(c,1),c.m(l.parentNode,l)):c&&(ie(),d(c,1,1,()=>{c=null}),ae());const y={};p&1031&&(y.$$scope={dirty:p,ctx:$}),o.$set(y);const S={};p&1031&&(S.$$scope={dirty:p,ctx:$}),u.$set(S)},i($){s||(m(e.$$.fragment,$),m(c),m(o.$$.fragment,$),m(u.$$.fragment,$),s=!0)},o($){d(e.$$.fragment,$),d(c),d(o.$$.fragment,$),d(u.$$.fragment,$),s=!1},d($){$&&(g(t),g(l),g(i)),v(e,$),c&&c.d($),v(o,$),v(u,$)}}}let Ee="pct_commute",Ye="pct_school";function Ff(r,e,n){let t=U.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Ee,i="baseline",u=!1;function s($){let p=$.baseline,C=$.gov_target,y=$.go_dutch,S=`<h2>Trip purpose: ${o==Ee?"commuting":"school"}</h2>`;if(S+=`<p>Baseline (2011): <b>${p.toLocaleString()}</b></p>`,p==0)S+=`<p>Government target (2025): <b>${C.toLocaleString()}</b></p>`,S+=`<p>Go Dutch: <b>${y.toLocaleString()}</b></p>`;else{let T=(C/p).toFixed(1),E=(y/p).toFixed(1);S+=`<p>Government target (2025): ${C.toLocaleString()} (<b>${T}x</b> of baseline)</p>`,S+=`<p>Go Dutch: ${y.toLocaleString()} (<b>${E}x</b> of baseline)</p>`}return S}function a($){u=$,n(2,u)}function f($){o=$,n(0,o)}function c($){i=$,n(1,i)}return[o,i,u,t,l,s,a,f,c]}class Mf extends G{constructor(e){super(),z(this,e,Ff,Df,W,{})}}function jf(r){let e;return{c(){e=w("OS Speeds")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Bf(r){let e;return{c(){e=w("Basemap")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Hf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Rf(r){let e,n,t,l,o,i,u,s,a,f,c,$;return t=new V({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Bf]},$$scope:{ctx:r}}}),f=new V({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Hf]},$$scope:{ctx:r}}}),{c(){e=O("p"),n=w("The average speed data is collected over a six-month period by "),h(t.$$.fragment),l=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=L(),i=O("p"),i.textContent="Data valid as of 1 September, 2023",u=L(),s=O("p"),a=w(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=w(".")},m(p,C){_(p,e,C),k(e,n),b(t,e,null),k(e,l),_(p,o,C),_(p,i,C),_(p,u,C),_(p,s,C),k(s,a),b(f,s,null),k(s,c),$=!0},p(p,C){const y={};C&256&&(y.$$scope={dirty:C,ctx:p}),t.$set(y);const S={};C&256&&(S.$$scope={dirty:C,ctx:p}),f.$set(S)},i(p){$||(m(t.$$.fragment,p),m(f.$$.fragment,p),$=!0)},o(p){d(t.$$.fragment,p),d(f.$$.fragment,p),$=!1},d(p){p&&(g(e),g(o),g(i),g(u),g(s)),v(t),v(f)}}}function Wf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Rf]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function sr(r){let e,n,t,l,o;e=new ze({props:{colorScale:r[2],limits:r[3]}});function i(s){r[6](s)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new br({props:u}),X.push(()=>Q(t,"value",i)),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(s,a){b(e,s,a),_(s,n,a),b(t,s,a),o=!0},p(s,a){const f={};!l&&a&1&&(l=!0,f.value=s[0],x(()=>l=!1)),t.$set(f)},i(s){o||(m(e.$$.fragment,s),m(t.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),o=!1},d(s){s&&g(n),v(e,s),v(t,s)}}}function Uf(r){let e,n,t=r[7].indicative_mph+"",l,o,i,u,s,a=r[7].highest_mph+"",f,c,$=r[4][r[7].highest_description]+"",p,C;return{c(){e=O("p"),n=w("Posted speed limit: "),l=w(t),o=w(" mph"),i=L(),u=O("p"),s=w("Highest average speed: "),f=w(a),c=w(" mph (during "),p=w($),C=w(")")},m(y,S){_(y,e,S),k(e,n),k(e,l),k(e,o),_(y,i,S),_(y,u,S),k(u,s),k(u,f),k(u,c),k(u,p),k(u,C)},p(y,S){S&128&&t!==(t=y[7].indicative_mph+"")&&H(l,t),S&128&&a!==(a=y[7].highest_mph+"")&&H(f,a),S&128&&$!==($=y[4][y[7].highest_description]+"")&&H(p,$)},d(y){y&&(g(e),g(i),g(u))}}}function Gf(r){let e,n;return e=new re({props:{$$slots:{default:[Uf,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zf(r){let e,n;const t=[B(ut),{sourceLayer:ut},{manageHoverState:!0},{paint:{"line-color":$e(["get",r[0]],r[3],r[2]),"line-width":Fe,"line-opacity":q(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[Gf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&15?J(t,[i&0&&Z(B(ut)),i&0&&{sourceLayer:ut},t[2],i&13&&{paint:{"line-color":$e(["get",o[0]],o[3],o[2]),"line-width":Fe,"line-opacity":q(1,.5)}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};i&256&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function qf(r){let e,n,t,l,o,i;function u(f){r[5](f)}let s={id:ut,$$slots:{right:[Wf],default:[jf]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new le({props:s}),X.push(()=>Q(e,"checked",u));let a=r[1]&&sr(r);return o=new ce({props:{url:`pmtiles://${cn()}/v1/${ut}.pmtiles`,$$slots:{default:[zf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),l=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),_(f,t,c),a&&a.m(f,c),_(f,l,c),b(o,f,c),i=!0},p(f,[c]){const $={};c&256&&($.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,$.checked=f[1],x(()=>n=!1)),e.$set($),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=sr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ie(),d(a,1,1,()=>{a=null}),ae());const p={};c&259&&(p.$$scope={dirty:c,ctx:f}),o.$set(p)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(g(t),g(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ut="road_speeds";function Vf(r,e,n){let t=U.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",i=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function s(f){i=f,n(1,i)}function a(f){o=f,n(0,o)}return[o,i,t,l,u,s,a]}class Xf extends G{constructor(e){super(),z(this,e,Vf,qf,W,{})}}function Kf(r){let e;return{c(){e=w("OS Road widths")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Yf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Jf(r){let e,n,t,l,o,i,u,s,a;return u=new V({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Yf]},$$scope:{ctx:r}}}),{c(){e=O("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=L(),t=O("p"),t.textContent="Data valid as of 1 September, 2023",l=L(),o=O("p"),i=w(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),s=w(".")},m(f,c){_(f,e,c),_(f,n,c),_(f,t,c),_(f,l,c),_(f,o,c),k(o,i),b(u,o,null),k(o,s),a=!0},p(f,c){const $={};c&32&&($.$$scope={dirty:c,ctx:f}),u.$set($)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){d(u.$$.fragment,f),a=!1},d(f){f&&(g(e),g(n),g(t),g(l),g(o)),v(u)}}}function Zf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Jf]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function ir(r){let e,n;return e=new ze({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qf(r){let e,n,t,l=r[4].average+"",o,i,u,s,a,f,c=r[4].minimum+"",$,p;return{c(){e=O("p"),n=w("Average width: "),t=O("b"),o=w(l),i=w(`
        meters`),u=L(),s=O("p"),a=w("Minimum width: "),f=O("b"),$=w(c),p=w(`
        meters`)},m(C,y){_(C,e,y),k(e,n),k(e,t),k(t,o),k(e,i),_(C,u,y),_(C,s,y),k(s,a),k(s,f),k(f,$),k(s,p)},p(C,y){y&16&&l!==(l=C[4].average+"")&&H(o,l),y&16&&c!==(c=C[4].minimum+"")&&H($,c)},d(C){C&&(g(e),g(u),g(s))}}}function xf(r){let e,n;return e=new re({props:{$$slots:{default:[Qf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function eu(r){let e,n;const t=[B(ct),{sourceLayer:ct},{manageHoverState:!0},{paint:{"line-color":$e(["get","average"],r[2],r[1]),"line-width":Fe,"line-opacity":q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[xf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?J(t,[i&0&&Z(B(ct)),i&0&&{sourceLayer:ct},t[2],i&6&&{paint:{"line-color":$e(["get","average"],o[2],o[1]),"line-width":Fe,"line-opacity":q(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function tu(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:ct,$$slots:{right:[Zf],default:[Kf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),X.push(()=>Q(e,"checked",u));let a=r[0]&&ir(r);return o=new ce({props:{url:`pmtiles://${cn()}/v1/${ct}.pmtiles`,$$slots:{default:[eu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),l=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),_(f,t,c),a&&a.m(f,c),_(f,l,c),b(o,f,c),i=!0},p(f,[c]){const $={};c&32&&($.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,$.checked=f[0],x(()=>n=!1)),e.$set($),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=ir(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ie(),d(a,1,1,()=>{a=null}),ae());const p={};c&33&&(p.$$scope={dirty:c,ctx:f}),o.$set(p)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(g(t),g(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ct="road_widths";function nu(r,e,n){let t=U.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class ru extends G{constructor(e){super(),z(this,e,nu,tu,W,{})}}function lu(r){let e,n,t;return{c(){e=O("input"),K(e,"class","govuk-file-upload"),K(e,"id","load-criticals"),K(e,"type","file")},m(l,o){_(l,e,o),r[7](e),n||(t=_t(e,"change",r[5]),n=!0)},p:te,d(l){l&&g(e),r[7](null),n=!1,t()}}}function ar(r){let e,n;return e=new At({props:{small:!0,$$slots:{default:[su]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ou(r){let e,n,t=r[2].toLocaleString()+"",l,o,i;return e=new de({props:{color:kt}}),{c(){h(e.$$.fragment),n=w(`
        Show `),l=w(t),o=w(" issues")},m(u,s){b(e,u,s),_(u,n,s),_(u,l,s),_(u,o,s),i=!0},p(u,s){(!i||s&4)&&t!==(t=u[2].toLocaleString()+"")&&H(l,t)},i(u){i||(m(e.$$.fragment,u),i=!0)},o(u){d(e.$$.fragment,u),i=!1},d(u){u&&(g(n),g(l),g(o)),v(e,u)}}}function su(r){let e,n,t;function l(i){r[8](i)}let o={id:"show-criticals",$$slots:{default:[ou]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new le({props:o}),X.push(()=>Q(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&2052&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],x(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){d(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function iu(r){let e,n,t,l,o,i;e=new hr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[lu]},$$scope:{ctx:r}}}),t=new vr({props:{errorMessage:r[3]}});let u=r[2]>0&&ar(r);return{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),u&&u.c(),o=ve()},m(s,a){b(e,s,a),_(s,n,a),b(t,s,a),_(s,l,a),u&&u.m(s,a),_(s,o,a),i=!0},p(s,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:s}),e.$set(f);const c={};a&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?u?(u.p(s,a),a&4&&m(u,1)):(u=ar(s),u.c(),m(u,1),u.m(o.parentNode,o)):u&&(ie(),d(u,1,1,()=>{u=null}),ae())},i(s){i||(m(e.$$.fragment,s),m(t.$$.fragment,s),m(u),i=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),d(u),i=!1},d(s){s&&(g(n),g(l),g(o)),v(e,s),v(t,s),u&&u.d(s)}}}function au(r){let e,n,t=r[10].critical_type+"",l,o,i,u,s,a=r[10].location_description+"",f,c,$,p,C,y=r[10].notes+"",S,T,E,F,M,A,P,N=r[10].id+"",I,D,R,j,se,ee=(r[10].inspector??"???")+"",we,ht,he,Qe=r[10].submission_time+"",bt,xe,pe,vt,Me,He=r[10].scheme_reference+"",Ve,wt,et,Xe=r[10].current_design_stage+"",tt;return{c(){e=O("div"),n=O("h2"),l=w(t),o=L(),i=O("p"),u=O("u"),u.textContent="Location",s=w(`
          : `),f=w(a),c=L(),$=O("p"),p=O("u"),p.textContent="Notes",C=w(`
          : `),S=w(y),T=L(),E=O("hr"),F=L(),M=O("p"),A=w("Critical issue ID: "),P=O("b"),I=w(N),D=L(),R=O("p"),j=w("Submitted by "),se=O("b"),we=w(ee),ht=w(`
          at
          `),he=O("b"),bt=w(Qe),xe=L(),pe=O("p"),vt=w("For scheme "),Me=O("b"),Ve=w(He),wt=w(`
          in stage
          `),et=O("b"),tt=w(Xe),Te(e,"max-width","30vw")},m(be,Le){_(be,e,Le),k(e,n),k(n,l),k(e,o),k(e,i),k(i,u),k(i,s),k(i,f),k(e,c),k(e,$),k($,p),k($,C),k($,S),k(e,T),k(e,E),k(e,F),k(e,M),k(M,A),k(M,P),k(P,I),k(e,D),k(e,R),k(R,j),k(R,se),k(se,we),k(R,ht),k(R,he),k(he,bt),k(e,xe),k(e,pe),k(pe,vt),k(pe,Me),k(Me,Ve),k(pe,wt),k(pe,et),k(et,tt)},p(be,Le){Le&1024&&t!==(t=be[10].critical_type+"")&&H(l,t),Le&1024&&a!==(a=be[10].location_description+"")&&H(f,a),Le&1024&&y!==(y=be[10].notes+"")&&H(S,y),Le&1024&&N!==(N=be[10].id+"")&&H(I,N),Le&1024&&ee!==(ee=(be[10].inspector??"???")+"")&&H(we,ee),Le&1024&&Qe!==(Qe=be[10].submission_time+"")&&H(bt,Qe),Le&1024&&He!==(He=be[10].scheme_reference+"")&&H(Ve,He),Le&1024&&Xe!==(Xe=be[10].current_design_stage+"")&&H(tt,Xe)},d(be){be&&g(e)}}}function fu(r){let e,n;return e=new re({props:{$$slots:{default:[au,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function uu(r){let e,n,t,l,o,i;const u=[B(`${Ue}-clusters`),{applyToClusters:!0},{paint:{"circle-color":kt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let s={};for(let p=0;p<u.length;p+=1)s=Y(s,u[p]);e=new Ge({props:s}),e.$on("click",r[6]);const a=[B(`${Ue}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let p=0;p<a.length;p+=1)f=Y(f,a[p]);t=new hl({props:f});const c=[B(`${Ue}-points`),{applyToClusters:!1},{manageHoverState:!0},{paint:{"circle-color":kt,"circle-opacity":q(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let $={$$slots:{default:[fu]},$$scope:{ctx:r}};for(let p=0;p<c.length;p+=1)$=Y($,c[p]);return o=new Ge({props:$}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(o.$$.fragment)},m(p,C){b(e,p,C),_(p,n,C),b(t,p,C),_(p,l,C),b(o,p,C),i=!0},p(p,C){const y=C&2?J(u,[C&0&&Z(B(`${Ue}-clusters`)),u[1],C&0&&{paint:{"circle-color":kt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},C&2&&{layout:{visibility:p[1]?"visible":"none"}},u[4]]):{};e.$set(y);const S=C&2?J(a,[C&0&&Z(B(`${Ue}-counts`)),a[1],C&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:p[1]?"visible":"none"}}]):{};t.$set(S);const T=C&2?J(c,[C&0&&Z(B(`${Ue}-points`)),c[1],c[2],C&0&&{paint:{"circle-color":kt,"circle-opacity":q(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},C&2&&{layout:{visibility:p[1]?"visible":"none"}}]):{};C&2048&&(T.$$scope={dirty:C,ctx:p}),o.$set(T)},i(p){i||(m(e.$$.fragment,p),m(t.$$.fragment,p),m(o.$$.fragment,p),i=!0)},o(p){d(e.$$.fragment,p),d(t.$$.fragment,p),d(o.$$.fragment,p),i=!1},d(p){p&&(g(n),g(l)),v(e,p),v(t,p),v(o,p)}}}function cu(r){let e,n,t,l;return e=new Se({props:{label:"Critical Issues",$$slots:{default:[iu]},$$scope:{ctx:r}}}),t=new dt({props:{id:Ue,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[uu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,i){b(e,o,i),_(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&2063&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&16&&(s.data=o[4]),i&2050&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&g(n),v(e,o),v(t,o)}}}let Ue="criticals",kt="red";function $u(r,e,n){let t;ge(r,Lt,p=>n(9,t=p));let l,o=!0,i=0,u="",s=en();async function a(p){try{n(4,s=await Ts(l.files[0])),n(2,i=s.features.length),n(3,u="")}catch(C){n(3,u=`The file you loaded is broken: ${C}`)}}function f(p){t.getSource(Ue).getClusterExpansionZoom(p.detail.features[0].properties.cluster_id,(C,y)=>{C||t.easeTo({center:p.detail.features[0].geometry.coordinates,zoom:y})})}function c(p){X[p?"unshift":"push"](()=>{l=p,n(0,l)})}function $(p){o=p,n(1,o)}return[l,o,i,u,s,a,f,c,$]}class pu extends G{constructor(e){super(),z(this,e,$u,cu,W,{})}}function mu(r){let e,n,t;return e=new de({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Crossings`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function _u(r){let e;return{c(){e=w("crossing")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function gu(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[_u]},$$scope:{ctx:r}}}),i=new qe({}),{c(){e=O("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function du(r){let e,n,t;return n=new oe({props:{$$slots:{default:[gu]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function hu(r){let e,n=fr(r[3])+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=fr(l[3])+"")&&H(t,n)},d(l){l&&g(e)}}}function bu(r){let e,n;return e=new re({props:{$$slots:{default:[hu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vu(r){let e,n;const t=[B($t),{sourceLayer:$t},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let l={$$slots:{default:[bu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new Ge({props:l}),e.$on("click",ku),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?J(t,[i&0&&Z(B($t)),i&0&&{sourceLayer:$t},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function wu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:$t,$$slots:{right:[du],default:[mu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),X.push(()=>Q(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${$t}.pmtiles`,$$slots:{default:[vu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let $t="crossings";function fr(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function ku(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function yu(r,e,n){let t=U.crossings,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Su extends G{constructor(e){super(),z(this,e,yu,wu,W,{})}}function Cu(r){let e,n,t;return e=new de({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Cycle parking`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function Tu(r){let e;return{c(){e=w("OpenStreetMap")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Lu(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Tu]},$$scope:{ctx:r}}}),i=new qe({}),{c(){e=O("p"),n=w("Cycle parking, according to "),h(t.$$.fragment),l=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function Ou(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Lu]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Au(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=O("p"),n=w("Capacity: "),t=O("b"),o=w(l)},m(i,u){_(i,e,u),k(e,n),k(e,t),k(t,o)},p(i,u){u&8&&l!==(l=(i[3].capacity??"unknown")+"")&&H(o,l)},d(i){i&&g(e)}}}function Pu(r){let e,n;return e=new re({props:{$$slots:{default:[Au,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Eu(r){let e,n;const t=[B(pt),{sourceLayer:pt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0}];let l={$$slots:{default:[Pu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new Ge({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?J(t,[i&0&&Z(B(pt)),i&0&&{sourceLayer:pt},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Nu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:pt,$$slots:{right:[Ou],default:[Cu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),X.push(()=>Q(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${pt}.pmtiles`,$$slots:{default:[Eu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let pt="cycle_parking";function Iu(r,e,n){let t=U.cycle_parking,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Du extends G{constructor(e){super(),z(this,e,Iu,Nu,W,{})}}function Fu(r){let e,n,t,l;return e=new de({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=L(),t=w(r[2])},m(o,i){b(e,o,i),_(o,n,i),_(o,t,i),l=!0},p(o,i){(!l||i&4)&&H(t,o[2])},i(o){l||(m(e.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),l=!1},d(o){o&&(g(n),g(t)),v(e,o)}}}function Mu(r){let e;const n=r[5].default,t=Wt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&Ut(t,n,l,l[7],e?zt(n,l[7],o,null):Gt(l[7]),null)},i(l){e||(m(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function ju(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Mu]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&128&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Bu(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&H(t,n)},d(l){l&&g(e)}}}function Hu(r){let e,n;return e=new re({props:{$$slots:{default:[Bu,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ru(r){let e,n;const t=[B(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":q(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0}];let l={$$slots:{default:[Hu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new je({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&25?J(t,[i&1&&Z(B(o[0])),i&1&&{sourceLayer:o[0]},i&16&&{paint:{"fill-color":o[4],"fill-opacity":q(.7,1)}},i&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4]]):{};i&130&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Wu(r){let e,n,t,l,o;function i(s){r[6](s)}let u={id:r[0],$$slots:{right:[ju],default:[Fu]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new le({props:u}),X.push(()=>Q(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${r[0]}.pmtiles`,$$slots:{default:[Ru]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&1&&(f.id=s[0]),a&132&&(f.$$scope={dirty:a,ctx:s}),!n&&a&8&&(n=!0,f.checked=s[3],x(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${fe()}/v1/${s[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}function Uu(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:i}=e,{pluralNoun:u}=e,s=U[o],a=!1;function f(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,i=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,i,u,a,s,t,f,l]}class pn extends G{constructor(e){super(),z(this,e,Uu,Wu,W,{name:0,singularNoun:1,pluralNoun:2})}}function Gu(r){let e;return{c(){e=w("hospital")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function zu(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Gu]},$$scope:{ctx:r}}}),i=new qe({}),{c(){e=O("p"),n=w("This shows "),h(t.$$.fragment),l=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function qu(r){let e,n;return e=new pn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[zu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Vu extends G{constructor(e){super(),z(this,e,null,qu,W,{})}}function Xu(r){let e,n,t;return e=new de({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Railway Stations`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function Ku(r){let e;return{c(){e=w("railway station")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Yu(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Ku]},$$scope:{ctx:r}}}),i=new qe({}),{c(){e=O("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function Ju(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Yu]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Zu(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&H(t,n)},d(l){l&&g(e)}}}function Qu(r){let e,n;return e=new re({props:{$$slots:{default:[Zu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xu(r){let e,n;const t=[B(Rt),{paint:{"circle-color":r[1],"circle-radius":Bt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Qu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new Ge({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?J(t,[i&0&&Z(B(Rt)),i&2&&{paint:{"circle-color":o[1],"circle-radius":Bt/2}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ec(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Rt,$$slots:{right:[Ju],default:[Xu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),X.push(()=>Q(e,"checked",i)),l=new dt({props:{data:`${fe()}/v1/${Rt}.geojson`,$$slots:{default:[xu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let Rt="railway_stations";function tc(r,e,n){let t=U.railway_stations,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class nc extends G{constructor(e){super(),z(this,e,tc,ec,W,{})}}function rc(r){let e;return{c(){e=w("primary and secondary schools")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function lc(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[rc]},$$scope:{ctx:r}}}),i=new qe({}),{c(){e=O("p"),n=w("This shows "),h(t.$$.fragment),l=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function oc(r){let e,n;return e=new pn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[lc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class sc extends G{constructor(e){super(),z(this,e,null,oc,W,{})}}function ic(r){let e;return{c(){e=w("sports pitches")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ac(r){let e;return{c(){e=w("sports centres")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function fc(r){let e,n,t,l,o,i,u,s,a;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[ic]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[ac]},$$scope:{ctx:r}}}),s=new qe({}),{c(){e=O("p"),n=w("This shows "),h(t.$$.fragment),l=w(" and "),h(o.$$.fragment),i=w(" data from OpenStreetMap (as of 9 August 2023)."),u=L(),h(s.$$.fragment)},m(f,c){_(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),_(f,u,c),b(s,f,c),a=!0},p(f,c){const $={};c&1&&($.$$scope={dirty:c,ctx:f}),t.$set($);const p={};c&1&&(p.$$scope={dirty:c,ctx:f}),o.$set(p)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(s.$$.fragment,f),a=!1},d(f){f&&(g(e),g(u)),v(t),v(o),v(s,f)}}}function uc(r){let e,n;return e=new pn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[fc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class cc extends G{constructor(e){super(),z(this,e,null,uc,W,{})}}function $c(r){let e;return{c(){e=w("Vehicle counts")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function pc(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function mc(r){let e;return{c(){e=w("methodology")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function _c(r){let e,n,t,l,o,i,u,s,a,f,c;return t=new V({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[pc]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[mc]},$$scope:{ctx:r}}}),f=new Be({}),{c(){e=O("p"),n=w("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),l=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),i=w(" for details and caveats about the measurements."),u=L(),s=O("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=L(),h(f.$$.fragment)},m($,p){_($,e,p),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),_($,u,p),_($,s,p),_($,a,p),b(f,$,p),c=!0},p($,p){const C={};p&64&&(C.$$scope={dirty:p,ctx:$}),t.$set(C);const y={};p&64&&(y.$$scope={dirty:p,ctx:$}),o.$set(y)},i($){c||(m(t.$$.fragment,$),m(o.$$.fragment,$),m(f.$$.fragment,$),c=!0)},o($){d(t.$$.fragment,$),d(o.$$.fragment,$),d(f.$$.fragment,$),c=!1},d($){$&&(g(e),g(u),g(s),g(a)),v(t),v(o),v(f,$)}}}function gc(r){let e,n,t;return n=new oe({props:{$$slots:{default:[_c]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function ur(r){let e,n;return e=new ze({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function dc(r){let e,n=r[5].location+"",t,l,o,i,u,s=r[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,$,p,C=r[5].pedal_cycles_2022.toLocaleString()+"",y,S,T,E,F,M=r[5].method+"",A;return{c(){e=O("h2"),t=w(n),l=L(),o=O("p"),i=w("Total motor vehicles (2022 AADF): "),u=O("b"),a=w(s),f=L(),c=O("p"),$=w("Total pedal cycles (2022 AADF): "),p=O("b"),y=w(C),S=L(),T=O("p"),E=w("Count method: "),F=O("b"),A=w(M)},m(P,N){_(P,e,N),k(e,t),_(P,l,N),_(P,o,N),k(o,i),k(o,u),k(u,a),_(P,f,N),_(P,c,N),k(c,$),k(c,p),k(p,y),_(P,S,N),_(P,T,N),k(T,E),k(T,F),k(F,A)},p(P,N){N&32&&n!==(n=P[5].location+"")&&H(t,n),N&32&&s!==(s=P[5].motor_vehicles_2022.toLocaleString()+"")&&H(a,s),N&32&&C!==(C=P[5].pedal_cycles_2022.toLocaleString()+"")&&H(y,C),N&32&&M!==(M=P[5].method+"")&&H(A,M)},d(P){P&&(g(e),g(l),g(o),g(f),g(c),g(S),g(T))}}}function hc(r){let e,n;return e=new re({props:{$$slots:{default:[dc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bc(r){let e,n;const t=[B(mt),{sourceLayer:mt},{paint:{"circle-color":$e(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let l={$$slots:{default:[hc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new Ge({props:l}),e.$on("click",wc),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?J(t,[i&0&&Z(B(mt)),i&0&&{sourceLayer:mt},i&6&&{paint:{"circle-color":$e(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4]]):{};i&64&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function vc(r){let e,n,t,l,o,i;function u(f){r[4](f)}let s={id:mt,$$slots:{right:[gc],default:[$c]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),X.push(()=>Q(e,"checked",u));let a=r[0]&&ur(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${mt}.pmtiles`,$$slots:{default:[bc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),l=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),_(f,t,c),a&&a.m(f,c),_(f,l,c),b(o,f,c),i=!0},p(f,[c]){const $={};c&64&&($.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,$.checked=f[0],x(()=>n=!1)),e.$set($),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=ur(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ie(),d(a,1,1,()=>{a=null}),ae());const p={};c&65&&(p.$$scope={dirty:c,ctx:f}),o.$set(p)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(g(t),g(l)),v(e,f),a&&a.d(f),v(o,f)}}}let mt="vehicle_counts";function wc(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function kc(r,e,n){let t=U.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],i=!1;function u(s){i=s,n(0,i)}return[i,t,l,o,u]}class yc extends G{constructor(e){super(),z(this,e,kc,vc,W,{})}}function Sc(r){let e,n,t,l,o,i,u,s;return e=new sc({}),t=new Vu({}),o=new cc({}),u=new nc({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(o.$$.fragment),i=L(),h(u.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),_(a,l,f),b(o,a,f),_(a,i,f),b(u,a,f),s=!0},i(a){s||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(u.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(o.$$.fragment,a),d(u.$$.fragment,a),s=!1},d(a){a&&(g(n),g(l),g(i)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function Cc(r){let e,n;return e=new At({props:{small:!0,$$slots:{default:[Sc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Tc(r){let e,n,t,l,o,i,u,s,a,f;return e=new $f({}),t=new kf({}),o=new ef({}),u=new Du({}),a=new Su({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(o.$$.fragment),i=L(),h(u.$$.fragment),s=L(),h(a.$$.fragment)},m(c,$){b(e,c,$),_(c,n,$),b(t,c,$),_(c,l,$),b(o,c,$),_(c,i,$),b(u,c,$),_(c,s,$),b(a,c,$),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(u.$$.fragment,c),d(a.$$.fragment,c),f=!1},d(c){c&&(g(n),g(l),g(i),g(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Lc(r){let e,n;return e=new At({props:{small:!0,$$slots:{default:[Tc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Oc(r){let e,n,t,l,o,i,u,s,a,f;return e=new Aa({}),t=new Ra({}),o=new Mi({}),u=new la({}),a=new ha({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(o.$$.fragment),i=L(),h(u.$$.fragment),s=L(),h(a.$$.fragment)},m(c,$){b(e,c,$),_(c,n,$),b(t,c,$),_(c,l,$),b(o,c,$),_(c,i,$),b(u,c,$),_(c,s,$),b(a,c,$),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(u.$$.fragment,c),d(a.$$.fragment,c),f=!1},d(c){c&&(g(n),g(l),g(i),g(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Ac(r){let e,n;return e=new At({props:{small:!0,$$slots:{default:[Oc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Pc(r){let e,n,t,l;return e=new Ci({}),t=new Xi({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,i){b(e,o,i),_(o,n,i),b(t,o,i),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&g(n),v(e,o),v(t,o)}}}function Ec(r){let e,n,t,l;return e=new ru({}),t=new Xf({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,i){b(e,o,i),_(o,n,i),b(t,o,i),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&g(n),v(e,o),v(t,o)}}}function Nc(r){let e,n,t,l,o=fn()=="Private (development)",i,u;e=new yc({}),t=new Mf({});let s=o&&Ec();return{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),s&&s.c(),i=ve()},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),_(a,l,f),s&&s.m(a,f),_(a,i,f),u=!0},p:te,i(a){u||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(s),u=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(s),u=!1},d(a){a&&(g(n),g(l),g(i)),v(e,a),v(t,a),s&&s.d(a)}}}function Ic(r){let e,n,t,l,o;function i(s){r[4](s)}let u={displayEnableButton:!0};return r[1]!==void 0&&(u.isInactive=r[1]),e=new nl({props:u}),r[3](e),X.push(()=>Q(e,"isInactive",i)),l=new Ks({}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,a){const f={};!n&&a&2&&(n=!0,f.isInactive=s[1],x(()=>n=!1)),e.$set(f)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),r[3](null),v(e,s),v(l,s)}}}function Dc(r){let e,n,t,l,o,i,u,s,a,f,c,$,p,C,y,S;return e=new pu({}),t=new Se({props:{label:"Trip generators",$$slots:{default:[Cc]},$$scope:{ctx:r}}}),o=new Se({props:{label:"Existing infrastructure",$$slots:{default:[Lc]},$$scope:{ctx:r}}}),u=new Se({props:{label:"Boundaries",$$slots:{default:[Ac]},$$scope:{ctx:r}}}),a=new Se({props:{label:"Census",$$slots:{default:[Pc]},$$scope:{ctx:r}}}),c=new Se({props:{label:"Other",$$slots:{default:[Nc]},$$scope:{ctx:r}}}),p=new Se({props:{label:"Tools",$$slots:{default:[Ic]},$$scope:{ctx:r}}}),y=new tl({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(o.$$.fragment),i=L(),h(u.$$.fragment),s=L(),h(a.$$.fragment),f=L(),h(c.$$.fragment),$=L(),h(p.$$.fragment),C=L(),h(y.$$.fragment)},m(T,E){b(e,T,E),_(T,n,E),b(t,T,E),_(T,l,E),b(o,T,E),_(T,i,E),b(u,T,E),_(T,s,E),b(a,T,E),_(T,f,E),b(c,T,E),_(T,$,E),b(p,T,E),_(T,C,E),b(y,T,E),S=!0},p(T,E){const F={};E&32&&(F.$$scope={dirty:E,ctx:T}),t.$set(F);const M={};E&32&&(M.$$scope={dirty:E,ctx:T}),o.$set(M);const A={};E&32&&(A.$$scope={dirty:E,ctx:T}),u.$set(A);const P={};E&32&&(P.$$scope={dirty:E,ctx:T}),a.$set(P);const N={};E&32&&(N.$$scope={dirty:E,ctx:T}),c.$set(N);const I={};E&35&&(I.$$scope={dirty:E,ctx:T}),p.$set(I);const D={};E&2&&(D.disabled=!T[1]),y.$set(D)},i(T){S||(m(e.$$.fragment,T),m(t.$$.fragment,T),m(o.$$.fragment,T),m(u.$$.fragment,T),m(a.$$.fragment,T),m(c.$$.fragment,T),m(p.$$.fragment,T),m(y.$$.fragment,T),S=!0)},o(T){d(e.$$.fragment,T),d(t.$$.fragment,T),d(o.$$.fragment,T),d(u.$$.fragment,T),d(a.$$.fragment,T),d(c.$$.fragment,T),d(p.$$.fragment,T),d(y.$$.fragment,T),S=!1},d(T){T&&(g(n),g(l),g(i),g(s),g(f),g($),g(C)),v(e,T),v(t,T),v(o,T),v(u,T),v(a,T),v(c,T),v(p,T),v(y,T)}}}function Fc(r){let e,n,t,l;return e=new Se({props:{label:"Layers",open:!0,$$slots:{default:[Dc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0,t||(l=_t(window,"keydown",r[2]),t=!0)},p(o,[i]){const u={};i&35&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o),t=!1,l()}}}function Mc(r,e,n){let t;ge(r,hn,s=>n(1,t=s));let l;function o(s){!t&&s.key=="Escape"&&(l.disableStreetView(),s.preventDefault())}function i(s){X[s?"unshift":"push"](()=>{l=s,n(0,l)})}function u(s){t=s,hn.set(t)}return[l,t,o,i,u]}class jc extends G{constructor(e){super(),z(this,e,Mc,Fc,W,{})}}function Bc(r,e,n){let{loadFile:t}=e;return Ot(async()=>{let o=await(await fetch(`${cn()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class Hc extends G{constructor(e){super(),z(this,e,Bc,null,W,{loadFile:0})}}function Rc(r){let e;return{c(){e=w("Show on map")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Wc(r){let e;return{c(){e=w("Edit scheme locally")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Uc(r){let e,n,t=r[0].authority_or_region+"",l,o,i,u,s=r[0].capital_scheme_id+"",a,f,c,$,p=r[0].funding_programme+"",C,y,S,T,E,F,M;return T=new St({props:{$$slots:{default:[Rc]},$$scope:{ctx:r}}}),T.$on("click",r[3]),F=new St({props:{disabled:r[1],title:r[2],$$slots:{default:[Wc]},$$scope:{ctx:r}}}),F.$on("click",r[4]),{c(){e=O("p"),n=w("Authority or region: "),l=w(t),o=L(),i=O("p"),u=w("Capital scheme ID: "),a=w(s),f=L(),c=O("p"),$=w("Funding programme: "),C=w(p),y=L(),S=O("div"),h(T.$$.fragment),E=L(),h(F.$$.fragment),K(S,"class","govuk-button-group")},m(A,P){_(A,e,P),k(e,n),k(e,l),_(A,o,P),_(A,i,P),k(i,u),k(i,a),_(A,f,P),_(A,c,P),k(c,$),k(c,C),_(A,y,P),_(A,S,P),b(T,S,null),k(S,E),b(F,S,null),M=!0},p(A,P){(!M||P&1)&&t!==(t=A[0].authority_or_region+"")&&H(l,t),(!M||P&1)&&s!==(s=A[0].capital_scheme_id+"")&&H(a,s),(!M||P&1)&&p!==(p=A[0].funding_programme+"")&&H(C,p);const N={};P&256&&(N.$$scope={dirty:P,ctx:A}),T.$set(N);const I={};P&256&&(I.$$scope={dirty:P,ctx:A}),F.$set(I)},i(A){M||(m(T.$$.fragment,A),m(F.$$.fragment,A),M=!0)},o(A){d(T.$$.fragment,A),d(F.$$.fragment,A),M=!1},d(A){A&&(g(e),g(o),g(i),g(f),g(c),g(y),g(S)),v(T),v(F)}}}function Gc(r){let e,n;return e=new Se({props:{label:`${r[0].scheme_reference}: ${r[0].num_features} features`,$$slots:{default:[Uc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.label=`${t[0].scheme_reference}: ${t[0].num_features} features`),l&257&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zc(r,e,n){let t,l;ge(r,gt,c=>n(6,t=c)),ge(r,Lt,c=>n(7,l=c));let{scheme:o}=e,{authorityNames:i}=e,u=!i.has(o.authority_or_region),s=u?"This scheme doesn't have an authority specified correctly, so you can't edit this scheme. We're working to fix this problem.":void 0;function a(){let c={type:"FeatureCollection",features:t.features.filter($=>$.properties.scheme_reference==o.scheme_reference)};l==null||l.fitBounds(Jr(c),{padding:20,animate:!1})}function f(){let c={type:"FeatureCollection",features:t.features.filter(p=>p.properties.scheme_reference==o.scheme_reference)},$=o.authority_or_region;window.localStorage.setItem($,JSON.stringify(c)),window.open(`scheme.html?authority=${o.authority_or_region}`,"_blank")}return r.$$set=c=>{"scheme"in c&&n(0,o=c.scheme),"authorityNames"in c&&n(5,i=c.authorityNames)},[o,u,s,a,f,i]}class qc extends G{constructor(e){super(),z(this,e,zc,Gc,W,{scheme:0,authorityNames:5})}}const Vc=["Adur","Allerdale","Amber Valley","Arun","Ashfield","Ashford","Babergh","Barking and Dagenham","Barnet","Barnsley","Barrow-in-Furness","Basildon","Basingstoke and Deane","Bassetlaw","Bath and North East Somerset","Bedford","Bexley","Birmingham","Blaby","Blackburn with Darwen","Blackpool","Bolsover","Bolton","Boston","Bournemouth, Christchurch and Poole","Bracknell Forest","Bradford","Braintree","Breckland","Brent","Brentwood","Brighton and Hove","Bristol, City of","Broadland","Bromley","Bromsgrove","Broxbourne","Broxtowe","Buckinghamshire","Burnley","Bury","Calderdale","Cambridge","Cambridgeshire and Peterborough Combined Authority","Camden","Cannock Chase","Canterbury","Carlisle","Castle Point","Central Bedfordshire","Charnwood","Chelmsford","Cheltenham","Cherwell","Cheshire East","Cheshire West and Chester","Chesterfield","Chichester","Chorley","City of London","Colchester","Copeland","Cornwall","Cotswold","County Durham","Coventry","Craven","Crawley","Croydon","Cumbria","Dacorum","Darlington","Dartford","Derby","Derbyshire","Derbyshire Dales","Devon","Doncaster","Dorset","Dover","Dudley","Ealing","Eastbourne","East Cambridgeshire","East Devon","East Hampshire","East Hertfordshire","Eastleigh","East Lindsey","East Riding of Yorkshire","East Staffordshire","East Suffolk","East Sussex","Eden","Elmbridge","Enfield","Epping Forest","Epsom and Ewell","Erewash","Essex","Exeter","Fareham","Fenland","Folkestone and Hythe","Forest of Dean","Fylde","Gateshead","Gedling","Gloucester","Gloucestershire","Gosport","Gravesham","Greater London","Greater Manchester Combined Authority","Great Yarmouth","Greenwich","Guildford","Hackney","Halton","Hambleton","Hammersmith and Fulham","Hampshire","Harborough","Haringey","Harlow","Harrogate","Harrow","Hart","Hartlepool","Hastings","Havant","Havering","Herefordshire","Herefordshire, County of","Hertfordshire","Hertsmere","High Peak","Hillingdon","Hinckley and Bosworth","Horsham","Hounslow","Huntingdonshire","Hyndburn","Ipswich","Isle of Wight","Isles of Scilly","Islington","Kensington and Chelsea","Kent","King's Lynn and West Norfolk","Kingston upon Hull","Kingston upon Hull, City of","Kingston upon Thames","Kirklees","Knowsley","Lambeth","Lancashire","Lancaster","Leeds","Leicester","Leicestershire","Lewes","Lewisham","Lichfield","Lincoln","Lincolnshire","Liverpool","Liverpool City Region Combined Authority","Luton","Maidstone","Maldon","Malvern Hills","Manchester","Mansfield","Medway","Melton","Mendip","Merton","Mid Devon","Middlesbrough","Mid Suffolk","Mid Sussex","Milton Keynes","Mole Valley","Newark and Sherwood","Newcastle-under-Lyme","Newcastle upon Tyne","New Forest","Newham","Norfolk","North Devon","North East Derbyshire","North East Joint Transport Committee","North East Lincolnshire","North Hertfordshire","North Kesteven","North Lincolnshire","North Norfolk","North Northamptonshire","North Somerset","North Tyneside","Northumberland","North Warwickshire","North West Leicestershire","North Yorkshire","Norwich","Nottingham","Nottinghamshire","Nuneaton and Bedworth","Oadby and Wigston","Oldham","Oxford","Oxfordshire","Pendle","Peterborough","Plymouth","Portsmouth","Preston","Reading","Redbridge","Redcar and Cleveland","Redditch","Reigate and Banstead","Ribble Valley","Richmondshire","Richmond upon Thames","Rochdale","Rochford","Rossendale","Rother","Rotherham","Rugby","Runnymede","Rushcliffe","Rushmoor","Rutland","Ryedale","Salford","Sandwell","Scarborough","Sedgemoor","Sefton","Selby","Sevenoaks","Sheffield","Sheffield City Region Combined Authority","Shropshire","Slough","Solihull","Somerset","Somerset West and Taunton","Southampton","South Cambridgeshire","South Derbyshire","Southend-on-Sea","South Gloucestershire","South Hams","South Holland","South Kesteven","South Lakeland","South Norfolk","South Oxfordshire","South Ribble","South Somerset","South Staffordshire","South Tyneside","Southwark","Spelthorne","Stafford","Staffordshire","Staffordshire Moorlands","St Albans","Stevenage","St. Helens","Stockport","Stockton-on-Tees","Stoke-on-Trent","Stratford-on-Avon","Stroud","Suffolk","Sunderland","Surrey","Surrey Heath","Sutton","Swale","Swindon","Tameside","Tamworth","Tandridge","Tees Valley Combined Authority","Teignbridge","Telford and Wrekin","Tendring","Test Valley","Tewkesbury","Thanet","Three Rivers","Thurrock","Tonbridge and Malling","Torbay","Torridge","Tower Hamlets","Trafford","Tunbridge Wells","Uttlesford","Vale of White Horse","Wakefield","Walsall","Waltham Forest","Wandsworth","Warrington","Warwick","Warwickshire","Watford","Waverley","Wealden","Welwyn Hatfield","West Berkshire","West Devon","West Lancashire","West Lindsey","West Midlands ITA","Westminster","West Northamptonshire","West of England Combined Authority","West Oxfordshire","West Suffolk","West Sussex","West Yorkshire Combined Authority","Wigan","Wiltshire","Winchester","Windsor and Maidenhead","Wirral","Woking","Wokingham","Wolverhampton","Worcester","Worcestershire","Worthing","Wychavon","Wyre","Wyre Forest","York"];function cr(r){let e,n,t=bn(r[0].length_meters)+"",l;return{c(){e=O("p"),n=w("Length: "),l=w(t)},m(o,i){_(o,e,i),k(e,n),k(e,l)},p(o,i){i&1&&t!==(t=bn(o[0].length_meters)+"")&&H(l,t)},d(o){o&&g(e)}}}function $r(r){let e,n=r[1](r[0].description)+"";return{c(){e=O("p")},m(t,l){_(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[1](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&g(e)}}}function Xc(r){let e,n,t,l=r[1](r[0].name)+"",o,i=r[0].intervention_type+"",u,s,a,f,c,$=r[0].scheme_reference+"",p,C,y,S=r[0].length_meters&&cr(r),T=r[0].description&&$r(r);return{c(){e=O("div"),n=O("h2"),t=new un(!1),o=w(" ("),u=w(i),s=w(")"),a=L(),f=O("p"),c=w("Scheme reference: "),p=w($),C=L(),S&&S.c(),y=L(),T&&T.c(),t.a=o,Te(e,"max-width","30vw")},m(E,F){_(E,e,F),k(e,n),t.m(l,n),k(n,o),k(n,u),k(n,s),k(e,a),k(e,f),k(f,c),k(f,p),k(e,C),S&&S.m(e,null),k(e,y),T&&T.m(e,null)},p(E,[F]){F&1&&l!==(l=E[1](E[0].name)+"")&&t.p(l),F&1&&i!==(i=E[0].intervention_type+"")&&H(u,i),F&1&&$!==($=E[0].scheme_reference+"")&&H(p,$),E[0].length_meters?S?S.p(E,F):(S=cr(E),S.c(),S.m(e,y)):S&&(S.d(1),S=null),E[0].description?T?T.p(E,F):(T=$r(E),T.c(),T.m(e,null)):T&&(T.d(1),T=null)},i:te,o:te,d(E){E&&g(e),S&&S.d(),T&&T.d()}}}function Kc(r,e,n){let{props:t}=e,{filterText:l}=e;function o(i){return l?i.replace(new RegExp(l,"gi"),u=>`<mark>${u}</mark>`):i}return r.$$set=i=>{"props"in i&&n(0,t=i.props),"filterText"in i&&n(2,l=i.filterText)},[t,o,l]}class mn extends G{constructor(e){super(),z(this,e,Kc,Xc,W,{props:0,filterText:2})}}function Yc(r){let e,n;return e=new mn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Jc(r){let e,n;return e=new re({props:{$$slots:{default:[Yc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zc(r){let e,n;return e=new mn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qc(r){let e,n;return e=new re({props:{$$slots:{default:[Zc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xc(r){let e,n;return e=new mn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function e$(r){let e,n;return e=new re({props:{$$slots:{default:[xc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function t$(r){let e,n,t,l,o,i,u,s,a,f;const c=[B("interventions-points"),{filter:["all",vn,r[4],r[5]]},{manageHoverState:!0},{paint:{"circle-color":r[3],"circle-radius":Bt,"circle-opacity":q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let $={$$slots:{default:[Jc]},$$scope:{ctx:r}};for(let A=0;A<c.length;A+=1)$=Y($,c[A]);e=new Ge({props:$});const p=[B("interventions-lines"),{filter:["all",wn,r[4]]},{manageHoverState:!0},{paint:{"line-color":r[3],"line-width":rt,"line-opacity":q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let C={$$slots:{default:[Qc]},$$scope:{ctx:r}};for(let A=0;A<p.length;A+=1)C=Y(C,p[A]);t=new ue({props:C});const y=[B("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*rt,"circle-opacity":0,"circle-stroke-color":jt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let S={};for(let A=0;A<y.length;A+=1)S=Y(S,y[A]);o=new Ge({props:S});const T=[B("interventions-polygons"),{filter:["all",Nt,r[4]]},{manageHoverState:!0},{paint:{"fill-color":r[3],"fill-opacity":q(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let E={$$slots:{default:[e$]},$$scope:{ctx:r}};for(let A=0;A<T.length;A+=1)E=Y(E,T[A]);u=new je({props:E});const F=[B("interventions-polygons-outlines"),{filter:["all",Nt,r[4]]},{paint:{"line-color":r[3],"line-opacity":.5,"line-width":.7*rt}},{layout:{visibility:r[0]?"visible":"none"}}];let M={};for(let A=0;A<F.length;A+=1)M=Y(M,F[A]);return a=new ue({props:M}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(o.$$.fragment),i=L(),h(u.$$.fragment),s=L(),h(a.$$.fragment)},m(A,P){b(e,A,P),_(A,n,P),b(t,A,P),_(A,l,P),b(o,A,P),_(A,i,P),b(u,A,P),_(A,s,P),b(a,A,P),f=!0},p(A,P){const N=P&57?J(c,[P&0&&Z(B("interventions-points")),P&48&&{filter:["all",vn,A[4],A[5]]},c[2],P&8&&{paint:{"circle-color":A[3],"circle-radius":Bt,"circle-opacity":q(1,.5)}},P&1&&{layout:{visibility:A[0]?"visible":"none"}}]):{};P&258&&(N.$$scope={dirty:P,ctx:A}),e.$set(N);const I=P&25?J(p,[P&0&&Z(B("interventions-lines")),P&16&&{filter:["all",wn,A[4]]},p[2],P&8&&{paint:{"line-color":A[3],"line-width":rt,"line-opacity":q(1,.5)}},P&1&&{layout:{visibility:A[0]?"visible":"none"}}]):{};P&258&&(I.$$scope={dirty:P,ctx:A}),t.$set(I);const D=P&1?J(y,[P&0&&Z(B("interventions-lines-endpoints")),y[1],P&0&&{paint:{"circle-radius":.5*rt,"circle-opacity":0,"circle-stroke-color":jt.lineEndpointColor,"circle-stroke-width":2}},P&1&&{layout:{visibility:A[0]?"visible":"none"}}]):{};o.$set(D);const R=P&25?J(T,[P&0&&Z(B("interventions-polygons")),P&16&&{filter:["all",Nt,A[4]]},T[2],P&8&&{paint:{"fill-color":A[3],"fill-opacity":q(.2,.5)}},P&1&&{layout:{visibility:A[0]?"visible":"none"}}]):{};P&258&&(R.$$scope={dirty:P,ctx:A}),u.$set(R);const j=P&25?J(F,[P&0&&Z(B("interventions-polygons-outlines")),P&16&&{filter:["all",Nt,A[4]]},P&8&&{paint:{"line-color":A[3],"line-opacity":.5,"line-width":.7*rt}},P&1&&{layout:{visibility:A[0]?"visible":"none"}}]):{};a.$set(j)},i(A){f||(m(e.$$.fragment,A),m(t.$$.fragment,A),m(o.$$.fragment,A),m(u.$$.fragment,A),m(a.$$.fragment,A),f=!0)},o(A){d(e.$$.fragment,A),d(t.$$.fragment,A),d(o.$$.fragment,A),d(u.$$.fragment,A),d(a.$$.fragment,A),f=!1},d(A){A&&(g(n),g(l),g(i),g(s)),v(e,A),v(t,A),v(o,A),v(u,A),v(a,A)}}}function n$(r){let e,n;return e=new dt({props:{data:r[2],$$slots:{default:[t$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&4&&(o.data=t[2]),l&259&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function r$(r,e,n){let t,l;ge(r,gt,f=>n(6,l=f));let{showSchemes:o}=e,{filterText:i}=e,u=wr("v1");const s=["!=","hide_while_editing",!0],a=["!=","endpoint",!0];return r.$$set=f=>{"showSchemes"in f&&n(0,o=f.showSchemes),"filterText"in f&&n(1,i=f.filterText)},r.$$.update=()=>{r.$$.dirty&64&&n(2,t=Zr(l))},[o,i,t,u,s,a,l]}class l$ extends G{constructor(e){super(),z(this,e,r$,n$,W,{showSchemes:0,filterText:1})}}function pr(r,e,n){const t=r.slice();return t[13]=e[n],t}function o$(r){let e,n;return e=new Hc({props:{loadFile:r[8]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mr(r){let e,n,t,l,o;function i(f){r[9](f)}function u(f){r[10](f)}function s(f){r[11](f)}let a={schemes:r[1]};return r[2]!==void 0&&(a.schemesToBeShown=r[2]),r[3]!==void 0&&(a.filterText=r[3]),r[4]!==void 0&&(a.show=r[4]),e=new js({props:a}),X.push(()=>Q(e,"schemesToBeShown",i)),X.push(()=>Q(e,"filterText",u)),X.push(()=>Q(e,"show",s)),{c(){h(e.$$.fragment)},m(f,c){b(e,f,c),o=!0},p(f,c){const $={};c&2&&($.schemes=f[1]),!n&&c&4&&(n=!0,$.schemesToBeShown=f[2],x(()=>n=!1)),!t&&c&8&&(t=!0,$.filterText=f[3],x(()=>t=!1)),!l&&c&16&&(l=!0,$.show=f[4],x(()=>l=!1)),e.$set($)},i(f){o||(m(e.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),o=!1},d(f){v(e,f)}}}function _r(r){let e,n;return e=new qc({props:{scheme:r[13],authorityNames:r[7]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.scheme=t[13]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gr(r){let e=r[2].has(r[13].scheme_reference),n,t,l=e&&_r(r);return{c(){l&&l.c(),n=ve()},m(o,i){l&&l.m(o,i),_(o,n,i),t=!0},p(o,i){i&6&&(e=o[2].has(o[13].scheme_reference)),e?l?(l.p(o,i),i&6&&m(l,1)):(l=_r(o),l.c(),m(l,1),l.m(n.parentNode,n)):l&&(ie(),d(l,1,1,()=>{l=null}),ae())},i(o){t||(m(l),t=!0)},o(o){d(l),t=!1},d(o){o&&g(n),l&&l.d(o)}}}function s$(r){let e,n,t,l,o,i,u,s,a,f,c=fn()=="Private (development)",$,p,C,y,S,T,E,F;o=new sl({props:{boundaryGeojson:r[5]}}),u=new yl({}),a=new Qr({});let M=c&&o$(r);p=new al({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[8]}}),y=new vr({props:{errorMessage:r[0]}});let A=r[1].size>0&&mr(r),P=Ie(r[1].values()),N=[];for(let D=0;D<P.length;D+=1)N[D]=gr(pr(r,P,D));const I=D=>d(N[D],1,1,()=>{N[D]=null});return{c(){e=O("div"),n=O("div"),t=O("h1"),t.textContent="Browse schemes",l=L(),h(o.$$.fragment),i=L(),h(u.$$.fragment),s=L(),h(a.$$.fragment),f=L(),M&&M.c(),$=L(),h(p.$$.fragment),C=L(),h(y.$$.fragment),S=L(),A&&A.c(),T=L(),E=O("ul");for(let D=0;D<N.length;D+=1)N[D].c();Te(n,"display","flex"),Te(n,"justify-content","space-between"),K(e,"slot","sidebar"),K(e,"class","govuk-prose")},m(D,R){_(D,e,R),k(e,n),k(n,t),k(n,l),b(o,n,null),k(e,i),b(u,e,null),k(e,s),b(a,e,null),k(e,f),M&&M.m(e,null),k(e,$),b(p,e,null),k(e,C),b(y,e,null),k(e,S),A&&A.m(e,null),k(e,T),k(e,E);for(let j=0;j<N.length;j+=1)N[j]&&N[j].m(E,null);F=!0},p(D,R){const j={};R&32&&(j.boundaryGeojson=D[5]),o.$set(j),c&&M.p(D,R);const se={};if(R&1&&(se.errorMessage=D[0]),y.$set(se),D[1].size>0?A?(A.p(D,R),R&2&&m(A,1)):(A=mr(D),A.c(),m(A,1),A.m(e,T)):A&&(ie(),d(A,1,1,()=>{A=null}),ae()),R&134){P=Ie(D[1].values());let ee;for(ee=0;ee<P.length;ee+=1){const we=pr(D,P,ee);N[ee]?(N[ee].p(we,R),m(N[ee],1)):(N[ee]=gr(we),N[ee].c(),m(N[ee],1),N[ee].m(E,null))}for(ie(),ee=P.length;ee<N.length;ee+=1)I(ee);ae()}},i(D){if(!F){m(o.$$.fragment,D),m(u.$$.fragment,D),m(a.$$.fragment,D),m(M),m(p.$$.fragment,D),m(y.$$.fragment,D),m(A);for(let R=0;R<P.length;R+=1)m(N[R]);F=!0}},o(D){d(o.$$.fragment,D),d(u.$$.fragment,D),d(a.$$.fragment,D),d(M),d(p.$$.fragment,D),d(y.$$.fragment,D),d(A),N=N.filter(Boolean);for(let R=0;R<N.length;R+=1)d(N[R]);F=!1},d(D){D&&g(e),v(o),v(u),v(a),M&&M.d(),v(p),v(y),A&&A.d(),Ft(N,D)}}}function i$(r){let e,n,t,l,o;return e=new l$({props:{filterText:r[3],showSchemes:r[4]}}),l=new jc({}),{c(){h(e.$$.fragment),n=L(),t=O("div"),h(l.$$.fragment),K(t,"class","top-right svelte-u44ed2")},m(i,u){b(e,i,u),_(i,n,u),_(i,t,u),b(l,t,null),o=!0},p(i,u){const s={};u&8&&(s.filterText=i[3]),u&16&&(s.showSchemes=i[4]),e.$set(s)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&(g(n),g(t)),v(e,i),v(l)}}}function a$(r){let e,n,t;return n=new xr({props:{style:r[6],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[i$]},$$scope:{ctx:r}}}),{c(){e=O("div"),h(n.$$.fragment),K(e,"slot","main")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.style=l[6]),o&65560&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function f$(r){let e,n;return e=new rl({props:{$$slots:{main:[a$],sidebar:[s$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&65663&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function u$(r,e,n){let t,l;ge(r,gt,S=>n(5,t=S)),ge(r,kn,S=>n(6,l=S));let o=new Set(Vc);Ot(()=>{el()});const i=new URLSearchParams(window.location.search);kn.set(i.get("style")||"dataviz");let u="",s=new Map,a=new Set,f="",c=!0;function $(S){try{gt.set(JSON.parse(S)),n(1,s=Cs(t)),n(0,u="")}catch(T){n(0,u=`The file you loaded is broken: ${T}`)}}function p(S){a=S,n(2,a)}function C(S){f=S,n(3,f)}function y(S){c=S,n(4,c)}return[u,s,a,f,c,t,l,o,$,p,C,y]}class c$ extends G{constructor(e){super(),z(this,e,u$,f$,W,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new c$({target:document.getElementById("app")});
