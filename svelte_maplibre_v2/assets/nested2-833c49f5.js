import{S as z,i as q,s as G,M as zr,g as K,h as ee,j as A,k as L,n as h,aB as qr,p as J,q as _,r as y,t as b,C as vt,u as te,v as m,w as d,y as g,z as v,aN as kt,aO as yt,aP as St,aQ as Ct,a5 as Ce,G as ae,x as fe,aW as Ze,c as de,e as un,aX as xt,aY as Vr,D as re,aZ as Xr,a_ as Kr,o as Tt,a$ as it,A as w,l as cn,as as Yr,m as It,au as en,X as wt,F as kr,f as Pt,B as dn,N as W,d as tn,aG as Jr,aD as We,aR as Zr,aS as Qr,T as H,U as Z,V as Q,W as x,a0 as nn,af as xr,aV as Y,at as De,aE as Rt,b0 as pe,b1 as ve,R as yr,b2 as pn,b3 as $n,E as Sr,a as hn,J as el,aK as bn,a4 as tl,a3 as vn,a2 as wn,a1 as jt,aU as kn,L as nl,H as rl}from"./index-15449a23.js";import{g as Cr,u as ll,e as ol,m as sl,f as Wt,C as Ne,b as Dt,d as ie,c as Ut,a as Gt,B as il,S as al,l as at,L as fl,M as ul}from"./StreetViewController-b8a3938b.js";import{j as cl,h as pl,i as yn,f as Tr,G as Ot,L as $e,l as $l,k as ne,F as qe,m as Te,C as Qe,Z as ml}from"./index-b5e70f8c.js";import{F as _l}from"./FileInput-e2e488e7.js";const gl="/atip/svelte_maplibre_v2/assets/help-d011708a.svg";function dl(r){let e,n;const t=r[1].default,l=kt(t,r,r[4],null);return{c(){e=A("div"),l&&l.c(),J(e,"class","govuk-prose")},m(o,i){_(o,e,i),l&&l.m(e,null),n=!0},p(o,i){l&&l.p&&(!n||i&16)&&yt(l,t,o,o[4],n?Ct(t,o[4],i,null):St(o[4]),null)},i(o){n||(m(l,o),n=!0)},o(o){d(l,o),n=!1},d(o){o&&g(e),l&&l.d(o)}}}function hl(r){let e,n,t,l,o,i,f,s,a;function u(p){r[3](p)}let c={title:"Help",$$slots:{default:[dl]},$$scope:{ctx:r}};return r[0]!==void 0&&(c.open=r[0]),o=new zr({props:c}),K.push(()=>ee(o,"open",u)),{c(){e=A("button"),n=A("img"),l=L(),h(o.$$.fragment),qr(n.src,t=gl)||J(n,"src",t),J(n,"title","Help"),J(n,"alt","Help"),J(e,"class","svelte-7d9d1l")},m(p,$){_(p,e,$),y(e,n),_(p,l,$),b(o,p,$),f=!0,s||(a=vt(e,"click",r[2]),s=!0)},p(p,[$]){const C={};$&16&&(C.$$scope={dirty:$,ctx:p}),!i&&$&1&&(i=!0,C.open=p[0],te(()=>i=!1)),o.$set(C)},i(p){f||(m(o.$$.fragment,p),f=!0)},o(p){d(o.$$.fragment,p),f=!1},d(p){p&&(g(e),g(l)),v(o,p),s=!1,a()}}}function bl(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const i=()=>n(0,o=!0);function f(s){o=s,n(0,o)}return r.$$set=s=>{"$$scope"in s&&n(4,l=s.$$scope)},[o,t,i,f,l]}class ue extends z{constructor(e){super(),q(this,e,bl,hl,G,{})}}function Sn(r){let e=r[0],n,t,l=Cn(r);return{c(){l.c(),n=Ce()},m(o,i){l.m(o,i),_(o,n,i),t=!0},p(o,i){i&1&&G(e,e=o[0])?(ae(),d(l,1,1,re),fe(),l=Cn(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||(m(l),t=!0)},o(o){d(l),t=!1},d(o){o&&g(n),l.d(o)}}}function Cn(r){let e;const n=r[8].default,t=kt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&yt(t,n,l,l[7],e?Ct(n,l[7],o,null):St(l[7]),null)},i(l){e||(m(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function vl(r){let e,n,t=r[0]&&Sn(r);return{c(){t&&t.c(),e=Ce()},m(l,o){t&&t.m(l,o),_(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=Sn(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ae(),d(t,1,1,()=>{t=null}),fe())},i(l){n||(m(t),n=!0)},o(l){d(t),n=!1},d(l){l&&g(e),t&&t.d(l)}}}function wl(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:f=Cr("vector")}=e,{url:s=null}=e,{tiles:a=null}=e;if(s&&s.includes("pmtiles://")&&!Ze.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let p=new Xr;Ze.addProtocol("pmtiles",p.tile)}const{map:u,self:c}=ll();return de(r,u,p=>n(6,t=p)),de(r,c,p=>n(0,l=p)),un(()=>{if(l){let p=l;xt(c,l=null,l),Vr().then(()=>{t!=null&&t.loaded()&&(t==null||t.removeSource(p))})}}),r.$$set=p=>{"id"in p&&n(3,f=p.id),"url"in p&&n(4,s=p.url),"tiles"in p&&n(5,a=p.tiles),"$$scope"in p&&n(7,i=p.$$scope)},r.$$.update=()=>{r.$$.dirty&121&&t&&l!==f&&(l&&t.removeSource(l),xt(c,l=f,l),t.addSource(l,ol({type:"vector",url:s,tiles:a})))},[l,u,c,f,s,a,t,i,o]}class he extends z{constructor(e){super(),q(this,e,wl,vl,G,{id:3,url:4,tiles:5})}}const kl=r=>({features:r[0]&16,data:r[0]&16,map:r[0]&4,close:r[0]&1}),Tn=r=>{var e;return{features:r[4],data:(e=r[4])==null?void 0:e[0],map:r[2],close:r[29]}};function On(r){let e,n,t=(r[4]||r[3]instanceof Ze.Marker)&&Ln(r);return{c(){e=A("div"),t&&t.c()},m(l,o){_(l,e,o),t&&t.m(e,null),r[30](e),n=!0},p(l,o){l[4]||l[3]instanceof Ze.Marker?t?(t.p(l,o),o[0]&24&&m(t,1)):(t=Ln(l),t.c(),m(t,1),t.m(e,null)):t&&(ae(),d(t,1,1,()=>{t=null}),fe())},i(l){n||(m(t),n=!0)},o(l){d(t),n=!1},d(l){l&&g(e),t&&t.d(),r[30](null)}}}function Ln(r){let e;const n=r[28].default,t=kt(n,r,r[27],Tn);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o[0]&134217749)&&yt(t,n,l,l[27],e?Ct(n,l[27],o,kl):St(l[27]),Tn)},i(l){e||(m(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function yl(r){let e,n,t=r[8].default&&On(r);return{c(){t&&t.c(),e=Ce()},m(l,o){t&&t.m(l,o),_(l,e,o),n=!0},p(l,o){l[8].default?t?(t.p(l,o),o[0]&256&&m(t,1)):(t=On(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ae(),d(t,1,1,()=>{t=null}),fe())},i(l){n||(m(t),n=!0)},o(l){d(t),n=!1},d(l){l&&g(e),t&&t.d(l)}}}function Sl(r,e,n){let t,l,o,i,f,{$$slots:s={},$$scope:a}=e;const u=Kr(s);let{closeButton:c=void 0}=e,{closeOnClickOutside:p=!0}=e,{closeOnClickInside:$=!1}=e,{closeOnMove:C=!1}=e,{openOn:k="click"}=e,{focusAfterOpen:S=!0}=e,{anchor:T=void 0}=e,{offset:N=void 0}=e,{popupClass:D=void 0}=e,{maxWidth:F=void 0}=e,{lngLat:O=void 0}=e,{html:E=void 0}=e,{open:P=!1}=e;const{map:I,popupTarget:M,layerEvent:R}=sl();de(r,I,B=>n(2,o=B)),de(r,M,B=>n(3,f=B)),de(r,R,B=>n(26,i=B));const j=["click","dblclick","contextmenu"];let U,X=!1,ce;function tt(){if(!U)return;let B=U.getElement();!B||B===ce||(ce=B,k==="hover"&&(ce.style.pointerEvents="none"),ce.addEventListener("mouseenter",()=>{n(22,X=!0)},{passive:!0}),ce.addEventListener("mouseleave",()=>{n(22,X=!1)},{passive:!0}),ce.addEventListener("click",()=>{$&&n(0,P=!1)},{passive:!0}))}Tt(()=>{if(o)return o.on("click",Me),typeof f=="string"&&(o.on("click",f,we),o.on("dblclick",f,we),o.on("contextmenu",f,we),o.on("mousemove",f,Le),o.on("mouseleave",f,Oe),o.on("touchstart",f,_e),o.on("touchend",f,Xe)),()=>{o!=null&&o.loaded()&&(U==null||U.remove(),o.off("click",Me),f instanceof Ze.Marker?f.getPopup()===U&&f.setPopup(void 0):typeof f=="string"&&(o.off("click",f,we),o.off("dblclick",f,we),o.off("contextmenu",f,we),o.off("mousemove",f,Le),o.off("mouseleave",f,Oe),o.off("touchstart",f,_e),o.off("touchend",f,Xe)))}});let se=null,me="normal";function we(B){B.type===k&&("layerType"in B?B.layerType==="deckgl"?(n(9,O=B.coordinate),n(4,se=B.object?[B.object]:null)):(n(9,O=B.lngLat),n(4,se=B.features??[])):(n(9,O=B.lngLat),n(4,se=B.features??[])),setTimeout(()=>n(0,P=!0)))}let ke=null;function _e(B){ke=B.point}function Xe(B){if(!ke||k!=="hover")return;let ge=ke.dist(B.point);ke=null,ge<3&&(n(9,O=B.lngLat),n(4,se=B.features??[]),U.isOpen()?n(23,me="justOpened"):(n(23,me="opening"),n(0,P=!0)))}function Oe(B){k!=="hover"||ke||me!=="normal"||(n(0,P=!1),n(4,se=null))}function Le(B){k!=="hover"||ke||me!=="normal"||(n(0,P=!0),n(4,se=B.features??[]),n(9,O=B.lngLat))}function Me(B){if(me==="justOpened"){n(23,me="normal");return}if(!p)return;let ge=[ce,f instanceof Ze.Marker?f==null?void 0:f.getElement():null];P&&U.isOpen()&&!ge.some(be=>be==null?void 0:be.contains(B.originalEvent.target))&&n(0,P=!1)}let Ae;const Ke=()=>n(0,P=!1);function ze(B){K[B?"unshift":"push"](()=>{Ae=B,n(1,Ae)})}return r.$$set=B=>{"closeButton"in B&&n(10,c=B.closeButton),"closeOnClickOutside"in B&&n(11,p=B.closeOnClickOutside),"closeOnClickInside"in B&&n(12,$=B.closeOnClickInside),"closeOnMove"in B&&n(13,C=B.closeOnMove),"openOn"in B&&n(14,k=B.openOn),"focusAfterOpen"in B&&n(15,S=B.focusAfterOpen),"anchor"in B&&n(16,T=B.anchor),"offset"in B&&n(17,N=B.offset),"popupClass"in B&&n(18,D=B.popupClass),"maxWidth"in B&&n(19,F=B.maxWidth),"lngLat"in B&&n(9,O=B.lngLat),"html"in B&&n(20,E=B.html),"open"in B&&n(0,P=B.open),"$$scope"in B&&n(27,a=B.$$scope)},r.$$.update=()=>{if(r.$$.dirty[0]&7168&&n(25,t=c??(!p&&!$)),r.$$.dirty[0]&36675584&&(U||(n(21,U=new Ze.Popup({closeButton:t,closeOnClick:!1,closeOnMove:C,focusAfterOpen:S,maxWidth:F,className:D,anchor:T,offset:N})),ce=U.getElement(),U.on("open",()=>{n(0,P=!0),tt()}),U.on("close",B=>{n(0,P=!1)}))),r.$$.dirty[0]&2113544&&U&&f instanceof Ze.Marker&&(k==="click"?f.setPopup(U):f.getPopup()===U&&f.setPopup(void 0)),r.$$.dirty[0]&67125248&&j.includes(k)&&(i==null?void 0:i.type)===k&&(we(i),xt(R,i=null,i)),r.$$.dirty[0]&67125248&&n(24,l=k==="hover"&&((i==null?void 0:i.type)==="mousemove"||(i==null?void 0:i.type)==="mouseenter")),r.$$.dirty[0]&88096768&&k==="hover"&&R&&(l&&i&&(i.layerType==="deckgl"?(n(9,O=i.coordinate),n(4,se=i.object?[i.object]:null)):(n(9,O=i.lngLat),n(4,se=i.features??[]))),n(0,P=(l||X)??!1)),r.$$.dirty[0]&3145730&&(Ae?U.setDOMContent(Ae):E&&U.setHTML(E)),r.$$.dirty[0]&2097664&&O&&U.setLngLat(O),r.$$.dirty[0]&10485765&&o){let B=U.isOpen();P&&!B?(U.addTo(o),me==="opening"&&n(23,me="justOpened")):!P&&B&&U.remove()}},[P,Ae,o,f,se,I,M,R,u,O,c,p,$,C,k,S,T,N,D,F,E,U,X,me,l,t,i,a,s,Ke,ze]}class Cl extends z{constructor(e){super(),q(this,e,Sl,yl,G,{closeButton:10,closeOnClickOutside:11,closeOnClickInside:12,closeOnMove:13,openOn:14,focusAfterOpen:15,anchor:16,offset:17,popupClass:18,maxWidth:19,lngLat:9,html:20,open:0},null,[-1,-1])}}function Tl(r){let e;const n=r[15].default,t=kt(n,r,r[23],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&8388608)&&yt(t,n,l,l[23],e?Ct(n,l[23],o,null):St(l[23]),null)},i(l){e||(m(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function Ol(r){let e,n,t;function l(i){r[16](i)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],$$slots:{default:[Tl]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new cl({props:o}),K.push(()=>ee(e,"hovered",l)),e.$on("click",r[17]),e.$on("dblclick",r[18]),e.$on("contextmenu",r[19]),e.$on("mouseenter",r[20]),e.$on("mousemove",r[21]),e.$on("mouseleave",r[22]),{c(){h(e.$$.fragment)},m(i,f){b(e,i,f),t=!0},p(i,[f]){const s={};f&2&&(s.id=i[1]),f&4&&(s.source=i[2]),f&8&&(s.sourceLayer=i[3]),f&16&&(s.beforeId=i[4]),f&32&&(s.beforeLayerType=i[5]),f&64&&(s.paint=i[6]),f&128&&(s.layout=i[7]),f&256&&(s.filter=i[8]),f&512&&(s.applyToClusters=i[9]),f&1024&&(s.minzoom=i[10]),f&2048&&(s.maxzoom=i[11]),f&4096&&(s.hoverCursor=i[12]),f&8192&&(s.manageHoverState=i[13]),f&16384&&(s.eventsIfTopMost=i[14]),f&8388608&&(s.$$scope={dirty:f,ctx:i}),!n&&f&1&&(n=!0,s.hovered=i[0],te(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){d(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Ll(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=Cr("symbol")}=e,{source:i=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{applyToClusters:$=void 0}=e,{minzoom:C=void 0}=e,{maxzoom:k=void 0}=e,{hoverCursor:S=void 0}=e,{manageHoverState:T=!1}=e,{hovered:N=null}=e,{eventsIfTopMost:D=!1}=e;function F(j){N=j,n(0,N)}function O(j){it.call(this,r,j)}function E(j){it.call(this,r,j)}function P(j){it.call(this,r,j)}function I(j){it.call(this,r,j)}function M(j){it.call(this,r,j)}function R(j){it.call(this,r,j)}return r.$$set=j=>{"id"in j&&n(1,o=j.id),"source"in j&&n(2,i=j.source),"sourceLayer"in j&&n(3,f=j.sourceLayer),"beforeId"in j&&n(4,s=j.beforeId),"beforeLayerType"in j&&n(5,a=j.beforeLayerType),"paint"in j&&n(6,u=j.paint),"layout"in j&&n(7,c=j.layout),"filter"in j&&n(8,p=j.filter),"applyToClusters"in j&&n(9,$=j.applyToClusters),"minzoom"in j&&n(10,C=j.minzoom),"maxzoom"in j&&n(11,k=j.maxzoom),"hoverCursor"in j&&n(12,S=j.hoverCursor),"manageHoverState"in j&&n(13,T=j.manageHoverState),"hovered"in j&&n(0,N=j.hovered),"eventsIfTopMost"in j&&n(14,D=j.eventsIfTopMost),"$$scope"in j&&n(23,l=j.$$scope)},[N,o,i,f,s,a,u,c,p,$,C,k,S,T,D,t,F,O,E,P,I,M,R,l]}class Al extends z{constructor(e){super(),q(this,e,Ll,Ol,G,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14})}}const Pl=r=>({props:r&8}),An=r=>({props:Il(r[3])});function El(r){let e,n;const t=r[1].default,l=kt(t,r,r[2],An);return{c(){e=A("div"),l&&l.c(),J(e,"class","govuk-prose")},m(o,i){_(o,e,i),l&&l.m(e,null),n=!0},p(o,i){l&&l.p&&(!n||i&12)&&yt(l,t,o,o[2],n?Ct(t,o[2],i,Pl):St(o[2]),An)},i(o){n||(m(l,o),n=!0)},o(o){d(l,o),n=!1},d(o){o&&g(e),l&&l.d(o)}}}function Nl(r){let e,n;return e=new Cl({props:{openOn:r[0],$$slots:{default:[El,({features:t})=>({3:t}),({features:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.openOn=t[0]),l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Il(r){return r?r[0].properties??{}:{}}function Dl(r,e,n){let{$$slots:t={},$$scope:l}=e,{openOn:o="hover"}=e;return r.$$set=i=>{"openOn"in i&&n(0,o=i.openOn),"$$scope"in i&&n(2,l=i.$$scope)},[o,t,l]}class oe extends z{constructor(e){super(),q(this,e,Dl,Nl,G,{openOn:0})}}function Ml(r){let e;return{c(){e=A("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Fl(r){let e,n,t,l,o=r[0]=="Private (development)"&&Ml();return{c(){o&&o.c(),e=L(),n=A("p"),n.textContent="Note the ATF scheme data has not been validated.",t=L(),l=A("p"),l.innerHTML=`Please contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      about any problems, ideas, or feedback for this site.`},m(i,f){o&&o.m(i,f),_(i,e,f),_(i,n,f),_(i,t,f),_(i,l,f)},p:re,d(i){i&&(g(e),g(n),g(t),g(l)),o&&o.d(i)}}}function jl(r){let e,n,t,l,o,i;return o=new ue({props:{$$slots:{default:[Fl]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("App version: "),t=w(r[0]),l=L(),h(o.$$.fragment)},m(f,s){_(f,e,s),y(e,n),y(e,t),y(e,l),b(o,e,null),i=!0},p(f,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:f}),o.$set(a)},i(f){i||(m(o.$$.fragment,f),i=!0)},o(f){d(o.$$.fragment,f),i=!1},d(f){f&&g(e),v(o)}}}function Bl(r){return[cn()]}class Hl extends z{constructor(e){super(),q(this,e,Bl,jl,G,{})}}const Rl={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var ye=Uint8Array,ot=Uint16Array,Or=Uint32Array,Lr=new ye([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ar=new ye([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Wl=new ye([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Pr=function(r,e){for(var n=new ot(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new Or(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},Er=Pr(Lr,2),Nr=Er[0],Ul=Er[1];Nr[28]=258,Ul[258]=28;var Gl=Pr(Ar,0),zl=Gl[0],rn=new ot(32768);for(var le=0;le<32768;++le){var Ye=(le&43690)>>>1|(le&21845)<<1;Ye=(Ye&52428)>>>2|(Ye&13107)<<2,Ye=(Ye&61680)>>>4|(Ye&3855)<<4,rn[le]=((Ye&65280)>>>8|(Ye&255)<<8)>>>1}var At=function(r,e,n){for(var t=r.length,l=0,o=new ot(e);l<t;++l)r[l]&&++o[r[l]-1];var i=new ot(e);for(l=0;l<e;++l)i[l]=i[l-1]+o[l-1]<<1;var f;if(n){f=new ot(1<<e);var s=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],u=e-r[l],c=i[r[l]-1]++<<u,p=c|(1<<u)-1;c<=p;++c)f[rn[c]>>>s]=a}else for(f=new ot(t),l=0;l<t;++l)r[l]&&(f[l]=rn[i[r[l]-1]++]>>>15-r[l]);return f},Mt=new ye(288);for(var le=0;le<144;++le)Mt[le]=8;for(var le=144;le<256;++le)Mt[le]=9;for(var le=256;le<280;++le)Mt[le]=7;for(var le=280;le<288;++le)Mt[le]=8;var Ir=new ye(32);for(var le=0;le<32;++le)Ir[le]=5;var ql=At(Mt,9,1),Vl=At(Ir,5,1),Vt=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},Pe=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},Xt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},Xl=function(r){return(r+7)/8|0},mn=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?ot:r.BYTES_PER_ELEMENT==4?Or:ye)(n-e);return t.set(r.subarray(e,n)),t},Kl=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ee=function(r,e,n){var t=new Error(e||Kl[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Ee),!n)throw t;return t},Yl=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new ye(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new ye(t*3));var i=function(Ke){var ze=e.length;if(Ke>ze){var B=new ye(Math.max(ze*2,Ke));B.set(e),e=B}},f=n.f||0,s=n.p||0,a=n.b||0,u=n.l,c=n.d,p=n.m,$=n.n,C=t*8;do{if(!u){f=Pe(r,s,1);var k=Pe(r,s+1,3);if(s+=3,k)if(k==1)u=ql,c=Vl,p=9,$=5;else if(k==2){var D=Pe(r,s,31)+257,F=Pe(r,s+10,15)+4,O=D+Pe(r,s+5,31)+1;s+=14;for(var E=new ye(O),P=new ye(19),I=0;I<F;++I)P[Wl[I]]=Pe(r,s+I*3,7);s+=F*3;for(var M=Vt(P),R=(1<<M)-1,j=At(P,M,1),I=0;I<O;){var U=j[Pe(r,s,R)];s+=U&15;var S=U>>>4;if(S<16)E[I++]=S;else{var X=0,ce=0;for(S==16?(ce=3+Pe(r,s,3),s+=2,X=E[I-1]):S==17?(ce=3+Pe(r,s,7),s+=3):S==18&&(ce=11+Pe(r,s,127),s+=7);ce--;)E[I++]=X}}var tt=E.subarray(0,D),se=E.subarray(D);p=Vt(tt),$=Vt(se),u=At(tt,p,1),c=At(se,$,1)}else Ee(1);else{var S=Xl(s)+4,T=r[S-4]|r[S-3]<<8,N=S+T;if(N>t){o&&Ee(0);break}l&&i(a+T),e.set(r.subarray(S,N),a),n.b=a+=T,n.p=s=N*8,n.f=f;continue}if(s>C){o&&Ee(0);break}}l&&i(a+131072);for(var me=(1<<p)-1,we=(1<<$)-1,ke=s;;ke=s){var X=u[Xt(r,s)&me],_e=X>>>4;if(s+=X&15,s>C){o&&Ee(0);break}if(X||Ee(2),_e<256)e[a++]=_e;else if(_e==256){ke=s,u=null;break}else{var Xe=_e-254;if(_e>264){var I=_e-257,Oe=Lr[I];Xe=Pe(r,s,(1<<Oe)-1)+Nr[I],s+=Oe}var Le=c[Xt(r,s)&we],Me=Le>>>4;Le||Ee(3),s+=Le&15;var se=zl[Me];if(Me>3){var Oe=Ar[Me];se+=Xt(r,s)&(1<<Oe)-1,s+=Oe}if(s>C){o&&Ee(0);break}l&&i(a+131072);for(var Ae=a+Xe;a<Ae;a+=4)e[a]=e[a-se],e[a+1]=e[a+1-se],e[a+2]=e[a+2-se],e[a+3]=e[a+3-se];a=Ae}}n.l=u,n.p=ke,n.b=a,n.f=f,u&&(f=1,n.m=p,n.d=c,n.n=$)}while(!f);return a==e.length?e:mn(e,0,a)},Jl=new ye(0),Re=function(r,e){return r[e]|r[e+1]<<8},Ie=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},Kt=function(r,e){return Ie(r,e)+Ie(r,e+4)*4294967296};function Zl(r,e){return Yl(r,e)}var ln=typeof TextDecoder<"u"&&new TextDecoder,Ql=0;try{ln.decode(Jl,{stream:!0}),Ql=1}catch{}var xl=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,mn(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function Dr(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(ln)return ln.decode(r);var l=xl(r),o=l[0],i=l[1];return i.length&&Ee(8),o}}var eo=function(r,e){return e+30+Re(r,e+26)+Re(r,e+28)},to=function(r,e,n){var t=Re(r,e+28),l=Dr(r.subarray(e+46,e+46+t),!(Re(r,e+8)&2048)),o=e+46+t,i=Ie(r,e+20),f=n&&i==4294967295?no(r,o):[i,Ie(r,e+24),Ie(r,e+42)],s=f[0],a=f[1],u=f[2];return[Re(r,e+10),s,a,l,o+Re(r,e+30)+Re(r,e+32),u]},no=function(r,e){for(;Re(r,e)!=1;e+=4+Re(r,e+2));return[Kt(r,e+12),Kt(r,e+4),Kt(r,e+20)]};function ro(r,e){for(var n={},t=r.length-22;Ie(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Ee(13);var l=Re(r,t+8);if(!l)return{};var o=Ie(r,t+16),i=o==4294967295||l==65535;if(i){var f=Ie(r,t-12);i=Ie(r,f)==101075792,i&&(l=Ie(r,f+32),o=Ie(r,f+48))}for(var s=e&&e.filter,a=0;a<l;++a){var u=to(r,o,i),c=u[0],p=u[1],$=u[2],C=u[3],k=u[4],S=u[5],T=eo(r,S);o=k,(!s||s({name:C,size:p,originalSize:$,compression:c}))&&(c?c==8?n[C]=Zl(r.subarray(T,T+p),new ye($)):Ee(14,"unknown compression type "+c):n[C]=mn(r,T,T+p))}return n}function lo(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(Yt):Yt(r)}function Yt(r){var e=new Uint8Array(r),n=ro(e);return Promise.resolve(oo(n))}function oo(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=Dr(r[l])}return e}function Ue(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&st(t)===e)return t;n++}}function Ft(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&st(l)===e&&n.push(l),t++}return n}function zt(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&st(l)===e&&n(l,t):n(l,t),t++}}function so(r,e,n){var t=[];return zt(r,e,function(l,o){t.push(n(l,o))}),t}var io=/.+\:/;function st(r){return r.tagName.replace(io,"")}function Mr(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+st(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=Mr(r.childNodes[t]),t++;return e+="</"+st(r)+">",e}function ao(r){var e=r.documentElement,n=Ue(e,"sheetData"),t=[];return zt(n,"row",function(l){zt(l,"c",function(o){t.push(o)})}),t}function fo(r,e){return Ue(e,"v")}function uo(r,e){if(e.firstChild&&st(e.firstChild)==="is"&&e.firstChild.firstChild&&st(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function co(r){var e=r.documentElement,n=Ue(e,"dimension");if(n)return n.getAttribute("ref")}function po(r){var e=r.documentElement,n=Ue(e,"cellStyleXfs");return n?Ft(n,"xf"):[]}function $o(r){var e=r.documentElement,n=Ue(e,"cellXfs");return n?Ft(n,"xf"):[]}function mo(r){var e=r.documentElement,n=Ue(e,"numFmts");return n?Ft(n,"numFmt"):[]}function _o(r){var e=r.documentElement;return so(e,"si",function(n){var t=Ue(n,"t");if(t)return t.textContent;var l="";return zt(n,"r",function(o){l+=Ue(o,"t").textContent}),l})}function go(r){var e=r.documentElement;return Ue(e,"workbookPr")}function ho(r){var e=r.documentElement;return Ft(e,"Relationship")}function bo(r){var e=r.documentElement,n=Ue(e,"sheets");return Ft(n,"sheet")}function vo(r,e){var n=e.createDocument(r),t={},l=go(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(f){f.getAttribute("name")&&t.sheets.push({id:f.getAttribute("sheetId"),name:f.getAttribute("name"),relationId:f.getAttribute("r:id")})};return bo(n).forEach(o),t}function wo(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(i){var f=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=Jt(f);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=Jt(f);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=Jt(f);break}};return ho(n).forEach(l),t}function Jt(r){return r[0]==="/"?r.slice(1):"xl/"+r}function Pn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function En(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Pn(Object(n),!0).forEach(function(t){ko(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function ko(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function yo(r,e){if(!r)return{};var n=e.createDocument(r),t=po(n).map(Zt),l=mo(n).map(So).reduce(function(i,f){return i[f.id]=f,i},[]),o=function(f){return f.hasAttribute("xfId")?En(En({},t[f.xfId]),Zt(f,l)):Zt(f,l)};return $o(n).map(o)}function So(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function Zt(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function Co(r,e){return r?_o(e.createDocument(r)):[]}function Fr(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function To(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Oo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oo(r,e){if(r){if(typeof r=="string")return Nn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nn(r,e)}}function Nn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Lo(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(Ao.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&No(l.numberFormat.template))return!0}}var Ao=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],Po=/^\[\$-414\]/,Eo=/;@$/;function No(r){r=r.toLowerCase(),r=r.replace(Po,""),r=r.replace(Eo,"");for(var e=r.split(/\W+/),n=To(e),t;!(t=n()).done;){var l=t.value;if(Io.indexOf(l)<0)return!1}return!0}var Io=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function Do(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,i=n.styles,f=n.values,s=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=Qt(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=Qt(r,a);break;case"s":var u=Number(r);if(isNaN(u))throw new Error('Invalid "shared" string index: '.concat(r));if(u>=f.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=f[u],r=Qt(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=Mo(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var p=Number(r);if(isNaN(p))throw new Error('Invalid "numeric" cell value: '.concat(r));r=p,Lo(r,o(),i,a)&&(r=Fr(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function Mo(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function Qt(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var Fo=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function jo(r){var e=function(a,u){return a-u},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),l=n[0],o=n[n.length-1],i=t[0],f=t[t.length-1];return[{row:l,column:i},{row:o,column:f}]}function Bo(r){for(var e=0,n=0;n<r.length;)e*=26,e+=Fo.indexOf(r[n]),n++;return e}function jr(r){return r=r.split(/(\d+)/),[parseInt(r[1]),Bo(r[0].trim())]}function Ho(r,e,n,t,l,o,i){var f=jr(r.getAttribute("r")),s=fo(e,r),a=s&&s.textContent,u;return r.hasAttribute("t")&&(u=r.getAttribute("t")),{row:f[0],column:f[1],value:Do(a,u,{getInlineStringValue:function(){return uo(e,r)},getInlineStringXml:function(){return Mr(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:i})}}function Ro(r,e,n,t,l,o){var i=ao(r);return i.length===0?[]:i.map(function(f){return Ho(f,r,e,n,t,l,o)})}function Wo(r,e){return qo(r)||zo(r,e)||Go(r,e)||Uo()}function Uo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Go(r,e){if(r){if(typeof r=="string")return In(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return In(r,e)}}function In(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function zo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,f;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,f=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function qo(r){if(Array.isArray(r))return r}function Vo(r){var e=co(r);if(e)return e=e.split(":").map(jr).map(function(n){var t=Wo(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Xo(r,e,n,t,l,o){var i=e.createDocument(r),f=Ro(i,e,n,t,l,o),s=Vo(i)||jo(f);return{cells:f,dimensions:s}}function Ko(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Yo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yo(r,e){if(r){if(typeof r=="string")return Dn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dn(r,e)}}function Dn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Jo(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var f=!0,s=Ko(r[i]),a;!(a=s()).done;){var u=a.value;if(l(u)!==null){f=!1;break}}if(f)r.splice(i,1),n&&n.splice(i,1);else if(o)break;i--}return r}function Zo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Qo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qo(r,e){if(r){if(typeof r=="string")return Mn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mn(r,e)}}function Mn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function xo(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var i=!0,f=Zo(r),s;!(s=f()).done;){var a=s.value;if(t(a[o])!==null){i=!1;break}}if(i)for(var u=0;u<r.length;)r[u].splice(o,1),u++;else if(l)break;o--}return r}function es(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Br(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ts(r,e){return ls(r)||rs(r,e)||Br(r,e)||ns()}function ns(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Br(r,e){if(r){if(typeof r=="string")return Fn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fn(r,e)}}function Fn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function rs(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,f;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,f=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function ls(r){if(Array.isArray(r))return r}function os(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=ts(n,2);l[0];for(var o=l[1],i=o.column,f=o.row,s=new Array(f),a=0;a<f;){s[a]=new Array(i);for(var u=0;u<i;)s[a][u]=null,u++;a++}for(var c=es(t),p;!(p=c()).done;){var $=p.value,C=$.row-1,k=$.column-1;k<i&&C<f&&(s[C][k]=$.value)}var S=e.rowMap;if(S)for(var T=0;T<s.length;)S[T]=T,T++;return s=Jo(xo(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:S}),e.transformData&&(s=e.transformData(s)),s}function ss(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=is(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function is(r,e){if(r){if(typeof r=="string")return jn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jn(r,e)}}function jn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Bn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function as(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bn(Object(n),!0).forEach(function(t){fs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Bn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function fs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function us(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=as({sheet:1},n));var t=function(p){if(!r[p])throw new Error('"'.concat(p,'" file not found inside the *.xlsx file zip archive'));return r[p]},l=wo(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?Co(t(l.sharedStrings),e):[],i=l.styles?yo(t(l.styles),e):{},f=vo(t("xl/workbook.xml"),e);if(n.getSheets)return f.sheets.map(function(c){var p=c.name;return{name:p}});var s=cs(n.sheet,f.sheets);if(!s||!l.sheets[s])throw ps(n.sheet,f.sheets);var a=Xo(t(l.sheets[s]),e,o,i,f,n),u=os(a,n);return n.properties?{data:u,properties:f}:u}function cs(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=ss(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function ps(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function on(r){"@babel/helpers - typeof";return on=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},on(r)}function Hn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function $s(r,e,n){return e&&Hn(r.prototype,e),n&&Hn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function ms(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _s(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Et(r,e)}function gs(r){var e=Hr();return function(){var t=Nt(r),l;if(e){var o=Nt(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return ds(this,l)}}function ds(r,e){if(e&&(on(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hs(r)}function hs(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function sn(r){var e=typeof Map=="function"?new Map:void 0;return sn=function(t){if(t===null||!bs(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Ht(t,arguments,Nt(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Et(l,t)},sn(r)}function Ht(r,e,n){return Hr()?Ht=Reflect.construct:Ht=function(l,o,i){var f=[null];f.push.apply(f,o);var s=Function.bind.apply(l,f),a=new s;return i&&Et(a,i.prototype),a},Ht.apply(null,arguments)}function Hr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function bs(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Et(r,e){return Et=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},Et(r,e)}function Nt(r){return Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Nt(r)}var Se=function(r){_s(n,r);var e=gs(n);function n(t){var l;return ms(this,n),l=e.call(this,"invalid"),l.reason=t,l}return $s(n)}(sn(Error));function vs(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new Se("not_a_number")}if(typeof r!="number")throw new Se("not_a_number");if(isNaN(r))throw new Se("invalid_number");if(!isFinite(r))throw new Se("out_of_bounds");return r}function ws(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new Se("invalid_number");if(!isFinite(r))throw new Se("out_of_bounds");return String(r)}throw new Se("not_a_string")}function ks(r){if(typeof r=="boolean")return r;throw new Se("not_a_boolean")}function ys(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new Se("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new Se("invalid_number");if(!isFinite(r))throw new Se("out_of_bounds");var t=Fr(r,n);if(isNaN(t.valueOf()))throw new Se("out_of_bounds");return t}throw new Se("not_a_date")}function Ss(r,e){return Os(r)||Ts(r,e)||Rr(r,e)||Cs()}function Cs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ts(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,f;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,f=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function Os(r){if(Array.isArray(r))return r}function an(r){"@babel/helpers - typeof";return an=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},an(r)}function Ls(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Rr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rr(r,e){if(r){if(typeof r=="string")return Rn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rn(r,e)}}function Rn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Wn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Un(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wn(Object(n),!0).forEach(function(t){As(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function As(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Gn={isColumnOriented:!1};function Ps(r,e,n){n?n=Un(Un({},Gn),n):n=Gn;var t=n,l=t.isColumnOriented,o=t.rowMap,i=t.ignoreEmptyRows;Ds(e),l&&(r=Is(r));for(var f=r[0],s=[],a=[],u=1;u<r.length;u++){var c=Wr(e,r[u],u,f,a,n);(c!==null||i===!1)&&s.push(c)}if(o)for(var p=Ls(a),$;!($=p()).done;){var C=$.value;C.row=o[C.row-1]+1}return{rows:s,errors:a}}function Wr(r,e,n,t,l,o){for(var i={},f=!0,s=function(){var p=u[a],$=r[p],C=an($.type)==="object"&&!Array.isArray($.type),k=e[t.indexOf(p)];k===void 0&&(k=null);var S=void 0,T=void 0,N=void 0;if(C)S=Wr($.type,e,n,t,l,o);else if(k===null)S=null;else if(Array.isArray($.type)){var D=!1,F=Ns(k).map(function(E){var P=zn(E,$,o);return P.error&&(S=E,T=P.error,N=P.reason),P.value!==null&&(D=!0),P.value});T||(S=D?F:null)}else{var O=zn(k,$,o);T=O.error,N=O.reason,S=T?k:O.value}!T&&S===null&&$.required&&(T="required"),T?(T={error:T,row:n+1,column:p,value:S},N&&(T.reason=N),$.type&&(T.type=$.type),l.push(T)):(f&&S!==null&&(f=!1),(S!==null||o.includeNullValues)&&(i[$.prop]=S))},a=0,u=Object.keys(r);a<u.length;a++)s();return f?null:i}function zn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=ft(r,e.parse):e.type?t=Es(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function ft(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function Es(r,e,n){switch(e){case String:return ft(r,ws);case Number:return ft(r,vs);case Date:return ft(r,function(t){return ys(t,{properties:n.properties})});case Boolean:return ft(r,ks);default:if(typeof e=="function")return ft(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Ur(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var i=Ur(r,'"',n+t+1);l+=i[0],t+=1+i[1]+1}else l+=o,t++}return[l,t]}function Ns(r){for(var e=[],n=0;n<r.length;){var t=Ur(r,",",n),l=Ss(t,2),o=l[0],i=l[1];n+=i+1,e.push(o.trim())}return e}var Is=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function Ds(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function fn(r){"@babel/helpers - typeof";return fn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fn(r)}function Gr(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],i=void 0;fn(o)==="object"&&(o=Object.keys(r[l])[0],i=Gr(r[l][o])),e[l]={prop:o},i&&(e[l].type=i)}return e}var Ms=["schema","map"];function qn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Bt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qn(Object(n),!0).forEach(function(t){Fs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):qn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Fs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function js(r,e){if(r==null)return{};var n=Bs(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function Bs(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function Hs(r,e,n){var t=n.schema,l=n.map,o=js(n,Ms);!t&&l&&(t=Gr(l));var i=us(r,e,Bt(Bt({},o),{},{properties:t||o.properties}));return t?Ps(i.data,t,Bt(Bt({},o),{},{properties:i.properties})):i}function Rs(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return lo(r).then(function(n){return Hs(n,Rl,e)})}function Ws(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,{scheme_reference:t,num_features:0,authority_or_region:l.authority_or_region,capital_scheme_id:l.capital_scheme_id,funding_programme:l.funding_programme});let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.num_features++,t.properties.funding_programme=l.funding_programme,t.id=n++}return e}async function Us(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Rs(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=Yr(l.lat_lon.split(",").map(parseFloat).reverse()),i=l;i.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const V={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"},Ge=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Gs(r){let e,n,t,l,o;function i(s){r[3](s)}let f={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return r[0]!==void 0&&(f.value=r[0]),e=new Wt({props:f}),K.push(()=>ee(e,"value",i)),e.$on("change",r[2]),l=new pl({props:{rows:r[1]}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const u={};!n&&a&1&&(n=!0,u.value=s[0],te(()=>n=!1)),e.$set(u);const c={};a&2&&(c.rows=s[1]),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}function zs(r,e,n){let t;de(r,It,s=>n(4,t=s));let l="interventionType",o=yn("v1");function i(){let s;l=="interventionType"?(s=Tr("v1"),n(1,o=yn("v1"))):(s=en(["get","funding_programme"],{ATF2:V.atf2,ATF3:V.atf3,ATF4:V.atf4},"grey"),n(1,o=[["ATF2",V.atf2],["ATF3",V.atf3],["ATF4",V.atf4]])),t.setPaintProperty("interventions-points","circle-color",s),t.setPaintProperty("interventions-lines","line-color",s),t.setPaintProperty("interventions-polygons","fill-color",s),t.setPaintProperty("interventions-polygons-outlines","line-color",s)}function f(s){l=s,n(0,l)}return[l,o,i,f]}class qs extends z{constructor(e){super(),q(this,e,zs,Gs,G,{})}}function Vs(r){let e;return{c(){e=w("Clear")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Xs(r){let e,n,t,l,o,i;return t=new Pt({props:{$$slots:{default:[Vs]},$$scope:{ctx:r}}}),t.$on("click",r[12]),{c(){e=A("input"),n=L(),h(t.$$.fragment),J(e,"type","text"),J(e,"class","govuk-input govuk-input--width-10"),J(e,"id","filterText")},m(f,s){_(f,e,s),dn(e,r[0]),_(f,n,s),b(t,f,s),l=!0,o||(i=vt(e,"input",r[11]),o=!0)},p(f,s){s&1&&e.value!==f[0]&&dn(e,f[0]);const a={};s&65536&&(a.$$scope={dirty:s,ctx:f}),t.$set(a)},i(f){l||(m(t.$$.fragment,f),l=!0)},o(f){d(t.$$.fragment,f),l=!1},d(f){f&&(g(e),g(n)),v(t,f),o=!1,i()}}}function Ks(r){let e,n,t,l,o,i,f,s,a,u;function c(k){r[9](k)}let p={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[3]!==void 0&&(p.value=r[3]),e=new Wt({props:p}),K.push(()=>ee(e,"value",c));function $(k){r[10](k)}let C={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[4]!==void 0&&(C.value=r[4]),l=new Wt({props:C}),K.push(()=>ee(l,"value",$)),f=new kr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[Xs]},$$scope:{ctx:r}}}),a=new qs({}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment),i=L(),h(f.$$.fragment),s=L(),h(a.$$.fragment)},m(k,S){b(e,k,S),_(k,t,S),b(l,k,S),_(k,i,S),b(f,k,S),_(k,s,S),b(a,k,S),u=!0},p(k,S){const T={};S&32&&(T.choices=k[5]),!n&&S&8&&(n=!0,T.value=k[3],te(()=>n=!1)),e.$set(T);const N={};S&64&&(N.choices=k[6]),!o&&S&16&&(o=!0,N.value=k[4],te(()=>o=!1)),l.$set(N);const D={};S&65537&&(D.$$scope={dirty:S,ctx:k}),f.$set(D)},i(k){u||(m(e.$$.fragment,k),m(l.$$.fragment,k),m(f.$$.fragment,k),m(a.$$.fragment,k),u=!0)},o(k){d(e.$$.fragment,k),d(l.$$.fragment,k),d(f.$$.fragment,k),d(a.$$.fragment,k),u=!1},d(k){k&&(g(t),g(i),g(s)),v(e,k),v(l,k),v(f,k),v(a,k)}}}function Ys(r){let e,n=r[1].size.toLocaleString()+"",t,l,o=r[7].route.toLocaleString()+"",i,f,s=r[7].area.toLocaleString()+"",a,u,c=r[7].crossing.toLocaleString()+"",p,$,C=r[7].other.toLocaleString()+"",k,S;return{c(){e=w("Showing "),t=w(n),l=w(" schemes ("),i=w(o),f=w(`
    routes, `),a=w(s),u=w(` areas,
    `),p=w(c),$=w(" crossings, "),k=w(C),S=w(`
    other)`)},m(T,N){_(T,e,N),_(T,t,N),_(T,l,N),_(T,i,N),_(T,f,N),_(T,a,N),_(T,u,N),_(T,p,N),_(T,$,N),_(T,k,N),_(T,S,N)},p(T,N){N&2&&n!==(n=T[1].size.toLocaleString()+"")&&W(t,n),N&128&&o!==(o=T[7].route.toLocaleString()+"")&&W(i,o),N&128&&s!==(s=T[7].area.toLocaleString()+"")&&W(a,s),N&128&&c!==(c=T[7].crossing.toLocaleString()+"")&&W(p,c),N&128&&C!==(C=T[7].other.toLocaleString()+"")&&W(k,C)},d(T){T&&(g(e),g(t),g(l),g(i),g(f),g(a),g(u),g(p),g($),g(k),g(S))}}}function Js(r){let e,n,t;function l(i){r[13](i)}let o={id:"show-schemes",$$slots:{default:[Ys]},$$scope:{ctx:r}};return r[2]!==void 0&&(o.checked=r[2]),e=new ie({props:o}),K.push(()=>ee(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,f){b(e,i,f),t=!0},p(i,f){const s={};f&65666&&(s.$$scope={dirty:f,ctx:i}),!n&&f&4&&(n=!0,s.checked=i[2],te(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){d(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Zs(r){let e,n,t,l;return e=new Ne({props:{label:"Filters",$$slots:{default:[Ks]},$$scope:{ctx:r}}}),t=new Dt({props:{small:!0,$$slots:{default:[Js]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,i){b(e,o,i),_(o,n,i),b(t,o,i),l=!0},p(o,[i]){const f={};i&65657&&(f.$$scope={dirty:i,ctx:o}),e.$set(f);const s={};i&65670&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&g(n),v(e,o),v(t,o)}}}function Qs(r,e,n){let t;de(r,wt,D=>n(14,t=D));let{schemes:l}=e,{schemesToBeShown:o=new Set}=e,{filterText:i=""}=e,{show:f=!0}=e,s=[],a="",u=[],c="",p={area:0,route:0,crossing:0,other:0};Tt(()=>{let D=new Set,F=new Set;for(let O of l.values())O.authority_or_region&&D.add(O.authority_or_region),O.funding_programme&&F.add(O.funding_programme);n(5,s=Array.from(D.entries())),s.sort(),n(6,u=Array.from(F.entries())),u.sort()});function $(D,F,O){let E=D.toLowerCase(),P=M=>{var R,j;if(E&&!((R=M.properties.name)!=null&&R.toLowerCase().includes(E))&&!((j=M.properties.description)!=null&&j.toLowerCase().includes(E)))return!1;if(F||O){let U=l.get(M.properties.scheme_reference);if(F&&U.authority_or_region!=F||O&&U.funding_programme!=O)return!1}return!0};n(1,o=new Set(t.features.filter(P).map(M=>M.properties.scheme_reference))),n(7,p={area:0,route:0,crossing:0,other:0});let I=M=>{var R,j;return!(!o.has(M.properties.scheme_reference)||E&&!((R=M.properties.name)!=null&&R.toLowerCase().includes(E))&&!((j=M.properties.description)!=null&&j.toLowerCase().includes(E)))};wt.update(M=>{for(let R of M.features)I(R)?(delete R.properties.hide_while_editing,n(7,p[R.properties.intervention_type]++,p)):R.properties.hide_while_editing=!0;return M}),n(7,p)}function C(D){a=D,n(3,a)}function k(D){c=D,n(4,c)}function S(){i=this.value,n(0,i)}const T=()=>n(0,i="");function N(D){f=D,n(2,f)}return r.$$set=D=>{"schemes"in D&&n(8,l=D.schemes),"schemesToBeShown"in D&&n(1,o=D.schemesToBeShown),"filterText"in D&&n(0,i=D.filterText),"show"in D&&n(2,f=D.show)},r.$$.update=()=>{r.$$.dirty&25&&$(i,a,c)},[i,o,f,a,c,s,u,p,l,C,k,S,T,N]}class xs extends z{constructor(e){super(),q(this,e,Qs,Zs,G,{schemes:8,schemesToBeShown:1,filterText:0,show:2})}}function ei(r,e,n){let t;de(r,It,f=>n(3,t=f));let l=null,{markerPosition:o}=e,{markerPositionUpdated:i}=e;return Tt(()=>{l=new tn.Marker({draggable:!0}).setLngLat(o).addTo(t),l.on("dragstart",()=>{t.getCanvas().style.cursor="grabbing"}),l.on("drag",()=>{n(0,o=l.getLngLat()),i()}),l.on("dragend",()=>{t.getCanvas().style.cursor="inherit"})}),un(()=>{l&&l.remove()}),r.$$set=f=>{"markerPosition"in f&&n(0,o=f.markerPosition),"markerPositionUpdated"in f&&n(1,i=f.markerPositionUpdated)},[o,i]}class ti extends z{constructor(e){super(),q(this,e,ei,null,G,{markerPosition:0,markerPositionUpdated:1})}}function Vn(r,e,n){const t=r.slice();return t[16]=e[n],t[17]=e,t[18]=n,t}function ni(r){let e,n;return e=new Pt({props:{$$slots:{default:[li]},$$scope:{ctx:r}}}),e.$on("click",r[5]),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&524288&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ri(r){let e,n;return e=new Pt({props:{$$slots:{default:[oi]},$$scope:{ctx:r}}}),e.$on("click",r[4]),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&524288&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function li(r){let e;return{c(){e=w("Disable Line Measurement Tool")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function oi(r){let e;return{c(){e=w("Enable Line Measurement Tool")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Xn(r){var c;let e,n,t,l=[],o=new Map,i,f,s=r[2]&&((c=r[2].properties)==null?void 0:c.length)&&Kn(r);n=new Ne({props:{label:"Help",$$slots:{default:[si]},$$scope:{ctx:r}}});let a=We(r[1]);const u=p=>p[16].id;for(let p=0;p<a.length;p+=1){let $=Vn(r,a,p),C=u($);o.set(C,l[p]=Yn(C,$))}return{c(){s&&s.c(),e=L(),h(n.$$.fragment),t=L();for(let p=0;p<l.length;p+=1)l[p].c();i=Ce()},m(p,$){s&&s.m(p,$),_(p,e,$),b(n,p,$),_(p,t,$);for(let C=0;C<l.length;C+=1)l[C]&&l[C].m(p,$);_(p,i,$),f=!0},p(p,$){var k;p[2]&&((k=p[2].properties)!=null&&k.length)?s?s.p(p,$):(s=Kn(p),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null);const C={};$&524288&&(C.$$scope={dirty:$,ctx:p}),n.$set(C),$&258&&(a=We(p[1]),ae(),l=Zr(l,$,u,1,p,a,o,i.parentNode,Qr,Yn,i,Vn),fe())},i(p){if(!f){m(n.$$.fragment,p);for(let $=0;$<a.length;$+=1)m(l[$]);f=!0}},o(p){d(n.$$.fragment,p);for(let $=0;$<l.length;$+=1)d(l[$]);f=!1},d(p){p&&(g(e),g(t),g(i)),s&&s.d(p),v(n,p);for(let $=0;$<l.length;$+=1)l[$].d(p)}}}function Kn(r){var i;let e,n,t=((i=r[2].properties)==null?void 0:i.length)+"",l,o;return{c(){e=A("p"),n=w("Length: "),l=w(t),o=w("m")},m(f,s){_(f,e,s),y(e,n),y(e,l),y(e,o)},p(f,s){var a;s&4&&t!==(t=((a=f[2].properties)==null?void 0:a.length)+"")&&W(l,t)},d(f){f&&g(e)}}}function si(r){let e;return{c(){e=A("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and Drag</b>
        an existing waypoint to move it</li> <li><b>Hold shift and click on</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(n,t){_(n,e,t)},p:re,d(n){n&&g(e)}}}function Yn(r,e){let n,t,l,o;function i(s){e[9](s,e[16])}let f={markerPositionUpdated:e[8]};return e[16].lngLat!==void 0&&(f.markerPosition=e[16].lngLat),t=new ti({props:f}),K.push(()=>ee(t,"markerPosition",i)),{key:r,first:null,c(){n=Ce(),h(t.$$.fragment),this.first=n},m(s,a){_(s,n,a),b(t,s,a),o=!0},p(s,a){e=s;const u={};!l&&a&2&&(l=!0,u.markerPosition=e[16].lngLat,te(()=>l=!1)),t.$set(u)},i(s){o||(m(t.$$.fragment,s),o=!0)},o(s){d(t.$$.fragment,s),o=!1},d(s){s&&g(n),v(t,s)}}}function ii(r){let e,n;const t=[H("measurement-line"),{paint:{"line-color":Ut.measuringLine,"line-width":5}}];let l={};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new $e({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const f=i&0?Q(t,[i&0&&x(H("measurement-line")),i&0&&{paint:{"line-color":Ut.measuringLine,"line-width":5}}]):{};e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ai(r){let e,n,t,l,o,i,f,s;const a=[ri,ni],u=[];function c($,C){return $[0]?0:1}e=c(r),n=u[e]=a[e](r);let p=!r[0]&&Xn(r);return o=new Ot({props:{data:r[3],$$slots:{default:[ii]},$$scope:{ctx:r}}}),{c(){n.c(),t=L(),p&&p.c(),l=L(),h(o.$$.fragment)},m($,C){u[e].m($,C),_($,t,C),p&&p.m($,C),_($,l,C),b(o,$,C),i=!0,f||(s=[vt(window,"keydown",r[6]),vt(window,"keyup",r[7])],f=!0)},p($,[C]){let k=e;e=c($),e===k?u[e].p($,C):(ae(),d(u[k],1,1,()=>{u[k]=null}),fe(),n=u[e],n?n.p($,C):(n=u[e]=a[e]($),n.c()),m(n,1),n.m(t.parentNode,t)),$[0]?p&&(ae(),d(p,1,1,()=>{p=null}),fe()):p?(p.p($,C),C&1&&m(p,1)):(p=Xn($),p.c(),m(p,1),p.m(l.parentNode,l));const S={};C&8&&(S.data=$[3]),C&524288&&(S.$$scope={dirty:C,ctx:$}),o.$set(S)},i($){i||(m(n),m(p),m(o.$$.fragment,$),i=!0)},o($){d(n),d(p),d(o.$$.fragment,$),i=!1},d($){$&&(g(t),g(l)),u[e].d($),p&&p.d($),v(o,$),f=!1,Jr(s)}}}function fi(r,e,n){let t;de(r,It,D=>n(12,t=D));let l=!0,o=[],i,f=!1,s=0,a=nn();function u(D){l||(f||(o.push({id:s++,lngLat:D.lngLat}),n(1,o),S()),f&&o.length>0&&(c(D.lngLat),S()))}function c(D){let O=new tn.LngLat(0,-90).distanceTo(new tn.LngLat(0,90)),E;o.forEach(P=>{const I=P.lngLat;O>=D.distanceTo(I)&&(E=I,O=D.distanceTo(I))}),E&&n(1,o=o.filter(P=>{const I=P.lngLat;return I.lng!=(E==null?void 0:E.lng)||I.lat!=(E==null?void 0:E.lat)}))}function p(){n(0,l=!1)}function $(){n(0,l=!0),n(1,o=[]),T()}function C(D){D.key==="Shift"&&(f=!0),D.key==="Escape"&&$()}function k(D){D.key==="Shift"&&(f=!1)}function S(){if(o.length<2){T();return}const D=o.map(F=>[F.lngLat.lng,F.lngLat.lat]);n(2,i=xr(D,{})),i.properties&&n(2,i.properties.length=($l(i)*1e3).toFixed(2),i),n(3,a=JSON.parse(JSON.stringify(i)))}function T(){n(2,i=void 0),n(3,a=nn())}Tt(()=>{t.on("click",u)}),un(()=>{t.off("click",u)});function N(D,F){r.$$.not_equal(F.lngLat,D)&&(F.lngLat=D,n(1,o))}return[l,o,i,a,p,$,C,k,S,N]}class ui extends z{constructor(e){super(),q(this,e,fi,ai,G,{})}}function ci(r){let e;return{c(){e=w(`Open Government License
  `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function pi(r){let e,n,t,l,o;return t=new Y({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ci]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment),l=w(`. Contains OS data  Crown copyright and database right
  2023.`)},m(i,f){_(i,e,f),y(e,n),b(t,e,null),y(e,l),o=!0},p(i,[f]){const s={};f&1&&(s.$$scope={dirty:f,ctx:i}),t.$set(s)},i(i){o||(m(t.$$.fragment,i),o=!0)},o(i){d(t.$$.fragment,i),o=!1},d(i){i&&g(e),v(t)}}}class Ve extends z{constructor(e){super(),q(this,e,null,pi,G,{})}}function Jn(r,e,n){const t=r.slice();return t[2]=e[n],t}function Zn(r,e,n){const t=r.slice();return t[5]=e[n],t}function Qn(r){let e,n;return{c(){e=A("span"),n=w(`
    `),De(e,"background",r[5]),De(e,"width","100%"),De(e,"border","1px solid black")},m(t,l){_(t,e,l),y(e,n)},p(t,l){l&1&&De(e,"background",t[5])},d(t){t&&g(e)}}}function xn(r){let e,n=r[2]+"",t;return{c(){e=A("span"),t=w(n)},m(l,o){_(l,e,o),y(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&W(t,n)},d(l){l&&g(e)}}}function $i(r){let e,n,t,l=We(r[0]),o=[];for(let s=0;s<l.length;s+=1)o[s]=Qn(Zn(r,l,s));let i=We(r[1]),f=[];for(let s=0;s<i.length;s+=1)f[s]=xn(Jn(r,i,s));return{c(){e=A("div");for(let s=0;s<o.length;s+=1)o[s].c();n=L(),t=A("div");for(let s=0;s<f.length;s+=1)f[s].c();De(e,"display","flex"),De(t,"display","flex"),De(t,"justify-content","space-between")},m(s,a){_(s,e,a);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);_(s,n,a),_(s,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(s,[a]){if(a&1){l=We(s[0]);let u;for(u=0;u<l.length;u+=1){const c=Zn(s,l,u);o[u]?o[u].p(c,a):(o[u]=Qn(c),o[u].c(),o[u].m(e,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=l.length}if(a&2){i=We(s[1]);let u;for(u=0;u<i.length;u+=1){const c=Jn(s,i,u);f[u]?f[u].p(c,a):(f[u]=xn(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=i.length}},i:re,o:re,d(s){s&&(g(e),g(n),g(t)),Rt(o,s),Rt(f,s)}}}function mi(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class xe extends z{constructor(e){super(),q(this,e,mi,$i,G,{colorScale:0,limits:1})}}function er(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function _i(r){let e;return{c(){e=w("Percent of households with a car")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function gi(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function di(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function hi(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function bi(r){let e,n,t,l,o,i,f,s,a,u,c,p;return t=new Y({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[gi]},$$scope:{ctx:r}}}),o=new Y({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[di]},$$scope:{ctx:r}}}),u=new Y({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[hi]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),f=L(),s=A("p"),a=w("License: "),h(u.$$.fragment),c=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m($,C){_($,e,C),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),_($,f,C),_($,s,C),y(s,a),b(u,s,null),y(s,c),p=!0},p($,C){const k={};C&65536&&(k.$$scope={dirty:C,ctx:$}),t.$set(k);const S={};C&65536&&(S.$$scope={dirty:C,ctx:$}),o.$set(S);const T={};C&65536&&(T.$$scope={dirty:C,ctx:$}),u.$set(T)},i($){p||(m(t.$$.fragment,$),m(o.$$.fragment,$),m(u.$$.fragment,$),p=!0)},o($){d(t.$$.fragment,$),d(o.$$.fragment,$),d(u.$$.fragment,$),p=!1},d($){$&&(g(e),g(f),g(s)),v(t),v(o),v(u)}}}function vi(r){let e,n,t;return n=new ue({props:{$$slots:{default:[bi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),J(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function tr(r){let e,n;return e=new xe({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:re,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wi(r){let e;return{c(){e=w("Average cars per household")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ki(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function yi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Si(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ci(r){let e,n,t,l,o,i,f,s,a,u,c,p,$,C;return o=new Y({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ki]},$$scope:{ctx:r}}}),f=new Y({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[yi]},$$scope:{ctx:r}}}),p=new Y({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Si]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=L(),t=A("p"),l=w("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),i=w(". Output area boundaries from "),h(f.$$.fragment),s=w("."),a=L(),u=A("p"),c=w("License: "),h(p.$$.fragment),$=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(k,S){_(k,e,S),_(k,n,S),_(k,t,S),y(t,l),b(o,t,null),y(t,i),b(f,t,null),y(t,s),_(k,a,S),_(k,u,S),y(u,c),b(p,u,null),y(u,$),C=!0},p(k,S){const T={};S&65536&&(T.$$scope={dirty:S,ctx:k}),o.$set(T);const N={};S&65536&&(N.$$scope={dirty:S,ctx:k}),f.$set(N);const D={};S&65536&&(D.$$scope={dirty:S,ctx:k}),p.$set(D)},i(k){C||(m(o.$$.fragment,k),m(f.$$.fragment,k),m(p.$$.fragment,k),C=!0)},o(k){d(o.$$.fragment,k),d(f.$$.fragment,k),d(p.$$.fragment,k),C=!1},d(k){k&&(g(e),g(n),g(t),g(a),g(u)),v(o),v(f),v(p)}}}function Ti(r){let e,n,t;return n=new ue({props:{$$slots:{default:[Ci]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),J(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function nr(r){let e,n;return e=new xe({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:re,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Oi(r){let e;return{c(){e=w("Population density")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Li(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ai(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Pi(r){let e,n,t,l,o,i,f,s,a;return t=new Y({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Li]},$$scope:{ctx:r}}}),o=new Y({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ai]},$$scope:{ctx:r}}}),s=new Ve({}),{c(){e=A("p"),n=w("Population density data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),f=L(),h(s.$$.fragment)},m(u,c){_(u,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),_(u,f,c),b(s,u,c),a=!0},p(u,c){const p={};c&65536&&(p.$$scope={dirty:c,ctx:u}),t.$set(p);const $={};c&65536&&($.$$scope={dirty:c,ctx:u}),o.$set($)},i(u){a||(m(t.$$.fragment,u),m(o.$$.fragment,u),m(s.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(o.$$.fragment,u),d(s.$$.fragment,u),a=!1},d(u){u&&(g(e),g(f)),v(t),v(o),v(s,u)}}}function Ei(r){let e,n,t;return n=new ue({props:{$$slots:{default:[Pi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),J(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function rr(r){let e,n,t,l;return t=new xe({props:{colorScale:r[4],limits:r[6]().map(Hi)}}),{c(){e=A("p"),e.textContent="(people per square kilometres)",n=L(),h(t.$$.fragment)},m(o,i){_(o,e,i),_(o,n,i),b(t,o,i),l=!0},p:re,i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&(g(e),g(n)),v(t,o)}}}function Ni(r){let e,n,t,l=r[15].toLocaleString()+"",o,i,f=r[14]+"",s;return{c(){e=A("p"),n=w("There are "),t=A("b"),o=w(l),i=w(`
          people per square kilometre in `),s=w(f)},m(a,u){_(a,e,u),y(e,n),y(e,t),y(t,o),y(e,i),y(e,s)},p(a,u){u&8200&&l!==(l=a[15].toLocaleString()+"")&&W(o,l),u&8192&&f!==(f=a[14]+"")&&W(s,f)},d(a){a&&g(e)}}}function Ii(r){let e,n,t=r[14]+"",l,o,i,f=r[15]+"",s,a;return{c(){e=A("p"),n=w("Households in "),l=w(t),o=w(` have an average of
          `),i=A("b"),s=w(f),a=w(`
          cars`)},m(u,c){_(u,e,c),y(e,n),y(e,l),y(e,o),y(e,i),y(i,s),y(e,a)},p(u,c){c&8192&&t!==(t=u[14]+"")&&W(l,t),c&8200&&f!==(f=u[15]+"")&&W(s,f)},d(u){u&&g(e)}}}function Di(r){let e,n,t=r[15]+"",l,o,i,f=r[14]+"",s,a;return{c(){e=A("p"),n=A("b"),l=w(t),o=w("%"),i=w(`
          of households in `),s=w(f),a=w(" have 1 or more cars")},m(u,c){_(u,e,c),y(e,n),y(n,l),y(n,o),y(e,i),y(e,s),y(e,a)},p(u,c){c&8200&&t!==(t=u[15]+"")&&W(l,t),c&8192&&f!==(f=u[14]+"")&&W(s,f)},d(u){u&&g(e)}}}function Mi(r){er(r);let e;function n(o,i){return o[3]=="percent_households_with_car"?Di:o[3]=="average_cars_per_household"?Ii:Ni}let t=n(r),l=t(r);return{c(){l.c(),e=Ce()},m(o,i){l.m(o,i),_(o,e,i)},p(o,i){er(o),t===(t=n(o))&&l?l.p(o,i):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&g(e),l.d(o)}}}function Fi(r){let e,n;return e=new oe({props:{$$slots:{default:[Mi,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ji(r){let e,n,t,l;const o=[H(nt),{sourceLayer:nt},{paint:{"fill-color":ve(["get",r[3]],r[6](),r[4]),"fill-opacity":ne(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Fi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new qe({props:i}),e.$on("click",r[5]);const f=[H(`${nt}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let s={};for(let a=0;a<f.length;a+=1)s=Z(s,f[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,u){b(e,a,u),_(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&88?Q(o,[u&0&&x(H(nt)),u&0&&{sourceLayer:nt},u&88&&{paint:{"fill-color":ve(["get",a[3]],a[6](),a[4]),"fill-opacity":ne(.5,.7)}},u&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5]]):{};u&65544&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&8?Q(f,[u&0&&x(H(`${nt}-outline`)),f[1],u&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function Bi(r){let e,n,t,l,o,i,f,s,a,u,c,p,$,C;function k(I){r[7](I)}let S={id:"percent_households_with_car",$$slots:{right:[vi],default:[_i]},$$scope:{ctx:r}};r[0]!==void 0&&(S.checked=r[0]),e=new ie({props:S}),K.push(()=>ee(e,"checked",k)),e.$on("change",r[8]);let T=r[3]=="percent_households_with_car"&&tr(r);function N(I){r[9](I)}let D={id:"average_cars_per_household",$$slots:{right:[Ti],default:[wi]},$$scope:{ctx:r}};r[1]!==void 0&&(D.checked=r[1]),o=new ie({props:D}),K.push(()=>ee(o,"checked",N)),o.$on("change",r[10]);let F=r[3]=="average_cars_per_household"&&nr(r);function O(I){r[11](I)}let E={id:"population_density",$$slots:{right:[Ei],default:[Oi]},$$scope:{ctx:r}};r[2]!==void 0&&(E.checked=r[2]),a=new ie({props:E}),K.push(()=>ee(a,"checked",O)),a.$on("change",r[12]);let P=r[3]=="population_density"&&rr(r);return $=new he({props:{url:`pmtiles://${pe()}/v1/${nt}.pmtiles`,$$slots:{default:[ji]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),T&&T.c(),l=L(),h(o.$$.fragment),f=L(),F&&F.c(),s=L(),h(a.$$.fragment),c=L(),P&&P.c(),p=L(),h($.$$.fragment)},m(I,M){b(e,I,M),_(I,t,M),T&&T.m(I,M),_(I,l,M),b(o,I,M),_(I,f,M),F&&F.m(I,M),_(I,s,M),b(a,I,M),_(I,c,M),P&&P.m(I,M),_(I,p,M),b($,I,M),C=!0},p(I,[M]){const R={};M&65536&&(R.$$scope={dirty:M,ctx:I}),!n&&M&1&&(n=!0,R.checked=I[0],te(()=>n=!1)),e.$set(R),I[3]=="percent_households_with_car"?T?(T.p(I,M),M&8&&m(T,1)):(T=tr(I),T.c(),m(T,1),T.m(l.parentNode,l)):T&&(ae(),d(T,1,1,()=>{T=null}),fe());const j={};M&65536&&(j.$$scope={dirty:M,ctx:I}),!i&&M&2&&(i=!0,j.checked=I[1],te(()=>i=!1)),o.$set(j),I[3]=="average_cars_per_household"?F?(F.p(I,M),M&8&&m(F,1)):(F=nr(I),F.c(),m(F,1),F.m(s.parentNode,s)):F&&(ae(),d(F,1,1,()=>{F=null}),fe());const U={};M&65536&&(U.$$scope={dirty:M,ctx:I}),!u&&M&4&&(u=!0,U.checked=I[2],te(()=>u=!1)),a.$set(U),I[3]=="population_density"?P?(P.p(I,M),M&8&&m(P,1)):(P=rr(I),P.c(),m(P,1),P.m(p.parentNode,p)):P&&(ae(),d(P,1,1,()=>{P=null}),fe());const X={};M&65544&&(X.$$scope={dirty:M,ctx:I}),$.$set(X)},i(I){C||(m(e.$$.fragment,I),m(T),m(o.$$.fragment,I),m(F),m(a.$$.fragment,I),m(P),m($.$$.fragment,I),C=!0)},o(I){d(e.$$.fragment,I),d(T),d(o.$$.fragment,I),d(F),d(a.$$.fragment,I),d(P),d($.$$.fragment,I),C=!1},d(I){I&&(g(t),g(l),g(f),g(s),g(c),g(p)),v(e,I),T&&T.d(I),v(o,I),F&&F.d(I),v(a,I),P&&P.d(I),v($,I)}}}let nt="census_output_areas";const Hi=r=>r.toLocaleString();function Ri(r,e,n){let t=V.sequential_low_to_high,l=!1,o=!1,i=!1,f="";function s(S){let T=S.detail.features[0].properties.OA21CD;f=="percent_households_with_car"||f=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${T}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${T}`,"_blank")}function a(){return f=="percent_households_with_car"?[0,20,40,60,80,100]:f=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function u(S){l=S,n(0,l)}const c=()=>{n(1,o=!1),n(2,i=!1)};function p(S){o=S,n(1,o)}const $=()=>{n(0,l=!1),n(2,i=!1)};function C(S){i=S,n(2,i)}const k=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,f="percent_households_with_car"):o?n(3,f="average_cars_per_household"):i?n(3,f="population_density"):n(3,f=""))},[l,o,i,f,t,s,a,u,c,p,$,C,k]}class Wi extends z{constructor(e){super(),q(this,e,Ri,Bi,G,{})}}function Ui(r){let e,n,t;return e=new Te({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Combined authorities`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:re,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function Gi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function zi(r){let e,n,t,l,o,i,f;return t=new Y({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Gi]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of December 2022."),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),y(e,n),b(t,e,null),y(e,l),_(s,o,a),b(i,s,a),f=!0},p(s,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){f||(m(t.$$.fragment,s),m(i.$$.fragment,s),f=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),f=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function qi(r){let e,n,t;return n=new ue({props:{$$slots:{default:[zi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),J(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Vi(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){_(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&W(t,n)},d(l){l&&g(e)}}}function Xi(r){let e,n;return e=new oe({props:{$$slots:{default:[Vi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ki(r){let e,n,t,l;const o=[H(ut),{paint:{"fill-color":r[1],"fill-opacity":ne(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Xi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new qe({props:i}),e.$on("click",Ji);const f=[H(`${ut}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<f.length;a+=1)s=Z(s,f[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,u){b(e,a,u),_(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&3?Q(o,[u&0&&x(H(ut)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":ne(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?Q(f,[u&0&&x(H(`${ut}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function Yi(r){let e,n,t,l,o;function i(s){r[2](s)}let f={id:ut,$$slots:{right:[qi],default:[Ui]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ie({props:f}),K.push(()=>ee(e,"checked",i)),l=new Ot({props:{data:`${pe()}/v1/${ut}.geojson`,$$slots:{default:[Ki]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,u.checked=s[0],te(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let ut="combined_authorities";function Ji(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Zi(r,e,n){let t=V.combined_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Qi extends z{constructor(e){super(),q(this,e,Zi,Yi,G,{})}}function xi(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ea(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ta(r){let e;return{c(){e=w(`here
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function na(r){let e,n,t,l,o,i,f,s,a;return t=new Y({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[ea]},$$scope:{ctx:r}}}),o=new Y({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[ta]},$$scope:{ctx:r}}}),s=new Ve({}),{c(){e=A("p"),n=w("The 2019 English IMD scores come from "),h(t.$$.fragment),l=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),i=w("."),f=L(),h(s.$$.fragment)},m(u,c){_(u,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),_(u,f,c),b(s,u,c),a=!0},p(u,c){const p={};c&32&&(p.$$scope={dirty:c,ctx:u}),t.$set(p);const $={};c&32&&($.$$scope={dirty:c,ctx:u}),o.$set($)},i(u){a||(m(t.$$.fragment,u),m(o.$$.fragment,u),m(s.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(o.$$.fragment,u),d(s.$$.fragment,u),a=!1},d(u){u&&(g(e),g(f)),v(t),v(o),v(s,u)}}}function ra(r){let e,n,t;return n=new ue({props:{$$slots:{default:[na]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),J(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function lr(r){let e,n;return e=new xe({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:re,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function la(r){let e,n=r[4].LSOA11CD+"",t,l,o,i=r[4].score+"",f,s,a,u,c,p=r[4].rank.toLocaleString()+"",$,C;return{c(){e=A("p"),t=w(n),l=w(` has an IMD score of
        `),o=A("b"),f=w(i),s=L(),a=A("p"),u=w("Rank: "),c=A("b"),$=w(p),C=w(`
        / 32,844 LSOAs`)},m(k,S){_(k,e,S),y(e,t),y(e,l),y(e,o),y(o,f),_(k,s,S),_(k,a,S),y(a,u),y(a,c),y(c,$),y(a,C)},p(k,S){S&16&&n!==(n=k[4].LSOA11CD+"")&&W(t,n),S&16&&i!==(i=k[4].score+"")&&W(f,i),S&16&&p!==(p=k[4].rank.toLocaleString()+"")&&W($,p)},d(k){k&&(g(e),g(s),g(a))}}}function oa(r){let e,n;return e=new oe({props:{$$slots:{default:[la,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function sa(r){let e,n,t,l;const o=[H(Je),{sourceLayer:Je},{paint:{"fill-color":ve(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":ne(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0}];let i={$$slots:{default:[oa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new qe({props:i});const f=[H(`${Je}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<f.length;a+=1)s=Z(s,f[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,u){b(e,a,u),_(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&7?Q(o,[u&0&&x(H(Je)),u&0&&{sourceLayer:Je},u&6&&{paint:{"fill-color":ve(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":ne(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?Q(f,[u&0&&x(H(`${Je}-outline`)),f[1],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function ia(r){let e,n,t,l,o,i;function f(u){r[3](u)}let s={id:Je,$$slots:{right:[ra],default:[xi]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ie({props:s}),K.push(()=>ee(e,"checked",f));let a=r[0]&&lr(r);return o=new he({props:{url:`pmtiles://${pe()}/v1/${Je}.pmtiles`,$$slots:{default:[sa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),l=L(),h(o.$$.fragment)},m(u,c){b(e,u,c),_(u,t,c),a&&a.m(u,c),_(u,l,c),b(o,u,c),i=!0},p(u,[c]){const p={};c&32&&(p.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,p.checked=u[0],te(()=>n=!1)),e.$set(p),u[0]?a?(a.p(u,c),c&1&&m(a,1)):(a=lr(u),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),d(a,1,1,()=>{a=null}),fe());const $={};c&33&&($.$$scope={dirty:c,ctx:u}),o.$set($)},i(u){i||(m(e.$$.fragment,u),m(a),m(o.$$.fragment,u),i=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),i=!1},d(u){u&&(g(t),g(l)),v(e,u),a&&a.d(u),v(o,u)}}}let Je="imd";function aa(r,e,n){let t=V.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function i(f){o=f,n(0,o)}return[o,t,l,i]}class fa extends z{constructor(e){super(),q(this,e,aa,ia,G,{})}}function ua(r){let e,n,t;return e=new Te({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:re,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function ca(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function pa(r){let e,n,t,l,o,i,f;return t=new Y({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[ca]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),y(e,n),b(t,e,null),y(e,l),_(s,o,a),b(i,s,a),f=!0},p(s,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){f||(m(t.$$.fragment,s),m(i.$$.fragment,s),f=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),f=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function $a(r){let e,n,t;return n=new ue({props:{$$slots:{default:[pa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),J(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function ma(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){_(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&W(t,n)},d(l){l&&g(e)}}}function _a(r){let e,n;return e=new oe({props:{$$slots:{default:[ma,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ga(r){let e,n,t,l;const o=[H(ct),{paint:{"fill-color":r[1],"fill-opacity":ne(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[_a]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new qe({props:i}),e.$on("click",ha);const f=[H(`${ct}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<f.length;a+=1)s=Z(s,f[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,u){b(e,a,u),_(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&3?Q(o,[u&0&&x(H(ct)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":ne(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?Q(f,[u&0&&x(H(`${ct}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function da(r){let e,n,t,l,o;function i(s){r[2](s)}let f={id:ct,$$slots:{right:[$a],default:[ua]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ie({props:f}),K.push(()=>ee(e,"checked",i)),l=new Ot({props:{data:`${pe()}/v1/${ct}.geojson`,$$slots:{default:[ga]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,u.checked=s[0],te(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let ct="local_authority_districts";function ha(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function ba(r,e,n){let t=V.local_authority_districts,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class va extends z{constructor(e){super(),q(this,e,ba,da,G,{})}}function wa(r){let e,n,t;return e=new Te({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:re,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function ka(r){let e;return{c(){e=w(`local authority
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ya(r){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Sa(r){let e;return{c(){e=w(`development corporation
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ca(r){let e;return{c(){e=w("this map")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ta(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Oa(r){let e,n,t,l,o,i,f,s,a,u,c,p,$,C,k,S,T,N,D,F,O,E;return t=new Y({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[ka]},$$scope:{ctx:r}}}),o=new Y({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ya]},$$scope:{ctx:r}}}),f=new Y({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Sa]},$$scope:{ctx:r}}}),$=new Y({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Ca]},$$scope:{ctx:r}}}),N=new Y({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Ta]},$$scope:{ctx:r}}}),O=new Ve({}),{c(){e=A("p"),n=w("LPAs may be a "),h(t.$$.fragment),l=w(", "),h(o.$$.fragment),i=w("y, or "),h(f.$$.fragment),s=w("."),a=L(),u=A("p"),c=A("strong"),p=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h($.$$.fragment),C=w(" to get more details."),k=L(),S=A("p"),T=w("Data from ONS Geography via "),h(N.$$.fragment),D=w(", as of November 2022."),F=L(),h(O.$$.fragment)},m(P,I){_(P,e,I),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),b(f,e,null),y(e,s),_(P,a,I),_(P,u,I),y(u,c),y(c,p),b($,c,null),y(c,C),_(P,k,I),_(P,S,I),y(S,T),b(N,S,null),y(S,D),_(P,F,I),b(O,P,I),E=!0},p(P,I){const M={};I&16&&(M.$$scope={dirty:I,ctx:P}),t.$set(M);const R={};I&16&&(R.$$scope={dirty:I,ctx:P}),o.$set(R);const j={};I&16&&(j.$$scope={dirty:I,ctx:P}),f.$set(j);const U={};I&16&&(U.$$scope={dirty:I,ctx:P}),$.$set(U);const X={};I&16&&(X.$$scope={dirty:I,ctx:P}),N.$set(X)},i(P){E||(m(t.$$.fragment,P),m(o.$$.fragment,P),m(f.$$.fragment,P),m($.$$.fragment,P),m(N.$$.fragment,P),m(O.$$.fragment,P),E=!0)},o(P){d(t.$$.fragment,P),d(o.$$.fragment,P),d(f.$$.fragment,P),d($.$$.fragment,P),d(N.$$.fragment,P),d(O.$$.fragment,P),E=!1},d(P){P&&(g(e),g(a),g(u),g(k),g(S),g(F)),v(t),v(o),v(f),v($),v(N),v(O,P)}}}function La(r){let e,n,t;return n=new ue({props:{$$slots:{default:[Oa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),J(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Aa(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){_(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&W(t,n)},d(l){l&&g(e)}}}function Pa(r){let e,n;return e=new oe({props:{$$slots:{default:[Aa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ea(r){let e,n,t,l;const o=[H(Fe),{sourceLayer:Fe},{paint:{"fill-color":r[1],"fill-opacity":ne(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0}];let i={$$slots:{default:[Pa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new qe({props:i});const f=[H(`${Fe}-outline`),{sourceLayer:Fe},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<f.length;a+=1)s=Z(s,f[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,u){b(e,a,u),_(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&3?Q(o,[u&0&&x(H(Fe)),u&0&&{sourceLayer:Fe},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ne(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?Q(f,[u&0&&x(H(`${Fe}-outline`)),u&0&&{sourceLayer:Fe},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function Na(r){let e,n,t,l,o;function i(s){r[2](s)}let f={id:Fe,$$slots:{right:[La],default:[wa]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ie({props:f}),K.push(()=>ee(e,"checked",i)),l=new he({props:{url:`pmtiles://${pe()}/v1/${Fe}.pmtiles`,$$slots:{default:[Ea]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,u.checked=s[0],te(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let Fe="local_planning_authorities";function Ia(r,e,n){let t=V.local_planning_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Da extends z{constructor(e){super(),q(this,e,Ia,Na,G,{})}}function Ma(r){let e,n,t;return e=new Te({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:re,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function Fa(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ja(r){let e,n,t,l,o,i,f;return t=new Y({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Fa]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),y(e,n),b(t,e,null),y(e,l),_(s,o,a),b(i,s,a),f=!0},p(s,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){f||(m(t.$$.fragment,s),m(i.$$.fragment,s),f=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),f=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function Ba(r){let e,n,t;return n=new ue({props:{$$slots:{default:[ja]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),J(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Ha(r){let e,n=r[3].Name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){_(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&W(t,n)},d(l){l&&g(e)}}}function Ra(r){let e,n;return e=new oe({props:{$$slots:{default:[Ha,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wa(r){let e,n,t,l;const o=[H(je),{sourceLayer:je},{paint:{"fill-color":r[1],"fill-opacity":ne(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ra]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new qe({props:i}),e.$on("click",Ga);const f=[H(`${je}-outline`),{sourceLayer:je},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<f.length;a+=1)s=Z(s,f[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,u){b(e,a,u),_(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&3?Q(o,[u&0&&x(H(je)),u&0&&{sourceLayer:je},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ne(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?Q(f,[u&0&&x(H(`${je}-outline`)),u&0&&{sourceLayer:je},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function Ua(r){let e,n,t,l,o;function i(s){r[2](s)}let f={id:je,$$slots:{right:[Ba],default:[Ma]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ie({props:f}),K.push(()=>ee(e,"checked",i)),l=new he({props:{url:`pmtiles://${pe()}/v1/${je}.pmtiles`,$$slots:{default:[Wa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,u.checked=s[0],te(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let je="parliamentary_constituencies";function Ga(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function za(r,e,n){let t=V.parliamentary_constituencies,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class qa extends z{constructor(e){super(),q(this,e,za,Ua,G,{})}}function Va(r){let e,n,t;return e=new Te({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Wards`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:re,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function Xa(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ka(r){let e,n,t,l,o,i,f;return t=new Y({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Xa]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),y(e,n),b(t,e,null),y(e,l),_(s,o,a),b(i,s,a),f=!0},p(s,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){f||(m(t.$$.fragment,s),m(i.$$.fragment,s),f=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),f=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function Ya(r){let e,n,t;return n=new ue({props:{$$slots:{default:[Ka]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),J(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Ja(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){_(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&W(t,n)},d(l){l&&g(e)}}}function Za(r){let e,n;return e=new oe({props:{$$slots:{default:[Ja,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qa(r){let e,n,t,l;const o=[H(Be),{sourceLayer:Be},{paint:{"fill-color":r[1],"fill-opacity":ne(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Za]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new qe({props:i}),e.$on("click",ef);const f=[H(`${Be}-outline`),{sourceLayer:Be},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<f.length;a+=1)s=Z(s,f[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,u){b(e,a,u),_(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&3?Q(o,[u&0&&x(H(Be)),u&0&&{sourceLayer:Be},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ne(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?Q(f,[u&0&&x(H(`${Be}-outline`)),u&0&&{sourceLayer:Be},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function xa(r){let e,n,t,l,o;function i(s){r[2](s)}let f={id:Be,$$slots:{right:[Ya],default:[Va]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ie({props:f}),K.push(()=>ee(e,"checked",i)),l=new he({props:{url:`pmtiles://${pe()}/v1/${Be}.pmtiles`,$$slots:{default:[Qa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,u.checked=s[0],te(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let Be="wards";function ef(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function tf(r,e,n){let t=V.wards,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class nf extends z{constructor(e){super(),q(this,e,tf,xa,G,{})}}function rf(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function lf(r){let e,n,t,l;return t=new Y({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[rf]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment)},m(o,i){_(o,e,i),y(e,n),b(t,e,null),l=!0},p(o,[i]){const f={};i&1&&(f.$$scope={dirty:i,ctx:o}),t.$set(f)},i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&g(e),v(t)}}}class et extends z{constructor(e){super(),q(this,e,null,lf,G,{})}}function of(r){let e,n,t;return e=new Te({props:{color:V.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=w(`
  Bus routes`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:re,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function sf(r){let e;return{c(){e=w(`GTFS
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function af(r){let e,n,t,l,o,i,f,s,a;return o=new Y({props:{href:"https://gtfs.org",$$slots:{default:[sf]},$$scope:{ctx:r}}}),s=new et({}),{c(){e=A("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=L(),t=A("p"),l=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),i=w(`, and doesn't include which routes are run or the
        frequency of service.`),f=L(),h(s.$$.fragment)},m(u,c){_(u,e,c),_(u,n,c),_(u,t,c),y(t,l),b(o,t,null),y(t,i),_(u,f,c),b(s,u,c),a=!0},p(u,c){const p={};c&8&&(p.$$scope={dirty:c,ctx:u}),o.$set(p)},i(u){a||(m(o.$$.fragment,u),m(s.$$.fragment,u),a=!0)},o(u){d(o.$$.fragment,u),d(s.$$.fragment,u),a=!1},d(u){u&&(g(e),g(n),g(t),g(f)),v(o),v(s,u)}}}function ff(r){let e,n,t;return n=new ue({props:{$$slots:{default:[af]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),J(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&8&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function uf(r){let e;return{c(){e=A("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function cf(r){let e;return{c(){e=A("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function pf(r){let e;function n(o,i){return o[2].has_bus_lane?cf:uf}let t=n(r),l=t(r);return{c(){l.c(),e=Ce()},m(o,i){l.m(o,i),_(o,e,i)},p(o,i){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&g(e),l.d(o)}}}function $f(r){let e,n;return e=new oe({props:{$$slots:{default:[pf,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mf(r){let e,n;const t=[H(pt),{sourceLayer:pt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],V.bus_route_with_lane,V.bus_route_without_lane],"line-width":5,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[$f]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new $e({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const f=i&1?Q(t,[i&0&&x(H(pt)),i&0&&{sourceLayer:pt},i&0&&{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],V.bus_route_with_lane,V.bus_route_without_lane],"line-width":5,"line-opacity":ne(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&8&&(f.$$scope={dirty:i,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function _f(r){let e,n,t,l,o;function i(s){r[1](s)}let f={id:pt,$$slots:{right:[ff],default:[of]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ie({props:f}),K.push(()=>ee(e,"checked",i)),l=new he({props:{url:`pmtiles://${pe()}/v1/${pt}.pmtiles`,$$slots:{default:[mf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,u.checked=s[0],te(()=>n=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let pt="bus_routes";function gf(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class df extends z{constructor(e){super(),q(this,e,gf,_f,G,{})}}function or(r){const e=Cf(r[3]);r[4]=e[0],r[5]=e[1],r[6]=e[2]}function sr(r,e,n){const t=r.slice();return t[7]=e[n][0],t[8]=e[n][1],t}function hf(r){let e;return{c(){e=w("Cycle paths")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function bf(r){let e,n,t,l,o,i,f,s;return f=new et({}),{c(){e=A("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=L(),t=A("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=L(),o=A("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=L(),h(f.$$.fragment)},m(a,u){_(a,e,u),_(a,n,u),_(a,t,u),_(a,l,u),_(a,o,u),_(a,i,u),b(f,a,u),s=!0},p:re,i(a){s||(m(f.$$.fragment,a),s=!0)},o(a){d(f.$$.fragment,a),s=!1},d(a){a&&(g(e),g(n),g(t),g(l),g(o),g(i)),v(f,a)}}}function vf(r){let e,n,t;return n=new ue({props:{$$slots:{default:[bf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),J(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function ir(r){let e,n,t=We(r[1]),l=[];for(let i=0;i<t.length;i+=1)l[i]=ar(sr(r,t,i));const o=i=>d(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=Ce()},m(i,f){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,f);_(i,e,f),n=!0},p(i,f){if(f&2){t=We(i[1]);let s;for(s=0;s<t.length;s+=1){const a=sr(i,t,s);l[s]?(l[s].p(a,f),m(l[s],1)):(l[s]=ar(a),l[s].c(),m(l[s],1),l[s].m(e.parentNode,e))}for(ae(),s=t.length;s<l.length;s+=1)o(s);fe()}},i(i){if(!n){for(let f=0;f<t.length;f+=1)m(l[f]);n=!0}},o(i){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)d(l[f]);n=!1},d(i){i&&g(e),Rt(l,i)}}}function ar(r){let e,n,t,l=r[7]+"",o,i,f;return n=new Te({props:{color:r[8]}}),{c(){e=A("div"),h(n.$$.fragment),t=L(),o=w(l),i=L()},m(s,a){_(s,e,a),b(n,e,null),y(e,t),y(e,o),y(e,i),f=!0},p:re,i(s){f||(m(n.$$.fragment,s),f=!0)},o(s){d(n.$$.fragment,s),f=!1},d(s){s&&g(e),v(n)}}}function wf(r){or(r);let e,n=r[4]+"",t,l,o,i,f,s=r[5]+"",a,u,c,p,$=r[6]+"",C;return{c(){e=A("h2"),t=w(n),l=L(),o=A("p"),i=w("Direction: "),f=A("b"),a=L(),u=A("p"),c=w("Width: "),p=A("b"),C=w($)},m(k,S){_(k,e,S),y(e,t),_(k,l,S),_(k,o,S),y(o,i),y(o,f),f.innerHTML=s,_(k,a,S),_(k,u,S),y(u,c),y(u,p),y(p,C)},p(k,S){or(k),S&8&&n!==(n=k[4]+"")&&W(t,n),S&8&&s!==(s=k[5]+"")&&(f.innerHTML=s),S&8&&$!==($=k[6]+"")&&W(C,$)},d(k){k&&(g(e),g(l),g(o),g(a),g(u))}}}function kf(r){let e,n;return e=new oe({props:{$$slots:{default:[wf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2056&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yf(r){let e,n;const t=[H($t),{sourceLayer:$t},{paint:{"line-color":en(["get","kind"],{track:V.cycle_paths.track,lane:V.cycle_paths.lane,shared_use_segregated:V.cycle_paths.shared_use_segregated,shared_use_unsegregated:V.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ge,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let l={$$slots:{default:[kf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new $e({props:l}),e.$on("click",Tf),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const f=i&1?Q(t,[i&0&&x(H($t)),i&0&&{sourceLayer:$t},i&0&&{paint:{"line-color":en(["get","kind"],{track:V.cycle_paths.track,lane:V.cycle_paths.lane,shared_use_segregated:V.cycle_paths.shared_use_segregated,shared_use_unsegregated:V.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ge,"line-opacity":ne(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4]]):{};i&2048&&(f.$$scope={dirty:i,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Sf(r){let e,n,t,l,o,i;function f(u){r[2](u)}let s={id:$t,$$slots:{right:[vf],default:[hf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ie({props:s}),K.push(()=>ee(e,"checked",f));let a=r[0]&&ir(r);return o=new he({props:{url:`pmtiles://${pe()}/v1/${$t}.pmtiles`,$$slots:{default:[yf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),l=L(),h(o.$$.fragment)},m(u,c){b(e,u,c),_(u,t,c),a&&a.m(u,c),_(u,l,c),b(o,u,c),i=!0},p(u,[c]){const p={};c&2048&&(p.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,p.checked=u[0],te(()=>n=!1)),e.$set(p),u[0]?a?(a.p(u,c),c&1&&m(a,1)):(a=ir(u),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),d(a,1,1,()=>{a=null}),fe());const $={};c&2049&&($.$$scope={dirty:c,ctx:u}),o.$set($)},i(u){i||(m(e.$$.fragment,u),m(a),m(o.$$.fragment,u),i=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),i=!1},d(u){u&&(g(t),g(l)),v(e,u),a&&a.d(u),v(o,u)}}}let $t="cycle_paths";function Cf(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function Tf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Of(r,e,n){let t=[["Separated tracks",V.cycle_paths.track],["Unprotected lanes",V.cycle_paths.lane],["Shared-use (segregated)",V.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",V.cycle_paths.shared_use_unsegregated]],l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Lf extends z{constructor(e){super(),q(this,e,Of,Sf,G,{})}}function Af(r){let e,n,t;return e=new Te({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Major Road Network`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:re,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function Pf(r){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ef(r){let e,n,t,l,o,i,f;return t=new Y({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Pf]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("Data from the "),h(t.$$.fragment),l=w(", as of September 2021."),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),y(e,n),b(t,e,null),y(e,l),_(s,o,a),b(i,s,a),f=!0},p(s,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){f||(m(t.$$.fragment,s),m(i.$$.fragment,s),f=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),f=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function Nf(r){let e,n,t;return n=new ue({props:{$$slots:{default:[Ef]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),J(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function If(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){_(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&W(t,n)},d(l){l&&g(e)}}}function Df(r){let e,n;return e=new oe({props:{$$slots:{default:[If,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mf(r){let e,n;const t=[H(mt),{sourceLayer:mt},{paint:{"line-color":r[1],"line-width":7,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Df]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new $e({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const f=i&3?Q(t,[i&0&&x(H(mt)),i&0&&{sourceLayer:mt},i&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":ne(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(f.$$scope={dirty:i,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ff(r){let e,n,t,l,o;function i(s){r[2](s)}let f={id:mt,$$slots:{right:[Nf],default:[Af]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ie({props:f}),K.push(()=>ee(e,"checked",i)),l=new he({props:{url:`pmtiles://${pe()}/v1/${mt}.pmtiles`,$$slots:{default:[Mf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,u.checked=s[0],te(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let mt="mrn";function jf(r,e,n){let t=V.mrn,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Bf extends z{constructor(e){super(),q(this,e,jf,Ff,G,{})}}function Hf(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Rf(r){let e;return{c(){e=w("the PCT website")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Wf(r){let e;return{c(){e=w("2017 journal article")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Uf(r){let e,n,t,l,o,i,f,s,a,u,c;return f=new Y({props:{href:"https://www.pct.bike",$$slots:{default:[Rf]},$$scope:{ctx:r}}}),a=new Y({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Wf]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=L(),t=A("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=L(),o=A("p"),i=w("See "),h(f.$$.fragment),s=w(" and "),h(a.$$.fragment),u=w(" for details on methodology and data sources.")},m(p,$){_(p,e,$),_(p,n,$),_(p,t,$),_(p,l,$),_(p,o,$),y(o,i),b(f,o,null),y(o,s),b(a,o,null),y(o,u),c=!0},p(p,$){const C={};$&1024&&(C.$$scope={dirty:$,ctx:p}),f.$set(C);const k={};$&1024&&(k.$$scope={dirty:$,ctx:p}),a.$set(k)},i(p){c||(m(f.$$.fragment,p),m(a.$$.fragment,p),c=!0)},o(p){d(f.$$.fragment,p),d(a.$$.fragment,p),c=!1},d(p){p&&(g(e),g(n),g(t),g(l),g(o)),v(f),v(a)}}}function Gf(r){let e,n,t;return n=new ue({props:{$$slots:{default:[Uf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),J(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&1024&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function fr(r){let e,n,t,l,o,i,f,s;e=new xe({props:{colorScale:r[3],limits:r[4]}});function a($){r[7]($)}let u={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(u.value=r[0]),t=new yr({props:u}),K.push(()=>ee(t,"value",a));function c($){r[8]($)}let p={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(p.value=r[1]),i=new Wt({props:p}),K.push(()=>ee(i,"value",c)),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),o=L(),h(i.$$.fragment)},m($,C){b(e,$,C),_($,n,C),b(t,$,C),_($,o,C),b(i,$,C),s=!0},p($,C){const k={};!l&&C&1&&(l=!0,k.value=$[0],te(()=>l=!1)),t.$set(k);const S={};!f&&C&2&&(f=!0,S.value=$[1],te(()=>f=!1)),i.$set(S)},i($){s||(m(e.$$.fragment,$),m(t.$$.fragment,$),m(i.$$.fragment,$),s=!0)},o($){d(e.$$.fragment,$),d(t.$$.fragment,$),d(i.$$.fragment,$),s=!1},d($){$&&(g(n),g(o)),v(e,$),v(t,$),v(i,$)}}}function zf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new pn(!1),t=Ce(),e.a=t},m(l,o){e.m(n,l,o),_(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(g(t),e.d())}}}function qf(r){let e,n;return e=new oe({props:{$$slots:{default:[zf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Vf(r){let e,n;const t=[H(He),{sourceLayer:He},{paint:{"line-color":ve(["get",r[1]],r[4],r[3]),"line-width":Ge,"line-opacity":ne(1,.5)}},{layout:{visibility:r[2]&&r[0]==He?"visible":"none"}}];let l={$$slots:{default:[qf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new $e({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const f=i&31?Q(t,[i&0&&x(H(He)),i&0&&{sourceLayer:He},i&26&&{paint:{"line-color":ve(["get",o[1]],o[4],o[3]),"line-width":Ge,"line-opacity":ne(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==He?"visible":"none"}}]):{};i&1024&&(f.$$scope={dirty:i,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Xf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new pn(!1),t=Ce(),e.a=t},m(l,o){e.m(n,l,o),_(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(g(t),e.d())}}}function Kf(r){let e,n;return e=new oe({props:{$$slots:{default:[Xf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Yf(r){let e,n;const t=[H(rt),{sourceLayer:rt},{paint:{"line-color":ve(["get",r[1]],r[4],r[3]),"line-width":Ge,"line-opacity":ne(1,.5)}},{layout:{visibility:r[2]&&r[0]==rt?"visible":"none"}}];let l={$$slots:{default:[Kf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new $e({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const f=i&31?Q(t,[i&0&&x(H(rt)),i&0&&{sourceLayer:rt},i&26&&{paint:{"line-color":ve(["get",o[1]],o[4],o[3]),"line-width":Ge,"line-opacity":ne(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==rt?"visible":"none"}}]):{};i&1024&&(f.$$scope={dirty:i,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Jf(r){let e,n,t,l,o,i,f,s;function a(p){r[6](p)}let u={id:He,$$slots:{right:[Gf],default:[Hf]},$$scope:{ctx:r}};r[2]!==void 0&&(u.checked=r[2]),e=new ie({props:u}),K.push(()=>ee(e,"checked",a));let c=r[2]&&fr(r);return o=new he({props:{url:`pmtiles://${pe()}/v1/${He}.pmtiles`,$$slots:{default:[Vf]},$$scope:{ctx:r}}}),f=new he({props:{url:`pmtiles://${pe()}/v1/${rt}.pmtiles`,$$slots:{default:[Yf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),c&&c.c(),l=L(),h(o.$$.fragment),i=L(),h(f.$$.fragment)},m(p,$){b(e,p,$),_(p,t,$),c&&c.m(p,$),_(p,l,$),b(o,p,$),_(p,i,$),b(f,p,$),s=!0},p(p,[$]){const C={};$&1024&&(C.$$scope={dirty:$,ctx:p}),!n&&$&4&&(n=!0,C.checked=p[2],te(()=>n=!1)),e.$set(C),p[2]?c?(c.p(p,$),$&4&&m(c,1)):(c=fr(p),c.c(),m(c,1),c.m(l.parentNode,l)):c&&(ae(),d(c,1,1,()=>{c=null}),fe());const k={};$&1031&&(k.$$scope={dirty:$,ctx:p}),o.$set(k);const S={};$&1031&&(S.$$scope={dirty:$,ctx:p}),f.$set(S)},i(p){s||(m(e.$$.fragment,p),m(c),m(o.$$.fragment,p),m(f.$$.fragment,p),s=!0)},o(p){d(e.$$.fragment,p),d(c),d(o.$$.fragment,p),d(f.$$.fragment,p),s=!1},d(p){p&&(g(t),g(l),g(i)),v(e,p),c&&c.d(p),v(o,p),v(f,p)}}}let He="pct_commute",rt="pct_school";function Zf(r,e,n){let t=V.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=He,i="baseline",f=!1;function s(p){let $=p.baseline,C=p.gov_target,k=p.go_dutch,S=`<h2>Trip purpose: ${o==He?"commuting":"school"}</h2>`;if(S+=`<p>Baseline (2011): <b>${$.toLocaleString()}</b></p>`,$==0)S+=`<p>Government target (2025): <b>${C.toLocaleString()}</b></p>`,S+=`<p>Go Dutch: <b>${k.toLocaleString()}</b></p>`;else{let T=(C/$).toFixed(1),N=(k/$).toFixed(1);S+=`<p>Government target (2025): ${C.toLocaleString()} (<b>${T}x</b> of baseline)</p>`,S+=`<p>Go Dutch: ${k.toLocaleString()} (<b>${N}x</b> of baseline)</p>`}return S}function a(p){f=p,n(2,f)}function u(p){o=p,n(0,o)}function c(p){i=p,n(1,i)}return[o,i,f,t,l,s,a,u,c]}class Qf extends z{constructor(e){super(),q(this,e,Zf,Jf,G,{})}}function xf(r){let e;return{c(){e=w("OS Speeds")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function eu(r){let e;return{c(){e=w("Basemap")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function tu(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function nu(r){let e,n,t,l,o,i,f,s,a,u,c,p;return t=new Y({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[eu]},$$scope:{ctx:r}}}),u=new Y({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[tu]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("The average speed data is collected over a six-month period by "),h(t.$$.fragment),l=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=L(),i=A("p"),i.textContent="Data valid as of 1 September, 2023",f=L(),s=A("p"),a=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),c=w(".")},m($,C){_($,e,C),y(e,n),b(t,e,null),y(e,l),_($,o,C),_($,i,C),_($,f,C),_($,s,C),y(s,a),b(u,s,null),y(s,c),p=!0},p($,C){const k={};C&256&&(k.$$scope={dirty:C,ctx:$}),t.$set(k);const S={};C&256&&(S.$$scope={dirty:C,ctx:$}),u.$set(S)},i($){p||(m(t.$$.fragment,$),m(u.$$.fragment,$),p=!0)},o($){d(t.$$.fragment,$),d(u.$$.fragment,$),p=!1},d($){$&&(g(e),g(o),g(i),g(f),g(s)),v(t),v(u)}}}function ru(r){let e,n,t;return n=new ue({props:{$$slots:{default:[nu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),J(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function ur(r){let e,n,t,l,o;e=new xe({props:{colorScale:r[2],limits:r[3]}});function i(s){r[6](s)}let f={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(f.value=r[0]),t=new yr({props:f}),K.push(()=>ee(t,"value",i)),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(s,a){b(e,s,a),_(s,n,a),b(t,s,a),o=!0},p(s,a){const u={};!l&&a&1&&(l=!0,u.value=s[0],te(()=>l=!1)),t.$set(u)},i(s){o||(m(e.$$.fragment,s),m(t.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),o=!1},d(s){s&&g(n),v(e,s),v(t,s)}}}function lu(r){let e,n,t=r[7].indicative_mph+"",l,o,i,f,s,a=r[7].highest_mph+"",u,c,p=r[4][r[7].highest_description]+"",$,C;return{c(){e=A("p"),n=w("Posted speed limit: "),l=w(t),o=w(" mph"),i=L(),f=A("p"),s=w("Highest average speed: "),u=w(a),c=w(" mph (during "),$=w(p),C=w(")")},m(k,S){_(k,e,S),y(e,n),y(e,l),y(e,o),_(k,i,S),_(k,f,S),y(f,s),y(f,u),y(f,c),y(f,$),y(f,C)},p(k,S){S&128&&t!==(t=k[7].indicative_mph+"")&&W(l,t),S&128&&a!==(a=k[7].highest_mph+"")&&W(u,a),S&128&&p!==(p=k[4][k[7].highest_description]+"")&&W($,p)},d(k){k&&(g(e),g(i),g(f))}}}function ou(r){let e,n;return e=new oe({props:{$$slots:{default:[lu,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function su(r){let e,n;const t=[H(_t),{sourceLayer:_t},{paint:{"line-color":ve(["get",r[0]],r[3],r[2]),"line-width":Ge,"line-opacity":ne(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[ou]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new $e({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const f=i&15?Q(t,[i&0&&x(H(_t)),i&0&&{sourceLayer:_t},i&13&&{paint:{"line-color":ve(["get",o[0]],o[3],o[2]),"line-width":Ge,"line-opacity":ne(1,.5)}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};i&256&&(f.$$scope={dirty:i,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function iu(r){let e,n,t,l,o,i;function f(u){r[5](u)}let s={id:_t,$$slots:{right:[ru],default:[xf]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new ie({props:s}),K.push(()=>ee(e,"checked",f));let a=r[1]&&ur(r);return o=new he({props:{url:`pmtiles://${$n()}/v1/${_t}.pmtiles`,$$slots:{default:[su]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),l=L(),h(o.$$.fragment)},m(u,c){b(e,u,c),_(u,t,c),a&&a.m(u,c),_(u,l,c),b(o,u,c),i=!0},p(u,[c]){const p={};c&256&&(p.$$scope={dirty:c,ctx:u}),!n&&c&2&&(n=!0,p.checked=u[1],te(()=>n=!1)),e.$set(p),u[1]?a?(a.p(u,c),c&2&&m(a,1)):(a=ur(u),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),d(a,1,1,()=>{a=null}),fe());const $={};c&259&&($.$$scope={dirty:c,ctx:u}),o.$set($)},i(u){i||(m(e.$$.fragment,u),m(a),m(o.$$.fragment,u),i=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),i=!1},d(u){u&&(g(t),g(l)),v(e,u),a&&a.d(u),v(o,u)}}}let _t="road_speeds";function au(r,e,n){let t=V.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",i=!1,f={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function s(u){i=u,n(1,i)}function a(u){o=u,n(0,o)}return[o,i,t,l,f,s,a]}class fu extends z{constructor(e){super(),q(this,e,au,iu,G,{})}}function uu(r){let e;return{c(){e=w("OS Road widths")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function cu(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function pu(r){let e,n,t,l,o,i,f,s,a;return f=new Y({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[cu]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=L(),t=A("p"),t.textContent="Data valid as of 1 September, 2023",l=L(),o=A("p"),i=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),s=w(".")},m(u,c){_(u,e,c),_(u,n,c),_(u,t,c),_(u,l,c),_(u,o,c),y(o,i),b(f,o,null),y(o,s),a=!0},p(u,c){const p={};c&32&&(p.$$scope={dirty:c,ctx:u}),f.$set(p)},i(u){a||(m(f.$$.fragment,u),a=!0)},o(u){d(f.$$.fragment,u),a=!1},d(u){u&&(g(e),g(n),g(t),g(l),g(o)),v(f)}}}function $u(r){let e,n,t;return n=new ue({props:{$$slots:{default:[pu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),J(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function cr(r){let e,n;return e=new xe({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:re,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mu(r){let e,n,t,l=r[4].average+"",o,i,f,s,a,u,c=r[4].minimum+"",p,$;return{c(){e=A("p"),n=w("Average width: "),t=A("b"),o=w(l),i=w(`
        meters`),f=L(),s=A("p"),a=w("Minimum width: "),u=A("b"),p=w(c),$=w(`
        meters`)},m(C,k){_(C,e,k),y(e,n),y(e,t),y(t,o),y(e,i),_(C,f,k),_(C,s,k),y(s,a),y(s,u),y(u,p),y(s,$)},p(C,k){k&16&&l!==(l=C[4].average+"")&&W(o,l),k&16&&c!==(c=C[4].minimum+"")&&W(p,c)},d(C){C&&(g(e),g(f),g(s))}}}function _u(r){let e,n;return e=new oe({props:{$$slots:{default:[mu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gu(r){let e,n;const t=[H(gt),{sourceLayer:gt},{paint:{"line-color":ve(["get","average"],r[2],r[1]),"line-width":Ge,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[_u]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new $e({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const f=i&7?Q(t,[i&0&&x(H(gt)),i&0&&{sourceLayer:gt},i&6&&{paint:{"line-color":ve(["get","average"],o[2],o[1]),"line-width":Ge,"line-opacity":ne(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&32&&(f.$$scope={dirty:i,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function du(r){let e,n,t,l,o,i;function f(u){r[3](u)}let s={id:gt,$$slots:{right:[$u],default:[uu]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ie({props:s}),K.push(()=>ee(e,"checked",f));let a=r[0]&&cr(r);return o=new he({props:{url:`pmtiles://${$n()}/v1/${gt}.pmtiles`,$$slots:{default:[gu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),l=L(),h(o.$$.fragment)},m(u,c){b(e,u,c),_(u,t,c),a&&a.m(u,c),_(u,l,c),b(o,u,c),i=!0},p(u,[c]){const p={};c&32&&(p.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,p.checked=u[0],te(()=>n=!1)),e.$set(p),u[0]?a?(a.p(u,c),c&1&&m(a,1)):(a=cr(u),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),d(a,1,1,()=>{a=null}),fe());const $={};c&33&&($.$$scope={dirty:c,ctx:u}),o.$set($)},i(u){i||(m(e.$$.fragment,u),m(a),m(o.$$.fragment,u),i=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),i=!1},d(u){u&&(g(t),g(l)),v(e,u),a&&a.d(u),v(o,u)}}}let gt="road_widths";function hu(r,e,n){let t=V.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function i(f){o=f,n(0,o)}return[o,t,l,i]}class bu extends z{constructor(e){super(),q(this,e,hu,du,G,{})}}function vu(r){let e,n,t;return{c(){e=A("input"),J(e,"class","govuk-file-upload"),J(e,"id","load-criticals"),J(e,"type","file")},m(l,o){_(l,e,o),r[7](e),n||(t=vt(e,"change",r[5]),n=!0)},p:re,d(l){l&&g(e),r[7](null),n=!1,t()}}}function pr(r){let e,n;return e=new Dt({props:{small:!0,$$slots:{default:[ku]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wu(r){let e,n,t=r[2].toLocaleString()+"",l,o,i;return e=new Te({props:{color:Lt}}),{c(){h(e.$$.fragment),n=w(`
        Show `),l=w(t),o=w(" issues")},m(f,s){b(e,f,s),_(f,n,s),_(f,l,s),_(f,o,s),i=!0},p(f,s){(!i||s&4)&&t!==(t=f[2].toLocaleString()+"")&&W(l,t)},i(f){i||(m(e.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),i=!1},d(f){f&&(g(n),g(l),g(o)),v(e,f)}}}function ku(r){let e,n,t;function l(i){r[8](i)}let o={id:"show-criticals",$$slots:{default:[wu]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new ie({props:o}),K.push(()=>ee(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,f){b(e,i,f),t=!0},p(i,f){const s={};f&2052&&(s.$$scope={dirty:f,ctx:i}),!n&&f&2&&(n=!0,s.checked=i[1],te(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){d(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function yu(r){let e,n,t,l,o,i;e=new kr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[vu]},$$scope:{ctx:r}}}),t=new Sr({props:{errorMessage:r[3]}});let f=r[2]>0&&pr(r);return{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),f&&f.c(),o=Ce()},m(s,a){b(e,s,a),_(s,n,a),b(t,s,a),_(s,l,a),f&&f.m(s,a),_(s,o,a),i=!0},p(s,a){const u={};a&2049&&(u.$$scope={dirty:a,ctx:s}),e.$set(u);const c={};a&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?f?(f.p(s,a),a&4&&m(f,1)):(f=pr(s),f.c(),m(f,1),f.m(o.parentNode,o)):f&&(ae(),d(f,1,1,()=>{f=null}),fe())},i(s){i||(m(e.$$.fragment,s),m(t.$$.fragment,s),m(f),i=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),d(f),i=!1},d(s){s&&(g(n),g(l),g(o)),v(e,s),v(t,s),f&&f.d(s)}}}function Su(r){let e,n,t=r[10].critical_type+"",l,o,i,f,s,a=r[10].location_description+"",u,c,p,$,C,k=r[10].notes+"",S,T,N,D,F,O,E,P=r[10].id+"",I,M,R,j,U,X=(r[10].inspector??"???")+"",ce,tt,se,me=r[10].submission_time+"",we,ke,_e,Xe,Oe,Le=r[10].scheme_reference+"",Me,Ae,Ke,ze=r[10].current_design_stage+"",B;return{c(){e=A("div"),n=A("h2"),l=w(t),o=L(),i=A("p"),f=A("u"),f.textContent="Location",s=w(`
          : `),u=w(a),c=L(),p=A("p"),$=A("u"),$.textContent="Notes",C=w(`
          : `),S=w(k),T=L(),N=A("hr"),D=L(),F=A("p"),O=w("Critical issue ID: "),E=A("b"),I=w(P),M=L(),R=A("p"),j=w("Submitted by "),U=A("b"),ce=w(X),tt=w(`
          at
          `),se=A("b"),we=w(me),ke=L(),_e=A("p"),Xe=w("For scheme "),Oe=A("b"),Me=w(Le),Ae=w(`
          in stage
          `),Ke=A("b"),B=w(ze),De(e,"max-width","30vw")},m(ge,be){_(ge,e,be),y(e,n),y(n,l),y(e,o),y(e,i),y(i,f),y(i,s),y(i,u),y(e,c),y(e,p),y(p,$),y(p,C),y(p,S),y(e,T),y(e,N),y(e,D),y(e,F),y(F,O),y(F,E),y(E,I),y(e,M),y(e,R),y(R,j),y(R,U),y(U,ce),y(R,tt),y(R,se),y(se,we),y(e,ke),y(e,_e),y(_e,Xe),y(_e,Oe),y(Oe,Me),y(_e,Ae),y(_e,Ke),y(Ke,B)},p(ge,be){be&1024&&t!==(t=ge[10].critical_type+"")&&W(l,t),be&1024&&a!==(a=ge[10].location_description+"")&&W(u,a),be&1024&&k!==(k=ge[10].notes+"")&&W(S,k),be&1024&&P!==(P=ge[10].id+"")&&W(I,P),be&1024&&X!==(X=(ge[10].inspector??"???")+"")&&W(ce,X),be&1024&&me!==(me=ge[10].submission_time+"")&&W(we,me),be&1024&&Le!==(Le=ge[10].scheme_reference+"")&&W(Me,Le),be&1024&&ze!==(ze=ge[10].current_design_stage+"")&&W(B,ze)},d(ge){ge&&g(e)}}}function Cu(r){let e,n;return e=new oe({props:{$$slots:{default:[Su,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Tu(r){let e,n,t,l,o,i;const f=[H(`${lt}-clusters`),{applyToClusters:!0},{paint:{"circle-color":Lt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let s={};for(let $=0;$<f.length;$+=1)s=Z(s,f[$]);e=new Qe({props:s}),e.$on("click",r[6]);const a=[H(`${lt}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let u={};for(let $=0;$<a.length;$+=1)u=Z(u,a[$]);t=new Al({props:u});const c=[H(`${lt}-points`),{applyToClusters:!1},{paint:{"circle-color":Lt,"circle-opacity":.9,"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let p={$$slots:{default:[Cu]},$$scope:{ctx:r}};for(let $=0;$<c.length;$+=1)p=Z(p,c[$]);return o=new Qe({props:p}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(o.$$.fragment)},m($,C){b(e,$,C),_($,n,C),b(t,$,C),_($,l,C),b(o,$,C),i=!0},p($,C){const k=C&2?Q(f,[C&0&&x(H(`${lt}-clusters`)),f[1],C&0&&{paint:{"circle-color":Lt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},C&2&&{layout:{visibility:$[1]?"visible":"none"}},f[4]]):{};e.$set(k);const S=C&2?Q(a,[C&0&&x(H(`${lt}-counts`)),a[1],C&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:$[1]?"visible":"none"}}]):{};t.$set(S);const T=C&2?Q(c,[C&0&&x(H(`${lt}-points`)),c[1],C&0&&{paint:{"circle-color":Lt,"circle-opacity":.9,"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},C&2&&{layout:{visibility:$[1]?"visible":"none"}}]):{};C&2048&&(T.$$scope={dirty:C,ctx:$}),o.$set(T)},i($){i||(m(e.$$.fragment,$),m(t.$$.fragment,$),m(o.$$.fragment,$),i=!0)},o($){d(e.$$.fragment,$),d(t.$$.fragment,$),d(o.$$.fragment,$),i=!1},d($){$&&(g(n),g(l)),v(e,$),v(t,$),v(o,$)}}}function Ou(r){let e,n,t,l;return e=new Ne({props:{label:"Critical Issues",$$slots:{default:[yu]},$$scope:{ctx:r}}}),t=new Ot({props:{data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Tu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,i){b(e,o,i),_(o,n,i),b(t,o,i),l=!0},p(o,[i]){const f={};i&2063&&(f.$$scope={dirty:i,ctx:o}),e.$set(f);const s={};i&16&&(s.data=o[4]),i&2050&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&g(n),v(e,o),v(t,o)}}}let lt="criticals",Lt="red";function Lu(r,e,n){let t;de(r,It,$=>n(9,t=$));let l,o=!0,i=0,f="",s=nn();async function a($){try{n(4,s=await Us(l.files[0])),n(2,i=s.features.length),n(3,f="")}catch(C){n(3,f=`The file you loaded is broken: ${C}`)}}function u($){t.getSource(lt).getClusterExpansionZoom($.detail.features[0].properties.cluster_id,(C,k)=>{C||t.easeTo({center:$.detail.features[0].geometry.coordinates,zoom:k})})}function c($){K[$?"unshift":"push"](()=>{l=$,n(0,l)})}function p($){o=$,n(1,o)}return[l,o,i,f,s,a,u,c,p]}class Au extends z{constructor(e){super(),q(this,e,Lu,Ou,G,{})}}function Pu(r){let e,n,t;return e=new Te({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Crossings`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:re,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function Eu(r){let e;return{c(){e=w("crossing")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Nu(r){let e,n,t,l,o,i,f;return t=new Y({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Eu]},$$scope:{ctx:r}}}),i=new et({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),y(e,n),b(t,e,null),y(e,l),_(s,o,a),b(i,s,a),f=!0},p(s,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){f||(m(t.$$.fragment,s),m(i.$$.fragment,s),f=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),f=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function Iu(r){let e,n,t;return n=new ue({props:{$$slots:{default:[Nu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),J(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Du(r){let e,n=$r(r[3])+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){_(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=$r(l[3])+"")&&W(t,n)},d(l){l&&g(e)}}}function Mu(r){let e,n;return e=new oe({props:{$$slots:{default:[Du,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Fu(r){let e,n;const t=[H(dt),{sourceLayer:dt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let l={$$slots:{default:[Mu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new Qe({props:l}),e.$on("click",Bu),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const f=i&3?Q(t,[i&0&&x(H(dt)),i&0&&{sourceLayer:dt},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4]]):{};i&16&&(f.$$scope={dirty:i,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ju(r){let e,n,t,l,o;function i(s){r[2](s)}let f={id:dt,$$slots:{right:[Iu],default:[Pu]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ie({props:f}),K.push(()=>ee(e,"checked",i)),l=new he({props:{url:`pmtiles://${pe()}/v1/${dt}.pmtiles`,$$slots:{default:[Fu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,u.checked=s[0],te(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let dt="crossings";function $r(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function Bu(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Hu(r,e,n){let t=V.crossings,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ru extends z{constructor(e){super(),q(this,e,Hu,ju,G,{})}}function Wu(r){let e,n,t;return e=new Te({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Cycle parking`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:re,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function Uu(r){let e;return{c(){e=w("OpenStreetMap")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Gu(r){let e,n,t,l,o,i,f;return t=new Y({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Uu]},$$scope:{ctx:r}}}),i=new et({}),{c(){e=A("p"),n=w("Cycle parking, according to "),h(t.$$.fragment),l=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),y(e,n),b(t,e,null),y(e,l),_(s,o,a),b(i,s,a),f=!0},p(s,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){f||(m(t.$$.fragment,s),m(i.$$.fragment,s),f=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),f=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function zu(r){let e,n,t;return n=new ue({props:{$$slots:{default:[Gu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),J(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function qu(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=A("p"),n=w("Capacity: "),t=A("b"),o=w(l)},m(i,f){_(i,e,f),y(e,n),y(e,t),y(t,o)},p(i,f){f&8&&l!==(l=(i[3].capacity??"unknown")+"")&&W(o,l)},d(i){i&&g(e)}}}function Vu(r){let e,n;return e=new oe({props:{$$slots:{default:[qu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xu(r){let e,n;const t=[H(ht),{sourceLayer:ht},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0}];let l={$$slots:{default:[Vu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new Qe({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const f=i&3?Q(t,[i&0&&x(H(ht)),i&0&&{sourceLayer:ht},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4]]):{};i&16&&(f.$$scope={dirty:i,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ku(r){let e,n,t,l,o;function i(s){r[2](s)}let f={id:ht,$$slots:{right:[zu],default:[Wu]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ie({props:f}),K.push(()=>ee(e,"checked",i)),l=new he({props:{url:`pmtiles://${pe()}/v1/${ht}.pmtiles`,$$slots:{default:[Xu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,u.checked=s[0],te(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let ht="cycle_parking";function Yu(r,e,n){let t=V.cycle_parking,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ju extends z{constructor(e){super(),q(this,e,Yu,Ku,G,{})}}function Zu(r){let e,n,t,l;return e=new Te({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=L(),t=w(r[2])},m(o,i){b(e,o,i),_(o,n,i),_(o,t,i),l=!0},p(o,i){(!l||i&4)&&W(t,o[2])},i(o){l||(m(e.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),l=!1},d(o){o&&(g(n),g(t)),v(e,o)}}}function Qu(r){let e;const n=r[5].default,t=kt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&yt(t,n,l,l[7],e?Ct(n,l[7],o,null):St(l[7]),null)},i(l){e||(m(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function xu(r){let e,n,t;return n=new ue({props:{$$slots:{default:[Qu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),J(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&128&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function ec(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){_(l,e,o),y(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&W(t,n)},d(l){l&&g(e)}}}function tc(r){let e,n;return e=new oe({props:{$$slots:{default:[ec,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function nc(r){let e,n;const t=[H(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":ne(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0}];let l={$$slots:{default:[tc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new qe({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const f=i&25?Q(t,[i&1&&x(H(o[0])),i&1&&{sourceLayer:o[0]},i&16&&{paint:{"fill-color":o[4],"fill-opacity":ne(.7,1)}},i&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4]]):{};i&130&&(f.$$scope={dirty:i,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function rc(r){let e,n,t,l,o;function i(s){r[6](s)}let f={id:r[0],$$slots:{right:[xu],default:[Zu]},$$scope:{ctx:r}};return r[3]!==void 0&&(f.checked=r[3]),e=new ie({props:f}),K.push(()=>ee(e,"checked",i)),l=new he({props:{url:`pmtiles://${pe()}/v1/${r[0]}.pmtiles`,$$slots:{default:[nc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const u={};a&1&&(u.id=s[0]),a&132&&(u.$$scope={dirty:a,ctx:s}),!n&&a&8&&(n=!0,u.checked=s[3],te(()=>n=!1)),e.$set(u);const c={};a&1&&(c.url=`pmtiles://${pe()}/v1/${s[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}function lc(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:i}=e,{pluralNoun:f}=e,s=V[o],a=!1;function u(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,i=c.singularNoun),"pluralNoun"in c&&n(2,f=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,i,f,a,s,t,u,l]}class _n extends z{constructor(e){super(),q(this,e,lc,rc,G,{name:0,singularNoun:1,pluralNoun:2})}}function oc(r){let e;return{c(){e=w("hospital")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function sc(r){let e,n,t,l,o,i,f;return t=new Y({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[oc]},$$scope:{ctx:r}}}),i=new et({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),y(e,n),b(t,e,null),y(e,l),_(s,o,a),b(i,s,a),f=!0},p(s,a){const u={};a&1&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){f||(m(t.$$.fragment,s),m(i.$$.fragment,s),f=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),f=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function ic(r){let e,n;return e=new _n({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[sc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class ac extends z{constructor(e){super(),q(this,e,null,ic,G,{})}}function fc(r){let e,n,t;return e=new Te({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Railway Stations`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:re,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function uc(r){let e;return{c(){e=w("railway station")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function cc(r){let e,n,t,l,o,i,f;return t=new Y({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[uc]},$$scope:{ctx:r}}}),i=new et({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),y(e,n),b(t,e,null),y(e,l),_(s,o,a),b(i,s,a),f=!0},p(s,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){f||(m(t.$$.fragment,s),m(i.$$.fragment,s),f=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),f=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function pc(r){let e,n,t;return n=new ue({props:{$$slots:{default:[cc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),J(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function $c(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){_(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&W(t,n)},d(l){l&&g(e)}}}function mc(r){let e,n;return e=new oe({props:{$$slots:{default:[$c,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _c(r){let e,n;const t=[H(qt),{paint:{"circle-color":r[1],"circle-radius":Gt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[mc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new Qe({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const f=i&3?Q(t,[i&0&&x(H(qt)),i&2&&{paint:{"circle-color":o[1],"circle-radius":Gt/2}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(f.$$scope={dirty:i,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function gc(r){let e,n,t,l,o;function i(s){r[2](s)}let f={id:qt,$$slots:{right:[pc],default:[fc]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ie({props:f}),K.push(()=>ee(e,"checked",i)),l=new Ot({props:{data:`${pe()}/v1/${qt}.geojson`,$$slots:{default:[_c]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,u.checked=s[0],te(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let qt="railway_stations";function dc(r,e,n){let t=V.railway_stations,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class hc extends z{constructor(e){super(),q(this,e,dc,gc,G,{})}}function bc(r){let e;return{c(){e=w("primary and secondary schools")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function vc(r){let e,n,t,l,o,i,f;return t=new Y({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[bc]},$$scope:{ctx:r}}}),i=new et({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),y(e,n),b(t,e,null),y(e,l),_(s,o,a),b(i,s,a),f=!0},p(s,a){const u={};a&1&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){f||(m(t.$$.fragment,s),m(i.$$.fragment,s),f=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),f=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function wc(r){let e,n;return e=new _n({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[vc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class kc extends z{constructor(e){super(),q(this,e,null,wc,G,{})}}function yc(r){let e;return{c(){e=w("sports pitches")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Sc(r){let e;return{c(){e=w("sports centres")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Cc(r){let e,n,t,l,o,i,f,s,a;return t=new Y({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[yc]},$$scope:{ctx:r}}}),o=new Y({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Sc]},$$scope:{ctx:r}}}),s=new et({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" and "),h(o.$$.fragment),i=w(" data from OpenStreetMap (as of 9 August 2023)."),f=L(),h(s.$$.fragment)},m(u,c){_(u,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),_(u,f,c),b(s,u,c),a=!0},p(u,c){const p={};c&1&&(p.$$scope={dirty:c,ctx:u}),t.$set(p);const $={};c&1&&($.$$scope={dirty:c,ctx:u}),o.$set($)},i(u){a||(m(t.$$.fragment,u),m(o.$$.fragment,u),m(s.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(o.$$.fragment,u),d(s.$$.fragment,u),a=!1},d(u){u&&(g(e),g(f)),v(t),v(o),v(s,u)}}}function Tc(r){let e,n;return e=new _n({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Cc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Oc extends z{constructor(e){super(),q(this,e,null,Tc,G,{})}}function mr(r){const e=jc(r[5]);r[6]=e[0],r[7]=e[1],r[8]=e[2],r[9]=e[3]}function Lc(r){let e;return{c(){e=w("Vehicle counts")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ac(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Pc(r){let e;return{c(){e=w("methodology")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ec(r){let e,n,t,l,o,i,f,s,a,u,c;return t=new Y({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Ac]},$$scope:{ctx:r}}}),o=new Y({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Pc]},$$scope:{ctx:r}}}),u=new Ve({}),{c(){e=A("p"),n=w("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),l=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),i=w(" for details and caveats about the measurements."),f=L(),s=A("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=L(),h(u.$$.fragment)},m(p,$){_(p,e,$),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),_(p,f,$),_(p,s,$),_(p,a,$),b(u,p,$),c=!0},p(p,$){const C={};$&1024&&(C.$$scope={dirty:$,ctx:p}),t.$set(C);const k={};$&1024&&(k.$$scope={dirty:$,ctx:p}),o.$set(k)},i(p){c||(m(t.$$.fragment,p),m(o.$$.fragment,p),m(u.$$.fragment,p),c=!0)},o(p){d(t.$$.fragment,p),d(o.$$.fragment,p),d(u.$$.fragment,p),c=!1},d(p){p&&(g(e),g(f),g(s),g(a)),v(t),v(o),v(u,p)}}}function Nc(r){let e,n,t;return n=new ue({props:{$$slots:{default:[Ec]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),J(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&1024&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function _r(r){let e,n;return e=new xe({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:re,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ic(r){mr(r);let e,n=r[6]+"",t,l,o,i,f,s=r[7]+"",a,u,c,p,$,C=r[8]+"",k,S,T,N,D,F=r[9]+"",O;return{c(){e=A("h2"),t=w(n),l=L(),o=A("p"),i=w("Total motor vehicles (2022 AADF): "),f=A("b"),a=w(s),u=L(),c=A("p"),p=w("Total pedal cycles (2022 AADF): "),$=A("b"),k=w(C),S=L(),T=A("p"),N=w("Count method: "),D=A("b"),O=w(F)},m(E,P){_(E,e,P),y(e,t),_(E,l,P),_(E,o,P),y(o,i),y(o,f),y(f,a),_(E,u,P),_(E,c,P),y(c,p),y(c,$),y($,k),_(E,S,P),_(E,T,P),y(T,N),y(T,D),y(D,O)},p(E,P){mr(E),P&32&&n!==(n=E[6]+"")&&W(t,n),P&32&&s!==(s=E[7]+"")&&W(a,s),P&32&&C!==(C=E[8]+"")&&W(k,C),P&32&&F!==(F=E[9]+"")&&W(O,F)},d(E){E&&(g(e),g(l),g(o),g(u),g(c),g(S),g(T))}}}function Dc(r){let e,n;return e=new oe({props:{$$slots:{default:[Ic,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1056&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mc(r){let e,n;const t=[H(bt),{sourceLayer:bt},{paint:{"circle-color":ve(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let l={$$slots:{default:[Dc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new Qe({props:l}),e.$on("click",Bc),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const f=i&7?Q(t,[i&0&&x(H(bt)),i&0&&{sourceLayer:bt},i&6&&{paint:{"circle-color":ve(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4]]):{};i&1024&&(f.$$scope={dirty:i,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Fc(r){let e,n,t,l,o,i;function f(u){r[4](u)}let s={id:bt,$$slots:{right:[Nc],default:[Lc]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ie({props:s}),K.push(()=>ee(e,"checked",f));let a=r[0]&&_r(r);return o=new he({props:{url:`pmtiles://${pe()}/v1/${bt}.pmtiles`,$$slots:{default:[Mc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),l=L(),h(o.$$.fragment)},m(u,c){b(e,u,c),_(u,t,c),a&&a.m(u,c),_(u,l,c),b(o,u,c),i=!0},p(u,[c]){const p={};c&1024&&(p.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,p.checked=u[0],te(()=>n=!1)),e.$set(p),u[0]?a?(a.p(u,c),c&1&&m(a,1)):(a=_r(u),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),d(a,1,1,()=>{a=null}),fe());const $={};c&1025&&($.$$scope={dirty:c,ctx:u}),o.$set($)},i(u){i||(m(e.$$.fragment,u),m(a),m(o.$$.fragment,u),i=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),i=!1},d(u){u&&(g(t),g(l)),v(e,u),a&&a.d(u),v(o,u)}}}let bt="vehicle_counts";function jc(r){return[r.location,r.motor_vehicles_2022.toLocaleString(),r.pedal_cycles_2022.toLocaleString(),r.method]}function Bc(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function Hc(r,e,n){let t=V.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],i=!1;function f(s){i=s,n(0,i)}return[i,t,l,o,f]}class Rc extends z{constructor(e){super(),q(this,e,Hc,Fc,G,{})}}function Wc(r){let e,n,t,l,o,i,f,s;return e=new kc({}),t=new ac({}),o=new Oc({}),f=new hc({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(o.$$.fragment),i=L(),h(f.$$.fragment)},m(a,u){b(e,a,u),_(a,n,u),b(t,a,u),_(a,l,u),b(o,a,u),_(a,i,u),b(f,a,u),s=!0},i(a){s||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(f.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(o.$$.fragment,a),d(f.$$.fragment,a),s=!1},d(a){a&&(g(n),g(l),g(i)),v(e,a),v(t,a),v(o,a),v(f,a)}}}function Uc(r){let e,n;return e=new Dt({props:{small:!0,$$slots:{default:[Wc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gc(r){let e,n,t,l,o,i,f,s,a,u;return e=new Lf({}),t=new Bf({}),o=new df({}),f=new Ju({}),a=new Ru({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(o.$$.fragment),i=L(),h(f.$$.fragment),s=L(),h(a.$$.fragment)},m(c,p){b(e,c,p),_(c,n,p),b(t,c,p),_(c,l,p),b(o,c,p),_(c,i,p),b(f,c,p),_(c,s,p),b(a,c,p),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(f.$$.fragment,c),d(a.$$.fragment,c),u=!1},d(c){c&&(g(n),g(l),g(i),g(s)),v(e,c),v(t,c),v(o,c),v(f,c),v(a,c)}}}function zc(r){let e,n;return e=new Dt({props:{small:!0,$$slots:{default:[Gc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qc(r){let e,n,t,l,o,i,f,s,a,u;return e=new qa({}),t=new nf({}),o=new Qi({}),f=new va({}),a=new Da({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(o.$$.fragment),i=L(),h(f.$$.fragment),s=L(),h(a.$$.fragment)},m(c,p){b(e,c,p),_(c,n,p),b(t,c,p),_(c,l,p),b(o,c,p),_(c,i,p),b(f,c,p),_(c,s,p),b(a,c,p),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(f.$$.fragment,c),d(a.$$.fragment,c),u=!1},d(c){c&&(g(n),g(l),g(i),g(s)),v(e,c),v(t,c),v(o,c),v(f,c),v(a,c)}}}function Vc(r){let e,n;return e=new Dt({props:{small:!0,$$slots:{default:[qc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xc(r){let e,n,t,l;return e=new Wi({}),t=new fa({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,i){b(e,o,i),_(o,n,i),b(t,o,i),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&g(n),v(e,o),v(t,o)}}}function Kc(r){let e,n,t,l;return e=new bu({}),t=new fu({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,i){b(e,o,i),_(o,n,i),b(t,o,i),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&g(n),v(e,o),v(t,o)}}}function Yc(r){let e,n,t,l,o=cn()=="Private (development)",i,f;e=new Rc({}),t=new Qf({});let s=o&&Kc();return{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),s&&s.c(),i=Ce()},m(a,u){b(e,a,u),_(a,n,u),b(t,a,u),_(a,l,u),s&&s.m(a,u),_(a,i,u),f=!0},p:re,i(a){f||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(s),f=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(s),f=!1},d(a){a&&(g(n),g(l),g(i)),v(e,a),v(t,a),s&&s.d(a)}}}function Jc(r){let e,n,t,l,o;function i(s){r[4](s)}let f={displayEnableButton:!0};return r[1]!==void 0&&(f.isInactive=r[1]),e=new al({props:f}),r[3](e),K.push(()=>ee(e,"isInactive",i)),l=new ui({}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,a){const u={};!n&&a&2&&(n=!0,u.isInactive=s[1],te(()=>n=!1)),e.$set(u)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),r[3](null),v(e,s),v(l,s)}}}function Zc(r){let e,n,t,l,o,i,f,s,a,u,c,p,$,C,k,S;return e=new Au({}),t=new Ne({props:{label:"Trip generators",$$slots:{default:[Uc]},$$scope:{ctx:r}}}),o=new Ne({props:{label:"Existing infrastructure",$$slots:{default:[zc]},$$scope:{ctx:r}}}),f=new Ne({props:{label:"Boundaries",$$slots:{default:[Vc]},$$scope:{ctx:r}}}),a=new Ne({props:{label:"Census",$$slots:{default:[Xc]},$$scope:{ctx:r}}}),c=new Ne({props:{label:"Other",$$slots:{default:[Yc]},$$scope:{ctx:r}}}),$=new Ne({props:{label:"Tools",$$slots:{default:[Jc]},$$scope:{ctx:r}}}),k=new il({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(o.$$.fragment),i=L(),h(f.$$.fragment),s=L(),h(a.$$.fragment),u=L(),h(c.$$.fragment),p=L(),h($.$$.fragment),C=L(),h(k.$$.fragment)},m(T,N){b(e,T,N),_(T,n,N),b(t,T,N),_(T,l,N),b(o,T,N),_(T,i,N),b(f,T,N),_(T,s,N),b(a,T,N),_(T,u,N),b(c,T,N),_(T,p,N),b($,T,N),_(T,C,N),b(k,T,N),S=!0},p(T,N){const D={};N&32&&(D.$$scope={dirty:N,ctx:T}),t.$set(D);const F={};N&32&&(F.$$scope={dirty:N,ctx:T}),o.$set(F);const O={};N&32&&(O.$$scope={dirty:N,ctx:T}),f.$set(O);const E={};N&32&&(E.$$scope={dirty:N,ctx:T}),a.$set(E);const P={};N&32&&(P.$$scope={dirty:N,ctx:T}),c.$set(P);const I={};N&35&&(I.$$scope={dirty:N,ctx:T}),$.$set(I);const M={};N&2&&(M.disabled=!T[1]),k.$set(M)},i(T){S||(m(e.$$.fragment,T),m(t.$$.fragment,T),m(o.$$.fragment,T),m(f.$$.fragment,T),m(a.$$.fragment,T),m(c.$$.fragment,T),m($.$$.fragment,T),m(k.$$.fragment,T),S=!0)},o(T){d(e.$$.fragment,T),d(t.$$.fragment,T),d(o.$$.fragment,T),d(f.$$.fragment,T),d(a.$$.fragment,T),d(c.$$.fragment,T),d($.$$.fragment,T),d(k.$$.fragment,T),S=!1},d(T){T&&(g(n),g(l),g(i),g(s),g(u),g(p),g(C)),v(e,T),v(t,T),v(o,T),v(f,T),v(a,T),v(c,T),v($,T),v(k,T)}}}function Qc(r){let e,n,t,l;return e=new Ne({props:{label:"Layers",open:!0,$$slots:{default:[Zc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0,t||(l=vt(window,"keydown",r[2]),t=!0)},p(o,[i]){const f={};i&35&&(f.$$scope={dirty:i,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o),t=!1,l()}}}function xc(r,e,n){let t;de(r,hn,s=>n(1,t=s));let l;function o(s){!t&&s.key=="Escape"&&(l.disableStreetView(),s.preventDefault())}function i(s){K[s?"unshift":"push"](()=>{l=s,n(0,l)})}function f(s){t=s,hn.set(t)}return[l,t,o,i,f]}class ep extends z{constructor(e){super(),q(this,e,xc,Qc,G,{})}}function tp(r,e,n){let{loadFile:t}=e;return Tt(async()=>{let o=await(await fetch(`${$n()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class np extends z{constructor(e){super(),q(this,e,tp,null,G,{loadFile:0})}}function rp(r){let e;return{c(){e=w("Show on map")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function lp(r){let e;return{c(){e=w("Edit scheme locally")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function op(r){let e,n,t=r[0].authority_or_region+"",l,o,i,f,s=r[0].capital_scheme_id+"",a,u,c,p,$=r[0].funding_programme+"",C,k,S,T,N,D,F;return T=new Pt({props:{$$slots:{default:[rp]},$$scope:{ctx:r}}}),T.$on("click",r[3]),D=new Pt({props:{disabled:r[1],title:r[2],$$slots:{default:[lp]},$$scope:{ctx:r}}}),D.$on("click",r[4]),{c(){e=A("p"),n=w("Authority or region: "),l=w(t),o=L(),i=A("p"),f=w("Capital scheme ID: "),a=w(s),u=L(),c=A("p"),p=w("Funding programme: "),C=w($),k=L(),S=A("div"),h(T.$$.fragment),N=L(),h(D.$$.fragment),J(S,"class","govuk-button-group")},m(O,E){_(O,e,E),y(e,n),y(e,l),_(O,o,E),_(O,i,E),y(i,f),y(i,a),_(O,u,E),_(O,c,E),y(c,p),y(c,C),_(O,k,E),_(O,S,E),b(T,S,null),y(S,N),b(D,S,null),F=!0},p(O,E){(!F||E&1)&&t!==(t=O[0].authority_or_region+"")&&W(l,t),(!F||E&1)&&s!==(s=O[0].capital_scheme_id+"")&&W(a,s),(!F||E&1)&&$!==($=O[0].funding_programme+"")&&W(C,$);const P={};E&256&&(P.$$scope={dirty:E,ctx:O}),T.$set(P);const I={};E&256&&(I.$$scope={dirty:E,ctx:O}),D.$set(I)},i(O){F||(m(T.$$.fragment,O),m(D.$$.fragment,O),F=!0)},o(O){d(T.$$.fragment,O),d(D.$$.fragment,O),F=!1},d(O){O&&(g(e),g(o),g(i),g(u),g(c),g(k),g(S)),v(T),v(D)}}}function sp(r){let e,n;return e=new Ne({props:{label:`${r[0].scheme_reference}: ${r[0].num_features} features`,$$slots:{default:[op]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.label=`${t[0].scheme_reference}: ${t[0].num_features} features`),l&257&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ip(r,e,n){let t,l;de(r,wt,c=>n(6,t=c)),de(r,It,c=>n(7,l=c));let{scheme:o}=e,{authorityNames:i}=e,f=!i.has(o.authority_or_region),s=f?"This scheme doesn't have an authority specified correctly, so you can't edit this scheme. We're working to fix this problem.":void 0;function a(){let c={type:"FeatureCollection",features:t.features.filter(p=>p.properties.scheme_reference==o.scheme_reference)};l==null||l.fitBounds(el(c),{padding:20,animate:!1})}function u(){let c={type:"FeatureCollection",features:t.features.filter($=>$.properties.scheme_reference==o.scheme_reference)},p=o.authority_or_region;window.localStorage.setItem(p,JSON.stringify(c)),window.open(`scheme.html?authority=${o.authority_or_region}`,"_blank")}return r.$$set=c=>{"scheme"in c&&n(0,o=c.scheme),"authorityNames"in c&&n(5,i=c.authorityNames)},[o,f,s,a,u,i]}class ap extends z{constructor(e){super(),q(this,e,ip,sp,G,{scheme:0,authorityNames:5})}}const fp=["Adur","Allerdale","Amber Valley","Arun","Ashfield","Ashford","Babergh","Barking and Dagenham","Barnet","Barnsley","Barrow-in-Furness","Basildon","Basingstoke and Deane","Bassetlaw","Bath and North East Somerset","Bedford","Bexley","Birmingham","Blaby","Blackburn with Darwen","Blackpool","Bolsover","Bolton","Boston","Bournemouth, Christchurch and Poole","Bracknell Forest","Bradford","Braintree","Breckland","Brent","Brentwood","Brighton and Hove","Bristol, City of","Broadland","Bromley","Bromsgrove","Broxbourne","Broxtowe","Buckinghamshire","Burnley","Bury","Calderdale","Cambridge","Cambridgeshire and Peterborough Combined Authority","Camden","Cannock Chase","Canterbury","Carlisle","Castle Point","Central Bedfordshire","Charnwood","Chelmsford","Cheltenham","Cherwell","Cheshire East","Cheshire West and Chester","Chesterfield","Chichester","Chorley","City of London","Colchester","Copeland","Cornwall","Cotswold","County Durham","Coventry","Craven","Crawley","Croydon","Cumbria","Dacorum","Darlington","Dartford","Derby","Derbyshire","Derbyshire Dales","Devon","Doncaster","Dorset","Dover","Dudley","Ealing","Eastbourne","East Cambridgeshire","East Devon","East Hampshire","East Hertfordshire","Eastleigh","East Lindsey","East Riding of Yorkshire","East Staffordshire","East Suffolk","East Sussex","Eden","Elmbridge","Enfield","Epping Forest","Epsom and Ewell","Erewash","Essex","Exeter","Fareham","Fenland","Folkestone and Hythe","Forest of Dean","Fylde","Gateshead","Gedling","Gloucester","Gloucestershire","Gosport","Gravesham","Greater London","Greater Manchester Combined Authority","Great Yarmouth","Greenwich","Guildford","Hackney","Halton","Hambleton","Hammersmith and Fulham","Hampshire","Harborough","Haringey","Harlow","Harrogate","Harrow","Hart","Hartlepool","Hastings","Havant","Havering","Herefordshire","Herefordshire, County of","Hertfordshire","Hertsmere","High Peak","Hillingdon","Hinckley and Bosworth","Horsham","Hounslow","Huntingdonshire","Hyndburn","Ipswich","Isle of Wight","Isles of Scilly","Islington","Kensington and Chelsea","Kent","King's Lynn and West Norfolk","Kingston upon Hull","Kingston upon Hull, City of","Kingston upon Thames","Kirklees","Knowsley","Lambeth","Lancashire","Lancaster","Leeds","Leicester","Leicestershire","Lewes","Lewisham","Lichfield","Lincoln","Lincolnshire","Liverpool","Liverpool City Region Combined Authority","Luton","Maidstone","Maldon","Malvern Hills","Manchester","Mansfield","Medway","Melton","Mendip","Merton","Mid Devon","Middlesbrough","Mid Suffolk","Mid Sussex","Milton Keynes","Mole Valley","Newark and Sherwood","Newcastle-under-Lyme","Newcastle upon Tyne","New Forest","Newham","Norfolk","North Devon","North East Derbyshire","North East Joint Transport Committee","North East Lincolnshire","North Hertfordshire","North Kesteven","North Lincolnshire","North Norfolk","North Northamptonshire","North Somerset","North Tyneside","Northumberland","North Warwickshire","North West Leicestershire","North Yorkshire","Norwich","Nottingham","Nottinghamshire","Nuneaton and Bedworth","Oadby and Wigston","Oldham","Oxford","Oxfordshire","Pendle","Peterborough","Plymouth","Portsmouth","Preston","Reading","Redbridge","Redcar and Cleveland","Redditch","Reigate and Banstead","Ribble Valley","Richmondshire","Richmond upon Thames","Rochdale","Rochford","Rossendale","Rother","Rotherham","Rugby","Runnymede","Rushcliffe","Rushmoor","Rutland","Ryedale","Salford","Sandwell","Scarborough","Sedgemoor","Sefton","Selby","Sevenoaks","Sheffield","Sheffield City Region Combined Authority","Shropshire","Slough","Solihull","Somerset","Somerset West and Taunton","Southampton","South Cambridgeshire","South Derbyshire","Southend-on-Sea","South Gloucestershire","South Hams","South Holland","South Kesteven","South Lakeland","South Norfolk","South Oxfordshire","South Ribble","South Somerset","South Staffordshire","South Tyneside","Southwark","Spelthorne","Stafford","Staffordshire","Staffordshire Moorlands","St Albans","Stevenage","St. Helens","Stockport","Stockton-on-Tees","Stoke-on-Trent","Stratford-on-Avon","Stroud","Suffolk","Sunderland","Surrey","Surrey Heath","Sutton","Swale","Swindon","Tameside","Tamworth","Tandridge","Tees Valley Combined Authority","Teignbridge","Telford and Wrekin","Tendring","Test Valley","Tewkesbury","Thanet","Three Rivers","Thurrock","Tonbridge and Malling","Torbay","Torridge","Tower Hamlets","Trafford","Tunbridge Wells","Uttlesford","Vale of White Horse","Wakefield","Walsall","Waltham Forest","Wandsworth","Warrington","Warwick","Warwickshire","Watford","Waverley","Wealden","Welwyn Hatfield","West Berkshire","West Devon","West Lancashire","West Lindsey","West Midlands ITA","Westminster","West Northamptonshire","West of England Combined Authority","West Oxfordshire","West Suffolk","West Sussex","West Yorkshire Combined Authority","Wigan","Wiltshire","Winchester","Windsor and Maidenhead","Wirral","Woking","Wokingham","Wolverhampton","Worcester","Worcestershire","Worthing","Wychavon","Wyre","Wyre Forest","York"];function gr(r){let e,n,t=bn(r[0].length_meters)+"",l;return{c(){e=A("p"),n=w("Length: "),l=w(t)},m(o,i){_(o,e,i),y(e,n),y(e,l)},p(o,i){i&1&&t!==(t=bn(o[0].length_meters)+"")&&W(l,t)},d(o){o&&g(e)}}}function dr(r){let e,n=r[1](r[0].description)+"";return{c(){e=A("p")},m(t,l){_(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[1](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&g(e)}}}function up(r){let e,n,t,l=r[1](r[0].name)+"",o,i=r[0].intervention_type+"",f,s,a,u,c,p=r[0].scheme_reference+"",$,C,k,S=r[0].length_meters&&gr(r),T=r[0].description&&dr(r);return{c(){e=A("div"),n=A("h2"),t=new pn(!1),o=w(" ("),f=w(i),s=w(")"),a=L(),u=A("p"),c=w("Scheme reference: "),$=w(p),C=L(),S&&S.c(),k=L(),T&&T.c(),t.a=o,De(e,"max-width","30vw")},m(N,D){_(N,e,D),y(e,n),t.m(l,n),y(n,o),y(n,f),y(n,s),y(e,a),y(e,u),y(u,c),y(u,$),y(e,C),S&&S.m(e,null),y(e,k),T&&T.m(e,null)},p(N,[D]){D&1&&l!==(l=N[1](N[0].name)+"")&&t.p(l),D&1&&i!==(i=N[0].intervention_type+"")&&W(f,i),D&1&&p!==(p=N[0].scheme_reference+"")&&W($,p),N[0].length_meters?S?S.p(N,D):(S=gr(N),S.c(),S.m(e,k)):S&&(S.d(1),S=null),N[0].description?T?T.p(N,D):(T=dr(N),T.c(),T.m(e,null)):T&&(T.d(1),T=null)},i:re,o:re,d(N){N&&g(e),S&&S.d(),T&&T.d()}}}function cp(r,e,n){let{props:t}=e,{filterText:l}=e;function o(i){return l?i.replace(new RegExp(l,"gi"),f=>`<mark>${f}</mark>`):i}return r.$$set=i=>{"props"in i&&n(0,t=i.props),"filterText"in i&&n(2,l=i.filterText)},[t,o,l]}class gn extends z{constructor(e){super(),q(this,e,cp,up,G,{props:0,filterText:2})}}function pp(r){let e,n;return e=new gn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $p(r){let e,n;return e=new oe({props:{$$slots:{default:[pp,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mp(r){let e,n;return e=new gn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _p(r){let e,n;return e=new oe({props:{$$slots:{default:[mp,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gp(r){let e,n;return e=new gn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function dp(r){let e,n;return e=new oe({props:{$$slots:{default:[gp,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function hp(r){let e,n,t,l,o,i,f,s,a,u;const c=[H("interventions-points"),{filter:["all",vn,r[4],r[5]]},{paint:{"circle-color":r[3],"circle-radius":Gt}},{layout:{visibility:r[0]?"visible":"none"}}];let p={$$slots:{default:[$p]},$$scope:{ctx:r}};for(let O=0;O<c.length;O+=1)p=Z(p,c[O]);e=new Qe({props:p});const $=[H("interventions-lines"),{filter:["all",wn,r[4]]},{paint:{"line-color":r[3],"line-width":at}},{layout:{visibility:r[0]?"visible":"none"}}];let C={$$slots:{default:[_p]},$$scope:{ctx:r}};for(let O=0;O<$.length;O+=1)C=Z(C,$[O]);t=new $e({props:C});const k=[H("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*at,"circle-opacity":0,"circle-stroke-color":Ut.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let S={};for(let O=0;O<k.length;O+=1)S=Z(S,k[O]);o=new Qe({props:S});const T=[H("interventions-polygons"),{filter:["all",jt,r[4]]},{paint:{"fill-color":r[3],"fill-opacity":.2}},{layout:{visibility:r[0]?"visible":"none"}}];let N={$$slots:{default:[dp]},$$scope:{ctx:r}};for(let O=0;O<T.length;O+=1)N=Z(N,T[O]);f=new qe({props:N});const D=[H("interventions-polygons-outlines"),{filter:["all",jt,r[4]]},{paint:{"line-color":r[3],"line-opacity":.5,"line-width":.7*at}},{layout:{visibility:r[0]?"visible":"none"}}];let F={};for(let O=0;O<D.length;O+=1)F=Z(F,D[O]);return a=new $e({props:F}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(o.$$.fragment),i=L(),h(f.$$.fragment),s=L(),h(a.$$.fragment)},m(O,E){b(e,O,E),_(O,n,E),b(t,O,E),_(O,l,E),b(o,O,E),_(O,i,E),b(f,O,E),_(O,s,E),b(a,O,E),u=!0},p(O,E){const P=E&57?Q(c,[E&0&&x(H("interventions-points")),E&48&&{filter:["all",vn,O[4],O[5]]},E&8&&{paint:{"circle-color":O[3],"circle-radius":Gt}},E&1&&{layout:{visibility:O[0]?"visible":"none"}}]):{};E&258&&(P.$$scope={dirty:E,ctx:O}),e.$set(P);const I=E&25?Q($,[E&0&&x(H("interventions-lines")),E&16&&{filter:["all",wn,O[4]]},E&8&&{paint:{"line-color":O[3],"line-width":at}},E&1&&{layout:{visibility:O[0]?"visible":"none"}}]):{};E&258&&(I.$$scope={dirty:E,ctx:O}),t.$set(I);const M=E&1?Q(k,[E&0&&x(H("interventions-lines-endpoints")),k[1],E&0&&{paint:{"circle-radius":.5*at,"circle-opacity":0,"circle-stroke-color":Ut.lineEndpointColor,"circle-stroke-width":2}},E&1&&{layout:{visibility:O[0]?"visible":"none"}}]):{};o.$set(M);const R=E&25?Q(T,[E&0&&x(H("interventions-polygons")),E&16&&{filter:["all",jt,O[4]]},E&8&&{paint:{"fill-color":O[3],"fill-opacity":.2}},E&1&&{layout:{visibility:O[0]?"visible":"none"}}]):{};E&258&&(R.$$scope={dirty:E,ctx:O}),f.$set(R);const j=E&25?Q(D,[E&0&&x(H("interventions-polygons-outlines")),E&16&&{filter:["all",jt,O[4]]},E&8&&{paint:{"line-color":O[3],"line-opacity":.5,"line-width":.7*at}},E&1&&{layout:{visibility:O[0]?"visible":"none"}}]):{};a.$set(j)},i(O){u||(m(e.$$.fragment,O),m(t.$$.fragment,O),m(o.$$.fragment,O),m(f.$$.fragment,O),m(a.$$.fragment,O),u=!0)},o(O){d(e.$$.fragment,O),d(t.$$.fragment,O),d(o.$$.fragment,O),d(f.$$.fragment,O),d(a.$$.fragment,O),u=!1},d(O){O&&(g(n),g(l),g(i),g(s)),v(e,O),v(t,O),v(o,O),v(f,O),v(a,O)}}}function bp(r){let e,n;return e=new Ot({props:{data:r[2],$$slots:{default:[hp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&4&&(o.data=t[2]),l&259&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vp(r,e,n){let t,l;de(r,wt,u=>n(6,l=u));let{showSchemes:o}=e,{filterText:i}=e,f=Tr("v1");const s=["!=","hide_while_editing",!0],a=["!=","endpoint",!0];return r.$$set=u=>{"showSchemes"in u&&n(0,o=u.showSchemes),"filterText"in u&&n(1,i=u.filterText)},r.$$.update=()=>{r.$$.dirty&64&&n(2,t=tl(l))},[o,i,t,f,s,a,l]}class wp extends z{constructor(e){super(),q(this,e,vp,bp,G,{showSchemes:0,filterText:1})}}function hr(r,e,n){const t=r.slice();return t[13]=e[n],t}function kp(r){let e,n;return e=new np({props:{loadFile:r[8]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:re,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function br(r){let e,n,t,l,o;function i(u){r[9](u)}function f(u){r[10](u)}function s(u){r[11](u)}let a={schemes:r[1]};return r[2]!==void 0&&(a.schemesToBeShown=r[2]),r[3]!==void 0&&(a.filterText=r[3]),r[4]!==void 0&&(a.show=r[4]),e=new xs({props:a}),K.push(()=>ee(e,"schemesToBeShown",i)),K.push(()=>ee(e,"filterText",f)),K.push(()=>ee(e,"show",s)),{c(){h(e.$$.fragment)},m(u,c){b(e,u,c),o=!0},p(u,c){const p={};c&2&&(p.schemes=u[1]),!n&&c&4&&(n=!0,p.schemesToBeShown=u[2],te(()=>n=!1)),!t&&c&8&&(t=!0,p.filterText=u[3],te(()=>t=!1)),!l&&c&16&&(l=!0,p.show=u[4],te(()=>l=!1)),e.$set(p)},i(u){o||(m(e.$$.fragment,u),o=!0)},o(u){d(e.$$.fragment,u),o=!1},d(u){v(e,u)}}}function vr(r){let e,n;return e=new ap({props:{scheme:r[13],authorityNames:r[7]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.scheme=t[13]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wr(r){let e=r[2].has(r[13].scheme_reference),n,t,l=e&&vr(r);return{c(){l&&l.c(),n=Ce()},m(o,i){l&&l.m(o,i),_(o,n,i),t=!0},p(o,i){i&6&&(e=o[2].has(o[13].scheme_reference)),e?l?(l.p(o,i),i&6&&m(l,1)):(l=vr(o),l.c(),m(l,1),l.m(n.parentNode,n)):l&&(ae(),d(l,1,1,()=>{l=null}),fe())},i(o){t||(m(l),t=!0)},o(o){d(l),t=!1},d(o){o&&g(n),l&&l.d(o)}}}function yp(r){let e,n,t,l,o,i,f,s,a,u,c=cn()=="Private (development)",p,$,C,k,S,T,N,D;o=new ml({props:{boundaryGeojson:r[5]}}),f=new Hl({}),a=new nl({});let F=c&&kp(r);$=new _l({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[8]}}),k=new Sr({props:{errorMessage:r[0]}});let O=r[1].size>0&&br(r),E=We(r[1].values()),P=[];for(let M=0;M<E.length;M+=1)P[M]=wr(hr(r,E,M));const I=M=>d(P[M],1,1,()=>{P[M]=null});return{c(){e=A("div"),n=A("div"),t=A("h1"),t.textContent="Browse schemes",l=L(),h(o.$$.fragment),i=L(),h(f.$$.fragment),s=L(),h(a.$$.fragment),u=L(),F&&F.c(),p=L(),h($.$$.fragment),C=L(),h(k.$$.fragment),S=L(),O&&O.c(),T=L(),N=A("ul");for(let M=0;M<P.length;M+=1)P[M].c();De(n,"display","flex"),De(n,"justify-content","space-between"),J(e,"slot","sidebar"),J(e,"class","govuk-prose")},m(M,R){_(M,e,R),y(e,n),y(n,t),y(n,l),b(o,n,null),y(e,i),b(f,e,null),y(e,s),b(a,e,null),y(e,u),F&&F.m(e,null),y(e,p),b($,e,null),y(e,C),b(k,e,null),y(e,S),O&&O.m(e,null),y(e,T),y(e,N);for(let j=0;j<P.length;j+=1)P[j]&&P[j].m(N,null);D=!0},p(M,R){const j={};R&32&&(j.boundaryGeojson=M[5]),o.$set(j),c&&F.p(M,R);const U={};if(R&1&&(U.errorMessage=M[0]),k.$set(U),M[1].size>0?O?(O.p(M,R),R&2&&m(O,1)):(O=br(M),O.c(),m(O,1),O.m(e,T)):O&&(ae(),d(O,1,1,()=>{O=null}),fe()),R&134){E=We(M[1].values());let X;for(X=0;X<E.length;X+=1){const ce=hr(M,E,X);P[X]?(P[X].p(ce,R),m(P[X],1)):(P[X]=wr(ce),P[X].c(),m(P[X],1),P[X].m(N,null))}for(ae(),X=E.length;X<P.length;X+=1)I(X);fe()}},i(M){if(!D){m(o.$$.fragment,M),m(f.$$.fragment,M),m(a.$$.fragment,M),m(F),m($.$$.fragment,M),m(k.$$.fragment,M),m(O);for(let R=0;R<E.length;R+=1)m(P[R]);D=!0}},o(M){d(o.$$.fragment,M),d(f.$$.fragment,M),d(a.$$.fragment,M),d(F),d($.$$.fragment,M),d(k.$$.fragment,M),d(O),P=P.filter(Boolean);for(let R=0;R<P.length;R+=1)d(P[R]);D=!1},d(M){M&&g(e),v(o),v(f),v(a),F&&F.d(),v($),v(k),O&&O.d(),Rt(P,M)}}}function Sp(r){let e,n,t,l,o;return e=new wp({props:{filterText:r[3],showSchemes:r[4]}}),l=new ep({}),{c(){h(e.$$.fragment),n=L(),t=A("div"),h(l.$$.fragment),J(t,"class","top-right svelte-u44ed2")},m(i,f){b(e,i,f),_(i,n,f),_(i,t,f),b(l,t,null),o=!0},p(i,f){const s={};f&8&&(s.filterText=i[3]),f&16&&(s.showSchemes=i[4]),e.$set(s)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&(g(n),g(t)),v(e,i),v(l)}}}function Cp(r){let e,n,t;return n=new ul({props:{style:r[6],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Sp]},$$scope:{ctx:r}}}),{c(){e=A("div"),h(n.$$.fragment),J(e,"slot","main")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.style=l[6]),o&65560&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Tp(r){let e,n;return e=new fl({props:{$$slots:{main:[Cp],sidebar:[yp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&65663&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Op(r,e,n){let t,l;de(r,wt,S=>n(5,t=S)),de(r,kn,S=>n(6,l=S));let o=new Set(fp);Tt(()=>{rl()});const i=new URLSearchParams(window.location.search);kn.set(i.get("style")||"dataviz");let f="",s=new Map,a=new Set,u="",c=!0;function p(S){try{wt.set(JSON.parse(S)),n(1,s=Ws(t)),n(0,f="")}catch(T){n(0,f=`The file you loaded is broken: ${T}`)}}function $(S){a=S,n(2,a)}function C(S){u=S,n(3,u)}function k(S){c=S,n(4,c)}return[f,s,a,u,c,t,l,o,p,$,C,k]}class Lp extends z{constructor(e){super(),q(this,e,Op,Tp,G,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new Lp({target:document.getElementById("app")});
