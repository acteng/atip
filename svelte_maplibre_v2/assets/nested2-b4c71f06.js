import{S as Z,i as K,s as V,a5 as ze,j as $,t as d,y as le,n as g,o as ae,p as h,H as _o,Q as x,a8 as xt,aS as $t,x as re,aK as tt,aL as rt,aM as nt,aN as ot,b as G,c as q,g as _,m as v,l as X,q as b,aT as he,aU as En,aV as vo,r as er,aW as Qe,e as M,u as k,d as A,k as D,f as wr,aq as bo,C as Ce,ar as Mn,W as kt,F as Pn,a as cr,h as ee,v as Dr,w as kr,I as me,aX as Ge,aY as de,$ as dt,G as gt,aR as H,J as xe,N as qe,K as Gt,V as Nn,aZ as et,a_ as yo,a1 as Fn,a0 as Pt,E as Bn,R as jn,a$ as Sr,b0 as Er,D as wo,L as ko,z as So,aH as Co}from"./index-73f03f95.js";import{H as ce,L as Lo,d as Mr,c as Rn,C as De,B as To,Z as Oo,I as Ao}from"./schemas-4bcfaebb.js";import{g as Tt,u as Io,f as zn,m as Do,e as Zt,C as Ke,b as Bt,d as fe,a as Eo,S as Mo,L as Po,M as No}from"./StreetViewController-2cbb0f4e.js";import{I as ge,F as Fo}from"./InteractiveLayer-e40bdd0d.js";function Pr(n){let e;return r=>{if(r)for(let t in r){let o=e==null?void 0:e[t],i=r[t];o!==i&&n(t,i,o)}else if(e)for(let t in e)n(t,void 0,e[t]);e=r}}function Bo(n,...e){let r=[n];for(let t of e)if(t)Array.isArray(t)&&t[0]===n?r.push(...t.slice(1)):r.push(t);else continue;if(r.length!==1)return r.length===2?r[1]:r}function jo(n){return n===!0?["has","point_count"]:n===!1?["!",["has","point_count"]]:void 0}function _t(n,e){return["case",["boolean",["feature-state","hover"],!1],e,n]}var Kt=Ro;function Ro(n){var e,r,t;if(n){if(Array.isArray(n)){for(e=[],r=n.length,t=0;t<r;t++){var o=n[t];o!=null&&e.push(o)}return e}if(typeof n=="object"){e={};var i=Object.keys(n);for(r=i.length,t=0;t<r;t++){var l=i[t],a=n[l];a!=null&&(e[l]=a)}return e}}}function Nr(n){let e=n[0],r,t,o=Fr(n);return{c(){o.c(),r=ze()},m(i,l){o.m(i,l),$(i,r,l),t=!0},p(i,l){l[0]&1&&V(e,e=i[0])?(le(),g(o,1,1,re),ae(),o=Fr(i),o.c(),d(o,1),o.m(r.parentNode,r)):o.p(i,l)},i(i){t||(d(o),t=!0)},o(i){g(o),t=!1},d(i){i&&h(r),o.d(i)}}}function Fr(n){let e;const r=n[35].default,t=tt(r,n,n[34],null);return{c(){t&&t.c()},m(o,i){t&&t.m(o,i),e=!0},p(o,i){t&&t.p&&(!e||i[1]&8)&&rt(t,r,o,o[34],e?ot(r,o[34],i,null):nt(o[34]),null)},i(o){e||(d(t,o),e=!0)},o(o){g(t,o),e=!1},d(o){t&&t.d(o)}}}function zo(n){let e,r,t=n[0]&&Nr(n);return{c(){t&&t.c(),e=ze()},m(o,i){t&&t.m(o,i),$(o,e,i),r=!0},p(o,i){o[0]?t?(t.p(o,i),i[0]&1&&d(t,1)):(t=Nr(o),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(le(),g(t,1,1,()=>{t=null}),ae())},i(o){r||(d(t),r=!0)},o(o){g(t),r=!1},d(o){o&&h(e),t&&t.d(o)}}}function Ho(n,e,r){let t,o,i,l,a,s,u,f,c,p,m,y,{$$slots:w={},$$scope:L}=e,{id:T=Tt("layer")}=e,{source:E=void 0}=e,{sourceLayer:B=void 0}=e,{beforeId:C=void 0}=e,{beforeLayerType:I=void 0}=e,{type:j}=e,{paint:P=void 0}=e,{layout:N=void 0}=e,{filter:O=void 0}=e,{applyToClusters:S=void 0}=e,{minzoom:z=void 0}=e,{maxzoom:U=void 0}=e,{manageHoverState:W=!0}=e,{hovered:te=null}=e,{hoverCursor:pe=void 0}=e,{eventsIfTopMost:J=!1}=e;const se=_o(),{map:ie,source:_e,self:ve,minzoom:Ee,maxzoom:$e,eventTopMost:Le}=Io();x(n,ie,R=>r(30,c=R)),x(n,_e,R=>r(31,p=R)),x(n,ve,R=>r(0,f=R)),x(n,Ee,R=>r(33,y=R)),x(n,$e,R=>r(32,m=R)),xt(()=>{f&&c&&(c==null||c.removeLayer(f))});let ue;return n.$$set=R=>{"id"in R&&r(7,T=R.id),"source"in R&&r(8,E=R.source),"sourceLayer"in R&&r(9,B=R.sourceLayer),"beforeId"in R&&r(10,C=R.beforeId),"beforeLayerType"in R&&r(11,I=R.beforeLayerType),"type"in R&&r(12,j=R.type),"paint"in R&&r(13,P=R.paint),"layout"in R&&r(14,N=R.layout),"filter"in R&&r(15,O=R.filter),"applyToClusters"in R&&r(16,S=R.applyToClusters),"minzoom"in R&&r(17,z=R.minzoom),"maxzoom"in R&&r(18,U=R.maxzoom),"manageHoverState"in R&&r(19,W=R.manageHoverState),"hovered"in R&&r(6,te=R.hovered),"hoverCursor"in R&&r(20,pe=R.hoverCursor),"eventsIfTopMost"in R&&r(21,J=R.eventsIfTopMost),"$$scope"in R&&r(34,L=R.$$scope)},n.$$.update=()=>{if(n.$$.dirty[0]&65536&&r(29,t=jo(S)),n.$$.dirty[0]&536903680&&r(28,o=Bo("all",t,O)),n.$$.dirty[0]&131072|n.$$.dirty[1]&4&&r(24,i=z??y),n.$$.dirty[0]&262144|n.$$.dirty[1]&2&&r(23,l=U??m),n.$$.dirty[0]&256|n.$$.dirty[1]&1&&r(27,a=E||p),n.$$.dirty[0]&1509457537&&c&&f!==T&&a){let R=function(ne){var Me,Pe;if(!f||!c||J&&Le(ne)!==f)return;let F=ne.features??[],Se=(Pe=(Me=F[0])==null?void 0:Me.properties)==null?void 0:Pe.cluster_id,ye={event:ne,map:c,clusterId:Se,layer:f,source:a,features:F};se(ne.type,ye)},be=C;if(!C&&I){let ne=c.getStyle().layers,F=typeof I=="function"?I:ye=>ye.type===I,Se=ne==null?void 0:ne.find(F);Se&&(be=Se.id)}$t(ve,f=T,f),c.addLayer(Kt({id:f,type:j,source:a,"source-layer":B,filter:o,paint:P,layout:N,minzoom:i,maxzoom:l}),be),c.on("click",f,R),c.on("dblclick",f,R),c.on("contextmenu",f,R),c.on("mouseenter",f,ne=>{var Me,Pe;if(!f||!c||J&&Le(ne)!==f)return;pe&&(c.getCanvas().style.cursor=pe);let F=ne.features??[];r(6,te=F[0]??null);let Se=(Pe=(Me=F[0])==null?void 0:Me.properties)==null?void 0:Pe.cluster_id;se("mouseenter",{event:ne,map:c,clusterId:Se,layer:f,source:a,features:F})}),c.on("mousemove",f,ne=>{var Me,Pe,Ir;if(J&&Le(ne)!==f)return;let F=ne.features??[],Se=(Pe=(Me=F[0])==null?void 0:Me.properties)==null?void 0:Pe.cluster_id,ye=(Ir=F[0])==null?void 0:Ir.id;ye!==ue&&(W&&(ue!==void 0&&(c==null||c.setFeatureState({source:a,id:ue},{hover:!1})),c==null||c.setFeatureState({source:a,id:ye},{hover:!0})),r(22,ue=ye),r(6,te=F[0]??null)),se("mousemove",{event:ne,map:c,clusterId:Se,layer:f,source:a,features:F})}),c.on("mouseleave",f,ne=>{!f||!c||(pe&&(c.getCanvas().style.cursor=""),r(6,te=null),W&&ue!==void 0&&(c==null||c.setFeatureState({source:a,id:ue},{hover:!1}),r(22,ue=void 0)),se("mouseleave",{map:c,layer:f,source:a}))})}n.$$.dirty[0]&1073741825&&r(26,s=f?Pr((R,be)=>c==null?void 0:c.setPaintProperty(f,R,be)):void 0),n.$$.dirty[0]&1073741825&&r(25,u=f?Pr((R,be)=>c==null?void 0:c.setLayoutProperty(f,R,be)):void 0),n.$$.dirty[0]&67117056&&(s==null||s(P)),n.$$.dirty[0]&33570816&&(u==null||u(N)),n.$$.dirty[0]&1098907649&&f&&(c==null||c.setLayerZoomRange(f,i,l))},[f,ie,_e,ve,Ee,$e,te,T,E,B,C,I,j,P,N,O,S,z,U,W,pe,J,ue,l,i,u,s,a,o,t,c,p,m,y,L,w]}class Cr extends Z{constructor(e){super(),K(this,e,Ho,zo,V,{id:7,source:8,sourceLayer:9,beforeId:10,beforeLayerType:11,type:12,paint:13,layout:14,filter:15,applyToClusters:16,minzoom:17,maxzoom:18,manageHoverState:19,hovered:6,hoverCursor:20,eventsIfTopMost:21},null,[-1,-1])}}function Uo(n){let e;const r=n[14].default,t=tt(r,n,n[22],null);return{c(){t&&t.c()},m(o,i){t&&t.m(o,i),e=!0},p(o,i){t&&t.p&&(!e||i&4194304)&&rt(t,r,o,o[22],e?ot(r,o[22],i,null):nt(o[22]),null)},i(o){e||(d(t,o),e=!0)},o(o){g(t,o),e=!1},d(o){t&&t.d(o)}}}function Wo(n){let e,r,t;function o(l){n[15](l)}let i={id:n[1],type:"circle",source:n[2],sourceLayer:n[3],beforeId:n[4],beforeLayerType:n[5],paint:n[6],layout:n[7],filter:n[8],applyToClusters:n[9],minzoom:n[10],maxzoom:n[11],hoverCursor:n[12],eventsIfTopMost:n[13],$$slots:{default:[Uo]},$$scope:{ctx:n}};return n[0]!==void 0&&(i.hovered=n[0]),e=new Cr({props:i}),G.push(()=>q(e,"hovered",o)),e.$on("click",n[16]),e.$on("dblclick",n[17]),e.$on("contextmenu",n[18]),e.$on("mouseenter",n[19]),e.$on("mousemove",n[20]),e.$on("mouseleave",n[21]),{c(){_(e.$$.fragment)},m(l,a){v(e,l,a),t=!0},p(l,[a]){const s={};a&2&&(s.id=l[1]),a&4&&(s.source=l[2]),a&8&&(s.sourceLayer=l[3]),a&16&&(s.beforeId=l[4]),a&32&&(s.beforeLayerType=l[5]),a&64&&(s.paint=l[6]),a&128&&(s.layout=l[7]),a&256&&(s.filter=l[8]),a&512&&(s.applyToClusters=l[9]),a&1024&&(s.minzoom=l[10]),a&2048&&(s.maxzoom=l[11]),a&4096&&(s.hoverCursor=l[12]),a&8192&&(s.eventsIfTopMost=l[13]),a&4194304&&(s.$$scope={dirty:a,ctx:l}),!r&&a&1&&(r=!0,s.hovered=l[0],X(()=>r=!1)),e.$set(s)},i(l){t||(d(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){b(e,l)}}}function Vo(n,e,r){let{$$slots:t={},$$scope:o}=e,{id:i=Tt("circle")}=e,{source:l=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:u=void 0}=e,{paint:f}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{applyToClusters:m=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:w=void 0}=e,{hoverCursor:L=void 0}=e,{hovered:T=null}=e,{eventsIfTopMost:E=!1}=e;function B(S){T=S,r(0,T)}function C(S){he.call(this,n,S)}function I(S){he.call(this,n,S)}function j(S){he.call(this,n,S)}function P(S){he.call(this,n,S)}function N(S){he.call(this,n,S)}function O(S){he.call(this,n,S)}return n.$$set=S=>{"id"in S&&r(1,i=S.id),"source"in S&&r(2,l=S.source),"sourceLayer"in S&&r(3,a=S.sourceLayer),"beforeId"in S&&r(4,s=S.beforeId),"beforeLayerType"in S&&r(5,u=S.beforeLayerType),"paint"in S&&r(6,f=S.paint),"layout"in S&&r(7,c=S.layout),"filter"in S&&r(8,p=S.filter),"applyToClusters"in S&&r(9,m=S.applyToClusters),"minzoom"in S&&r(10,y=S.minzoom),"maxzoom"in S&&r(11,w=S.maxzoom),"hoverCursor"in S&&r(12,L=S.hoverCursor),"hovered"in S&&r(0,T=S.hovered),"eventsIfTopMost"in S&&r(13,E=S.eventsIfTopMost),"$$scope"in S&&r(22,o=S.$$scope)},[T,i,l,a,s,u,f,c,p,m,y,w,L,E,t,B,C,I,j,P,N,O,o]}class Go extends Z{constructor(e){super(),K(this,e,Vo,Wo,V,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,hovered:0,eventsIfTopMost:13})}}function Zo(n){let e;const r=n[13].default,t=tt(r,n,n[21],null);return{c(){t&&t.c()},m(o,i){t&&t.m(o,i),e=!0},p(o,i){t&&t.p&&(!e||i&2097152)&&rt(t,r,o,o[21],e?ot(r,o[21],i,null):nt(o[21]),null)},i(o){e||(d(t,o),e=!0)},o(o){g(t,o),e=!1},d(o){t&&t.d(o)}}}function Ko(n){let e,r,t;function o(l){n[14](l)}let i={id:n[1],type:"fill",source:n[2],sourceLayer:n[3],beforeId:n[4],beforeLayerType:n[5],paint:n[6],layout:n[7],filter:n[8],minzoom:n[9],maxzoom:n[10],hoverCursor:n[11],eventsIfTopMost:n[12],$$slots:{default:[Zo]},$$scope:{ctx:n}};return n[0]!==void 0&&(i.hovered=n[0]),e=new Cr({props:i}),G.push(()=>q(e,"hovered",o)),e.$on("click",n[15]),e.$on("dblclick",n[16]),e.$on("contextmenu",n[17]),e.$on("mouseenter",n[18]),e.$on("mousemove",n[19]),e.$on("mouseleave",n[20]),{c(){_(e.$$.fragment)},m(l,a){v(e,l,a),t=!0},p(l,[a]){const s={};a&2&&(s.id=l[1]),a&4&&(s.source=l[2]),a&8&&(s.sourceLayer=l[3]),a&16&&(s.beforeId=l[4]),a&32&&(s.beforeLayerType=l[5]),a&64&&(s.paint=l[6]),a&128&&(s.layout=l[7]),a&256&&(s.filter=l[8]),a&512&&(s.minzoom=l[9]),a&1024&&(s.maxzoom=l[10]),a&2048&&(s.hoverCursor=l[11]),a&4096&&(s.eventsIfTopMost=l[12]),a&2097152&&(s.$$scope={dirty:a,ctx:l}),!r&&a&1&&(r=!0,s.hovered=l[0],X(()=>r=!1)),e.$set(s)},i(l){t||(d(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){b(e,l)}}}function qo(n,e,r){let{$$slots:t={},$$scope:o}=e,{id:i=Tt("fill")}=e,{source:l=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:u=void 0}=e,{paint:f}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{minzoom:m=void 0}=e,{maxzoom:y=void 0}=e,{hoverCursor:w=void 0}=e,{hovered:L=null}=e,{eventsIfTopMost:T=!1}=e;function E(O){L=O,r(0,L)}function B(O){he.call(this,n,O)}function C(O){he.call(this,n,O)}function I(O){he.call(this,n,O)}function j(O){he.call(this,n,O)}function P(O){he.call(this,n,O)}function N(O){he.call(this,n,O)}return n.$$set=O=>{"id"in O&&r(1,i=O.id),"source"in O&&r(2,l=O.source),"sourceLayer"in O&&r(3,a=O.sourceLayer),"beforeId"in O&&r(4,s=O.beforeId),"beforeLayerType"in O&&r(5,u=O.beforeLayerType),"paint"in O&&r(6,f=O.paint),"layout"in O&&r(7,c=O.layout),"filter"in O&&r(8,p=O.filter),"minzoom"in O&&r(9,m=O.minzoom),"maxzoom"in O&&r(10,y=O.maxzoom),"hoverCursor"in O&&r(11,w=O.hoverCursor),"hovered"in O&&r(0,L=O.hovered),"eventsIfTopMost"in O&&r(12,T=O.eventsIfTopMost),"$$scope"in O&&r(21,o=O.$$scope)},[L,i,l,a,s,u,f,c,p,m,y,w,T,t,E,B,C,I,j,P,N,o]}class Ot extends Z{constructor(e){super(),K(this,e,qo,Ko,V,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,hovered:0,eventsIfTopMost:12})}}function Br(n){let e=n[0],r,t,o=jr(n);return{c(){o.c(),r=ze()},m(i,l){o.m(i,l),$(i,r,l),t=!0},p(i,l){l&1&&V(e,e=i[0])?(le(),g(o,1,1,re),ae(),o=jr(i),o.c(),d(o,1),o.m(r.parentNode,r)):o.p(i,l)},i(i){t||(d(o),t=!0)},o(i){g(o),t=!1},d(i){i&&h(r),o.d(i)}}}function jr(n){let e;const r=n[15].default,t=tt(r,n,n[14],null);return{c(){t&&t.c()},m(o,i){t&&t.m(o,i),e=!0},p(o,i){t&&t.p&&(!e||i&16384)&&rt(t,r,o,o[14],e?ot(r,o[14],i,null):nt(o[14]),null)},i(o){e||(d(t,o),e=!0)},o(o){g(t,o),e=!1},d(o){t&&t.d(o)}}}function Xo(n){let e,r,t=n[0]&&Br(n);return{c(){t&&t.c(),e=ze()},m(o,i){t&&t.m(o,i),$(o,e,i),r=!0},p(o,[i]){o[0]?t?(t.p(o,i),i&1&&d(t,1)):(t=Br(o),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(le(),g(t,1,1,()=>{t=null}),ae())},i(o){r||(d(t),r=!0)},o(o){g(t),r=!1},d(o){o&&h(e),t&&t.d(o)}}}function Yo(n,e,r){let t,o,i,{$$slots:l={},$$scope:a}=e,{id:s=Tt("geojson")}=e,{data:u}=e,{generateId:f=!1}=e,{promoteId:c=void 0}=e,{filter:p=void 0}=e,{lineMetrics:m=void 0}=e,{cluster:y=void 0}=e;const{map:w,cluster:L,self:T}=zn();x(n,w,C=>r(13,t=C)),x(n,L,C=>r(16,i=C)),x(n,T,C=>r(0,o=C));let E,B=!0;return xt(()=>{if(o){let C=o;$t(T,o=null,o),r(11,E=void 0),En().then(()=>{t!=null&&t.loaded()&&(t==null||t.removeSource(C))})}}),n.$$set=C=>{"id"in C&&r(4,s=C.id),"data"in C&&r(5,u=C.data),"generateId"in C&&r(6,f=C.generateId),"promoteId"in C&&r(7,c=C.promoteId),"filter"in C&&r(8,p=C.filter),"lineMetrics"in C&&r(9,m=C.lineMetrics),"cluster"in C&&r(10,y=C.cluster),"$$scope"in C&&r(14,a=C.$$scope)},n.$$.update=()=>{n.$$.dirty&1024&&$t(L,i=y,i),n.$$.dirty&10225&&t&&o!==s&&(o&&t.removeSource(o),$t(T,o=s,o),t.addSource(o,Kt({type:"geojson",data:u,filter:p,lineMetrics:m,generateId:f,promoteId:c,cluster:!!y,clusterMinPoints:y==null?void 0:y.minPoints,clusterMaxZoom:y==null?void 0:y.maxZoom,clusterRadius:y==null?void 0:y.radius,clusterProperties:y==null?void 0:y.properties})),r(11,E=t.getSource(o)),r(12,B=!0)),n.$$.dirty&6176&&E&&(B?r(12,B=!1):E.setData(u)),n.$$.dirty&3072&&(E==null||E.setClusterOptions(Kt({cluster:!!y,clusterMaxZoom:y==null?void 0:y.maxZoom,clusterRadius:y==null?void 0:y.radius})))},[o,w,L,T,s,u,f,c,p,m,y,E,B,t,a,l]}class Lr extends Z{constructor(e){super(),K(this,e,Yo,Xo,V,{id:4,data:5,generateId:6,promoteId:7,filter:8,lineMetrics:9,cluster:10})}}function Jo(n){let e;const r=n[14].default,t=tt(r,n,n[22],null);return{c(){t&&t.c()},m(o,i){t&&t.m(o,i),e=!0},p(o,i){t&&t.p&&(!e||i&4194304)&&rt(t,r,o,o[22],e?ot(r,o[22],i,null):nt(o[22]),null)},i(o){e||(d(t,o),e=!0)},o(o){g(t,o),e=!1},d(o){t&&t.d(o)}}}function Qo(n){let e,r,t;function o(l){n[15](l)}let i={id:n[1],type:"line",source:n[2],sourceLayer:n[3],beforeId:n[4],beforeLayerType:n[5],paint:n[6],layout:n[7],filter:n[8],minzoom:n[9],maxzoom:n[10],hoverCursor:n[11],manageHoverState:n[12],eventsIfTopMost:n[13],$$slots:{default:[Jo]},$$scope:{ctx:n}};return n[0]!==void 0&&(i.hovered=n[0]),e=new Cr({props:i}),G.push(()=>q(e,"hovered",o)),e.$on("click",n[16]),e.$on("dblclick",n[17]),e.$on("contextmenu",n[18]),e.$on("mouseenter",n[19]),e.$on("mousemove",n[20]),e.$on("mouseleave",n[21]),{c(){_(e.$$.fragment)},m(l,a){v(e,l,a),t=!0},p(l,[a]){const s={};a&2&&(s.id=l[1]),a&4&&(s.source=l[2]),a&8&&(s.sourceLayer=l[3]),a&16&&(s.beforeId=l[4]),a&32&&(s.beforeLayerType=l[5]),a&64&&(s.paint=l[6]),a&128&&(s.layout=l[7]),a&256&&(s.filter=l[8]),a&512&&(s.minzoom=l[9]),a&1024&&(s.maxzoom=l[10]),a&2048&&(s.hoverCursor=l[11]),a&4096&&(s.manageHoverState=l[12]),a&8192&&(s.eventsIfTopMost=l[13]),a&4194304&&(s.$$scope={dirty:a,ctx:l}),!r&&a&1&&(r=!0,s.hovered=l[0],X(()=>r=!1)),e.$set(s)},i(l){t||(d(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){b(e,l)}}}function xo(n,e,r){let{$$slots:t={},$$scope:o}=e,{id:i=Tt("line")}=e,{source:l=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:u=void 0}=e,{paint:f}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{minzoom:m=void 0}=e,{maxzoom:y=void 0}=e,{hoverCursor:w=void 0}=e,{manageHoverState:L=!1}=e,{hovered:T=null}=e,{eventsIfTopMost:E=!1}=e;function B(S){T=S,r(0,T)}function C(S){he.call(this,n,S)}function I(S){he.call(this,n,S)}function j(S){he.call(this,n,S)}function P(S){he.call(this,n,S)}function N(S){he.call(this,n,S)}function O(S){he.call(this,n,S)}return n.$$set=S=>{"id"in S&&r(1,i=S.id),"source"in S&&r(2,l=S.source),"sourceLayer"in S&&r(3,a=S.sourceLayer),"beforeId"in S&&r(4,s=S.beforeId),"beforeLayerType"in S&&r(5,u=S.beforeLayerType),"paint"in S&&r(6,f=S.paint),"layout"in S&&r(7,c=S.layout),"filter"in S&&r(8,p=S.filter),"minzoom"in S&&r(9,m=S.minzoom),"maxzoom"in S&&r(10,y=S.maxzoom),"hoverCursor"in S&&r(11,w=S.hoverCursor),"manageHoverState"in S&&r(12,L=S.manageHoverState),"hovered"in S&&r(0,T=S.hovered),"eventsIfTopMost"in S&&r(13,E=S.eventsIfTopMost),"$$scope"in S&&r(22,o=S.$$scope)},[T,i,l,a,s,u,f,c,p,m,y,w,L,E,t,B,C,I,j,P,N,O,o]}class At extends Z{constructor(e){super(),K(this,e,xo,Qo,V,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13})}}const ei=n=>({features:n[0]&16,data:n[0]&16,map:n[0]&4,close:n[0]&1}),Rr=n=>{var e;return{features:n[4],data:(e=n[4])==null?void 0:e[0],map:n[2],close:n[29]}};function zr(n){let e,r,t=(n[4]||n[3]instanceof Qe.Marker)&&Hr(n);return{c(){e=M("div"),t&&t.c()},m(o,i){$(o,e,i),t&&t.m(e,null),n[30](e),r=!0},p(o,i){o[4]||o[3]instanceof Qe.Marker?t?(t.p(o,i),i[0]&24&&d(t,1)):(t=Hr(o),t.c(),d(t,1),t.m(e,null)):t&&(le(),g(t,1,1,()=>{t=null}),ae())},i(o){r||(d(t),r=!0)},o(o){g(t),r=!1},d(o){o&&h(e),t&&t.d(),n[30](null)}}}function Hr(n){let e;const r=n[28].default,t=tt(r,n,n[27],Rr);return{c(){t&&t.c()},m(o,i){t&&t.m(o,i),e=!0},p(o,i){t&&t.p&&(!e||i[0]&134217749)&&rt(t,r,o,o[27],e?ot(r,o[27],i,ei):nt(o[27]),Rr)},i(o){e||(d(t,o),e=!0)},o(o){g(t,o),e=!1},d(o){t&&t.d(o)}}}function ti(n){let e,r,t=n[8].default&&zr(n);return{c(){t&&t.c(),e=ze()},m(o,i){t&&t.m(o,i),$(o,e,i),r=!0},p(o,i){o[8].default?t?(t.p(o,i),i[0]&256&&d(t,1)):(t=zr(o),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(le(),g(t,1,1,()=>{t=null}),ae())},i(o){r||(d(t),r=!0)},o(o){g(t),r=!1},d(o){o&&h(e),t&&t.d(o)}}}function ri(n,e,r){let t,o,i,l,a,{$$slots:s={},$$scope:u}=e;const f=vo(s);let{closeButton:c=void 0}=e,{closeOnClickOutside:p=!0}=e,{closeOnClickInside:m=!1}=e,{closeOnMove:y=!1}=e,{openOn:w="click"}=e,{focusAfterOpen:L=!0}=e,{anchor:T=void 0}=e,{offset:E=void 0}=e,{popupClass:B=void 0}=e,{maxWidth:C=void 0}=e,{lngLat:I=void 0}=e,{html:j=void 0}=e,{open:P=!1}=e;const{map:N,popupTarget:O,layerEvent:S}=Do();x(n,N,F=>r(2,i=F)),x(n,O,F=>r(3,a=F)),x(n,S,F=>r(26,l=F));const z=["click","dblclick","contextmenu"];let U,W=!1,te;function pe(){if(!U)return;let F=U.getElement();!F||F===te||(te=F,w==="hover"&&(te.style.pointerEvents="none"),te.addEventListener("mouseenter",()=>{r(22,W=!0)},{passive:!0}),te.addEventListener("mouseleave",()=>{r(22,W=!1)},{passive:!0}),te.addEventListener("click",()=>{m&&r(0,P=!1)},{passive:!0}))}er(()=>{if(i)return i.on("click",ue),typeof a=="string"&&(i.on("click",a,ie),i.on("dblclick",a,ie),i.on("contextmenu",a,ie),i.on("mousemove",a,Le),i.on("mouseleave",a,$e),i.on("touchstart",a,ve),i.on("touchend",a,Ee)),()=>{i!=null&&i.loaded()&&(U==null||U.remove(),i.off("click",ue),a instanceof Qe.Marker?a.getPopup()===U&&a.setPopup(void 0):typeof a=="string"&&(i.off("click",a,ie),i.off("dblclick",a,ie),i.off("contextmenu",a,ie),i.off("mousemove",a,Le),i.off("mouseleave",a,$e),i.off("touchstart",a,ve),i.off("touchend",a,Ee)))}});let J=null,se="normal";function ie(F){F.type===w&&("layerType"in F?F.layerType==="deckgl"?(r(9,I=F.coordinate),r(4,J=F.object?[F.object]:null)):(r(9,I=F.lngLat),r(4,J=F.features??[])):(r(9,I=F.lngLat),r(4,J=F.features??[])),setTimeout(()=>r(0,P=!0)))}let _e=null;function ve(F){_e=F.point}function Ee(F){if(!_e||w!=="hover")return;let Se=_e.dist(F.point);_e=null,Se<3&&(r(9,I=F.lngLat),r(4,J=F.features??[]),U.isOpen()?r(23,se="justOpened"):(r(23,se="opening"),r(0,P=!0)))}function $e(F){w!=="hover"||_e||se!=="normal"||(r(0,P=!1),r(4,J=null))}function Le(F){w!=="hover"||_e||se!=="normal"||(r(0,P=!0),r(4,J=F.features??[]),r(9,I=F.lngLat))}function ue(F){if(se==="justOpened"){r(23,se="normal");return}if(!p)return;let Se=[te,a instanceof Qe.Marker?a==null?void 0:a.getElement():null];P&&U.isOpen()&&!Se.some(ye=>ye==null?void 0:ye.contains(F.originalEvent.target))&&r(0,P=!1)}let R;const be=()=>r(0,P=!1);function ne(F){G[F?"unshift":"push"](()=>{R=F,r(1,R)})}return n.$$set=F=>{"closeButton"in F&&r(10,c=F.closeButton),"closeOnClickOutside"in F&&r(11,p=F.closeOnClickOutside),"closeOnClickInside"in F&&r(12,m=F.closeOnClickInside),"closeOnMove"in F&&r(13,y=F.closeOnMove),"openOn"in F&&r(14,w=F.openOn),"focusAfterOpen"in F&&r(15,L=F.focusAfterOpen),"anchor"in F&&r(16,T=F.anchor),"offset"in F&&r(17,E=F.offset),"popupClass"in F&&r(18,B=F.popupClass),"maxWidth"in F&&r(19,C=F.maxWidth),"lngLat"in F&&r(9,I=F.lngLat),"html"in F&&r(20,j=F.html),"open"in F&&r(0,P=F.open),"$$scope"in F&&r(27,u=F.$$scope)},n.$$.update=()=>{if(n.$$.dirty[0]&7168&&r(25,t=c??(!p&&!m)),n.$$.dirty[0]&36675584&&(U||(r(21,U=new Qe.Popup({closeButton:t,closeOnClick:!1,closeOnMove:y,focusAfterOpen:L,maxWidth:C,className:B,anchor:T,offset:E})),te=U.getElement(),U.on("open",()=>{r(0,P=!0),pe()}),U.on("close",F=>{r(0,P=!1)}))),n.$$.dirty[0]&2113544&&U&&a instanceof Qe.Marker&&(w==="click"?a.setPopup(U):a.getPopup()===U&&a.setPopup(void 0)),n.$$.dirty[0]&67125248&&z.includes(w)&&(l==null?void 0:l.type)===w&&(ie(l),$t(S,l=null,l)),n.$$.dirty[0]&67125248&&r(24,o=w==="hover"&&((l==null?void 0:l.type)==="mousemove"||(l==null?void 0:l.type)==="mouseenter")),n.$$.dirty[0]&88096768&&w==="hover"&&S&&(o&&l&&(l.layerType==="deckgl"?(r(9,I=l.coordinate),r(4,J=l.object?[l.object]:null)):(r(9,I=l.lngLat),r(4,J=l.features??[]))),r(0,P=(o||W)??!1)),n.$$.dirty[0]&3145730&&(R?U.setDOMContent(R):j&&U.setHTML(j)),n.$$.dirty[0]&2097664&&I&&U.setLngLat(I),n.$$.dirty[0]&10485765&&i){let F=U.isOpen();P&&!F?(U.addTo(i),se==="opening"&&r(23,se="justOpened")):!P&&F&&U.remove()}},[P,R,i,a,J,N,O,S,f,I,c,p,m,y,w,L,T,E,B,C,j,U,W,se,o,t,l,u,s,be,ne]}class it extends Z{constructor(e){super(),K(this,e,ri,ti,V,{closeButton:10,closeOnClickOutside:11,closeOnClickInside:12,closeOnMove:13,openOn:14,focusAfterOpen:15,anchor:16,offset:17,popupClass:18,maxWidth:19,lngLat:9,html:20,open:0},null,[-1,-1])}}function ni(n){let e;return{c(){e=M("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function oi(n){let e,r,t,o,i=n[0]=="Private (development)"&&ni();return{c(){i&&i.c(),e=A(),r=M("p"),r.textContent="Note the ATF scheme data has not been validated.",t=A(),o=M("p"),o.innerHTML=`Please contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      about any problems, ideas, or feedback for this site.`},m(l,a){i&&i.m(l,a),$(l,e,a),$(l,r,a),$(l,t,a),$(l,o,a)},p:re,d(l){l&&(h(e),h(r),h(t),h(o)),i&&i.d(l)}}}function ii(n){let e,r,t,o,i,l;return i=new ce({props:{$$slots:{default:[oi]},$$scope:{ctx:n}}}),{c(){e=M("p"),r=k("App version: "),t=k(n[0]),o=A(),_(i.$$.fragment)},m(a,s){$(a,e,s),D(e,r),D(e,t),D(e,o),v(i,e,null),l=!0},p(a,[s]){const u={};s&2&&(u.$$scope={dirty:s,ctx:a}),i.$set(u)},i(a){l||(d(i.$$.fragment,a),l=!0)},o(a){g(i.$$.fragment,a),l=!1},d(a){a&&h(e),b(i)}}}function si(n){return[wr()]}class li extends Z{constructor(e){super(),K(this,e,si,ii,V,{})}}const ai={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Oe=Uint8Array,pt=Uint16Array,Hn=Uint32Array,Un=new Oe([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Wn=new Oe([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),fi=new Oe([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Vn=function(n,e){for(var r=new pt(31),t=0;t<31;++t)r[t]=e+=1<<n[t-1];for(var o=new Hn(r[30]),t=1;t<30;++t)for(var i=r[t];i<r[t+1];++i)o[i]=i-r[t]<<5|t;return[r,o]},Gn=Vn(Un,2),Zn=Gn[0],ui=Gn[1];Zn[28]=258,ui[258]=28;var ci=Vn(Wn,0),pi=ci[0],pr=new pt(32768);for(var oe=0;oe<32768;++oe){var Xe=(oe&43690)>>>1|(oe&21845)<<1;Xe=(Xe&52428)>>>2|(Xe&13107)<<2,Xe=(Xe&61680)>>>4|(Xe&3855)<<4,pr[oe]=((Xe&65280)>>>8|(Xe&255)<<8)>>>1}var Et=function(n,e,r){for(var t=n.length,o=0,i=new pt(e);o<t;++o)n[o]&&++i[n[o]-1];var l=new pt(e);for(o=0;o<e;++o)l[o]=l[o-1]+i[o-1]<<1;var a;if(r){a=new pt(1<<e);var s=15-e;for(o=0;o<t;++o)if(n[o])for(var u=o<<4|n[o],f=e-n[o],c=l[n[o]-1]++<<f,p=c|(1<<f)-1;c<=p;++c)a[pr[c]>>>s]=u}else for(a=new pt(t),o=0;o<t;++o)n[o]&&(a[o]=pr[l[n[o]-1]++]>>>15-n[o]);return a},jt=new Oe(288);for(var oe=0;oe<144;++oe)jt[oe]=8;for(var oe=144;oe<256;++oe)jt[oe]=9;for(var oe=256;oe<280;++oe)jt[oe]=7;for(var oe=280;oe<288;++oe)jt[oe]=8;var Kn=new Oe(32);for(var oe=0;oe<32;++oe)Kn[oe]=5;var mi=Et(jt,9,1),$i=Et(Kn,5,1),rr=function(n){for(var e=n[0],r=1;r<n.length;++r)n[r]>e&&(e=n[r]);return e},Ne=function(n,e,r){var t=e/8|0;return(n[t]|n[t+1]<<8)>>(e&7)&r},nr=function(n,e){var r=e/8|0;return(n[r]|n[r+1]<<8|n[r+2]<<16)>>(e&7)},hi=function(n){return(n+7)/8|0},Tr=function(n,e,r){(e==null||e<0)&&(e=0),(r==null||r>n.length)&&(r=n.length);var t=new(n.BYTES_PER_ELEMENT==2?pt:n.BYTES_PER_ELEMENT==4?Hn:Oe)(r-e);return t.set(n.subarray(e,r)),t},di=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],je=function(n,e,r){var t=new Error(e||di[n]);if(t.code=n,Error.captureStackTrace&&Error.captureStackTrace(t,je),!r)throw t;return t},gi=function(n,e,r){var t=n.length;if(!t||r&&r.f&&!r.l)return e||new Oe(0);var o=!e||r,i=!r||r.i;r||(r={}),e||(e=new Oe(t*3));var l=function(be){var ne=e.length;if(be>ne){var F=new Oe(Math.max(ne*2,be));F.set(e),e=F}},a=r.f||0,s=r.p||0,u=r.b||0,f=r.l,c=r.d,p=r.m,m=r.n,y=t*8;do{if(!f){a=Ne(n,s,1);var w=Ne(n,s+1,3);if(s+=3,w)if(w==1)f=mi,c=$i,p=9,m=5;else if(w==2){var B=Ne(n,s,31)+257,C=Ne(n,s+10,15)+4,I=B+Ne(n,s+5,31)+1;s+=14;for(var j=new Oe(I),P=new Oe(19),N=0;N<C;++N)P[fi[N]]=Ne(n,s+N*3,7);s+=C*3;for(var O=rr(P),S=(1<<O)-1,z=Et(P,O,1),N=0;N<I;){var U=z[Ne(n,s,S)];s+=U&15;var L=U>>>4;if(L<16)j[N++]=L;else{var W=0,te=0;for(L==16?(te=3+Ne(n,s,3),s+=2,W=j[N-1]):L==17?(te=3+Ne(n,s,7),s+=3):L==18&&(te=11+Ne(n,s,127),s+=7);te--;)j[N++]=W}}var pe=j.subarray(0,B),J=j.subarray(B);p=rr(pe),m=rr(J),f=Et(pe,p,1),c=Et(J,m,1)}else je(1);else{var L=hi(s)+4,T=n[L-4]|n[L-3]<<8,E=L+T;if(E>t){i&&je(0);break}o&&l(u+T),e.set(n.subarray(L,E),u),r.b=u+=T,r.p=s=E*8,r.f=a;continue}if(s>y){i&&je(0);break}}o&&l(u+131072);for(var se=(1<<p)-1,ie=(1<<m)-1,_e=s;;_e=s){var W=f[nr(n,s)&se],ve=W>>>4;if(s+=W&15,s>y){i&&je(0);break}if(W||je(2),ve<256)e[u++]=ve;else if(ve==256){_e=s,f=null;break}else{var Ee=ve-254;if(ve>264){var N=ve-257,$e=Un[N];Ee=Ne(n,s,(1<<$e)-1)+Zn[N],s+=$e}var Le=c[nr(n,s)&ie],ue=Le>>>4;Le||je(3),s+=Le&15;var J=pi[ue];if(ue>3){var $e=Wn[ue];J+=nr(n,s)&(1<<$e)-1,s+=$e}if(s>y){i&&je(0);break}o&&l(u+131072);for(var R=u+Ee;u<R;u+=4)e[u]=e[u-J],e[u+1]=e[u+1-J],e[u+2]=e[u+2-J],e[u+3]=e[u+3-J];u=R}}r.l=f,r.p=_e,r.b=u,r.f=a,f&&(a=1,r.m=p,r.d=c,r.n=m)}while(!a);return u==e.length?e:Tr(e,0,u)},_i=new Oe(0),We=function(n,e){return n[e]|n[e+1]<<8},Re=function(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24)>>>0},or=function(n,e){return Re(n,e)+Re(n,e+4)*4294967296};function vi(n,e){return gi(n,e)}var mr=typeof TextDecoder<"u"&&new TextDecoder,bi=0;try{mr.decode(_i,{stream:!0}),bi=1}catch{}var yi=function(n){for(var e="",r=0;;){var t=n[r++],o=(t>127)+(t>223)+(t>239);if(r+o>n.length)return[e,Tr(n,r-1)];o?o==3?(t=((t&15)<<18|(n[r++]&63)<<12|(n[r++]&63)<<6|n[r++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):o&1?e+=String.fromCharCode((t&31)<<6|n[r++]&63):e+=String.fromCharCode((t&15)<<12|(n[r++]&63)<<6|n[r++]&63):e+=String.fromCharCode(t)}};function qn(n,e){if(e){for(var r="",t=0;t<n.length;t+=16384)r+=String.fromCharCode.apply(null,n.subarray(t,t+16384));return r}else{if(mr)return mr.decode(n);var o=yi(n),i=o[0],l=o[1];return l.length&&je(8),i}}var wi=function(n,e){return e+30+We(n,e+26)+We(n,e+28)},ki=function(n,e,r){var t=We(n,e+28),o=qn(n.subarray(e+46,e+46+t),!(We(n,e+8)&2048)),i=e+46+t,l=Re(n,e+20),a=r&&l==4294967295?Si(n,i):[l,Re(n,e+24),Re(n,e+42)],s=a[0],u=a[1],f=a[2];return[We(n,e+10),s,u,o,i+We(n,e+30)+We(n,e+32),f]},Si=function(n,e){for(;We(n,e)!=1;e+=4+We(n,e+2));return[or(n,e+12),or(n,e+4),or(n,e+20)]};function Ci(n,e){for(var r={},t=n.length-22;Re(n,t)!=101010256;--t)(!t||n.length-t>65558)&&je(13);var o=We(n,t+8);if(!o)return{};var i=Re(n,t+16),l=i==4294967295||o==65535;if(l){var a=Re(n,t-12);l=Re(n,a)==101075792,l&&(o=Re(n,a+32),i=Re(n,a+48))}for(var s=e&&e.filter,u=0;u<o;++u){var f=ki(n,i,l),c=f[0],p=f[1],m=f[2],y=f[3],w=f[4],L=f[5],T=wi(n,L);i=w,(!s||s({name:y,size:p,originalSize:m,compression:c}))&&(c?c==8?r[y]=vi(n.subarray(T,T+p),new Oe(m)):je(14,"unknown compression type "+c):r[y]=Tr(n,T,T+p))}return r}function Li(n){return n instanceof File||n instanceof Blob?n.arrayBuffer().then(ir):ir(n)}function ir(n){var e=new Uint8Array(n),r=Ci(e);return Promise.resolve(Ti(r))}function Ti(n){for(var e=[],r=0,t=Object.keys(n);r<t.length;r++){var o=t[r];e[o]=qn(n[o])}return e}function Ve(n,e){for(var r=0;r<n.childNodes.length;){var t=n.childNodes[r];if(t.nodeType===1&&ht(t)===e)return t;r++}}function Rt(n,e){for(var r=[],t=0;t<n.childNodes.length;){var o=n.childNodes[t];o.nodeType===1&&ht(o)===e&&r.push(o),t++}return r}function qt(n,e,r){for(var t=0;t<n.childNodes.length;){var o=n.childNodes[t];e?o.nodeType===1&&ht(o)===e&&r(o,t):r(o,t),t++}}function Oi(n,e,r){var t=[];return qt(n,e,function(o,i){t.push(r(o,i))}),t}var Ai=/.+\:/;function ht(n){return n.tagName.replace(Ai,"")}function Xn(n){if(n.nodeType!==1)return n.textContent;for(var e="<"+ht(n),r=0;r<n.attributes.length;)e+=" "+n.attributes[r].name+'="'+n.attributes[r].value+'"',r++;e+=">";for(var t=0;t<n.childNodes.length;)e+=Xn(n.childNodes[t]),t++;return e+="</"+ht(n)+">",e}function Ii(n){var e=n.documentElement,r=Ve(e,"sheetData"),t=[];return qt(r,"row",function(o){qt(o,"c",function(i){t.push(i)})}),t}function Di(n,e){return Ve(e,"v")}function Ei(n,e){if(e.firstChild&&ht(e.firstChild)==="is"&&e.firstChild.firstChild&&ht(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Mi(n){var e=n.documentElement,r=Ve(e,"dimension");if(r)return r.getAttribute("ref")}function Pi(n){var e=n.documentElement,r=Ve(e,"cellStyleXfs");return r?Rt(r,"xf"):[]}function Ni(n){var e=n.documentElement,r=Ve(e,"cellXfs");return r?Rt(r,"xf"):[]}function Fi(n){var e=n.documentElement,r=Ve(e,"numFmts");return r?Rt(r,"numFmt"):[]}function Bi(n){var e=n.documentElement;return Oi(e,"si",function(r){var t=Ve(r,"t");if(t)return t.textContent;var o="";return qt(r,"r",function(i){o+=Ve(i,"t").textContent}),o})}function ji(n){var e=n.documentElement;return Ve(e,"workbookPr")}function Ri(n){var e=n.documentElement;return Rt(e,"Relationship")}function zi(n){var e=n.documentElement,r=Ve(e,"sheets");return Rt(r,"sheet")}function Hi(n,e){var r=e.createDocument(n),t={},o=ji(r);o&&o.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var i=function(a){a.getAttribute("name")&&t.sheets.push({id:a.getAttribute("sheetId"),name:a.getAttribute("name"),relationId:a.getAttribute("r:id")})};return zi(r).forEach(i),t}function Ui(n,e){var r=e.createDocument(n),t={sheets:{},sharedStrings:void 0,styles:void 0},o=function(l){var a=l.getAttribute("Target"),s=l.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=sr(a);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=sr(a);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[l.getAttribute("Id")]=sr(a);break}};return Ri(r).forEach(o),t}function sr(n){return n[0]==="/"?n.slice(1):"xl/"+n}function Ur(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,t)}return r}function Wr(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ur(Object(r),!0).forEach(function(t){Wi(n,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Ur(Object(r)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))})}return n}function Wi(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Vi(n,e){if(!n)return{};var r=e.createDocument(n),t=Pi(r).map(lr),o=Fi(r).map(Gi).reduce(function(l,a){return l[a.id]=a,l},[]),i=function(a){return a.hasAttribute("xfId")?Wr(Wr({},t[a.xfId]),lr(a,o)):lr(a,o)};return Ni(r).map(i)}function Gi(n){return{id:n.getAttribute("numFmtId"),template:n.getAttribute("formatCode")}}function lr(n,e){var r={};if(n.hasAttribute("numFmtId")){var t=n.getAttribute("numFmtId");e[t]?r.numberFormat=e[t]:r.numberFormat={id:t}}return r}function Zi(n,e){return n?Bi(e.createDocument(n)):[]}function Yn(n,e){e&&e.epoch1904&&(n+=1462);var r=70*365+19,t=60*60*1e3;return new Date(Math.round((n-r)*24*t))}function Ki(n,e){var r=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r)return(r=r.call(n)).next.bind(r);if(Array.isArray(n)||(r=qi(n))||e&&n&&typeof n.length=="number"){r&&(n=r);var t=0;return function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qi(n,e){if(n){if(typeof n=="string")return Vr(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vr(n,e)}}function Vr(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function Xi(n,e,r,t){if(e){var o=r[e];if(!o)throw new Error("Cell style not found: ".concat(e));if(!o.numberFormat)return!1;if(Yi.indexOf(Number(o.numberFormat.id))>=0||t.dateFormat&&o.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&o.numberFormat.template&&xi(o.numberFormat.template))return!0}}var Yi=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],Ji=/^\[\$-414\]/,Qi=/;@$/;function xi(n){n=n.toLowerCase(),n=n.replace(Ji,""),n=n.replace(Qi,"");for(var e=n.split(/\W+/),r=Ki(e),t;!(t=r()).done;){var o=t.value;if(es.indexOf(o)<0)return!1}return!0}var es=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function ts(n,e,r){var t=r.getInlineStringValue,o=r.getInlineStringXml,i=r.getStyleId,l=r.styles,a=r.values,s=r.properties,u=r.options;switch(e||(e="n"),e){case"str":n=ar(n,u);break;case"inlineStr":if(n=t(),n===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(o()));n=ar(n,u);break;case"s":var f=Number(n);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(n));if(f>=a.length)throw new Error('An out-of-bounds "shared" string index: '.concat(n));n=a[f],n=ar(n,u);break;case"b":if(n==="1")n=!0;else if(n==="0")n=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(n));break;case"z":n=void 0;break;case"e":n=rs(n);break;case"d":if(n===void 0)break;var c=new Date(n);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(n));n=c;break;case"n":if(n===void 0)break;var p=Number(n);if(isNaN(p))throw new Error('Invalid "numeric" cell value: '.concat(n));n=p,Xi(n,i(),l,u)&&(n=Yn(n,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return n===void 0&&(n=null),n}function rs(n){switch(n){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(n)}}function ar(n,e){return e.trim!==!1&&(n=n.trim()),n===""&&(n=void 0),n}var ns=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function os(n){var e=function(u,f){return u-f},r=n.map(function(s){return s.row}).sort(e),t=n.map(function(s){return s.column}).sort(e),o=r[0],i=r[r.length-1],l=t[0],a=t[t.length-1];return[{row:o,column:l},{row:i,column:a}]}function is(n){for(var e=0,r=0;r<n.length;)e*=26,e+=ns.indexOf(n[r]),r++;return e}function Jn(n){return n=n.split(/(\d+)/),[parseInt(n[1]),is(n[0].trim())]}function ss(n,e,r,t,o,i,l){var a=Jn(n.getAttribute("r")),s=Di(e,n),u=s&&s.textContent,f;return n.hasAttribute("t")&&(f=n.getAttribute("t")),{row:a[0],column:a[1],value:ts(u,f,{getInlineStringValue:function(){return Ei(e,n)},getInlineStringXml:function(){return Xn(n)},getStyleId:function(){return n.getAttribute("s")},styles:o,values:t,properties:i,options:l})}}function ls(n,e,r,t,o,i){var l=Ii(n);return l.length===0?[]:l.map(function(a){return ss(a,n,e,r,t,o,i)})}function as(n,e){return ps(n)||cs(n,e)||us(n,e)||fs()}function fs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function us(n,e){if(n){if(typeof n=="string")return Gr(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gr(n,e)}}function Gr(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function cs(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var t=[],o=!0,i=!1,l,a;try{for(r=r.call(n);!(o=(l=r.next()).done)&&(t.push(l.value),!(e&&t.length===e));o=!0);}catch(s){i=!0,a=s}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw a}}return t}}function ps(n){if(Array.isArray(n))return n}function ms(n){var e=Mi(n);if(e)return e=e.split(":").map(Jn).map(function(r){var t=as(r,2),o=t[0],i=t[1];return{row:o,column:i}}),e.length===1&&(e=[e[0],e[0]]),e}function $s(n,e,r,t,o,i){var l=e.createDocument(n),a=ls(l,e,r,t,o,i),s=ms(l)||os(a);return{cells:a,dimensions:s}}function hs(n,e){var r=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r)return(r=r.call(n)).next.bind(r);if(Array.isArray(n)||(r=ds(n))||e&&n&&typeof n.length=="number"){r&&(n=r);var t=0;return function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ds(n,e){if(n){if(typeof n=="string")return Zr(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zr(n,e)}}function Zr(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function gs(n){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.rowMap,t=e.accessor,o=t===void 0?function(c){return c}:t,i=e.onlyTrimAtTheEnd,l=n.length-1;l>=0;){for(var a=!0,s=hs(n[l]),u;!(u=s()).done;){var f=u.value;if(o(f)!==null){a=!1;break}}if(a)n.splice(l,1),r&&r.splice(l,1);else if(i)break;l--}return n}function _s(n,e){var r=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r)return(r=r.call(n)).next.bind(r);if(Array.isArray(n)||(r=vs(n))||e&&n&&typeof n.length=="number"){r&&(n=r);var t=0;return function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vs(n,e){if(n){if(typeof n=="string")return Kr(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kr(n,e)}}function Kr(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function bs(n){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.accessor,t=r===void 0?function(c){return c}:r,o=e.onlyTrimAtTheEnd,i=n[0].length-1;i>=0;){for(var l=!0,a=_s(n),s;!(s=a()).done;){var u=s.value;if(t(u[i])!==null){l=!1;break}}if(l)for(var f=0;f<n.length;)n[f].splice(i,1),f++;else if(o)break;i--}return n}function ys(n,e){var r=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r)return(r=r.call(n)).next.bind(r);if(Array.isArray(n)||(r=Qn(n))||e&&n&&typeof n.length=="number"){r&&(n=r);var t=0;return function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ws(n,e){return Cs(n)||Ss(n,e)||Qn(n,e)||ks()}function ks(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qn(n,e){if(n){if(typeof n=="string")return qr(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qr(n,e)}}function qr(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function Ss(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var t=[],o=!0,i=!1,l,a;try{for(r=r.call(n);!(o=(l=r.next()).done)&&(t.push(l.value),!(e&&t.length===e));o=!0);}catch(s){i=!0,a=s}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw a}}return t}}function Cs(n){if(Array.isArray(n))return n}function Ls(n,e){var r=n.dimensions,t=n.cells;if(t.length===0)return[];var o=ws(r,2);o[0];for(var i=o[1],l=i.column,a=i.row,s=new Array(a),u=0;u<a;){s[u]=new Array(l);for(var f=0;f<l;)s[u][f]=null,f++;u++}for(var c=ys(t),p;!(p=c()).done;){var m=p.value,y=m.row-1,w=m.column-1;w<l&&y<a&&(s[y][w]=m.value)}var L=e.rowMap;if(L)for(var T=0;T<s.length;)L[T]=T,T++;return s=gs(bs(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:L}),e.transformData&&(s=e.transformData(s)),s}function Ts(n,e){var r=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r)return(r=r.call(n)).next.bind(r);if(Array.isArray(n)||(r=Os(n))||e&&n&&typeof n.length=="number"){r&&(n=r);var t=0;return function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Os(n,e){if(n){if(typeof n=="string")return Xr(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xr(n,e)}}function Xr(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function Yr(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,t)}return r}function As(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Yr(Object(r),!0).forEach(function(t){Is(n,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Yr(Object(r)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))})}return n}function Is(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Ds(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};r.sheet||(r=As({sheet:1},r));var t=function(p){if(!n[p])throw new Error('"'.concat(p,'" file not found inside the *.xlsx file zip archive'));return n[p]},o=Ui(t("xl/_rels/workbook.xml.rels"),e),i=o.sharedStrings?Zi(t(o.sharedStrings),e):[],l=o.styles?Vi(t(o.styles),e):{},a=Hi(t("xl/workbook.xml"),e);if(r.getSheets)return a.sheets.map(function(c){var p=c.name;return{name:p}});var s=Es(r.sheet,a.sheets);if(!s||!o.sheets[s])throw Ms(r.sheet,a.sheets);var u=$s(t(o.sheets[s]),e,i,l,a,r),f=Ls(u,r);return r.properties?{data:f,properties:a}:f}function Es(n,e){if(typeof n=="number"){var r=e[n-1];return r&&r.relationId}for(var t=Ts(e),o;!(o=t()).done;){var i=o.value;if(i.name===n)return i.relationId}}function Ms(n,e){var r=e&&e.map(function(t,o){return'"'.concat(t.name,'" (#').concat(o+1,")")}).join(", ");return new Error("Sheet ".concat(typeof n=="number"?"#"+n:'"'+n+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+r+".":""))}function $r(n){"@babel/helpers - typeof";return $r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$r(n)}function Jr(n,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Ps(n,e,r){return e&&Jr(n.prototype,e),r&&Jr(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}function Ns(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Fs(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Nt(n,e)}function Bs(n){var e=xn();return function(){var t=Ft(n),o;if(e){var i=Ft(this).constructor;o=Reflect.construct(t,arguments,i)}else o=t.apply(this,arguments);return js(this,o)}}function js(n,e){if(e&&($r(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rs(n)}function Rs(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function hr(n){var e=typeof Map=="function"?new Map:void 0;return hr=function(t){if(t===null||!zs(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,o)}function o(){return Wt(t,arguments,Ft(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Nt(o,t)},hr(n)}function Wt(n,e,r){return xn()?Wt=Reflect.construct:Wt=function(o,i,l){var a=[null];a.push.apply(a,i);var s=Function.bind.apply(o,a),u=new s;return l&&Nt(u,l.prototype),u},Wt.apply(null,arguments)}function xn(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function zs(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function Nt(n,e){return Nt=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t},Nt(n,e)}function Ft(n){return Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Ft(n)}var Ae=function(n){Fs(r,n);var e=Bs(r);function r(t){var o;return Ns(this,r),o=e.call(this,"invalid"),o.reason=t,o}return Ps(r)}(hr(Error));function Hs(n){if(typeof n=="string"){var e=n;if(n=Number(n),String(n)!==e)throw new Ae("not_a_number")}if(typeof n!="number")throw new Ae("not_a_number");if(isNaN(n))throw new Ae("invalid_number");if(!isFinite(n))throw new Ae("out_of_bounds");return n}function Us(n){if(typeof n=="string")return n;if(typeof n=="number"){if(isNaN(n))throw new Ae("invalid_number");if(!isFinite(n))throw new Ae("out_of_bounds");return String(n)}throw new Ae("not_a_string")}function Ws(n){if(typeof n=="boolean")return n;throw new Ae("not_a_boolean")}function Vs(n,e){var r=e.properties;if(n instanceof Date){if(isNaN(n.valueOf()))throw new Ae("out_of_bounds");return n}if(typeof n=="number"){if(isNaN(n))throw new Ae("invalid_number");if(!isFinite(n))throw new Ae("out_of_bounds");var t=Yn(n,r);if(isNaN(t.valueOf()))throw new Ae("out_of_bounds");return t}throw new Ae("not_a_date")}function Gs(n,e){return qs(n)||Ks(n,e)||eo(n,e)||Zs()}function Zs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ks(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var t=[],o=!0,i=!1,l,a;try{for(r=r.call(n);!(o=(l=r.next()).done)&&(t.push(l.value),!(e&&t.length===e));o=!0);}catch(s){i=!0,a=s}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw a}}return t}}function qs(n){if(Array.isArray(n))return n}function dr(n){"@babel/helpers - typeof";return dr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dr(n)}function Xs(n,e){var r=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r)return(r=r.call(n)).next.bind(r);if(Array.isArray(n)||(r=eo(n))||e&&n&&typeof n.length=="number"){r&&(n=r);var t=0;return function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eo(n,e){if(n){if(typeof n=="string")return Qr(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qr(n,e)}}function Qr(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function xr(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,t)}return r}function en(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xr(Object(r),!0).forEach(function(t){Ys(n,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):xr(Object(r)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))})}return n}function Ys(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}var tn={isColumnOriented:!1};function Js(n,e,r){r?r=en(en({},tn),r):r=tn;var t=r,o=t.isColumnOriented,i=t.rowMap,l=t.ignoreEmptyRows;tl(e),o&&(n=el(n));for(var a=n[0],s=[],u=[],f=1;f<n.length;f++){var c=to(e,n[f],f,a,u,r);(c!==null||l===!1)&&s.push(c)}if(i)for(var p=Xs(u),m;!(m=p()).done;){var y=m.value;y.row=i[y.row-1]+1}return{rows:s,errors:u}}function to(n,e,r,t,o,i){for(var l={},a=!0,s=function(){var p=f[u],m=n[p],y=dr(m.type)==="object"&&!Array.isArray(m.type),w=e[t.indexOf(p)];w===void 0&&(w=null);var L=void 0,T=void 0,E=void 0;if(y)L=to(m.type,e,r,t,o,i);else if(w===null)L=null;else if(Array.isArray(m.type)){var B=!1,C=xs(w).map(function(j){var P=rn(j,m,i);return P.error&&(L=j,T=P.error,E=P.reason),P.value!==null&&(B=!0),P.value});T||(L=B?C:null)}else{var I=rn(w,m,i);T=I.error,E=I.reason,L=T?w:I.value}!T&&L===null&&m.required&&(T="required"),T?(T={error:T,row:r+1,column:p,value:L},E&&(T.reason=E),m.type&&(T.type=m.type),o.push(T)):(a&&L!==null&&(a=!1),(L!==null||i.includeNullValues)&&(l[m.prop]=L))},u=0,f=Object.keys(n);u<f.length;u++)s();return a?null:l}function rn(n,e,r){if(n===null)return{value:null};var t;if(e.parse?t=bt(n,e.parse):e.type?t=Qs(n,Array.isArray(e.type)?e.type[0]:e.type,r):t={value:n},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(o){return{error:o.message}}}return t}function bt(n,e){try{return n=e(n),n===void 0?{value:null}:{value:n}}catch(t){var r={error:t.message};return t.reason&&(r.reason=t.reason),r}}function Qs(n,e,r){switch(e){case String:return bt(n,Us);case Number:return bt(n,Hs);case Date:return bt(n,function(t){return Vs(t,{properties:r.properties})});case Boolean:return bt(n,Ws);default:if(typeof e=="function")return bt(n,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function ro(n,e,r){for(var t=0,o="";r+t<n.length;){var i=n[r+t];if(i===e)return[o,t];if(i==='"'){var l=ro(n,'"',r+t+1);o+=l[0],t+=1+l[1]+1}else o+=i,t++}return[o,t]}function xs(n){for(var e=[],r=0;r<n.length;){var t=ro(n,",",r),o=Gs(t,2),i=o[0],l=o[1];r+=l+1,e.push(i.trim())}return e}var el=function(e){return e[0].map(function(r,t){return e.map(function(o){return o[t]})})};function tl(n){for(var e=0,r=Object.keys(n);e<r.length;e++){var t=r[e],o=n[t];if(!o.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function gr(n){"@babel/helpers - typeof";return gr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gr(n)}function no(n){for(var e={},r=0,t=Object.keys(n);r<t.length;r++){var o=t[r],i=n[o],l=void 0;gr(i)==="object"&&(i=Object.keys(n[o])[0],l=no(n[o][i])),e[o]={prop:i},l&&(e[o].type=l)}return e}var rl=["schema","map"];function nn(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,t)}return r}function Ut(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nn(Object(r),!0).forEach(function(t){nl(n,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):nn(Object(r)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))})}return n}function nl(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function ol(n,e){if(n==null)return{};var r=il(n,e),t,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(o=0;o<i.length;o++)t=i[o],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function il(n,e){if(n==null)return{};var r={},t=Object.keys(n),o,i;for(i=0;i<t.length;i++)o=t[i],!(e.indexOf(o)>=0)&&(r[o]=n[o]);return r}function sl(n,e,r){var t=r.schema,o=r.map,i=ol(r,rl);!t&&o&&(t=no(o));var l=Ds(n,e,Ut(Ut({},i),{},{properties:t||i.properties}));return t?Js(l.data,t,Ut(Ut({},i),{},{properties:l.properties})):l}function ll(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Li(n).then(function(r){return sl(r,ai,e)})}function al(n){let e=new Map;for(let[t,o]of Object.entries(n.schemes))e.set(t,{scheme_reference:t,num_features:0,authority_or_region:o.authority_or_region,capital_scheme_id:o.capital_scheme_id,funding_programme:o.funding_programme});let r=1;for(let t of n.features){let o=e.get(t.properties.scheme_reference);o.num_features++,t.properties.funding_programme=o.funding_programme,t.id=r++}return e}async function fl(n){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:r}=await ll(n,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let o of r){let i=bo(o.lat_lon.split(",").map(parseFloat).reverse()),l=o;l.submission_time=o.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:l,geometry:{type:"Point",coordinates:i},id:t.features.length+1})}return t}const Y={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"},tr=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function ul(n){let e,r,t,o,i;function l(s){n[3](s)}let a={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return n[0]!==void 0&&(a.value=n[0]),e=new Zt({props:a}),G.push(()=>q(e,"value",l)),e.$on("change",n[2]),o=new Lo({props:{rows:n[1]}}),{c(){_(e.$$.fragment),t=A(),_(o.$$.fragment)},m(s,u){v(e,s,u),$(s,t,u),v(o,s,u),i=!0},p(s,[u]){const f={};!r&&u&1&&(r=!0,f.value=s[0],X(()=>r=!1)),e.$set(f);const c={};u&2&&(c.rows=s[1]),o.$set(c)},i(s){i||(d(e.$$.fragment,s),d(o.$$.fragment,s),i=!0)},o(s){g(e.$$.fragment,s),g(o.$$.fragment,s),i=!1},d(s){s&&h(t),b(e,s),b(o,s)}}}function cl(n,e,r){let t;x(n,Ce,s=>r(4,t=s));let o="interventionType",i=Mr("v1");function l(){let s;o=="interventionType"?(s=Rn("v1"),r(1,i=Mr("v1"))):(s=Mn(["get","funding_programme"],{ATF2:Y.atf2,ATF3:Y.atf3,ATF4:Y.atf4},"grey"),r(1,i=[["ATF2",Y.atf2],["ATF3",Y.atf3],["ATF4",Y.atf4]])),t.setPaintProperty("interventions-points","circle-color",s),t.setPaintProperty("interventions-lines","line-color",s),t.setPaintProperty("interventions-polygons","fill-color",s),t.setPaintProperty("interventions-polygon-outlines","line-color",s)}function a(s){o=s,r(0,o)}return[o,i,l,a]}class pl extends Z{constructor(e){super(),K(this,e,cl,ul,V,{})}}function ml(n){let e;return{c(){e=k("Clear")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function $l(n){let e,r,t,o,i,l;return t=new cr({props:{$$slots:{default:[ml]},$$scope:{ctx:n}}}),t.$on("click",n[13]),{c(){e=M("input"),r=A(),_(t.$$.fragment),ee(e,"type","text"),ee(e,"class","govuk-input govuk-input--width-10"),ee(e,"id","filterText")},m(a,s){$(a,e,s),Dr(e,n[0]),$(a,r,s),v(t,a,s),o=!0,i||(l=kr(e,"input",n[12]),i=!0)},p(a,s){s&1&&e.value!==a[0]&&Dr(e,a[0]);const u={};s&131072&&(u.$$scope={dirty:s,ctx:a}),t.$set(u)},i(a){o||(d(t.$$.fragment,a),o=!0)},o(a){g(t.$$.fragment,a),o=!1},d(a){a&&(h(e),h(r)),b(t,a),i=!1,l()}}}function hl(n){let e,r,t,o,i,l,a,s,u,f;function c(w){n[10](w)}let p={label:"Authority or region",id:"filterAuthority",choices:n[5],emptyOption:!0};n[2]!==void 0&&(p.value=n[2]),e=new Zt({props:p}),G.push(()=>q(e,"value",c));function m(w){n[11](w)}let y={label:"Funding programme",id:"filterFundingProgramme",choices:n[6],emptyOption:!0};return n[3]!==void 0&&(y.value=n[3]),o=new Zt({props:y}),G.push(()=>q(o,"value",m)),a=new Pn({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[$l]},$$scope:{ctx:n}}}),u=new pl({}),{c(){_(e.$$.fragment),t=A(),_(o.$$.fragment),l=A(),_(a.$$.fragment),s=A(),_(u.$$.fragment)},m(w,L){v(e,w,L),$(w,t,L),v(o,w,L),$(w,l,L),v(a,w,L),$(w,s,L),v(u,w,L),f=!0},p(w,L){const T={};L&32&&(T.choices=w[5]),!r&&L&4&&(r=!0,T.value=w[2],X(()=>r=!1)),e.$set(T);const E={};L&64&&(E.choices=w[6]),!i&&L&8&&(i=!0,E.value=w[3],X(()=>i=!1)),o.$set(E);const B={};L&131073&&(B.$$scope={dirty:L,ctx:w}),a.$set(B)},i(w){f||(d(e.$$.fragment,w),d(o.$$.fragment,w),d(a.$$.fragment,w),d(u.$$.fragment,w),f=!0)},o(w){g(e.$$.fragment,w),g(o.$$.fragment,w),g(a.$$.fragment,w),g(u.$$.fragment,w),f=!1},d(w){w&&(h(t),h(l),h(s)),b(e,w),b(o,w),b(a,w),b(u,w)}}}function dl(n){let e,r=n[1].size.toLocaleString()+"",t,o,i=n[7].route.toLocaleString()+"",l,a,s=n[7].area.toLocaleString()+"",u,f,c=n[7].crossing.toLocaleString()+"",p,m,y=n[7].other.toLocaleString()+"",w,L;return{c(){e=k("Showing "),t=k(r),o=k(" schemes ("),l=k(i),a=k(`
    routes, `),u=k(s),f=k(` areas,
    `),p=k(c),m=k(" crossings, "),w=k(y),L=k(`
    other)`)},m(T,E){$(T,e,E),$(T,t,E),$(T,o,E),$(T,l,E),$(T,a,E),$(T,u,E),$(T,f,E),$(T,p,E),$(T,m,E),$(T,w,E),$(T,L,E)},p(T,E){E&2&&r!==(r=T[1].size.toLocaleString()+"")&&me(t,r),E&128&&i!==(i=T[7].route.toLocaleString()+"")&&me(l,i),E&128&&s!==(s=T[7].area.toLocaleString()+"")&&me(u,s),E&128&&c!==(c=T[7].crossing.toLocaleString()+"")&&me(p,c),E&128&&y!==(y=T[7].other.toLocaleString()+"")&&me(w,y)},d(T){T&&(h(e),h(t),h(o),h(l),h(a),h(u),h(f),h(p),h(m),h(w),h(L))}}}function gl(n){let e,r,t;function o(l){n[14](l)}let i={id:"show-schemes",$$slots:{default:[dl]},$$scope:{ctx:n}};return n[4]!==void 0&&(i.checked=n[4]),e=new fe({props:i}),G.push(()=>q(e,"checked",o)),{c(){_(e.$$.fragment)},m(l,a){v(e,l,a),t=!0},p(l,a){const s={};a&131202&&(s.$$scope={dirty:a,ctx:l}),!r&&a&16&&(r=!0,s.checked=l[4],X(()=>r=!1)),e.$set(s)},i(l){t||(d(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){b(e,l)}}}function _l(n){let e,r,t,o;return e=new Ke({props:{label:"Filters",$$slots:{default:[hl]},$$scope:{ctx:n}}}),t=new Bt({props:{small:!0,$$slots:{default:[gl]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment),r=A(),_(t.$$.fragment)},m(i,l){v(e,i,l),$(i,r,l),v(t,i,l),o=!0},p(i,[l]){const a={};l&131181&&(a.$$scope={dirty:l,ctx:i}),e.$set(a);const s={};l&131218&&(s.$$scope={dirty:l,ctx:i}),t.$set(s)},i(i){o||(d(e.$$.fragment,i),d(t.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),o=!1},d(i){i&&h(r),b(e,i),b(t,i)}}}function vl(n,e,r){let t,o;x(n,kt,C=>r(15,t=C)),x(n,Ce,C=>r(9,o=C));let{schemes:i}=e,{schemesToBeShown:l=new Set}=e,{filterText:a=""}=e,s=[],u="",f=[],c="",p={area:0,route:0,crossing:0,other:0},m=!0;er(()=>{let C=new Set,I=new Set;for(let j of i.values())j.authority_or_region&&C.add(j.authority_or_region),j.funding_programme&&I.add(j.funding_programme);r(5,s=Array.from(C.entries())),s.sort(),r(6,f=Array.from(I.entries())),f.sort()});function y(C,I,j){let P=C.toLowerCase(),N=S=>{var z,U;if(P&&!((z=S.properties.name)!=null&&z.toLowerCase().includes(P))&&!((U=S.properties.description)!=null&&U.toLowerCase().includes(P)))return!1;if(I||j){let W=i.get(S.properties.scheme_reference);if(I&&W.authority_or_region!=I||j&&W.funding_programme!=j)return!1}return!0};r(1,l=new Set(t.features.filter(N).map(S=>S.properties.scheme_reference))),r(7,p={area:0,route:0,crossing:0,other:0});let O=S=>{var z,U;return!(!l.has(S.properties.scheme_reference)||P&&!((z=S.properties.name)!=null&&z.toLowerCase().includes(P))&&!((U=S.properties.description)!=null&&U.toLowerCase().includes(P)))};kt.update(S=>{for(let z of S.features)O(z)?(delete z.properties.hide_while_editing,r(7,p[z.properties.intervention_type]++,p)):z.properties.hide_while_editing=!0;return S}),r(7,p)}function w(C){u=C,r(2,u)}function L(C){c=C,r(3,c)}function T(){a=this.value,r(0,a)}const E=()=>r(0,a="");function B(C){m=C,r(4,m)}return n.$$set=C=>{"schemes"in C&&r(8,i=C.schemes),"schemesToBeShown"in C&&r(1,l=C.schemesToBeShown),"filterText"in C&&r(0,a=C.filterText)},n.$$.update=()=>{if(n.$$.dirty&528&&o)for(let C of["interventions-polygons","interventions-polygon-outlines","interventions-lines","interventions-lines-endpoints","interventions-points"])o.getLayer(C)&&o.setLayoutProperty(C,"visibility",m?"visible":"none");n.$$.dirty&13&&y(a,u,c)},[a,l,u,c,m,s,f,p,i,o,w,L,T,E,B]}class bl extends Z{constructor(e){super(),K(this,e,vl,_l,V,{schemes:8,schemesToBeShown:1,filterText:0})}}function yl(n){let e,r,t;return e=new De({props:{color:Y.bus_route_with_lane}}),{c(){_(e.$$.fragment),r=k(`
  Bus routes`)},m(o,i){v(e,o,i),$(o,r,i),t=!0},p:re,i(o){t||(d(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){o&&h(r),b(e,o)}}}function wl(n){let e;return{c(){e=k(`GTFS
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function kl(n){let e;return{c(){e=k("Open Data Commons Open Database License")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Sl(n){let e,r,t,o,i,l,a,s,u,f,c;return i=new H({props:{href:"https://gtfs.org",$$slots:{default:[wl]},$$scope:{ctx:n}}}),f=new H({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[kl]},$$scope:{ctx:n}}}),{c(){e=M("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,r=A(),t=M("p"),o=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),_(i.$$.fragment),l=k(`, and doesn't include which routes are run or the
        frequency of service.`),a=A(),s=M("p"),u=k("License: "),_(f.$$.fragment)},m(p,m){$(p,e,m),$(p,r,m),$(p,t,m),D(t,o),v(i,t,null),D(t,l),$(p,a,m),$(p,s,m),D(s,u),v(f,s,null),c=!0},p(p,m){const y={};m&8&&(y.$$scope={dirty:m,ctx:p}),i.$set(y);const w={};m&8&&(w.$$scope={dirty:m,ctx:p}),f.$set(w)},i(p){c||(d(i.$$.fragment,p),d(f.$$.fragment,p),c=!0)},o(p){g(i.$$.fragment,p),g(f.$$.fragment,p),c=!1},d(p){p&&(h(e),h(r),h(t),h(a),h(s)),b(i),b(f)}}}function Cl(n){let e,r,t;return r=new ce({props:{$$slots:{default:[Sl]},$$scope:{ctx:n}}}),{c(){e=M("span"),_(r.$$.fragment),ee(e,"slot","right")},m(o,i){$(o,e,i),v(r,e,null),t=!0},p(o,i){const l={};i&8&&(l.$$scope={dirty:i,ctx:o}),r.$set(l)},i(o){t||(d(r.$$.fragment,o),t=!0)},o(o){g(r.$$.fragment,o),t=!1},d(o){o&&h(e),b(r)}}}function Ll(n){let e,r,t,o,i;function l(s){n[1](s)}let a={id:lt,$$slots:{right:[Cl],default:[yl]},$$scope:{ctx:n}};return n[0]!==void 0&&(a.checked=n[0]),e=new fe({props:a}),G.push(()=>q(e,"checked",l)),o=new ge({props:{layer:lt,tooltip:Tl,show:n[0],clickable:!1}}),{c(){_(e.$$.fragment),t=A(),_(o.$$.fragment)},m(s,u){v(e,s,u),$(s,t,u),v(o,s,u),i=!0},p(s,[u]){const f={};u&8&&(f.$$scope={dirty:u,ctx:s}),!r&&u&1&&(r=!0,f.checked=s[0],X(()=>r=!1)),e.$set(f);const c={};u&1&&(c.show=s[0]),o.$set(c)},i(s){i||(d(e.$$.fragment,s),d(o.$$.fragment,s),i=!0)},o(s){g(e.$$.fragment,s),g(o.$$.fragment,s),i=!1},d(s){s&&h(t),b(e,s),b(o,s)}}}let lt="bus_routes";function Tl(n){return n.properties.has_bus_lane?"<p>At least one bus route crosses here, with a bus lane in one or more directions</p>":"<p>At least one bus route crosses here, without any bus lanes</p>"}function Ol(n,e,r){let t;x(n,Ce,l=>r(2,t=l)),Ge(t,lt,`${de()}/v1/${lt}.pmtiles`),dt(t,{id:lt,source:lt,sourceLayer:lt,color:["case",["boolean",["get","has_bus_lane"],!1],Y.bus_route_with_lane,Y.bus_route_without_lane],width:5,opacity:gt(.5,1)});let o=!1;function i(l){o=l,r(0,o)}return[o,i]}class Al extends Z{constructor(e){super(),K(this,e,Ol,Ll,V,{})}}function on(n,e,r){const t=n.slice();return t[2]=e[r],t}function sn(n,e,r){const t=n.slice();return t[5]=e[r],t}function ln(n){let e,r;return{c(){e=M("span"),r=k(`
    `),qe(e,"background",n[5]),qe(e,"width","100%"),qe(e,"border","1px solid black")},m(t,o){$(t,e,o),D(e,r)},p(t,o){o&1&&qe(e,"background",t[5])},d(t){t&&h(e)}}}function an(n){let e,r=n[2]+"",t;return{c(){e=M("span"),t=k(r)},m(o,i){$(o,e,i),D(e,t)},p(o,i){i&2&&r!==(r=o[2]+"")&&me(t,r)},d(o){o&&h(e)}}}function Il(n){let e,r,t,o=xe(n[0]),i=[];for(let s=0;s<o.length;s+=1)i[s]=ln(sn(n,o,s));let l=xe(n[1]),a=[];for(let s=0;s<l.length;s+=1)a[s]=an(on(n,l,s));return{c(){e=M("div");for(let s=0;s<i.length;s+=1)i[s].c();r=A(),t=M("div");for(let s=0;s<a.length;s+=1)a[s].c();qe(e,"display","flex"),qe(t,"display","flex"),qe(t,"justify-content","space-between")},m(s,u){$(s,e,u);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(e,null);$(s,r,u),$(s,t,u);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(t,null)},p(s,[u]){if(u&1){o=xe(s[0]);let f;for(f=0;f<o.length;f+=1){const c=sn(s,o,f);i[f]?i[f].p(c,u):(i[f]=ln(c),i[f].c(),i[f].m(e,null))}for(;f<i.length;f+=1)i[f].d(1);i.length=o.length}if(u&2){l=xe(s[1]);let f;for(f=0;f<l.length;f+=1){const c=on(s,l,f);a[f]?a[f].p(c,u):(a[f]=an(c),a[f].c(),a[f].m(t,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=l.length}},i:re,o:re,d(s){s&&(h(e),h(r),h(t)),Gt(i,s),Gt(a,s)}}}function Dl(n,e,r){let{colorScale:t}=e,{limits:o}=e;return n.$$set=i=>{"colorScale"in i&&r(0,t=i.colorScale),"limits"in i&&r(1,o=i.limits)},[t,o]}class st extends Z{constructor(e){super(),K(this,e,Dl,Il,V,{colorScale:0,limits:1})}}function El(n){let e;return{c(){e=k("Percent of households with a car")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Ml(n){let e;return{c(){e=k(`NOMIS TS045
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Pl(n){let e;return{c(){e=k(`ONS Geography
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Nl(n){let e;return{c(){e=k(`Open Government License
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Fl(n){let e,r,t,o,i,l,a,s,u,f,c,p;return t=new H({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ml]},$$scope:{ctx:n}}}),i=new H({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Pl]},$$scope:{ctx:n}}}),f=new H({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Nl]},$$scope:{ctx:n}}}),{c(){e=M("p"),r=k("Car/van availability data is from the 2021 census, via "),_(t.$$.fragment),o=k(". Output area boundaries from "),_(i.$$.fragment),l=k("."),a=A(),s=M("p"),u=k("License: "),_(f.$$.fragment),c=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(m,y){$(m,e,y),D(e,r),v(t,e,null),D(e,o),v(i,e,null),D(e,l),$(m,a,y),$(m,s,y),D(s,u),v(f,s,null),D(s,c),p=!0},p(m,y){const w={};y&65536&&(w.$$scope={dirty:y,ctx:m}),t.$set(w);const L={};y&65536&&(L.$$scope={dirty:y,ctx:m}),i.$set(L);const T={};y&65536&&(T.$$scope={dirty:y,ctx:m}),f.$set(T)},i(m){p||(d(t.$$.fragment,m),d(i.$$.fragment,m),d(f.$$.fragment,m),p=!0)},o(m){g(t.$$.fragment,m),g(i.$$.fragment,m),g(f.$$.fragment,m),p=!1},d(m){m&&(h(e),h(a),h(s)),b(t),b(i),b(f)}}}function Bl(n){let e,r,t;return r=new ce({props:{$$slots:{default:[Fl]},$$scope:{ctx:n}}}),{c(){e=M("span"),_(r.$$.fragment),ee(e,"slot","right")},m(o,i){$(o,e,i),v(r,e,null),t=!0},p(o,i){const l={};i&65536&&(l.$$scope={dirty:i,ctx:o}),r.$set(l)},i(o){t||(d(r.$$.fragment,o),t=!0)},o(o){g(r.$$.fragment,o),t=!1},d(o){o&&h(e),b(r)}}}function fn(n){let e,r;return e=new st({props:{colorScale:n[4],limits:n[7]()}}),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p:re,i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function jl(n){let e;return{c(){e=k("Average cars per household")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Rl(n){let e;return{c(){e=k(`NOMIS TS045
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function zl(n){let e;return{c(){e=k(`ONS Geography
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Hl(n){let e;return{c(){e=k(`Open Government License
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Ul(n){let e,r,t,o,i,l,a,s,u,f,c,p,m,y;return i=new H({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Rl]},$$scope:{ctx:n}}}),a=new H({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[zl]},$$scope:{ctx:n}}}),p=new H({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Hl]},$$scope:{ctx:n}}}),{c(){e=M("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,r=A(),t=M("p"),o=k("Car/van availability data is from the 2021 census, via "),_(i.$$.fragment),l=k(". Output area boundaries from "),_(a.$$.fragment),s=k("."),u=A(),f=M("p"),c=k("License: "),_(p.$$.fragment),m=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(w,L){$(w,e,L),$(w,r,L),$(w,t,L),D(t,o),v(i,t,null),D(t,l),v(a,t,null),D(t,s),$(w,u,L),$(w,f,L),D(f,c),v(p,f,null),D(f,m),y=!0},p(w,L){const T={};L&65536&&(T.$$scope={dirty:L,ctx:w}),i.$set(T);const E={};L&65536&&(E.$$scope={dirty:L,ctx:w}),a.$set(E);const B={};L&65536&&(B.$$scope={dirty:L,ctx:w}),p.$set(B)},i(w){y||(d(i.$$.fragment,w),d(a.$$.fragment,w),d(p.$$.fragment,w),y=!0)},o(w){g(i.$$.fragment,w),g(a.$$.fragment,w),g(p.$$.fragment,w),y=!1},d(w){w&&(h(e),h(r),h(t),h(u),h(f)),b(i),b(a),b(p)}}}function Wl(n){let e,r,t;return r=new ce({props:{$$slots:{default:[Ul]},$$scope:{ctx:n}}}),{c(){e=M("span"),_(r.$$.fragment),ee(e,"slot","right")},m(o,i){$(o,e,i),v(r,e,null),t=!0},p(o,i){const l={};i&65536&&(l.$$scope={dirty:i,ctx:o}),r.$set(l)},i(o){t||(d(r.$$.fragment,o),t=!0)},o(o){g(r.$$.fragment,o),t=!1},d(o){o&&h(e),b(r)}}}function un(n){let e,r;return e=new st({props:{colorScale:n[4],limits:n[7]()}}),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p:re,i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function Vl(n){let e;return{c(){e=k("Population density")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Gl(n){let e;return{c(){e=k(`NOMIS TS006
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Zl(n){let e;return{c(){e=k(`ONS Geography
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Kl(n){let e;return{c(){e=k(`Open Government License
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function ql(n){let e,r,t,o,i,l,a,s,u,f,c,p;return t=new H({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Gl]},$$scope:{ctx:n}}}),i=new H({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Zl]},$$scope:{ctx:n}}}),f=new H({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Kl]},$$scope:{ctx:n}}}),{c(){e=M("p"),r=k("Population density data is from the 2021 census, via "),_(t.$$.fragment),o=k(". Output area boundaries from "),_(i.$$.fragment),l=k("."),a=A(),s=M("p"),u=k("License: "),_(f.$$.fragment),c=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(m,y){$(m,e,y),D(e,r),v(t,e,null),D(e,o),v(i,e,null),D(e,l),$(m,a,y),$(m,s,y),D(s,u),v(f,s,null),D(s,c),p=!0},p(m,y){const w={};y&65536&&(w.$$scope={dirty:y,ctx:m}),t.$set(w);const L={};y&65536&&(L.$$scope={dirty:y,ctx:m}),i.$set(L);const T={};y&65536&&(T.$$scope={dirty:y,ctx:m}),f.$set(T)},i(m){p||(d(t.$$.fragment,m),d(i.$$.fragment,m),d(f.$$.fragment,m),p=!0)},o(m){g(t.$$.fragment,m),g(i.$$.fragment,m),g(f.$$.fragment,m),p=!1},d(m){m&&(h(e),h(a),h(s)),b(t),b(i),b(f)}}}function Xl(n){let e,r,t;return r=new ce({props:{$$slots:{default:[ql]},$$scope:{ctx:n}}}),{c(){e=M("span"),_(r.$$.fragment),ee(e,"slot","right")},m(o,i){$(o,e,i),v(r,e,null),t=!0},p(o,i){const l={};i&65536&&(l.$$scope={dirty:i,ctx:o}),r.$set(l)},i(o){t||(d(r.$$.fragment,o),t=!0)},o(o){g(r.$$.fragment,o),t=!1},d(o){o&&h(e),b(r)}}}function cn(n){let e,r,t,o;return t=new st({props:{colorScale:n[4],limits:n[7]().map(Jl)}}),{c(){e=M("p"),e.textContent="(people per square kilometres)",r=A(),_(t.$$.fragment)},m(i,l){$(i,e,l),$(i,r,l),v(t,i,l),o=!0},p:re,i(i){o||(d(t.$$.fragment,i),o=!0)},o(i){g(t.$$.fragment,i),o=!1},d(i){i&&(h(e),h(r)),b(t,i)}}}function Yl(n){let e,r,t,o,i,l,a,s,u,f,c,p,m,y;function w(N){n[9](N)}let L={id:"percent_households_with_car",$$slots:{right:[Bl],default:[El]},$$scope:{ctx:n}};n[0]!==void 0&&(L.checked=n[0]),e=new fe({props:L}),G.push(()=>q(e,"checked",w)),e.$on("change",n[10]);let T=n[3]=="percent_households_with_car"&&fn(n);function E(N){n[11](N)}let B={id:"average_cars_per_household",$$slots:{right:[Wl],default:[jl]},$$scope:{ctx:n}};n[1]!==void 0&&(B.checked=n[1]),i=new fe({props:B}),G.push(()=>q(i,"checked",E)),i.$on("change",n[12]);let C=n[3]=="average_cars_per_household"&&un(n);function I(N){n[13](N)}let j={id:"population_density",$$slots:{right:[Xl],default:[Vl]},$$scope:{ctx:n}};n[2]!==void 0&&(j.checked=n[2]),u=new fe({props:j}),G.push(()=>q(u,"checked",I)),u.$on("change",n[14]);let P=n[3]=="population_density"&&cn(n);return m=new ge({props:{layer:He,tooltip:n[5],show:n[3]!="",clickable:!0}}),m.$on("click",n[6]),{c(){_(e.$$.fragment),t=A(),T&&T.c(),o=A(),_(i.$$.fragment),a=A(),C&&C.c(),s=A(),_(u.$$.fragment),c=A(),P&&P.c(),p=A(),_(m.$$.fragment)},m(N,O){v(e,N,O),$(N,t,O),T&&T.m(N,O),$(N,o,O),v(i,N,O),$(N,a,O),C&&C.m(N,O),$(N,s,O),v(u,N,O),$(N,c,O),P&&P.m(N,O),$(N,p,O),v(m,N,O),y=!0},p(N,[O]){const S={};O&65536&&(S.$$scope={dirty:O,ctx:N}),!r&&O&1&&(r=!0,S.checked=N[0],X(()=>r=!1)),e.$set(S),N[3]=="percent_households_with_car"?T?(T.p(N,O),O&8&&d(T,1)):(T=fn(N),T.c(),d(T,1),T.m(o.parentNode,o)):T&&(le(),g(T,1,1,()=>{T=null}),ae());const z={};O&65536&&(z.$$scope={dirty:O,ctx:N}),!l&&O&2&&(l=!0,z.checked=N[1],X(()=>l=!1)),i.$set(z),N[3]=="average_cars_per_household"?C?(C.p(N,O),O&8&&d(C,1)):(C=un(N),C.c(),d(C,1),C.m(s.parentNode,s)):C&&(le(),g(C,1,1,()=>{C=null}),ae());const U={};O&65536&&(U.$$scope={dirty:O,ctx:N}),!f&&O&4&&(f=!0,U.checked=N[2],X(()=>f=!1)),u.$set(U),N[3]=="population_density"?P?(P.p(N,O),O&8&&d(P,1)):(P=cn(N),P.c(),d(P,1),P.m(p.parentNode,p)):P&&(le(),g(P,1,1,()=>{P=null}),ae());const W={};O&8&&(W.show=N[3]!=""),m.$set(W)},i(N){y||(d(e.$$.fragment,N),d(T),d(i.$$.fragment,N),d(C),d(u.$$.fragment,N),d(P),d(m.$$.fragment,N),y=!0)},o(N){g(e.$$.fragment,N),g(T),g(i.$$.fragment,N),g(C),g(u.$$.fragment,N),g(P),g(m.$$.fragment,N),y=!1},d(N){N&&(h(t),h(o),h(a),h(s),h(c),h(p)),b(e,N),T&&T.d(N),b(i,N),C&&C.d(N),b(u,N),P&&P.d(N),b(m,N)}}}let He="census_output_areas";const Jl=n=>n.toLocaleString();function Ql(n,e,r){let t;x(n,Ce,B=>r(8,t=B));let o=`${He}-outline`,i=Y.sequential_low_to_high,l=!1,a=!1,s=!1,u="";Ge(t,He,`${de()}/v1/${He}.pmtiles`),Nn(t,{id:He,source:He,sourceLayer:He,color:"black",opacity:gt(.5,.7)}),dt(t,{id:o,source:He,sourceLayer:He,color:"black",width:.5});function f(B){let C=B.properties.OA21CD,I=B.properties[u];return u=="percent_households_with_car"?`<p>${I}% of households in ${C} have 1 or more cars</p>`:u=="average_cars_per_household"?`<p>Households in ${C} have an average of ${I} cars</p>`:`<p>There are ${I.toLocaleString()} people per square kilometre in ${C}</p>`}function c(B){let C=B.detail.properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${C}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${C}`,"_blank")}function p(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function m(B){l=B,r(0,l)}const y=()=>{r(1,a=!1),r(2,s=!1)};function w(B){a=B,r(1,a)}const L=()=>{r(0,l=!1),r(2,s=!1)};function T(B){s=B,r(2,s)}const E=()=>{r(0,l=!1),r(1,a=!1)};return n.$$.update=()=>{n.$$.dirty&271&&(l?r(3,u="percent_households_with_car"):a?r(3,u="average_cars_per_household"):s?r(3,u="population_density"):r(3,u=""),u?(t.setPaintProperty(He,"fill-color",et(["get",u],p(),i)),t.setLayoutProperty(o,"visibility","visible")):t.setLayoutProperty(o,"visibility","none"))},[l,a,s,u,i,f,c,p,t,m,y,w,L,T,E]}class xl extends Z{constructor(e){super(),K(this,e,Ql,Yl,V,{})}}function ea(n){let e,r,t;return e=new De({props:{color:n[2]}}),{c(){_(e.$$.fragment),r=k(`
  Combined authorities`)},m(o,i){v(e,o,i),$(o,r,i),t=!0},p:re,i(o){t||(d(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){o&&h(r),b(e,o)}}}function ta(n){let e;return{c(){e=k(`ONS Geography
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function ra(n){let e;return{c(){e=k(`Open Government License
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function na(n){let e,r,t,o,i,l,a,s,u,f;return t=new H({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[ta]},$$scope:{ctx:n}}}),s=new H({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ra]},$$scope:{ctx:n}}}),{c(){e=M("p"),r=k("Data from "),_(t.$$.fragment),o=k(", as of December 2022."),i=A(),l=M("p"),a=k("License: "),_(s.$$.fragment),u=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(c,p){$(c,e,p),D(e,r),v(t,e,null),D(e,o),$(c,i,p),$(c,l,p),D(l,a),v(s,l,null),D(l,u),f=!0},p(c,p){const m={};p&64&&(m.$$scope={dirty:p,ctx:c}),t.$set(m);const y={};p&64&&(y.$$scope={dirty:p,ctx:c}),s.$set(y)},i(c){f||(d(t.$$.fragment,c),d(s.$$.fragment,c),f=!0)},o(c){g(t.$$.fragment,c),g(s.$$.fragment,c),f=!1},d(c){c&&(h(e),h(i),h(l)),b(t),b(s)}}}function oa(n){let e,r,t;return r=new ce({props:{$$slots:{default:[na]},$$scope:{ctx:n}}}),{c(){e=M("span"),_(r.$$.fragment),ee(e,"slot","right")},m(o,i){$(o,e,i),v(r,e,null),t=!0},p(o,i){const l={};i&64&&(l.$$scope={dirty:i,ctx:o}),r.$set(l)},i(o){t||(d(r.$$.fragment,o),t=!0)},o(o){g(r.$$.fragment,o),t=!1},d(o){o&&h(e),b(r)}}}function ia(n){let e,r=n[5][0].properties.name+"",t;return{c(){e=M("p"),t=k(r)},m(o,i){$(o,e,i),D(e,t)},p(o,i){i&32&&r!==(r=o[5][0].properties.name+"")&&me(t,r)},d(o){o&&h(e)}}}function sa(n){let e,r;return e=new it({props:{openOn:"hover",$$slots:{default:[ia,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p(t,o){const i={};o&96&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function la(n){let e,r,t,o;return e=new Ot({props:{id:Xt,paint:{"fill-color":n[2],"fill-opacity":_t(0,.5)},layout:{visibility:n[1]},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[sa]},$$scope:{ctx:n}}}),e.$on("click",fa),t=new At({props:{id:n[3],paint:{"line-color":n[2],"line-width":2.5},layout:{visibility:n[1]}}}),{c(){_(e.$$.fragment),r=A(),_(t.$$.fragment)},m(i,l){v(e,i,l),$(i,r,l),v(t,i,l),o=!0},p(i,l){const a={};l&2&&(a.layout={visibility:i[1]}),l&64&&(a.$$scope={dirty:l,ctx:i}),e.$set(a);const s={};l&2&&(s.layout={visibility:i[1]}),t.$set(s)},i(i){o||(d(e.$$.fragment,i),d(t.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),o=!1},d(i){i&&h(r),b(e,i),b(t,i)}}}function aa(n){let e,r,t,o,i;function l(s){n[4](s)}let a={id:Xt,$$slots:{right:[oa],default:[ea]},$$scope:{ctx:n}};return n[0]!==void 0&&(a.checked=n[0]),e=new fe({props:a}),G.push(()=>q(e,"checked",l)),o=new Lr({props:{data:`${de()}/v1/${Xt}.geojson`,$$slots:{default:[la]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment),t=A(),_(o.$$.fragment)},m(s,u){v(e,s,u),$(s,t,u),v(o,s,u),i=!0},p(s,[u]){const f={};u&64&&(f.$$scope={dirty:u,ctx:s}),!r&&u&1&&(r=!0,f.checked=s[0],X(()=>r=!1)),e.$set(f);const c={};u&66&&(c.$$scope={dirty:u,ctx:s}),o.$set(c)},i(s){i||(d(e.$$.fragment,s),d(o.$$.fragment,s),i=!0)},o(s){g(e.$$.fragment,s),g(o.$$.fragment,s),i=!1},d(s){s&&h(t),b(e,s),b(o,s)}}}let Xt="combined_authorities";function fa(n){window.open(`https://www.ons.gov.uk/visualisations/areas/${n.detail.features[0].properties.CAUTH22CD}`,"_blank")}function ua(n,e,r){let t,o=Y.combined_authorities,i=`${Xt}-outline`,l=!1;function a(s){l=s,r(0,l)}return n.$$.update=()=>{n.$$.dirty&1&&r(1,t=l?"visible":"none")},[l,t,o,i,a]}class ca extends Z{constructor(e){super(),K(this,e,ua,aa,V,{})}}function pa(n){let e,r,t;return{c(){e=M("input"),ee(e,"class","govuk-file-upload"),ee(e,"id","load-criticals"),ee(e,"type","file")},m(o,i){$(o,e,i),n[7](e),r||(t=kr(e,"change",n[4]),r=!0)},p:re,d(o){o&&h(e),n[7](null),r=!1,t()}}}function pn(n){let e,r;return e=new Bt({props:{small:!0,$$slots:{default:[$a]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p(t,o){const i={};o&517&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function ma(n){let e,r,t=n[2].toLocaleString()+"",o,i,l;return e=new De({props:{color:_r}}),{c(){_(e.$$.fragment),r=k(`
        Show `),o=k(t),i=k(" issues")},m(a,s){v(e,a,s),$(a,r,s),$(a,o,s),$(a,i,s),l=!0},p(a,s){(!l||s&4)&&t!==(t=a[2].toLocaleString()+"")&&me(o,t)},i(a){l||(d(e.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),l=!1},d(a){a&&(h(r),h(o),h(i)),b(e,a)}}}function $a(n){let e,r,t;function o(l){n[8](l)}let i={id:"show-criticals",$$slots:{default:[ma]},$$scope:{ctx:n}};return n[0]!==void 0&&(i.checked=n[0]),e=new fe({props:i}),G.push(()=>q(e,"checked",o)),{c(){_(e.$$.fragment)},m(l,a){v(e,l,a),t=!0},p(l,a){const s={};a&516&&(s.$$scope={dirty:a,ctx:l}),!r&&a&1&&(r=!0,s.checked=l[0],X(()=>r=!1)),e.$set(s)},i(l){t||(d(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){b(e,l)}}}function ha(n){let e,r,t,o,i,l;e=new Pn({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[pa]},$$scope:{ctx:n}}}),t=new Bn({props:{errorMessage:n[3]}});let a=n[2]>0&&pn(n);return{c(){_(e.$$.fragment),r=A(),_(t.$$.fragment),o=A(),a&&a.c(),i=ze()},m(s,u){v(e,s,u),$(s,r,u),v(t,s,u),$(s,o,u),a&&a.m(s,u),$(s,i,u),l=!0},p(s,u){const f={};u&514&&(f.$$scope={dirty:u,ctx:s}),e.$set(f);const c={};u&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?a?(a.p(s,u),u&4&&d(a,1)):(a=pn(s),a.c(),d(a,1),a.m(i.parentNode,i)):a&&(le(),g(a,1,1,()=>{a=null}),ae())},i(s){l||(d(e.$$.fragment,s),d(t.$$.fragment,s),d(a),l=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),g(a),l=!1},d(s){s&&(h(r),h(o),h(i)),b(e,s),b(t,s),a&&a.d(s)}}}function da(n){let e,r,t,o,i,l;return e=new Ke({props:{label:"Critical Issues",$$slots:{default:[ha]},$$scope:{ctx:n}}}),t=new ge({props:{layer:we+"-points",tooltip:ga,show:n[0],clickable:!1}}),i=new ge({props:{layer:we+"-clusters",show:n[0],clickable:!0,ignoreHigherLayers:[we+"-counts"]}}),i.$on("click",n[5]),{c(){_(e.$$.fragment),r=A(),_(t.$$.fragment),o=A(),_(i.$$.fragment)},m(a,s){v(e,a,s),$(a,r,s),v(t,a,s),$(a,o,s),v(i,a,s),l=!0},p(a,[s]){const u={};s&527&&(u.$$scope={dirty:s,ctx:a}),e.$set(u);const f={};s&1&&(f.show=a[0]),t.$set(f);const c={};s&1&&(c.show=a[0]),i.$set(c)},i(a){l||(d(e.$$.fragment,a),d(t.$$.fragment,a),d(i.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(i.$$.fragment,a),l=!1},d(a){a&&(h(r),h(o)),b(e,a),b(t,a),b(i,a)}}}let we="criticals",_r="red";function ga(n){let e='<div style="max-width: 30vw;">';return e+=`<h2>${n.properties.critical_type}</h2>`,e+=`<p><u>Location</u>: ${n.properties.location_description}</p>`,e+=`<p><u>Notes</u>: ${n.properties.notes}</p>`,e+="<hr />",e+=`<p>Critical issue ID: <b>${n.properties.id}</b></p>`,e+=`<p>Submitted by <b>${n.properties.inspector??"???"}</b> at <b>${n.properties.submission_time}</b></p>`,e+=`<p>For scheme <b>${n.properties.scheme_reference}</b> in stage <b>${n.properties.current_design_stage}</b></p>`,e+="</div>",e}function _a(n,e,r){let t;x(n,Ce,p=>r(6,t=p));let o,i=!0,l=0,a="";yo(t,we),t.addSource(we,{type:"geojson",data:Fn(),cluster:!0,clusterMaxZoom:14,clusterRadius:50}),Pt(t,{id:`${we}-clusters`,source:we,filter:["has","point_count"],color:_r,opacity:.9,radius:["step",["get","point_count"],20,15,30,30,40]}),t.addLayer({id:`${we}-counts`,source:we,type:"symbol",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}"}}),Pt(t,{id:`${we}-points`,source:we,filter:["!",["has","point_count"]],color:_r,opacity:.9,radius:15,strokeColor:"black",strokeWidth:3});async function s(p){try{let m=await fl(o.files[0]);t.getSource(we).setData(m),r(2,l=m.features.length),r(3,a="")}catch(m){r(3,a=`The file you loaded is broken: ${m}`)}}function u(p){t.getSource(we).getClusterExpansionZoom(p.detail.properties.cluster_id,(m,y)=>{m||t.easeTo({center:p.detail.geometry.coordinates,zoom:y})})}function f(p){G[p?"unshift":"push"](()=>{o=p,r(1,o)})}function c(p){i=p,r(0,i)}return n.$$.update=()=>{n.$$.dirty&65&&t.getLayer(`${we}-counts`)&&t.setLayoutProperty(`${we}-counts`,"visibility",i?"visible":"none")},[i,o,l,a,s,u,t,f,c]}class va extends Z{constructor(e){super(),K(this,e,_a,da,V,{})}}function ba(n){let e,r,t;return e=new De({props:{color:n[2]}}),{c(){_(e.$$.fragment),r=k(`
  Crossings`)},m(o,i){v(e,o,i),$(o,r,i),t=!0},p:re,i(o){t||(d(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){o&&h(r),b(e,o)}}}function ya(n){let e;return{c(){e=k("crossing")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function wa(n){let e;return{c(){e=k("Open Data Commons Open Database License")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function ka(n){let e,r,t,o,i,l,a,s,u;return t=new H({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[ya]},$$scope:{ctx:n}}}),s=new H({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[wa]},$$scope:{ctx:n}}}),{c(){e=M("p"),r=k("This shows "),_(t.$$.fragment),o=k(" data from OpenStreetMap (as of 9 August 2023)."),i=A(),l=M("p"),a=k("License: "),_(s.$$.fragment)},m(f,c){$(f,e,c),D(e,r),v(t,e,null),D(e,o),$(f,i,c),$(f,l,c),D(l,a),v(s,l,null),u=!0},p(f,c){const p={};c&64&&(p.$$scope={dirty:c,ctx:f}),t.$set(p);const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),s.$set(m)},i(f){u||(d(t.$$.fragment,f),d(s.$$.fragment,f),u=!0)},o(f){g(t.$$.fragment,f),g(s.$$.fragment,f),u=!1},d(f){f&&(h(e),h(i),h(l)),b(t),b(s)}}}function Sa(n){let e,r,t;return r=new ce({props:{$$slots:{default:[ka]},$$scope:{ctx:n}}}),{c(){e=M("span"),_(r.$$.fragment),ee(e,"slot","right")},m(o,i){$(o,e,i),v(r,e,null),t=!0},p(o,i){const l={};i&64&&(l.$$scope={dirty:i,ctx:o}),r.$set(l)},i(o){t||(d(r.$$.fragment,o),t=!0)},o(o){g(r.$$.fragment,o),t=!1},d(o){o&&h(e),b(r)}}}function Ca(n){let e,r,t,o,i;function l(s){n[3](s)}let a={id:Ye,$$slots:{right:[Sa],default:[ba]},$$scope:{ctx:n}};return n[0]!==void 0&&(a.checked=n[0]),e=new fe({props:a}),G.push(()=>q(e,"checked",l)),o=new ge({props:{layer:Ye,tooltip:n[1],show:n[0],clickable:!0}}),o.$on("click",La),{c(){_(e.$$.fragment),t=A(),_(o.$$.fragment)},m(s,u){v(e,s,u),$(s,t,u),v(o,s,u),i=!0},p(s,[u]){const f={};u&64&&(f.$$scope={dirty:u,ctx:s}),!r&&u&1&&(r=!0,f.checked=s[0],X(()=>r=!1)),e.$set(f);const c={};u&1&&(c.show=s[0]),o.$set(c)},i(s){i||(d(e.$$.fragment,s),d(o.$$.fragment,s),i=!0)},o(s){g(e.$$.fragment,s),g(o.$$.fragment,s),i=!1},d(s){s&&h(t),b(e,s),b(o,s)}}}const Ye="crossings";function La(n){window.open(`http://openstreetmap.org/node/${n.detail.properties.osm_id}`,"_blank")}function Ta(n,e,r){let t;x(n,Ce,u=>r(4,t=u));let o=!1;function i(u){const f=u.properties.crossing;return`<p>${l.get(f)??`Crossing with unknown type (${f})`}. Click for details.</p>`}const l=new Map([["no","Location where crossing is impossible/illegal but where there is a clear desire line to cross"],["traffic_signals","Signalised crossing"],["marked","Crossing with no traffic signals"],["uncontrolled","Crossing with no traffic signals"],["unmarked","Crossing with no markings or signals"],["zebra","Zebra crossing"],["island","Crossing with an island"],["informal","Informal crossing with an obvious desire line, but no official infrastructure to support it"]]);Ge(t,Ye,`${de()}/v1/${Ye}.pmtiles`);let a=Y[Ye];Pt(t,{id:Ye,source:Ye,sourceLayer:Ye,color:a,radius:["interpolate",["linear"],["zoom"],1,2,8,3,13,10]});function s(u){o=u,r(0,o)}return[o,i,a,s]}class Oa extends Z{constructor(e){super(),K(this,e,Ta,Ca,V,{})}}function Aa(n){let e,r,t;return e=new De({props:{color:n[1]}}),{c(){_(e.$$.fragment),r=k(`
  Cycle parking`)},m(o,i){v(e,o,i),$(o,r,i),t=!0},p:re,i(o){t||(d(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){o&&h(r),b(e,o)}}}function Ia(n){let e;return{c(){e=k("OpenStreetMap")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Da(n){let e;return{c(){e=k("Open Data Commons Open Database License")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Ea(n){let e,r,t,o,i,l,a,s,u;return t=new H({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Ia]},$$scope:{ctx:n}}}),s=new H({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Da]},$$scope:{ctx:n}}}),{c(){e=M("p"),r=k("Cycle parking, according to "),_(t.$$.fragment),o=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),i=A(),l=M("p"),a=k("License: "),_(s.$$.fragment)},m(f,c){$(f,e,c),D(e,r),v(t,e,null),D(e,o),$(f,i,c),$(f,l,c),D(l,a),v(s,l,null),u=!0},p(f,c){const p={};c&16&&(p.$$scope={dirty:c,ctx:f}),t.$set(p);const m={};c&16&&(m.$$scope={dirty:c,ctx:f}),s.$set(m)},i(f){u||(d(t.$$.fragment,f),d(s.$$.fragment,f),u=!0)},o(f){g(t.$$.fragment,f),g(s.$$.fragment,f),u=!1},d(f){f&&(h(e),h(i),h(l)),b(t),b(s)}}}function Ma(n){let e,r,t;return r=new ce({props:{$$slots:{default:[Ea]},$$scope:{ctx:n}}}),{c(){e=M("span"),_(r.$$.fragment),ee(e,"slot","right")},m(o,i){$(o,e,i),v(r,e,null),t=!0},p(o,i){const l={};i&16&&(l.$$scope={dirty:i,ctx:o}),r.$set(l)},i(o){t||(d(r.$$.fragment,o),t=!0)},o(o){g(r.$$.fragment,o),t=!1},d(o){o&&h(e),b(r)}}}function Pa(n){let e,r,t,o,i;function l(s){n[2](s)}let a={id:at,$$slots:{right:[Ma],default:[Aa]},$$scope:{ctx:n}};return n[0]!==void 0&&(a.checked=n[0]),e=new fe({props:a}),G.push(()=>q(e,"checked",l)),o=new ge({props:{layer:at,tooltip:Na,show:n[0],clickable:!1}}),{c(){_(e.$$.fragment),t=A(),_(o.$$.fragment)},m(s,u){v(e,s,u),$(s,t,u),v(o,s,u),i=!0},p(s,[u]){const f={};u&16&&(f.$$scope={dirty:u,ctx:s}),!r&&u&1&&(r=!0,f.checked=s[0],X(()=>r=!1)),e.$set(f);const c={};u&1&&(c.show=s[0]),o.$set(c)},i(s){i||(d(e.$$.fragment,s),d(o.$$.fragment,s),i=!0)},o(s){g(e.$$.fragment,s),g(o.$$.fragment,s),i=!1},d(s){s&&h(t),b(e,s),b(o,s)}}}let at="cycle_parking";function Na(n){return`<p>Capacity: ${n.properties.capacity??"unknown"}</p>`}function Fa(n,e,r){let t;x(n,Ce,a=>r(3,t=a));let o=Y.cycle_parking;Ge(t,at,`${de()}/v1/${at}.pmtiles`),Pt(t,{id:at,source:at,sourceLayer:at,color:o,radius:["interpolate",["linear"],["zoom"],1,2,8,3,13,10]});let i=!1;function l(a){i=a,r(0,i)}return[i,o,l]}class Ba extends Z{constructor(e){super(),K(this,e,Fa,Pa,V,{})}}var ke=(n,e,r)=>new Promise((t,o)=>{var i=s=>{try{a(r.next(s))}catch(u){o(u)}},l=s=>{try{a(r.throw(s))}catch(u){o(u)}},a=s=>s.done?t(s.value):Promise.resolve(s.value).then(i,l);a((r=r.apply(n,e)).next())}),Ie=Uint8Array,yt=Uint16Array,ja=Int32Array,oo=new Ie([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),io=new Ie([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ra=new Ie([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),so=function(n,e){for(var r=new yt(31),t=0;t<31;++t)r[t]=e+=1<<n[t-1];for(var o=new ja(r[30]),t=1;t<30;++t)for(var i=r[t];i<r[t+1];++i)o[i]=i-r[t]<<5|t;return{b:r,r:o}},lo=so(oo,2),ao=lo.b,za=lo.r;ao[28]=258,za[258]=28;var Ha=so(io,0),Ua=Ha.b,vr=new yt(32768);for(Q=0;Q<32768;++Q)Ze=(Q&43690)>>1|(Q&21845)<<1,Ze=(Ze&52428)>>2|(Ze&13107)<<2,Ze=(Ze&61680)>>4|(Ze&3855)<<4,vr[Q]=((Ze&65280)>>8|(Ze&255)<<8)>>1;var Ze,Q,Mt=function(n,e,r){for(var t=n.length,o=0,i=new yt(e);o<t;++o)n[o]&&++i[n[o]-1];var l=new yt(e);for(o=1;o<e;++o)l[o]=l[o-1]+i[o-1]<<1;var a;if(r){a=new yt(1<<e);var s=15-e;for(o=0;o<t;++o)if(n[o])for(var u=o<<4|n[o],f=e-n[o],c=l[n[o]-1]++<<f,p=c|(1<<f)-1;c<=p;++c)a[vr[c]>>s]=u}else for(a=new yt(t),o=0;o<t;++o)n[o]&&(a[o]=vr[l[n[o]-1]++]>>15-n[o]);return a},zt=new Ie(288);for(Q=0;Q<144;++Q)zt[Q]=8;var Q;for(Q=144;Q<256;++Q)zt[Q]=9;var Q;for(Q=256;Q<280;++Q)zt[Q]=7;var Q;for(Q=280;Q<288;++Q)zt[Q]=8;var Q,fo=new Ie(32);for(Q=0;Q<32;++Q)fo[Q]=5;var Q,Wa=Mt(zt,9,1),Va=Mt(fo,5,1),fr=function(n){for(var e=n[0],r=1;r<n.length;++r)n[r]>e&&(e=n[r]);return e},Fe=function(n,e,r){var t=e/8|0;return(n[t]|n[t+1]<<8)>>(e&7)&r},ur=function(n,e){var r=e/8|0;return(n[r]|n[r+1]<<8|n[r+2]<<16)>>(e&7)},Ga=function(n){return(n+7)/8|0},Za=function(n,e,r){(e==null||e<0)&&(e=0),(r==null||r>n.length)&&(r=n.length);var t=new Ie(r-e);return t.set(n.subarray(e,r)),t},Ka=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Te=function(n,e,r){var t=new Error(e||Ka[n]);if(t.code=n,Error.captureStackTrace&&Error.captureStackTrace(t,Te),!r)throw t;return t},Or=function(n,e,r,t){var o=n.length,i=t?t.length:0;if(!o||e.f&&!e.l)return r||new Ie(0);var l=!r||e.i!=2,a=e.i;r||(r=new Ie(o*3));var s=function(ye){var Me=r.length;if(ye>Me){var Pe=new Ie(Math.max(Me*2,ye));Pe.set(r),r=Pe}},u=e.f||0,f=e.p||0,c=e.b||0,p=e.l,m=e.d,y=e.m,w=e.n,L=o*8;do{if(!p){u=Fe(n,f,1);var T=Fe(n,f+1,3);if(f+=3,T)if(T==1)p=Wa,m=Va,y=9,w=5;else if(T==2){var I=Fe(n,f,31)+257,j=Fe(n,f+10,15)+4,P=I+Fe(n,f+5,31)+1;f+=14;for(var N=new Ie(P),O=new Ie(19),S=0;S<j;++S)O[Ra[S]]=Fe(n,f+S*3,7);f+=j*3;for(var z=fr(O),U=(1<<z)-1,W=Mt(O,z,1),S=0;S<P;){var te=W[Fe(n,f,U)];f+=te&15;var E=te>>4;if(E<16)N[S++]=E;else{var pe=0,J=0;for(E==16?(J=3+Fe(n,f,3),f+=2,pe=N[S-1]):E==17?(J=3+Fe(n,f,7),f+=3):E==18&&(J=11+Fe(n,f,127),f+=7);J--;)N[S++]=pe}}var se=N.subarray(0,I),ie=N.subarray(I);y=fr(se),w=fr(ie),p=Mt(se,y,1),m=Mt(ie,w,1)}else Te(1);else{var E=Ga(f)+4,B=n[E-4]|n[E-3]<<8,C=E+B;if(C>o){a&&Te(0);break}l&&s(c+B),r.set(n.subarray(E,C),c),e.b=c+=B,e.p=f=C*8,e.f=u;continue}if(f>L){a&&Te(0);break}}l&&s(c+131072);for(var _e=(1<<y)-1,ve=(1<<w)-1,Ee=f;;Ee=f){var pe=p[ur(n,f)&_e],$e=pe>>4;if(f+=pe&15,f>L){a&&Te(0);break}if(pe||Te(2),$e<256)r[c++]=$e;else if($e==256){Ee=f,p=null;break}else{var Le=$e-254;if($e>264){var S=$e-257,ue=oo[S];Le=Fe(n,f,(1<<ue)-1)+ao[S],f+=ue}var R=m[ur(n,f)&ve],be=R>>4;R||Te(3),f+=R&15;var ie=Ua[be];if(be>3){var ue=io[be];ie+=ur(n,f)&(1<<ue)-1,f+=ue}if(f>L){a&&Te(0);break}l&&s(c+131072);var ne=c+Le;if(c<ie){var F=i-ie,Se=Math.min(ie,ne);for(F+c<0&&Te(3);c<Se;++c)r[c]=t[F+c]}for(;c<ne;c+=4)r[c]=r[c-ie],r[c+1]=r[c+1-ie],r[c+2]=r[c+2-ie],r[c+3]=r[c+3-ie];c=ne}}e.l=p,e.p=Ee,e.b=c,e.f=u,p&&(u=1,e.m=y,e.d=m,e.n=w)}while(!u);return c==r.length?r:Za(r,0,c)},qa=new Ie(0),Xa=function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&Te(6,"invalid gzip data");var e=n[3],r=10;e&4&&(r+=(n[10]|n[11]<<8)+2);for(var t=(e>>3&1)+(e>>4&1);t>0;t-=!n[r++]);return r+(e&2)},Ya=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},Ja=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Te(6,"invalid zlib data"),(n[1]>>5&1)==+!e&&Te(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Qa(n,e){return Or(n,{i:2},e&&e.out,e&&e.dictionary)}function xa(n,e){var r=Xa(n);return r+8>n.length&&Te(6,"invalid gzip data"),Or(n.subarray(r,-8),{i:2},e&&e.out||new Ie(Ya(n)),e&&e.dictionary)}function ef(n,e){return Or(n.subarray(Ja(n,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}function br(n,e){return n[0]==31&&n[1]==139&&n[2]==8?xa(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?Qa(n,e):ef(n,e)}var tf=typeof TextDecoder<"u"&&new TextDecoder,rf=0;try{tf.decode(qa,{stream:!0}),rf=1}catch{}var uo=(n,e)=>n*Math.pow(2,e),It=(n,e)=>Math.floor(n/Math.pow(2,e)),Yt=(n,e)=>uo(n.getUint16(e+1,!0),8)+n.getUint8(e),co=(n,e)=>uo(n.getUint32(e+2,!0),16)+n.getUint16(e,!0),nf=(n,e,r,t,o)=>{if(n!=t.getUint8(o))return n-t.getUint8(o);const i=Yt(t,o+1);if(e!=i)return e-i;const l=Yt(t,o+4);return r!=l?r-l:0},of=(n,e,r,t)=>{const o=po(n,e|128,r,t);return o?{z:e,x:r,y:t,offset:o[0],length:o[1],is_dir:!0}:null},mn=(n,e,r,t)=>{const o=po(n,e,r,t);return o?{z:e,x:r,y:t,offset:o[0],length:o[1],is_dir:!1}:null},po=(n,e,r,t)=>{let o=0,i=n.byteLength/17-1;for(;o<=i;){const l=i+o>>1,a=nf(e,r,t,n,l*17);if(a>0)o=l+1;else if(a<0)i=l-1;else return[co(n,l*17+7),n.getUint32(l*17+13,!0)]}return null},sf=(n,e)=>n.is_dir&&!e.is_dir?1:!n.is_dir&&e.is_dir?-1:n.z!==e.z?n.z-e.z:n.x!==e.x?n.x-e.x:n.y-e.y,mo=(n,e)=>{const r=n.getUint8(e*17);return{z:r&127,x:Yt(n,e*17+1),y:Yt(n,e*17+4),offset:co(n,e*17+7),length:n.getUint32(e*17+13,!0),is_dir:r>>7===1}},$n=n=>{const e=[],r=new DataView(n);for(let t=0;t<r.byteLength/17;t++)e.push(mo(r,t));return lf(e)},lf=n=>{n.sort(sf);const e=new ArrayBuffer(17*n.length),r=new Uint8Array(e);for(let t=0;t<n.length;t++){const o=n[t];let i=o.z;o.is_dir&&(i=i|128),r[t*17]=i,r[t*17+1]=o.x&255,r[t*17+2]=o.x>>8&255,r[t*17+3]=o.x>>16&255,r[t*17+4]=o.y&255,r[t*17+5]=o.y>>8&255,r[t*17+6]=o.y>>16&255,r[t*17+7]=o.offset&255,r[t*17+8]=It(o.offset,8)&255,r[t*17+9]=It(o.offset,16)&255,r[t*17+10]=It(o.offset,24)&255,r[t*17+11]=It(o.offset,32)&255,r[t*17+12]=It(o.offset,48)&255,r[t*17+13]=o.length&255,r[t*17+14]=o.length>>8&255,r[t*17+15]=o.length>>16&255,r[t*17+16]=o.length>>24&255}return e},af=(n,e)=>{if(n.byteLength<17)return null;const r=n.byteLength/17,t=mo(n,r-1);if(t.is_dir){const o=t.z,i=e.z-o,l=Math.trunc(e.x/(1<<i)),a=Math.trunc(e.y/(1<<i));return{z:o,x:l,y:a}}return null};function ff(n){return ke(this,null,function*(){const e=yield n.getBytes(0,512e3),r=new DataView(e.data),t=r.getUint32(4,!0),o=r.getUint16(8,!0),i=new TextDecoder("utf-8"),l=JSON.parse(i.decode(new DataView(e.data,10,t)));let a=0;l.compression==="gzip"&&(a=2);let s=0;"minzoom"in l&&(s=+l.minzoom);let u=0;"maxzoom"in l&&(u=+l.maxzoom);let f=0,c=0,p=0,m=-180,y=-85,w=180,L=85;if(l.bounds){const E=l.bounds.split(",");m=+E[0],y=+E[1],w=+E[2],L=+E[3]}if(l.center){const E=l.center.split(",");f=+E[0],c=+E[1],p=+E[2]}return{specVersion:r.getUint16(2,!0),rootDirectoryOffset:10+t,rootDirectoryLength:o*17,jsonMetadataOffset:10,jsonMetadataLength:t,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:a,tileType:1,minZoom:s,maxZoom:u,minLon:m,minLat:y,maxLon:w,maxLat:L,centerZoom:p,centerLon:f,centerLat:c,etag:e.etag}})}function uf(n,e,r,t,o,i,l){return ke(this,null,function*(){let a=yield r.getArrayBuffer(e,n.rootDirectoryOffset,n.rootDirectoryLength,n);n.specVersion===1&&(a=$n(a));const s=mn(new DataView(a),t,o,i);if(s){let c=(yield e.getBytes(s.offset,s.length,l)).data;const p=new DataView(c);return p.getUint8(0)==31&&p.getUint8(1)==139&&(c=br(new Uint8Array(c))),{data:c}}const u=af(new DataView(a),{z:t,x:o,y:i});if(u){const f=of(new DataView(a),u.z,u.x,u.y);if(f){let c=yield r.getArrayBuffer(e,f.offset,f.length,n);n.specVersion===1&&(c=$n(c));const p=mn(new DataView(c),t,o,i);if(p){let y=(yield e.getBytes(p.offset,p.length,l)).data;const w=new DataView(y);return w.getUint8(0)==31&&w.getUint8(1)==139&&(y=br(new Uint8Array(y))),{data:y}}}}})}var $o={getHeader:ff,getZxy:uf},cf=class{constructor(){this.tile=(n,e)=>{if(n.type=="json"){const r=n.url.substr(10);let t=this.tiles.get(r);return t||(t=new hn(r),this.tiles.set(r,t)),t.getHeader().then(o=>{const i={tiles:[n.url+"/{z}/{x}/{y}"],minzoom:o.minZoom,maxzoom:o.maxZoom,bounds:[o.minLon,o.minLat,o.maxLon,o.maxLat]};e(null,i,null,null)}).catch(o=>{e(o,null,null,null)}),{cancel:()=>{}}}else{const r=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),t=n.url.match(r);if(!t)throw new Error("Invalid PMTiles protocol URL");const o=t[1];let i=this.tiles.get(o);i||(i=new hn(o),this.tiles.set(o,i));const l=t[2],a=t[3],s=t[4],u=new AbortController,f=u.signal;let c=()=>{u.abort()};return i.getHeader().then(p=>{i.getZxy(+l,+a,+s,f).then(m=>{m?e(null,new Uint8Array(m.data),m.cacheControl,m.expires):p.tileType==1?e(null,new Uint8Array,null,null):e(null,null,null,null)}).catch(m=>{m.name!=="AbortError"&&e(m,null,null,null)})}),{cancel:c}}},this.tiles=new Map}add(n){this.tiles.set(n.source.getKey(),n)}get(n){return this.tiles.get(n)}};function vt(n,e){return(e>>>0)*4294967296+(n>>>0)}function pf(n,e){const r=e.buf;let t,o;if(o=r[e.pos++],t=(o&112)>>4,o<128||(o=r[e.pos++],t|=(o&127)<<3,o<128)||(o=r[e.pos++],t|=(o&127)<<10,o<128)||(o=r[e.pos++],t|=(o&127)<<17,o<128)||(o=r[e.pos++],t|=(o&127)<<24,o<128)||(o=r[e.pos++],t|=(o&1)<<31,o<128))return vt(n,t);throw new Error("Expected varint not more than 10 bytes")}function Dt(n){const e=n.buf;let r,t;return t=e[n.pos++],r=t&127,t<128||(t=e[n.pos++],r|=(t&127)<<7,t<128)||(t=e[n.pos++],r|=(t&127)<<14,t<128)||(t=e[n.pos++],r|=(t&127)<<21,t<128)?r:(t=e[n.pos],r|=(t&15)<<28,pf(r,n))}function mf(n,e,r,t){if(t==0){r==1&&(e[0]=n-1-e[0],e[1]=n-1-e[1]);const o=e[0];e[0]=e[1],e[1]=o}}var $f=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function hf(n,e,r){if(n>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(e>Math.pow(2,n)-1||r>Math.pow(2,n)-1)throw Error("tile x/y outside zoom level bounds");const t=$f[n],o=Math.pow(2,n);let i=0,l=0,a=0;const s=[e,r];let u=o/2;for(;u>0;)i=(s[0]&u)>0?1:0,l=(s[1]&u)>0?1:0,a+=u*u*(3*i^l),mf(u,s,i,l),u=u/2;return t+a}function ho(n,e){return ke(this,null,function*(){if(e===1||e===0)return n;if(e===2){if(typeof globalThis.DecompressionStream>"u")return br(new Uint8Array(n));{let t=new Response(n).body.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(t).arrayBuffer()}}else throw Error("Compression method not supported")})}var df=127;function gf(n,e){let r=0,t=n.length-1;for(;r<=t;){const o=t+r>>1,i=e-n[o].tileId;if(i>0)r=o+1;else if(i<0)t=o-1;else return n[o]}return t>=0&&(n[t].runLength===0||e-n[t].tileId<n[t].runLength)?n[t]:null}var _f=class{constructor(n){this.url=n}getKey(){return this.url}getBytes(n,e,r){return ke(this,null,function*(){let t;r||(t=new AbortController,r=t.signal);let o=yield fetch(this.url,{signal:r,headers:{Range:"bytes="+n+"-"+(n+e-1)}});if(o.status===416&&n===0){const a=o.headers.get("Content-Range");if(!a||!a.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const s=+a.substr(8);o=yield fetch(this.url,{signal:r,headers:{Range:"bytes=0-"+(s-1)}})}if(o.status>=300)throw Error("Bad response code: "+o.status);const i=o.headers.get("Content-Length");if(o.status===200&&(!i||+i>e))throw t&&t.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield o.arrayBuffer(),etag:o.headers.get("ETag")||void 0,cacheControl:o.headers.get("Cache-Control")||void 0,expires:o.headers.get("Expires")||void 0}})}};function Be(n,e){const r=n.getUint32(e+4,!0),t=n.getUint32(e+0,!0);return r*Math.pow(2,32)+t}function vf(n,e){const r=new DataView(n),t=r.getUint8(7);if(t>3)throw Error(`Archive is spec version ${t} but this library supports up to spec version 3`);return{specVersion:t,rootDirectoryOffset:Be(r,8),rootDirectoryLength:Be(r,16),jsonMetadataOffset:Be(r,24),jsonMetadataLength:Be(r,32),leafDirectoryOffset:Be(r,40),leafDirectoryLength:Be(r,48),tileDataOffset:Be(r,56),tileDataLength:Be(r,64),numAddressedTiles:Be(r,72),numTileEntries:Be(r,80),numTileContents:Be(r,88),clustered:r.getUint8(96)===1,internalCompression:r.getUint8(97),tileCompression:r.getUint8(98),tileType:r.getUint8(99),minZoom:r.getUint8(100),maxZoom:r.getUint8(101),minLon:r.getInt32(102,!0)/1e7,minLat:r.getInt32(106,!0)/1e7,maxLon:r.getInt32(110,!0)/1e7,maxLat:r.getInt32(114,!0)/1e7,centerZoom:r.getUint8(118),centerLon:r.getInt32(119,!0)/1e7,centerLat:r.getInt32(123,!0)/1e7,etag:e}}function go(n){const e={buf:new Uint8Array(n),pos:0},r=Dt(e),t=[];let o=0;for(let i=0;i<r;i++){const l=Dt(e);t.push({tileId:o+l,offset:0,length:0,runLength:1}),o+=l}for(let i=0;i<r;i++)t[i].runLength=Dt(e);for(let i=0;i<r;i++)t[i].length=Dt(e);for(let i=0;i<r;i++){const l=Dt(e);l===0&&i>0?t[i].offset=t[i-1].offset+t[i-1].length:t[i].offset=l-1}return t}function bf(n){const e=new DataView(n);return e.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):e.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var wt=class extends Error{};function yf(n,e,r,t){return ke(this,null,function*(){const o=yield n.getBytes(0,16384);if(new DataView(o.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(bf(o.data)<3)return[yield $o.getHeader(n)];const l=o.data.slice(0,df);let a=o.etag;t&&o.etag!=t&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+n.getKey()),a=void 0);const s=vf(l,a);if(r){const u=o.data.slice(s.rootDirectoryOffset,s.rootDirectoryOffset+s.rootDirectoryLength),f=n.getKey()+"|"+(s.etag||"")+"|"+s.rootDirectoryOffset+"|"+s.rootDirectoryLength,c=go(yield e(u,s.internalCompression));return[s,[f,c.length,c]]}return[s,void 0]})}function wf(n,e,r,t,o){return ke(this,null,function*(){const i=yield n.getBytes(r,t);if(o.etag&&o.etag!==i.etag)throw new wt(i.etag);const l=yield e(i.data,o.internalCompression),a=go(l);if(a.length===0)throw new Error("Empty directory is invalid");return a})}var kf=class{constructor(n=100,e=!0,r=ho){this.cache=new Map,this.maxCacheEntries=n,this.counter=1,this.prefetch=e,this.decompress=r}getHeader(n,e){return ke(this,null,function*(){const r=n.getKey();if(this.cache.has(r))return this.cache.get(r).lastUsed=this.counter++,yield this.cache.get(r).data;const t=new Promise((o,i)=>{yf(n,this.decompress,this.prefetch,e).then(l=>{l[1]&&this.cache.set(l[1][0],{lastUsed:this.counter++,data:Promise.resolve(l[1][2])}),o(l[0]),this.prune()}).catch(l=>{i(l)})});return this.cache.set(r,{lastUsed:this.counter++,data:t}),t})}getDirectory(n,e,r,t){return ke(this,null,function*(){const o=n.getKey()+"|"+(t.etag||"")+"|"+e+"|"+r;if(this.cache.has(o))return this.cache.get(o).lastUsed=this.counter++,yield this.cache.get(o).data;const i=new Promise((l,a)=>{wf(n,this.decompress,e,r,t).then(s=>{l(s),this.prune()}).catch(s=>{a(s)})});return this.cache.set(o,{lastUsed:this.counter++,data:i}),i})}getArrayBuffer(n,e,r,t){return ke(this,null,function*(){const o=n.getKey()+"|"+(t.etag||"")+"|"+e+"|"+r;if(this.cache.has(o))return this.cache.get(o).lastUsed=this.counter++,yield this.cache.get(o).data;const i=new Promise((l,a)=>{n.getBytes(e,r).then(s=>{if(t.etag&&t.etag!==s.etag)throw new wt(s.etag);l(s.data),this.cache.has(o),this.prune()}).catch(s=>{a(s)})});return this.cache.set(o,{lastUsed:this.counter++,data:i}),i})}prune(){if(this.cache.size>=this.maxCacheEntries){let n=1/0,e;this.cache.forEach((r,t)=>{r.lastUsed<n&&(n=r.lastUsed,e=t)}),e&&this.cache.delete(e)}}invalidate(n,e){return ke(this,null,function*(){this.cache.delete(n.getKey()),yield this.getHeader(n,e)})}},hn=class{constructor(n,e,r){typeof n=="string"?this.source=new _f(n):this.source=n,r?this.decompress=r:this.decompress=ho,e?this.cache=e:this.cache=new kf}getHeader(){return ke(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(n,e,r,t){return ke(this,null,function*(){const o=hf(n,e,r),i=yield this.cache.getHeader(this.source);if(i.specVersion<3)return $o.getZxy(i,this.source,this.cache,n,e,r,t);if(n<i.minZoom||n>i.maxZoom)return;let l=i.rootDirectoryOffset,a=i.rootDirectoryLength;for(let s=0;s<=3;s++){const u=yield this.cache.getDirectory(this.source,l,a,i),f=gf(u,o);if(f)if(f.runLength>0){const c=yield this.source.getBytes(i.tileDataOffset+f.offset,f.length,t);if(i.etag&&i.etag!==c.etag)throw new wt(c.etag);return{data:yield this.decompress(c.data,i.tileCompression),cacheControl:c.cacheControl,expires:c.expires}}else l=i.leafDirectoryOffset+f.offset,a=f.length;else return}throw Error("Maximum directory depth exceeded")})}getZxy(n,e,r,t){return ke(this,null,function*(){try{return yield this.getZxyAttempt(n,e,r,t)}catch(o){if(o instanceof wt)return this.cache.invalidate(this.source,o.message),yield this.getZxyAttempt(n,e,r,t);throw o}})}getMetadataAttempt(){return ke(this,null,function*(){const n=yield this.cache.getHeader(this.source),e=yield this.source.getBytes(n.jsonMetadataOffset,n.jsonMetadataLength);if(n.etag&&n.etag!==e.etag)throw new wt(e.etag);const r=yield this.decompress(e.data,n.internalCompression),t=new TextDecoder("utf-8");return JSON.parse(t.decode(r))})}getMetadata(){return ke(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(n){if(n instanceof wt)return this.cache.invalidate(this.source,n.message),yield this.getMetadataAttempt();throw n}})}};function dn(n){let e=n[0],r,t,o=gn(n);return{c(){o.c(),r=ze()},m(i,l){o.m(i,l),$(i,r,l),t=!0},p(i,l){l&1&&V(e,e=i[0])?(le(),g(o,1,1,re),ae(),o=gn(i),o.c(),d(o,1),o.m(r.parentNode,r)):o.p(i,l)},i(i){t||(d(o),t=!0)},o(i){g(o),t=!1},d(i){i&&h(r),o.d(i)}}}function gn(n){let e;const r=n[8].default,t=tt(r,n,n[7],null);return{c(){t&&t.c()},m(o,i){t&&t.m(o,i),e=!0},p(o,i){t&&t.p&&(!e||i&128)&&rt(t,r,o,o[7],e?ot(r,o[7],i,null):nt(o[7]),null)},i(o){e||(d(t,o),e=!0)},o(o){g(t,o),e=!1},d(o){t&&t.d(o)}}}function Sf(n){let e,r,t=n[0]&&dn(n);return{c(){t&&t.c(),e=ze()},m(o,i){t&&t.m(o,i),$(o,e,i),r=!0},p(o,[i]){o[0]?t?(t.p(o,i),i&1&&d(t,1)):(t=dn(o),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(le(),g(t,1,1,()=>{t=null}),ae())},i(o){r||(d(t),r=!0)},o(o){g(t),r=!1},d(o){o&&h(e),t&&t.d(o)}}}function Cf(n,e,r){let t,o,{$$slots:i={},$$scope:l}=e,{id:a=Tt("vector")}=e,{url:s=null}=e,{tiles:u=null}=e;if(s&&s.includes("pmtiles://")&&!Qe.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let p=new cf;Qe.addProtocol("pmtiles",p.tile)}const{map:f,self:c}=zn();return x(n,f,p=>r(6,t=p)),x(n,c,p=>r(0,o=p)),xt(()=>{if(o){let p=o;$t(c,o=null,o),En().then(()=>{t!=null&&t.loaded()&&(t==null||t.removeSource(p))})}}),n.$$set=p=>{"id"in p&&r(3,a=p.id),"url"in p&&r(4,s=p.url),"tiles"in p&&r(5,u=p.tiles),"$$scope"in p&&r(7,l=p.$$scope)},n.$$.update=()=>{n.$$.dirty&121&&t&&o!==a&&(o&&t.removeSource(o),$t(c,o=a,o),t.addSource(o,Kt({type:"vector",url:s,tiles:u})))},[o,f,c,a,s,u,t,l,i]}class Ht extends Z{constructor(e){super(),K(this,e,Cf,Sf,V,{id:3,url:4,tiles:5})}}function _n(n){const e=Pf(n[4][0]);n[5]=e[0],n[6]=e[1],n[7]=e[2]}function vn(n,e,r){const t=n.slice();return t[8]=e[r][0],t[9]=e[r][1],t}function Lf(n){let e;return{c(){e=k("Cycle paths")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Tf(n){let e;return{c(){e=k("Open Data Commons Open Database License")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Of(n){let e,r,t,o,i,l,a,s,u,f;return u=new H({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Tf]},$$scope:{ctx:n}}}),{c(){e=M("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,r=A(),t=M("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,o=A(),i=M("p"),i.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,l=A(),a=M("p"),s=k("License: "),_(u.$$.fragment)},m(c,p){$(c,e,p),$(c,r,p),$(c,t,p),$(c,o,p),$(c,i,p),$(c,l,p),$(c,a,p),D(a,s),v(u,a,null),f=!0},p(c,p){const m={};p&4096&&(m.$$scope={dirty:p,ctx:c}),u.$set(m)},i(c){f||(d(u.$$.fragment,c),f=!0)},o(c){g(u.$$.fragment,c),f=!1},d(c){c&&(h(e),h(r),h(t),h(o),h(i),h(l),h(a)),b(u)}}}function Af(n){let e,r,t;return r=new ce({props:{$$slots:{default:[Of]},$$scope:{ctx:n}}}),{c(){e=M("span"),_(r.$$.fragment),ee(e,"slot","right")},m(o,i){$(o,e,i),v(r,e,null),t=!0},p(o,i){const l={};i&4096&&(l.$$scope={dirty:i,ctx:o}),r.$set(l)},i(o){t||(d(r.$$.fragment,o),t=!0)},o(o){g(r.$$.fragment,o),t=!1},d(o){o&&h(e),b(r)}}}function bn(n){let e,r,t=xe(n[2]),o=[];for(let l=0;l<t.length;l+=1)o[l]=yn(vn(n,t,l));const i=l=>g(o[l],1,1,()=>{o[l]=null});return{c(){for(let l=0;l<o.length;l+=1)o[l].c();e=ze()},m(l,a){for(let s=0;s<o.length;s+=1)o[s]&&o[s].m(l,a);$(l,e,a),r=!0},p(l,a){if(a&4){t=xe(l[2]);let s;for(s=0;s<t.length;s+=1){const u=vn(l,t,s);o[s]?(o[s].p(u,a),d(o[s],1)):(o[s]=yn(u),o[s].c(),d(o[s],1),o[s].m(e.parentNode,e))}for(le(),s=t.length;s<o.length;s+=1)i(s);ae()}},i(l){if(!r){for(let a=0;a<t.length;a+=1)d(o[a]);r=!0}},o(l){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)g(o[a]);r=!1},d(l){l&&h(e),Gt(o,l)}}}function yn(n){let e,r,t,o=n[8]+"",i,l,a;return r=new De({props:{color:n[9]}}),{c(){e=M("div"),_(r.$$.fragment),t=A(),i=k(o),l=A()},m(s,u){$(s,e,u),v(r,e,null),D(e,t),D(e,i),D(e,l),a=!0},p:re,i(s){a||(d(r.$$.fragment,s),a=!0)},o(s){g(r.$$.fragment,s),a=!1},d(s){s&&h(e),b(r)}}}function If(n){_n(n);let e,r=n[5]+"",t,o,i,l,a,s=n[6]+"",u,f,c,p,m=n[7]+"",y;return{c(){e=M("h2"),t=k(r),o=A(),i=M("p"),l=k("Direction: "),a=M("b"),u=A(),f=M("p"),c=k("Width: "),p=M("b"),y=k(m)},m(w,L){$(w,e,L),D(e,t),$(w,o,L),$(w,i,L),D(i,l),D(i,a),a.innerHTML=s,$(w,u,L),$(w,f,L),D(f,c),D(f,p),D(p,y)},p(w,L){_n(w),L&16&&r!==(r=w[5]+"")&&me(t,r),L&16&&s!==(s=w[6]+"")&&(a.innerHTML=s),L&16&&m!==(m=w[7]+"")&&me(y,m)},d(w){w&&(h(e),h(o),h(i),h(u),h(f))}}}function Df(n){let e,r;return e=new it({props:{openOn:"hover",$$slots:{default:[If,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p(t,o){const i={};o&4112&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function Ef(n){let e,r;return e=new At({props:{id:Jt,sourceLayer:Jt,paint:{"line-color":Mn(["get","kind"],{track:Y.cycle_paths.track,lane:Y.cycle_paths.lane,shared_use_segregated:Y.cycle_paths.shared_use_segregated,shared_use_unsegregated:Y.cycle_paths.shared_use_unsegregated},"red"),"line-width":tr,"line-opacity":_t(1,.5)},layout:{visibility:n[1]},hoverCursor:"pointer",$$slots:{default:[Df]},$$scope:{ctx:n}}}),e.$on("click",Nf),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p(t,o){const i={};o&2&&(i.layout={visibility:t[1]}),o&4096&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function Mf(n){let e,r,t,o,i,l;function a(f){n[3](f)}let s={id:Jt,$$slots:{right:[Af],default:[Lf]},$$scope:{ctx:n}};n[0]!==void 0&&(s.checked=n[0]),e=new fe({props:s}),G.push(()=>q(e,"checked",a));let u=n[0]&&bn(n);return i=new Ht({props:{url:`pmtiles://${de()}/v1/${Jt}.pmtiles`,$$slots:{default:[Ef]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment),t=A(),u&&u.c(),o=A(),_(i.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),u&&u.m(f,c),$(f,o,c),v(i,f,c),l=!0},p(f,[c]){const p={};c&4096&&(p.$$scope={dirty:c,ctx:f}),!r&&c&1&&(r=!0,p.checked=f[0],X(()=>r=!1)),e.$set(p),f[0]?u?(u.p(f,c),c&1&&d(u,1)):(u=bn(f),u.c(),d(u,1),u.m(o.parentNode,o)):u&&(le(),g(u,1,1,()=>{u=null}),ae());const m={};c&4098&&(m.$$scope={dirty:c,ctx:f}),i.$set(m)},i(f){l||(d(e.$$.fragment,f),d(u),d(i.$$.fragment,f),l=!0)},o(f){g(e.$$.fragment,f),g(u),g(i.$$.fragment,f),l=!1},d(f){f&&(h(t),h(o)),b(e,f),u&&u.d(f),b(i,f)}}}let Jt="cycle_paths";function Pf(n){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[n.properties.kind],r={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[n.properties.direction],t=n.properties.width=="unknown"?"unknown":`${n.properties.width} meters`;return[e,`${r} ${n.properties.direction}`,t]}function Nf(n){window.open(`http://openstreetmap.org/way/${n.detail.features[0].properties.osm_id}`,"_blank")}function Ff(n,e,r){let t,o=[["Separated tracks",Y.cycle_paths.track],["Unprotected lanes",Y.cycle_paths.lane],["Shared-use (segregated)",Y.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",Y.cycle_paths.shared_use_unsegregated]],i=!1;function l(a){i=a,r(0,i)}return n.$$.update=()=>{n.$$.dirty&1&&r(1,t=i?"visible":"none")},[i,t,o,l]}class Bf extends Z{constructor(e){super(),K(this,e,Ff,Mf,V,{})}}function jf(n){let e,r,t,o;return e=new De({props:{color:n[4]}}),{c(){_(e.$$.fragment),r=A(),t=k(n[1])},m(i,l){v(e,i,l),$(i,r,l),$(i,t,l),o=!0},p(i,l){(!o||l&2)&&me(t,i[1])},i(i){o||(d(e.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),o=!1},d(i){i&&(h(r),h(t)),b(e,i)}}}function Rf(n){let e;const r=n[7].default,t=tt(r,n,n[9],null);return{c(){t&&t.c()},m(o,i){t&&t.m(o,i),e=!0},p(o,i){t&&t.p&&(!e||i&512)&&rt(t,r,o,o[9],e?ot(r,o[9],i,null):nt(o[9]),null)},i(o){e||(d(t,o),e=!0)},o(o){g(t,o),e=!1},d(o){t&&t.d(o)}}}function zf(n){let e,r,t;return r=new ce({props:{$$slots:{default:[Rf]},$$scope:{ctx:n}}}),{c(){e=M("span"),_(r.$$.fragment),ee(e,"slot","right")},m(o,i){$(o,e,i),v(r,e,null),t=!0},p(o,i){const l={};i&512&&(l.$$scope={dirty:i,ctx:o}),r.$set(l)},i(o){t||(d(r.$$.fragment,o),t=!0)},o(o){g(r.$$.fragment,o),t=!1},d(o){o&&h(e),b(r)}}}function Hf(n){let e,r=n[5](n[10][0])+"",t;return{c(){e=M("p"),t=k(r)},m(o,i){$(o,e,i),D(e,t)},p(o,i){i&1024&&r!==(r=o[5](o[10][0])+"")&&me(t,r)},d(o){o&&h(e)}}}function Uf(n){let e,r;return e=new it({props:{openOn:"hover",$$slots:{default:[Hf,({features:t})=>({10:t}),({features:t})=>t?1024:0]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p(t,o){const i={};o&1536&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function Wf(n){let e,r;return e=new Ot({props:{id:n[0],sourceLayer:n[0],paint:{"fill-color":n[4],"fill-opacity":_t(.7,1)},layout:{visibility:n[3]},manageHoverState:!0,$$slots:{default:[Uf]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p(t,o){const i={};o&1&&(i.id=t[0]),o&1&&(i.sourceLayer=t[0]),o&8&&(i.layout={visibility:t[3]}),o&512&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function Vf(n){let e,r,t,o,i;function l(s){n[8](s)}let a={id:n[0],$$slots:{right:[zf],default:[jf]},$$scope:{ctx:n}};return n[2]!==void 0&&(a.checked=n[2]),e=new fe({props:a}),G.push(()=>q(e,"checked",l)),o=new Ht({props:{url:`pmtiles://${de()}/v1/${n[0]}.pmtiles`,$$slots:{default:[Wf]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment),t=A(),_(o.$$.fragment)},m(s,u){v(e,s,u),$(s,t,u),v(o,s,u),i=!0},p(s,[u]){const f={};u&1&&(f.id=s[0]),u&514&&(f.$$scope={dirty:u,ctx:s}),!r&&u&4&&(r=!0,f.checked=s[2],X(()=>r=!1)),e.$set(f);const c={};u&1&&(c.url=`pmtiles://${de()}/v1/${s[0]}.pmtiles`),u&521&&(c.$$scope={dirty:u,ctx:s}),o.$set(c)},i(s){i||(d(e.$$.fragment,s),d(o.$$.fragment,s),i=!0)},o(s){g(e.$$.fragment,s),g(o.$$.fragment,s),i=!1},d(s){s&&h(t),b(e,s),b(o,s)}}}function Gf(n,e,r){let t,{$$slots:o={},$$scope:i}=e,{name:l}=e,{singularNoun:a}=e,{pluralNoun:s}=e,u=Y[l],f=!1;function c(m){return m.properties.name??`Unnamed ${a}`}function p(m){f=m,r(2,f)}return n.$$set=m=>{"name"in m&&r(0,l=m.name),"singularNoun"in m&&r(6,a=m.singularNoun),"pluralNoun"in m&&r(1,s=m.pluralNoun),"$$scope"in m&&r(9,i=m.$$scope)},n.$$.update=()=>{n.$$.dirty&4&&r(3,t=f?"visible":"none")},[l,s,f,t,u,c,a,o,p,i]}class Ar extends Z{constructor(e){super(),K(this,e,Gf,Vf,V,{name:0,singularNoun:6,pluralNoun:1})}}function Zf(n){let e;return{c(){e=k("hospital")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Kf(n){let e;return{c(){e=k("Open Data Commons Open Database License")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function qf(n){let e,r,t,o,i,l,a,s,u;return t=new H({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Zf]},$$scope:{ctx:n}}}),s=new H({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Kf]},$$scope:{ctx:n}}}),{c(){e=M("p"),r=k("This shows "),_(t.$$.fragment),o=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),i=A(),l=M("p"),a=k("License: "),_(s.$$.fragment)},m(f,c){$(f,e,c),D(e,r),v(t,e,null),D(e,o),$(f,i,c),$(f,l,c),D(l,a),v(s,l,null),u=!0},p(f,c){const p={};c&1&&(p.$$scope={dirty:c,ctx:f}),t.$set(p);const m={};c&1&&(m.$$scope={dirty:c,ctx:f}),s.$set(m)},i(f){u||(d(t.$$.fragment,f),d(s.$$.fragment,f),u=!0)},o(f){g(t.$$.fragment,f),g(s.$$.fragment,f),u=!1},d(f){f&&(h(e),h(i),h(l)),b(t),b(s)}}}function Xf(n){let e,r;return e=new Ar({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[qf]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p(t,[o]){const i={};o&1&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}class Yf extends Z{constructor(e){super(),K(this,e,null,Xf,V,{})}}function Jf(n){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Qf(n){let e;return{c(){e=k(`DLUCH GIS
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function xf(n){let e;return{c(){e=k(`here
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function eu(n){let e;return{c(){e=k(`Open Government License
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function tu(n){let e,r,t,o,i,l,a,s,u,f,c,p;return t=new H({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Qf]},$$scope:{ctx:n}}}),i=new H({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[xf]},$$scope:{ctx:n}}}),f=new H({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[eu]},$$scope:{ctx:n}}}),{c(){e=M("p"),r=k("The 2019 English IMD scores come from "),_(t.$$.fragment),o=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),_(i.$$.fragment),l=k("."),a=A(),s=M("p"),u=k("License: "),_(f.$$.fragment),c=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(m,y){$(m,e,y),D(e,r),v(t,e,null),D(e,o),v(i,e,null),D(e,l),$(m,a,y),$(m,s,y),D(s,u),v(f,s,null),D(s,c),p=!0},p(m,y){const w={};y&64&&(w.$$scope={dirty:y,ctx:m}),t.$set(w);const L={};y&64&&(L.$$scope={dirty:y,ctx:m}),i.$set(L);const T={};y&64&&(T.$$scope={dirty:y,ctx:m}),f.$set(T)},i(m){p||(d(t.$$.fragment,m),d(i.$$.fragment,m),d(f.$$.fragment,m),p=!0)},o(m){g(t.$$.fragment,m),g(i.$$.fragment,m),g(f.$$.fragment,m),p=!1},d(m){m&&(h(e),h(a),h(s)),b(t),b(i),b(f)}}}function ru(n){let e,r,t;return r=new ce({props:{$$slots:{default:[tu]},$$scope:{ctx:n}}}),{c(){e=M("span"),_(r.$$.fragment),ee(e,"slot","right")},m(o,i){$(o,e,i),v(r,e,null),t=!0},p(o,i){const l={};i&64&&(l.$$scope={dirty:i,ctx:o}),r.$set(l)},i(o){t||(d(r.$$.fragment,o),t=!0)},o(o){g(r.$$.fragment,o),t=!1},d(o){o&&h(e),b(r)}}}function wn(n){let e,r;return e=new st({props:{colorScale:n[1],limits:["Least deprived","Most deprived"]}}),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p:re,i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function nu(n){let e,r,t,o,i,l;function a(f){n[3](f)}let s={id:Ue,$$slots:{right:[ru],default:[Jf]},$$scope:{ctx:n}};n[0]!==void 0&&(s.checked=n[0]),e=new fe({props:s}),G.push(()=>q(e,"checked",a));let u=n[0]&&wn(n);return i=new ge({props:{layer:Ue,tooltip:ou,show:n[0],clickable:!1}}),{c(){_(e.$$.fragment),t=A(),u&&u.c(),o=A(),_(i.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),u&&u.m(f,c),$(f,o,c),v(i,f,c),l=!0},p(f,[c]){const p={};c&64&&(p.$$scope={dirty:c,ctx:f}),!r&&c&1&&(r=!0,p.checked=f[0],X(()=>r=!1)),e.$set(p),f[0]?u?(u.p(f,c),c&1&&d(u,1)):(u=wn(f),u.c(),d(u,1),u.m(o.parentNode,o)):u&&(le(),g(u,1,1,()=>{u=null}),ae());const m={};c&1&&(m.show=f[0]),i.$set(m)},i(f){l||(d(e.$$.fragment,f),d(u),d(i.$$.fragment,f),l=!0)},o(f){g(e.$$.fragment,f),g(u),g(i.$$.fragment,f),l=!1},d(f){f&&(h(t),h(o)),b(e,f),u&&u.d(f),b(i,f)}}}let Ue="imd";function ou(n){return`<p>${n.properties.LSOA11CD} has an IMD score of <b>${n.properties.score}</b></p><p>Rank: <b>${n.properties.rank.toLocaleString()}</b> / 32,844 LSOAs</p>`}function iu(n,e,r){let t;x(n,Ce,u=>r(2,t=u));let o=`${Ue}-outline`,i=Y.sequential_low_to_high,l=[0,2,4,6,8,10];Ge(t,Ue,`${de()}/v1/${Ue}.pmtiles`),Nn(t,{id:Ue,source:Ue,sourceLayer:Ue,color:et(["-",10,["get","decile"]],l,i),opacity:gt(.5,.7)}),dt(t,{id:o,source:Ue,sourceLayer:Ue,color:"black",width:.5});let a=!1;function s(u){a=u,r(0,a)}return n.$$.update=()=>{n.$$.dirty&5&&t.getLayer(o)&&t.setLayoutProperty(o,"visibility",a?"visible":"none")},[a,i,t,s]}class su extends Z{constructor(e){super(),K(this,e,iu,nu,V,{})}}function lu(n){let e,r,t;return e=new De({props:{color:n[2]}}),{c(){_(e.$$.fragment),r=k(`
  Local Authority Districts`)},m(o,i){v(e,o,i),$(o,r,i),t=!0},p:re,i(o){t||(d(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){o&&h(r),b(e,o)}}}function au(n){let e;return{c(){e=k(`ONS Geography
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function fu(n){let e;return{c(){e=k(`Open Government License
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function uu(n){let e,r,t,o,i,l,a,s,u,f;return t=new H({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[au]},$$scope:{ctx:n}}}),s=new H({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[fu]},$$scope:{ctx:n}}}),{c(){e=M("p"),r=k("Data from "),_(t.$$.fragment),o=k(", as of May 2023."),i=A(),l=M("p"),a=k("License: "),_(s.$$.fragment),u=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(c,p){$(c,e,p),D(e,r),v(t,e,null),D(e,o),$(c,i,p),$(c,l,p),D(l,a),v(s,l,null),D(l,u),f=!0},p(c,p){const m={};p&64&&(m.$$scope={dirty:p,ctx:c}),t.$set(m);const y={};p&64&&(y.$$scope={dirty:p,ctx:c}),s.$set(y)},i(c){f||(d(t.$$.fragment,c),d(s.$$.fragment,c),f=!0)},o(c){g(t.$$.fragment,c),g(s.$$.fragment,c),f=!1},d(c){c&&(h(e),h(i),h(l)),b(t),b(s)}}}function cu(n){let e,r,t;return r=new ce({props:{$$slots:{default:[uu]},$$scope:{ctx:n}}}),{c(){e=M("span"),_(r.$$.fragment),ee(e,"slot","right")},m(o,i){$(o,e,i),v(r,e,null),t=!0},p(o,i){const l={};i&64&&(l.$$scope={dirty:i,ctx:o}),r.$set(l)},i(o){t||(d(r.$$.fragment,o),t=!0)},o(o){g(r.$$.fragment,o),t=!1},d(o){o&&h(e),b(r)}}}function pu(n){let e,r=n[5][0].properties.name+"",t;return{c(){e=M("p"),t=k(r)},m(o,i){$(o,e,i),D(e,t)},p(o,i){i&32&&r!==(r=o[5][0].properties.name+"")&&me(t,r)},d(o){o&&h(e)}}}function mu(n){let e,r;return e=new it({props:{openOn:"hover",$$slots:{default:[pu,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p(t,o){const i={};o&96&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function $u(n){let e,r,t,o;return e=new Ot({props:{id:Qt,paint:{"fill-color":n[2],"fill-opacity":_t(0,.5)},layout:{visibility:n[1]},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[mu]},$$scope:{ctx:n}}}),e.$on("click",du),t=new At({props:{id:n[3],paint:{"line-color":n[2],"line-width":2.5},layout:{visibility:n[1]}}}),{c(){_(e.$$.fragment),r=A(),_(t.$$.fragment)},m(i,l){v(e,i,l),$(i,r,l),v(t,i,l),o=!0},p(i,l){const a={};l&2&&(a.layout={visibility:i[1]}),l&64&&(a.$$scope={dirty:l,ctx:i}),e.$set(a);const s={};l&2&&(s.layout={visibility:i[1]}),t.$set(s)},i(i){o||(d(e.$$.fragment,i),d(t.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),o=!1},d(i){i&&h(r),b(e,i),b(t,i)}}}function hu(n){let e,r,t,o,i;function l(s){n[4](s)}let a={id:Qt,$$slots:{right:[cu],default:[lu]},$$scope:{ctx:n}};return n[0]!==void 0&&(a.checked=n[0]),e=new fe({props:a}),G.push(()=>q(e,"checked",l)),o=new Lr({props:{data:`${de()}/v1/${Qt}.geojson`,$$slots:{default:[$u]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment),t=A(),_(o.$$.fragment)},m(s,u){v(e,s,u),$(s,t,u),v(o,s,u),i=!0},p(s,[u]){const f={};u&64&&(f.$$scope={dirty:u,ctx:s}),!r&&u&1&&(r=!0,f.checked=s[0],X(()=>r=!1)),e.$set(f);const c={};u&66&&(c.$$scope={dirty:u,ctx:s}),o.$set(c)},i(s){i||(d(e.$$.fragment,s),d(o.$$.fragment,s),i=!0)},o(s){g(e.$$.fragment,s),g(o.$$.fragment,s),i=!1},d(s){s&&h(t),b(e,s),b(o,s)}}}let Qt="local_authority_districts";function du(n){window.open(`https://www.ons.gov.uk/visualisations/areas/${n.detail.features[0].properties.LAD23CD}`,"_blank")}function gu(n,e,r){let t,o=Y.local_authority_districts,i=`${Qt}-outline`,l=!1;function a(s){l=s,r(0,l)}return n.$$.update=()=>{n.$$.dirty&1&&r(1,t=l?"visible":"none")},[l,t,o,i,a]}class _u extends Z{constructor(e){super(),K(this,e,gu,hu,V,{})}}function vu(n){let e,r,t;return e=new De({props:{color:n[2]}}),{c(){_(e.$$.fragment),r=k(`
  Local Planning Authorities`)},m(o,i){v(e,o,i),$(o,r,i),t=!0},p:re,i(o){t||(d(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){o&&h(r),b(e,o)}}}function bu(n){let e;return{c(){e=k(`local authority
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function yu(n){let e;return{c(){e=k(`national park authorit
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function wu(n){let e;return{c(){e=k(`development corporation
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function ku(n){let e;return{c(){e=k("this map")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Su(n){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Cu(n){let e;return{c(){e=k(`Open Government License
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Lu(n){let e,r,t,o,i,l,a,s,u,f,c,p,m,y,w,L,T,E,B,C,I,j,P,N,O;return t=new H({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[bu]},$$scope:{ctx:n}}}),i=new H({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[yu]},$$scope:{ctx:n}}}),a=new H({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[wu]},$$scope:{ctx:n}}}),m=new H({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[ku]},$$scope:{ctx:n}}}),E=new H({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Su]},$$scope:{ctx:n}}}),P=new H({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Cu]},$$scope:{ctx:n}}}),{c(){e=M("p"),r=k("LPAs may be a "),_(t.$$.fragment),o=k(", "),_(i.$$.fragment),l=k("y, or "),_(a.$$.fragment),s=k("."),u=A(),f=M("p"),c=M("strong"),p=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),_(m.$$.fragment),y=k(" to get more details."),w=A(),L=M("p"),T=k("Data from ONS Geography via "),_(E.$$.fragment),B=k(", as of November 2022."),C=A(),I=M("p"),j=k("License: "),_(P.$$.fragment),N=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(S,z){$(S,e,z),D(e,r),v(t,e,null),D(e,o),v(i,e,null),D(e,l),v(a,e,null),D(e,s),$(S,u,z),$(S,f,z),D(f,c),D(c,p),v(m,c,null),D(c,y),$(S,w,z),$(S,L,z),D(L,T),v(E,L,null),D(L,B),$(S,C,z),$(S,I,z),D(I,j),v(P,I,null),D(I,N),O=!0},p(S,z){const U={};z&64&&(U.$$scope={dirty:z,ctx:S}),t.$set(U);const W={};z&64&&(W.$$scope={dirty:z,ctx:S}),i.$set(W);const te={};z&64&&(te.$$scope={dirty:z,ctx:S}),a.$set(te);const pe={};z&64&&(pe.$$scope={dirty:z,ctx:S}),m.$set(pe);const J={};z&64&&(J.$$scope={dirty:z,ctx:S}),E.$set(J);const se={};z&64&&(se.$$scope={dirty:z,ctx:S}),P.$set(se)},i(S){O||(d(t.$$.fragment,S),d(i.$$.fragment,S),d(a.$$.fragment,S),d(m.$$.fragment,S),d(E.$$.fragment,S),d(P.$$.fragment,S),O=!0)},o(S){g(t.$$.fragment,S),g(i.$$.fragment,S),g(a.$$.fragment,S),g(m.$$.fragment,S),g(E.$$.fragment,S),g(P.$$.fragment,S),O=!1},d(S){S&&(h(e),h(u),h(f),h(w),h(L),h(C),h(I)),b(t),b(i),b(a),b(m),b(E),b(P)}}}function Tu(n){let e,r,t;return r=new ce({props:{$$slots:{default:[Lu]},$$scope:{ctx:n}}}),{c(){e=M("span"),_(r.$$.fragment),ee(e,"slot","right")},m(o,i){$(o,e,i),v(r,e,null),t=!0},p(o,i){const l={};i&64&&(l.$$scope={dirty:i,ctx:o}),r.$set(l)},i(o){t||(d(r.$$.fragment,o),t=!0)},o(o){g(r.$$.fragment,o),t=!1},d(o){o&&h(e),b(r)}}}function Ou(n){let e,r=n[5][0].properties.name+"",t;return{c(){e=M("p"),t=k(r)},m(o,i){$(o,e,i),D(e,t)},p(o,i){i&32&&r!==(r=o[5][0].properties.name+"")&&me(t,r)},d(o){o&&h(e)}}}function Au(n){let e,r;return e=new it({props:{openOn:"hover",$$slots:{default:[Ou,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p(t,o){const i={};o&96&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function Iu(n){let e,r,t,o;return e=new Ot({props:{id:St,sourceLayer:St,paint:{"fill-color":n[2],"fill-opacity":_t(0,.5)},layout:{visibility:n[1]},manageHoverState:!0,$$slots:{default:[Au]},$$scope:{ctx:n}}}),t=new At({props:{id:n[3],sourceLayer:St,paint:{"line-color":n[2],"line-width":2.5},layout:{visibility:n[1]}}}),{c(){_(e.$$.fragment),r=A(),_(t.$$.fragment)},m(i,l){v(e,i,l),$(i,r,l),v(t,i,l),o=!0},p(i,l){const a={};l&2&&(a.layout={visibility:i[1]}),l&64&&(a.$$scope={dirty:l,ctx:i}),e.$set(a);const s={};l&2&&(s.layout={visibility:i[1]}),t.$set(s)},i(i){o||(d(e.$$.fragment,i),d(t.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),o=!1},d(i){i&&h(r),b(e,i),b(t,i)}}}function Du(n){let e,r,t,o,i;function l(s){n[4](s)}let a={id:St,$$slots:{right:[Tu],default:[vu]},$$scope:{ctx:n}};return n[0]!==void 0&&(a.checked=n[0]),e=new fe({props:a}),G.push(()=>q(e,"checked",l)),o=new Ht({props:{url:`pmtiles://${de()}/v1/${St}.pmtiles`,$$slots:{default:[Iu]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment),t=A(),_(o.$$.fragment)},m(s,u){v(e,s,u),$(s,t,u),v(o,s,u),i=!0},p(s,[u]){const f={};u&64&&(f.$$scope={dirty:u,ctx:s}),!r&&u&1&&(r=!0,f.checked=s[0],X(()=>r=!1)),e.$set(f);const c={};u&66&&(c.$$scope={dirty:u,ctx:s}),o.$set(c)},i(s){i||(d(e.$$.fragment,s),d(o.$$.fragment,s),i=!0)},o(s){g(e.$$.fragment,s),g(o.$$.fragment,s),i=!1},d(s){s&&h(t),b(e,s),b(o,s)}}}let St="local_planning_authorities";function Eu(n,e,r){let t,o=Y.local_planning_authorities,i=`${St}-outline`,l=!1;function a(s){l=s,r(0,l)}return n.$$.update=()=>{n.$$.dirty&1&&r(1,t=l?"visible":"none")},[l,t,o,i,a]}class Mu extends Z{constructor(e){super(),K(this,e,Eu,Du,V,{})}}function Pu(n){let e,r,t;return e=new De({props:{color:n[1]}}),{c(){_(e.$$.fragment),r=k(`
  Major Road Network`)},m(o,i){v(e,o,i),$(o,r,i),t=!0},p:re,i(o){t||(d(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){o&&h(r),b(e,o)}}}function Nu(n){let e;return{c(){e=k(`Major Road Network
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Fu(n){let e;return{c(){e=k("Open Government License")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Bu(n){let e,r,t,o,i,l,a,s,u;return t=new H({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Nu]},$$scope:{ctx:n}}}),s=new H({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Fu]},$$scope:{ctx:n}}}),{c(){e=M("p"),r=k("Data from the "),_(t.$$.fragment),o=k(", as of September 2021."),i=A(),l=M("p"),a=k("License: "),_(s.$$.fragment)},m(f,c){$(f,e,c),D(e,r),v(t,e,null),D(e,o),$(f,i,c),$(f,l,c),D(l,a),v(s,l,null),u=!0},p(f,c){const p={};c&16&&(p.$$scope={dirty:c,ctx:f}),t.$set(p);const m={};c&16&&(m.$$scope={dirty:c,ctx:f}),s.$set(m)},i(f){u||(d(t.$$.fragment,f),d(s.$$.fragment,f),u=!0)},o(f){g(t.$$.fragment,f),g(s.$$.fragment,f),u=!1},d(f){f&&(h(e),h(i),h(l)),b(t),b(s)}}}function ju(n){let e,r,t;return r=new ce({props:{$$slots:{default:[Bu]},$$scope:{ctx:n}}}),{c(){e=M("span"),_(r.$$.fragment),ee(e,"slot","right")},m(o,i){$(o,e,i),v(r,e,null),t=!0},p(o,i){const l={};i&16&&(l.$$scope={dirty:i,ctx:o}),r.$set(l)},i(o){t||(d(r.$$.fragment,o),t=!0)},o(o){g(r.$$.fragment,o),t=!1},d(o){o&&h(e),b(r)}}}function Ru(n){let e,r,t,o,i;function l(s){n[2](s)}let a={id:ft,$$slots:{right:[ju],default:[Pu]},$$scope:{ctx:n}};return n[0]!==void 0&&(a.checked=n[0]),e=new fe({props:a}),G.push(()=>q(e,"checked",l)),o=new ge({props:{layer:ft,tooltip:zu,show:n[0],clickable:!1}}),{c(){_(e.$$.fragment),t=A(),_(o.$$.fragment)},m(s,u){v(e,s,u),$(s,t,u),v(o,s,u),i=!0},p(s,[u]){const f={};u&16&&(f.$$scope={dirty:u,ctx:s}),!r&&u&1&&(r=!0,f.checked=s[0],X(()=>r=!1)),e.$set(f);const c={};u&1&&(c.show=s[0]),o.$set(c)},i(s){i||(d(e.$$.fragment,s),d(o.$$.fragment,s),i=!0)},o(s){g(e.$$.fragment,s),g(o.$$.fragment,s),i=!1},d(s){s&&h(t),b(e,s),b(o,s)}}}let ft="mrn";function zu(n){return`<p>${n.properties.name??"Unknown MRN road"}</p>`}function Hu(n,e,r){let t;x(n,Ce,a=>r(3,t=a));let o=Y.mrn;Ge(t,ft,`${de()}/v1/${ft}.pmtiles`),dt(t,{id:ft,source:ft,sourceLayer:ft,color:o,width:7,opacity:gt(.5,1)});let i=!1;function l(a){i=a,r(0,i)}return[i,o,l]}class Uu extends Z{constructor(e){super(),K(this,e,Hu,Ru,V,{})}}function Wu(n){let e,r,t;return e=new De({props:{color:n[2]}}),{c(){_(e.$$.fragment),r=k(`
  Parliamentary constituencies`)},m(o,i){v(e,o,i),$(o,r,i),t=!0},p:re,i(o){t||(d(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){o&&h(r),b(e,o)}}}function Vu(n){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Gu(n){let e;return{c(){e=k("Open Government License")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Zu(n){let e,r,t,o,i,l,a,s,u;return t=new H({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Vu]},$$scope:{ctx:n}}}),s=new H({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Gu]},$$scope:{ctx:n}}}),{c(){e=M("p"),r=k("Data from "),_(t.$$.fragment),o=k(", as of May 2023."),i=A(),l=M("p"),a=k("License: "),_(s.$$.fragment)},m(f,c){$(f,e,c),D(e,r),v(t,e,null),D(e,o),$(f,i,c),$(f,l,c),D(l,a),v(s,l,null),u=!0},p(f,c){const p={};c&64&&(p.$$scope={dirty:c,ctx:f}),t.$set(p);const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),s.$set(m)},i(f){u||(d(t.$$.fragment,f),d(s.$$.fragment,f),u=!0)},o(f){g(t.$$.fragment,f),g(s.$$.fragment,f),u=!1},d(f){f&&(h(e),h(i),h(l)),b(t),b(s)}}}function Ku(n){let e,r,t;return r=new ce({props:{$$slots:{default:[Zu]},$$scope:{ctx:n}}}),{c(){e=M("span"),_(r.$$.fragment),ee(e,"slot","right")},m(o,i){$(o,e,i),v(r,e,null),t=!0},p(o,i){const l={};i&64&&(l.$$scope={dirty:i,ctx:o}),r.$set(l)},i(o){t||(d(r.$$.fragment,o),t=!0)},o(o){g(r.$$.fragment,o),t=!1},d(o){o&&h(e),b(r)}}}function qu(n){let e,r=n[5][0].properties.Name+"",t;return{c(){e=M("p"),t=k(r)},m(o,i){$(o,e,i),D(e,t)},p(o,i){i&32&&r!==(r=o[5][0].properties.Name+"")&&me(t,r)},d(o){o&&h(e)}}}function Xu(n){let e,r;return e=new it({props:{openOn:"hover",$$slots:{default:[qu,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p(t,o){const i={};o&96&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function Yu(n){let e,r,t,o;return e=new Ot({props:{id:Ct,sourceLayer:Ct,paint:{"fill-color":n[2],"fill-opacity":_t(0,.5)},layout:{visibility:n[1]},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[Xu]},$$scope:{ctx:n}}}),e.$on("click",Qu),t=new At({props:{id:n[3],sourceLayer:Ct,paint:{"line-color":n[2],"line-width":5},layout:{visibility:n[1]}}}),{c(){_(e.$$.fragment),r=A(),_(t.$$.fragment)},m(i,l){v(e,i,l),$(i,r,l),v(t,i,l),o=!0},p(i,l){const a={};l&2&&(a.layout={visibility:i[1]}),l&64&&(a.$$scope={dirty:l,ctx:i}),e.$set(a);const s={};l&2&&(s.layout={visibility:i[1]}),t.$set(s)},i(i){o||(d(e.$$.fragment,i),d(t.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),o=!1},d(i){i&&h(r),b(e,i),b(t,i)}}}function Ju(n){let e,r,t,o,i;function l(s){n[4](s)}let a={id:Ct,$$slots:{right:[Ku],default:[Wu]},$$scope:{ctx:n}};return n[0]!==void 0&&(a.checked=n[0]),e=new fe({props:a}),G.push(()=>q(e,"checked",l)),o=new Ht({props:{url:`pmtiles://${de()}/v1/${Ct}.pmtiles`,$$slots:{default:[Yu]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment),t=A(),_(o.$$.fragment)},m(s,u){v(e,s,u),$(s,t,u),v(o,s,u),i=!0},p(s,[u]){const f={};u&64&&(f.$$scope={dirty:u,ctx:s}),!r&&u&1&&(r=!0,f.checked=s[0],X(()=>r=!1)),e.$set(f);const c={};u&66&&(c.$$scope={dirty:u,ctx:s}),o.$set(c)},i(s){i||(d(e.$$.fragment,s),d(o.$$.fragment,s),i=!0)},o(s){g(e.$$.fragment,s),g(o.$$.fragment,s),i=!1},d(s){s&&h(t),b(e,s),b(o,s)}}}let Ct="parliamentary_constituencies";function Qu(n){let e=n.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function xu(n,e,r){let t,o=Y.parliamentary_constituencies,i=`${Ct}-outline`,l=!1;function a(s){l=s,r(0,l)}return n.$$.update=()=>{n.$$.dirty&1&&r(1,t=l?"visible":"none")},[l,t,o,i,a]}class ec extends Z{constructor(e){super(),K(this,e,xu,Ju,V,{})}}function tc(n){let e;return{c(){e=k("Propensity to Cycle Tool")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function rc(n){let e;return{c(){e=k("the PCT website")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function nc(n){let e;return{c(){e=k("2017 journal article")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function oc(n){let e,r,t,o,i,l,a,s,u,f,c;return a=new H({props:{href:"https://www.pct.bike",$$slots:{default:[rc]},$$scope:{ctx:n}}}),u=new H({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[nc]},$$scope:{ctx:n}}}),{c(){e=M("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,r=A(),t=M("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,o=A(),i=M("p"),l=k("See "),_(a.$$.fragment),s=k(" and "),_(u.$$.fragment),f=k(" for details on methodology and data sources.")},m(p,m){$(p,e,m),$(p,r,m),$(p,t,m),$(p,o,m),$(p,i,m),D(i,l),v(a,i,null),D(i,s),v(u,i,null),D(i,f),c=!0},p(p,m){const y={};m&2048&&(y.$$scope={dirty:m,ctx:p}),a.$set(y);const w={};m&2048&&(w.$$scope={dirty:m,ctx:p}),u.$set(w)},i(p){c||(d(a.$$.fragment,p),d(u.$$.fragment,p),c=!0)},o(p){g(a.$$.fragment,p),g(u.$$.fragment,p),c=!1},d(p){p&&(h(e),h(r),h(t),h(o),h(i)),b(a),b(u)}}}function ic(n){let e,r,t;return r=new ce({props:{$$slots:{default:[oc]},$$scope:{ctx:n}}}),{c(){e=M("span"),_(r.$$.fragment),ee(e,"slot","right")},m(o,i){$(o,e,i),v(r,e,null),t=!0},p(o,i){const l={};i&2048&&(l.$$scope={dirty:i,ctx:o}),r.$set(l)},i(o){t||(d(r.$$.fragment,o),t=!0)},o(o){g(r.$$.fragment,o),t=!1},d(o){o&&h(e),b(r)}}}function kn(n){let e,r,t,o,i,l,a,s;e=new st({props:{colorScale:n[3],limits:n[4]}});function u(m){n[8](m)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};n[0]!==void 0&&(f.value=n[0]),t=new jn({props:f}),G.push(()=>q(t,"value",u)),t.$on("change",n[6]);function c(m){n[9](m)}let p={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return n[1]!==void 0&&(p.value=n[1]),l=new Zt({props:p}),G.push(()=>q(l,"value",c)),l.$on("change",n[6]),{c(){_(e.$$.fragment),r=A(),_(t.$$.fragment),i=A(),_(l.$$.fragment)},m(m,y){v(e,m,y),$(m,r,y),v(t,m,y),$(m,i,y),v(l,m,y),s=!0},p(m,y){const w={};!o&&y&1&&(o=!0,w.value=m[0],X(()=>o=!1)),t.$set(w);const L={};!a&&y&2&&(a=!0,L.value=m[1],X(()=>a=!1)),l.$set(L)},i(m){s||(d(e.$$.fragment,m),d(t.$$.fragment,m),d(l.$$.fragment,m),s=!0)},o(m){g(e.$$.fragment,m),g(t.$$.fragment,m),g(l.$$.fragment,m),s=!1},d(m){m&&(h(r),h(i)),b(e,m),b(t,m),b(l,m)}}}function sc(n){let e,r,t,o,i,l,a,s;function u(p){n[7](p)}let f={id:mt,$$slots:{right:[ic],default:[tc]},$$scope:{ctx:n}};n[2]!==void 0&&(f.checked=n[2]),e=new fe({props:f}),G.push(()=>q(e,"checked",u));let c=n[2]&&kn(n);return i=new ge({props:{layer:mt,tooltip:n[5],show:n[2]&&n[0]==mt,clickable:!1}}),a=new ge({props:{layer:Vt,tooltip:n[5],show:n[2]&&n[0]==Vt,clickable:!1}}),{c(){_(e.$$.fragment),t=A(),c&&c.c(),o=A(),_(i.$$.fragment),l=A(),_(a.$$.fragment)},m(p,m){v(e,p,m),$(p,t,m),c&&c.m(p,m),$(p,o,m),v(i,p,m),$(p,l,m),v(a,p,m),s=!0},p(p,[m]){const y={};m&2048&&(y.$$scope={dirty:m,ctx:p}),!r&&m&4&&(r=!0,y.checked=p[2],X(()=>r=!1)),e.$set(y),p[2]?c?(c.p(p,m),m&4&&d(c,1)):(c=kn(p),c.c(),d(c,1),c.m(o.parentNode,o)):c&&(le(),g(c,1,1,()=>{c=null}),ae());const w={};m&5&&(w.show=p[2]&&p[0]==mt),i.$set(w);const L={};m&5&&(L.show=p[2]&&p[0]==Vt),a.$set(L)},i(p){s||(d(e.$$.fragment,p),d(c),d(i.$$.fragment,p),d(a.$$.fragment,p),s=!0)},o(p){g(e.$$.fragment,p),g(c),g(i.$$.fragment,p),g(a.$$.fragment,p),s=!1},d(p){p&&(h(t),h(o),h(l)),b(e,p),c&&c.d(p),b(i,p),b(a,p)}}}let mt="pct_commute",Vt="pct_school";function lc(n,e,r){let t;x(n,Ce,y=>r(10,t=y));let o=Y.sequential_low_to_high,i=[0,50,100,500,1e3,2e3],l=mt,a="baseline";for(let y of[mt,Vt])Ge(t,y,`${de()}/v1/${y}.pmtiles`),dt(t,{id:y,source:y,sourceLayer:y,color:et(["get",a],i,o),width:tr,opacity:gt(.5,1)});let s=!1;function u(y){let w=y.properties.baseline,L=y.properties.gov_target,T=y.properties.go_dutch,E=`<h2>Trip purpose: ${l==mt?"commuting":"school"}</h2>`;if(E+=`<p>Baseline (2011): <b>${w.toLocaleString()}</b></p>`,w==0)E+=`<p>Government target (2025): <b>${L.toLocaleString()}</b></p>`,E+=`<p>Go Dutch: <b>${T.toLocaleString()}</b></p>`;else{let B=(L/w).toFixed(1),C=(T/w).toFixed(1);E+=`<p>Government target (2025): ${L.toLocaleString()} (<b>${B}x</b> of baseline)</p>`,E+=`<p>Go Dutch: ${T.toLocaleString()} (<b>${C}x</b> of baseline)</p>`}return E}function f(){t.setPaintProperty(l,"line-color",et(["get",a],i,o))}function c(y){s=y,r(2,s)}function p(y){l=y,r(0,l)}function m(y){a=y,r(1,a)}return[l,a,s,o,i,u,f,c,p,m]}class ac extends Z{constructor(e){super(),K(this,e,lc,sc,V,{})}}function fc(n){let e,r,t;return e=new De({props:{color:n[2]}}),{c(){_(e.$$.fragment),r=k(`
  Railway Stations`)},m(o,i){v(e,o,i),$(o,r,i),t=!0},p:re,i(o){t||(d(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){o&&h(r),b(e,o)}}}function uc(n){let e;return{c(){e=k("railway station")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function cc(n){let e;return{c(){e=k("Open Data Commons Open Database License")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function pc(n){let e,r,t,o,i,l,a,s,u;return t=new H({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[uc]},$$scope:{ctx:n}}}),s=new H({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[cc]},$$scope:{ctx:n}}}),{c(){e=M("p"),r=k("This shows "),_(t.$$.fragment),o=k(" data from OpenStreetMap (as of 9 August 2023)."),i=A(),l=M("p"),a=k("License: "),_(s.$$.fragment)},m(f,c){$(f,e,c),D(e,r),v(t,e,null),D(e,o),$(f,i,c),$(f,l,c),D(l,a),v(s,l,null),u=!0},p(f,c){const p={};c&32&&(p.$$scope={dirty:c,ctx:f}),t.$set(p);const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),s.$set(m)},i(f){u||(d(t.$$.fragment,f),d(s.$$.fragment,f),u=!0)},o(f){g(t.$$.fragment,f),g(s.$$.fragment,f),u=!1},d(f){f&&(h(e),h(i),h(l)),b(t),b(s)}}}function mc(n){let e,r,t;return r=new ce({props:{$$slots:{default:[pc]},$$scope:{ctx:n}}}),{c(){e=M("span"),_(r.$$.fragment),ee(e,"slot","right")},m(o,i){$(o,e,i),v(r,e,null),t=!0},p(o,i){const l={};i&32&&(l.$$scope={dirty:i,ctx:o}),r.$set(l)},i(o){t||(d(r.$$.fragment,o),t=!0)},o(o){g(r.$$.fragment,o),t=!1},d(o){o&&h(e),b(r)}}}function $c(n){let e,r=Sn(n[4][0])+"",t;return{c(){e=M("p"),t=k(r)},m(o,i){$(o,e,i),D(e,t)},p(o,i){i&16&&r!==(r=Sn(o[4][0])+"")&&me(t,r)},d(o){o&&h(e)}}}function hc(n){let e,r;return e=new it({props:{openOn:"hover",$$slots:{default:[$c,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p(t,o){const i={};o&48&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function dc(n){let e,r;return e=new Go({props:{id:yr,paint:{"circle-color":n[2],"circle-radius":Eo/2},layout:{visibility:n[1]},$$slots:{default:[hc]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p(t,o){const i={};o&2&&(i.layout={visibility:t[1]}),o&32&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function gc(n){let e,r,t,o,i;function l(s){n[3](s)}let a={id:yr,$$slots:{right:[mc],default:[fc]},$$scope:{ctx:n}};return n[0]!==void 0&&(a.checked=n[0]),e=new fe({props:a}),G.push(()=>q(e,"checked",l)),o=new Lr({props:{data:`${de()}/v1/${yr}.geojson`,$$slots:{default:[dc]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment),t=A(),_(o.$$.fragment)},m(s,u){v(e,s,u),$(s,t,u),v(o,s,u),i=!0},p(s,[u]){const f={};u&32&&(f.$$scope={dirty:u,ctx:s}),!r&&u&1&&(r=!0,f.checked=s[0],X(()=>r=!1)),e.$set(f);const c={};u&34&&(c.$$scope={dirty:u,ctx:s}),o.$set(c)},i(s){i||(d(e.$$.fragment,s),d(o.$$.fragment,s),i=!0)},o(s){g(e.$$.fragment,s),g(o.$$.fragment,s),i=!1},d(s){s&&h(t),b(e,s),b(o,s)}}}let yr="railway_stations";function Sn(n){return n.properties.name??"Unnamed railway station"}function _c(n,e,r){let t,o=Y.railway_stations,i=!1;function l(a){i=a,r(0,i)}return n.$$.update=()=>{n.$$.dirty&1&&r(1,t=i?"visible":"none")},[i,t,o,l]}class vc extends Z{constructor(e){super(),K(this,e,_c,gc,V,{})}}function bc(n){let e;return{c(){e=k("OS Speeds")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function yc(n){let e;return{c(){e=k("Basemap")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function wc(n){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function kc(n){let e,r,t,o,i,l,a,s,u,f,c,p;return t=new H({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[yc]},$$scope:{ctx:n}}}),f=new H({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[wc]},$$scope:{ctx:n}}}),{c(){e=M("p"),r=k("The average speed data is collected over a six-month period by "),_(t.$$.fragment),o=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),i=A(),l=M("p"),l.textContent="Data valid as of 1 September, 2023",a=A(),s=M("p"),u=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),_(f.$$.fragment),c=k(".")},m(m,y){$(m,e,y),D(e,r),v(t,e,null),D(e,o),$(m,i,y),$(m,l,y),$(m,a,y),$(m,s,y),D(s,u),v(f,s,null),D(s,c),p=!0},p(m,y){const w={};y&256&&(w.$$scope={dirty:y,ctx:m}),t.$set(w);const L={};y&256&&(L.$$scope={dirty:y,ctx:m}),f.$set(L)},i(m){p||(d(t.$$.fragment,m),d(f.$$.fragment,m),p=!0)},o(m){g(t.$$.fragment,m),g(f.$$.fragment,m),p=!1},d(m){m&&(h(e),h(i),h(l),h(a),h(s)),b(t),b(f)}}}function Sc(n){let e,r,t;return r=new ce({props:{$$slots:{default:[kc]},$$scope:{ctx:n}}}),{c(){e=M("span"),_(r.$$.fragment),ee(e,"slot","right")},m(o,i){$(o,e,i),v(r,e,null),t=!0},p(o,i){const l={};i&256&&(l.$$scope={dirty:i,ctx:o}),r.$set(l)},i(o){t||(d(r.$$.fragment,o),t=!0)},o(o){g(r.$$.fragment,o),t=!1},d(o){o&&h(e),b(r)}}}function Cn(n){let e,r,t,o,i;e=new st({props:{colorScale:n[2],limits:n[3]}});function l(s){n[6](s)}let a={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return n[0]!==void 0&&(a.value=n[0]),t=new jn({props:a}),G.push(()=>q(t,"value",l)),t.$on("change",n[4]),{c(){_(e.$$.fragment),r=A(),_(t.$$.fragment)},m(s,u){v(e,s,u),$(s,r,u),v(t,s,u),i=!0},p(s,u){const f={};!o&&u&1&&(o=!0,f.value=s[0],X(()=>o=!1)),t.$set(f)},i(s){i||(d(e.$$.fragment,s),d(t.$$.fragment,s),i=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),i=!1},d(s){s&&h(r),b(e,s),b(t,s)}}}function Cc(n){let e,r,t,o,i,l;function a(f){n[5](f)}let s={id:Je,$$slots:{right:[Sc],default:[bc]},$$scope:{ctx:n}};n[1]!==void 0&&(s.checked=n[1]),e=new fe({props:s}),G.push(()=>q(e,"checked",a));let u=n[1]&&Cn(n);return i=new ge({props:{layer:Je,tooltip:Lc,show:n[1],clickable:!1}}),{c(){_(e.$$.fragment),t=A(),u&&u.c(),o=A(),_(i.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),u&&u.m(f,c),$(f,o,c),v(i,f,c),l=!0},p(f,[c]){const p={};c&256&&(p.$$scope={dirty:c,ctx:f}),!r&&c&2&&(r=!0,p.checked=f[1],X(()=>r=!1)),e.$set(p),f[1]?u?(u.p(f,c),c&2&&d(u,1)):(u=Cn(f),u.c(),d(u,1),u.m(o.parentNode,o)):u&&(le(),g(u,1,1,()=>{u=null}),ae());const m={};c&2&&(m.show=f[1]),i.$set(m)},i(f){l||(d(e.$$.fragment,f),d(u),d(i.$$.fragment,f),l=!0)},o(f){g(e.$$.fragment,f),g(u),g(i.$$.fragment,f),l=!1},d(f){f&&(h(t),h(o)),b(e,f),u&&u.d(f),b(i,f)}}}let Je="road_speeds";function Lc(n){let e={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"}[n.properties.highest_description],r=`<p>Posted speed limit: ${n.properties.indicative_mph} mph</p>`;return r+=`<p>Highest average speed: ${n.properties.highest_mph} mph (during ${e})</p>`,r}function Tc(n,e,r){let t;x(n,Ce,c=>r(7,t=c));let o=Y.sequential_low_to_high,i=[0,20,30,40,50,90],l="indicative_mph";Ge(t,Je,`${Sr()}/v1/${Je}.pmtiles`),dt(t,{id:Je,source:Je,sourceLayer:Je,color:et(["get",l],i,o),width:tr,opacity:gt(.5,1)});let a=!1;function s(){t.setPaintProperty(Je,"line-color",et(["get",l],i,o))}function u(c){a=c,r(1,a)}function f(c){l=c,r(0,l)}return[l,a,o,i,s,u,f]}class Oc extends Z{constructor(e){super(),K(this,e,Tc,Cc,V,{})}}function Ac(n){let e;return{c(){e=k("OS Road widths")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Ic(n){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Dc(n){let e,r,t,o,i,l,a,s,u;return a=new H({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Ic]},$$scope:{ctx:n}}}),{c(){e=M("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,r=A(),t=M("p"),t.textContent="Data valid as of 1 September, 2023",o=A(),i=M("p"),l=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),_(a.$$.fragment),s=k(".")},m(f,c){$(f,e,c),$(f,r,c),$(f,t,c),$(f,o,c),$(f,i,c),D(i,l),v(a,i,null),D(i,s),u=!0},p(f,c){const p={};c&32&&(p.$$scope={dirty:c,ctx:f}),a.$set(p)},i(f){u||(d(a.$$.fragment,f),u=!0)},o(f){g(a.$$.fragment,f),u=!1},d(f){f&&(h(e),h(r),h(t),h(o),h(i)),b(a)}}}function Ec(n){let e,r,t;return r=new ce({props:{$$slots:{default:[Dc]},$$scope:{ctx:n}}}),{c(){e=M("span"),_(r.$$.fragment),ee(e,"slot","right")},m(o,i){$(o,e,i),v(r,e,null),t=!0},p(o,i){const l={};i&32&&(l.$$scope={dirty:i,ctx:o}),r.$set(l)},i(o){t||(d(r.$$.fragment,o),t=!0)},o(o){g(r.$$.fragment,o),t=!1},d(o){o&&h(e),b(r)}}}function Ln(n){let e,r;return e=new st({props:{colorScale:n[1],limits:n[2]}}),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p:re,i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function Mc(n){let e,r,t,o,i,l;function a(f){n[3](f)}let s={id:ut,$$slots:{right:[Ec],default:[Ac]},$$scope:{ctx:n}};n[0]!==void 0&&(s.checked=n[0]),e=new fe({props:s}),G.push(()=>q(e,"checked",a));let u=n[0]&&Ln(n);return i=new ge({props:{layer:ut,tooltip:Pc,show:n[0],clickable:!1}}),{c(){_(e.$$.fragment),t=A(),u&&u.c(),o=A(),_(i.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),u&&u.m(f,c),$(f,o,c),v(i,f,c),l=!0},p(f,[c]){const p={};c&32&&(p.$$scope={dirty:c,ctx:f}),!r&&c&1&&(r=!0,p.checked=f[0],X(()=>r=!1)),e.$set(p),f[0]?u?(u.p(f,c),c&1&&d(u,1)):(u=Ln(f),u.c(),d(u,1),u.m(o.parentNode,o)):u&&(le(),g(u,1,1,()=>{u=null}),ae());const m={};c&1&&(m.show=f[0]),i.$set(m)},i(f){l||(d(e.$$.fragment,f),d(u),d(i.$$.fragment,f),l=!0)},o(f){g(e.$$.fragment,f),g(u),g(i.$$.fragment,f),l=!1},d(f){f&&(h(t),h(o)),b(e,f),u&&u.d(f),b(i,f)}}}let ut="road_widths";function Pc(n){let e=`<p>Average width: ${n.properties.average} meters</p>`;return e+=`<p>Minimum width: ${n.properties.minimum} meters</p>`,e}function Nc(n,e,r){let t;x(n,Ce,s=>r(4,t=s));let o=Y.sequential_low_to_high,i=[0,5,10,15,20,100];Ge(t,ut,`${Sr()}/v1/${ut}.pmtiles`),dt(t,{id:ut,source:ut,sourceLayer:ut,color:et(["get","average"],i,o),width:tr,opacity:gt(.5,1)});let l=!1;function a(s){l=s,r(0,l)}return[l,o,i,a]}class Fc extends Z{constructor(e){super(),K(this,e,Nc,Mc,V,{})}}function Bc(n){let e;return{c(){e=k("primary and secondary schools")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function jc(n){let e;return{c(){e=k("Open Data Commons Open Database License")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Rc(n){let e,r,t,o,i,l,a,s,u;return t=new H({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[Bc]},$$scope:{ctx:n}}}),s=new H({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[jc]},$$scope:{ctx:n}}}),{c(){e=M("p"),r=k("This shows "),_(t.$$.fragment),o=k(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),i=A(),l=M("p"),a=k("License: "),_(s.$$.fragment)},m(f,c){$(f,e,c),D(e,r),v(t,e,null),D(e,o),$(f,i,c),$(f,l,c),D(l,a),v(s,l,null),u=!0},p(f,c){const p={};c&1&&(p.$$scope={dirty:c,ctx:f}),t.$set(p);const m={};c&1&&(m.$$scope={dirty:c,ctx:f}),s.$set(m)},i(f){u||(d(t.$$.fragment,f),d(s.$$.fragment,f),u=!0)},o(f){g(t.$$.fragment,f),g(s.$$.fragment,f),u=!1},d(f){f&&(h(e),h(i),h(l)),b(t),b(s)}}}function zc(n){let e,r;return e=new Ar({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[Rc]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p(t,[o]){const i={};o&1&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}class Hc extends Z{constructor(e){super(),K(this,e,null,zc,V,{})}}function Uc(n){let e;return{c(){e=k("sports pitches")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Wc(n){let e;return{c(){e=k("sports centres")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Vc(n){let e;return{c(){e=k("Open Data Commons Open Database License")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Gc(n){let e,r,t,o,i,l,a,s,u,f,c;return t=new H({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Uc]},$$scope:{ctx:n}}}),i=new H({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Wc]},$$scope:{ctx:n}}}),f=new H({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Vc]},$$scope:{ctx:n}}}),{c(){e=M("p"),r=k("This shows "),_(t.$$.fragment),o=k(" and "),_(i.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),a=A(),s=M("p"),u=k("License: "),_(f.$$.fragment)},m(p,m){$(p,e,m),D(e,r),v(t,e,null),D(e,o),v(i,e,null),D(e,l),$(p,a,m),$(p,s,m),D(s,u),v(f,s,null),c=!0},p(p,m){const y={};m&1&&(y.$$scope={dirty:m,ctx:p}),t.$set(y);const w={};m&1&&(w.$$scope={dirty:m,ctx:p}),i.$set(w);const L={};m&1&&(L.$$scope={dirty:m,ctx:p}),f.$set(L)},i(p){c||(d(t.$$.fragment,p),d(i.$$.fragment,p),d(f.$$.fragment,p),c=!0)},o(p){g(t.$$.fragment,p),g(i.$$.fragment,p),g(f.$$.fragment,p),c=!1},d(p){p&&(h(e),h(a),h(s)),b(t),b(i),b(f)}}}function Zc(n){let e,r;return e=new Ar({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Gc]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p(t,[o]){const i={};o&1&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}class Kc extends Z{constructor(e){super(),K(this,e,null,Zc,V,{})}}function qc(n){let e;return{c(){e=k("Vehicle counts")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Xc(n){let e;return{c(){e=k(`DfT road statistics
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Yc(n){let e;return{c(){e=k("methodology")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Jc(n){let e;return{c(){e=k("Open Government License")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Qc(n){let e,r,t,o,i,l,a,s,u,f,c,p,m;return t=new H({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Xc]},$$scope:{ctx:n}}}),i=new H({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Yc]},$$scope:{ctx:n}}}),p=new H({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Jc]},$$scope:{ctx:n}}}),{c(){e=M("p"),r=k("2022 AADF (annual average daily flow) data from "),_(t.$$.fragment),o=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),_(i.$$.fragment),l=k(" for details and caveats about the measurements."),a=A(),s=M("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,u=A(),f=M("p"),c=k("License: "),_(p.$$.fragment)},m(y,w){$(y,e,w),D(e,r),v(t,e,null),D(e,o),v(i,e,null),D(e,l),$(y,a,w),$(y,s,w),$(y,u,w),$(y,f,w),D(f,c),v(p,f,null),m=!0},p(y,w){const L={};w&64&&(L.$$scope={dirty:w,ctx:y}),t.$set(L);const T={};w&64&&(T.$$scope={dirty:w,ctx:y}),i.$set(T);const E={};w&64&&(E.$$scope={dirty:w,ctx:y}),p.$set(E)},i(y){m||(d(t.$$.fragment,y),d(i.$$.fragment,y),d(p.$$.fragment,y),m=!0)},o(y){g(t.$$.fragment,y),g(i.$$.fragment,y),g(p.$$.fragment,y),m=!1},d(y){y&&(h(e),h(a),h(s),h(u),h(f)),b(t),b(i),b(p)}}}function xc(n){let e,r,t;return r=new ce({props:{$$slots:{default:[Qc]},$$scope:{ctx:n}}}),{c(){e=M("span"),_(r.$$.fragment),ee(e,"slot","right")},m(o,i){$(o,e,i),v(r,e,null),t=!0},p(o,i){const l={};i&64&&(l.$$scope={dirty:i,ctx:o}),r.$set(l)},i(o){t||(d(r.$$.fragment,o),t=!0)},o(o){g(r.$$.fragment,o),t=!1},d(o){o&&h(e),b(r)}}}function Tn(n){let e,r;return e=new st({props:{colorScale:n[1],limits:n[2]}}),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p:re,i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function ep(n){let e,r,t,o,i,l;function a(f){n[3](f)}let s={id:ct,$$slots:{right:[xc],default:[qc]},$$scope:{ctx:n}};n[0]!==void 0&&(s.checked=n[0]),e=new fe({props:s}),G.push(()=>q(e,"checked",a));let u=n[0]&&Tn(n);return i=new ge({props:{layer:ct,tooltip:tp,show:n[0],clickable:!0}}),i.$on("click",rp),{c(){_(e.$$.fragment),t=A(),u&&u.c(),o=A(),_(i.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),u&&u.m(f,c),$(f,o,c),v(i,f,c),l=!0},p(f,[c]){const p={};c&64&&(p.$$scope={dirty:c,ctx:f}),!r&&c&1&&(r=!0,p.checked=f[0],X(()=>r=!1)),e.$set(p),f[0]?u?(u.p(f,c),c&1&&d(u,1)):(u=Tn(f),u.c(),d(u,1),u.m(o.parentNode,o)):u&&(le(),g(u,1,1,()=>{u=null}),ae());const m={};c&1&&(m.show=f[0]),i.$set(m)},i(f){l||(d(e.$$.fragment,f),d(u),d(i.$$.fragment,f),l=!0)},o(f){g(e.$$.fragment,f),g(u),g(i.$$.fragment,f),l=!1},d(f){f&&(h(t),h(o)),b(e,f),u&&u.d(f),b(i,f)}}}let ct="vehicle_counts";function tp(n){let e=`<h2>${n.properties.location}</h2>`;return e+=`<p>Total motor vehicles (2022 AADF): <b>${n.properties.motor_vehicles_2022.toLocaleString()}</b></p>`,e+=`<p>Total pedal cycles (2022 AADF): <b>${n.properties.pedal_cycles_2022.toLocaleString()}</b></p>`,e+=`<p>Count method: <b>${n.properties.method}</b></p>`,e}function rp(n){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${n.detail.properties.count_point}`,"_blank")}function np(n,e,r){let t;x(n,Ce,u=>r(4,t=u));let o=Y.sequential_low_to_high,i=[0,4e4,8e4,12e4,16e4,205e3],l=["","40k","80k","120k","160k",""];Ge(t,ct,`${de()}/v1/${ct}.pmtiles`),Pt(t,{id:ct,source:ct,sourceLayer:ct,color:et(["get","motor_vehicles_2022"],i,o),opacity:.9,radius:["interpolate",["linear"],["zoom"],1,2,8,3,13,15],strokeColor:"black",strokeWidth:.1});let a=!1;function s(u){a=u,r(0,a)}return[a,o,l,s]}class op extends Z{constructor(e){super(),K(this,e,np,ep,V,{})}}function ip(n){let e,r,t;return e=new De({props:{color:n[2]}}),{c(){_(e.$$.fragment),r=k(`
  Wards`)},m(o,i){v(e,o,i),$(o,r,i),t=!0},p:re,i(o){t||(d(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){o&&h(r),b(e,o)}}}function sp(n){let e;return{c(){e=k(`ONS Geography
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function lp(n){let e;return{c(){e=k(`Open Government License
        `)},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function ap(n){let e,r,t,o,i,l,a,s,u,f;return t=new H({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[sp]},$$scope:{ctx:n}}}),s=new H({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[lp]},$$scope:{ctx:n}}}),{c(){e=M("p"),r=k("Data from "),_(t.$$.fragment),o=k(", as of May 2023."),i=A(),l=M("p"),a=k("License: "),_(s.$$.fragment),u=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(c,p){$(c,e,p),D(e,r),v(t,e,null),D(e,o),$(c,i,p),$(c,l,p),D(l,a),v(s,l,null),D(l,u),f=!0},p(c,p){const m={};p&64&&(m.$$scope={dirty:p,ctx:c}),t.$set(m);const y={};p&64&&(y.$$scope={dirty:p,ctx:c}),s.$set(y)},i(c){f||(d(t.$$.fragment,c),d(s.$$.fragment,c),f=!0)},o(c){g(t.$$.fragment,c),g(s.$$.fragment,c),f=!1},d(c){c&&(h(e),h(i),h(l)),b(t),b(s)}}}function fp(n){let e,r,t;return r=new ce({props:{$$slots:{default:[ap]},$$scope:{ctx:n}}}),{c(){e=M("span"),_(r.$$.fragment),ee(e,"slot","right")},m(o,i){$(o,e,i),v(r,e,null),t=!0},p(o,i){const l={};i&64&&(l.$$scope={dirty:i,ctx:o}),r.$set(l)},i(o){t||(d(r.$$.fragment,o),t=!0)},o(o){g(r.$$.fragment,o),t=!1},d(o){o&&h(e),b(r)}}}function up(n){let e,r=n[5][0].properties.name+"",t;return{c(){e=M("p"),t=k(r)},m(o,i){$(o,e,i),D(e,t)},p(o,i){i&32&&r!==(r=o[5][0].properties.name+"")&&me(t,r)},d(o){o&&h(e)}}}function cp(n){let e,r;return e=new it({props:{openOn:"hover",$$slots:{default:[up,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p(t,o){const i={};o&96&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function pp(n){let e,r,t,o;return e=new Ot({props:{id:Lt,sourceLayer:Lt,paint:{"fill-color":n[2],"fill-opacity":_t(0,.5)},layout:{visibility:n[1]},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[cp]},$$scope:{ctx:n}}}),e.$on("click",$p),t=new At({props:{id:n[3],sourceLayer:Lt,paint:{"line-color":n[2],"line-width":2.5},layout:{visibility:n[1]}}}),{c(){_(e.$$.fragment),r=A(),_(t.$$.fragment)},m(i,l){v(e,i,l),$(i,r,l),v(t,i,l),o=!0},p(i,l){const a={};l&2&&(a.layout={visibility:i[1]}),l&64&&(a.$$scope={dirty:l,ctx:i}),e.$set(a);const s={};l&2&&(s.layout={visibility:i[1]}),t.$set(s)},i(i){o||(d(e.$$.fragment,i),d(t.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),o=!1},d(i){i&&h(r),b(e,i),b(t,i)}}}function mp(n){let e,r,t,o,i;function l(s){n[4](s)}let a={id:Lt,$$slots:{right:[fp],default:[ip]},$$scope:{ctx:n}};return n[0]!==void 0&&(a.checked=n[0]),e=new fe({props:a}),G.push(()=>q(e,"checked",l)),o=new Ht({props:{url:`pmtiles://${de()}/v1/${Lt}.pmtiles`,$$slots:{default:[pp]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment),t=A(),_(o.$$.fragment)},m(s,u){v(e,s,u),$(s,t,u),v(o,s,u),i=!0},p(s,[u]){const f={};u&64&&(f.$$scope={dirty:u,ctx:s}),!r&&u&1&&(r=!0,f.checked=s[0],X(()=>r=!1)),e.$set(f);const c={};u&66&&(c.$$scope={dirty:u,ctx:s}),o.$set(c)},i(s){i||(d(e.$$.fragment,s),d(o.$$.fragment,s),i=!0)},o(s){g(e.$$.fragment,s),g(o.$$.fragment,s),i=!1},d(s){s&&h(t),b(e,s),b(o,s)}}}let Lt="wards";function $p(n){let e=encodeURIComponent(n.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function hp(n,e,r){let t,o=Y.wards,i=`${Lt}-outline`,l=!1;function a(s){l=s,r(0,l)}return n.$$.update=()=>{n.$$.dirty&1&&r(1,t=l?"visible":"none")},[l,t,o,i,a]}class dp extends Z{constructor(e){super(),K(this,e,hp,mp,V,{})}}function gp(n){let e,r,t,o,i,l,a,s;return e=new Hc({}),t=new Yf({}),i=new Kc({}),a=new vc({}),{c(){_(e.$$.fragment),r=A(),_(t.$$.fragment),o=A(),_(i.$$.fragment),l=A(),_(a.$$.fragment)},m(u,f){v(e,u,f),$(u,r,f),v(t,u,f),$(u,o,f),v(i,u,f),$(u,l,f),v(a,u,f),s=!0},i(u){s||(d(e.$$.fragment,u),d(t.$$.fragment,u),d(i.$$.fragment,u),d(a.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),g(t.$$.fragment,u),g(i.$$.fragment,u),g(a.$$.fragment,u),s=!1},d(u){u&&(h(r),h(o),h(l)),b(e,u),b(t,u),b(i,u),b(a,u)}}}function _p(n){let e,r;return e=new Bt({props:{small:!0,$$slots:{default:[gp]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p(t,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function vp(n){let e,r,t,o,i,l,a,s,u,f;return e=new Bf({}),t=new Uu({}),i=new Al({}),a=new Ba({}),u=new Oa({}),{c(){_(e.$$.fragment),r=A(),_(t.$$.fragment),o=A(),_(i.$$.fragment),l=A(),_(a.$$.fragment),s=A(),_(u.$$.fragment)},m(c,p){v(e,c,p),$(c,r,p),v(t,c,p),$(c,o,p),v(i,c,p),$(c,l,p),v(a,c,p),$(c,s,p),v(u,c,p),f=!0},i(c){f||(d(e.$$.fragment,c),d(t.$$.fragment,c),d(i.$$.fragment,c),d(a.$$.fragment,c),d(u.$$.fragment,c),f=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(i.$$.fragment,c),g(a.$$.fragment,c),g(u.$$.fragment,c),f=!1},d(c){c&&(h(r),h(o),h(l),h(s)),b(e,c),b(t,c),b(i,c),b(a,c),b(u,c)}}}function bp(n){let e,r;return e=new Bt({props:{small:!0,$$slots:{default:[vp]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p(t,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function yp(n){let e,r,t,o,i,l,a,s,u,f;return e=new ec({}),t=new dp({}),i=new ca({}),a=new _u({}),u=new Mu({}),{c(){_(e.$$.fragment),r=A(),_(t.$$.fragment),o=A(),_(i.$$.fragment),l=A(),_(a.$$.fragment),s=A(),_(u.$$.fragment)},m(c,p){v(e,c,p),$(c,r,p),v(t,c,p),$(c,o,p),v(i,c,p),$(c,l,p),v(a,c,p),$(c,s,p),v(u,c,p),f=!0},i(c){f||(d(e.$$.fragment,c),d(t.$$.fragment,c),d(i.$$.fragment,c),d(a.$$.fragment,c),d(u.$$.fragment,c),f=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(i.$$.fragment,c),g(a.$$.fragment,c),g(u.$$.fragment,c),f=!1},d(c){c&&(h(r),h(o),h(l),h(s)),b(e,c),b(t,c),b(i,c),b(a,c),b(u,c)}}}function wp(n){let e,r;return e=new Bt({props:{small:!0,$$slots:{default:[yp]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p(t,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function kp(n){let e,r,t,o;return e=new xl({}),t=new su({}),{c(){_(e.$$.fragment),r=A(),_(t.$$.fragment)},m(i,l){v(e,i,l),$(i,r,l),v(t,i,l),o=!0},i(i){o||(d(e.$$.fragment,i),d(t.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),o=!1},d(i){i&&h(r),b(e,i),b(t,i)}}}function Sp(n){let e,r,t,o;return e=new Fc({}),t=new Oc({}),{c(){_(e.$$.fragment),r=A(),_(t.$$.fragment)},m(i,l){v(e,i,l),$(i,r,l),v(t,i,l),o=!0},i(i){o||(d(e.$$.fragment,i),d(t.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),o=!1},d(i){i&&h(r),b(e,i),b(t,i)}}}function Cp(n){let e,r,t,o,i=wr()=="Private (development)",l,a;e=new op({}),t=new ac({});let s=i&&Sp();return{c(){_(e.$$.fragment),r=A(),_(t.$$.fragment),o=A(),s&&s.c(),l=ze()},m(u,f){v(e,u,f),$(u,r,f),v(t,u,f),$(u,o,f),s&&s.m(u,f),$(u,l,f),a=!0},p:re,i(u){a||(d(e.$$.fragment,u),d(t.$$.fragment,u),d(s),a=!0)},o(u){g(e.$$.fragment,u),g(t.$$.fragment,u),g(s),a=!1},d(u){u&&(h(r),h(o),h(l)),b(e,u),b(t,u),s&&s.d(u)}}}function Lp(n){let e,r,t,o,i,l,a,s,u,f,c,p,m,y,w,L,T;e=new va({}),t=new Ke({props:{label:"Trip generators",$$slots:{default:[_p]},$$scope:{ctx:n}}}),i=new Ke({props:{label:"Existing infrastructure",$$slots:{default:[bp]},$$scope:{ctx:n}}}),a=new Ke({props:{label:"Boundaries",$$slots:{default:[wp]},$$scope:{ctx:n}}}),u=new Ke({props:{label:"Census",$$slots:{default:[kp]},$$scope:{ctx:n}}}),c=new Ke({props:{label:"Other",$$slots:{default:[Cp]},$$scope:{ctx:n}}});function E(C){n[5](C)}let B={displayEnableButton:!0};return n[2]!==void 0&&(B.isInactive=n[2]),m=new Mo({props:B}),n[4](m),G.push(()=>q(m,"isInactive",E)),L=new To({props:{style:n[0]}}),{c(){_(e.$$.fragment),r=A(),_(t.$$.fragment),o=A(),_(i.$$.fragment),l=A(),_(a.$$.fragment),s=A(),_(u.$$.fragment),f=A(),_(c.$$.fragment),p=A(),_(m.$$.fragment),w=A(),_(L.$$.fragment)},m(C,I){v(e,C,I),$(C,r,I),v(t,C,I),$(C,o,I),v(i,C,I),$(C,l,I),v(a,C,I),$(C,s,I),v(u,C,I),$(C,f,I),v(c,C,I),$(C,p,I),v(m,C,I),$(C,w,I),v(L,C,I),T=!0},p(C,I){const j={};I&64&&(j.$$scope={dirty:I,ctx:C}),t.$set(j);const P={};I&64&&(P.$$scope={dirty:I,ctx:C}),i.$set(P);const N={};I&64&&(N.$$scope={dirty:I,ctx:C}),a.$set(N);const O={};I&64&&(O.$$scope={dirty:I,ctx:C}),u.$set(O);const S={};I&64&&(S.$$scope={dirty:I,ctx:C}),c.$set(S);const z={};!y&&I&4&&(y=!0,z.isInactive=C[2],X(()=>y=!1)),m.$set(z);const U={};I&1&&(U.style=C[0]),L.$set(U)},i(C){T||(d(e.$$.fragment,C),d(t.$$.fragment,C),d(i.$$.fragment,C),d(a.$$.fragment,C),d(u.$$.fragment,C),d(c.$$.fragment,C),d(m.$$.fragment,C),d(L.$$.fragment,C),T=!0)},o(C){g(e.$$.fragment,C),g(t.$$.fragment,C),g(i.$$.fragment,C),g(a.$$.fragment,C),g(u.$$.fragment,C),g(c.$$.fragment,C),g(m.$$.fragment,C),g(L.$$.fragment,C),T=!1},d(C){C&&(h(r),h(o),h(l),h(s),h(f),h(p),h(w)),b(e,C),b(t,C),b(i,C),b(a,C),b(u,C),b(c,C),n[4](null),b(m,C),b(L,C)}}}function Tp(n){let e,r,t,o;return e=new Ke({props:{label:"Layers",open:!0,$$slots:{default:[Lp]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(i,l){v(e,i,l),r=!0,t||(o=kr(window,"keydown",n[3]),t=!0)},p(i,[l]){const a={};l&71&&(a.$$scope={dirty:l,ctx:i}),e.$set(a)},i(i){r||(d(e.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),r=!1},d(i){b(e,i),t=!1,o()}}}function Op(n,e,r){let t;x(n,Er,u=>r(2,t=u));let{style:o}=e,i;function l(u){!t&&u.key=="Escape"&&(i.disableStreetView(),u.preventDefault())}function a(u){G[u?"unshift":"push"](()=>{i=u,r(1,i)})}function s(u){t=u,Er.set(t)}return n.$$set=u=>{"style"in u&&r(0,o=u.style)},[o,i,t,l,a,s]}class Ap extends Z{constructor(e){super(),K(this,e,Op,Tp,V,{style:0})}}function Ip(n,e,r){let{loadFile:t}=e;return er(async()=>{let i=await(await fetch(`${Sr()}/v1/random_schemes.geojson`)).text();t(i)}),n.$$set=o=>{"loadFile"in o&&r(0,t=o.loadFile)},[t]}class Dp extends Z{constructor(e){super(),K(this,e,Ip,null,V,{loadFile:0})}}function Ep(n){let e;return{c(){e=k("Show on map")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Mp(n){let e;return{c(){e=k("Edit scheme locally")},m(r,t){$(r,e,t)},d(r){r&&h(e)}}}function Pp(n){let e,r,t=n[0].authority_or_region+"",o,i,l,a,s=n[0].capital_scheme_id+"",u,f,c,p,m=n[0].funding_programme+"",y,w,L,T,E,B,C;return T=new cr({props:{$$slots:{default:[Ep]},$$scope:{ctx:n}}}),T.$on("click",n[3]),B=new cr({props:{disabled:n[1],title:n[2],$$slots:{default:[Mp]},$$scope:{ctx:n}}}),B.$on("click",n[4]),{c(){e=M("p"),r=k("Authority or region: "),o=k(t),i=A(),l=M("p"),a=k("Capital scheme ID: "),u=k(s),f=A(),c=M("p"),p=k("Funding programme: "),y=k(m),w=A(),L=M("div"),_(T.$$.fragment),E=A(),_(B.$$.fragment),ee(L,"class","govuk-button-group")},m(I,j){$(I,e,j),D(e,r),D(e,o),$(I,i,j),$(I,l,j),D(l,a),D(l,u),$(I,f,j),$(I,c,j),D(c,p),D(c,y),$(I,w,j),$(I,L,j),v(T,L,null),D(L,E),v(B,L,null),C=!0},p(I,j){(!C||j&1)&&t!==(t=I[0].authority_or_region+"")&&me(o,t),(!C||j&1)&&s!==(s=I[0].capital_scheme_id+"")&&me(u,s),(!C||j&1)&&m!==(m=I[0].funding_programme+"")&&me(y,m);const P={};j&256&&(P.$$scope={dirty:j,ctx:I}),T.$set(P);const N={};j&256&&(N.$$scope={dirty:j,ctx:I}),B.$set(N)},i(I){C||(d(T.$$.fragment,I),d(B.$$.fragment,I),C=!0)},o(I){g(T.$$.fragment,I),g(B.$$.fragment,I),C=!1},d(I){I&&(h(e),h(i),h(l),h(f),h(c),h(w),h(L)),b(T),b(B)}}}function Np(n){let e,r;return e=new Ke({props:{label:`${n[0].scheme_reference}: ${n[0].num_features} features`,$$slots:{default:[Pp]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p(t,[o]){const i={};o&1&&(i.label=`${t[0].scheme_reference}: ${t[0].num_features} features`),o&257&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function Fp(n,e,r){let t,o;x(n,kt,c=>r(6,t=c)),x(n,Ce,c=>r(7,o=c));let{scheme:i}=e,{authorityNames:l}=e,a=!l.has(i.authority_or_region),s=a?"This scheme doesn't have an authority specified correctly, so you can't edit this scheme. We're working to fix this problem.":void 0;function u(){let c={type:"FeatureCollection",features:t.features.filter(p=>p.properties.scheme_reference==i.scheme_reference)};o==null||o.fitBounds(wo(c),{padding:20,animate:!1})}function f(){let c={type:"FeatureCollection",features:t.features.filter(m=>m.properties.scheme_reference==i.scheme_reference)},p=i.authority_or_region;window.localStorage.setItem(p,JSON.stringify(c)),window.open(`scheme.html?authority=${i.authority_or_region}`,"_blank")}return n.$$set=c=>{"scheme"in c&&r(0,i=c.scheme),"authorityNames"in c&&r(5,l=c.authorityNames)},[i,a,s,u,f,l]}class Bp extends Z{constructor(e){super(),K(this,e,Fp,Np,V,{scheme:0,authorityNames:5})}}const jp=["Adur","Allerdale","Amber Valley","Arun","Ashfield","Ashford","Babergh","Barking and Dagenham","Barnet","Barnsley","Barrow-in-Furness","Basildon","Basingstoke and Deane","Bassetlaw","Bath and North East Somerset","Bedford","Bexley","Birmingham","Blaby","Blackburn with Darwen","Blackpool","Bolsover","Bolton","Boston","Bournemouth, Christchurch and Poole","Bracknell Forest","Bradford","Braintree","Breckland","Brent","Brentwood","Brighton and Hove","Bristol, City of","Broadland","Bromley","Bromsgrove","Broxbourne","Broxtowe","Buckinghamshire","Burnley","Bury","Calderdale","Cambridge","Cambridgeshire and Peterborough Combined Authority","Camden","Cannock Chase","Canterbury","Carlisle","Castle Point","Central Bedfordshire","Charnwood","Chelmsford","Cheltenham","Cherwell","Cheshire East","Cheshire West and Chester","Chesterfield","Chichester","Chorley","City of London","Colchester","Copeland","Cornwall","Cotswold","County Durham","Coventry","Craven","Crawley","Croydon","Cumbria","Dacorum","Darlington","Dartford","Derby","Derbyshire","Derbyshire Dales","Devon","Doncaster","Dorset","Dover","Dudley","Ealing","Eastbourne","East Cambridgeshire","East Devon","East Hampshire","East Hertfordshire","Eastleigh","East Lindsey","East Riding of Yorkshire","East Staffordshire","East Suffolk","East Sussex","Eden","Elmbridge","Enfield","Epping Forest","Epsom and Ewell","Erewash","Essex","Exeter","Fareham","Fenland","Folkestone and Hythe","Forest of Dean","Fylde","Gateshead","Gedling","Gloucester","Gloucestershire","Gosport","Gravesham","Greater London","Greater Manchester Combined Authority","Great Yarmouth","Greenwich","Guildford","Hackney","Halton","Hambleton","Hammersmith and Fulham","Hampshire","Harborough","Haringey","Harlow","Harrogate","Harrow","Hart","Hartlepool","Hastings","Havant","Havering","Herefordshire","Herefordshire, County of","Hertfordshire","Hertsmere","High Peak","Hillingdon","Hinckley and Bosworth","Horsham","Hounslow","Huntingdonshire","Hyndburn","Ipswich","Isle of Wight","Isles of Scilly","Islington","Kensington and Chelsea","Kent","King's Lynn and West Norfolk","Kingston upon Hull","Kingston upon Hull, City of","Kingston upon Thames","Kirklees","Knowsley","Lambeth","Lancashire","Lancaster","Leeds","Leicester","Leicestershire","Lewes","Lewisham","Lichfield","Lincoln","Lincolnshire","Liverpool","Liverpool City Region Combined Authority","Luton","Maidstone","Maldon","Malvern Hills","Manchester","Mansfield","Medway","Melton","Mendip","Merton","Mid Devon","Middlesbrough","Mid Suffolk","Mid Sussex","Milton Keynes","Mole Valley","Newark and Sherwood","Newcastle-under-Lyme","Newcastle upon Tyne","New Forest","Newham","Norfolk","North Devon","North East Derbyshire","North East Joint Transport Committee","North East Lincolnshire","North Hertfordshire","North Kesteven","North Lincolnshire","North Norfolk","North Northamptonshire","North Somerset","North Tyneside","Northumberland","North Warwickshire","North West Leicestershire","North Yorkshire","Norwich","Nottingham","Nottinghamshire","Nuneaton and Bedworth","Oadby and Wigston","Oldham","Oxford","Oxfordshire","Pendle","Peterborough","Plymouth","Portsmouth","Preston","Reading","Redbridge","Redcar and Cleveland","Redditch","Reigate and Banstead","Ribble Valley","Richmondshire","Richmond upon Thames","Rochdale","Rochford","Rossendale","Rother","Rotherham","Rugby","Runnymede","Rushcliffe","Rushmoor","Rutland","Ryedale","Salford","Sandwell","Scarborough","Sedgemoor","Sefton","Selby","Sevenoaks","Sheffield","Sheffield City Region Combined Authority","Shropshire","Slough","Solihull","Somerset","Somerset West and Taunton","Southampton","South Cambridgeshire","South Derbyshire","Southend-on-Sea","South Gloucestershire","South Hams","South Holland","South Kesteven","South Lakeland","South Norfolk","South Oxfordshire","South Ribble","South Somerset","South Staffordshire","South Tyneside","Southwark","Spelthorne","Stafford","Staffordshire","Staffordshire Moorlands","St Albans","Stevenage","St. Helens","Stockport","Stockton-on-Tees","Stoke-on-Trent","Stratford-on-Avon","Stroud","Suffolk","Sunderland","Surrey","Surrey Heath","Sutton","Swale","Swindon","Tameside","Tamworth","Tandridge","Tees Valley Combined Authority","Teignbridge","Telford and Wrekin","Tendring","Test Valley","Tewkesbury","Thanet","Three Rivers","Thurrock","Tonbridge and Malling","Torbay","Torridge","Tower Hamlets","Trafford","Tunbridge Wells","Uttlesford","Vale of White Horse","Wakefield","Walsall","Waltham Forest","Wandsworth","Warrington","Warwick","Warwickshire","Watford","Waverley","Wealden","Welwyn Hatfield","West Berkshire","West Devon","West Lancashire","West Lindsey","West Midlands ITA","Westminster","West Northamptonshire","West of England Combined Authority","West Oxfordshire","West Suffolk","West Sussex","West Yorkshire Combined Authority","Wigan","Wiltshire","Winchester","Windsor and Maidenhead","Wirral","Woking","Wokingham","Wolverhampton","Worcester","Worcestershire","Worthing","Wychavon","Wyre","Wyre Forest","York"];function On(n,e,r){const t=n.slice();return t[13]=e[r],t}function Rp(n){let e,r;return e=new Dp({props:{loadFile:n[7]}}),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p:re,i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function An(n){let e,r,t,o;function i(s){n[9](s)}function l(s){n[10](s)}let a={schemes:n[1]};return n[2]!==void 0&&(a.schemesToBeShown=n[2]),n[3]!==void 0&&(a.filterText=n[3]),e=new bl({props:a}),G.push(()=>q(e,"schemesToBeShown",i)),G.push(()=>q(e,"filterText",l)),{c(){_(e.$$.fragment)},m(s,u){v(e,s,u),o=!0},p(s,u){const f={};u&2&&(f.schemes=s[1]),!r&&u&4&&(r=!0,f.schemesToBeShown=s[2],X(()=>r=!1)),!t&&u&8&&(t=!0,f.filterText=s[3],X(()=>t=!1)),e.$set(f)},i(s){o||(d(e.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),o=!1},d(s){b(e,s)}}}function In(n){let e,r;return e=new Bp({props:{scheme:n[13],authorityNames:n[5]}}),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p(t,o){const i={};o&2&&(i.scheme=t[13]),e.$set(i)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function Dn(n){let e=n[2].has(n[13].scheme_reference),r,t,o=e&&In(n);return{c(){o&&o.c(),r=ze()},m(i,l){o&&o.m(i,l),$(i,r,l),t=!0},p(i,l){l&6&&(e=i[2].has(i[13].scheme_reference)),e?o?(o.p(i,l),l&6&&d(o,1)):(o=In(i),o.c(),d(o,1),o.m(r.parentNode,r)):o&&(le(),g(o,1,1,()=>{o=null}),ae())},i(i){t||(d(o),t=!0)},o(i){g(o),t=!1},d(i){i&&h(r),o&&o.d(i)}}}function zp(n){let e,r,t,o,i,l,a,s,u,f,c=wr()=="Private (development)",p,m,y,w,L,T,E,B;i=new Oo({props:{boundaryGeojson:n[4]}}),a=new li({}),u=new ko({});let C=c&&Rp(n);m=new Fo({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:n[7]}}),w=new Bn({props:{errorMessage:n[0]}});let I=n[1].size>0&&An(n),j=xe(n[1].values()),P=[];for(let O=0;O<j.length;O+=1)P[O]=Dn(On(n,j,O));const N=O=>g(P[O],1,1,()=>{P[O]=null});return{c(){e=M("div"),r=M("div"),t=M("h1"),t.textContent="Browse schemes",o=A(),_(i.$$.fragment),l=A(),_(a.$$.fragment),s=A(),_(u.$$.fragment),f=A(),C&&C.c(),p=A(),_(m.$$.fragment),y=A(),_(w.$$.fragment),L=A(),I&&I.c(),T=A(),E=M("ul");for(let O=0;O<P.length;O+=1)P[O].c();qe(r,"display","flex"),qe(r,"justify-content","space-between"),ee(e,"slot","sidebar"),ee(e,"class","govuk-prose")},m(O,S){$(O,e,S),D(e,r),D(r,t),D(r,o),v(i,r,null),D(e,l),v(a,e,null),D(e,s),v(u,e,null),D(e,f),C&&C.m(e,null),D(e,p),v(m,e,null),D(e,y),v(w,e,null),D(e,L),I&&I.m(e,null),D(e,T),D(e,E);for(let z=0;z<P.length;z+=1)P[z]&&P[z].m(E,null);B=!0},p(O,S){const z={};S&16&&(z.boundaryGeojson=O[4]),i.$set(z),c&&C.p(O,S);const U={};if(S&1&&(U.errorMessage=O[0]),w.$set(U),O[1].size>0?I?(I.p(O,S),S&2&&d(I,1)):(I=An(O),I.c(),d(I,1),I.m(e,T)):I&&(le(),g(I,1,1,()=>{I=null}),ae()),S&38){j=xe(O[1].values());let W;for(W=0;W<j.length;W+=1){const te=On(O,j,W);P[W]?(P[W].p(te,S),d(P[W],1)):(P[W]=Dn(te),P[W].c(),d(P[W],1),P[W].m(E,null))}for(le(),W=j.length;W<P.length;W+=1)N(W);ae()}},i(O){if(!B){d(i.$$.fragment,O),d(a.$$.fragment,O),d(u.$$.fragment,O),d(C),d(m.$$.fragment,O),d(w.$$.fragment,O),d(I);for(let S=0;S<j.length;S+=1)d(P[S]);B=!0}},o(O){g(i.$$.fragment,O),g(a.$$.fragment,O),g(u.$$.fragment,O),g(C),g(m.$$.fragment,O),g(w.$$.fragment,O),g(I),P=P.filter(Boolean);for(let S=0;S<P.length;S+=1)g(P[S]);B=!1},d(O){O&&h(e),b(i),b(a),b(u),C&&C.d(),b(m),b(w),I&&I.d(),Gt(P,O)}}}function Hp(n){let e,r,t,o,i,l,a,s,u,f,c;return e=new Ao({props:{colorInterventions:Rn("v1")}}),t=new ge({props:{layer:"interventions-points",tooltip:n[8],clickable:!1}}),i=new ge({props:{layer:"interventions-lines",tooltip:n[8],clickable:!1}}),a=new ge({props:{layer:"interventions-polygons",tooltip:n[8],clickable:!1}}),f=new Ap({props:{style:n[6]}}),{c(){_(e.$$.fragment),r=A(),_(t.$$.fragment),o=A(),_(i.$$.fragment),l=A(),_(a.$$.fragment),s=A(),u=M("div"),_(f.$$.fragment),ee(u,"class","top-right svelte-u44ed2")},m(p,m){v(e,p,m),$(p,r,m),v(t,p,m),$(p,o,m),v(i,p,m),$(p,l,m),v(a,p,m),$(p,s,m),$(p,u,m),v(f,u,null),c=!0},p:re,i(p){c||(d(e.$$.fragment,p),d(t.$$.fragment,p),d(i.$$.fragment,p),d(a.$$.fragment,p),d(f.$$.fragment,p),c=!0)},o(p){g(e.$$.fragment,p),g(t.$$.fragment,p),g(i.$$.fragment,p),g(a.$$.fragment,p),g(f.$$.fragment,p),c=!1},d(p){p&&(h(r),h(o),h(l),h(s),h(u)),b(e,p),b(t,p),b(i,p),b(a,p),b(f)}}}function Up(n){let e,r,t;return r=new No({props:{style:n[6],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Hp]},$$scope:{ctx:n}}}),{c(){e=M("div"),_(r.$$.fragment),ee(e,"slot","main")},m(o,i){$(o,e,i),v(r,e,null),t=!0},p(o,i){const l={};i&65536&&(l.$$scope={dirty:i,ctx:o}),r.$set(l)},i(o){t||(d(r.$$.fragment,o),t=!0)},o(o){g(r.$$.fragment,o),t=!1},d(o){o&&h(e),b(r)}}}function Wp(n){let e,r;return e=new Po({props:{$$slots:{main:[Up],sidebar:[zp]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){v(e,t,o),r=!0},p(t,[o]){const i={};o&65567&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function Vp(n,e,r){let t;x(n,kt,L=>r(4,t=L));let o=new Set(jp);er(()=>{So()});let l=new URLSearchParams(window.location.search).get("style")||"dataviz",a="",s=new Map,u=new Set,f="";xt(()=>{kt.set(Fn())});function c(L){try{let T=JSON.parse(L);r(1,s=al(T)),kt.set(T),r(0,a="")}catch(T){r(0,a=`The file you loaded is broken: ${T}`)}}function p(L){let T=L.properties;var E='<div style="max-width: 30vw;">';return E+=`<h2>${m(T.name)} (${T.intervention_type})</h2>`,E+=`<p>Scheme reference: ${T.scheme_reference}</p>`,T.length_meters&&(E+=`<p>Length: ${Co(T.length_meters)}</p>`),T.description&&(E+=`<p>${m(T.description)}</p>`),E+="</div>",E}function m(L){return f?L.replace(new RegExp(f,"gi"),T=>`<mark>${T}</mark>`):L}function y(L){u=L,r(2,u)}function w(L){f=L,r(3,f)}return[a,s,u,f,t,o,l,c,p,y,w]}class Gp extends Z{constructor(e){super(),K(this,e,Vp,Wp,V,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new Gp({target:document.getElementById("app")});
