import{S as U,i as G,s as z,M as Xn,b as q,c as Z,e as E,d as O,g as _,av as Kn,h as K,j as d,k as P,m as b,w as ht,l as Y,t as m,n as h,p as g,q as v,aH as He,aI as Re,aJ as We,aK as ze,a2 as $e,y as re,o as ne,H as Zn,N as Q,a5 as _t,aQ as it,x as ee,aR as fe,aS as Ye,aT as Yn,aU as Jn,aV as Qn,r as bt,u as S,f as ar,am as xn,C as Se,ao as Sn,T as mt,F as Cn,a as St,v as gr,I as x,B as xt,aA as eo,ax as Fe,aL as to,aM as ro,ad as no,_ as fr,P as oo,Y as ft,aP as X,an as Be,ay as Et,aW as vt,Q as lo,G as wt,aX as Je,aY as ue,R as Tn,aZ as ur,a_ as so,Z as hr,E as Ln,a$ as _r,D as io,aO as br,L as ao,z as fo,aE as uo}from"./index-f49a6f3b.js";import{g as yt,u as co,e as On,m as po,f as Nt,C as Ie,b as Lt,d as ie,c as mo,a as $o,B as go,S as ho,L as _o,M as bo}from"./StreetViewController-ff292adf.js";import{L as vo,h as vr,f as An,l as wo,C as be,Z as yo,I as ko}from"./index-eacc782b.js";import{I as ke}from"./InteractiveLayer-c941219d.js";import{F as So}from"./FileInput-5117677e.js";const Co="/atip/svelte_maplibre_v2/assets/help-d011708a.svg";function To(n){let e,r;const t=n[1].default,o=He(t,n,n[4],null);return{c(){e=E("div"),o&&o.c(),K(e,"class","govuk-prose")},m(l,i){d(l,e,i),o&&o.m(e,null),r=!0},p(l,i){o&&o.p&&(!r||i&16)&&Re(o,t,l,l[4],r?ze(t,l[4],i,null):We(l[4]),null)},i(l){r||(m(o,l),r=!0)},o(l){h(o,l),r=!1},d(l){l&&g(e),o&&o.d(l)}}}function Lo(n){let e,r,t,o,l,i,a,s,f;function u(p){n[3](p)}let c={title:"Help",$$slots:{default:[To]},$$scope:{ctx:n}};return n[0]!==void 0&&(c.open=n[0]),l=new Xn({props:c}),q.push(()=>Z(l,"open",u)),{c(){e=E("button"),r=E("img"),o=O(),_(l.$$.fragment),Kn(r.src,t=Co)||K(r,"src",t),K(r,"title","Help"),K(r,"alt","Help"),K(e,"class","svelte-7d9d1l")},m(p,$){d(p,e,$),P(e,r),d(p,o,$),b(l,p,$),a=!0,s||(f=ht(e,"click",n[2]),s=!0)},p(p,[$]){const k={};$&16&&(k.$$scope={dirty:$,ctx:p}),!i&&$&1&&(i=!0,k.open=p[0],Y(()=>i=!1)),l.$set(k)},i(p){a||(m(l.$$.fragment,p),a=!0)},o(p){h(l.$$.fragment,p),a=!1},d(p){p&&(g(e),g(o)),v(l,p),s=!1,f()}}}function Oo(n,e,r){let{$$slots:t={},$$scope:o}=e,l=!1;const i=()=>r(0,l=!0);function a(s){l=s,r(0,l)}return n.$$set=s=>{"$$scope"in s&&r(4,o=s.$$scope)},[l,t,i,a,o]}class ae extends U{constructor(e){super(),G(this,e,Oo,Lo,z,{})}}function wr(n){let e;return r=>{if(r)for(let t in r){let o=e==null?void 0:e[t],l=r[t];o!==l&&n(t,l,o)}else if(e)for(let t in e)n(t,void 0,e[t]);e=r}}function Ao(n,...e){let r=[n];for(let t of e)if(t)Array.isArray(t)&&t[0]===n?r.push(...t.slice(1)):r.push(t);else continue;if(r.length!==1)return r.length===2?r[1]:r}function Io(n){return n===!0?["has","point_count"]:n===!1?["!",["has","point_count"]]:void 0}function Qe(n,e){return["case",["boolean",["feature-state","hover"],!1],e,n]}var Dt=Po;function Po(n){var e,r,t;if(n){if(Array.isArray(n)){for(e=[],r=n.length,t=0;t<r;t++){var o=n[t];o!=null&&e.push(o)}return e}if(typeof n=="object"){e={};var l=Object.keys(n);for(r=l.length,t=0;t<r;t++){var i=l[t],a=n[i];a!=null&&(e[i]=a)}return e}}}function yr(n){let e=n[0],r,t,o=kr(n);return{c(){o.c(),r=$e()},m(l,i){o.m(l,i),d(l,r,i),t=!0},p(l,i){i[0]&1&&z(e,e=l[0])?(re(),h(o,1,1,ee),ne(),o=kr(l),o.c(),m(o,1),o.m(r.parentNode,r)):o.p(l,i)},i(l){t||(m(o),t=!0)},o(l){h(o),t=!1},d(l){l&&g(r),o.d(l)}}}function kr(n){let e;const r=n[35].default,t=He(r,n,n[34],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l[1]&8)&&Re(t,r,o,o[34],e?ze(r,o[34],l,null):We(o[34]),null)},i(o){e||(m(t,o),e=!0)},o(o){h(t,o),e=!1},d(o){t&&t.d(o)}}}function Mo(n){let e,r,t=n[0]&&yr(n);return{c(){t&&t.c(),e=$e()},m(o,l){t&&t.m(o,l),d(o,e,l),r=!0},p(o,l){o[0]?t?(t.p(o,l),l[0]&1&&m(t,1)):(t=yr(o),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(re(),h(t,1,1,()=>{t=null}),ne())},i(o){r||(m(t),r=!0)},o(o){h(t),r=!1},d(o){o&&g(e),t&&t.d(o)}}}function Eo(n,e,r){let t,o,l,i,a,s,f,u,c,p,$,k,{$$slots:y={},$$scope:C}=e,{id:w=yt("layer")}=e,{source:I=void 0}=e,{sourceLayer:D=void 0}=e,{beforeId:A=void 0}=e,{beforeLayerType:N=void 0}=e,{type:F}=e,{paint:L=void 0}=e,{layout:M=void 0}=e,{filter:j=void 0}=e,{applyToClusters:T=void 0}=e,{minzoom:H=void 0}=e,{maxzoom:W=void 0}=e,{manageHoverState:V=!1}=e,{hovered:le=null}=e,{hoverCursor:Me=void 0}=e,{eventsIfTopMost:oe=!1}=e;const ce=Zn(),{map:ve,source:de,self:ge,minzoom:Ve,maxzoom:Te,eventTopMost:Ee}=co();Q(n,ve,R=>r(30,c=R)),Q(n,de,R=>r(31,p=R)),Q(n,ge,R=>r(0,u=R)),Q(n,Ve,R=>r(33,k=R)),Q(n,Te,R=>r(32,$=R)),_t(()=>{u&&c&&(c==null||c.removeLayer(u))});let pe;return n.$$set=R=>{"id"in R&&r(7,w=R.id),"source"in R&&r(8,I=R.source),"sourceLayer"in R&&r(9,D=R.sourceLayer),"beforeId"in R&&r(10,A=R.beforeId),"beforeLayerType"in R&&r(11,N=R.beforeLayerType),"type"in R&&r(12,F=R.type),"paint"in R&&r(13,L=R.paint),"layout"in R&&r(14,M=R.layout),"filter"in R&&r(15,j=R.filter),"applyToClusters"in R&&r(16,T=R.applyToClusters),"minzoom"in R&&r(17,H=R.minzoom),"maxzoom"in R&&r(18,W=R.maxzoom),"manageHoverState"in R&&r(19,V=R.manageHoverState),"hovered"in R&&r(6,le=R.hovered),"hoverCursor"in R&&r(20,Me=R.hoverCursor),"eventsIfTopMost"in R&&r(21,oe=R.eventsIfTopMost),"$$scope"in R&&r(34,C=R.$$scope)},n.$$.update=()=>{if(n.$$.dirty[0]&65536&&r(29,t=Io(T)),n.$$.dirty[0]&536903680&&r(28,o=Ao("all",t,j)),n.$$.dirty[0]&131072|n.$$.dirty[1]&4&&r(24,l=H??k),n.$$.dirty[0]&262144|n.$$.dirty[1]&2&&r(23,i=W??$),n.$$.dirty[0]&256|n.$$.dirty[1]&1&&r(27,a=I||p),n.$$.dirty[0]&1509457537&&c&&u!==w&&a){let R=function(se){var qe,Xe;if(!u||!c||oe&&Ee(se)!==u)return;let B=se.features??[],we=(Xe=(qe=B[0])==null?void 0:qe.properties)==null?void 0:Xe.cluster_id,ye={event:se,map:c,clusterId:we,layer:u,source:a,features:B};ce(se.type,ye)},Le=A;if(!A&&N){let se=c.getStyle().layers,B=typeof N=="function"?N:ye=>ye.type===N,we=se==null?void 0:se.find(B);we&&(Le=we.id)}it(ge,u=w,u),c.addLayer(Dt({id:u,type:F,source:a,"source-layer":D,filter:o,paint:L,layout:M,minzoom:l,maxzoom:i}),Le),c.on("click",u,R),c.on("dblclick",u,R),c.on("contextmenu",u,R),c.on("mouseenter",u,se=>{var qe,Xe;if(!u||!c||oe&&Ee(se)!==u)return;Me&&(c.getCanvas().style.cursor=Me);let B=se.features??[];r(6,le=B[0]??null);let we=(Xe=(qe=B[0])==null?void 0:qe.properties)==null?void 0:Xe.cluster_id;ce("mouseenter",{event:se,map:c,clusterId:we,layer:u,source:a,features:B})}),c.on("mousemove",u,se=>{var qe,Xe,dr;if(oe&&Ee(se)!==u)return;let B=se.features??[],we=(Xe=(qe=B[0])==null?void 0:qe.properties)==null?void 0:Xe.cluster_id,ye=(dr=B[0])==null?void 0:dr.id;ye!==pe&&(V&&(pe!==void 0&&(c==null||c.setFeatureState({source:a,id:pe},{hover:!1})),c==null||c.setFeatureState({source:a,id:ye},{hover:!0})),r(22,pe=ye),r(6,le=B[0]??null)),ce("mousemove",{event:se,map:c,clusterId:we,layer:u,source:a,features:B})}),c.on("mouseleave",u,se=>{!u||!c||(Me&&(c.getCanvas().style.cursor=""),r(6,le=null),V&&pe!==void 0&&(c==null||c.setFeatureState({source:a,id:pe},{hover:!1}),r(22,pe=void 0)),ce("mouseleave",{map:c,layer:u,source:a}))})}n.$$.dirty[0]&1073741825&&r(26,s=u?wr((R,Le)=>c==null?void 0:c.setPaintProperty(u,R,Le)):void 0),n.$$.dirty[0]&1073741825&&r(25,f=u?wr((R,Le)=>c==null?void 0:c.setLayoutProperty(u,R,Le)):void 0),n.$$.dirty[0]&67117056&&(s==null||s(L)),n.$$.dirty[0]&33570816&&(f==null||f(M)),n.$$.dirty[0]&1098907649&&u&&(c==null||c.setLayerZoomRange(u,l,i))},[u,ve,de,ge,Ve,Te,le,w,I,D,A,N,F,L,M,j,T,H,W,V,Me,oe,pe,i,l,f,s,a,o,t,c,p,$,k,C,y]}class cr extends U{constructor(e){super(),G(this,e,Eo,Mo,z,{id:7,source:8,sourceLayer:9,beforeId:10,beforeLayerType:11,type:12,paint:13,layout:14,filter:15,applyToClusters:16,minzoom:17,maxzoom:18,manageHoverState:19,hovered:6,hoverCursor:20,eventsIfTopMost:21},null,[-1,-1])}}function No(n){let e;const r=n[15].default,t=He(r,n,n[23],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&8388608)&&Re(t,r,o,o[23],e?ze(r,o[23],l,null):We(o[23]),null)},i(o){e||(m(t,o),e=!0)},o(o){h(t,o),e=!1},d(o){t&&t.d(o)}}}function Do(n){let e,r,t;function o(i){n[16](i)}let l={id:n[1],type:"circle",source:n[2],sourceLayer:n[3],beforeId:n[4],beforeLayerType:n[5],paint:n[6],layout:n[7],filter:n[8],applyToClusters:n[9],minzoom:n[10],maxzoom:n[11],hoverCursor:n[12],manageHoverState:n[13],eventsIfTopMost:n[14],$$slots:{default:[No]},$$scope:{ctx:n}};return n[0]!==void 0&&(l.hovered=n[0]),e=new cr({props:l}),q.push(()=>Z(e,"hovered",o)),e.$on("click",n[17]),e.$on("dblclick",n[18]),e.$on("contextmenu",n[19]),e.$on("mouseenter",n[20]),e.$on("mousemove",n[21]),e.$on("mouseleave",n[22]),{c(){_(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,[a]){const s={};a&2&&(s.id=i[1]),a&4&&(s.source=i[2]),a&8&&(s.sourceLayer=i[3]),a&16&&(s.beforeId=i[4]),a&32&&(s.beforeLayerType=i[5]),a&64&&(s.paint=i[6]),a&128&&(s.layout=i[7]),a&256&&(s.filter=i[8]),a&512&&(s.applyToClusters=i[9]),a&1024&&(s.minzoom=i[10]),a&2048&&(s.maxzoom=i[11]),a&4096&&(s.hoverCursor=i[12]),a&8192&&(s.manageHoverState=i[13]),a&16384&&(s.eventsIfTopMost=i[14]),a&8388608&&(s.$$scope={dirty:a,ctx:i}),!r&&a&1&&(r=!0,s.hovered=i[0],Y(()=>r=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){h(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Fo(n,e,r){let{$$slots:t={},$$scope:o}=e,{id:l=yt("circle")}=e,{source:i=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:f=void 0}=e,{paint:u}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{applyToClusters:$=void 0}=e,{minzoom:k=void 0}=e,{maxzoom:y=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:w=!1}=e,{hovered:I=null}=e,{eventsIfTopMost:D=!1}=e;function A(H){I=H,r(0,I)}function N(H){fe.call(this,n,H)}function F(H){fe.call(this,n,H)}function L(H){fe.call(this,n,H)}function M(H){fe.call(this,n,H)}function j(H){fe.call(this,n,H)}function T(H){fe.call(this,n,H)}return n.$$set=H=>{"id"in H&&r(1,l=H.id),"source"in H&&r(2,i=H.source),"sourceLayer"in H&&r(3,a=H.sourceLayer),"beforeId"in H&&r(4,s=H.beforeId),"beforeLayerType"in H&&r(5,f=H.beforeLayerType),"paint"in H&&r(6,u=H.paint),"layout"in H&&r(7,c=H.layout),"filter"in H&&r(8,p=H.filter),"applyToClusters"in H&&r(9,$=H.applyToClusters),"minzoom"in H&&r(10,k=H.minzoom),"maxzoom"in H&&r(11,y=H.maxzoom),"hoverCursor"in H&&r(12,C=H.hoverCursor),"manageHoverState"in H&&r(13,w=H.manageHoverState),"hovered"in H&&r(0,I=H.hovered),"eventsIfTopMost"in H&&r(14,D=H.eventsIfTopMost),"$$scope"in H&&r(23,o=H.$$scope)},[I,l,i,a,s,f,u,c,p,$,k,y,C,w,D,t,A,N,F,L,M,j,T,o]}class Gt extends U{constructor(e){super(),G(this,e,Fo,Do,z,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14})}}function jo(n){let e;const r=n[14].default,t=He(r,n,n[22],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&4194304)&&Re(t,r,o,o[22],e?ze(r,o[22],l,null):We(o[22]),null)},i(o){e||(m(t,o),e=!0)},o(o){h(t,o),e=!1},d(o){t&&t.d(o)}}}function Bo(n){let e,r,t;function o(i){n[15](i)}let l={id:n[1],type:"fill",source:n[2],sourceLayer:n[3],beforeId:n[4],beforeLayerType:n[5],paint:n[6],layout:n[7],filter:n[8],minzoom:n[9],maxzoom:n[10],hoverCursor:n[11],manageHoverState:n[12],eventsIfTopMost:n[13],$$slots:{default:[jo]},$$scope:{ctx:n}};return n[0]!==void 0&&(l.hovered=n[0]),e=new cr({props:l}),q.push(()=>Z(e,"hovered",o)),e.$on("click",n[16]),e.$on("dblclick",n[17]),e.$on("contextmenu",n[18]),e.$on("mouseenter",n[19]),e.$on("mousemove",n[20]),e.$on("mouseleave",n[21]),{c(){_(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,[a]){const s={};a&2&&(s.id=i[1]),a&4&&(s.source=i[2]),a&8&&(s.sourceLayer=i[3]),a&16&&(s.beforeId=i[4]),a&32&&(s.beforeLayerType=i[5]),a&64&&(s.paint=i[6]),a&128&&(s.layout=i[7]),a&256&&(s.filter=i[8]),a&512&&(s.minzoom=i[9]),a&1024&&(s.maxzoom=i[10]),a&2048&&(s.hoverCursor=i[11]),a&4096&&(s.manageHoverState=i[12]),a&8192&&(s.eventsIfTopMost=i[13]),a&4194304&&(s.$$scope={dirty:a,ctx:i}),!r&&a&1&&(r=!0,s.hovered=i[0],Y(()=>r=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){h(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Ho(n,e,r){let{$$slots:t={},$$scope:o}=e,{id:l=yt("fill")}=e,{source:i=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:f=void 0}=e,{paint:u}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{minzoom:$=void 0}=e,{maxzoom:k=void 0}=e,{hoverCursor:y=void 0}=e,{manageHoverState:C=!1}=e,{hovered:w=null}=e,{eventsIfTopMost:I=!1}=e;function D(T){w=T,r(0,w)}function A(T){fe.call(this,n,T)}function N(T){fe.call(this,n,T)}function F(T){fe.call(this,n,T)}function L(T){fe.call(this,n,T)}function M(T){fe.call(this,n,T)}function j(T){fe.call(this,n,T)}return n.$$set=T=>{"id"in T&&r(1,l=T.id),"source"in T&&r(2,i=T.source),"sourceLayer"in T&&r(3,a=T.sourceLayer),"beforeId"in T&&r(4,s=T.beforeId),"beforeLayerType"in T&&r(5,f=T.beforeLayerType),"paint"in T&&r(6,u=T.paint),"layout"in T&&r(7,c=T.layout),"filter"in T&&r(8,p=T.filter),"minzoom"in T&&r(9,$=T.minzoom),"maxzoom"in T&&r(10,k=T.maxzoom),"hoverCursor"in T&&r(11,y=T.hoverCursor),"manageHoverState"in T&&r(12,C=T.manageHoverState),"hovered"in T&&r(0,w=T.hovered),"eventsIfTopMost"in T&&r(13,I=T.eventsIfTopMost),"$$scope"in T&&r(22,o=T.$$scope)},[w,l,i,a,s,f,u,c,p,$,k,y,C,I,t,D,A,N,F,L,M,j,o]}class ut extends U{constructor(e){super(),G(this,e,Ho,Bo,z,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13})}}function Sr(n){let e=n[0],r,t,o=Cr(n);return{c(){o.c(),r=$e()},m(l,i){o.m(l,i),d(l,r,i),t=!0},p(l,i){i&1&&z(e,e=l[0])?(re(),h(o,1,1,ee),ne(),o=Cr(l),o.c(),m(o,1),o.m(r.parentNode,r)):o.p(l,i)},i(l){t||(m(o),t=!0)},o(l){h(o),t=!1},d(l){l&&g(r),o.d(l)}}}function Cr(n){let e;const r=n[15].default,t=He(r,n,n[14],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&16384)&&Re(t,r,o,o[14],e?ze(r,o[14],l,null):We(o[14]),null)},i(o){e||(m(t,o),e=!0)},o(o){h(t,o),e=!1},d(o){t&&t.d(o)}}}function Ro(n){let e,r,t=n[0]&&Sr(n);return{c(){t&&t.c(),e=$e()},m(o,l){t&&t.m(o,l),d(o,e,l),r=!0},p(o,[l]){o[0]?t?(t.p(o,l),l&1&&m(t,1)):(t=Sr(o),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(re(),h(t,1,1,()=>{t=null}),ne())},i(o){r||(m(t),r=!0)},o(o){h(t),r=!1},d(o){o&&g(e),t&&t.d(o)}}}function Wo(n,e){if(n.getSource(e)){let r=[];for(let t of n.getStyle().layers)"source"in t&&t.source==e&&r.push(t.id);for(let t of r)console.log(`had to remove ${t} first`),n.removeLayer(t);n.removeSource(e)}}function zo(n,e,r){let t,o,l,{$$slots:i={},$$scope:a}=e,{id:s=yt("geojson")}=e,{data:f}=e,{generateId:u=!1}=e,{promoteId:c=void 0}=e,{filter:p=void 0}=e,{lineMetrics:$=void 0}=e,{cluster:k=void 0}=e;const{map:y,cluster:C,self:w}=On();Q(n,y,A=>r(13,t=A)),Q(n,C,A=>r(16,l=A)),Q(n,w,A=>r(0,o=A));let I,D=!0;return _t(()=>{if(console.log("gj source getting torn down"),o){let A=o;if(console.log(`... will be removing ${A}`),it(w,o=null,o),r(11,I=void 0),t!=null&&t.loaded()){console.log(`... actually removed ${A}`),Wo(t,A);let N=t.getSource(A);console.log(`its gone, right? ${N}`)}}}),n.$$set=A=>{"id"in A&&r(4,s=A.id),"data"in A&&r(5,f=A.data),"generateId"in A&&r(6,u=A.generateId),"promoteId"in A&&r(7,c=A.promoteId),"filter"in A&&r(8,p=A.filter),"lineMetrics"in A&&r(9,$=A.lineMetrics),"cluster"in A&&r(10,k=A.cluster),"$$scope"in A&&r(14,a=A.$$scope)},n.$$.update=()=>{n.$$.dirty&1024&&it(C,l=k,l),n.$$.dirty&10225&&t&&o!==s&&(console.log(`$source is ${o}, id is ${s}`),o&&(console.log(`removing existing $source ${o}`),t.removeSource(o)),it(w,o=s,o),console.log(`just set $source to ${s}. adding source now.`),t.addSource(o,Dt({type:"geojson",data:f,filter:p,lineMetrics:$,generateId:u,promoteId:c,cluster:!!k,clusterMinPoints:k==null?void 0:k.minPoints,clusterMaxZoom:k==null?void 0:k.maxZoom,clusterRadius:k==null?void 0:k.radius,clusterProperties:k==null?void 0:k.properties})),r(11,I=t.getSource(o)),r(12,D=!0)),n.$$.dirty&6176&&I&&(D?r(12,D=!1):I.setData(f)),n.$$.dirty&3072&&(I==null||I.setClusterOptions(Dt({cluster:!!k,clusterMaxZoom:k==null?void 0:k.maxZoom,clusterRadius:k==null?void 0:k.radius})))},[o,y,C,w,s,f,u,c,p,$,k,I,D,t,a,i]}class pr extends U{constructor(e){super(),G(this,e,zo,Ro,z,{id:4,data:5,generateId:6,promoteId:7,filter:8,lineMetrics:9,cluster:10})}}function Uo(n){let e;const r=n[14].default,t=He(r,n,n[22],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&4194304)&&Re(t,r,o,o[22],e?ze(r,o[22],l,null):We(o[22]),null)},i(o){e||(m(t,o),e=!0)},o(o){h(t,o),e=!1},d(o){t&&t.d(o)}}}function Go(n){let e,r,t;function o(i){n[15](i)}let l={id:n[1],type:"line",source:n[2],sourceLayer:n[3],beforeId:n[4],beforeLayerType:n[5],paint:n[6],layout:n[7],filter:n[8],minzoom:n[9],maxzoom:n[10],hoverCursor:n[11],manageHoverState:n[12],eventsIfTopMost:n[13],$$slots:{default:[Uo]},$$scope:{ctx:n}};return n[0]!==void 0&&(l.hovered=n[0]),e=new cr({props:l}),q.push(()=>Z(e,"hovered",o)),e.$on("click",n[16]),e.$on("dblclick",n[17]),e.$on("contextmenu",n[18]),e.$on("mouseenter",n[19]),e.$on("mousemove",n[20]),e.$on("mouseleave",n[21]),{c(){_(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,[a]){const s={};a&2&&(s.id=i[1]),a&4&&(s.source=i[2]),a&8&&(s.sourceLayer=i[3]),a&16&&(s.beforeId=i[4]),a&32&&(s.beforeLayerType=i[5]),a&64&&(s.paint=i[6]),a&128&&(s.layout=i[7]),a&256&&(s.filter=i[8]),a&512&&(s.minzoom=i[9]),a&1024&&(s.maxzoom=i[10]),a&2048&&(s.hoverCursor=i[11]),a&4096&&(s.manageHoverState=i[12]),a&8192&&(s.eventsIfTopMost=i[13]),a&4194304&&(s.$$scope={dirty:a,ctx:i}),!r&&a&1&&(r=!0,s.hovered=i[0],Y(()=>r=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){h(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Vo(n,e,r){let{$$slots:t={},$$scope:o}=e,{id:l=yt("line")}=e,{source:i=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:f=void 0}=e,{paint:u}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{minzoom:$=void 0}=e,{maxzoom:k=void 0}=e,{hoverCursor:y=void 0}=e,{manageHoverState:C=!1}=e,{hovered:w=null}=e,{eventsIfTopMost:I=!1}=e;function D(T){w=T,r(0,w)}function A(T){fe.call(this,n,T)}function N(T){fe.call(this,n,T)}function F(T){fe.call(this,n,T)}function L(T){fe.call(this,n,T)}function M(T){fe.call(this,n,T)}function j(T){fe.call(this,n,T)}return n.$$set=T=>{"id"in T&&r(1,l=T.id),"source"in T&&r(2,i=T.source),"sourceLayer"in T&&r(3,a=T.sourceLayer),"beforeId"in T&&r(4,s=T.beforeId),"beforeLayerType"in T&&r(5,f=T.beforeLayerType),"paint"in T&&r(6,u=T.paint),"layout"in T&&r(7,c=T.layout),"filter"in T&&r(8,p=T.filter),"minzoom"in T&&r(9,$=T.minzoom),"maxzoom"in T&&r(10,k=T.maxzoom),"hoverCursor"in T&&r(11,y=T.hoverCursor),"manageHoverState"in T&&r(12,C=T.manageHoverState),"hovered"in T&&r(0,w=T.hovered),"eventsIfTopMost"in T&&r(13,I=T.eventsIfTopMost),"$$scope"in T&&r(22,o=T.$$scope)},[w,l,i,a,s,f,u,c,p,$,k,y,C,I,t,D,A,N,F,L,M,j,o]}class ct extends U{constructor(e){super(),G(this,e,Vo,Go,z,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13})}}function Tr(n){let e=n[0],r,t,o=Lr(n);return{c(){o.c(),r=$e()},m(l,i){o.m(l,i),d(l,r,i),t=!0},p(l,i){i&1&&z(e,e=l[0])?(re(),h(o,1,1,ee),ne(),o=Lr(l),o.c(),m(o,1),o.m(r.parentNode,r)):o.p(l,i)},i(l){t||(m(o),t=!0)},o(l){h(o),t=!1},d(l){l&&g(r),o.d(l)}}}function Lr(n){let e;const r=n[8].default,t=He(r,n,n[7],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&128)&&Re(t,r,o,o[7],e?ze(r,o[7],l,null):We(o[7]),null)},i(o){e||(m(t,o),e=!0)},o(o){h(t,o),e=!1},d(o){t&&t.d(o)}}}function qo(n){let e,r,t=n[0]&&Tr(n);return{c(){t&&t.c(),e=$e()},m(o,l){t&&t.m(o,l),d(o,e,l),r=!0},p(o,[l]){o[0]?t?(t.p(o,l),l&1&&m(t,1)):(t=Tr(o),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(re(),h(t,1,1,()=>{t=null}),ne())},i(o){r||(m(t),r=!0)},o(o){h(t),r=!1},d(o){o&&g(e),t&&t.d(o)}}}function Xo(n,e,r){let t,o,{$$slots:l={},$$scope:i}=e,{id:a=yt("vector")}=e,{url:s=null}=e,{tiles:f=null}=e;if(s&&s.includes("pmtiles://")&&!Ye.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let p=new Jn;Ye.addProtocol("pmtiles",p.tile)}const{map:u,self:c}=On();return Q(n,u,p=>r(6,t=p)),Q(n,c,p=>r(0,o=p)),_t(()=>{if(o){let p=o;it(c,o=null,o),Yn().then(()=>{t!=null&&t.loaded()&&(t==null||t.removeSource(p))})}}),n.$$set=p=>{"id"in p&&r(3,a=p.id),"url"in p&&r(4,s=p.url),"tiles"in p&&r(5,f=p.tiles),"$$scope"in p&&r(7,i=p.$$scope)},n.$$.update=()=>{n.$$.dirty&121&&t&&o!==a&&(o&&t.removeSource(o),it(c,o=a,o),t.addSource(o,Dt({type:"vector",url:s,tiles:f})))},[o,u,c,a,s,f,t,i,l]}class Ue extends U{constructor(e){super(),G(this,e,Xo,qo,z,{id:3,url:4,tiles:5})}}const Ko=n=>({features:n[0]&16,data:n[0]&16,map:n[0]&4,close:n[0]&1}),Or=n=>{var e;return{features:n[4],data:(e=n[4])==null?void 0:e[0],map:n[2],close:n[29]}};function Ar(n){let e,r,t=(n[4]||n[3]instanceof Ye.Marker)&&Ir(n);return{c(){e=E("div"),t&&t.c()},m(o,l){d(o,e,l),t&&t.m(e,null),n[30](e),r=!0},p(o,l){o[4]||o[3]instanceof Ye.Marker?t?(t.p(o,l),l[0]&24&&m(t,1)):(t=Ir(o),t.c(),m(t,1),t.m(e,null)):t&&(re(),h(t,1,1,()=>{t=null}),ne())},i(o){r||(m(t),r=!0)},o(o){h(t),r=!1},d(o){o&&g(e),t&&t.d(),n[30](null)}}}function Ir(n){let e;const r=n[28].default,t=He(r,n,n[27],Or);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l[0]&134217749)&&Re(t,r,o,o[27],e?ze(r,o[27],l,Ko):We(o[27]),Or)},i(o){e||(m(t,o),e=!0)},o(o){h(t,o),e=!1},d(o){t&&t.d(o)}}}function Zo(n){let e,r,t=n[8].default&&Ar(n);return{c(){t&&t.c(),e=$e()},m(o,l){t&&t.m(o,l),d(o,e,l),r=!0},p(o,l){o[8].default?t?(t.p(o,l),l[0]&256&&m(t,1)):(t=Ar(o),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(re(),h(t,1,1,()=>{t=null}),ne())},i(o){r||(m(t),r=!0)},o(o){h(t),r=!1},d(o){o&&g(e),t&&t.d(o)}}}function Yo(n,e,r){let t,o,l,i,a,{$$slots:s={},$$scope:f}=e;const u=Qn(s);let{closeButton:c=void 0}=e,{closeOnClickOutside:p=!0}=e,{closeOnClickInside:$=!1}=e,{closeOnMove:k=!1}=e,{openOn:y="click"}=e,{focusAfterOpen:C=!0}=e,{anchor:w=void 0}=e,{offset:I=void 0}=e,{popupClass:D=void 0}=e,{maxWidth:A=void 0}=e,{lngLat:N=void 0}=e,{html:F=void 0}=e,{open:L=!1}=e;const{map:M,popupTarget:j,layerEvent:T}=po();Q(n,M,B=>r(2,l=B)),Q(n,j,B=>r(3,a=B)),Q(n,T,B=>r(26,i=B));const H=["click","dblclick","contextmenu"];let W,V=!1,le;function Me(){if(!W)return;let B=W.getElement();!B||B===le||(le=B,y==="hover"&&(le.style.pointerEvents="none"),le.addEventListener("mouseenter",()=>{r(22,V=!0)},{passive:!0}),le.addEventListener("mouseleave",()=>{r(22,V=!1)},{passive:!0}),le.addEventListener("click",()=>{$&&r(0,L=!1)},{passive:!0}))}bt(()=>{if(l)return l.on("click",pe),typeof a=="string"&&(l.on("click",a,ve),l.on("dblclick",a,ve),l.on("contextmenu",a,ve),l.on("mousemove",a,Ee),l.on("mouseleave",a,Te),l.on("touchstart",a,ge),l.on("touchend",a,Ve)),()=>{l!=null&&l.loaded()&&(W==null||W.remove(),l.off("click",pe),a instanceof Ye.Marker?a.getPopup()===W&&a.setPopup(void 0):typeof a=="string"&&(l.off("click",a,ve),l.off("dblclick",a,ve),l.off("contextmenu",a,ve),l.off("mousemove",a,Ee),l.off("mouseleave",a,Te),l.off("touchstart",a,ge),l.off("touchend",a,Ve)))}});let oe=null,ce="normal";function ve(B){B.type===y&&("layerType"in B?B.layerType==="deckgl"?(r(9,N=B.coordinate),r(4,oe=B.object?[B.object]:null)):(r(9,N=B.lngLat),r(4,oe=B.features??[])):(r(9,N=B.lngLat),r(4,oe=B.features??[])),setTimeout(()=>r(0,L=!0)))}let de=null;function ge(B){de=B.point}function Ve(B){if(!de||y!=="hover")return;let we=de.dist(B.point);de=null,we<3&&(r(9,N=B.lngLat),r(4,oe=B.features??[]),W.isOpen()?r(23,ce="justOpened"):(r(23,ce="opening"),r(0,L=!0)))}function Te(B){y!=="hover"||de||ce!=="normal"||(r(0,L=!1),r(4,oe=null))}function Ee(B){y!=="hover"||de||ce!=="normal"||(r(0,L=!0),r(4,oe=B.features??[]),r(9,N=B.lngLat))}function pe(B){if(ce==="justOpened"){r(23,ce="normal");return}if(!p)return;let we=[le,a instanceof Ye.Marker?a==null?void 0:a.getElement():null];L&&W.isOpen()&&!we.some(ye=>ye==null?void 0:ye.contains(B.originalEvent.target))&&r(0,L=!1)}let R;const Le=()=>r(0,L=!1);function se(B){q[B?"unshift":"push"](()=>{R=B,r(1,R)})}return n.$$set=B=>{"closeButton"in B&&r(10,c=B.closeButton),"closeOnClickOutside"in B&&r(11,p=B.closeOnClickOutside),"closeOnClickInside"in B&&r(12,$=B.closeOnClickInside),"closeOnMove"in B&&r(13,k=B.closeOnMove),"openOn"in B&&r(14,y=B.openOn),"focusAfterOpen"in B&&r(15,C=B.focusAfterOpen),"anchor"in B&&r(16,w=B.anchor),"offset"in B&&r(17,I=B.offset),"popupClass"in B&&r(18,D=B.popupClass),"maxWidth"in B&&r(19,A=B.maxWidth),"lngLat"in B&&r(9,N=B.lngLat),"html"in B&&r(20,F=B.html),"open"in B&&r(0,L=B.open),"$$scope"in B&&r(27,f=B.$$scope)},n.$$.update=()=>{if(n.$$.dirty[0]&7168&&r(25,t=c??(!p&&!$)),n.$$.dirty[0]&36675584&&(W||(r(21,W=new Ye.Popup({closeButton:t,closeOnClick:!1,closeOnMove:k,focusAfterOpen:C,maxWidth:A,className:D,anchor:w,offset:I})),le=W.getElement(),W.on("open",()=>{r(0,L=!0),Me()}),W.on("close",B=>{r(0,L=!1)}))),n.$$.dirty[0]&2113544&&W&&a instanceof Ye.Marker&&(y==="click"?a.setPopup(W):a.getPopup()===W&&a.setPopup(void 0)),n.$$.dirty[0]&67125248&&H.includes(y)&&(i==null?void 0:i.type)===y&&(ve(i),it(T,i=null,i)),n.$$.dirty[0]&67125248&&r(24,o=y==="hover"&&((i==null?void 0:i.type)==="mousemove"||(i==null?void 0:i.type)==="mouseenter")),n.$$.dirty[0]&88096768&&y==="hover"&&T&&(o&&i&&(i.layerType==="deckgl"?(r(9,N=i.coordinate),r(4,oe=i.object?[i.object]:null)):(r(9,N=i.lngLat),r(4,oe=i.features??[]))),r(0,L=(o||V)??!1)),n.$$.dirty[0]&3145730&&(R?W.setDOMContent(R):F&&W.setHTML(F)),n.$$.dirty[0]&2097664&&N&&W.setLngLat(N),n.$$.dirty[0]&10485765&&l){let B=W.isOpen();L&&!B?(W.addTo(l),ce==="opening"&&r(23,ce="justOpened")):!L&&B&&W.remove()}},[L,R,l,a,oe,M,j,T,u,N,c,p,$,k,y,C,w,I,D,A,F,W,V,ce,o,t,i,f,s,Le,se]}class Ce extends U{constructor(e){super(),G(this,e,Yo,Zo,z,{closeButton:10,closeOnClickOutside:11,closeOnClickInside:12,closeOnMove:13,openOn:14,focusAfterOpen:15,anchor:16,offset:17,popupClass:18,maxWidth:19,lngLat:9,html:20,open:0},null,[-1,-1])}}function Jo(n){let e;return{c(){e=E("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Qo(n){let e,r,t,o,l=n[0]=="Private (development)"&&Jo();return{c(){l&&l.c(),e=O(),r=E("p"),r.textContent="Note the ATF scheme data has not been validated.",t=O(),o=E("p"),o.innerHTML=`Please contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      about any problems, ideas, or feedback for this site.`},m(i,a){l&&l.m(i,a),d(i,e,a),d(i,r,a),d(i,t,a),d(i,o,a)},p:ee,d(i){i&&(g(e),g(r),g(t),g(o)),l&&l.d(i)}}}function xo(n){let e,r,t,o,l,i;return l=new ae({props:{$$slots:{default:[Qo]},$$scope:{ctx:n}}}),{c(){e=E("p"),r=S("App version: "),t=S(n[0]),o=O(),_(l.$$.fragment)},m(a,s){d(a,e,s),P(e,r),P(e,t),P(e,o),b(l,e,null),i=!0},p(a,[s]){const f={};s&2&&(f.$$scope={dirty:s,ctx:a}),l.$set(f)},i(a){i||(m(l.$$.fragment,a),i=!0)},o(a){h(l.$$.fragment,a),i=!1},d(a){a&&g(e),v(l)}}}function el(n){return[ar()]}class tl extends U{constructor(e){super(),G(this,e,el,xo,z,{})}}const rl={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var he=Uint8Array,lt=Uint16Array,In=Uint32Array,Pn=new he([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Mn=new he([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),nl=new he([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),En=function(n,e){for(var r=new lt(31),t=0;t<31;++t)r[t]=e+=1<<n[t-1];for(var o=new In(r[30]),t=1;t<30;++t)for(var l=r[t];l<r[t+1];++l)o[l]=l-r[t]<<5|t;return[r,o]},Nn=En(Pn,2),Dn=Nn[0],ol=Nn[1];Dn[28]=258,ol[258]=28;var ll=En(Mn,0),sl=ll[0],er=new lt(32768);for(var te=0;te<32768;++te){var Ke=(te&43690)>>>1|(te&21845)<<1;Ke=(Ke&52428)>>>2|(Ke&13107)<<2,Ke=(Ke&61680)>>>4|(Ke&3855)<<4,er[te]=((Ke&65280)>>>8|(Ke&255)<<8)>>>1}var kt=function(n,e,r){for(var t=n.length,o=0,l=new lt(e);o<t;++o)n[o]&&++l[n[o]-1];var i=new lt(e);for(o=0;o<e;++o)i[o]=i[o-1]+l[o-1]<<1;var a;if(r){a=new lt(1<<e);var s=15-e;for(o=0;o<t;++o)if(n[o])for(var f=o<<4|n[o],u=e-n[o],c=i[n[o]-1]++<<u,p=c|(1<<u)-1;c<=p;++c)a[er[c]>>>s]=f}else for(a=new lt(t),o=0;o<t;++o)n[o]&&(a[o]=er[i[n[o]-1]++]>>>15-n[o]);return a},Ot=new he(288);for(var te=0;te<144;++te)Ot[te]=8;for(var te=144;te<256;++te)Ot[te]=9;for(var te=256;te<280;++te)Ot[te]=7;for(var te=280;te<288;++te)Ot[te]=8;var Fn=new he(32);for(var te=0;te<32;++te)Fn[te]=5;var il=kt(Ot,9,1),al=kt(Fn,5,1),qt=function(n){for(var e=n[0],r=1;r<n.length;++r)n[r]>e&&(e=n[r]);return e},Oe=function(n,e,r){var t=e/8|0;return(n[t]|n[t+1]<<8)>>(e&7)&r},Xt=function(n,e){var r=e/8|0;return(n[r]|n[r+1]<<8|n[r+2]<<16)>>(e&7)},fl=function(n){return(n+7)/8|0},mr=function(n,e,r){(e==null||e<0)&&(e=0),(r==null||r>n.length)&&(r=n.length);var t=new(n.BYTES_PER_ELEMENT==2?lt:n.BYTES_PER_ELEMENT==4?In:he)(r-e);return t.set(n.subarray(e,r)),t},ul=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ae=function(n,e,r){var t=new Error(e||ul[n]);if(t.code=n,Error.captureStackTrace&&Error.captureStackTrace(t,Ae),!r)throw t;return t},cl=function(n,e,r){var t=n.length;if(!t||r&&r.f&&!r.l)return e||new he(0);var o=!e||r,l=!r||r.i;r||(r={}),e||(e=new he(t*3));var i=function(Le){var se=e.length;if(Le>se){var B=new he(Math.max(se*2,Le));B.set(e),e=B}},a=r.f||0,s=r.p||0,f=r.b||0,u=r.l,c=r.d,p=r.m,$=r.n,k=t*8;do{if(!u){a=Oe(n,s,1);var y=Oe(n,s+1,3);if(s+=3,y)if(y==1)u=il,c=al,p=9,$=5;else if(y==2){var D=Oe(n,s,31)+257,A=Oe(n,s+10,15)+4,N=D+Oe(n,s+5,31)+1;s+=14;for(var F=new he(N),L=new he(19),M=0;M<A;++M)L[nl[M]]=Oe(n,s+M*3,7);s+=A*3;for(var j=qt(L),T=(1<<j)-1,H=kt(L,j,1),M=0;M<N;){var W=H[Oe(n,s,T)];s+=W&15;var C=W>>>4;if(C<16)F[M++]=C;else{var V=0,le=0;for(C==16?(le=3+Oe(n,s,3),s+=2,V=F[M-1]):C==17?(le=3+Oe(n,s,7),s+=3):C==18&&(le=11+Oe(n,s,127),s+=7);le--;)F[M++]=V}}var Me=F.subarray(0,D),oe=F.subarray(D);p=qt(Me),$=qt(oe),u=kt(Me,p,1),c=kt(oe,$,1)}else Ae(1);else{var C=fl(s)+4,w=n[C-4]|n[C-3]<<8,I=C+w;if(I>t){l&&Ae(0);break}o&&i(f+w),e.set(n.subarray(C,I),f),r.b=f+=w,r.p=s=I*8,r.f=a;continue}if(s>k){l&&Ae(0);break}}o&&i(f+131072);for(var ce=(1<<p)-1,ve=(1<<$)-1,de=s;;de=s){var V=u[Xt(n,s)&ce],ge=V>>>4;if(s+=V&15,s>k){l&&Ae(0);break}if(V||Ae(2),ge<256)e[f++]=ge;else if(ge==256){de=s,u=null;break}else{var Ve=ge-254;if(ge>264){var M=ge-257,Te=Pn[M];Ve=Oe(n,s,(1<<Te)-1)+Dn[M],s+=Te}var Ee=c[Xt(n,s)&ve],pe=Ee>>>4;Ee||Ae(3),s+=Ee&15;var oe=sl[pe];if(pe>3){var Te=Mn[pe];oe+=Xt(n,s)&(1<<Te)-1,s+=Te}if(s>k){l&&Ae(0);break}o&&i(f+131072);for(var R=f+Ve;f<R;f+=4)e[f]=e[f-oe],e[f+1]=e[f+1-oe],e[f+2]=e[f+2-oe],e[f+3]=e[f+3-oe];f=R}}r.l=u,r.p=de,r.b=f,r.f=a,u&&(a=1,r.m=p,r.d=c,r.n=$)}while(!a);return f==e.length?e:mr(e,0,f)},pl=new he(0),De=function(n,e){return n[e]|n[e+1]<<8},Pe=function(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24)>>>0},Kt=function(n,e){return Pe(n,e)+Pe(n,e+4)*4294967296};function ml(n,e){return cl(n,e)}var tr=typeof TextDecoder<"u"&&new TextDecoder,$l=0;try{tr.decode(pl,{stream:!0}),$l=1}catch{}var dl=function(n){for(var e="",r=0;;){var t=n[r++],o=(t>127)+(t>223)+(t>239);if(r+o>n.length)return[e,mr(n,r-1)];o?o==3?(t=((t&15)<<18|(n[r++]&63)<<12|(n[r++]&63)<<6|n[r++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):o&1?e+=String.fromCharCode((t&31)<<6|n[r++]&63):e+=String.fromCharCode((t&15)<<12|(n[r++]&63)<<6|n[r++]&63):e+=String.fromCharCode(t)}};function jn(n,e){if(e){for(var r="",t=0;t<n.length;t+=16384)r+=String.fromCharCode.apply(null,n.subarray(t,t+16384));return r}else{if(tr)return tr.decode(n);var o=dl(n),l=o[0],i=o[1];return i.length&&Ae(8),l}}var gl=function(n,e){return e+30+De(n,e+26)+De(n,e+28)},hl=function(n,e,r){var t=De(n,e+28),o=jn(n.subarray(e+46,e+46+t),!(De(n,e+8)&2048)),l=e+46+t,i=Pe(n,e+20),a=r&&i==4294967295?_l(n,l):[i,Pe(n,e+24),Pe(n,e+42)],s=a[0],f=a[1],u=a[2];return[De(n,e+10),s,f,o,l+De(n,e+30)+De(n,e+32),u]},_l=function(n,e){for(;De(n,e)!=1;e+=4+De(n,e+2));return[Kt(n,e+12),Kt(n,e+4),Kt(n,e+20)]};function bl(n,e){for(var r={},t=n.length-22;Pe(n,t)!=101010256;--t)(!t||n.length-t>65558)&&Ae(13);var o=De(n,t+8);if(!o)return{};var l=Pe(n,t+16),i=l==4294967295||o==65535;if(i){var a=Pe(n,t-12);i=Pe(n,a)==101075792,i&&(o=Pe(n,a+32),l=Pe(n,a+48))}for(var s=e&&e.filter,f=0;f<o;++f){var u=hl(n,l,i),c=u[0],p=u[1],$=u[2],k=u[3],y=u[4],C=u[5],w=gl(n,C);l=y,(!s||s({name:k,size:p,originalSize:$,compression:c}))&&(c?c==8?r[k]=ml(n.subarray(w,w+p),new he($)):Ae(14,"unknown compression type "+c):r[k]=mr(n,w,w+p))}return r}function vl(n){return n instanceof File||n instanceof Blob?n.arrayBuffer().then(Zt):Zt(n)}function Zt(n){var e=new Uint8Array(n),r=bl(e);return Promise.resolve(wl(r))}function wl(n){for(var e=[],r=0,t=Object.keys(n);r<t.length;r++){var o=t[r];e[o]=jn(n[o])}return e}function je(n,e){for(var r=0;r<n.childNodes.length;){var t=n.childNodes[r];if(t.nodeType===1&&at(t)===e)return t;r++}}function At(n,e){for(var r=[],t=0;t<n.childNodes.length;){var o=n.childNodes[t];o.nodeType===1&&at(o)===e&&r.push(o),t++}return r}function Ft(n,e,r){for(var t=0;t<n.childNodes.length;){var o=n.childNodes[t];e?o.nodeType===1&&at(o)===e&&r(o,t):r(o,t),t++}}function yl(n,e,r){var t=[];return Ft(n,e,function(o,l){t.push(r(o,l))}),t}var kl=/.+\:/;function at(n){return n.tagName.replace(kl,"")}function Bn(n){if(n.nodeType!==1)return n.textContent;for(var e="<"+at(n),r=0;r<n.attributes.length;)e+=" "+n.attributes[r].name+'="'+n.attributes[r].value+'"',r++;e+=">";for(var t=0;t<n.childNodes.length;)e+=Bn(n.childNodes[t]),t++;return e+="</"+at(n)+">",e}function Sl(n){var e=n.documentElement,r=je(e,"sheetData"),t=[];return Ft(r,"row",function(o){Ft(o,"c",function(l){t.push(l)})}),t}function Cl(n,e){return je(e,"v")}function Tl(n,e){if(e.firstChild&&at(e.firstChild)==="is"&&e.firstChild.firstChild&&at(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Ll(n){var e=n.documentElement,r=je(e,"dimension");if(r)return r.getAttribute("ref")}function Ol(n){var e=n.documentElement,r=je(e,"cellStyleXfs");return r?At(r,"xf"):[]}function Al(n){var e=n.documentElement,r=je(e,"cellXfs");return r?At(r,"xf"):[]}function Il(n){var e=n.documentElement,r=je(e,"numFmts");return r?At(r,"numFmt"):[]}function Pl(n){var e=n.documentElement;return yl(e,"si",function(r){var t=je(r,"t");if(t)return t.textContent;var o="";return Ft(r,"r",function(l){o+=je(l,"t").textContent}),o})}function Ml(n){var e=n.documentElement;return je(e,"workbookPr")}function El(n){var e=n.documentElement;return At(e,"Relationship")}function Nl(n){var e=n.documentElement,r=je(e,"sheets");return At(r,"sheet")}function Dl(n,e){var r=e.createDocument(n),t={},o=Ml(r);o&&o.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var l=function(a){a.getAttribute("name")&&t.sheets.push({id:a.getAttribute("sheetId"),name:a.getAttribute("name"),relationId:a.getAttribute("r:id")})};return Nl(r).forEach(l),t}function Fl(n,e){var r=e.createDocument(n),t={sheets:{},sharedStrings:void 0,styles:void 0},o=function(i){var a=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=Yt(a);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=Yt(a);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=Yt(a);break}};return El(r).forEach(o),t}function Yt(n){return n[0]==="/"?n.slice(1):"xl/"+n}function Pr(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,t)}return r}function Mr(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Pr(Object(r),!0).forEach(function(t){jl(n,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Pr(Object(r)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))})}return n}function jl(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Bl(n,e){if(!n)return{};var r=e.createDocument(n),t=Ol(r).map(Jt),o=Il(r).map(Hl).reduce(function(i,a){return i[a.id]=a,i},[]),l=function(a){return a.hasAttribute("xfId")?Mr(Mr({},t[a.xfId]),Jt(a,o)):Jt(a,o)};return Al(r).map(l)}function Hl(n){return{id:n.getAttribute("numFmtId"),template:n.getAttribute("formatCode")}}function Jt(n,e){var r={};if(n.hasAttribute("numFmtId")){var t=n.getAttribute("numFmtId");e[t]?r.numberFormat=e[t]:r.numberFormat={id:t}}return r}function Rl(n,e){return n?Pl(e.createDocument(n)):[]}function Hn(n,e){e&&e.epoch1904&&(n+=1462);var r=70*365+19,t=60*60*1e3;return new Date(Math.round((n-r)*24*t))}function Wl(n,e){var r=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r)return(r=r.call(n)).next.bind(r);if(Array.isArray(n)||(r=zl(n))||e&&n&&typeof n.length=="number"){r&&(n=r);var t=0;return function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zl(n,e){if(n){if(typeof n=="string")return Er(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Er(n,e)}}function Er(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function Ul(n,e,r,t){if(e){var o=r[e];if(!o)throw new Error("Cell style not found: ".concat(e));if(!o.numberFormat)return!1;if(Gl.indexOf(Number(o.numberFormat.id))>=0||t.dateFormat&&o.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&o.numberFormat.template&&Xl(o.numberFormat.template))return!0}}var Gl=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],Vl=/^\[\$-414\]/,ql=/;@$/;function Xl(n){n=n.toLowerCase(),n=n.replace(Vl,""),n=n.replace(ql,"");for(var e=n.split(/\W+/),r=Wl(e),t;!(t=r()).done;){var o=t.value;if(Kl.indexOf(o)<0)return!1}return!0}var Kl=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function Zl(n,e,r){var t=r.getInlineStringValue,o=r.getInlineStringXml,l=r.getStyleId,i=r.styles,a=r.values,s=r.properties,f=r.options;switch(e||(e="n"),e){case"str":n=Qt(n,f);break;case"inlineStr":if(n=t(),n===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(o()));n=Qt(n,f);break;case"s":var u=Number(n);if(isNaN(u))throw new Error('Invalid "shared" string index: '.concat(n));if(u>=a.length)throw new Error('An out-of-bounds "shared" string index: '.concat(n));n=a[u],n=Qt(n,f);break;case"b":if(n==="1")n=!0;else if(n==="0")n=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(n));break;case"z":n=void 0;break;case"e":n=Yl(n);break;case"d":if(n===void 0)break;var c=new Date(n);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(n));n=c;break;case"n":if(n===void 0)break;var p=Number(n);if(isNaN(p))throw new Error('Invalid "numeric" cell value: '.concat(n));n=p,Ul(n,l(),i,f)&&(n=Hn(n,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return n===void 0&&(n=null),n}function Yl(n){switch(n){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(n)}}function Qt(n,e){return e.trim!==!1&&(n=n.trim()),n===""&&(n=void 0),n}var Jl=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function Ql(n){var e=function(f,u){return f-u},r=n.map(function(s){return s.row}).sort(e),t=n.map(function(s){return s.column}).sort(e),o=r[0],l=r[r.length-1],i=t[0],a=t[t.length-1];return[{row:o,column:i},{row:l,column:a}]}function xl(n){for(var e=0,r=0;r<n.length;)e*=26,e+=Jl.indexOf(n[r]),r++;return e}function Rn(n){return n=n.split(/(\d+)/),[parseInt(n[1]),xl(n[0].trim())]}function es(n,e,r,t,o,l,i){var a=Rn(n.getAttribute("r")),s=Cl(e,n),f=s&&s.textContent,u;return n.hasAttribute("t")&&(u=n.getAttribute("t")),{row:a[0],column:a[1],value:Zl(f,u,{getInlineStringValue:function(){return Tl(e,n)},getInlineStringXml:function(){return Bn(n)},getStyleId:function(){return n.getAttribute("s")},styles:o,values:t,properties:l,options:i})}}function ts(n,e,r,t,o,l){var i=Sl(n);return i.length===0?[]:i.map(function(a){return es(a,n,e,r,t,o,l)})}function rs(n,e){return ss(n)||ls(n,e)||os(n,e)||ns()}function ns(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function os(n,e){if(n){if(typeof n=="string")return Nr(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nr(n,e)}}function Nr(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function ls(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var t=[],o=!0,l=!1,i,a;try{for(r=r.call(n);!(o=(i=r.next()).done)&&(t.push(i.value),!(e&&t.length===e));o=!0);}catch(s){l=!0,a=s}finally{try{!o&&r.return!=null&&r.return()}finally{if(l)throw a}}return t}}function ss(n){if(Array.isArray(n))return n}function is(n){var e=Ll(n);if(e)return e=e.split(":").map(Rn).map(function(r){var t=rs(r,2),o=t[0],l=t[1];return{row:o,column:l}}),e.length===1&&(e=[e[0],e[0]]),e}function as(n,e,r,t,o,l){var i=e.createDocument(n),a=ts(i,e,r,t,o,l),s=is(i)||Ql(a);return{cells:a,dimensions:s}}function fs(n,e){var r=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r)return(r=r.call(n)).next.bind(r);if(Array.isArray(n)||(r=us(n))||e&&n&&typeof n.length=="number"){r&&(n=r);var t=0;return function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function us(n,e){if(n){if(typeof n=="string")return Dr(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dr(n,e)}}function Dr(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function cs(n){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.rowMap,t=e.accessor,o=t===void 0?function(c){return c}:t,l=e.onlyTrimAtTheEnd,i=n.length-1;i>=0;){for(var a=!0,s=fs(n[i]),f;!(f=s()).done;){var u=f.value;if(o(u)!==null){a=!1;break}}if(a)n.splice(i,1),r&&r.splice(i,1);else if(l)break;i--}return n}function ps(n,e){var r=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r)return(r=r.call(n)).next.bind(r);if(Array.isArray(n)||(r=ms(n))||e&&n&&typeof n.length=="number"){r&&(n=r);var t=0;return function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ms(n,e){if(n){if(typeof n=="string")return Fr(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fr(n,e)}}function Fr(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function $s(n){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.accessor,t=r===void 0?function(c){return c}:r,o=e.onlyTrimAtTheEnd,l=n[0].length-1;l>=0;){for(var i=!0,a=ps(n),s;!(s=a()).done;){var f=s.value;if(t(f[l])!==null){i=!1;break}}if(i)for(var u=0;u<n.length;)n[u].splice(l,1),u++;else if(o)break;l--}return n}function ds(n,e){var r=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r)return(r=r.call(n)).next.bind(r);if(Array.isArray(n)||(r=Wn(n))||e&&n&&typeof n.length=="number"){r&&(n=r);var t=0;return function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gs(n,e){return bs(n)||_s(n,e)||Wn(n,e)||hs()}function hs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wn(n,e){if(n){if(typeof n=="string")return jr(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jr(n,e)}}function jr(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function _s(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var t=[],o=!0,l=!1,i,a;try{for(r=r.call(n);!(o=(i=r.next()).done)&&(t.push(i.value),!(e&&t.length===e));o=!0);}catch(s){l=!0,a=s}finally{try{!o&&r.return!=null&&r.return()}finally{if(l)throw a}}return t}}function bs(n){if(Array.isArray(n))return n}function vs(n,e){var r=n.dimensions,t=n.cells;if(t.length===0)return[];var o=gs(r,2);o[0];for(var l=o[1],i=l.column,a=l.row,s=new Array(a),f=0;f<a;){s[f]=new Array(i);for(var u=0;u<i;)s[f][u]=null,u++;f++}for(var c=ds(t),p;!(p=c()).done;){var $=p.value,k=$.row-1,y=$.column-1;y<i&&k<a&&(s[k][y]=$.value)}var C=e.rowMap;if(C)for(var w=0;w<s.length;)C[w]=w,w++;return s=cs($s(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:C}),e.transformData&&(s=e.transformData(s)),s}function ws(n,e){var r=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r)return(r=r.call(n)).next.bind(r);if(Array.isArray(n)||(r=ys(n))||e&&n&&typeof n.length=="number"){r&&(n=r);var t=0;return function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ys(n,e){if(n){if(typeof n=="string")return Br(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Br(n,e)}}function Br(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function Hr(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,t)}return r}function ks(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Hr(Object(r),!0).forEach(function(t){Ss(n,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Hr(Object(r)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))})}return n}function Ss(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Cs(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};r.sheet||(r=ks({sheet:1},r));var t=function(p){if(!n[p])throw new Error('"'.concat(p,'" file not found inside the *.xlsx file zip archive'));return n[p]},o=Fl(t("xl/_rels/workbook.xml.rels"),e),l=o.sharedStrings?Rl(t(o.sharedStrings),e):[],i=o.styles?Bl(t(o.styles),e):{},a=Dl(t("xl/workbook.xml"),e);if(r.getSheets)return a.sheets.map(function(c){var p=c.name;return{name:p}});var s=Ts(r.sheet,a.sheets);if(!s||!o.sheets[s])throw Ls(r.sheet,a.sheets);var f=as(t(o.sheets[s]),e,l,i,a,r),u=vs(f,r);return r.properties?{data:u,properties:a}:u}function Ts(n,e){if(typeof n=="number"){var r=e[n-1];return r&&r.relationId}for(var t=ws(e),o;!(o=t()).done;){var l=o.value;if(l.name===n)return l.relationId}}function Ls(n,e){var r=e&&e.map(function(t,o){return'"'.concat(t.name,'" (#').concat(o+1,")")}).join(", ");return new Error("Sheet ".concat(typeof n=="number"?"#"+n:'"'+n+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+r+".":""))}function rr(n){"@babel/helpers - typeof";return rr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rr(n)}function Rr(n,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Os(n,e,r){return e&&Rr(n.prototype,e),r&&Rr(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}function As(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Is(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Ct(n,e)}function Ps(n){var e=zn();return function(){var t=Tt(n),o;if(e){var l=Tt(this).constructor;o=Reflect.construct(t,arguments,l)}else o=t.apply(this,arguments);return Ms(this,o)}}function Ms(n,e){if(e&&(rr(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Es(n)}function Es(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function nr(n){var e=typeof Map=="function"?new Map:void 0;return nr=function(t){if(t===null||!Ns(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,o)}function o(){return Pt(t,arguments,Tt(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Ct(o,t)},nr(n)}function Pt(n,e,r){return zn()?Pt=Reflect.construct:Pt=function(o,l,i){var a=[null];a.push.apply(a,l);var s=Function.bind.apply(o,a),f=new s;return i&&Ct(f,i.prototype),f},Pt.apply(null,arguments)}function zn(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ns(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function Ct(n,e){return Ct=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t},Ct(n,e)}function Tt(n){return Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Tt(n)}var _e=function(n){Is(r,n);var e=Ps(r);function r(t){var o;return As(this,r),o=e.call(this,"invalid"),o.reason=t,o}return Os(r)}(nr(Error));function Ds(n){if(typeof n=="string"){var e=n;if(n=Number(n),String(n)!==e)throw new _e("not_a_number")}if(typeof n!="number")throw new _e("not_a_number");if(isNaN(n))throw new _e("invalid_number");if(!isFinite(n))throw new _e("out_of_bounds");return n}function Fs(n){if(typeof n=="string")return n;if(typeof n=="number"){if(isNaN(n))throw new _e("invalid_number");if(!isFinite(n))throw new _e("out_of_bounds");return String(n)}throw new _e("not_a_string")}function js(n){if(typeof n=="boolean")return n;throw new _e("not_a_boolean")}function Bs(n,e){var r=e.properties;if(n instanceof Date){if(isNaN(n.valueOf()))throw new _e("out_of_bounds");return n}if(typeof n=="number"){if(isNaN(n))throw new _e("invalid_number");if(!isFinite(n))throw new _e("out_of_bounds");var t=Hn(n,r);if(isNaN(t.valueOf()))throw new _e("out_of_bounds");return t}throw new _e("not_a_date")}function Hs(n,e){return zs(n)||Ws(n,e)||Un(n,e)||Rs()}function Rs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ws(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var t=[],o=!0,l=!1,i,a;try{for(r=r.call(n);!(o=(i=r.next()).done)&&(t.push(i.value),!(e&&t.length===e));o=!0);}catch(s){l=!0,a=s}finally{try{!o&&r.return!=null&&r.return()}finally{if(l)throw a}}return t}}function zs(n){if(Array.isArray(n))return n}function or(n){"@babel/helpers - typeof";return or=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},or(n)}function Us(n,e){var r=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r)return(r=r.call(n)).next.bind(r);if(Array.isArray(n)||(r=Un(n))||e&&n&&typeof n.length=="number"){r&&(n=r);var t=0;return function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Un(n,e){if(n){if(typeof n=="string")return Wr(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wr(n,e)}}function Wr(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function zr(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,t)}return r}function Ur(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zr(Object(r),!0).forEach(function(t){Gs(n,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):zr(Object(r)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))})}return n}function Gs(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}var Gr={isColumnOriented:!1};function Vs(n,e,r){r?r=Ur(Ur({},Gr),r):r=Gr;var t=r,o=t.isColumnOriented,l=t.rowMap,i=t.ignoreEmptyRows;Zs(e),o&&(n=Ks(n));for(var a=n[0],s=[],f=[],u=1;u<n.length;u++){var c=Gn(e,n[u],u,a,f,r);(c!==null||i===!1)&&s.push(c)}if(l)for(var p=Us(f),$;!($=p()).done;){var k=$.value;k.row=l[k.row-1]+1}return{rows:s,errors:f}}function Gn(n,e,r,t,o,l){for(var i={},a=!0,s=function(){var p=u[f],$=n[p],k=or($.type)==="object"&&!Array.isArray($.type),y=e[t.indexOf(p)];y===void 0&&(y=null);var C=void 0,w=void 0,I=void 0;if(k)C=Gn($.type,e,r,t,o,l);else if(y===null)C=null;else if(Array.isArray($.type)){var D=!1,A=Xs(y).map(function(F){var L=Vr(F,$,l);return L.error&&(C=F,w=L.error,I=L.reason),L.value!==null&&(D=!0),L.value});w||(C=D?A:null)}else{var N=Vr(y,$,l);w=N.error,I=N.reason,C=w?y:N.value}!w&&C===null&&$.required&&(w="required"),w?(w={error:w,row:r+1,column:p,value:C},I&&(w.reason=I),$.type&&(w.type=$.type),o.push(w)):(a&&C!==null&&(a=!1),(C!==null||l.includeNullValues)&&(i[$.prop]=C))},f=0,u=Object.keys(n);f<u.length;f++)s();return a?null:i}function Vr(n,e,r){if(n===null)return{value:null};var t;if(e.parse?t=pt(n,e.parse):e.type?t=qs(n,Array.isArray(e.type)?e.type[0]:e.type,r):t={value:n},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(o){return{error:o.message}}}return t}function pt(n,e){try{return n=e(n),n===void 0?{value:null}:{value:n}}catch(t){var r={error:t.message};return t.reason&&(r.reason=t.reason),r}}function qs(n,e,r){switch(e){case String:return pt(n,Fs);case Number:return pt(n,Ds);case Date:return pt(n,function(t){return Bs(t,{properties:r.properties})});case Boolean:return pt(n,js);default:if(typeof e=="function")return pt(n,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Vn(n,e,r){for(var t=0,o="";r+t<n.length;){var l=n[r+t];if(l===e)return[o,t];if(l==='"'){var i=Vn(n,'"',r+t+1);o+=i[0],t+=1+i[1]+1}else o+=l,t++}return[o,t]}function Xs(n){for(var e=[],r=0;r<n.length;){var t=Vn(n,",",r),o=Hs(t,2),l=o[0],i=o[1];r+=i+1,e.push(l.trim())}return e}var Ks=function(e){return e[0].map(function(r,t){return e.map(function(o){return o[t]})})};function Zs(n){for(var e=0,r=Object.keys(n);e<r.length;e++){var t=r[e],o=n[t];if(!o.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function lr(n){"@babel/helpers - typeof";return lr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lr(n)}function qn(n){for(var e={},r=0,t=Object.keys(n);r<t.length;r++){var o=t[r],l=n[o],i=void 0;lr(l)==="object"&&(l=Object.keys(n[o])[0],i=qn(n[o][l])),e[o]={prop:l},i&&(e[o].type=i)}return e}var Ys=["schema","map"];function qr(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,t)}return r}function It(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qr(Object(r),!0).forEach(function(t){Js(n,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):qr(Object(r)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))})}return n}function Js(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Qs(n,e){if(n==null)return{};var r=xs(n,e),t,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(o=0;o<l.length;o++)t=l[o],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function xs(n,e){if(n==null)return{};var r={},t=Object.keys(n),o,l;for(l=0;l<t.length;l++)o=t[l],!(e.indexOf(o)>=0)&&(r[o]=n[o]);return r}function ei(n,e,r){var t=r.schema,o=r.map,l=Qs(r,Ys);!t&&o&&(t=qn(o));var i=Cs(n,e,It(It({},l),{},{properties:t||l.properties}));return t?Vs(i.data,t,It(It({},l),{},{properties:i.properties})):i}function ti(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return vl(n).then(function(r){return ei(r,rl,e)})}function ri(n){let e=new Map;for(let[t,o]of Object.entries(n.schemes))e.set(t,{scheme_reference:t,num_features:0,authority_or_region:o.authority_or_region,capital_scheme_id:o.capital_scheme_id,funding_programme:o.funding_programme});let r=1;for(let t of n.features){let o=e.get(t.properties.scheme_reference);o.num_features++,t.properties.funding_programme=o.funding_programme,t.id=r++}return e}async function ni(n){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:r}=await ti(n,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let o of r){let l=xn(o.lat_lon.split(",").map(parseFloat).reverse()),i=o;i.submission_time=o.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:l},id:t.features.length+1})}return t}const J={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"},Vt=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function oi(n){let e,r,t,o,l;function i(s){n[3](s)}let a={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return n[0]!==void 0&&(a.value=n[0]),e=new Nt({props:a}),q.push(()=>Z(e,"value",i)),e.$on("change",n[2]),o=new vo({props:{rows:n[1]}}),{c(){_(e.$$.fragment),t=O(),_(o.$$.fragment)},m(s,f){b(e,s,f),d(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};!r&&f&1&&(r=!0,u.value=s[0],Y(()=>r=!1)),e.$set(u);const c={};f&2&&(c.rows=s[1]),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){h(e.$$.fragment,s),h(o.$$.fragment,s),l=!1},d(s){s&&g(t),v(e,s),v(o,s)}}}function li(n,e,r){let t;Q(n,Se,s=>r(4,t=s));let o="interventionType",l=vr("v1");function i(){let s;o=="interventionType"?(s=An("v1"),r(1,l=vr("v1"))):(s=Sn(["get","funding_programme"],{ATF2:J.atf2,ATF3:J.atf3,ATF4:J.atf4},"grey"),r(1,l=[["ATF2",J.atf2],["ATF3",J.atf3],["ATF4",J.atf4]])),t.setPaintProperty("interventions-points","circle-color",s),t.setPaintProperty("interventions-lines","line-color",s),t.setPaintProperty("interventions-polygons","fill-color",s),t.setPaintProperty("interventions-polygon-outlines","line-color",s)}function a(s){o=s,r(0,o)}return[o,l,i,a]}class si extends U{constructor(e){super(),G(this,e,li,oi,z,{})}}function ii(n){let e;return{c(){e=S("Clear")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function ai(n){let e,r,t,o,l,i;return t=new St({props:{$$slots:{default:[ii]},$$scope:{ctx:n}}}),t.$on("click",n[13]),{c(){e=E("input"),r=O(),_(t.$$.fragment),K(e,"type","text"),K(e,"class","govuk-input govuk-input--width-10"),K(e,"id","filterText")},m(a,s){d(a,e,s),gr(e,n[0]),d(a,r,s),b(t,a,s),o=!0,l||(i=ht(e,"input",n[12]),l=!0)},p(a,s){s&1&&e.value!==a[0]&&gr(e,a[0]);const f={};s&131072&&(f.$$scope={dirty:s,ctx:a}),t.$set(f)},i(a){o||(m(t.$$.fragment,a),o=!0)},o(a){h(t.$$.fragment,a),o=!1},d(a){a&&(g(e),g(r)),v(t,a),l=!1,i()}}}function fi(n){let e,r,t,o,l,i,a,s,f,u;function c(y){n[10](y)}let p={label:"Authority or region",id:"filterAuthority",choices:n[5],emptyOption:!0};n[2]!==void 0&&(p.value=n[2]),e=new Nt({props:p}),q.push(()=>Z(e,"value",c));function $(y){n[11](y)}let k={label:"Funding programme",id:"filterFundingProgramme",choices:n[6],emptyOption:!0};return n[3]!==void 0&&(k.value=n[3]),o=new Nt({props:k}),q.push(()=>Z(o,"value",$)),a=new Cn({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[ai]},$$scope:{ctx:n}}}),f=new si({}),{c(){_(e.$$.fragment),t=O(),_(o.$$.fragment),i=O(),_(a.$$.fragment),s=O(),_(f.$$.fragment)},m(y,C){b(e,y,C),d(y,t,C),b(o,y,C),d(y,i,C),b(a,y,C),d(y,s,C),b(f,y,C),u=!0},p(y,C){const w={};C&32&&(w.choices=y[5]),!r&&C&4&&(r=!0,w.value=y[2],Y(()=>r=!1)),e.$set(w);const I={};C&64&&(I.choices=y[6]),!l&&C&8&&(l=!0,I.value=y[3],Y(()=>l=!1)),o.$set(I);const D={};C&131073&&(D.$$scope={dirty:C,ctx:y}),a.$set(D)},i(y){u||(m(e.$$.fragment,y),m(o.$$.fragment,y),m(a.$$.fragment,y),m(f.$$.fragment,y),u=!0)},o(y){h(e.$$.fragment,y),h(o.$$.fragment,y),h(a.$$.fragment,y),h(f.$$.fragment,y),u=!1},d(y){y&&(g(t),g(i),g(s)),v(e,y),v(o,y),v(a,y),v(f,y)}}}function ui(n){let e,r=n[1].size.toLocaleString()+"",t,o,l=n[7].route.toLocaleString()+"",i,a,s=n[7].area.toLocaleString()+"",f,u,c=n[7].crossing.toLocaleString()+"",p,$,k=n[7].other.toLocaleString()+"",y,C;return{c(){e=S("Showing "),t=S(r),o=S(" schemes ("),i=S(l),a=S(`
    routes, `),f=S(s),u=S(` areas,
    `),p=S(c),$=S(" crossings, "),y=S(k),C=S(`
    other)`)},m(w,I){d(w,e,I),d(w,t,I),d(w,o,I),d(w,i,I),d(w,a,I),d(w,f,I),d(w,u,I),d(w,p,I),d(w,$,I),d(w,y,I),d(w,C,I)},p(w,I){I&2&&r!==(r=w[1].size.toLocaleString()+"")&&x(t,r),I&128&&l!==(l=w[7].route.toLocaleString()+"")&&x(i,l),I&128&&s!==(s=w[7].area.toLocaleString()+"")&&x(f,s),I&128&&c!==(c=w[7].crossing.toLocaleString()+"")&&x(p,c),I&128&&k!==(k=w[7].other.toLocaleString()+"")&&x(y,k)},d(w){w&&(g(e),g(t),g(o),g(i),g(a),g(f),g(u),g(p),g($),g(y),g(C))}}}function ci(n){let e,r,t;function o(i){n[14](i)}let l={id:"show-schemes",$$slots:{default:[ui]},$$scope:{ctx:n}};return n[4]!==void 0&&(l.checked=n[4]),e=new ie({props:l}),q.push(()=>Z(e,"checked",o)),{c(){_(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const s={};a&131202&&(s.$$scope={dirty:a,ctx:i}),!r&&a&16&&(r=!0,s.checked=i[4],Y(()=>r=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){h(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function pi(n){let e,r,t,o;return e=new Ie({props:{label:"Filters",$$slots:{default:[fi]},$$scope:{ctx:n}}}),t=new Lt({props:{small:!0,$$slots:{default:[ci]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment),r=O(),_(t.$$.fragment)},m(l,i){b(e,l,i),d(l,r,i),b(t,l,i),o=!0},p(l,[i]){const a={};i&131181&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&131218&&(s.$$scope={dirty:i,ctx:l}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){h(e.$$.fragment,l),h(t.$$.fragment,l),o=!1},d(l){l&&g(r),v(e,l),v(t,l)}}}function mi(n,e,r){let t,o;Q(n,mt,A=>r(15,t=A)),Q(n,Se,A=>r(9,o=A));let{schemes:l}=e,{schemesToBeShown:i=new Set}=e,{filterText:a=""}=e,s=[],f="",u=[],c="",p={area:0,route:0,crossing:0,other:0},$=!0;bt(()=>{let A=new Set,N=new Set;for(let F of l.values())F.authority_or_region&&A.add(F.authority_or_region),F.funding_programme&&N.add(F.funding_programme);r(5,s=Array.from(A.entries())),s.sort(),r(6,u=Array.from(N.entries())),u.sort()});function k(A,N,F){let L=A.toLowerCase(),M=T=>{var H,W;if(L&&!((H=T.properties.name)!=null&&H.toLowerCase().includes(L))&&!((W=T.properties.description)!=null&&W.toLowerCase().includes(L)))return!1;if(N||F){let V=l.get(T.properties.scheme_reference);if(N&&V.authority_or_region!=N||F&&V.funding_programme!=F)return!1}return!0};r(1,i=new Set(t.features.filter(M).map(T=>T.properties.scheme_reference))),r(7,p={area:0,route:0,crossing:0,other:0});let j=T=>{var H,W;return!(!i.has(T.properties.scheme_reference)||L&&!((H=T.properties.name)!=null&&H.toLowerCase().includes(L))&&!((W=T.properties.description)!=null&&W.toLowerCase().includes(L)))};mt.update(T=>{for(let H of T.features)j(H)?(delete H.properties.hide_while_editing,r(7,p[H.properties.intervention_type]++,p)):H.properties.hide_while_editing=!0;return T}),r(7,p)}function y(A){f=A,r(2,f)}function C(A){c=A,r(3,c)}function w(){a=this.value,r(0,a)}const I=()=>r(0,a="");function D(A){$=A,r(4,$)}return n.$$set=A=>{"schemes"in A&&r(8,l=A.schemes),"schemesToBeShown"in A&&r(1,i=A.schemesToBeShown),"filterText"in A&&r(0,a=A.filterText)},n.$$.update=()=>{if(n.$$.dirty&528&&o)for(let A of["interventions-polygons","interventions-polygon-outlines","interventions-lines","interventions-lines-endpoints","interventions-points"])o.getLayer(A)&&o.setLayoutProperty(A,"visibility",$?"visible":"none");n.$$.dirty&13&&k(a,f,c)},[a,i,f,c,$,s,u,p,l,o,y,C,w,I,D]}class $i extends U{constructor(e){super(),G(this,e,mi,pi,z,{schemes:8,schemesToBeShown:1,filterText:0})}}function di(n,e,r){let t;Q(n,Se,a=>r(3,t=a));let o=null,{markerPosition:l}=e,{markerPositionUpdated:i}=e;return bt(()=>{o=new xt.Marker({draggable:!0}).setLngLat(l).addTo(t),o.on("dragstart",()=>{t.getCanvas().style.cursor="grabbing"}),o.on("drag",()=>{r(0,l=o.getLngLat()),i()}),o.on("dragend",()=>{t.getCanvas().style.cursor="inherit"})}),_t(()=>{o&&o.remove()}),n.$$set=a=>{"markerPosition"in a&&r(0,l=a.markerPosition),"markerPositionUpdated"in a&&r(1,i=a.markerPositionUpdated)},[l,i]}class gi extends U{constructor(e){super(),G(this,e,di,null,z,{markerPosition:0,markerPositionUpdated:1})}}function Xr(n,e,r){const t=n.slice();return t[16]=e[r],t[17]=e,t[18]=r,t}function hi(n){let e,r;return e=new St({props:{$$slots:{default:[bi]},$$scope:{ctx:n}}}),e.$on("click",n[4]),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,o){const l={};o&524288&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function _i(n){let e,r;return e=new St({props:{$$slots:{default:[vi]},$$scope:{ctx:n}}}),e.$on("click",n[3]),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,o){const l={};o&524288&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function bi(n){let e;return{c(){e=S("Disable Line Measurement Tool")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function vi(n){let e;return{c(){e=S("Enable Line Measurement Tool")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Kr(n){var c;let e,r,t,o=[],l=new Map,i,a,s=n[2]&&((c=n[2].properties)==null?void 0:c.length)&&Zr(n);r=new Ie({props:{label:"Help",$$slots:{default:[wi]},$$scope:{ctx:n}}});let f=Fe(n[1]);const u=p=>p[16].id;for(let p=0;p<f.length;p+=1){let $=Xr(n,f,p),k=u($);l.set(k,o[p]=Yr(k,$))}return{c(){s&&s.c(),e=O(),_(r.$$.fragment),t=O();for(let p=0;p<o.length;p+=1)o[p].c();i=$e()},m(p,$){s&&s.m(p,$),d(p,e,$),b(r,p,$),d(p,t,$);for(let k=0;k<o.length;k+=1)o[k]&&o[k].m(p,$);d(p,i,$),a=!0},p(p,$){var y;p[2]&&((y=p[2].properties)!=null&&y.length)?s?s.p(p,$):(s=Zr(p),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null);const k={};$&524288&&(k.$$scope={dirty:$,ctx:p}),r.$set(k),$&130&&(f=Fe(p[1]),re(),o=to(o,$,u,1,p,f,l,i.parentNode,ro,Yr,i,Xr),ne())},i(p){if(!a){m(r.$$.fragment,p);for(let $=0;$<f.length;$+=1)m(o[$]);a=!0}},o(p){h(r.$$.fragment,p);for(let $=0;$<o.length;$+=1)h(o[$]);a=!1},d(p){p&&(g(e),g(t),g(i)),s&&s.d(p),v(r,p);for(let $=0;$<o.length;$+=1)o[$].d(p)}}}function Zr(n){var i;let e,r,t=((i=n[2].properties)==null?void 0:i.length)+"",o,l;return{c(){e=E("p"),r=S("Length: "),o=S(t),l=S("m")},m(a,s){d(a,e,s),P(e,r),P(e,o),P(e,l)},p(a,s){var f;s&4&&t!==(t=((f=a[2].properties)==null?void 0:f.length)+"")&&x(o,t)},d(a){a&&g(e)}}}function wi(n){let e;return{c(){e=E("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and Drag</b>
        an existing waypoint to move it</li> <li><b>Hold shift and click on</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(r,t){d(r,e,t)},p:ee,d(r){r&&g(e)}}}function Yr(n,e){let r,t,o,l;function i(s){e[8](s,e[16])}let a={markerPositionUpdated:e[7]};return e[16].lngLat!==void 0&&(a.markerPosition=e[16].lngLat),t=new gi({props:a}),q.push(()=>Z(t,"markerPosition",i)),{key:n,first:null,c(){r=$e(),_(t.$$.fragment),this.first=r},m(s,f){d(s,r,f),b(t,s,f),l=!0},p(s,f){e=s;const u={};!o&&f&2&&(o=!0,u.markerPosition=e[16].lngLat,Y(()=>o=!1)),t.$set(u)},i(s){l||(m(t.$$.fragment,s),l=!0)},o(s){h(t.$$.fragment,s),l=!1},d(s){s&&g(r),v(t,s)}}}function yi(n){let e,r,t,o,l,i,a;const s=[_i,hi],f=[];function u(p,$){return p[0]?0:1}e=u(n),r=f[e]=s[e](n);let c=!n[0]&&Kr(n);return{c(){r.c(),t=O(),c&&c.c(),o=$e()},m(p,$){f[e].m(p,$),d(p,t,$),c&&c.m(p,$),d(p,o,$),l=!0,i||(a=[ht(window,"keydown",n[5]),ht(window,"keyup",n[6])],i=!0)},p(p,[$]){let k=e;e=u(p),e===k?f[e].p(p,$):(re(),h(f[k],1,1,()=>{f[k]=null}),ne(),r=f[e],r?r.p(p,$):(r=f[e]=s[e](p),r.c()),m(r,1),r.m(t.parentNode,t)),p[0]?c&&(re(),h(c,1,1,()=>{c=null}),ne()):c?(c.p(p,$),$&1&&m(c,1)):(c=Kr(p),c.c(),m(c,1),c.m(o.parentNode,o))},i(p){l||(m(r),m(c),l=!0)},o(p){h(r),h(c),l=!1},d(p){p&&(g(t),g(o)),f[e].d(p),c&&c.d(p),i=!1,eo(a)}}}const tt="measurement-line";function ki(n,e,r){let t;Q(n,Se,D=>r(11,t=D));let o=!0,l=[],i,a=!1,s=0;function f(D){o||(a||(l.push({id:s++,lngLat:D.lngLat}),r(1,l),y()),a&&l.length>0&&(u(D.lngLat),y()))}function u(D){let N=new xt.LngLat(0,-90).distanceTo(new xt.LngLat(0,90)),F;l.forEach(L=>{const M=L.lngLat;N>=D.distanceTo(M)&&(F=M,N=D.distanceTo(M))}),F&&r(1,l=l.filter(L=>{const M=L.lngLat;return M.lng!=(F==null?void 0:F.lng)||M.lat!=(F==null?void 0:F.lat)}))}function c(){r(0,o=!1)}function p(){r(0,o=!0),r(1,l=[]),C()}function $(D){D.key==="Shift"&&(a=!0),D.key==="Escape"&&p()}function k(D){D.key==="Shift"&&(a=!1)}function y(){if(l.length<2){C();return}const D=l.map(A=>[A.lngLat.lng,A.lngLat.lat]);r(2,i=no(D,{})),i.properties&&r(2,i.properties.length=(wo(i)*1e3).toFixed(2),i),w()}function C(){t.getSource(tt)&&(t.getSource(tt).setData(fr()),r(2,i=void 0))}function w(){t.getSource(tt)?t.getSource(tt).setData(i):(oo(t,tt,i),ft(t,{id:tt,source:tt,color:mo.measuringLine,width:5}))}bt(()=>{t.on("click",f)}),_t(()=>{t.off("click",f)});function I(D,A){n.$$.not_equal(A.lngLat,D)&&(A.lngLat=D,r(1,l))}return[o,l,i,c,p,$,k,y,I]}class Si extends U{constructor(e){super(),G(this,e,ki,yi,z,{})}}function Ci(n){let e;return{c(){e=S(`Open Government License
  `)},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Ti(n){let e,r,t,o,l;return t=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ci]},$$scope:{ctx:n}}}),{c(){e=E("p"),r=S("License: "),_(t.$$.fragment),o=S(`. Contains OS data © Crown copyright and database right
  2023.`)},m(i,a){d(i,e,a),P(e,r),b(t,e,null),P(e,o),l=!0},p(i,[a]){const s={};a&1&&(s.$$scope={dirty:a,ctx:i}),t.$set(s)},i(i){l||(m(t.$$.fragment,i),l=!0)},o(i){h(t.$$.fragment,i),l=!1},d(i){i&&g(e),v(t)}}}class Ge extends U{constructor(e){super(),G(this,e,null,Ti,z,{})}}function Jr(n,e,r){const t=n.slice();return t[2]=e[r],t}function Qr(n,e,r){const t=n.slice();return t[5]=e[r],t}function xr(n){let e,r;return{c(){e=E("span"),r=S(` 
    `),Be(e,"background",n[5]),Be(e,"width","100%"),Be(e,"border","1px solid black")},m(t,o){d(t,e,o),P(e,r)},p(t,o){o&1&&Be(e,"background",t[5])},d(t){t&&g(e)}}}function en(n){let e,r=n[2]+"",t;return{c(){e=E("span"),t=S(r)},m(o,l){d(o,e,l),P(e,t)},p(o,l){l&2&&r!==(r=o[2]+"")&&x(t,r)},d(o){o&&g(e)}}}function Li(n){let e,r,t,o=Fe(n[0]),l=[];for(let s=0;s<o.length;s+=1)l[s]=xr(Qr(n,o,s));let i=Fe(n[1]),a=[];for(let s=0;s<i.length;s+=1)a[s]=en(Jr(n,i,s));return{c(){e=E("div");for(let s=0;s<l.length;s+=1)l[s].c();r=O(),t=E("div");for(let s=0;s<a.length;s+=1)a[s].c();Be(e,"display","flex"),Be(t,"display","flex"),Be(t,"justify-content","space-between")},m(s,f){d(s,e,f);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(e,null);d(s,r,f),d(s,t,f);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(t,null)},p(s,[f]){if(f&1){o=Fe(s[0]);let u;for(u=0;u<o.length;u+=1){const c=Qr(s,o,u);l[u]?l[u].p(c,f):(l[u]=xr(c),l[u].c(),l[u].m(e,null))}for(;u<l.length;u+=1)l[u].d(1);l.length=o.length}if(f&2){i=Fe(s[1]);let u;for(u=0;u<i.length;u+=1){const c=Jr(s,i,u);a[u]?a[u].p(c,f):(a[u]=en(c),a[u].c(),a[u].m(t,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=i.length}},i:ee,o:ee,d(s){s&&(g(e),g(r),g(t)),Et(l,s),Et(a,s)}}}function Oi(n,e,r){let{colorScale:t}=e,{limits:o}=e;return n.$$set=l=>{"colorScale"in l&&r(0,t=l.colorScale),"limits"in l&&r(1,o=l.limits)},[t,o]}class xe extends U{constructor(e){super(),G(this,e,Oi,Li,z,{colorScale:0,limits:1})}}function Ai(n){let e;return{c(){e=S("Percent of households with a car")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Ii(n){let e;return{c(){e=S(`NOMIS TS045
        `)},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Pi(n){let e;return{c(){e=S(`ONS Geography
        `)},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Mi(n){let e;return{c(){e=S(`Open Government License
        `)},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Ei(n){let e,r,t,o,l,i,a,s,f,u,c,p;return t=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ii]},$$scope:{ctx:n}}}),l=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Pi]},$$scope:{ctx:n}}}),u=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Mi]},$$scope:{ctx:n}}}),{c(){e=E("p"),r=S("Car/van availability data is from the 2021 census, via "),_(t.$$.fragment),o=S(". Output area boundaries from "),_(l.$$.fragment),i=S("."),a=O(),s=E("p"),f=S("License: "),_(u.$$.fragment),c=S(`. Contains OS data © Crown copyright and database
        right 2023.`)},m($,k){d($,e,k),P(e,r),b(t,e,null),P(e,o),b(l,e,null),P(e,i),d($,a,k),d($,s,k),P(s,f),b(u,s,null),P(s,c),p=!0},p($,k){const y={};k&65536&&(y.$$scope={dirty:k,ctx:$}),t.$set(y);const C={};k&65536&&(C.$$scope={dirty:k,ctx:$}),l.$set(C);const w={};k&65536&&(w.$$scope={dirty:k,ctx:$}),u.$set(w)},i($){p||(m(t.$$.fragment,$),m(l.$$.fragment,$),m(u.$$.fragment,$),p=!0)},o($){h(t.$$.fragment,$),h(l.$$.fragment,$),h(u.$$.fragment,$),p=!1},d($){$&&(g(e),g(a),g(s)),v(t),v(l),v(u)}}}function Ni(n){let e,r,t;return r=new ae({props:{$$slots:{default:[Ei]},$$scope:{ctx:n}}}),{c(){e=E("span"),_(r.$$.fragment),K(e,"slot","right")},m(o,l){d(o,e,l),b(r,e,null),t=!0},p(o,l){const i={};l&65536&&(i.$$scope={dirty:l,ctx:o}),r.$set(i)},i(o){t||(m(r.$$.fragment,o),t=!0)},o(o){h(r.$$.fragment,o),t=!1},d(o){o&&g(e),v(r)}}}function tn(n){let e,r;return e=new xe({props:{colorScale:n[4],limits:n[7]()}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p:ee,i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Di(n){let e;return{c(){e=S("Average cars per household")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Fi(n){let e;return{c(){e=S(`NOMIS TS045
        `)},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function ji(n){let e;return{c(){e=S(`ONS Geography
        `)},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Bi(n){let e;return{c(){e=S(`Open Government License
        `)},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Hi(n){let e,r,t,o,l,i,a,s,f,u,c,p,$,k;return l=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Fi]},$$scope:{ctx:n}}}),a=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ji]},$$scope:{ctx:n}}}),p=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Bi]},$$scope:{ctx:n}}}),{c(){e=E("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,r=O(),t=E("p"),o=S("Car/van availability data is from the 2021 census, via "),_(l.$$.fragment),i=S(". Output area boundaries from "),_(a.$$.fragment),s=S("."),f=O(),u=E("p"),c=S("License: "),_(p.$$.fragment),$=S(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(y,C){d(y,e,C),d(y,r,C),d(y,t,C),P(t,o),b(l,t,null),P(t,i),b(a,t,null),P(t,s),d(y,f,C),d(y,u,C),P(u,c),b(p,u,null),P(u,$),k=!0},p(y,C){const w={};C&65536&&(w.$$scope={dirty:C,ctx:y}),l.$set(w);const I={};C&65536&&(I.$$scope={dirty:C,ctx:y}),a.$set(I);const D={};C&65536&&(D.$$scope={dirty:C,ctx:y}),p.$set(D)},i(y){k||(m(l.$$.fragment,y),m(a.$$.fragment,y),m(p.$$.fragment,y),k=!0)},o(y){h(l.$$.fragment,y),h(a.$$.fragment,y),h(p.$$.fragment,y),k=!1},d(y){y&&(g(e),g(r),g(t),g(f),g(u)),v(l),v(a),v(p)}}}function Ri(n){let e,r,t;return r=new ae({props:{$$slots:{default:[Hi]},$$scope:{ctx:n}}}),{c(){e=E("span"),_(r.$$.fragment),K(e,"slot","right")},m(o,l){d(o,e,l),b(r,e,null),t=!0},p(o,l){const i={};l&65536&&(i.$$scope={dirty:l,ctx:o}),r.$set(i)},i(o){t||(m(r.$$.fragment,o),t=!0)},o(o){h(r.$$.fragment,o),t=!1},d(o){o&&g(e),v(r)}}}function rn(n){let e,r;return e=new xe({props:{colorScale:n[4],limits:n[7]()}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p:ee,i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Wi(n){let e;return{c(){e=S("Population density")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function zi(n){let e;return{c(){e=S(`NOMIS TS006
        `)},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Ui(n){let e;return{c(){e=S(`ONS Geography
        `)},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Gi(n){let e,r,t,o,l,i,a,s,f;return t=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[zi]},$$scope:{ctx:n}}}),l=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ui]},$$scope:{ctx:n}}}),s=new Ge({}),{c(){e=E("p"),r=S("Population density data is from the 2021 census, via "),_(t.$$.fragment),o=S(". Output area boundaries from "),_(l.$$.fragment),i=S("."),a=O(),_(s.$$.fragment)},m(u,c){d(u,e,c),P(e,r),b(t,e,null),P(e,o),b(l,e,null),P(e,i),d(u,a,c),b(s,u,c),f=!0},p(u,c){const p={};c&65536&&(p.$$scope={dirty:c,ctx:u}),t.$set(p);const $={};c&65536&&($.$$scope={dirty:c,ctx:u}),l.$set($)},i(u){f||(m(t.$$.fragment,u),m(l.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){h(t.$$.fragment,u),h(l.$$.fragment,u),h(s.$$.fragment,u),f=!1},d(u){u&&(g(e),g(a)),v(t),v(l),v(s,u)}}}function Vi(n){let e,r,t;return r=new ae({props:{$$slots:{default:[Gi]},$$scope:{ctx:n}}}),{c(){e=E("span"),_(r.$$.fragment),K(e,"slot","right")},m(o,l){d(o,e,l),b(r,e,null),t=!0},p(o,l){const i={};l&65536&&(i.$$scope={dirty:l,ctx:o}),r.$set(i)},i(o){t||(m(r.$$.fragment,o),t=!0)},o(o){h(r.$$.fragment,o),t=!1},d(o){o&&g(e),v(r)}}}function nn(n){let e,r,t,o;return t=new xe({props:{colorScale:n[4],limits:n[7]().map(Xi)}}),{c(){e=E("p"),e.textContent="(people per square kilometres)",r=O(),_(t.$$.fragment)},m(l,i){d(l,e,i),d(l,r,i),b(t,l,i),o=!0},p:ee,i(l){o||(m(t.$$.fragment,l),o=!0)},o(l){h(t.$$.fragment,l),o=!1},d(l){l&&(g(e),g(r)),v(t,l)}}}function qi(n){let e,r,t,o,l,i,a,s,f,u,c,p,$,k;function y(M){n[9](M)}let C={id:"percent_households_with_car",$$slots:{right:[Ni],default:[Ai]},$$scope:{ctx:n}};n[0]!==void 0&&(C.checked=n[0]),e=new ie({props:C}),q.push(()=>Z(e,"checked",y)),e.$on("change",n[10]);let w=n[3]=="percent_households_with_car"&&tn(n);function I(M){n[11](M)}let D={id:"average_cars_per_household",$$slots:{right:[Ri],default:[Di]},$$scope:{ctx:n}};n[1]!==void 0&&(D.checked=n[1]),l=new ie({props:D}),q.push(()=>Z(l,"checked",I)),l.$on("change",n[12]);let A=n[3]=="average_cars_per_household"&&rn(n);function N(M){n[13](M)}let F={id:"population_density",$$slots:{right:[Vi],default:[Wi]},$$scope:{ctx:n}};n[2]!==void 0&&(F.checked=n[2]),f=new ie({props:F}),q.push(()=>Z(f,"checked",N)),f.$on("change",n[14]);let L=n[3]=="population_density"&&nn(n);return $=new ke({props:{layer:Ne,tooltip:n[5],show:n[3]!="",clickable:!0}}),$.$on("click",n[6]),{c(){_(e.$$.fragment),t=O(),w&&w.c(),o=O(),_(l.$$.fragment),a=O(),A&&A.c(),s=O(),_(f.$$.fragment),c=O(),L&&L.c(),p=O(),_($.$$.fragment)},m(M,j){b(e,M,j),d(M,t,j),w&&w.m(M,j),d(M,o,j),b(l,M,j),d(M,a,j),A&&A.m(M,j),d(M,s,j),b(f,M,j),d(M,c,j),L&&L.m(M,j),d(M,p,j),b($,M,j),k=!0},p(M,[j]){const T={};j&65536&&(T.$$scope={dirty:j,ctx:M}),!r&&j&1&&(r=!0,T.checked=M[0],Y(()=>r=!1)),e.$set(T),M[3]=="percent_households_with_car"?w?(w.p(M,j),j&8&&m(w,1)):(w=tn(M),w.c(),m(w,1),w.m(o.parentNode,o)):w&&(re(),h(w,1,1,()=>{w=null}),ne());const H={};j&65536&&(H.$$scope={dirty:j,ctx:M}),!i&&j&2&&(i=!0,H.checked=M[1],Y(()=>i=!1)),l.$set(H),M[3]=="average_cars_per_household"?A?(A.p(M,j),j&8&&m(A,1)):(A=rn(M),A.c(),m(A,1),A.m(s.parentNode,s)):A&&(re(),h(A,1,1,()=>{A=null}),ne());const W={};j&65536&&(W.$$scope={dirty:j,ctx:M}),!u&&j&4&&(u=!0,W.checked=M[2],Y(()=>u=!1)),f.$set(W),M[3]=="population_density"?L?(L.p(M,j),j&8&&m(L,1)):(L=nn(M),L.c(),m(L,1),L.m(p.parentNode,p)):L&&(re(),h(L,1,1,()=>{L=null}),ne());const V={};j&8&&(V.show=M[3]!=""),$.$set(V)},i(M){k||(m(e.$$.fragment,M),m(w),m(l.$$.fragment,M),m(A),m(f.$$.fragment,M),m(L),m($.$$.fragment,M),k=!0)},o(M){h(e.$$.fragment,M),h(w),h(l.$$.fragment,M),h(A),h(f.$$.fragment,M),h(L),h($.$$.fragment,M),k=!1},d(M){M&&(g(t),g(o),g(a),g(s),g(c),g(p)),v(e,M),w&&w.d(M),v(l,M),A&&A.d(M),v(f,M),L&&L.d(M),v($,M)}}}let Ne="census_output_areas";const Xi=n=>n.toLocaleString();function Ki(n,e,r){let t;Q(n,Se,D=>r(8,t=D));let o=`${Ne}-outline`,l=J.sequential_low_to_high,i=!1,a=!1,s=!1,f="";vt(t,Ne,`${ue()}/v1/${Ne}.pmtiles`),lo(t,{id:Ne,source:Ne,sourceLayer:Ne,color:"black",opacity:wt(.5,.7)}),ft(t,{id:o,source:Ne,sourceLayer:Ne,color:"black",width:.5});function u(D){let A=D.properties.OA21CD,N=D.properties[f];return f=="percent_households_with_car"?`<p>${N}% of households in ${A} have 1 or more cars</p>`:f=="average_cars_per_household"?`<p>Households in ${A} have an average of ${N} cars</p>`:`<p>There are ${N.toLocaleString()} people per square kilometre in ${A}</p>`}function c(D){let A=D.detail.properties.OA21CD;f=="percent_households_with_car"||f=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${A}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${A}`,"_blank")}function p(){return f=="percent_households_with_car"?[0,20,40,60,80,100]:f=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function $(D){i=D,r(0,i)}const k=()=>{r(1,a=!1),r(2,s=!1)};function y(D){a=D,r(1,a)}const C=()=>{r(0,i=!1),r(2,s=!1)};function w(D){s=D,r(2,s)}const I=()=>{r(0,i=!1),r(1,a=!1)};return n.$$.update=()=>{n.$$.dirty&271&&(i?r(3,f="percent_households_with_car"):a?r(3,f="average_cars_per_household"):s?r(3,f="population_density"):r(3,f=""),f?(t.setPaintProperty(Ne,"fill-color",Je(["get",f],p(),l)),t.setLayoutProperty(o,"visibility","visible")):t.setLayoutProperty(o,"visibility","none"))},[i,a,s,f,l,u,c,p,t,$,k,y,C,w,I]}class Zi extends U{constructor(e){super(),G(this,e,Ki,qi,z,{})}}function Yi(n){let e,r,t;return e=new be({props:{color:n[2]}}),{c(){_(e.$$.fragment),r=S(`
  Combined authorities`)},m(o,l){b(e,o,l),d(o,r,l),t=!0},p:ee,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){h(e.$$.fragment,o),t=!1},d(o){o&&g(r),v(e,o)}}}function Ji(n){let e;return{c(){e=S(`ONS Geography
        `)},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Qi(n){let e,r,t,o,l,i,a;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Ji]},$$scope:{ctx:n}}}),i=new Ge({}),{c(){e=E("p"),r=S("Data from "),_(t.$$.fragment),o=S(", as of December 2022."),l=O(),_(i.$$.fragment)},m(s,f){d(s,e,f),P(e,r),b(t,e,null),P(e,o),d(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),a=!1},d(s){s&&(g(e),g(l)),v(t),v(i,s)}}}function xi(n){let e,r,t;return r=new ae({props:{$$slots:{default:[Qi]},$$scope:{ctx:n}}}),{c(){e=E("span"),_(r.$$.fragment),K(e,"slot","right")},m(o,l){d(o,e,l),b(r,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),r.$set(i)},i(o){t||(m(r.$$.fragment,o),t=!0)},o(o){h(r.$$.fragment,o),t=!1},d(o){o&&g(e),v(r)}}}function ea(n){let e,r=n[5][0].properties.name+"",t;return{c(){e=E("p"),t=S(r)},m(o,l){d(o,e,l),P(e,t)},p(o,l){l&32&&r!==(r=o[5][0].properties.name+"")&&x(t,r)},d(o){o&&g(e)}}}function ta(n){let e,r;return e=new Ce({props:{openOn:"hover",$$slots:{default:[ea,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,o){const l={};o&96&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function ra(n){let e,r,t,o;return e=new ut({props:{id:jt,paint:{"fill-color":n[2],"fill-opacity":Qe(0,.5)},layout:{visibility:n[1]},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[ta]},$$scope:{ctx:n}}}),e.$on("click",oa),t=new ct({props:{id:n[3],paint:{"line-color":n[2],"line-width":2.5},layout:{visibility:n[1]}}}),{c(){_(e.$$.fragment),r=O(),_(t.$$.fragment)},m(l,i){b(e,l,i),d(l,r,i),b(t,l,i),o=!0},p(l,i){const a={};i&2&&(a.layout={visibility:l[1]}),i&64&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&2&&(s.layout={visibility:l[1]}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){h(e.$$.fragment,l),h(t.$$.fragment,l),o=!1},d(l){l&&g(r),v(e,l),v(t,l)}}}function na(n){let e,r,t,o,l;function i(s){n[4](s)}let a={id:jt,$$slots:{right:[xi],default:[Yi]},$$scope:{ctx:n}};return n[0]!==void 0&&(a.checked=n[0]),e=new ie({props:a}),q.push(()=>Z(e,"checked",i)),o=new pr({props:{data:`${ue()}/v1/${jt}.geojson`,$$slots:{default:[ra]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment),t=O(),_(o.$$.fragment)},m(s,f){b(e,s,f),d(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),!r&&f&1&&(r=!0,u.checked=s[0],Y(()=>r=!1)),e.$set(u);const c={};f&66&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){h(e.$$.fragment,s),h(o.$$.fragment,s),l=!1},d(s){s&&g(t),v(e,s),v(o,s)}}}let jt="combined_authorities";function oa(n){window.open(`https://www.ons.gov.uk/visualisations/areas/${n.detail.features[0].properties.CAUTH22CD}`,"_blank")}function la(n,e,r){let t,o=J.combined_authorities,l=`${jt}-outline`,i=!1;function a(s){i=s,r(0,i)}return n.$$.update=()=>{n.$$.dirty&1&&r(1,t=i?"visible":"none")},[i,t,o,l,a]}class sa extends U{constructor(e){super(),G(this,e,la,na,z,{})}}function on(n){const e=n[6][0].properties;n[7]=e}function ia(n){let e;return{c(){e=S("Indices of Multiple Deprivation")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function aa(n){let e;return{c(){e=S(`DLUCH GIS
        `)},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function fa(n){let e;return{c(){e=S(`here
        `)},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function ua(n){let e,r,t,o,l,i,a,s,f;return t=new X({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[aa]},$$scope:{ctx:n}}}),l=new X({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[fa]},$$scope:{ctx:n}}}),s=new Ge({}),{c(){e=E("p"),r=S("The 2019 English IMD scores come from "),_(t.$$.fragment),o=S(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),_(l.$$.fragment),i=S("."),a=O(),_(s.$$.fragment)},m(u,c){d(u,e,c),P(e,r),b(t,e,null),P(e,o),b(l,e,null),P(e,i),d(u,a,c),b(s,u,c),f=!0},p(u,c){const p={};c&256&&(p.$$scope={dirty:c,ctx:u}),t.$set(p);const $={};c&256&&($.$$scope={dirty:c,ctx:u}),l.$set($)},i(u){f||(m(t.$$.fragment,u),m(l.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){h(t.$$.fragment,u),h(l.$$.fragment,u),h(s.$$.fragment,u),f=!1},d(u){u&&(g(e),g(a)),v(t),v(l),v(s,u)}}}function ca(n){let e,r,t;return r=new ae({props:{$$slots:{default:[ua]},$$scope:{ctx:n}}}),{c(){e=E("span"),_(r.$$.fragment),K(e,"slot","right")},m(o,l){d(o,e,l),b(r,e,null),t=!0},p(o,l){const i={};l&256&&(i.$$scope={dirty:l,ctx:o}),r.$set(i)},i(o){t||(m(r.$$.fragment,o),t=!0)},o(o){h(r.$$.fragment,o),t=!1},d(o){o&&g(e),v(r)}}}function ln(n){let e,r;return e=new xe({props:{colorScale:n[3],limits:["Least deprived","Most deprived"]}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p:ee,i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function pa(n){on(n);let e,r=n[7].LSOA11CD+"",t,o,l,i=n[7].score+"",a,s,f,u,c,p=n[7].rank.toLocaleString()+"",$,k;return{c(){e=E("p"),t=S(r),o=S(` has an IMD score of
        `),l=E("b"),a=S(i),s=O(),f=E("p"),u=S("Rank: "),c=E("b"),$=S(p),k=S(`
        / 32,844 LSOAs`)},m(y,C){d(y,e,C),P(e,t),P(e,o),P(e,l),P(l,a),d(y,s,C),d(y,f,C),P(f,u),P(f,c),P(c,$),P(f,k)},p(y,C){on(y),C&64&&r!==(r=y[7].LSOA11CD+"")&&x(t,r),C&64&&i!==(i=y[7].score+"")&&x(a,i),C&64&&p!==(p=y[7].rank.toLocaleString()+"")&&x($,p)},d(y){y&&(g(e),g(s),g(f))}}}function ma(n){let e,r;return e=new Ce({props:{openOn:"hover",$$slots:{default:[pa,({features:t})=>({6:t}),({features:t})=>t?64:0]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,o){const l={};o&320&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function $a(n){let e,r,t,o;return e=new ut({props:{id:Bt,paint:{"fill-color":Je(["-",10,["get","decile"]],n[4],n[3]),"fill-opacity":Qe(.5,.7)},layout:{visibility:n[1]},manageHoverState:!0,$$slots:{default:[ma]},$$scope:{ctx:n}}}),t=new ct({props:{id:n[2],paint:{"line-color":"black","line-width":.5},layout:{visibility:n[1]}}}),{c(){_(e.$$.fragment),r=O(),_(t.$$.fragment)},m(l,i){b(e,l,i),d(l,r,i),b(t,l,i),o=!0},p(l,i){const a={};i&2&&(a.layout={visibility:l[1]}),i&256&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&2&&(s.layout={visibility:l[1]}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){h(e.$$.fragment,l),h(t.$$.fragment,l),o=!1},d(l){l&&g(r),v(e,l),v(t,l)}}}function da(n){let e,r,t,o,l,i;function a(u){n[5](u)}let s={id:Bt,$$slots:{right:[ca],default:[ia]},$$scope:{ctx:n}};n[0]!==void 0&&(s.checked=n[0]),e=new ie({props:s}),q.push(()=>Z(e,"checked",a));let f=n[0]&&ln(n);return l=new Ue({props:{url:`pmtiles://${ue()}/v1/${Bt}.pmtiles`,$$slots:{default:[$a]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment),t=O(),f&&f.c(),o=O(),_(l.$$.fragment)},m(u,c){b(e,u,c),d(u,t,c),f&&f.m(u,c),d(u,o,c),b(l,u,c),i=!0},p(u,[c]){const p={};c&256&&(p.$$scope={dirty:c,ctx:u}),!r&&c&1&&(r=!0,p.checked=u[0],Y(()=>r=!1)),e.$set(p),u[0]?f?(f.p(u,c),c&1&&m(f,1)):(f=ln(u),f.c(),m(f,1),f.m(o.parentNode,o)):f&&(re(),h(f,1,1,()=>{f=null}),ne());const $={};c&258&&($.$$scope={dirty:c,ctx:u}),l.$set($)},i(u){i||(m(e.$$.fragment,u),m(f),m(l.$$.fragment,u),i=!0)},o(u){h(e.$$.fragment,u),h(f),h(l.$$.fragment,u),i=!1},d(u){u&&(g(t),g(o)),v(e,u),f&&f.d(u),v(l,u)}}}let Bt="imd";function ga(n,e,r){let t,o=`${Bt}-outline`,l=J.sequential_low_to_high,i=[0,2,4,6,8,10],a=!1;function s(f){a=f,r(0,a)}return n.$$.update=()=>{n.$$.dirty&1&&r(1,t=a?"visible":"none")},[a,t,o,l,i,s]}class ha extends U{constructor(e){super(),G(this,e,ga,da,z,{})}}function _a(n){let e,r,t;return e=new be({props:{color:n[2]}}),{c(){_(e.$$.fragment),r=S(`
  Local Authority Districts`)},m(o,l){b(e,o,l),d(o,r,l),t=!0},p:ee,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){h(e.$$.fragment,o),t=!1},d(o){o&&g(r),v(e,o)}}}function ba(n){let e;return{c(){e=S(`ONS Geography
        `)},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function va(n){let e,r,t,o,l,i,a;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[ba]},$$scope:{ctx:n}}}),i=new Ge({}),{c(){e=E("p"),r=S("Data from "),_(t.$$.fragment),o=S(", as of May 2023."),l=O(),_(i.$$.fragment)},m(s,f){d(s,e,f),P(e,r),b(t,e,null),P(e,o),d(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),a=!1},d(s){s&&(g(e),g(l)),v(t),v(i,s)}}}function wa(n){let e,r,t;return r=new ae({props:{$$slots:{default:[va]},$$scope:{ctx:n}}}),{c(){e=E("span"),_(r.$$.fragment),K(e,"slot","right")},m(o,l){d(o,e,l),b(r,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),r.$set(i)},i(o){t||(m(r.$$.fragment,o),t=!0)},o(o){h(r.$$.fragment,o),t=!1},d(o){o&&g(e),v(r)}}}function ya(n){let e,r=n[5][0].properties.name+"",t;return{c(){e=E("p"),t=S(r)},m(o,l){d(o,e,l),P(e,t)},p(o,l){l&32&&r!==(r=o[5][0].properties.name+"")&&x(t,r)},d(o){o&&g(e)}}}function ka(n){let e,r;return e=new Ce({props:{openOn:"hover",$$slots:{default:[ya,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,o){const l={};o&96&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Sa(n){let e,r,t,o;return e=new ut({props:{id:Ht,paint:{"fill-color":n[2],"fill-opacity":Qe(0,.5)},layout:{visibility:n[1]},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[ka]},$$scope:{ctx:n}}}),e.$on("click",Ta),t=new ct({props:{id:n[3],paint:{"line-color":n[2],"line-width":2.5},layout:{visibility:n[1]}}}),{c(){_(e.$$.fragment),r=O(),_(t.$$.fragment)},m(l,i){b(e,l,i),d(l,r,i),b(t,l,i),o=!0},p(l,i){const a={};i&2&&(a.layout={visibility:l[1]}),i&64&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&2&&(s.layout={visibility:l[1]}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){h(e.$$.fragment,l),h(t.$$.fragment,l),o=!1},d(l){l&&g(r),v(e,l),v(t,l)}}}function Ca(n){let e,r,t,o,l;function i(s){n[4](s)}let a={id:Ht,$$slots:{right:[wa],default:[_a]},$$scope:{ctx:n}};return n[0]!==void 0&&(a.checked=n[0]),e=new ie({props:a}),q.push(()=>Z(e,"checked",i)),o=new pr({props:{data:`${ue()}/v1/${Ht}.geojson`,$$slots:{default:[Sa]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment),t=O(),_(o.$$.fragment)},m(s,f){b(e,s,f),d(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),!r&&f&1&&(r=!0,u.checked=s[0],Y(()=>r=!1)),e.$set(u);const c={};f&66&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){h(e.$$.fragment,s),h(o.$$.fragment,s),l=!1},d(s){s&&g(t),v(e,s),v(o,s)}}}let Ht="local_authority_districts";function Ta(n){window.open(`https://www.ons.gov.uk/visualisations/areas/${n.detail.features[0].properties.LAD23CD}`,"_blank")}function La(n,e,r){let t,o=J.local_authority_districts,l=`${Ht}-outline`,i=!1;function a(s){i=s,r(0,i)}return n.$$.update=()=>{n.$$.dirty&1&&r(1,t=i?"visible":"none")},[i,t,o,l,a]}class Oa extends U{constructor(e){super(),G(this,e,La,Ca,z,{})}}function Aa(n){let e,r,t;return e=new be({props:{color:n[2]}}),{c(){_(e.$$.fragment),r=S(`
  Local Planning Authorities`)},m(o,l){b(e,o,l),d(o,r,l),t=!0},p:ee,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){h(e.$$.fragment,o),t=!1},d(o){o&&g(r),v(e,o)}}}function Ia(n){let e;return{c(){e=S(`local authority
        `)},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Pa(n){let e;return{c(){e=S(`national park authorit
        `)},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Ma(n){let e;return{c(){e=S(`development corporation
        `)},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Ea(n){let e;return{c(){e=S("this map")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Na(n){let e;return{c(){e=S(`planning.data.gov.uk
        `)},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Da(n){let e,r,t,o,l,i,a,s,f,u,c,p,$,k,y,C,w,I,D,A,N,F;return t=new X({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Ia]},$$scope:{ctx:n}}}),l=new X({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Pa]},$$scope:{ctx:n}}}),a=new X({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Ma]},$$scope:{ctx:n}}}),$=new X({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Ea]},$$scope:{ctx:n}}}),I=new X({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Na]},$$scope:{ctx:n}}}),N=new Ge({}),{c(){e=E("p"),r=S("LPAs may be a "),_(t.$$.fragment),o=S(", "),_(l.$$.fragment),i=S("y, or "),_(a.$$.fragment),s=S("."),f=O(),u=E("p"),c=E("strong"),p=S(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),_($.$$.fragment),k=S(" to get more details."),y=O(),C=E("p"),w=S("Data from ONS Geography via "),_(I.$$.fragment),D=S(", as of November 2022."),A=O(),_(N.$$.fragment)},m(L,M){d(L,e,M),P(e,r),b(t,e,null),P(e,o),b(l,e,null),P(e,i),b(a,e,null),P(e,s),d(L,f,M),d(L,u,M),P(u,c),P(c,p),b($,c,null),P(c,k),d(L,y,M),d(L,C,M),P(C,w),b(I,C,null),P(C,D),d(L,A,M),b(N,L,M),F=!0},p(L,M){const j={};M&64&&(j.$$scope={dirty:M,ctx:L}),t.$set(j);const T={};M&64&&(T.$$scope={dirty:M,ctx:L}),l.$set(T);const H={};M&64&&(H.$$scope={dirty:M,ctx:L}),a.$set(H);const W={};M&64&&(W.$$scope={dirty:M,ctx:L}),$.$set(W);const V={};M&64&&(V.$$scope={dirty:M,ctx:L}),I.$set(V)},i(L){F||(m(t.$$.fragment,L),m(l.$$.fragment,L),m(a.$$.fragment,L),m($.$$.fragment,L),m(I.$$.fragment,L),m(N.$$.fragment,L),F=!0)},o(L){h(t.$$.fragment,L),h(l.$$.fragment,L),h(a.$$.fragment,L),h($.$$.fragment,L),h(I.$$.fragment,L),h(N.$$.fragment,L),F=!1},d(L){L&&(g(e),g(f),g(u),g(y),g(C),g(A)),v(t),v(l),v(a),v($),v(I),v(N,L)}}}function Fa(n){let e,r,t;return r=new ae({props:{$$slots:{default:[Da]},$$scope:{ctx:n}}}),{c(){e=E("span"),_(r.$$.fragment),K(e,"slot","right")},m(o,l){d(o,e,l),b(r,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),r.$set(i)},i(o){t||(m(r.$$.fragment,o),t=!0)},o(o){h(r.$$.fragment,o),t=!1},d(o){o&&g(e),v(r)}}}function ja(n){let e,r=n[5][0].properties.name+"",t;return{c(){e=E("p"),t=S(r)},m(o,l){d(o,e,l),P(e,t)},p(o,l){l&32&&r!==(r=o[5][0].properties.name+"")&&x(t,r)},d(o){o&&g(e)}}}function Ba(n){let e,r;return e=new Ce({props:{openOn:"hover",$$slots:{default:[ja,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,o){const l={};o&96&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Ha(n){let e,r,t,o;return e=new ut({props:{id:$t,sourceLayer:$t,paint:{"fill-color":n[2],"fill-opacity":Qe(0,.5)},layout:{visibility:n[1]},manageHoverState:!0,$$slots:{default:[Ba]},$$scope:{ctx:n}}}),t=new ct({props:{id:n[3],sourceLayer:$t,paint:{"line-color":n[2],"line-width":2.5},layout:{visibility:n[1]}}}),{c(){_(e.$$.fragment),r=O(),_(t.$$.fragment)},m(l,i){b(e,l,i),d(l,r,i),b(t,l,i),o=!0},p(l,i){const a={};i&2&&(a.layout={visibility:l[1]}),i&64&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&2&&(s.layout={visibility:l[1]}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){h(e.$$.fragment,l),h(t.$$.fragment,l),o=!1},d(l){l&&g(r),v(e,l),v(t,l)}}}function Ra(n){let e,r,t,o,l;function i(s){n[4](s)}let a={id:$t,$$slots:{right:[Fa],default:[Aa]},$$scope:{ctx:n}};return n[0]!==void 0&&(a.checked=n[0]),e=new ie({props:a}),q.push(()=>Z(e,"checked",i)),o=new Ue({props:{url:`pmtiles://${ue()}/v1/${$t}.pmtiles`,$$slots:{default:[Ha]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment),t=O(),_(o.$$.fragment)},m(s,f){b(e,s,f),d(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),!r&&f&1&&(r=!0,u.checked=s[0],Y(()=>r=!1)),e.$set(u);const c={};f&66&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){h(e.$$.fragment,s),h(o.$$.fragment,s),l=!1},d(s){s&&g(t),v(e,s),v(o,s)}}}let $t="local_planning_authorities";function Wa(n,e,r){let t,o=J.local_planning_authorities,l=`${$t}-outline`,i=!1;function a(s){i=s,r(0,i)}return n.$$.update=()=>{n.$$.dirty&1&&r(1,t=i?"visible":"none")},[i,t,o,l,a]}class za extends U{constructor(e){super(),G(this,e,Wa,Ra,z,{})}}function Ua(n){let e,r,t;return e=new be({props:{color:n[2]}}),{c(){_(e.$$.fragment),r=S(`
  Parliamentary constituencies`)},m(o,l){b(e,o,l),d(o,r,l),t=!0},p:ee,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){h(e.$$.fragment,o),t=!1},d(o){o&&g(r),v(e,o)}}}function Ga(n){let e;return{c(){e=S(`Ordnance Survey Boundary-Line
        `)},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Va(n){let e,r,t,o,l,i,a;return t=new X({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Ga]},$$scope:{ctx:n}}}),i=new Ge({}),{c(){e=E("p"),r=S("Data from "),_(t.$$.fragment),o=S(", as of May 2023."),l=O(),_(i.$$.fragment)},m(s,f){d(s,e,f),P(e,r),b(t,e,null),P(e,o),d(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),a=!1},d(s){s&&(g(e),g(l)),v(t),v(i,s)}}}function qa(n){let e,r,t;return r=new ae({props:{$$slots:{default:[Va]},$$scope:{ctx:n}}}),{c(){e=E("span"),_(r.$$.fragment),K(e,"slot","right")},m(o,l){d(o,e,l),b(r,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),r.$set(i)},i(o){t||(m(r.$$.fragment,o),t=!0)},o(o){h(r.$$.fragment,o),t=!1},d(o){o&&g(e),v(r)}}}function Xa(n){let e,r=n[5][0].properties.Name+"",t;return{c(){e=E("p"),t=S(r)},m(o,l){d(o,e,l),P(e,t)},p(o,l){l&32&&r!==(r=o[5][0].properties.Name+"")&&x(t,r)},d(o){o&&g(e)}}}function Ka(n){let e,r;return e=new Ce({props:{openOn:"hover",$$slots:{default:[Xa,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,o){const l={};o&96&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Za(n){let e,r,t,o;return e=new ut({props:{id:dt,sourceLayer:dt,paint:{"fill-color":n[2],"fill-opacity":Qe(0,.5)},layout:{visibility:n[1]},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[Ka]},$$scope:{ctx:n}}}),e.$on("click",Ja),t=new ct({props:{id:n[3],sourceLayer:dt,paint:{"line-color":n[2],"line-width":5},layout:{visibility:n[1]}}}),{c(){_(e.$$.fragment),r=O(),_(t.$$.fragment)},m(l,i){b(e,l,i),d(l,r,i),b(t,l,i),o=!0},p(l,i){const a={};i&2&&(a.layout={visibility:l[1]}),i&64&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&2&&(s.layout={visibility:l[1]}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){h(e.$$.fragment,l),h(t.$$.fragment,l),o=!1},d(l){l&&g(r),v(e,l),v(t,l)}}}function Ya(n){let e,r,t,o,l;function i(s){n[4](s)}let a={id:dt,$$slots:{right:[qa],default:[Ua]},$$scope:{ctx:n}};return n[0]!==void 0&&(a.checked=n[0]),e=new ie({props:a}),q.push(()=>Z(e,"checked",i)),o=new Ue({props:{url:`pmtiles://${ue()}/v1/${dt}.pmtiles`,$$slots:{default:[Za]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment),t=O(),_(o.$$.fragment)},m(s,f){b(e,s,f),d(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),!r&&f&1&&(r=!0,u.checked=s[0],Y(()=>r=!1)),e.$set(u);const c={};f&66&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){h(e.$$.fragment,s),h(o.$$.fragment,s),l=!1},d(s){s&&g(t),v(e,s),v(o,s)}}}let dt="parliamentary_constituencies";function Ja(n){let e=n.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Qa(n,e,r){let t,o=J.parliamentary_constituencies,l=`${dt}-outline`,i=!1;function a(s){i=s,r(0,i)}return n.$$.update=()=>{n.$$.dirty&1&&r(1,t=i?"visible":"none")},[i,t,o,l,a]}class xa extends U{constructor(e){super(),G(this,e,Qa,Ya,z,{})}}function ef(n){let e,r,t;return e=new be({props:{color:n[2]}}),{c(){_(e.$$.fragment),r=S(`
  Wards`)},m(o,l){b(e,o,l),d(o,r,l),t=!0},p:ee,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){h(e.$$.fragment,o),t=!1},d(o){o&&g(r),v(e,o)}}}function tf(n){let e;return{c(){e=S(`ONS Geography
        `)},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function rf(n){let e,r,t,o,l,i,a;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[tf]},$$scope:{ctx:n}}}),i=new Ge({}),{c(){e=E("p"),r=S("Data from "),_(t.$$.fragment),o=S(", as of May 2023."),l=O(),_(i.$$.fragment)},m(s,f){d(s,e,f),P(e,r),b(t,e,null),P(e,o),d(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),a=!1},d(s){s&&(g(e),g(l)),v(t),v(i,s)}}}function nf(n){let e,r,t;return r=new ae({props:{$$slots:{default:[rf]},$$scope:{ctx:n}}}),{c(){e=E("span"),_(r.$$.fragment),K(e,"slot","right")},m(o,l){d(o,e,l),b(r,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),r.$set(i)},i(o){t||(m(r.$$.fragment,o),t=!0)},o(o){h(r.$$.fragment,o),t=!1},d(o){o&&g(e),v(r)}}}function of(n){let e,r=n[5][0].properties.name+"",t;return{c(){e=E("p"),t=S(r)},m(o,l){d(o,e,l),P(e,t)},p(o,l){l&32&&r!==(r=o[5][0].properties.name+"")&&x(t,r)},d(o){o&&g(e)}}}function lf(n){let e,r;return e=new Ce({props:{openOn:"hover",$$slots:{default:[of,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,o){const l={};o&96&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function sf(n){let e,r,t,o;return e=new ut({props:{id:gt,sourceLayer:gt,paint:{"fill-color":n[2],"fill-opacity":Qe(0,.5)},layout:{visibility:n[1]},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[lf]},$$scope:{ctx:n}}}),e.$on("click",ff),t=new ct({props:{id:n[3],sourceLayer:gt,paint:{"line-color":n[2],"line-width":2.5},layout:{visibility:n[1]}}}),{c(){_(e.$$.fragment),r=O(),_(t.$$.fragment)},m(l,i){b(e,l,i),d(l,r,i),b(t,l,i),o=!0},p(l,i){const a={};i&2&&(a.layout={visibility:l[1]}),i&64&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&2&&(s.layout={visibility:l[1]}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){h(e.$$.fragment,l),h(t.$$.fragment,l),o=!1},d(l){l&&g(r),v(e,l),v(t,l)}}}function af(n){let e,r,t,o,l;function i(s){n[4](s)}let a={id:gt,$$slots:{right:[nf],default:[ef]},$$scope:{ctx:n}};return n[0]!==void 0&&(a.checked=n[0]),e=new ie({props:a}),q.push(()=>Z(e,"checked",i)),o=new Ue({props:{url:`pmtiles://${ue()}/v1/${gt}.pmtiles`,$$slots:{default:[sf]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment),t=O(),_(o.$$.fragment)},m(s,f){b(e,s,f),d(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),!r&&f&1&&(r=!0,u.checked=s[0],Y(()=>r=!1)),e.$set(u);const c={};f&66&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){h(e.$$.fragment,s),h(o.$$.fragment,s),l=!1},d(s){s&&g(t),v(e,s),v(o,s)}}}let gt="wards";function ff(n){let e=encodeURIComponent(n.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function uf(n,e,r){let t,o=J.wards,l=`${gt}-outline`,i=!1;function a(s){i=s,r(0,i)}return n.$$.update=()=>{n.$$.dirty&1&&r(1,t=i?"visible":"none")},[i,t,o,l,a]}class cf extends U{constructor(e){super(),G(this,e,uf,af,z,{})}}function pf(n){let e;return{c(){e=S("Open Data Commons Open Database License")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function mf(n){let e,r,t,o;return t=new X({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[pf]},$$scope:{ctx:n}}}),{c(){e=E("p"),r=S("License: "),_(t.$$.fragment)},m(l,i){d(l,e,i),P(e,r),b(t,e,null),o=!0},p(l,[i]){const a={};i&1&&(a.$$scope={dirty:i,ctx:l}),t.$set(a)},i(l){o||(m(t.$$.fragment,l),o=!0)},o(l){h(t.$$.fragment,l),o=!1},d(l){l&&g(e),v(t)}}}class et extends U{constructor(e){super(),G(this,e,null,mf,z,{})}}function $f(n){let e,r,t;return e=new be({props:{color:J.bus_route_with_lane}}),{c(){_(e.$$.fragment),r=S(`
  Bus routes`)},m(o,l){b(e,o,l),d(o,r,l),t=!0},p:ee,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){h(e.$$.fragment,o),t=!1},d(o){o&&g(r),v(e,o)}}}function df(n){let e;return{c(){e=S(`GTFS
        `)},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function gf(n){let e,r,t,o,l,i,a,s,f;return l=new X({props:{href:"https://gtfs.org",$$slots:{default:[df]},$$scope:{ctx:n}}}),s=new et({}),{c(){e=E("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,r=O(),t=E("p"),o=S("Note this data is from OpenStreetMap (as of 9 August 2023), not "),_(l.$$.fragment),i=S(`, and doesn't include which routes are run or the
        frequency of service.`),a=O(),_(s.$$.fragment)},m(u,c){d(u,e,c),d(u,r,c),d(u,t,c),P(t,o),b(l,t,null),P(t,i),d(u,a,c),b(s,u,c),f=!0},p(u,c){const p={};c&8&&(p.$$scope={dirty:c,ctx:u}),l.$set(p)},i(u){f||(m(l.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){h(l.$$.fragment,u),h(s.$$.fragment,u),f=!1},d(u){u&&(g(e),g(r),g(t),g(a)),v(l),v(s,u)}}}function hf(n){let e,r,t;return r=new ae({props:{$$slots:{default:[gf]},$$scope:{ctx:n}}}),{c(){e=E("span"),_(r.$$.fragment),K(e,"slot","right")},m(o,l){d(o,e,l),b(r,e,null),t=!0},p(o,l){const i={};l&8&&(i.$$scope={dirty:l,ctx:o}),r.$set(i)},i(o){t||(m(r.$$.fragment,o),t=!0)},o(o){h(r.$$.fragment,o),t=!1},d(o){o&&g(e),v(r)}}}function _f(n){let e,r,t,o,l;function i(s){n[1](s)}let a={id:rt,$$slots:{right:[hf],default:[$f]},$$scope:{ctx:n}};return n[0]!==void 0&&(a.checked=n[0]),e=new ie({props:a}),q.push(()=>Z(e,"checked",i)),o=new ke({props:{layer:rt,tooltip:bf,show:n[0],clickable:!1}}),{c(){_(e.$$.fragment),t=O(),_(o.$$.fragment)},m(s,f){b(e,s,f),d(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&8&&(u.$$scope={dirty:f,ctx:s}),!r&&f&1&&(r=!0,u.checked=s[0],Y(()=>r=!1)),e.$set(u);const c={};f&1&&(c.show=s[0]),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){h(e.$$.fragment,s),h(o.$$.fragment,s),l=!1},d(s){s&&g(t),v(e,s),v(o,s)}}}let rt="bus_routes";function bf(n){return n.properties.has_bus_lane?"<p>At least one bus route crosses here, with a bus lane in one or more directions</p>":"<p>At least one bus route crosses here, without any bus lanes</p>"}function vf(n,e,r){let t;Q(n,Se,i=>r(2,t=i)),vt(t,rt,`${ue()}/v1/${rt}.pmtiles`),ft(t,{id:rt,source:rt,sourceLayer:rt,color:["case",["boolean",["get","has_bus_lane"],!1],J.bus_route_with_lane,J.bus_route_without_lane],width:5,opacity:wt(.5,1)});let o=!1;function l(i){o=i,r(0,o)}return[o,l]}class wf extends U{constructor(e){super(),G(this,e,vf,_f,z,{})}}function sn(n){const e=Af(n[4][0]);n[5]=e[0],n[6]=e[1],n[7]=e[2]}function an(n,e,r){const t=n.slice();return t[8]=e[r][0],t[9]=e[r][1],t}function yf(n){let e;return{c(){e=S("Cycle paths")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function kf(n){let e,r,t,o,l,i,a,s;return a=new et({}),{c(){e=E("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,r=O(),t=E("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,o=O(),l=E("p"),l.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=O(),_(a.$$.fragment)},m(f,u){d(f,e,u),d(f,r,u),d(f,t,u),d(f,o,u),d(f,l,u),d(f,i,u),b(a,f,u),s=!0},p:ee,i(f){s||(m(a.$$.fragment,f),s=!0)},o(f){h(a.$$.fragment,f),s=!1},d(f){f&&(g(e),g(r),g(t),g(o),g(l),g(i)),v(a,f)}}}function Sf(n){let e,r,t;return r=new ae({props:{$$slots:{default:[kf]},$$scope:{ctx:n}}}),{c(){e=E("span"),_(r.$$.fragment),K(e,"slot","right")},m(o,l){d(o,e,l),b(r,e,null),t=!0},p(o,l){const i={};l&4096&&(i.$$scope={dirty:l,ctx:o}),r.$set(i)},i(o){t||(m(r.$$.fragment,o),t=!0)},o(o){h(r.$$.fragment,o),t=!1},d(o){o&&g(e),v(r)}}}function fn(n){let e,r,t=Fe(n[2]),o=[];for(let i=0;i<t.length;i+=1)o[i]=un(an(n,t,i));const l=i=>h(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=$e()},m(i,a){for(let s=0;s<o.length;s+=1)o[s]&&o[s].m(i,a);d(i,e,a),r=!0},p(i,a){if(a&4){t=Fe(i[2]);let s;for(s=0;s<t.length;s+=1){const f=an(i,t,s);o[s]?(o[s].p(f,a),m(o[s],1)):(o[s]=un(f),o[s].c(),m(o[s],1),o[s].m(e.parentNode,e))}for(re(),s=t.length;s<o.length;s+=1)l(s);ne()}},i(i){if(!r){for(let a=0;a<t.length;a+=1)m(o[a]);r=!0}},o(i){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)h(o[a]);r=!1},d(i){i&&g(e),Et(o,i)}}}function un(n){let e,r,t,o=n[8]+"",l,i,a;return r=new be({props:{color:n[9]}}),{c(){e=E("div"),_(r.$$.fragment),t=O(),l=S(o),i=O()},m(s,f){d(s,e,f),b(r,e,null),P(e,t),P(e,l),P(e,i),a=!0},p:ee,i(s){a||(m(r.$$.fragment,s),a=!0)},o(s){h(r.$$.fragment,s),a=!1},d(s){s&&g(e),v(r)}}}function Cf(n){sn(n);let e,r=n[5]+"",t,o,l,i,a,s=n[6]+"",f,u,c,p,$=n[7]+"",k;return{c(){e=E("h2"),t=S(r),o=O(),l=E("p"),i=S("Direction: "),a=E("b"),f=O(),u=E("p"),c=S("Width: "),p=E("b"),k=S($)},m(y,C){d(y,e,C),P(e,t),d(y,o,C),d(y,l,C),P(l,i),P(l,a),a.innerHTML=s,d(y,f,C),d(y,u,C),P(u,c),P(u,p),P(p,k)},p(y,C){sn(y),C&16&&r!==(r=y[5]+"")&&x(t,r),C&16&&s!==(s=y[6]+"")&&(a.innerHTML=s),C&16&&$!==($=y[7]+"")&&x(k,$)},d(y){y&&(g(e),g(o),g(l),g(f),g(u))}}}function Tf(n){let e,r;return e=new Ce({props:{openOn:"hover",$$slots:{default:[Cf,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,o){const l={};o&4112&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Lf(n){let e,r;return e=new ct({props:{id:Rt,sourceLayer:Rt,paint:{"line-color":Sn(["get","kind"],{track:J.cycle_paths.track,lane:J.cycle_paths.lane,shared_use_segregated:J.cycle_paths.shared_use_segregated,shared_use_unsegregated:J.cycle_paths.shared_use_unsegregated},"red"),"line-width":Vt,"line-opacity":Qe(1,.5)},layout:{visibility:n[1]},hoverCursor:"pointer",$$slots:{default:[Tf]},$$scope:{ctx:n}}}),e.$on("click",If),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&4096&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Of(n){let e,r,t,o,l,i;function a(u){n[3](u)}let s={id:Rt,$$slots:{right:[Sf],default:[yf]},$$scope:{ctx:n}};n[0]!==void 0&&(s.checked=n[0]),e=new ie({props:s}),q.push(()=>Z(e,"checked",a));let f=n[0]&&fn(n);return l=new Ue({props:{url:`pmtiles://${ue()}/v1/${Rt}.pmtiles`,$$slots:{default:[Lf]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment),t=O(),f&&f.c(),o=O(),_(l.$$.fragment)},m(u,c){b(e,u,c),d(u,t,c),f&&f.m(u,c),d(u,o,c),b(l,u,c),i=!0},p(u,[c]){const p={};c&4096&&(p.$$scope={dirty:c,ctx:u}),!r&&c&1&&(r=!0,p.checked=u[0],Y(()=>r=!1)),e.$set(p),u[0]?f?(f.p(u,c),c&1&&m(f,1)):(f=fn(u),f.c(),m(f,1),f.m(o.parentNode,o)):f&&(re(),h(f,1,1,()=>{f=null}),ne());const $={};c&4098&&($.$$scope={dirty:c,ctx:u}),l.$set($)},i(u){i||(m(e.$$.fragment,u),m(f),m(l.$$.fragment,u),i=!0)},o(u){h(e.$$.fragment,u),h(f),h(l.$$.fragment,u),i=!1},d(u){u&&(g(t),g(o)),v(e,u),f&&f.d(u),v(l,u)}}}let Rt="cycle_paths";function Af(n){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[n.properties.kind],r={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[n.properties.direction],t=n.properties.width=="unknown"?"unknown":`${n.properties.width} meters`;return[e,`${r} ${n.properties.direction}`,t]}function If(n){window.open(`http://openstreetmap.org/way/${n.detail.features[0].properties.osm_id}`,"_blank")}function Pf(n,e,r){let t,o=[["Separated tracks",J.cycle_paths.track],["Unprotected lanes",J.cycle_paths.lane],["Shared-use (segregated)",J.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",J.cycle_paths.shared_use_unsegregated]],l=!1;function i(a){l=a,r(0,l)}return n.$$.update=()=>{n.$$.dirty&1&&r(1,t=l?"visible":"none")},[l,t,o,i]}class Mf extends U{constructor(e){super(),G(this,e,Pf,Of,z,{})}}function Ef(n){let e,r,t;return e=new be({props:{color:n[1]}}),{c(){_(e.$$.fragment),r=S(`
  Major Road Network`)},m(o,l){b(e,o,l),d(o,r,l),t=!0},p:ee,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){h(e.$$.fragment,o),t=!1},d(o){o&&g(r),v(e,o)}}}function Nf(n){let e;return{c(){e=S(`Major Road Network
        `)},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Df(n){let e,r,t,o,l,i,a;return t=new X({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Nf]},$$scope:{ctx:n}}}),i=new Ge({}),{c(){e=E("p"),r=S("Data from the "),_(t.$$.fragment),o=S(", as of September 2021."),l=O(),_(i.$$.fragment)},m(s,f){d(s,e,f),P(e,r),b(t,e,null),P(e,o),d(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&16&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),a=!1},d(s){s&&(g(e),g(l)),v(t),v(i,s)}}}function Ff(n){let e,r,t;return r=new ae({props:{$$slots:{default:[Df]},$$scope:{ctx:n}}}),{c(){e=E("span"),_(r.$$.fragment),K(e,"slot","right")},m(o,l){d(o,e,l),b(r,e,null),t=!0},p(o,l){const i={};l&16&&(i.$$scope={dirty:l,ctx:o}),r.$set(i)},i(o){t||(m(r.$$.fragment,o),t=!0)},o(o){h(r.$$.fragment,o),t=!1},d(o){o&&g(e),v(r)}}}function jf(n){let e,r,t,o,l;function i(s){n[2](s)}let a={id:nt,$$slots:{right:[Ff],default:[Ef]},$$scope:{ctx:n}};return n[0]!==void 0&&(a.checked=n[0]),e=new ie({props:a}),q.push(()=>Z(e,"checked",i)),o=new ke({props:{layer:nt,tooltip:Bf,show:n[0],clickable:!1}}),{c(){_(e.$$.fragment),t=O(),_(o.$$.fragment)},m(s,f){b(e,s,f),d(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&16&&(u.$$scope={dirty:f,ctx:s}),!r&&f&1&&(r=!0,u.checked=s[0],Y(()=>r=!1)),e.$set(u);const c={};f&1&&(c.show=s[0]),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){h(e.$$.fragment,s),h(o.$$.fragment,s),l=!1},d(s){s&&g(t),v(e,s),v(o,s)}}}let nt="mrn";function Bf(n){return`<p>${n.properties.name??"Unknown MRN road"}</p>`}function Hf(n,e,r){let t;Q(n,Se,a=>r(3,t=a));let o=J.mrn;vt(t,nt,`${ue()}/v1/${nt}.pmtiles`),ft(t,{id:nt,source:nt,sourceLayer:nt,color:o,width:7,opacity:wt(.5,1)});let l=!1;function i(a){l=a,r(0,l)}return[l,o,i]}class Rf extends U{constructor(e){super(),G(this,e,Hf,jf,z,{})}}function Wf(n){let e;return{c(){e=S("Propensity to Cycle Tool")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function zf(n){let e;return{c(){e=S("the PCT website")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Uf(n){let e;return{c(){e=S("2017 journal article")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Gf(n){let e,r,t,o,l,i,a,s,f,u,c;return a=new X({props:{href:"https://www.pct.bike",$$slots:{default:[zf]},$$scope:{ctx:n}}}),f=new X({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Uf]},$$scope:{ctx:n}}}),{c(){e=E("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,r=O(),t=E("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,o=O(),l=E("p"),i=S("See "),_(a.$$.fragment),s=S(" and "),_(f.$$.fragment),u=S(" for details on methodology and data sources.")},m(p,$){d(p,e,$),d(p,r,$),d(p,t,$),d(p,o,$),d(p,l,$),P(l,i),b(a,l,null),P(l,s),b(f,l,null),P(l,u),c=!0},p(p,$){const k={};$&2048&&(k.$$scope={dirty:$,ctx:p}),a.$set(k);const y={};$&2048&&(y.$$scope={dirty:$,ctx:p}),f.$set(y)},i(p){c||(m(a.$$.fragment,p),m(f.$$.fragment,p),c=!0)},o(p){h(a.$$.fragment,p),h(f.$$.fragment,p),c=!1},d(p){p&&(g(e),g(r),g(t),g(o),g(l)),v(a),v(f)}}}function Vf(n){let e,r,t;return r=new ae({props:{$$slots:{default:[Gf]},$$scope:{ctx:n}}}),{c(){e=E("span"),_(r.$$.fragment),K(e,"slot","right")},m(o,l){d(o,e,l),b(r,e,null),t=!0},p(o,l){const i={};l&2048&&(i.$$scope={dirty:l,ctx:o}),r.$set(i)},i(o){t||(m(r.$$.fragment,o),t=!0)},o(o){h(r.$$.fragment,o),t=!1},d(o){o&&g(e),v(r)}}}function cn(n){let e,r,t,o,l,i,a,s;e=new xe({props:{colorScale:n[3],limits:n[4]}});function f($){n[8]($)}let u={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};n[0]!==void 0&&(u.value=n[0]),t=new Tn({props:u}),q.push(()=>Z(t,"value",f)),t.$on("change",n[6]);function c($){n[9]($)}let p={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return n[1]!==void 0&&(p.value=n[1]),i=new Nt({props:p}),q.push(()=>Z(i,"value",c)),i.$on("change",n[6]),{c(){_(e.$$.fragment),r=O(),_(t.$$.fragment),l=O(),_(i.$$.fragment)},m($,k){b(e,$,k),d($,r,k),b(t,$,k),d($,l,k),b(i,$,k),s=!0},p($,k){const y={};!o&&k&1&&(o=!0,y.value=$[0],Y(()=>o=!1)),t.$set(y);const C={};!a&&k&2&&(a=!0,C.value=$[1],Y(()=>a=!1)),i.$set(C)},i($){s||(m(e.$$.fragment,$),m(t.$$.fragment,$),m(i.$$.fragment,$),s=!0)},o($){h(e.$$.fragment,$),h(t.$$.fragment,$),h(i.$$.fragment,$),s=!1},d($){$&&(g(r),g(l)),v(e,$),v(t,$),v(i,$)}}}function qf(n){let e,r,t,o,l,i,a,s;function f(p){n[7](p)}let u={id:st,$$slots:{right:[Vf],default:[Wf]},$$scope:{ctx:n}};n[2]!==void 0&&(u.checked=n[2]),e=new ie({props:u}),q.push(()=>Z(e,"checked",f));let c=n[2]&&cn(n);return l=new ke({props:{layer:st,tooltip:n[5],show:n[2]&&n[0]==st,clickable:!1}}),a=new ke({props:{layer:Mt,tooltip:n[5],show:n[2]&&n[0]==Mt,clickable:!1}}),{c(){_(e.$$.fragment),t=O(),c&&c.c(),o=O(),_(l.$$.fragment),i=O(),_(a.$$.fragment)},m(p,$){b(e,p,$),d(p,t,$),c&&c.m(p,$),d(p,o,$),b(l,p,$),d(p,i,$),b(a,p,$),s=!0},p(p,[$]){const k={};$&2048&&(k.$$scope={dirty:$,ctx:p}),!r&&$&4&&(r=!0,k.checked=p[2],Y(()=>r=!1)),e.$set(k),p[2]?c?(c.p(p,$),$&4&&m(c,1)):(c=cn(p),c.c(),m(c,1),c.m(o.parentNode,o)):c&&(re(),h(c,1,1,()=>{c=null}),ne());const y={};$&5&&(y.show=p[2]&&p[0]==st),l.$set(y);const C={};$&5&&(C.show=p[2]&&p[0]==Mt),a.$set(C)},i(p){s||(m(e.$$.fragment,p),m(c),m(l.$$.fragment,p),m(a.$$.fragment,p),s=!0)},o(p){h(e.$$.fragment,p),h(c),h(l.$$.fragment,p),h(a.$$.fragment,p),s=!1},d(p){p&&(g(t),g(o),g(i)),v(e,p),c&&c.d(p),v(l,p),v(a,p)}}}let st="pct_commute",Mt="pct_school";function Xf(n,e,r){let t;Q(n,Se,k=>r(10,t=k));let o=J.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],i=st,a="baseline";for(let k of[st,Mt])vt(t,k,`${ue()}/v1/${k}.pmtiles`),ft(t,{id:k,source:k,sourceLayer:k,color:Je(["get",a],l,o),width:Vt,opacity:wt(.5,1)});let s=!1;function f(k){let y=k.properties.baseline,C=k.properties.gov_target,w=k.properties.go_dutch,I=`<h2>Trip purpose: ${i==st?"commuting":"school"}</h2>`;if(I+=`<p>Baseline (2011): <b>${y.toLocaleString()}</b></p>`,y==0)I+=`<p>Government target (2025): <b>${C.toLocaleString()}</b></p>`,I+=`<p>Go Dutch: <b>${w.toLocaleString()}</b></p>`;else{let D=(C/y).toFixed(1),A=(w/y).toFixed(1);I+=`<p>Government target (2025): ${C.toLocaleString()} (<b>${D}x</b> of baseline)</p>`,I+=`<p>Go Dutch: ${w.toLocaleString()} (<b>${A}x</b> of baseline)</p>`}return I}function u(){t.setPaintProperty(i,"line-color",Je(["get",a],l,o))}function c(k){s=k,r(2,s)}function p(k){i=k,r(0,i)}function $(k){a=k,r(1,a)}return[i,a,s,o,l,f,u,c,p,$]}class Kf extends U{constructor(e){super(),G(this,e,Xf,qf,z,{})}}function Zf(n){let e;return{c(){e=S("OS Speeds")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Yf(n){let e;return{c(){e=S("Basemap")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Jf(n){let e;return{c(){e=S(`Public Sector Geospatial Agreement
        `)},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Qf(n){let e,r,t,o,l,i,a,s,f,u,c,p;return t=new X({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Yf]},$$scope:{ctx:n}}}),u=new X({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Jf]},$$scope:{ctx:n}}}),{c(){e=E("p"),r=S("The average speed data is collected over a six-month period by "),_(t.$$.fragment),o=S(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),l=O(),i=E("p"),i.textContent="Data valid as of 1 September, 2023",a=O(),s=E("p"),f=S(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),_(u.$$.fragment),c=S(".")},m($,k){d($,e,k),P(e,r),b(t,e,null),P(e,o),d($,l,k),d($,i,k),d($,a,k),d($,s,k),P(s,f),b(u,s,null),P(s,c),p=!0},p($,k){const y={};k&256&&(y.$$scope={dirty:k,ctx:$}),t.$set(y);const C={};k&256&&(C.$$scope={dirty:k,ctx:$}),u.$set(C)},i($){p||(m(t.$$.fragment,$),m(u.$$.fragment,$),p=!0)},o($){h(t.$$.fragment,$),h(u.$$.fragment,$),p=!1},d($){$&&(g(e),g(l),g(i),g(a),g(s)),v(t),v(u)}}}function xf(n){let e,r,t;return r=new ae({props:{$$slots:{default:[Qf]},$$scope:{ctx:n}}}),{c(){e=E("span"),_(r.$$.fragment),K(e,"slot","right")},m(o,l){d(o,e,l),b(r,e,null),t=!0},p(o,l){const i={};l&256&&(i.$$scope={dirty:l,ctx:o}),r.$set(i)},i(o){t||(m(r.$$.fragment,o),t=!0)},o(o){h(r.$$.fragment,o),t=!1},d(o){o&&g(e),v(r)}}}function pn(n){let e,r,t,o,l;e=new xe({props:{colorScale:n[2],limits:n[3]}});function i(s){n[6](s)}let a={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return n[0]!==void 0&&(a.value=n[0]),t=new Tn({props:a}),q.push(()=>Z(t,"value",i)),t.$on("change",n[4]),{c(){_(e.$$.fragment),r=O(),_(t.$$.fragment)},m(s,f){b(e,s,f),d(s,r,f),b(t,s,f),l=!0},p(s,f){const u={};!o&&f&1&&(o=!0,u.value=s[0],Y(()=>o=!1)),t.$set(u)},i(s){l||(m(e.$$.fragment,s),m(t.$$.fragment,s),l=!0)},o(s){h(e.$$.fragment,s),h(t.$$.fragment,s),l=!1},d(s){s&&g(r),v(e,s),v(t,s)}}}function eu(n){let e,r,t,o,l,i;function a(u){n[5](u)}let s={id:Ze,$$slots:{right:[xf],default:[Zf]},$$scope:{ctx:n}};n[1]!==void 0&&(s.checked=n[1]),e=new ie({props:s}),q.push(()=>Z(e,"checked",a));let f=n[1]&&pn(n);return l=new ke({props:{layer:Ze,tooltip:tu,show:n[1],clickable:!1}}),{c(){_(e.$$.fragment),t=O(),f&&f.c(),o=O(),_(l.$$.fragment)},m(u,c){b(e,u,c),d(u,t,c),f&&f.m(u,c),d(u,o,c),b(l,u,c),i=!0},p(u,[c]){const p={};c&256&&(p.$$scope={dirty:c,ctx:u}),!r&&c&2&&(r=!0,p.checked=u[1],Y(()=>r=!1)),e.$set(p),u[1]?f?(f.p(u,c),c&2&&m(f,1)):(f=pn(u),f.c(),m(f,1),f.m(o.parentNode,o)):f&&(re(),h(f,1,1,()=>{f=null}),ne());const $={};c&2&&($.show=u[1]),l.$set($)},i(u){i||(m(e.$$.fragment,u),m(f),m(l.$$.fragment,u),i=!0)},o(u){h(e.$$.fragment,u),h(f),h(l.$$.fragment,u),i=!1},d(u){u&&(g(t),g(o)),v(e,u),f&&f.d(u),v(l,u)}}}let Ze="road_speeds";function tu(n){let e={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"}[n.properties.highest_description],r=`<p>Posted speed limit: ${n.properties.indicative_mph} mph</p>`;return r+=`<p>Highest average speed: ${n.properties.highest_mph} mph (during ${e})</p>`,r}function ru(n,e,r){let t;Q(n,Se,c=>r(7,t=c));let o=J.sequential_low_to_high,l=[0,20,30,40,50,90],i="indicative_mph";vt(t,Ze,`${ur()}/v1/${Ze}.pmtiles`),ft(t,{id:Ze,source:Ze,sourceLayer:Ze,color:Je(["get",i],l,o),width:Vt,opacity:wt(.5,1)});let a=!1;function s(){t.setPaintProperty(Ze,"line-color",Je(["get",i],l,o))}function f(c){a=c,r(1,a)}function u(c){i=c,r(0,i)}return[i,a,o,l,s,f,u]}class nu extends U{constructor(e){super(),G(this,e,ru,eu,z,{})}}function ou(n){let e;return{c(){e=S("OS Road widths")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function lu(n){let e;return{c(){e=S(`Public Sector Geospatial Agreement
        `)},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function su(n){let e,r,t,o,l,i,a,s,f;return a=new X({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[lu]},$$scope:{ctx:n}}}),{c(){e=E("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,r=O(),t=E("p"),t.textContent="Data valid as of 1 September, 2023",o=O(),l=E("p"),i=S(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),_(a.$$.fragment),s=S(".")},m(u,c){d(u,e,c),d(u,r,c),d(u,t,c),d(u,o,c),d(u,l,c),P(l,i),b(a,l,null),P(l,s),f=!0},p(u,c){const p={};c&32&&(p.$$scope={dirty:c,ctx:u}),a.$set(p)},i(u){f||(m(a.$$.fragment,u),f=!0)},o(u){h(a.$$.fragment,u),f=!1},d(u){u&&(g(e),g(r),g(t),g(o),g(l)),v(a)}}}function iu(n){let e,r,t;return r=new ae({props:{$$slots:{default:[su]},$$scope:{ctx:n}}}),{c(){e=E("span"),_(r.$$.fragment),K(e,"slot","right")},m(o,l){d(o,e,l),b(r,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),r.$set(i)},i(o){t||(m(r.$$.fragment,o),t=!0)},o(o){h(r.$$.fragment,o),t=!1},d(o){o&&g(e),v(r)}}}function mn(n){let e,r;return e=new xe({props:{colorScale:n[1],limits:n[2]}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p:ee,i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function au(n){let e,r,t,o,l,i;function a(u){n[3](u)}let s={id:ot,$$slots:{right:[iu],default:[ou]},$$scope:{ctx:n}};n[0]!==void 0&&(s.checked=n[0]),e=new ie({props:s}),q.push(()=>Z(e,"checked",a));let f=n[0]&&mn(n);return l=new ke({props:{layer:ot,tooltip:fu,show:n[0],clickable:!1}}),{c(){_(e.$$.fragment),t=O(),f&&f.c(),o=O(),_(l.$$.fragment)},m(u,c){b(e,u,c),d(u,t,c),f&&f.m(u,c),d(u,o,c),b(l,u,c),i=!0},p(u,[c]){const p={};c&32&&(p.$$scope={dirty:c,ctx:u}),!r&&c&1&&(r=!0,p.checked=u[0],Y(()=>r=!1)),e.$set(p),u[0]?f?(f.p(u,c),c&1&&m(f,1)):(f=mn(u),f.c(),m(f,1),f.m(o.parentNode,o)):f&&(re(),h(f,1,1,()=>{f=null}),ne());const $={};c&1&&($.show=u[0]),l.$set($)},i(u){i||(m(e.$$.fragment,u),m(f),m(l.$$.fragment,u),i=!0)},o(u){h(e.$$.fragment,u),h(f),h(l.$$.fragment,u),i=!1},d(u){u&&(g(t),g(o)),v(e,u),f&&f.d(u),v(l,u)}}}let ot="road_widths";function fu(n){let e=`<p>Average width: ${n.properties.average} meters</p>`;return e+=`<p>Minimum width: ${n.properties.minimum} meters</p>`,e}function uu(n,e,r){let t;Q(n,Se,s=>r(4,t=s));let o=J.sequential_low_to_high,l=[0,5,10,15,20,100];vt(t,ot,`${ur()}/v1/${ot}.pmtiles`),ft(t,{id:ot,source:ot,sourceLayer:ot,color:Je(["get","average"],l,o),width:Vt,opacity:wt(.5,1)});let i=!1;function a(s){i=s,r(0,i)}return[i,o,l,a]}class cu extends U{constructor(e){super(),G(this,e,uu,au,z,{})}}function pu(n){let e,r,t;return{c(){e=E("input"),K(e,"class","govuk-file-upload"),K(e,"id","load-criticals"),K(e,"type","file")},m(o,l){d(o,e,l),n[7](e),r||(t=ht(e,"change",n[4]),r=!0)},p:ee,d(o){o&&g(e),n[7](null),r=!1,t()}}}function $n(n){let e,r;return e=new Lt({props:{small:!0,$$slots:{default:[$u]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,o){const l={};o&517&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function mu(n){let e,r,t=n[2].toLocaleString()+"",o,l,i;return e=new be({props:{color:sr}}),{c(){_(e.$$.fragment),r=S(`
        Show `),o=S(t),l=S(" issues")},m(a,s){b(e,a,s),d(a,r,s),d(a,o,s),d(a,l,s),i=!0},p(a,s){(!i||s&4)&&t!==(t=a[2].toLocaleString()+"")&&x(o,t)},i(a){i||(m(e.$$.fragment,a),i=!0)},o(a){h(e.$$.fragment,a),i=!1},d(a){a&&(g(r),g(o),g(l)),v(e,a)}}}function $u(n){let e,r,t;function o(i){n[8](i)}let l={id:"show-criticals",$$slots:{default:[mu]},$$scope:{ctx:n}};return n[0]!==void 0&&(l.checked=n[0]),e=new ie({props:l}),q.push(()=>Z(e,"checked",o)),{c(){_(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const s={};a&516&&(s.$$scope={dirty:a,ctx:i}),!r&&a&1&&(r=!0,s.checked=i[0],Y(()=>r=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){h(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function du(n){let e,r,t,o,l,i;e=new Cn({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[pu]},$$scope:{ctx:n}}}),t=new Ln({props:{errorMessage:n[3]}});let a=n[2]>0&&$n(n);return{c(){_(e.$$.fragment),r=O(),_(t.$$.fragment),o=O(),a&&a.c(),l=$e()},m(s,f){b(e,s,f),d(s,r,f),b(t,s,f),d(s,o,f),a&&a.m(s,f),d(s,l,f),i=!0},p(s,f){const u={};f&514&&(u.$$scope={dirty:f,ctx:s}),e.$set(u);const c={};f&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?a?(a.p(s,f),f&4&&m(a,1)):(a=$n(s),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(re(),h(a,1,1,()=>{a=null}),ne())},i(s){i||(m(e.$$.fragment,s),m(t.$$.fragment,s),m(a),i=!0)},o(s){h(e.$$.fragment,s),h(t.$$.fragment,s),h(a),i=!1},d(s){s&&(g(r),g(o),g(l)),v(e,s),v(t,s),a&&a.d(s)}}}function gu(n){let e,r,t,o,l,i;return e=new Ie({props:{label:"Critical Issues",$$slots:{default:[du]},$$scope:{ctx:n}}}),t=new ke({props:{layer:me+"-points",tooltip:hu,show:n[0],clickable:!1}}),l=new ke({props:{layer:me+"-clusters",show:n[0],clickable:!0,ignoreHigherLayers:[me+"-counts"]}}),l.$on("click",n[5]),{c(){_(e.$$.fragment),r=O(),_(t.$$.fragment),o=O(),_(l.$$.fragment)},m(a,s){b(e,a,s),d(a,r,s),b(t,a,s),d(a,o,s),b(l,a,s),i=!0},p(a,[s]){const f={};s&527&&(f.$$scope={dirty:s,ctx:a}),e.$set(f);const u={};s&1&&(u.show=a[0]),t.$set(u);const c={};s&1&&(c.show=a[0]),l.$set(c)},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(l.$$.fragment,a),i=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),h(l.$$.fragment,a),i=!1},d(a){a&&(g(r),g(o)),v(e,a),v(t,a),v(l,a)}}}let me="criticals",sr="red";function hu(n){let e='<div style="max-width: 30vw;">';return e+=`<h2>${n.properties.critical_type}</h2>`,e+=`<p><u>Location</u>: ${n.properties.location_description}</p>`,e+=`<p><u>Notes</u>: ${n.properties.notes}</p>`,e+="<hr />",e+=`<p>Critical issue ID: <b>${n.properties.id}</b></p>`,e+=`<p>Submitted by <b>${n.properties.inspector??"???"}</b> at <b>${n.properties.submission_time}</b></p>`,e+=`<p>For scheme <b>${n.properties.scheme_reference}</b> in stage <b>${n.properties.current_design_stage}</b></p>`,e+="</div>",e}function _u(n,e,r){let t;Q(n,Se,p=>r(6,t=p));let o,l=!0,i=0,a="";so(t,me),t.addSource(me,{type:"geojson",data:fr(),cluster:!0,clusterMaxZoom:14,clusterRadius:50}),hr(t,{id:`${me}-clusters`,source:me,filter:["has","point_count"],color:sr,opacity:.9,radius:["step",["get","point_count"],20,15,30,30,40]}),t.addLayer({id:`${me}-counts`,source:me,type:"symbol",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}"}}),hr(t,{id:`${me}-points`,source:me,filter:["!",["has","point_count"]],color:sr,opacity:.9,radius:15,strokeColor:"black",strokeWidth:3});async function s(p){try{let $=await ni(o.files[0]);t.getSource(me).setData($),r(2,i=$.features.length),r(3,a="")}catch($){r(3,a=`The file you loaded is broken: ${$}`)}}function f(p){t.getSource(me).getClusterExpansionZoom(p.detail.properties.cluster_id,($,k)=>{$||t.easeTo({center:p.detail.geometry.coordinates,zoom:k})})}function u(p){q[p?"unshift":"push"](()=>{o=p,r(1,o)})}function c(p){l=p,r(0,l)}return n.$$.update=()=>{n.$$.dirty&65&&t.getLayer(`${me}-counts`)&&t.setLayoutProperty(`${me}-counts`,"visibility",l?"visible":"none")},[l,o,i,a,s,f,t,u,c]}class bu extends U{constructor(e){super(),G(this,e,_u,gu,z,{})}}function vu(n){let e,r,t;return e=new be({props:{color:n[2]}}),{c(){_(e.$$.fragment),r=S(`
  Crossings`)},m(o,l){b(e,o,l),d(o,r,l),t=!0},p:ee,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){h(e.$$.fragment,o),t=!1},d(o){o&&g(r),v(e,o)}}}function wu(n){let e;return{c(){e=S("crossing")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function yu(n){let e,r,t,o,l,i,a;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[wu]},$$scope:{ctx:n}}}),i=new et({}),{c(){e=E("p"),r=S("This shows "),_(t.$$.fragment),o=S(" data from OpenStreetMap (as of 9 August 2023)."),l=O(),_(i.$$.fragment)},m(s,f){d(s,e,f),P(e,r),b(t,e,null),P(e,o),d(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),a=!1},d(s){s&&(g(e),g(l)),v(t),v(i,s)}}}function ku(n){let e,r,t;return r=new ae({props:{$$slots:{default:[yu]},$$scope:{ctx:n}}}),{c(){e=E("span"),_(r.$$.fragment),K(e,"slot","right")},m(o,l){d(o,e,l),b(r,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),r.$set(i)},i(o){t||(m(r.$$.fragment,o),t=!0)},o(o){h(r.$$.fragment,o),t=!1},d(o){o&&g(e),v(r)}}}function Su(n){let e,r=dn(n[4][0])+"",t;return{c(){e=E("p"),t=S(r)},m(o,l){d(o,e,l),P(e,t)},p(o,l){l&16&&r!==(r=dn(o[4][0])+"")&&x(t,r)},d(o){o&&g(e)}}}function Cu(n){let e,r;return e=new Ce({props:{openOn:"hover",$$slots:{default:[Su,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,o){const l={};o&48&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Tu(n){let e,r;return e=new Gt({props:{id:Wt,sourceLayer:Wt,paint:{"circle-color":n[2],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]},layout:{visibility:n[1]},$$slots:{default:[Cu]},$$scope:{ctx:n}}}),e.$on("click",Ou),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Lu(n){let e,r,t,o,l;function i(s){n[3](s)}let a={id:Wt,$$slots:{right:[ku],default:[vu]},$$scope:{ctx:n}};return n[0]!==void 0&&(a.checked=n[0]),e=new ie({props:a}),q.push(()=>Z(e,"checked",i)),o=new Ue({props:{url:`pmtiles://${ue()}/v1/${Wt}.pmtiles`,$$slots:{default:[Tu]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment),t=O(),_(o.$$.fragment)},m(s,f){b(e,s,f),d(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),!r&&f&1&&(r=!0,u.checked=s[0],Y(()=>r=!1)),e.$set(u);const c={};f&34&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){h(e.$$.fragment,s),h(o.$$.fragment,s),l=!1},d(s){s&&g(t),v(e,s),v(o,s)}}}let Wt="crossings";function dn(n){const e=new Map([["no","Location where crossing is impossible/illegal but where there is a clear desire line to cross"],["traffic_signals","Signalised crossing"],["marked","Crossing with no traffic signals"],["uncontrolled","Crossing with no traffic signals"],["unmarked","Crossing with no markings or signals"],["zebra","Zebra crossing"],["island","Crossing with an island"],["informal","Informal crossing with an obvious desire line, but no official infrastructure to support it"]]),r=n.properties.crossing;return`${e.get(r)??`Crossing with unknown type (${r})`}. Click for details.`}function Ou(n){window.open(`http://openstreetmap.org/node/${n.detail.features[0].properties.osm_id}`,"_blank")}function Au(n,e,r){let t,o=J.crossings,l=!1;function i(a){l=a,r(0,l)}return n.$$.update=()=>{n.$$.dirty&1&&r(1,t=l?"visible":"none")},[l,t,o,i]}class Iu extends U{constructor(e){super(),G(this,e,Au,Lu,z,{})}}function Pu(n){let e,r,t;return e=new be({props:{color:n[2]}}),{c(){_(e.$$.fragment),r=S(`
  Cycle parking`)},m(o,l){b(e,o,l),d(o,r,l),t=!0},p:ee,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){h(e.$$.fragment,o),t=!1},d(o){o&&g(r),v(e,o)}}}function Mu(n){let e;return{c(){e=S("OpenStreetMap")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Eu(n){let e,r,t,o,l,i,a;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Mu]},$$scope:{ctx:n}}}),i=new et({}),{c(){e=E("p"),r=S("Cycle parking, according to "),_(t.$$.fragment),o=S(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),l=O(),_(i.$$.fragment)},m(s,f){d(s,e,f),P(e,r),b(t,e,null),P(e,o),d(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),a=!1},d(s){s&&(g(e),g(l)),v(t),v(i,s)}}}function Nu(n){let e,r,t;return r=new ae({props:{$$slots:{default:[Eu]},$$scope:{ctx:n}}}),{c(){e=E("span"),_(r.$$.fragment),K(e,"slot","right")},m(o,l){d(o,e,l),b(r,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),r.$set(i)},i(o){t||(m(r.$$.fragment,o),t=!0)},o(o){h(r.$$.fragment,o),t=!1},d(o){o&&g(e),v(r)}}}function Du(n){let e,r=gn(n[4][0])+"",t;return{c(){e=E("p"),t=S(r)},m(o,l){d(o,e,l),P(e,t)},p(o,l){l&16&&r!==(r=gn(o[4][0])+"")&&x(t,r)},d(o){o&&g(e)}}}function Fu(n){let e,r;return e=new Ce({props:{openOn:"hover",$$slots:{default:[Du,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,o){const l={};o&48&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function ju(n){let e,r;return e=new Gt({props:{id:zt,sourceLayer:zt,paint:{"circle-color":n[2],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]},layout:{visibility:n[1]},manageHoverState:!0,$$slots:{default:[Fu]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Bu(n){let e,r,t,o,l;function i(s){n[3](s)}let a={id:zt,$$slots:{right:[Nu],default:[Pu]},$$scope:{ctx:n}};return n[0]!==void 0&&(a.checked=n[0]),e=new ie({props:a}),q.push(()=>Z(e,"checked",i)),o=new Ue({props:{url:`pmtiles://${ue()}/v1/${zt}.pmtiles`,$$slots:{default:[ju]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment),t=O(),_(o.$$.fragment)},m(s,f){b(e,s,f),d(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),!r&&f&1&&(r=!0,u.checked=s[0],Y(()=>r=!1)),e.$set(u);const c={};f&34&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){h(e.$$.fragment,s),h(o.$$.fragment,s),l=!1},d(s){s&&g(t),v(e,s),v(o,s)}}}let zt="cycle_parking";function gn(n){return`Capacity: ${n.properties.capacity??"unknown"}`}function Hu(n,e,r){let t,o=J.cycle_parking,l=!1;function i(a){l=a,r(0,l)}return n.$$.update=()=>{n.$$.dirty&1&&r(1,t=l?"visible":"none")},[l,t,o,i]}class Ru extends U{constructor(e){super(),G(this,e,Hu,Bu,z,{})}}function Wu(n){let e,r,t,o;return e=new be({props:{color:n[4]}}),{c(){_(e.$$.fragment),r=O(),t=S(n[1])},m(l,i){b(e,l,i),d(l,r,i),d(l,t,i),o=!0},p(l,i){(!o||i&2)&&x(t,l[1])},i(l){o||(m(e.$$.fragment,l),o=!0)},o(l){h(e.$$.fragment,l),o=!1},d(l){l&&(g(r),g(t)),v(e,l)}}}function zu(n){let e;const r=n[7].default,t=He(r,n,n[9],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&512)&&Re(t,r,o,o[9],e?ze(r,o[9],l,null):We(o[9]),null)},i(o){e||(m(t,o),e=!0)},o(o){h(t,o),e=!1},d(o){t&&t.d(o)}}}function Uu(n){let e,r,t;return r=new ae({props:{$$slots:{default:[zu]},$$scope:{ctx:n}}}),{c(){e=E("span"),_(r.$$.fragment),K(e,"slot","right")},m(o,l){d(o,e,l),b(r,e,null),t=!0},p(o,l){const i={};l&512&&(i.$$scope={dirty:l,ctx:o}),r.$set(i)},i(o){t||(m(r.$$.fragment,o),t=!0)},o(o){h(r.$$.fragment,o),t=!1},d(o){o&&g(e),v(r)}}}function Gu(n){let e,r=n[5](n[10][0])+"",t;return{c(){e=E("p"),t=S(r)},m(o,l){d(o,e,l),P(e,t)},p(o,l){l&1024&&r!==(r=o[5](o[10][0])+"")&&x(t,r)},d(o){o&&g(e)}}}function Vu(n){let e,r;return e=new Ce({props:{openOn:"hover",$$slots:{default:[Gu,({features:t})=>({10:t}),({features:t})=>t?1024:0]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,o){const l={};o&1536&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function qu(n){let e,r;return e=new ut({props:{id:n[0],sourceLayer:n[0],paint:{"fill-color":n[4],"fill-opacity":Qe(.7,1)},layout:{visibility:n[3]},manageHoverState:!0,$$slots:{default:[Vu]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,o){const l={};o&1&&(l.id=t[0]),o&1&&(l.sourceLayer=t[0]),o&8&&(l.layout={visibility:t[3]}),o&512&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Xu(n){let e,r,t,o,l;function i(s){n[8](s)}let a={id:n[0],$$slots:{right:[Uu],default:[Wu]},$$scope:{ctx:n}};return n[2]!==void 0&&(a.checked=n[2]),e=new ie({props:a}),q.push(()=>Z(e,"checked",i)),o=new Ue({props:{url:`pmtiles://${ue()}/v1/${n[0]}.pmtiles`,$$slots:{default:[qu]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment),t=O(),_(o.$$.fragment)},m(s,f){b(e,s,f),d(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&1&&(u.id=s[0]),f&514&&(u.$$scope={dirty:f,ctx:s}),!r&&f&4&&(r=!0,u.checked=s[2],Y(()=>r=!1)),e.$set(u);const c={};f&1&&(c.url=`pmtiles://${ue()}/v1/${s[0]}.pmtiles`),f&521&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){h(e.$$.fragment,s),h(o.$$.fragment,s),l=!1},d(s){s&&g(t),v(e,s),v(o,s)}}}function Ku(n,e,r){let t,{$$slots:o={},$$scope:l}=e,{name:i}=e,{singularNoun:a}=e,{pluralNoun:s}=e,f=J[i],u=!1;function c($){return $.properties.name??`Unnamed ${a}`}function p($){u=$,r(2,u)}return n.$$set=$=>{"name"in $&&r(0,i=$.name),"singularNoun"in $&&r(6,a=$.singularNoun),"pluralNoun"in $&&r(1,s=$.pluralNoun),"$$scope"in $&&r(9,l=$.$$scope)},n.$$.update=()=>{n.$$.dirty&4&&r(3,t=u?"visible":"none")},[i,s,u,t,f,c,a,o,p,l]}class $r extends U{constructor(e){super(),G(this,e,Ku,Xu,z,{name:0,singularNoun:6,pluralNoun:1})}}function Zu(n){let e;return{c(){e=S("hospital")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Yu(n){let e,r,t,o,l,i,a;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Zu]},$$scope:{ctx:n}}}),i=new et({}),{c(){e=E("p"),r=S("This shows "),_(t.$$.fragment),o=S(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),l=O(),_(i.$$.fragment)},m(s,f){d(s,e,f),P(e,r),b(t,e,null),P(e,o),d(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&1&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),a=!1},d(s){s&&(g(e),g(l)),v(t),v(i,s)}}}function Ju(n){let e,r;return e=new $r({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Yu]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,[o]){const l={};o&1&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}class Qu extends U{constructor(e){super(),G(this,e,null,Ju,z,{})}}function xu(n){let e,r,t;return e=new be({props:{color:n[2]}}),{c(){_(e.$$.fragment),r=S(`
  Railway Stations`)},m(o,l){b(e,o,l),d(o,r,l),t=!0},p:ee,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){h(e.$$.fragment,o),t=!1},d(o){o&&g(r),v(e,o)}}}function ec(n){let e;return{c(){e=S("railway station")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function tc(n){let e,r,t,o,l,i,a;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[ec]},$$scope:{ctx:n}}}),i=new et({}),{c(){e=E("p"),r=S("This shows "),_(t.$$.fragment),o=S(" data from OpenStreetMap (as of 9 August 2023)."),l=O(),_(i.$$.fragment)},m(s,f){d(s,e,f),P(e,r),b(t,e,null),P(e,o),d(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),a=!1},d(s){s&&(g(e),g(l)),v(t),v(i,s)}}}function rc(n){let e,r,t;return r=new ae({props:{$$slots:{default:[tc]},$$scope:{ctx:n}}}),{c(){e=E("span"),_(r.$$.fragment),K(e,"slot","right")},m(o,l){d(o,e,l),b(r,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),r.$set(i)},i(o){t||(m(r.$$.fragment,o),t=!0)},o(o){h(r.$$.fragment,o),t=!1},d(o){o&&g(e),v(r)}}}function nc(n){let e,r=hn(n[4][0])+"",t;return{c(){e=E("p"),t=S(r)},m(o,l){d(o,e,l),P(e,t)},p(o,l){l&16&&r!==(r=hn(o[4][0])+"")&&x(t,r)},d(o){o&&g(e)}}}function oc(n){let e,r;return e=new Ce({props:{openOn:"hover",$$slots:{default:[nc,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,o){const l={};o&48&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function lc(n){let e,r;return e=new Gt({props:{id:ir,paint:{"circle-color":n[2],"circle-radius":$o/2},layout:{visibility:n[1]},$$slots:{default:[oc]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function sc(n){let e,r,t,o,l;function i(s){n[3](s)}let a={id:ir,$$slots:{right:[rc],default:[xu]},$$scope:{ctx:n}};return n[0]!==void 0&&(a.checked=n[0]),e=new ie({props:a}),q.push(()=>Z(e,"checked",i)),o=new pr({props:{data:`${ue()}/v1/${ir}.geojson`,$$slots:{default:[lc]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment),t=O(),_(o.$$.fragment)},m(s,f){b(e,s,f),d(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),!r&&f&1&&(r=!0,u.checked=s[0],Y(()=>r=!1)),e.$set(u);const c={};f&34&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){h(e.$$.fragment,s),h(o.$$.fragment,s),l=!1},d(s){s&&g(t),v(e,s),v(o,s)}}}let ir="railway_stations";function hn(n){return n.properties.name??"Unnamed railway station"}function ic(n,e,r){let t,o=J.railway_stations,l=!1;function i(a){l=a,r(0,l)}return n.$$.update=()=>{n.$$.dirty&1&&r(1,t=l?"visible":"none")},[l,t,o,i]}class ac extends U{constructor(e){super(),G(this,e,ic,sc,z,{})}}function fc(n){let e;return{c(){e=S("primary and secondary schools")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function uc(n){let e,r,t,o,l,i,a;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[fc]},$$scope:{ctx:n}}}),i=new et({}),{c(){e=E("p"),r=S("This shows "),_(t.$$.fragment),o=S(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),l=O(),_(i.$$.fragment)},m(s,f){d(s,e,f),P(e,r),b(t,e,null),P(e,o),d(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&1&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),a=!1},d(s){s&&(g(e),g(l)),v(t),v(i,s)}}}function cc(n){let e,r;return e=new $r({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[uc]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,[o]){const l={};o&1&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}class pc extends U{constructor(e){super(),G(this,e,null,cc,z,{})}}function mc(n){let e;return{c(){e=S("sports pitches")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function $c(n){let e;return{c(){e=S("sports centres")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function dc(n){let e,r,t,o,l,i,a,s,f;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[mc]},$$scope:{ctx:n}}}),l=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[$c]},$$scope:{ctx:n}}}),s=new et({}),{c(){e=E("p"),r=S("This shows "),_(t.$$.fragment),o=S(" and "),_(l.$$.fragment),i=S(" data from OpenStreetMap (as of 9 August 2023)."),a=O(),_(s.$$.fragment)},m(u,c){d(u,e,c),P(e,r),b(t,e,null),P(e,o),b(l,e,null),P(e,i),d(u,a,c),b(s,u,c),f=!0},p(u,c){const p={};c&1&&(p.$$scope={dirty:c,ctx:u}),t.$set(p);const $={};c&1&&($.$$scope={dirty:c,ctx:u}),l.$set($)},i(u){f||(m(t.$$.fragment,u),m(l.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){h(t.$$.fragment,u),h(l.$$.fragment,u),h(s.$$.fragment,u),f=!1},d(u){u&&(g(e),g(a)),v(t),v(l),v(s,u)}}}function gc(n){let e,r;return e=new $r({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[dc]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,[o]){const l={};o&1&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}class hc extends U{constructor(e){super(),G(this,e,null,gc,z,{})}}function _n(n){const e=Lc(n[6][0]);n[7]=e[0],n[8]=e[1],n[9]=e[2],n[10]=e[3]}function _c(n){let e;return{c(){e=S("Vehicle counts")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function bc(n){let e;return{c(){e=S(`DfT road statistics
        `)},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function vc(n){let e;return{c(){e=S("methodology")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function wc(n){let e,r,t,o,l,i,a,s,f,u,c;return t=new X({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[bc]},$$scope:{ctx:n}}}),l=new X({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[vc]},$$scope:{ctx:n}}}),u=new Ge({}),{c(){e=E("p"),r=S("2022 AADF (annual average daily flow) data from "),_(t.$$.fragment),o=S(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),_(l.$$.fragment),i=S(" for details and caveats about the measurements."),a=O(),s=E("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,f=O(),_(u.$$.fragment)},m(p,$){d(p,e,$),P(e,r),b(t,e,null),P(e,o),b(l,e,null),P(e,i),d(p,a,$),d(p,s,$),d(p,f,$),b(u,p,$),c=!0},p(p,$){const k={};$&2048&&(k.$$scope={dirty:$,ctx:p}),t.$set(k);const y={};$&2048&&(y.$$scope={dirty:$,ctx:p}),l.$set(y)},i(p){c||(m(t.$$.fragment,p),m(l.$$.fragment,p),m(u.$$.fragment,p),c=!0)},o(p){h(t.$$.fragment,p),h(l.$$.fragment,p),h(u.$$.fragment,p),c=!1},d(p){p&&(g(e),g(a),g(s),g(f)),v(t),v(l),v(u,p)}}}function yc(n){let e,r,t;return r=new ae({props:{$$slots:{default:[wc]},$$scope:{ctx:n}}}),{c(){e=E("span"),_(r.$$.fragment),K(e,"slot","right")},m(o,l){d(o,e,l),b(r,e,null),t=!0},p(o,l){const i={};l&2048&&(i.$$scope={dirty:l,ctx:o}),r.$set(i)},i(o){t||(m(r.$$.fragment,o),t=!0)},o(o){h(r.$$.fragment,o),t=!1},d(o){o&&g(e),v(r)}}}function bn(n){let e,r;return e=new xe({props:{colorScale:n[2],limits:n[4]}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p:ee,i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function kc(n){_n(n);let e,r=n[7]+"",t,o,l,i,a,s=n[8]+"",f,u,c,p,$,k=n[9]+"",y,C,w,I,D,A=n[10]+"",N;return{c(){e=E("h2"),t=S(r),o=O(),l=E("p"),i=S("Total motor vehicles (2022 AADF): "),a=E("b"),f=S(s),u=O(),c=E("p"),p=S("Total pedal cycles (2022 AADF): "),$=E("b"),y=S(k),C=O(),w=E("p"),I=S("Count method: "),D=E("b"),N=S(A)},m(F,L){d(F,e,L),P(e,t),d(F,o,L),d(F,l,L),P(l,i),P(l,a),P(a,f),d(F,u,L),d(F,c,L),P(c,p),P(c,$),P($,y),d(F,C,L),d(F,w,L),P(w,I),P(w,D),P(D,N)},p(F,L){_n(F),L&64&&r!==(r=F[7]+"")&&x(t,r),L&64&&s!==(s=F[8]+"")&&x(f,s),L&64&&k!==(k=F[9]+"")&&x(y,k),L&64&&A!==(A=F[10]+"")&&x(N,A)},d(F){F&&(g(e),g(o),g(l),g(u),g(c),g(C),g(w))}}}function Sc(n){let e,r;return e=new Ce({props:{openOn:"hover",$$slots:{default:[kc,({features:t})=>({6:t}),({features:t})=>t?64:0]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,o){const l={};o&2112&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Cc(n){let e,r;return e=new Gt({props:{id:Ut,sourceLayer:Ut,paint:{"circle-color":Je(["get","motor_vehicles_2022"],n[3],n[2]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1},layout:{visibility:n[1]},$$slots:{default:[Sc]},$$scope:{ctx:n}}}),e.$on("click",Oc),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&2048&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Tc(n){let e,r,t,o,l,i;function a(u){n[5](u)}let s={id:Ut,$$slots:{right:[yc],default:[_c]},$$scope:{ctx:n}};n[0]!==void 0&&(s.checked=n[0]),e=new ie({props:s}),q.push(()=>Z(e,"checked",a));let f=n[0]&&bn(n);return l=new Ue({props:{url:`pmtiles://${ue()}/v1/${Ut}.pmtiles`,$$slots:{default:[Cc]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment),t=O(),f&&f.c(),o=O(),_(l.$$.fragment)},m(u,c){b(e,u,c),d(u,t,c),f&&f.m(u,c),d(u,o,c),b(l,u,c),i=!0},p(u,[c]){const p={};c&2048&&(p.$$scope={dirty:c,ctx:u}),!r&&c&1&&(r=!0,p.checked=u[0],Y(()=>r=!1)),e.$set(p),u[0]?f?(f.p(u,c),c&1&&m(f,1)):(f=bn(u),f.c(),m(f,1),f.m(o.parentNode,o)):f&&(re(),h(f,1,1,()=>{f=null}),ne());const $={};c&2050&&($.$$scope={dirty:c,ctx:u}),l.$set($)},i(u){i||(m(e.$$.fragment,u),m(f),m(l.$$.fragment,u),i=!0)},o(u){h(e.$$.fragment,u),h(f),h(l.$$.fragment,u),i=!1},d(u){u&&(g(t),g(o)),v(e,u),f&&f.d(u),v(l,u)}}}let Ut="vehicle_counts";function Lc(n){let e=n.properties;return[e.location,e.motor_vehicles_2022.toLocaleString(),e.pedal_cycles_2022.toLocaleString(),e.method]}function Oc(n){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${n.detail.features[0].properties.count_point}`,"_blank")}function Ac(n,e,r){let t,o=J.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],i=["","40k","80k","120k","160k",""],a=!1;function s(f){a=f,r(0,a)}return n.$$.update=()=>{n.$$.dirty&1&&r(1,t=a?"visible":"none")},[a,t,o,l,i,s]}class Ic extends U{constructor(e){super(),G(this,e,Ac,Tc,z,{})}}function Pc(n){let e,r,t,o,l,i,a,s;return e=new pc({}),t=new Qu({}),l=new hc({}),a=new ac({}),{c(){_(e.$$.fragment),r=O(),_(t.$$.fragment),o=O(),_(l.$$.fragment),i=O(),_(a.$$.fragment)},m(f,u){b(e,f,u),d(f,r,u),b(t,f,u),d(f,o,u),b(l,f,u),d(f,i,u),b(a,f,u),s=!0},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(l.$$.fragment,f),m(a.$$.fragment,f),s=!0)},o(f){h(e.$$.fragment,f),h(t.$$.fragment,f),h(l.$$.fragment,f),h(a.$$.fragment,f),s=!1},d(f){f&&(g(r),g(o),g(i)),v(e,f),v(t,f),v(l,f),v(a,f)}}}function Mc(n){let e,r;return e=new Lt({props:{small:!0,$$slots:{default:[Pc]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,o){const l={};o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Ec(n){let e,r,t,o,l,i,a,s,f,u;return e=new Mf({}),t=new Rf({}),l=new wf({}),a=new Ru({}),f=new Iu({}),{c(){_(e.$$.fragment),r=O(),_(t.$$.fragment),o=O(),_(l.$$.fragment),i=O(),_(a.$$.fragment),s=O(),_(f.$$.fragment)},m(c,p){b(e,c,p),d(c,r,p),b(t,c,p),d(c,o,p),b(l,c,p),d(c,i,p),b(a,c,p),d(c,s,p),b(f,c,p),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(l.$$.fragment,c),m(a.$$.fragment,c),m(f.$$.fragment,c),u=!0)},o(c){h(e.$$.fragment,c),h(t.$$.fragment,c),h(l.$$.fragment,c),h(a.$$.fragment,c),h(f.$$.fragment,c),u=!1},d(c){c&&(g(r),g(o),g(i),g(s)),v(e,c),v(t,c),v(l,c),v(a,c),v(f,c)}}}function Nc(n){let e,r;return e=new Lt({props:{small:!0,$$slots:{default:[Ec]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,o){const l={};o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Dc(n){let e,r,t,o,l,i,a,s,f,u;return e=new xa({}),t=new cf({}),l=new sa({}),a=new Oa({}),f=new za({}),{c(){_(e.$$.fragment),r=O(),_(t.$$.fragment),o=O(),_(l.$$.fragment),i=O(),_(a.$$.fragment),s=O(),_(f.$$.fragment)},m(c,p){b(e,c,p),d(c,r,p),b(t,c,p),d(c,o,p),b(l,c,p),d(c,i,p),b(a,c,p),d(c,s,p),b(f,c,p),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(l.$$.fragment,c),m(a.$$.fragment,c),m(f.$$.fragment,c),u=!0)},o(c){h(e.$$.fragment,c),h(t.$$.fragment,c),h(l.$$.fragment,c),h(a.$$.fragment,c),h(f.$$.fragment,c),u=!1},d(c){c&&(g(r),g(o),g(i),g(s)),v(e,c),v(t,c),v(l,c),v(a,c),v(f,c)}}}function Fc(n){let e,r;return e=new Lt({props:{small:!0,$$slots:{default:[Dc]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,o){const l={};o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function jc(n){let e,r,t,o;return e=new Zi({}),t=new ha({}),{c(){_(e.$$.fragment),r=O(),_(t.$$.fragment)},m(l,i){b(e,l,i),d(l,r,i),b(t,l,i),o=!0},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){h(e.$$.fragment,l),h(t.$$.fragment,l),o=!1},d(l){l&&g(r),v(e,l),v(t,l)}}}function Bc(n){let e,r,t,o;return e=new cu({}),t=new nu({}),{c(){_(e.$$.fragment),r=O(),_(t.$$.fragment)},m(l,i){b(e,l,i),d(l,r,i),b(t,l,i),o=!0},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){h(e.$$.fragment,l),h(t.$$.fragment,l),o=!1},d(l){l&&g(r),v(e,l),v(t,l)}}}function Hc(n){let e,r,t,o,l=ar()=="Private (development)",i,a;e=new Ic({}),t=new Kf({});let s=l&&Bc();return{c(){_(e.$$.fragment),r=O(),_(t.$$.fragment),o=O(),s&&s.c(),i=$e()},m(f,u){b(e,f,u),d(f,r,u),b(t,f,u),d(f,o,u),s&&s.m(f,u),d(f,i,u),a=!0},p:ee,i(f){a||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(s),a=!0)},o(f){h(e.$$.fragment,f),h(t.$$.fragment,f),h(s),a=!1},d(f){f&&(g(r),g(o),g(i)),v(e,f),v(t,f),s&&s.d(f)}}}function Rc(n){let e,r,t,o,l;function i(s){n[4](s)}let a={displayEnableButton:!0};return n[1]!==void 0&&(a.isInactive=n[1]),e=new ho({props:a}),n[3](e),q.push(()=>Z(e,"isInactive",i)),o=new Si({}),{c(){_(e.$$.fragment),t=O(),_(o.$$.fragment)},m(s,f){b(e,s,f),d(s,t,f),b(o,s,f),l=!0},p(s,f){const u={};!r&&f&2&&(r=!0,u.isInactive=s[1],Y(()=>r=!1)),e.$set(u)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){h(e.$$.fragment,s),h(o.$$.fragment,s),l=!1},d(s){s&&g(t),n[3](null),v(e,s),v(o,s)}}}function Wc(n){let e,r,t,o,l,i,a,s,f,u,c,p,$,k,y,C;return e=new bu({}),t=new Ie({props:{label:"Trip generators",$$slots:{default:[Mc]},$$scope:{ctx:n}}}),l=new Ie({props:{label:"Existing infrastructure",$$slots:{default:[Nc]},$$scope:{ctx:n}}}),a=new Ie({props:{label:"Boundaries",$$slots:{default:[Fc]},$$scope:{ctx:n}}}),f=new Ie({props:{label:"Census",$$slots:{default:[jc]},$$scope:{ctx:n}}}),c=new Ie({props:{label:"Other",$$slots:{default:[Hc]},$$scope:{ctx:n}}}),$=new Ie({props:{label:"Tools",$$slots:{default:[Rc]},$$scope:{ctx:n}}}),y=new go({props:{disabled:!n[1]}}),{c(){_(e.$$.fragment),r=O(),_(t.$$.fragment),o=O(),_(l.$$.fragment),i=O(),_(a.$$.fragment),s=O(),_(f.$$.fragment),u=O(),_(c.$$.fragment),p=O(),_($.$$.fragment),k=O(),_(y.$$.fragment)},m(w,I){b(e,w,I),d(w,r,I),b(t,w,I),d(w,o,I),b(l,w,I),d(w,i,I),b(a,w,I),d(w,s,I),b(f,w,I),d(w,u,I),b(c,w,I),d(w,p,I),b($,w,I),d(w,k,I),b(y,w,I),C=!0},p(w,I){const D={};I&32&&(D.$$scope={dirty:I,ctx:w}),t.$set(D);const A={};I&32&&(A.$$scope={dirty:I,ctx:w}),l.$set(A);const N={};I&32&&(N.$$scope={dirty:I,ctx:w}),a.$set(N);const F={};I&32&&(F.$$scope={dirty:I,ctx:w}),f.$set(F);const L={};I&32&&(L.$$scope={dirty:I,ctx:w}),c.$set(L);const M={};I&35&&(M.$$scope={dirty:I,ctx:w}),$.$set(M);const j={};I&2&&(j.disabled=!w[1]),y.$set(j)},i(w){C||(m(e.$$.fragment,w),m(t.$$.fragment,w),m(l.$$.fragment,w),m(a.$$.fragment,w),m(f.$$.fragment,w),m(c.$$.fragment,w),m($.$$.fragment,w),m(y.$$.fragment,w),C=!0)},o(w){h(e.$$.fragment,w),h(t.$$.fragment,w),h(l.$$.fragment,w),h(a.$$.fragment,w),h(f.$$.fragment,w),h(c.$$.fragment,w),h($.$$.fragment,w),h(y.$$.fragment,w),C=!1},d(w){w&&(g(r),g(o),g(i),g(s),g(u),g(p),g(k)),v(e,w),v(t,w),v(l,w),v(a,w),v(f,w),v(c,w),v($,w),v(y,w)}}}function zc(n){let e,r,t,o;return e=new Ie({props:{label:"Layers",open:!0,$$slots:{default:[Wc]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(l,i){b(e,l,i),r=!0,t||(o=ht(window,"keydown",n[2]),t=!0)},p(l,[i]){const a={};i&35&&(a.$$scope={dirty:i,ctx:l}),e.$set(a)},i(l){r||(m(e.$$.fragment,l),r=!0)},o(l){h(e.$$.fragment,l),r=!1},d(l){v(e,l),t=!1,o()}}}function Uc(n,e,r){let t;Q(n,_r,s=>r(1,t=s));let o;function l(s){!t&&s.key=="Escape"&&(o.disableStreetView(),s.preventDefault())}function i(s){q[s?"unshift":"push"](()=>{o=s,r(0,o)})}function a(s){t=s,_r.set(t)}return[o,t,l,i,a]}class Gc extends U{constructor(e){super(),G(this,e,Uc,zc,z,{})}}function Vc(n,e,r){let{loadFile:t}=e;return bt(async()=>{let l=await(await fetch(`${ur()}/v1/random_schemes.geojson`)).text();t(l)}),n.$$set=o=>{"loadFile"in o&&r(0,t=o.loadFile)},[t]}class qc extends U{constructor(e){super(),G(this,e,Vc,null,z,{loadFile:0})}}function Xc(n){let e;return{c(){e=S("Show on map")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Kc(n){let e;return{c(){e=S("Edit scheme locally")},m(r,t){d(r,e,t)},d(r){r&&g(e)}}}function Zc(n){let e,r,t=n[0].authority_or_region+"",o,l,i,a,s=n[0].capital_scheme_id+"",f,u,c,p,$=n[0].funding_programme+"",k,y,C,w,I,D,A;return w=new St({props:{$$slots:{default:[Xc]},$$scope:{ctx:n}}}),w.$on("click",n[3]),D=new St({props:{disabled:n[1],title:n[2],$$slots:{default:[Kc]},$$scope:{ctx:n}}}),D.$on("click",n[4]),{c(){e=E("p"),r=S("Authority or region: "),o=S(t),l=O(),i=E("p"),a=S("Capital scheme ID: "),f=S(s),u=O(),c=E("p"),p=S("Funding programme: "),k=S($),y=O(),C=E("div"),_(w.$$.fragment),I=O(),_(D.$$.fragment),K(C,"class","govuk-button-group")},m(N,F){d(N,e,F),P(e,r),P(e,o),d(N,l,F),d(N,i,F),P(i,a),P(i,f),d(N,u,F),d(N,c,F),P(c,p),P(c,k),d(N,y,F),d(N,C,F),b(w,C,null),P(C,I),b(D,C,null),A=!0},p(N,F){(!A||F&1)&&t!==(t=N[0].authority_or_region+"")&&x(o,t),(!A||F&1)&&s!==(s=N[0].capital_scheme_id+"")&&x(f,s),(!A||F&1)&&$!==($=N[0].funding_programme+"")&&x(k,$);const L={};F&256&&(L.$$scope={dirty:F,ctx:N}),w.$set(L);const M={};F&256&&(M.$$scope={dirty:F,ctx:N}),D.$set(M)},i(N){A||(m(w.$$.fragment,N),m(D.$$.fragment,N),A=!0)},o(N){h(w.$$.fragment,N),h(D.$$.fragment,N),A=!1},d(N){N&&(g(e),g(l),g(i),g(u),g(c),g(y),g(C)),v(w),v(D)}}}function Yc(n){let e,r;return e=new Ie({props:{label:`${n[0].scheme_reference}: ${n[0].num_features} features`,$$slots:{default:[Zc]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,[o]){const l={};o&1&&(l.label=`${t[0].scheme_reference}: ${t[0].num_features} features`),o&257&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Jc(n,e,r){let t,o;Q(n,mt,c=>r(6,t=c)),Q(n,Se,c=>r(7,o=c));let{scheme:l}=e,{authorityNames:i}=e,a=!i.has(l.authority_or_region),s=a?"This scheme doesn't have an authority specified correctly, so you can't edit this scheme. We're working to fix this problem.":void 0;function f(){let c={type:"FeatureCollection",features:t.features.filter(p=>p.properties.scheme_reference==l.scheme_reference)};o==null||o.fitBounds(io(c),{padding:20,animate:!1})}function u(){let c={type:"FeatureCollection",features:t.features.filter($=>$.properties.scheme_reference==l.scheme_reference)},p=l.authority_or_region;window.localStorage.setItem(p,JSON.stringify(c)),window.open(`scheme.html?authority=${l.authority_or_region}`,"_blank")}return n.$$set=c=>{"scheme"in c&&r(0,l=c.scheme),"authorityNames"in c&&r(5,i=c.authorityNames)},[l,a,s,f,u,i]}class Qc extends U{constructor(e){super(),G(this,e,Jc,Yc,z,{scheme:0,authorityNames:5})}}const xc=["Adur","Allerdale","Amber Valley","Arun","Ashfield","Ashford","Babergh","Barking and Dagenham","Barnet","Barnsley","Barrow-in-Furness","Basildon","Basingstoke and Deane","Bassetlaw","Bath and North East Somerset","Bedford","Bexley","Birmingham","Blaby","Blackburn with Darwen","Blackpool","Bolsover","Bolton","Boston","Bournemouth, Christchurch and Poole","Bracknell Forest","Bradford","Braintree","Breckland","Brent","Brentwood","Brighton and Hove","Bristol, City of","Broadland","Bromley","Bromsgrove","Broxbourne","Broxtowe","Buckinghamshire","Burnley","Bury","Calderdale","Cambridge","Cambridgeshire and Peterborough Combined Authority","Camden","Cannock Chase","Canterbury","Carlisle","Castle Point","Central Bedfordshire","Charnwood","Chelmsford","Cheltenham","Cherwell","Cheshire East","Cheshire West and Chester","Chesterfield","Chichester","Chorley","City of London","Colchester","Copeland","Cornwall","Cotswold","County Durham","Coventry","Craven","Crawley","Croydon","Cumbria","Dacorum","Darlington","Dartford","Derby","Derbyshire","Derbyshire Dales","Devon","Doncaster","Dorset","Dover","Dudley","Ealing","Eastbourne","East Cambridgeshire","East Devon","East Hampshire","East Hertfordshire","Eastleigh","East Lindsey","East Riding of Yorkshire","East Staffordshire","East Suffolk","East Sussex","Eden","Elmbridge","Enfield","Epping Forest","Epsom and Ewell","Erewash","Essex","Exeter","Fareham","Fenland","Folkestone and Hythe","Forest of Dean","Fylde","Gateshead","Gedling","Gloucester","Gloucestershire","Gosport","Gravesham","Greater London","Greater Manchester Combined Authority","Great Yarmouth","Greenwich","Guildford","Hackney","Halton","Hambleton","Hammersmith and Fulham","Hampshire","Harborough","Haringey","Harlow","Harrogate","Harrow","Hart","Hartlepool","Hastings","Havant","Havering","Herefordshire","Herefordshire, County of","Hertfordshire","Hertsmere","High Peak","Hillingdon","Hinckley and Bosworth","Horsham","Hounslow","Huntingdonshire","Hyndburn","Ipswich","Isle of Wight","Isles of Scilly","Islington","Kensington and Chelsea","Kent","King's Lynn and West Norfolk","Kingston upon Hull","Kingston upon Hull, City of","Kingston upon Thames","Kirklees","Knowsley","Lambeth","Lancashire","Lancaster","Leeds","Leicester","Leicestershire","Lewes","Lewisham","Lichfield","Lincoln","Lincolnshire","Liverpool","Liverpool City Region Combined Authority","Luton","Maidstone","Maldon","Malvern Hills","Manchester","Mansfield","Medway","Melton","Mendip","Merton","Mid Devon","Middlesbrough","Mid Suffolk","Mid Sussex","Milton Keynes","Mole Valley","Newark and Sherwood","Newcastle-under-Lyme","Newcastle upon Tyne","New Forest","Newham","Norfolk","North Devon","North East Derbyshire","North East Joint Transport Committee","North East Lincolnshire","North Hertfordshire","North Kesteven","North Lincolnshire","North Norfolk","North Northamptonshire","North Somerset","North Tyneside","Northumberland","North Warwickshire","North West Leicestershire","North Yorkshire","Norwich","Nottingham","Nottinghamshire","Nuneaton and Bedworth","Oadby and Wigston","Oldham","Oxford","Oxfordshire","Pendle","Peterborough","Plymouth","Portsmouth","Preston","Reading","Redbridge","Redcar and Cleveland","Redditch","Reigate and Banstead","Ribble Valley","Richmondshire","Richmond upon Thames","Rochdale","Rochford","Rossendale","Rother","Rotherham","Rugby","Runnymede","Rushcliffe","Rushmoor","Rutland","Ryedale","Salford","Sandwell","Scarborough","Sedgemoor","Sefton","Selby","Sevenoaks","Sheffield","Sheffield City Region Combined Authority","Shropshire","Slough","Solihull","Somerset","Somerset West and Taunton","Southampton","South Cambridgeshire","South Derbyshire","Southend-on-Sea","South Gloucestershire","South Hams","South Holland","South Kesteven","South Lakeland","South Norfolk","South Oxfordshire","South Ribble","South Somerset","South Staffordshire","South Tyneside","Southwark","Spelthorne","Stafford","Staffordshire","Staffordshire Moorlands","St Albans","Stevenage","St. Helens","Stockport","Stockton-on-Tees","Stoke-on-Trent","Stratford-on-Avon","Stroud","Suffolk","Sunderland","Surrey","Surrey Heath","Sutton","Swale","Swindon","Tameside","Tamworth","Tandridge","Tees Valley Combined Authority","Teignbridge","Telford and Wrekin","Tendring","Test Valley","Tewkesbury","Thanet","Three Rivers","Thurrock","Tonbridge and Malling","Torbay","Torridge","Tower Hamlets","Trafford","Tunbridge Wells","Uttlesford","Vale of White Horse","Wakefield","Walsall","Waltham Forest","Wandsworth","Warrington","Warwick","Warwickshire","Watford","Waverley","Wealden","Welwyn Hatfield","West Berkshire","West Devon","West Lancashire","West Lindsey","West Midlands ITA","Westminster","West Northamptonshire","West of England Combined Authority","West Oxfordshire","West Suffolk","West Sussex","West Yorkshire Combined Authority","Wigan","Wiltshire","Winchester","Windsor and Maidenhead","Wirral","Woking","Wokingham","Wolverhampton","Worcester","Worcestershire","Worthing","Wychavon","Wyre","Wyre Forest","York"];function vn(n,e,r){const t=n.slice();return t[13]=e[r],t}function ep(n){let e,r;return e=new qc({props:{loadFile:n[7]}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p:ee,i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function wn(n){let e,r,t,o;function l(s){n[9](s)}function i(s){n[10](s)}let a={schemes:n[1]};return n[2]!==void 0&&(a.schemesToBeShown=n[2]),n[3]!==void 0&&(a.filterText=n[3]),e=new $i({props:a}),q.push(()=>Z(e,"schemesToBeShown",l)),q.push(()=>Z(e,"filterText",i)),{c(){_(e.$$.fragment)},m(s,f){b(e,s,f),o=!0},p(s,f){const u={};f&2&&(u.schemes=s[1]),!r&&f&4&&(r=!0,u.schemesToBeShown=s[2],Y(()=>r=!1)),!t&&f&8&&(t=!0,u.filterText=s[3],Y(()=>t=!1)),e.$set(u)},i(s){o||(m(e.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),o=!1},d(s){v(e,s)}}}function yn(n){let e,r;return e=new Qc({props:{scheme:n[13],authorityNames:n[6]}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,o){const l={};o&2&&(l.scheme=t[13]),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function kn(n){let e=n[2].has(n[13].scheme_reference),r,t,o=e&&yn(n);return{c(){o&&o.c(),r=$e()},m(l,i){o&&o.m(l,i),d(l,r,i),t=!0},p(l,i){i&6&&(e=l[2].has(l[13].scheme_reference)),e?o?(o.p(l,i),i&6&&m(o,1)):(o=yn(l),o.c(),m(o,1),o.m(r.parentNode,r)):o&&(re(),h(o,1,1,()=>{o=null}),ne())},i(l){t||(m(o),t=!0)},o(l){h(o),t=!1},d(l){l&&g(r),o&&o.d(l)}}}function tp(n){let e,r,t,o,l,i,a,s,f,u,c=ar()=="Private (development)",p,$,k,y,C,w,I,D;l=new yo({props:{boundaryGeojson:n[5]}}),a=new tl({}),f=new ao({});let A=c&&ep(n);$=new So({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:n[7]}}),y=new Ln({props:{errorMessage:n[0]}});let N=n[1].size>0&&wn(n),F=Fe(n[1].values()),L=[];for(let j=0;j<F.length;j+=1)L[j]=kn(vn(n,F,j));const M=j=>h(L[j],1,1,()=>{L[j]=null});return{c(){e=E("div"),r=E("div"),t=E("h1"),t.textContent="Browse schemes",o=O(),_(l.$$.fragment),i=O(),_(a.$$.fragment),s=O(),_(f.$$.fragment),u=O(),A&&A.c(),p=O(),_($.$$.fragment),k=O(),_(y.$$.fragment),C=O(),N&&N.c(),w=O(),I=E("ul");for(let j=0;j<L.length;j+=1)L[j].c();Be(r,"display","flex"),Be(r,"justify-content","space-between"),K(e,"slot","sidebar"),K(e,"class","govuk-prose")},m(j,T){d(j,e,T),P(e,r),P(r,t),P(r,o),b(l,r,null),P(e,i),b(a,e,null),P(e,s),b(f,e,null),P(e,u),A&&A.m(e,null),P(e,p),b($,e,null),P(e,k),b(y,e,null),P(e,C),N&&N.m(e,null),P(e,w),P(e,I);for(let H=0;H<L.length;H+=1)L[H]&&L[H].m(I,null);D=!0},p(j,T){const H={};T&32&&(H.boundaryGeojson=j[5]),l.$set(H),c&&A.p(j,T);const W={};if(T&1&&(W.errorMessage=j[0]),y.$set(W),j[1].size>0?N?(N.p(j,T),T&2&&m(N,1)):(N=wn(j),N.c(),m(N,1),N.m(e,w)):N&&(re(),h(N,1,1,()=>{N=null}),ne()),T&70){F=Fe(j[1].values());let V;for(V=0;V<F.length;V+=1){const le=vn(j,F,V);L[V]?(L[V].p(le,T),m(L[V],1)):(L[V]=kn(le),L[V].c(),m(L[V],1),L[V].m(I,null))}for(re(),V=F.length;V<L.length;V+=1)M(V);ne()}},i(j){if(!D){m(l.$$.fragment,j),m(a.$$.fragment,j),m(f.$$.fragment,j),m(A),m($.$$.fragment,j),m(y.$$.fragment,j),m(N);for(let T=0;T<F.length;T+=1)m(L[T]);D=!0}},o(j){h(l.$$.fragment,j),h(a.$$.fragment,j),h(f.$$.fragment,j),h(A),h($.$$.fragment,j),h(y.$$.fragment,j),h(N),L=L.filter(Boolean);for(let T=0;T<L.length;T+=1)h(L[T]);D=!1},d(j){j&&g(e),v(l),v(a),v(f),A&&A.d(),v($),v(y),N&&N.d(),Et(L,j)}}}function rp(n){let e,r,t,o,l,i,a,s,f,u,c;return e=new ko({props:{colorInterventions:An("v1")}}),t=new ke({props:{layer:"interventions-points",tooltip:n[8],clickable:!1}}),l=new ke({props:{layer:"interventions-lines",tooltip:n[8],clickable:!1}}),a=new ke({props:{layer:"interventions-polygons",tooltip:n[8],clickable:!1}}),u=new Gc({}),{c(){_(e.$$.fragment),r=O(),_(t.$$.fragment),o=O(),_(l.$$.fragment),i=O(),_(a.$$.fragment),s=O(),f=E("div"),_(u.$$.fragment),K(f,"class","top-right svelte-u44ed2")},m(p,$){b(e,p,$),d(p,r,$),b(t,p,$),d(p,o,$),b(l,p,$),d(p,i,$),b(a,p,$),d(p,s,$),d(p,f,$),b(u,f,null),c=!0},p:ee,i(p){c||(m(e.$$.fragment,p),m(t.$$.fragment,p),m(l.$$.fragment,p),m(a.$$.fragment,p),m(u.$$.fragment,p),c=!0)},o(p){h(e.$$.fragment,p),h(t.$$.fragment,p),h(l.$$.fragment,p),h(a.$$.fragment,p),h(u.$$.fragment,p),c=!1},d(p){p&&(g(r),g(o),g(i),g(s),g(f)),v(e,p),v(t,p),v(l,p),v(a,p),v(u)}}}function np(n){let e,r,t;return r=new bo({props:{style:n[4],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[rp]},$$scope:{ctx:n}}}),{c(){e=E("div"),_(r.$$.fragment),K(e,"slot","main")},m(o,l){d(o,e,l),b(r,e,null),t=!0},p(o,l){const i={};l&16&&(i.style=o[4]),l&65536&&(i.$$scope={dirty:l,ctx:o}),r.$set(i)},i(o){t||(m(r.$$.fragment,o),t=!0)},o(o){h(r.$$.fragment,o),t=!1},d(o){o&&g(e),v(r)}}}function op(n){let e,r;return e=new _o({props:{$$slots:{main:[np],sidebar:[tp]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},m(t,o){b(e,t,o),r=!0},p(t,[o]){const l={};o&65599&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function lp(n,e,r){let t,o;Q(n,br,C=>r(4,t=C)),Q(n,mt,C=>r(5,o=C));let l=new Set(xc);bt(()=>{fo()});const i=new URLSearchParams(window.location.search);br.set(i.get("style")||"dataviz");let a="",s=new Map,f=new Set,u="";_t(()=>{mt.set(fr())});function c(C){try{let w=JSON.parse(C);r(1,s=ri(w)),mt.set(w),r(0,a="")}catch(w){r(0,a=`The file you loaded is broken: ${w}`)}}function p(C){let w=C.properties;var I='<div style="max-width: 30vw;">';return I+=`<h2>${$(w.name)} (${w.intervention_type})</h2>`,I+=`<p>Scheme reference: ${w.scheme_reference}</p>`,w.length_meters&&(I+=`<p>Length: ${uo(w.length_meters)}</p>`),w.description&&(I+=`<p>${$(w.description)}</p>`),I+="</div>",I}function $(C){return u?C.replace(new RegExp(u,"gi"),w=>`<mark>${w}</mark>`):C}function k(C){f=C,r(2,f)}function y(C){u=C,r(3,u)}return[a,s,f,u,t,o,l,c,p,k,y]}class sp extends U{constructor(e){super(),G(this,e,lp,op,z,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new sp({target:document.getElementById("app")});
