import{S as z,i as q,s as G,M as Fr,b as X,c as Y,e as L,d as T,g as h,av as jr,h as K,j as $,k,m as b,w as nt,l as J,t as g,n as _,p as m,q as v,aH as ct,aI as pt,aJ as $t,aK as mt,_ as ge,y as ne,o as re,aQ as Re,N as pe,a1 as Ft,aR as Vt,aS as Br,x as Q,aT as Hr,aU as Rr,r as ot,aV as Je,u as w,f as nn,am as Wr,C as lt,ao as pr,P as Qe,F as $r,a as it,v as an,I as R,B as Xt,aA as Ur,ax as Ne,aL as Gr,aM as zr,a9 as qr,W as rn,ai as Vr,ak as Xr,aP as V,an as Ie,ay as vt,aW as ae,aX as Ae,R as mr,aY as gr,aZ as on,E as dr,a_ as fn,D as Kr,aO as un,L as Yr,z as Jr,aE as Zr}from"./index-f4bce88c.js";import{g as _r,u as Qr,m as xr,e as wt,C as Te,b as gt,d as te,c as eo,a as to,B as no,S as ro,L as oo,M as lo}from"./StreetViewController-009be471.js";import{j as so,k as io,h as ao,i as cn,f as hr,l as fo,F as Ue,m as ie,L as de,G as jt,n as we,C as rt,Z as uo,I as co}from"./index-b4fca4b9.js";import{F as po}from"./FileInput-042d958a.js";import{I as Bt}from"./InteractiveLayer-e5ba8a39.js";const $o="/atip/svelte_maplibre_v2/assets/help-d011708a.svg";function mo(r){let e,n;const t=r[1].default,o=ct(t,r,r[4],null);return{c(){e=L("div"),o&&o.c(),K(e,"class","govuk-prose")},m(l,i){$(l,e,i),o&&o.m(e,null),n=!0},p(l,i){o&&o.p&&(!n||i&16)&&pt(o,t,l,l[4],n?mt(t,l[4],i,null):$t(l[4]),null)},i(l){n||(g(o,l),n=!0)},o(l){_(o,l),n=!1},d(l){l&&m(e),o&&o.d(l)}}}function go(r){let e,n,t,o,l,i,a,s,f;function u(p){r[3](p)}let c={title:"Help",$$slots:{default:[mo]},$$scope:{ctx:r}};return r[0]!==void 0&&(c.open=r[0]),l=new Fr({props:c}),X.push(()=>Y(l,"open",u)),{c(){e=L("button"),n=L("img"),o=T(),h(l.$$.fragment),jr(n.src,t=$o)||K(n,"src",t),K(n,"title","Help"),K(n,"alt","Help"),K(e,"class","svelte-7d9d1l")},m(p,d){$(p,e,d),k(e,n),$(p,o,d),b(l,p,d),a=!0,s||(f=nt(e,"click",r[2]),s=!0)},p(p,[d]){const C={};d&16&&(C.$$scope={dirty:d,ctx:p}),!i&&d&1&&(i=!0,C.open=p[0],J(()=>i=!1)),l.$set(C)},i(p){a||(g(l.$$.fragment,p),a=!0)},o(p){_(l.$$.fragment,p),a=!1},d(p){p&&(m(e),m(o)),v(l,p),s=!1,f()}}}function _o(r,e,n){let{$$slots:t={},$$scope:o}=e,l=!1;const i=()=>n(0,l=!0);function a(s){l=s,n(0,l)}return r.$$set=s=>{"$$scope"in s&&n(4,o=s.$$scope)},[l,t,i,a,o]}class oe extends z{constructor(e){super(),q(this,e,_o,go,G,{})}}function pn(r){let e=r[0],n,t,o=$n(r);return{c(){o.c(),n=ge()},m(l,i){o.m(l,i),$(l,n,i),t=!0},p(l,i){i&1&&G(e,e=l[0])?(ne(),_(o,1,1,Q),re(),o=$n(l),o.c(),g(o,1),o.m(n.parentNode,n)):o.p(l,i)},i(l){t||(g(o),t=!0)},o(l){_(o),t=!1},d(l){l&&m(n),o.d(l)}}}function $n(r){let e;const n=r[8].default,t=ct(n,r,r[7],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&128)&&pt(t,n,o,o[7],e?mt(n,o[7],l,null):$t(o[7]),null)},i(o){e||(g(t,o),e=!0)},o(o){_(t,o),e=!1},d(o){t&&t.d(o)}}}function ho(r){let e,n,t=r[0]&&pn(r);return{c(){t&&t.c(),e=ge()},m(o,l){t&&t.m(o,l),$(o,e,l),n=!0},p(o,[l]){o[0]?t?(t.p(o,l),l&1&&g(t,1)):(t=pn(o),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(ne(),_(t,1,1,()=>{t=null}),re())},i(o){n||(g(t),n=!0)},o(o){_(t),n=!1},d(o){o&&m(e),t&&t.d(o)}}}function bo(r,e,n){let t,o,{$$slots:l={},$$scope:i}=e,{id:a=_r("vector")}=e,{url:s=null}=e,{tiles:f=null}=e;if(s&&s.includes("pmtiles://")&&!Re.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let p=new Hr;Re.addProtocol("pmtiles",p.tile)}const{map:u,self:c}=Qr();return pe(r,u,p=>n(6,t=p)),pe(r,c,p=>n(0,o=p)),Ft(()=>{if(o){let p=o;Vt(c,o=null,o),Br().then(()=>{t!=null&&t.loaded()&&(t==null||t.removeSource(p))})}}),r.$$set=p=>{"id"in p&&n(3,a=p.id),"url"in p&&n(4,s=p.url),"tiles"in p&&n(5,f=p.tiles),"$$scope"in p&&n(7,i=p.$$scope)},r.$$.update=()=>{r.$$.dirty&121&&t&&o!==a&&(o&&t.removeSource(o),Vt(c,o=a,o),t.addSource(o,so({type:"vector",url:s,tiles:f})))},[o,u,c,a,s,f,t,i,l]}class $e extends z{constructor(e){super(),q(this,e,bo,ho,G,{id:3,url:4,tiles:5})}}const vo=r=>({features:r[0]&16,data:r[0]&16,map:r[0]&4,close:r[0]&1}),mn=r=>{var e;return{features:r[4],data:(e=r[4])==null?void 0:e[0],map:r[2],close:r[29]}};function gn(r){let e,n,t=(r[4]||r[3]instanceof Re.Marker)&&dn(r);return{c(){e=L("div"),t&&t.c()},m(o,l){$(o,e,l),t&&t.m(e,null),r[30](e),n=!0},p(o,l){o[4]||o[3]instanceof Re.Marker?t?(t.p(o,l),l[0]&24&&g(t,1)):(t=dn(o),t.c(),g(t,1),t.m(e,null)):t&&(ne(),_(t,1,1,()=>{t=null}),re())},i(o){n||(g(t),n=!0)},o(o){_(t),n=!1},d(o){o&&m(e),t&&t.d(),r[30](null)}}}function dn(r){let e;const n=r[28].default,t=ct(n,r,r[27],mn);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l[0]&134217749)&&pt(t,n,o,o[27],e?mt(n,o[27],l,vo):$t(o[27]),mn)},i(o){e||(g(t,o),e=!0)},o(o){_(t,o),e=!1},d(o){t&&t.d(o)}}}function wo(r){let e,n,t=r[8].default&&gn(r);return{c(){t&&t.c(),e=ge()},m(o,l){t&&t.m(o,l),$(o,e,l),n=!0},p(o,l){o[8].default?t?(t.p(o,l),l[0]&256&&g(t,1)):(t=gn(o),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(ne(),_(t,1,1,()=>{t=null}),re())},i(o){n||(g(t),n=!0)},o(o){_(t),n=!1},d(o){o&&m(e),t&&t.d(o)}}}function yo(r,e,n){let t,o,l,i,a,{$$slots:s={},$$scope:f}=e;const u=Rr(s);let{closeButton:c=void 0}=e,{closeOnClickOutside:p=!0}=e,{closeOnClickInside:d=!1}=e,{closeOnMove:C=!1}=e,{openOn:y="click"}=e,{focusAfterOpen:O=!0}=e,{anchor:S=void 0}=e,{offset:P=void 0}=e,{popupClass:B=void 0}=e,{maxWidth:N=void 0}=e,{lngLat:I=void 0}=e,{html:D=void 0}=e,{open:A=!1}=e;const{map:E,popupTarget:M,layerEvent:H}=xr();pe(r,E,j=>n(2,l=j)),pe(r,M,j=>n(3,a=j)),pe(r,H,j=>n(26,i=j));const F=["click","dblclick","contextmenu"];let W,U=!1,le;function qe(){if(!W)return;let j=W.getElement();!j||j===le||(le=j,y==="hover"&&(le.style.pointerEvents="none"),le.addEventListener("mouseenter",()=>{n(22,U=!0)},{passive:!0}),le.addEventListener("mouseleave",()=>{n(22,U=!1)},{passive:!0}),le.addEventListener("click",()=>{d&&n(0,A=!1)},{passive:!0}))}ot(()=>{if(l)return l.on("click",Pe),typeof a=="string"&&(l.on("click",a,_e),l.on("dblclick",a,_e),l.on("contextmenu",a,_e),l.on("mousemove",a,ke),l.on("mouseleave",a,ye),l.on("touchstart",a,ce),l.on("touchend",a,je)),()=>{l!=null&&l.loaded()&&(W==null||W.remove(),l.off("click",Pe),a instanceof Re.Marker?a.getPopup()===W&&a.setPopup(void 0):typeof a=="string"&&(l.off("click",a,_e),l.off("dblclick",a,_e),l.off("contextmenu",a,_e),l.off("mousemove",a,ke),l.off("mouseleave",a,ye),l.off("touchstart",a,ce),l.off("touchend",a,je)))}});let ee=null,ue="normal";function _e(j){j.type===y&&("layerType"in j?j.layerType==="deckgl"?(n(9,I=j.coordinate),n(4,ee=j.object?[j.object]:null)):(n(9,I=j.lngLat),n(4,ee=j.features??[])):(n(9,I=j.lngLat),n(4,ee=j.features??[])),setTimeout(()=>n(0,A=!0)))}let he=null;function ce(j){he=j.point}function je(j){if(!he||y!=="hover")return;let fe=he.dist(j.point);he=null,fe<3&&(n(9,I=j.lngLat),n(4,ee=j.features??[]),W.isOpen()?n(23,ue="justOpened"):(n(23,ue="opening"),n(0,A=!0)))}function ye(j){y!=="hover"||he||ue!=="normal"||(n(0,A=!1),n(4,ee=null))}function ke(j){y!=="hover"||he||ue!=="normal"||(n(0,A=!0),n(4,ee=j.features??[]),n(9,I=j.lngLat))}function Pe(j){if(ue==="justOpened"){n(23,ue="normal");return}if(!p)return;let fe=[le,a instanceof Re.Marker?a==null?void 0:a.getElement():null];A&&W.isOpen()&&!fe.some(me=>me==null?void 0:me.contains(j.originalEvent.target))&&n(0,A=!1)}let Se;const Be=()=>n(0,A=!1);function Me(j){X[j?"unshift":"push"](()=>{Se=j,n(1,Se)})}return r.$$set=j=>{"closeButton"in j&&n(10,c=j.closeButton),"closeOnClickOutside"in j&&n(11,p=j.closeOnClickOutside),"closeOnClickInside"in j&&n(12,d=j.closeOnClickInside),"closeOnMove"in j&&n(13,C=j.closeOnMove),"openOn"in j&&n(14,y=j.openOn),"focusAfterOpen"in j&&n(15,O=j.focusAfterOpen),"anchor"in j&&n(16,S=j.anchor),"offset"in j&&n(17,P=j.offset),"popupClass"in j&&n(18,B=j.popupClass),"maxWidth"in j&&n(19,N=j.maxWidth),"lngLat"in j&&n(9,I=j.lngLat),"html"in j&&n(20,D=j.html),"open"in j&&n(0,A=j.open),"$$scope"in j&&n(27,f=j.$$scope)},r.$$.update=()=>{if(r.$$.dirty[0]&7168&&n(25,t=c??(!p&&!d)),r.$$.dirty[0]&36675584&&(W||(n(21,W=new Re.Popup({closeButton:t,closeOnClick:!1,closeOnMove:C,focusAfterOpen:O,maxWidth:N,className:B,anchor:S,offset:P})),le=W.getElement(),W.on("open",()=>{n(0,A=!0),qe()}),W.on("close",j=>{n(0,A=!1)}))),r.$$.dirty[0]&2113544&&W&&a instanceof Re.Marker&&(y==="click"?a.setPopup(W):a.getPopup()===W&&a.setPopup(void 0)),r.$$.dirty[0]&67125248&&F.includes(y)&&(i==null?void 0:i.type)===y&&(_e(i),Vt(H,i=null,i)),r.$$.dirty[0]&67125248&&n(24,o=y==="hover"&&((i==null?void 0:i.type)==="mousemove"||(i==null?void 0:i.type)==="mouseenter")),r.$$.dirty[0]&88096768&&y==="hover"&&H&&(o&&i&&(i.layerType==="deckgl"?(n(9,I=i.coordinate),n(4,ee=i.object?[i.object]:null)):(n(9,I=i.lngLat),n(4,ee=i.features??[]))),n(0,A=(o||U)??!1)),r.$$.dirty[0]&3145730&&(Se?W.setDOMContent(Se):D&&W.setHTML(D)),r.$$.dirty[0]&2097664&&I&&W.setLngLat(I),r.$$.dirty[0]&10485765&&l){let j=W.isOpen();A&&!j?(W.addTo(l),ue==="opening"&&n(23,ue="justOpened")):!A&&j&&W.remove()}},[A,Se,l,a,ee,E,M,H,u,I,c,p,d,C,y,O,S,P,B,N,D,W,U,ue,o,t,i,f,s,Be,Me]}class se extends z{constructor(e){super(),q(this,e,yo,wo,G,{closeButton:10,closeOnClickOutside:11,closeOnClickInside:12,closeOnMove:13,openOn:14,focusAfterOpen:15,anchor:16,offset:17,popupClass:18,maxWidth:19,lngLat:9,html:20,open:0},null,[-1,-1])}}function ko(r){let e;const n=r[15].default,t=ct(n,r,r[23],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&8388608)&&pt(t,n,o,o[23],e?mt(n,o[23],l,null):$t(o[23]),null)},i(o){e||(g(t,o),e=!0)},o(o){_(t,o),e=!1},d(o){t&&t.d(o)}}}function So(r){let e,n,t;function o(i){r[16](i)}let l={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],$$slots:{default:[ko]},$$scope:{ctx:r}};return r[0]!==void 0&&(l.hovered=r[0]),e=new io({props:l}),X.push(()=>Y(e,"hovered",o)),e.$on("click",r[17]),e.$on("dblclick",r[18]),e.$on("contextmenu",r[19]),e.$on("mouseenter",r[20]),e.$on("mousemove",r[21]),e.$on("mouseleave",r[22]),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,[a]){const s={};a&2&&(s.id=i[1]),a&4&&(s.source=i[2]),a&8&&(s.sourceLayer=i[3]),a&16&&(s.beforeId=i[4]),a&32&&(s.beforeLayerType=i[5]),a&64&&(s.paint=i[6]),a&128&&(s.layout=i[7]),a&256&&(s.filter=i[8]),a&512&&(s.applyToClusters=i[9]),a&1024&&(s.minzoom=i[10]),a&2048&&(s.maxzoom=i[11]),a&4096&&(s.hoverCursor=i[12]),a&8192&&(s.manageHoverState=i[13]),a&16384&&(s.eventsIfTopMost=i[14]),a&8388608&&(s.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,s.hovered=i[0],J(()=>n=!1)),e.$set(s)},i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Co(r,e,n){let{$$slots:t={},$$scope:o}=e,{id:l=_r("symbol")}=e,{source:i=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:f=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{applyToClusters:d=void 0}=e,{minzoom:C=void 0}=e,{maxzoom:y=void 0}=e,{hoverCursor:O=void 0}=e,{manageHoverState:S=!1}=e,{hovered:P=null}=e,{eventsIfTopMost:B=!1}=e;function N(F){P=F,n(0,P)}function I(F){Je.call(this,r,F)}function D(F){Je.call(this,r,F)}function A(F){Je.call(this,r,F)}function E(F){Je.call(this,r,F)}function M(F){Je.call(this,r,F)}function H(F){Je.call(this,r,F)}return r.$$set=F=>{"id"in F&&n(1,l=F.id),"source"in F&&n(2,i=F.source),"sourceLayer"in F&&n(3,a=F.sourceLayer),"beforeId"in F&&n(4,s=F.beforeId),"beforeLayerType"in F&&n(5,f=F.beforeLayerType),"paint"in F&&n(6,u=F.paint),"layout"in F&&n(7,c=F.layout),"filter"in F&&n(8,p=F.filter),"applyToClusters"in F&&n(9,d=F.applyToClusters),"minzoom"in F&&n(10,C=F.minzoom),"maxzoom"in F&&n(11,y=F.maxzoom),"hoverCursor"in F&&n(12,O=F.hoverCursor),"manageHoverState"in F&&n(13,S=F.manageHoverState),"hovered"in F&&n(0,P=F.hovered),"eventsIfTopMost"in F&&n(14,B=F.eventsIfTopMost),"$$scope"in F&&n(23,o=F.$$scope)},[P,l,i,a,s,f,u,c,p,d,C,y,O,S,B,t,N,I,D,A,E,M,H,o]}class Oo extends z{constructor(e){super(),q(this,e,Co,So,G,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14})}}function To(r){let e;return{c(){e=L("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function Lo(r){let e,n,t,o,l=r[0]=="Private (development)"&&To();return{c(){l&&l.c(),e=T(),n=L("p"),n.textContent="Note the ATF scheme data has not been validated.",t=T(),o=L("p"),o.innerHTML=`Please contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      about any problems, ideas, or feedback for this site.`},m(i,a){l&&l.m(i,a),$(i,e,a),$(i,n,a),$(i,t,a),$(i,o,a)},p:Q,d(i){i&&(m(e),m(n),m(t),m(o)),l&&l.d(i)}}}function Ao(r){let e,n,t,o,l,i;return l=new oe({props:{$$slots:{default:[Lo]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("App version: "),t=w(r[0]),o=T(),h(l.$$.fragment)},m(a,s){$(a,e,s),k(e,n),k(e,t),k(e,o),b(l,e,null),i=!0},p(a,[s]){const f={};s&2&&(f.$$scope={dirty:s,ctx:a}),l.$set(f)},i(a){i||(g(l.$$.fragment,a),i=!0)},o(a){_(l.$$.fragment,a),i=!1},d(a){a&&m(e),v(l)}}}function Po(r){return[nn()]}class Eo extends z{constructor(e){super(),q(this,e,Po,Ao,G,{})}}const No={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var be=Uint8Array,Xe=Uint16Array,br=Uint32Array,vr=new be([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),wr=new be([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Io=new be([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),yr=function(r,e){for(var n=new Xe(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var o=new br(n[30]),t=1;t<30;++t)for(var l=n[t];l<n[t+1];++l)o[l]=l-n[t]<<5|t;return[n,o]},kr=yr(vr,2),Sr=kr[0],Do=kr[1];Sr[28]=258,Do[258]=28;var Mo=yr(wr,0),Fo=Mo[0],Kt=new Xe(32768);for(var x=0;x<32768;++x){var He=(x&43690)>>>1|(x&21845)<<1;He=(He&52428)>>>2|(He&13107)<<2,He=(He&61680)>>>4|(He&3855)<<4,Kt[x]=((He&65280)>>>8|(He&255)<<8)>>>1}var st=function(r,e,n){for(var t=r.length,o=0,l=new Xe(e);o<t;++o)r[o]&&++l[r[o]-1];var i=new Xe(e);for(o=0;o<e;++o)i[o]=i[o-1]+l[o-1]<<1;var a;if(n){a=new Xe(1<<e);var s=15-e;for(o=0;o<t;++o)if(r[o])for(var f=o<<4|r[o],u=e-r[o],c=i[r[o]-1]++<<u,p=c|(1<<u)-1;c<=p;++c)a[Kt[c]>>>s]=f}else for(a=new Xe(t),o=0;o<t;++o)r[o]&&(a[o]=Kt[i[r[o]-1]++]>>>15-r[o]);return a},dt=new be(288);for(var x=0;x<144;++x)dt[x]=8;for(var x=144;x<256;++x)dt[x]=9;for(var x=256;x<280;++x)dt[x]=7;for(var x=280;x<288;++x)dt[x]=8;var Cr=new be(32);for(var x=0;x<32;++x)Cr[x]=5;var jo=st(dt,9,1),Bo=st(Cr,5,1),Ht=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},Ce=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},Rt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},Ho=function(r){return(r+7)/8|0},ln=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?Xe:r.BYTES_PER_ELEMENT==4?br:be)(n-e);return t.set(r.subarray(e,n)),t},Ro=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Oe=function(r,e,n){var t=new Error(e||Ro[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Oe),!n)throw t;return t},Wo=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new be(0);var o=!e||n,l=!n||n.i;n||(n={}),e||(e=new be(t*3));var i=function(Be){var Me=e.length;if(Be>Me){var j=new be(Math.max(Me*2,Be));j.set(e),e=j}},a=n.f||0,s=n.p||0,f=n.b||0,u=n.l,c=n.d,p=n.m,d=n.n,C=t*8;do{if(!u){a=Ce(r,s,1);var y=Ce(r,s+1,3);if(s+=3,y)if(y==1)u=jo,c=Bo,p=9,d=5;else if(y==2){var B=Ce(r,s,31)+257,N=Ce(r,s+10,15)+4,I=B+Ce(r,s+5,31)+1;s+=14;for(var D=new be(I),A=new be(19),E=0;E<N;++E)A[Io[E]]=Ce(r,s+E*3,7);s+=N*3;for(var M=Ht(A),H=(1<<M)-1,F=st(A,M,1),E=0;E<I;){var W=F[Ce(r,s,H)];s+=W&15;var O=W>>>4;if(O<16)D[E++]=O;else{var U=0,le=0;for(O==16?(le=3+Ce(r,s,3),s+=2,U=D[E-1]):O==17?(le=3+Ce(r,s,7),s+=3):O==18&&(le=11+Ce(r,s,127),s+=7);le--;)D[E++]=U}}var qe=D.subarray(0,B),ee=D.subarray(B);p=Ht(qe),d=Ht(ee),u=st(qe,p,1),c=st(ee,d,1)}else Oe(1);else{var O=Ho(s)+4,S=r[O-4]|r[O-3]<<8,P=O+S;if(P>t){l&&Oe(0);break}o&&i(f+S),e.set(r.subarray(O,P),f),n.b=f+=S,n.p=s=P*8,n.f=a;continue}if(s>C){l&&Oe(0);break}}o&&i(f+131072);for(var ue=(1<<p)-1,_e=(1<<d)-1,he=s;;he=s){var U=u[Rt(r,s)&ue],ce=U>>>4;if(s+=U&15,s>C){l&&Oe(0);break}if(U||Oe(2),ce<256)e[f++]=ce;else if(ce==256){he=s,u=null;break}else{var je=ce-254;if(ce>264){var E=ce-257,ye=vr[E];je=Ce(r,s,(1<<ye)-1)+Sr[E],s+=ye}var ke=c[Rt(r,s)&_e],Pe=ke>>>4;ke||Oe(3),s+=ke&15;var ee=Fo[Pe];if(Pe>3){var ye=wr[Pe];ee+=Rt(r,s)&(1<<ye)-1,s+=ye}if(s>C){l&&Oe(0);break}o&&i(f+131072);for(var Se=f+je;f<Se;f+=4)e[f]=e[f-ee],e[f+1]=e[f+1-ee],e[f+2]=e[f+2-ee],e[f+3]=e[f+3-ee];f=Se}}n.l=u,n.p=he,n.b=f,n.f=a,u&&(a=1,n.m=p,n.d=c,n.n=d)}while(!a);return f==e.length?e:ln(e,0,f)},Uo=new be(0),Ee=function(r,e){return r[e]|r[e+1]<<8},Le=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},Wt=function(r,e){return Le(r,e)+Le(r,e+4)*4294967296};function Go(r,e){return Wo(r,e)}var Yt=typeof TextDecoder<"u"&&new TextDecoder,zo=0;try{Yt.decode(Uo,{stream:!0}),zo=1}catch{}var qo=function(r){for(var e="",n=0;;){var t=r[n++],o=(t>127)+(t>223)+(t>239);if(n+o>r.length)return[e,ln(r,n-1)];o?o==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):o&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function Or(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(Yt)return Yt.decode(r);var o=qo(r),l=o[0],i=o[1];return i.length&&Oe(8),l}}var Vo=function(r,e){return e+30+Ee(r,e+26)+Ee(r,e+28)},Xo=function(r,e,n){var t=Ee(r,e+28),o=Or(r.subarray(e+46,e+46+t),!(Ee(r,e+8)&2048)),l=e+46+t,i=Le(r,e+20),a=n&&i==4294967295?Ko(r,l):[i,Le(r,e+24),Le(r,e+42)],s=a[0],f=a[1],u=a[2];return[Ee(r,e+10),s,f,o,l+Ee(r,e+30)+Ee(r,e+32),u]},Ko=function(r,e){for(;Ee(r,e)!=1;e+=4+Ee(r,e+2));return[Wt(r,e+12),Wt(r,e+4),Wt(r,e+20)]};function Yo(r,e){for(var n={},t=r.length-22;Le(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Oe(13);var o=Ee(r,t+8);if(!o)return{};var l=Le(r,t+16),i=l==4294967295||o==65535;if(i){var a=Le(r,t-12);i=Le(r,a)==101075792,i&&(o=Le(r,a+32),l=Le(r,a+48))}for(var s=e&&e.filter,f=0;f<o;++f){var u=Xo(r,l,i),c=u[0],p=u[1],d=u[2],C=u[3],y=u[4],O=u[5],S=Vo(r,O);l=y,(!s||s({name:C,size:p,originalSize:d,compression:c}))&&(c?c==8?n[C]=Go(r.subarray(S,S+p),new be(d)):Oe(14,"unknown compression type "+c):n[C]=ln(r,S,S+p))}return n}function Jo(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(Ut):Ut(r)}function Ut(r){var e=new Uint8Array(r),n=Yo(e);return Promise.resolve(Zo(n))}function Zo(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var o=t[n];e[o]=Or(r[o])}return e}function De(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&Ye(t)===e)return t;n++}}function _t(r,e){for(var n=[],t=0;t<r.childNodes.length;){var o=r.childNodes[t];o.nodeType===1&&Ye(o)===e&&n.push(o),t++}return n}function yt(r,e,n){for(var t=0;t<r.childNodes.length;){var o=r.childNodes[t];e?o.nodeType===1&&Ye(o)===e&&n(o,t):n(o,t),t++}}function Qo(r,e,n){var t=[];return yt(r,e,function(o,l){t.push(n(o,l))}),t}var xo=/.+\:/;function Ye(r){return r.tagName.replace(xo,"")}function Tr(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+Ye(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=Tr(r.childNodes[t]),t++;return e+="</"+Ye(r)+">",e}function el(r){var e=r.documentElement,n=De(e,"sheetData"),t=[];return yt(n,"row",function(o){yt(o,"c",function(l){t.push(l)})}),t}function tl(r,e){return De(e,"v")}function nl(r,e){if(e.firstChild&&Ye(e.firstChild)==="is"&&e.firstChild.firstChild&&Ye(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function rl(r){var e=r.documentElement,n=De(e,"dimension");if(n)return n.getAttribute("ref")}function ol(r){var e=r.documentElement,n=De(e,"cellStyleXfs");return n?_t(n,"xf"):[]}function ll(r){var e=r.documentElement,n=De(e,"cellXfs");return n?_t(n,"xf"):[]}function sl(r){var e=r.documentElement,n=De(e,"numFmts");return n?_t(n,"numFmt"):[]}function il(r){var e=r.documentElement;return Qo(e,"si",function(n){var t=De(n,"t");if(t)return t.textContent;var o="";return yt(n,"r",function(l){o+=De(l,"t").textContent}),o})}function al(r){var e=r.documentElement;return De(e,"workbookPr")}function fl(r){var e=r.documentElement;return _t(e,"Relationship")}function ul(r){var e=r.documentElement,n=De(e,"sheets");return _t(n,"sheet")}function cl(r,e){var n=e.createDocument(r),t={},o=al(n);o&&o.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var l=function(a){a.getAttribute("name")&&t.sheets.push({id:a.getAttribute("sheetId"),name:a.getAttribute("name"),relationId:a.getAttribute("r:id")})};return ul(n).forEach(l),t}function pl(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},o=function(i){var a=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=Gt(a);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=Gt(a);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=Gt(a);break}};return fl(n).forEach(o),t}function Gt(r){return r[0]==="/"?r.slice(1):"xl/"+r}function _n(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function hn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_n(Object(n),!0).forEach(function(t){$l(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):_n(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function $l(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ml(r,e){if(!r)return{};var n=e.createDocument(r),t=ol(n).map(zt),o=sl(n).map(gl).reduce(function(i,a){return i[a.id]=a,i},[]),l=function(a){return a.hasAttribute("xfId")?hn(hn({},t[a.xfId]),zt(a,o)):zt(a,o)};return ll(n).map(l)}function gl(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function zt(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function dl(r,e){return r?il(e.createDocument(r)):[]}function Lr(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function _l(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=hl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hl(r,e){if(r){if(typeof r=="string")return bn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bn(r,e)}}function bn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function bl(r,e,n,t){if(e){var o=n[e];if(!o)throw new Error("Cell style not found: ".concat(e));if(!o.numberFormat)return!1;if(vl.indexOf(Number(o.numberFormat.id))>=0||t.dateFormat&&o.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&o.numberFormat.template&&kl(o.numberFormat.template))return!0}}var vl=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],wl=/^\[\$-414\]/,yl=/;@$/;function kl(r){r=r.toLowerCase(),r=r.replace(wl,""),r=r.replace(yl,"");for(var e=r.split(/\W+/),n=_l(e),t;!(t=n()).done;){var o=t.value;if(Sl.indexOf(o)<0)return!1}return!0}var Sl=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function Cl(r,e,n){var t=n.getInlineStringValue,o=n.getInlineStringXml,l=n.getStyleId,i=n.styles,a=n.values,s=n.properties,f=n.options;switch(e||(e="n"),e){case"str":r=qt(r,f);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(o()));r=qt(r,f);break;case"s":var u=Number(r);if(isNaN(u))throw new Error('Invalid "shared" string index: '.concat(r));if(u>=a.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=a[u],r=qt(r,f);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=Ol(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var p=Number(r);if(isNaN(p))throw new Error('Invalid "numeric" cell value: '.concat(r));r=p,bl(r,l(),i,f)&&(r=Lr(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function Ol(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function qt(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var Tl=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function Ll(r){var e=function(f,u){return f-u},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),o=n[0],l=n[n.length-1],i=t[0],a=t[t.length-1];return[{row:o,column:i},{row:l,column:a}]}function Al(r){for(var e=0,n=0;n<r.length;)e*=26,e+=Tl.indexOf(r[n]),n++;return e}function Ar(r){return r=r.split(/(\d+)/),[parseInt(r[1]),Al(r[0].trim())]}function Pl(r,e,n,t,o,l,i){var a=Ar(r.getAttribute("r")),s=tl(e,r),f=s&&s.textContent,u;return r.hasAttribute("t")&&(u=r.getAttribute("t")),{row:a[0],column:a[1],value:Cl(f,u,{getInlineStringValue:function(){return nl(e,r)},getInlineStringXml:function(){return Tr(r)},getStyleId:function(){return r.getAttribute("s")},styles:o,values:t,properties:l,options:i})}}function El(r,e,n,t,o,l){var i=el(r);return i.length===0?[]:i.map(function(a){return Pl(a,r,e,n,t,o,l)})}function Nl(r,e){return Fl(r)||Ml(r,e)||Dl(r,e)||Il()}function Il(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dl(r,e){if(r){if(typeof r=="string")return vn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vn(r,e)}}function vn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Ml(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],o=!0,l=!1,i,a;try{for(n=n.call(r);!(o=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));o=!0);}catch(s){l=!0,a=s}finally{try{!o&&n.return!=null&&n.return()}finally{if(l)throw a}}return t}}function Fl(r){if(Array.isArray(r))return r}function jl(r){var e=rl(r);if(e)return e=e.split(":").map(Ar).map(function(n){var t=Nl(n,2),o=t[0],l=t[1];return{row:o,column:l}}),e.length===1&&(e=[e[0],e[0]]),e}function Bl(r,e,n,t,o,l){var i=e.createDocument(r),a=El(i,e,n,t,o,l),s=jl(i)||Ll(a);return{cells:a,dimensions:s}}function Hl(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Rl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rl(r,e){if(r){if(typeof r=="string")return wn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wn(r,e)}}function wn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Wl(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,o=t===void 0?function(c){return c}:t,l=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var a=!0,s=Hl(r[i]),f;!(f=s()).done;){var u=f.value;if(o(u)!==null){a=!1;break}}if(a)r.splice(i,1),n&&n.splice(i,1);else if(l)break;i--}return r}function Ul(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Gl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gl(r,e){if(r){if(typeof r=="string")return yn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yn(r,e)}}function yn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function zl(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,o=e.onlyTrimAtTheEnd,l=r[0].length-1;l>=0;){for(var i=!0,a=Ul(r),s;!(s=a()).done;){var f=s.value;if(t(f[l])!==null){i=!1;break}}if(i)for(var u=0;u<r.length;)r[u].splice(l,1),u++;else if(o)break;l--}return r}function ql(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Pr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vl(r,e){return Yl(r)||Kl(r,e)||Pr(r,e)||Xl()}function Xl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pr(r,e){if(r){if(typeof r=="string")return kn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kn(r,e)}}function kn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Kl(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],o=!0,l=!1,i,a;try{for(n=n.call(r);!(o=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));o=!0);}catch(s){l=!0,a=s}finally{try{!o&&n.return!=null&&n.return()}finally{if(l)throw a}}return t}}function Yl(r){if(Array.isArray(r))return r}function Jl(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var o=Vl(n,2);o[0];for(var l=o[1],i=l.column,a=l.row,s=new Array(a),f=0;f<a;){s[f]=new Array(i);for(var u=0;u<i;)s[f][u]=null,u++;f++}for(var c=ql(t),p;!(p=c()).done;){var d=p.value,C=d.row-1,y=d.column-1;y<i&&C<a&&(s[C][y]=d.value)}var O=e.rowMap;if(O)for(var S=0;S<s.length;)O[S]=S,S++;return s=Wl(zl(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:O}),e.transformData&&(s=e.transformData(s)),s}function Zl(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ql(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ql(r,e){if(r){if(typeof r=="string")return Sn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sn(r,e)}}function Sn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Cn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function xl(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Cn(Object(n),!0).forEach(function(t){es(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Cn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function es(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ts(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=xl({sheet:1},n));var t=function(p){if(!r[p])throw new Error('"'.concat(p,'" file not found inside the *.xlsx file zip archive'));return r[p]},o=pl(t("xl/_rels/workbook.xml.rels"),e),l=o.sharedStrings?dl(t(o.sharedStrings),e):[],i=o.styles?ml(t(o.styles),e):{},a=cl(t("xl/workbook.xml"),e);if(n.getSheets)return a.sheets.map(function(c){var p=c.name;return{name:p}});var s=ns(n.sheet,a.sheets);if(!s||!o.sheets[s])throw rs(n.sheet,a.sheets);var f=Bl(t(o.sheets[s]),e,l,i,a,n),u=Jl(f,n);return n.properties?{data:u,properties:a}:u}function ns(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=Zl(e),o;!(o=t()).done;){var l=o.value;if(l.name===r)return l.relationId}}function rs(r,e){var n=e&&e.map(function(t,o){return'"'.concat(t.name,'" (#').concat(o+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function Jt(r){"@babel/helpers - typeof";return Jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(r)}function On(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function os(r,e,n){return e&&On(r.prototype,e),n&&On(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function ls(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ss(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&at(r,e)}function is(r){var e=Er();return function(){var t=ft(r),o;if(e){var l=ft(this).constructor;o=Reflect.construct(t,arguments,l)}else o=t.apply(this,arguments);return as(this,o)}}function as(r,e){if(e&&(Jt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fs(r)}function fs(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Zt(r){var e=typeof Map=="function"?new Map:void 0;return Zt=function(t){if(t===null||!us(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,o)}function o(){return bt(t,arguments,ft(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),at(o,t)},Zt(r)}function bt(r,e,n){return Er()?bt=Reflect.construct:bt=function(o,l,i){var a=[null];a.push.apply(a,l);var s=Function.bind.apply(o,a),f=new s;return i&&at(f,i.prototype),f},bt.apply(null,arguments)}function Er(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function us(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function at(r,e){return at=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t},at(r,e)}function ft(r){return ft=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ft(r)}var ve=function(r){ss(n,r);var e=is(n);function n(t){var o;return ls(this,n),o=e.call(this,"invalid"),o.reason=t,o}return os(n)}(Zt(Error));function cs(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new ve("not_a_number")}if(typeof r!="number")throw new ve("not_a_number");if(isNaN(r))throw new ve("invalid_number");if(!isFinite(r))throw new ve("out_of_bounds");return r}function ps(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new ve("invalid_number");if(!isFinite(r))throw new ve("out_of_bounds");return String(r)}throw new ve("not_a_string")}function $s(r){if(typeof r=="boolean")return r;throw new ve("not_a_boolean")}function ms(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new ve("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new ve("invalid_number");if(!isFinite(r))throw new ve("out_of_bounds");var t=Lr(r,n);if(isNaN(t.valueOf()))throw new ve("out_of_bounds");return t}throw new ve("not_a_date")}function gs(r,e){return hs(r)||_s(r,e)||Nr(r,e)||ds()}function ds(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _s(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],o=!0,l=!1,i,a;try{for(n=n.call(r);!(o=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));o=!0);}catch(s){l=!0,a=s}finally{try{!o&&n.return!=null&&n.return()}finally{if(l)throw a}}return t}}function hs(r){if(Array.isArray(r))return r}function Qt(r){"@babel/helpers - typeof";return Qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qt(r)}function bs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Nr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nr(r,e){if(r){if(typeof r=="string")return Tn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tn(r,e)}}function Tn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Ln(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function An(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ln(Object(n),!0).forEach(function(t){vs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Ln(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function vs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Pn={isColumnOriented:!1};function ws(r,e,n){n?n=An(An({},Pn),n):n=Pn;var t=n,o=t.isColumnOriented,l=t.rowMap,i=t.ignoreEmptyRows;Cs(e),o&&(r=Ss(r));for(var a=r[0],s=[],f=[],u=1;u<r.length;u++){var c=Ir(e,r[u],u,a,f,n);(c!==null||i===!1)&&s.push(c)}if(l)for(var p=bs(f),d;!(d=p()).done;){var C=d.value;C.row=l[C.row-1]+1}return{rows:s,errors:f}}function Ir(r,e,n,t,o,l){for(var i={},a=!0,s=function(){var p=u[f],d=r[p],C=Qt(d.type)==="object"&&!Array.isArray(d.type),y=e[t.indexOf(p)];y===void 0&&(y=null);var O=void 0,S=void 0,P=void 0;if(C)O=Ir(d.type,e,n,t,o,l);else if(y===null)O=null;else if(Array.isArray(d.type)){var B=!1,N=ks(y).map(function(D){var A=En(D,d,l);return A.error&&(O=D,S=A.error,P=A.reason),A.value!==null&&(B=!0),A.value});S||(O=B?N:null)}else{var I=En(y,d,l);S=I.error,P=I.reason,O=S?y:I.value}!S&&O===null&&d.required&&(S="required"),S?(S={error:S,row:n+1,column:p,value:O},P&&(S.reason=P),d.type&&(S.type=d.type),o.push(S)):(a&&O!==null&&(a=!1),(O!==null||l.includeNullValues)&&(i[d.prop]=O))},f=0,u=Object.keys(r);f<u.length;f++)s();return a?null:i}function En(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=Ze(r,e.parse):e.type?t=ys(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(o){return{error:o.message}}}return t}function Ze(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function ys(r,e,n){switch(e){case String:return Ze(r,ps);case Number:return Ze(r,cs);case Date:return Ze(r,function(t){return ms(t,{properties:n.properties})});case Boolean:return Ze(r,$s);default:if(typeof e=="function")return Ze(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Dr(r,e,n){for(var t=0,o="";n+t<r.length;){var l=r[n+t];if(l===e)return[o,t];if(l==='"'){var i=Dr(r,'"',n+t+1);o+=i[0],t+=1+i[1]+1}else o+=l,t++}return[o,t]}function ks(r){for(var e=[],n=0;n<r.length;){var t=Dr(r,",",n),o=gs(t,2),l=o[0],i=o[1];n+=i+1,e.push(l.trim())}return e}var Ss=function(e){return e[0].map(function(n,t){return e.map(function(o){return o[t]})})};function Cs(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],o=r[t];if(!o.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function xt(r){"@babel/helpers - typeof";return xt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xt(r)}function Mr(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var o=t[n],l=r[o],i=void 0;xt(l)==="object"&&(l=Object.keys(r[o])[0],i=Mr(r[o][l])),e[o]={prop:l},i&&(e[o].type=i)}return e}var Os=["schema","map"];function Nn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function ht(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nn(Object(n),!0).forEach(function(t){Ts(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ts(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Ls(r,e){if(r==null)return{};var n=As(r,e),t,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);for(o=0;o<l.length;o++)t=l[o],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function As(r,e){if(r==null)return{};var n={},t=Object.keys(r),o,l;for(l=0;l<t.length;l++)o=t[l],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}function Ps(r,e,n){var t=n.schema,o=n.map,l=Ls(n,Os);!t&&o&&(t=Mr(o));var i=ts(r,e,ht(ht({},l),{},{properties:t||l.properties}));return t?ws(i.data,t,ht(ht({},l),{},{properties:i.properties})):i}function Es(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Jo(r).then(function(n){return Ps(n,No,e)})}function Ns(r){let e=new Map;for(let[t,o]of Object.entries(r.schemes))e.set(t,{scheme_reference:t,num_features:0,authority_or_region:o.authority_or_region,capital_scheme_id:o.capital_scheme_id,funding_programme:o.funding_programme});let n=1;for(let t of r.features){let o=e.get(t.properties.scheme_reference);o.num_features++,t.properties.funding_programme=o.funding_programme,t.id=n++}return e}async function Is(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Es(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let o of n){let l=Wr(o.lat_lon.split(",").map(parseFloat).reverse()),i=o;i.submission_time=o.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:l},id:t.features.length+1})}return t}const Z={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"},We=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Ds(r){let e,n,t,o,l;function i(s){r[3](s)}let a={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return r[0]!==void 0&&(a.value=r[0]),e=new wt({props:a}),X.push(()=>Y(e,"value",i)),e.$on("change",r[2]),o=new ao({props:{rows:r[1]}}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};!n&&f&1&&(n=!0,u.value=s[0],J(()=>n=!1)),e.$set(u);const c={};f&2&&(c.rows=s[1]),o.$set(c)},i(s){l||(g(e.$$.fragment,s),g(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&m(t),v(e,s),v(o,s)}}}function Ms(r,e,n){let t;pe(r,lt,s=>n(4,t=s));let o="interventionType",l=cn("v1");function i(){let s;o=="interventionType"?(s=hr("v1"),n(1,l=cn("v1"))):(s=pr(["get","funding_programme"],{ATF2:Z.atf2,ATF3:Z.atf3,ATF4:Z.atf4},"grey"),n(1,l=[["ATF2",Z.atf2],["ATF3",Z.atf3],["ATF4",Z.atf4]])),t.setPaintProperty("interventions-points","circle-color",s),t.setPaintProperty("interventions-lines","line-color",s),t.setPaintProperty("interventions-polygons","fill-color",s),t.setPaintProperty("interventions-polygon-outlines","line-color",s)}function a(s){o=s,n(0,o)}return[o,l,i,a]}class Fs extends z{constructor(e){super(),q(this,e,Ms,Ds,G,{})}}function js(r){let e;return{c(){e=w("Clear")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function Bs(r){let e,n,t,o,l,i;return t=new it({props:{$$slots:{default:[js]},$$scope:{ctx:r}}}),t.$on("click",r[13]),{c(){e=L("input"),n=T(),h(t.$$.fragment),K(e,"type","text"),K(e,"class","govuk-input govuk-input--width-10"),K(e,"id","filterText")},m(a,s){$(a,e,s),an(e,r[0]),$(a,n,s),b(t,a,s),o=!0,l||(i=nt(e,"input",r[12]),l=!0)},p(a,s){s&1&&e.value!==a[0]&&an(e,a[0]);const f={};s&131072&&(f.$$scope={dirty:s,ctx:a}),t.$set(f)},i(a){o||(g(t.$$.fragment,a),o=!0)},o(a){_(t.$$.fragment,a),o=!1},d(a){a&&(m(e),m(n)),v(t,a),l=!1,i()}}}function Hs(r){let e,n,t,o,l,i,a,s,f,u;function c(y){r[10](y)}let p={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[2]!==void 0&&(p.value=r[2]),e=new wt({props:p}),X.push(()=>Y(e,"value",c));function d(y){r[11](y)}let C={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[3]!==void 0&&(C.value=r[3]),o=new wt({props:C}),X.push(()=>Y(o,"value",d)),a=new $r({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[Bs]},$$scope:{ctx:r}}}),f=new Fs({}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment),i=T(),h(a.$$.fragment),s=T(),h(f.$$.fragment)},m(y,O){b(e,y,O),$(y,t,O),b(o,y,O),$(y,i,O),b(a,y,O),$(y,s,O),b(f,y,O),u=!0},p(y,O){const S={};O&32&&(S.choices=y[5]),!n&&O&4&&(n=!0,S.value=y[2],J(()=>n=!1)),e.$set(S);const P={};O&64&&(P.choices=y[6]),!l&&O&8&&(l=!0,P.value=y[3],J(()=>l=!1)),o.$set(P);const B={};O&131073&&(B.$$scope={dirty:O,ctx:y}),a.$set(B)},i(y){u||(g(e.$$.fragment,y),g(o.$$.fragment,y),g(a.$$.fragment,y),g(f.$$.fragment,y),u=!0)},o(y){_(e.$$.fragment,y),_(o.$$.fragment,y),_(a.$$.fragment,y),_(f.$$.fragment,y),u=!1},d(y){y&&(m(t),m(i),m(s)),v(e,y),v(o,y),v(a,y),v(f,y)}}}function Rs(r){let e,n=r[1].size.toLocaleString()+"",t,o,l=r[7].route.toLocaleString()+"",i,a,s=r[7].area.toLocaleString()+"",f,u,c=r[7].crossing.toLocaleString()+"",p,d,C=r[7].other.toLocaleString()+"",y,O;return{c(){e=w("Showing "),t=w(n),o=w(" schemes ("),i=w(l),a=w(`
    routes, `),f=w(s),u=w(` areas,
    `),p=w(c),d=w(" crossings, "),y=w(C),O=w(`
    other)`)},m(S,P){$(S,e,P),$(S,t,P),$(S,o,P),$(S,i,P),$(S,a,P),$(S,f,P),$(S,u,P),$(S,p,P),$(S,d,P),$(S,y,P),$(S,O,P)},p(S,P){P&2&&n!==(n=S[1].size.toLocaleString()+"")&&R(t,n),P&128&&l!==(l=S[7].route.toLocaleString()+"")&&R(i,l),P&128&&s!==(s=S[7].area.toLocaleString()+"")&&R(f,s),P&128&&c!==(c=S[7].crossing.toLocaleString()+"")&&R(p,c),P&128&&C!==(C=S[7].other.toLocaleString()+"")&&R(y,C)},d(S){S&&(m(e),m(t),m(o),m(i),m(a),m(f),m(u),m(p),m(d),m(y),m(O))}}}function Ws(r){let e,n,t;function o(i){r[14](i)}let l={id:"show-schemes",$$slots:{default:[Rs]},$$scope:{ctx:r}};return r[4]!==void 0&&(l.checked=r[4]),e=new te({props:l}),X.push(()=>Y(e,"checked",o)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const s={};a&131202&&(s.$$scope={dirty:a,ctx:i}),!n&&a&16&&(n=!0,s.checked=i[4],J(()=>n=!1)),e.$set(s)},i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Us(r){let e,n,t,o;return e=new Te({props:{label:"Filters",$$slots:{default:[Hs]},$$scope:{ctx:r}}}),t=new gt({props:{small:!0,$$slots:{default:[Ws]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},p(l,[i]){const a={};i&131181&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&131218&&(s.$$scope={dirty:i,ctx:l}),t.$set(s)},i(l){o||(g(e.$$.fragment,l),g(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&m(n),v(e,l),v(t,l)}}}function Gs(r,e,n){let t,o;pe(r,Qe,N=>n(15,t=N)),pe(r,lt,N=>n(9,o=N));let{schemes:l}=e,{schemesToBeShown:i=new Set}=e,{filterText:a=""}=e,s=[],f="",u=[],c="",p={area:0,route:0,crossing:0,other:0},d=!0;ot(()=>{let N=new Set,I=new Set;for(let D of l.values())D.authority_or_region&&N.add(D.authority_or_region),D.funding_programme&&I.add(D.funding_programme);n(5,s=Array.from(N.entries())),s.sort(),n(6,u=Array.from(I.entries())),u.sort()});function C(N,I,D){let A=N.toLowerCase(),E=H=>{var F,W;if(A&&!((F=H.properties.name)!=null&&F.toLowerCase().includes(A))&&!((W=H.properties.description)!=null&&W.toLowerCase().includes(A)))return!1;if(I||D){let U=l.get(H.properties.scheme_reference);if(I&&U.authority_or_region!=I||D&&U.funding_programme!=D)return!1}return!0};n(1,i=new Set(t.features.filter(E).map(H=>H.properties.scheme_reference))),n(7,p={area:0,route:0,crossing:0,other:0});let M=H=>{var F,W;return!(!i.has(H.properties.scheme_reference)||A&&!((F=H.properties.name)!=null&&F.toLowerCase().includes(A))&&!((W=H.properties.description)!=null&&W.toLowerCase().includes(A)))};Qe.update(H=>{for(let F of H.features)M(F)?(delete F.properties.hide_while_editing,n(7,p[F.properties.intervention_type]++,p)):F.properties.hide_while_editing=!0;return H}),n(7,p)}function y(N){f=N,n(2,f)}function O(N){c=N,n(3,c)}function S(){a=this.value,n(0,a)}const P=()=>n(0,a="");function B(N){d=N,n(4,d)}return r.$$set=N=>{"schemes"in N&&n(8,l=N.schemes),"schemesToBeShown"in N&&n(1,i=N.schemesToBeShown),"filterText"in N&&n(0,a=N.filterText)},r.$$.update=()=>{if(r.$$.dirty&528&&o)for(let N of["interventions-polygons","interventions-polygon-outlines","interventions-lines","interventions-lines-endpoints","interventions-points"])o.getLayer(N)&&o.setLayoutProperty(N,"visibility",d?"visible":"none");r.$$.dirty&13&&C(a,f,c)},[a,i,f,c,d,s,u,p,l,o,y,O,S,P,B]}class zs extends z{constructor(e){super(),q(this,e,Gs,Us,G,{schemes:8,schemesToBeShown:1,filterText:0})}}function qs(r,e,n){let t;pe(r,lt,a=>n(3,t=a));let o=null,{markerPosition:l}=e,{markerPositionUpdated:i}=e;return ot(()=>{o=new Xt.Marker({draggable:!0}).setLngLat(l).addTo(t),o.on("dragstart",()=>{t.getCanvas().style.cursor="grabbing"}),o.on("drag",()=>{n(0,l=o.getLngLat()),i()}),o.on("dragend",()=>{t.getCanvas().style.cursor="inherit"})}),Ft(()=>{o&&o.remove()}),r.$$set=a=>{"markerPosition"in a&&n(0,l=a.markerPosition),"markerPositionUpdated"in a&&n(1,i=a.markerPositionUpdated)},[l,i]}class Vs extends z{constructor(e){super(),q(this,e,qs,null,G,{markerPosition:0,markerPositionUpdated:1})}}function In(r,e,n){const t=r.slice();return t[16]=e[n],t[17]=e,t[18]=n,t}function Xs(r){let e,n;return e=new it({props:{$$slots:{default:[Ys]},$$scope:{ctx:r}}}),e.$on("click",r[4]),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&524288&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ks(r){let e,n;return e=new it({props:{$$slots:{default:[Js]},$$scope:{ctx:r}}}),e.$on("click",r[3]),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&524288&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ys(r){let e;return{c(){e=w("Disable Line Measurement Tool")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function Js(r){let e;return{c(){e=w("Enable Line Measurement Tool")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function Dn(r){var c;let e,n,t,o=[],l=new Map,i,a,s=r[2]&&((c=r[2].properties)==null?void 0:c.length)&&Mn(r);n=new Te({props:{label:"Help",$$slots:{default:[Zs]},$$scope:{ctx:r}}});let f=Ne(r[1]);const u=p=>p[16].id;for(let p=0;p<f.length;p+=1){let d=In(r,f,p),C=u(d);l.set(C,o[p]=Fn(C,d))}return{c(){s&&s.c(),e=T(),h(n.$$.fragment),t=T();for(let p=0;p<o.length;p+=1)o[p].c();i=ge()},m(p,d){s&&s.m(p,d),$(p,e,d),b(n,p,d),$(p,t,d);for(let C=0;C<o.length;C+=1)o[C]&&o[C].m(p,d);$(p,i,d),a=!0},p(p,d){var y;p[2]&&((y=p[2].properties)!=null&&y.length)?s?s.p(p,d):(s=Mn(p),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null);const C={};d&524288&&(C.$$scope={dirty:d,ctx:p}),n.$set(C),d&130&&(f=Ne(p[1]),ne(),o=Gr(o,d,u,1,p,f,l,i.parentNode,zr,Fn,i,In),re())},i(p){if(!a){g(n.$$.fragment,p);for(let d=0;d<f.length;d+=1)g(o[d]);a=!0}},o(p){_(n.$$.fragment,p);for(let d=0;d<o.length;d+=1)_(o[d]);a=!1},d(p){p&&(m(e),m(t),m(i)),s&&s.d(p),v(n,p);for(let d=0;d<o.length;d+=1)o[d].d(p)}}}function Mn(r){var i;let e,n,t=((i=r[2].properties)==null?void 0:i.length)+"",o,l;return{c(){e=L("p"),n=w("Length: "),o=w(t),l=w("m")},m(a,s){$(a,e,s),k(e,n),k(e,o),k(e,l)},p(a,s){var f;s&4&&t!==(t=((f=a[2].properties)==null?void 0:f.length)+"")&&R(o,t)},d(a){a&&m(e)}}}function Zs(r){let e;return{c(){e=L("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and Drag</b>
        an existing waypoint to move it</li> <li><b>Hold shift and click on</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(n,t){$(n,e,t)},p:Q,d(n){n&&m(e)}}}function Fn(r,e){let n,t,o,l;function i(s){e[8](s,e[16])}let a={markerPositionUpdated:e[7]};return e[16].lngLat!==void 0&&(a.markerPosition=e[16].lngLat),t=new Vs({props:a}),X.push(()=>Y(t,"markerPosition",i)),{key:r,first:null,c(){n=ge(),h(t.$$.fragment),this.first=n},m(s,f){$(s,n,f),b(t,s,f),l=!0},p(s,f){e=s;const u={};!o&&f&2&&(o=!0,u.markerPosition=e[16].lngLat,J(()=>o=!1)),t.$set(u)},i(s){l||(g(t.$$.fragment,s),l=!0)},o(s){_(t.$$.fragment,s),l=!1},d(s){s&&m(n),v(t,s)}}}function Qs(r){let e,n,t,o,l,i,a;const s=[Ks,Xs],f=[];function u(p,d){return p[0]?0:1}e=u(r),n=f[e]=s[e](r);let c=!r[0]&&Dn(r);return{c(){n.c(),t=T(),c&&c.c(),o=ge()},m(p,d){f[e].m(p,d),$(p,t,d),c&&c.m(p,d),$(p,o,d),l=!0,i||(a=[nt(window,"keydown",r[5]),nt(window,"keyup",r[6])],i=!0)},p(p,[d]){let C=e;e=u(p),e===C?f[e].p(p,d):(ne(),_(f[C],1,1,()=>{f[C]=null}),re(),n=f[e],n?n.p(p,d):(n=f[e]=s[e](p),n.c()),g(n,1),n.m(t.parentNode,t)),p[0]?c&&(ne(),_(c,1,1,()=>{c=null}),re()):c?(c.p(p,d),d&1&&g(c,1)):(c=Dn(p),c.c(),g(c,1),c.m(o.parentNode,o))},i(p){l||(g(n),g(c),l=!0)},o(p){_(n),_(c),l=!1},d(p){p&&(m(t),m(o)),f[e].d(p),c&&c.d(p),i=!1,Ur(a)}}}const Ve="measurement-line";function xs(r,e,n){let t;pe(r,lt,B=>n(11,t=B));let o=!0,l=[],i,a=!1,s=0;function f(B){o||(a||(l.push({id:s++,lngLat:B.lngLat}),n(1,l),y()),a&&l.length>0&&(u(B.lngLat),y()))}function u(B){let I=new Xt.LngLat(0,-90).distanceTo(new Xt.LngLat(0,90)),D;l.forEach(A=>{const E=A.lngLat;I>=B.distanceTo(E)&&(D=E,I=B.distanceTo(E))}),D&&n(1,l=l.filter(A=>{const E=A.lngLat;return E.lng!=(D==null?void 0:D.lng)||E.lat!=(D==null?void 0:D.lat)}))}function c(){n(0,o=!1)}function p(){n(0,o=!0),n(1,l=[]),O()}function d(B){B.key==="Shift"&&(a=!0),B.key==="Escape"&&p()}function C(B){B.key==="Shift"&&(a=!1)}function y(){if(l.length<2){O();return}const B=l.map(N=>[N.lngLat.lng,N.lngLat.lat]);n(2,i=qr(B,{})),i.properties&&n(2,i.properties.length=(fo(i)*1e3).toFixed(2),i),S()}function O(){t.getSource(Ve)&&(t.getSource(Ve).setData(rn()),n(2,i=void 0))}function S(){t.getSource(Ve)?t.getSource(Ve).setData(i):(Vr(t,Ve,i),Xr(t,{id:Ve,source:Ve,color:eo.measuringLine,width:5}))}ot(()=>{t.on("click",f)}),Ft(()=>{t.off("click",f)});function P(B,N){r.$$.not_equal(N.lngLat,B)&&(N.lngLat=B,n(1,l))}return[o,l,i,c,p,d,C,y,P]}class ei extends z{constructor(e){super(),q(this,e,xs,Qs,G,{})}}function ti(r){let e;return{c(){e=w(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function ni(r){let e,n,t,o,l;return t=new V({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ti]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("License: "),h(t.$$.fragment),o=w(`. Contains OS data  Crown copyright and database right
  2023.`)},m(i,a){$(i,e,a),k(e,n),b(t,e,null),k(e,o),l=!0},p(i,[a]){const s={};a&1&&(s.$$scope={dirty:a,ctx:i}),t.$set(s)},i(i){l||(g(t.$$.fragment,i),l=!0)},o(i){_(t.$$.fragment,i),l=!1},d(i){i&&m(e),v(t)}}}class Fe extends z{constructor(e){super(),q(this,e,null,ni,G,{})}}function jn(r,e,n){const t=r.slice();return t[2]=e[n],t}function Bn(r,e,n){const t=r.slice();return t[5]=e[n],t}function Hn(r){let e,n;return{c(){e=L("span"),n=w(`
    `),Ie(e,"background",r[5]),Ie(e,"width","100%"),Ie(e,"border","1px solid black")},m(t,o){$(t,e,o),k(e,n)},p(t,o){o&1&&Ie(e,"background",t[5])},d(t){t&&m(e)}}}function Rn(r){let e,n=r[2]+"",t;return{c(){e=L("span"),t=w(n)},m(o,l){$(o,e,l),k(e,t)},p(o,l){l&2&&n!==(n=o[2]+"")&&R(t,n)},d(o){o&&m(e)}}}function ri(r){let e,n,t,o=Ne(r[0]),l=[];for(let s=0;s<o.length;s+=1)l[s]=Hn(Bn(r,o,s));let i=Ne(r[1]),a=[];for(let s=0;s<i.length;s+=1)a[s]=Rn(jn(r,i,s));return{c(){e=L("div");for(let s=0;s<l.length;s+=1)l[s].c();n=T(),t=L("div");for(let s=0;s<a.length;s+=1)a[s].c();Ie(e,"display","flex"),Ie(t,"display","flex"),Ie(t,"justify-content","space-between")},m(s,f){$(s,e,f);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(e,null);$(s,n,f),$(s,t,f);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(t,null)},p(s,[f]){if(f&1){o=Ne(s[0]);let u;for(u=0;u<o.length;u+=1){const c=Bn(s,o,u);l[u]?l[u].p(c,f):(l[u]=Hn(c),l[u].c(),l[u].m(e,null))}for(;u<l.length;u+=1)l[u].d(1);l.length=o.length}if(f&2){i=Ne(s[1]);let u;for(u=0;u<i.length;u+=1){const c=jn(s,i,u);a[u]?a[u].p(c,f):(a[u]=Rn(c),a[u].c(),a[u].m(t,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=i.length}},i:Q,o:Q,d(s){s&&(m(e),m(n),m(t)),vt(l,s),vt(a,s)}}}function oi(r,e,n){let{colorScale:t}=e,{limits:o}=e;return r.$$set=l=>{"colorScale"in l&&n(0,t=l.colorScale),"limits"in l&&n(1,o=l.limits)},[t,o]}class Ge extends z{constructor(e){super(),q(this,e,oi,ri,G,{colorScale:0,limits:1})}}function Wn(r){const e=r[15][0].properties.OA21CD;r[16]=e;const n=r[15][0].properties[r[3]];r[17]=n}function li(r){let e;return{c(){e=w("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function si(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function ii(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function ai(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function fi(r){let e,n,t,o,l,i,a,s,f,u,c,p;return t=new V({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[si]},$$scope:{ctx:r}}}),l=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ii]},$$scope:{ctx:r}}}),u=new V({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ai]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),o=w(". Output area boundaries from "),h(l.$$.fragment),i=w("."),a=T(),s=L("p"),f=w("License: "),h(u.$$.fragment),c=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(d,C){$(d,e,C),k(e,n),b(t,e,null),k(e,o),b(l,e,null),k(e,i),$(d,a,C),$(d,s,C),k(s,f),b(u,s,null),k(s,c),p=!0},p(d,C){const y={};C&262144&&(y.$$scope={dirty:C,ctx:d}),t.$set(y);const O={};C&262144&&(O.$$scope={dirty:C,ctx:d}),l.$set(O);const S={};C&262144&&(S.$$scope={dirty:C,ctx:d}),u.$set(S)},i(d){p||(g(t.$$.fragment,d),g(l.$$.fragment,d),g(u.$$.fragment,d),p=!0)},o(d){_(t.$$.fragment,d),_(l.$$.fragment,d),_(u.$$.fragment,d),p=!1},d(d){d&&(m(e),m(a),m(s)),v(t),v(l),v(u)}}}function ui(r){let e,n,t;return n=new oe({props:{$$slots:{default:[fi]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&262144&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(g(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&m(e),v(n)}}}function Un(r){let e,n;return e=new Ge({props:{colorScale:r[6],limits:r[8]()}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:Q,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ci(r){let e;return{c(){e=w("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function pi(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function $i(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function mi(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function gi(r){let e,n,t,o,l,i,a,s,f,u,c,p,d,C;return l=new V({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[pi]},$$scope:{ctx:r}}}),a=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[$i]},$$scope:{ctx:r}}}),p=new V({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[mi]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=T(),t=L("p"),o=w("Car/van availability data is from the 2021 census, via "),h(l.$$.fragment),i=w(". Output area boundaries from "),h(a.$$.fragment),s=w("."),f=T(),u=L("p"),c=w("License: "),h(p.$$.fragment),d=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(y,O){$(y,e,O),$(y,n,O),$(y,t,O),k(t,o),b(l,t,null),k(t,i),b(a,t,null),k(t,s),$(y,f,O),$(y,u,O),k(u,c),b(p,u,null),k(u,d),C=!0},p(y,O){const S={};O&262144&&(S.$$scope={dirty:O,ctx:y}),l.$set(S);const P={};O&262144&&(P.$$scope={dirty:O,ctx:y}),a.$set(P);const B={};O&262144&&(B.$$scope={dirty:O,ctx:y}),p.$set(B)},i(y){C||(g(l.$$.fragment,y),g(a.$$.fragment,y),g(p.$$.fragment,y),C=!0)},o(y){_(l.$$.fragment,y),_(a.$$.fragment,y),_(p.$$.fragment,y),C=!1},d(y){y&&(m(e),m(n),m(t),m(f),m(u)),v(l),v(a),v(p)}}}function di(r){let e,n,t;return n=new oe({props:{$$slots:{default:[gi]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&262144&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(g(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&m(e),v(n)}}}function Gn(r){let e,n;return e=new Ge({props:{colorScale:r[6],limits:r[8]()}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:Q,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _i(r){let e;return{c(){e=w("Population density")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function hi(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function bi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function vi(r){let e,n,t,o,l,i,a,s,f;return t=new V({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[hi]},$$scope:{ctx:r}}}),l=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[bi]},$$scope:{ctx:r}}}),s=new Fe({}),{c(){e=L("p"),n=w("Population density data is from the 2021 census, via "),h(t.$$.fragment),o=w(". Output area boundaries from "),h(l.$$.fragment),i=w("."),a=T(),h(s.$$.fragment)},m(u,c){$(u,e,c),k(e,n),b(t,e,null),k(e,o),b(l,e,null),k(e,i),$(u,a,c),b(s,u,c),f=!0},p(u,c){const p={};c&262144&&(p.$$scope={dirty:c,ctx:u}),t.$set(p);const d={};c&262144&&(d.$$scope={dirty:c,ctx:u}),l.$set(d)},i(u){f||(g(t.$$.fragment,u),g(l.$$.fragment,u),g(s.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),_(l.$$.fragment,u),_(s.$$.fragment,u),f=!1},d(u){u&&(m(e),m(a)),v(t),v(l),v(s,u)}}}function wi(r){let e,n,t;return n=new oe({props:{$$slots:{default:[vi]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&262144&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(g(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&m(e),v(n)}}}function zn(r){let e,n,t,o;return t=new Ge({props:{colorScale:r[6],limits:r[8]().map(Ai)}}),{c(){e=L("p"),e.textContent="(people per square kilometres)",n=T(),h(t.$$.fragment)},m(l,i){$(l,e,i),$(l,n,i),b(t,l,i),o=!0},p:Q,i(l){o||(g(t.$$.fragment,l),o=!0)},o(l){_(t.$$.fragment,l),o=!1},d(l){l&&(m(e),m(n)),v(t,l)}}}function yi(r){let e,n,t,o=r[17].toLocaleString()+"",l,i,a=r[16]+"",s;return{c(){e=L("p"),n=w("There are "),t=L("b"),l=w(o),i=w(`
          people per square kilometre in `),s=w(a)},m(f,u){$(f,e,u),k(e,n),k(e,t),k(t,l),k(e,i),k(e,s)},p(f,u){u&32776&&o!==(o=f[17].toLocaleString()+"")&&R(l,o),u&32768&&a!==(a=f[16]+"")&&R(s,a)},d(f){f&&m(e)}}}function ki(r){let e,n,t=r[16]+"",o,l,i,a=r[17]+"",s,f;return{c(){e=L("p"),n=w("Households in "),o=w(t),l=w(` have an average of
          `),i=L("b"),s=w(a),f=w(`
          cars`)},m(u,c){$(u,e,c),k(e,n),k(e,o),k(e,l),k(e,i),k(i,s),k(e,f)},p(u,c){c&32768&&t!==(t=u[16]+"")&&R(o,t),c&32776&&a!==(a=u[17]+"")&&R(s,a)},d(u){u&&m(e)}}}function Si(r){let e,n,t=r[17]+"",o,l,i,a=r[16]+"",s,f;return{c(){e=L("p"),n=L("b"),o=w(t),l=w("%"),i=w(`
          of households in `),s=w(a),f=w(" have 1 or more cars")},m(u,c){$(u,e,c),k(e,n),k(n,o),k(n,l),k(e,i),k(e,s),k(e,f)},p(u,c){c&32776&&t!==(t=u[17]+"")&&R(o,t),c&32768&&a!==(a=u[16]+"")&&R(s,a)},d(u){u&&m(e)}}}function Ci(r){Wn(r);let e;function n(l,i){return l[3]=="percent_households_with_car"?Si:l[3]=="average_cars_per_household"?ki:yi}let t=n(r),o=t(r);return{c(){o.c(),e=ge()},m(l,i){o.m(l,i),$(l,e,i)},p(l,i){Wn(l),t===(t=n(l))&&o?o.p(l,i):(o.d(1),o=t(l),o&&(o.c(),o.m(e.parentNode,e)))},d(l){l&&m(e),o.d(l)}}}function Oi(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[Ci,({features:t})=>({15:t}),({features:t})=>t?32768:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&294920&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ti(r){let e,n,t,o;return e=new Ue({props:{id:kt,sourceLayer:kt,paint:{"fill-color":Ae(["get",r[3]],r[8](),r[6]),"fill-opacity":ie(.5,.7)},layout:{visibility:r[4]},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[Oi]},$$scope:{ctx:r}}}),e.$on("click",r[7]),t=new de({props:{id:r[5],paint:{"line-color":"black","line-width":.5},layout:{visibility:r[4]}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&8&&(a.paint={"fill-color":Ae(["get",l[3]],l[8](),l[6]),"fill-opacity":ie(.5,.7)}),i&16&&(a.layout={visibility:l[4]}),i&262152&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&16&&(s.layout={visibility:l[4]}),t.$set(s)},i(l){o||(g(e.$$.fragment,l),g(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&m(n),v(e,l),v(t,l)}}}function Li(r){let e,n,t,o,l,i,a,s,f,u,c,p,d,C;function y(E){r[9](E)}let O={id:"percent_households_with_car",$$slots:{right:[ui],default:[li]},$$scope:{ctx:r}};r[0]!==void 0&&(O.checked=r[0]),e=new te({props:O}),X.push(()=>Y(e,"checked",y)),e.$on("change",r[10]);let S=r[3]=="percent_households_with_car"&&Un(r);function P(E){r[11](E)}let B={id:"average_cars_per_household",$$slots:{right:[di],default:[ci]},$$scope:{ctx:r}};r[1]!==void 0&&(B.checked=r[1]),l=new te({props:B}),X.push(()=>Y(l,"checked",P)),l.$on("change",r[12]);let N=r[3]=="average_cars_per_household"&&Gn(r);function I(E){r[13](E)}let D={id:"population_density",$$slots:{right:[wi],default:[_i]},$$scope:{ctx:r}};r[2]!==void 0&&(D.checked=r[2]),f=new te({props:D}),X.push(()=>Y(f,"checked",I)),f.$on("change",r[14]);let A=r[3]=="population_density"&&zn(r);return d=new $e({props:{url:`pmtiles://${ae()}/v1/${kt}.pmtiles`,$$slots:{default:[Ti]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),S&&S.c(),o=T(),h(l.$$.fragment),a=T(),N&&N.c(),s=T(),h(f.$$.fragment),c=T(),A&&A.c(),p=T(),h(d.$$.fragment)},m(E,M){b(e,E,M),$(E,t,M),S&&S.m(E,M),$(E,o,M),b(l,E,M),$(E,a,M),N&&N.m(E,M),$(E,s,M),b(f,E,M),$(E,c,M),A&&A.m(E,M),$(E,p,M),b(d,E,M),C=!0},p(E,[M]){const H={};M&262144&&(H.$$scope={dirty:M,ctx:E}),!n&&M&1&&(n=!0,H.checked=E[0],J(()=>n=!1)),e.$set(H),E[3]=="percent_households_with_car"?S?(S.p(E,M),M&8&&g(S,1)):(S=Un(E),S.c(),g(S,1),S.m(o.parentNode,o)):S&&(ne(),_(S,1,1,()=>{S=null}),re());const F={};M&262144&&(F.$$scope={dirty:M,ctx:E}),!i&&M&2&&(i=!0,F.checked=E[1],J(()=>i=!1)),l.$set(F),E[3]=="average_cars_per_household"?N?(N.p(E,M),M&8&&g(N,1)):(N=Gn(E),N.c(),g(N,1),N.m(s.parentNode,s)):N&&(ne(),_(N,1,1,()=>{N=null}),re());const W={};M&262144&&(W.$$scope={dirty:M,ctx:E}),!u&&M&4&&(u=!0,W.checked=E[2],J(()=>u=!1)),f.$set(W),E[3]=="population_density"?A?(A.p(E,M),M&8&&g(A,1)):(A=zn(E),A.c(),g(A,1),A.m(p.parentNode,p)):A&&(ne(),_(A,1,1,()=>{A=null}),re());const U={};M&262168&&(U.$$scope={dirty:M,ctx:E}),d.$set(U)},i(E){C||(g(e.$$.fragment,E),g(S),g(l.$$.fragment,E),g(N),g(f.$$.fragment,E),g(A),g(d.$$.fragment,E),C=!0)},o(E){_(e.$$.fragment,E),_(S),_(l.$$.fragment,E),_(N),_(f.$$.fragment,E),_(A),_(d.$$.fragment,E),C=!1},d(E){E&&(m(t),m(o),m(a),m(s),m(c),m(p)),v(e,E),S&&S.d(E),v(l,E),N&&N.d(E),v(f,E),A&&A.d(E),v(d,E)}}}let kt="census_output_areas";const Ai=r=>r.toLocaleString();function Pi(r,e,n){let t,o=`${kt}-outline`,l=Z.sequential_low_to_high,i=!1,a=!1,s=!1,f="";function u(P){let B=P.detail.features[0].properties.OA21CD;f=="percent_households_with_car"||f=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${B}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${B}`,"_blank")}function c(){return f=="percent_households_with_car"?[0,20,40,60,80,100]:f=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function p(P){i=P,n(0,i)}const d=()=>{n(1,a=!1),n(2,s=!1)};function C(P){a=P,n(1,a)}const y=()=>{n(0,i=!1),n(2,s=!1)};function O(P){s=P,n(2,s)}const S=()=>{n(0,i=!1),n(1,a=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(i?n(3,f="percent_households_with_car"):a?n(3,f="average_cars_per_household"):s?n(3,f="population_density"):n(3,f="")),r.$$.dirty&8&&n(4,t=f!=""?"visible":"none")},[i,a,s,f,t,o,l,u,c,p,d,C,y,O,S]}class Ei extends z{constructor(e){super(),q(this,e,Pi,Li,G,{})}}function Ni(r){let e,n,t;return e=new we({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=w(`
  Combined authorities`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:Q,i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&m(n),v(e,o)}}}function Ii(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function Di(r){let e,n,t,o,l,i,a;return t=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Ii]},$$scope:{ctx:r}}}),i=new Fe({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),o=w(", as of December 2022."),l=T(),h(i.$$.fragment)},m(s,f){$(s,e,f),k(e,n),b(t,e,null),k(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(g(t.$$.fragment,s),g(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(m(e),m(l)),v(t),v(i,s)}}}function Mi(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Di]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(g(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&m(e),v(n)}}}function Fi(r){let e,n=r[5][0].properties.name+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){$(o,e,l),k(e,t)},p(o,l){l&32&&n!==(n=o[5][0].properties.name+"")&&R(t,n)},d(o){o&&m(e)}}}function ji(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[Fi,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&96&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Bi(r){let e,n,t,o;return e=new Ue({props:{id:St,paint:{"fill-color":r[2],"fill-opacity":ie(0,.5)},layout:{visibility:r[1]},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[ji]},$$scope:{ctx:r}}}),e.$on("click",Ri),t=new de({props:{id:r[3],paint:{"line-color":r[2],"line-width":2.5},layout:{visibility:r[1]}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&2&&(a.layout={visibility:l[1]}),i&64&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&2&&(s.layout={visibility:l[1]}),t.$set(s)},i(l){o||(g(e.$$.fragment,l),g(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&m(n),v(e,l),v(t,l)}}}function Hi(r){let e,n,t,o,l;function i(s){r[4](s)}let a={id:St,$$slots:{right:[Mi],default:[Ni]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new te({props:a}),X.push(()=>Y(e,"checked",i)),o=new jt({props:{data:`${ae()}/v1/${St}.geojson`,$$slots:{default:[Bi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&66&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(g(e.$$.fragment,s),g(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&m(t),v(e,s),v(o,s)}}}let St="combined_authorities";function Ri(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Wi(r,e,n){let t,o=Z.combined_authorities,l=`${St}-outline`,i=!1;function a(s){i=s,n(0,i)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=i?"visible":"none")},[i,t,o,l,a]}class Ui extends z{constructor(e){super(),q(this,e,Wi,Hi,G,{})}}function qn(r){const e=r[6][0].properties;r[7]=e}function Gi(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function zi(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function qi(r){let e;return{c(){e=w(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function Vi(r){let e,n,t,o,l,i,a,s,f;return t=new V({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[zi]},$$scope:{ctx:r}}}),l=new V({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[qi]},$$scope:{ctx:r}}}),s=new Fe({}),{c(){e=L("p"),n=w("The 2019 English IMD scores come from "),h(t.$$.fragment),o=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(l.$$.fragment),i=w("."),a=T(),h(s.$$.fragment)},m(u,c){$(u,e,c),k(e,n),b(t,e,null),k(e,o),b(l,e,null),k(e,i),$(u,a,c),b(s,u,c),f=!0},p(u,c){const p={};c&256&&(p.$$scope={dirty:c,ctx:u}),t.$set(p);const d={};c&256&&(d.$$scope={dirty:c,ctx:u}),l.$set(d)},i(u){f||(g(t.$$.fragment,u),g(l.$$.fragment,u),g(s.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),_(l.$$.fragment,u),_(s.$$.fragment,u),f=!1},d(u){u&&(m(e),m(a)),v(t),v(l),v(s,u)}}}function Xi(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Vi]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&256&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(g(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&m(e),v(n)}}}function Vn(r){let e,n;return e=new Ge({props:{colorScale:r[3],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:Q,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ki(r){qn(r);let e,n=r[7].LSOA11CD+"",t,o,l,i=r[7].score+"",a,s,f,u,c,p=r[7].rank.toLocaleString()+"",d,C;return{c(){e=L("p"),t=w(n),o=w(` has an IMD score of
        `),l=L("b"),a=w(i),s=T(),f=L("p"),u=w("Rank: "),c=L("b"),d=w(p),C=w(`
        / 32,844 LSOAs`)},m(y,O){$(y,e,O),k(e,t),k(e,o),k(e,l),k(l,a),$(y,s,O),$(y,f,O),k(f,u),k(f,c),k(c,d),k(f,C)},p(y,O){qn(y),O&64&&n!==(n=y[7].LSOA11CD+"")&&R(t,n),O&64&&i!==(i=y[7].score+"")&&R(a,i),O&64&&p!==(p=y[7].rank.toLocaleString()+"")&&R(d,p)},d(y){y&&(m(e),m(s),m(f))}}}function Yi(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[Ki,({features:t})=>({6:t}),({features:t})=>t?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&320&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ji(r){let e,n,t,o;return e=new Ue({props:{id:ut,sourceLayer:ut,paint:{"fill-color":Ae(["-",10,["get","decile"]],r[4],r[3]),"fill-opacity":ie(.5,.7)},layout:{visibility:r[1]},manageHoverState:!0,$$slots:{default:[Yi]},$$scope:{ctx:r}}}),t=new de({props:{id:r[2],paint:{"line-color":"black","line-width":.5},layout:{visibility:r[1]}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&2&&(a.layout={visibility:l[1]}),i&256&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&2&&(s.layout={visibility:l[1]}),t.$set(s)},i(l){o||(g(e.$$.fragment,l),g(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&m(n),v(e,l),v(t,l)}}}function Zi(r){let e,n,t,o,l,i;function a(u){r[5](u)}let s={id:ut,$$slots:{right:[Xi],default:[Gi]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new te({props:s}),X.push(()=>Y(e,"checked",a));let f=r[0]&&Vn(r);return l=new $e({props:{url:`pmtiles://${ae()}/v1/${ut}.pmtiles`,$$slots:{default:[Ji]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),f&&f.c(),o=T(),h(l.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),f&&f.m(u,c),$(u,o,c),b(l,u,c),i=!0},p(u,[c]){const p={};c&256&&(p.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,p.checked=u[0],J(()=>n=!1)),e.$set(p),u[0]?f?(f.p(u,c),c&1&&g(f,1)):(f=Vn(u),f.c(),g(f,1),f.m(o.parentNode,o)):f&&(ne(),_(f,1,1,()=>{f=null}),re());const d={};c&258&&(d.$$scope={dirty:c,ctx:u}),l.$set(d)},i(u){i||(g(e.$$.fragment,u),g(f),g(l.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),_(f),_(l.$$.fragment,u),i=!1},d(u){u&&(m(t),m(o)),v(e,u),f&&f.d(u),v(l,u)}}}let ut="imd";function Qi(r,e,n){let t,o=`${ut}-outline`,l=Z.sequential_low_to_high,i=[0,2,4,6,8,10],a=!1;function s(f){a=f,n(0,a)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=a?"visible":"none")},[a,t,o,l,i,s]}class xi extends z{constructor(e){super(),q(this,e,Qi,Zi,G,{})}}function ea(r){let e,n,t;return e=new we({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:Q,i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&m(n),v(e,o)}}}function ta(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function na(r){let e,n,t,o,l,i,a;return t=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[ta]},$$scope:{ctx:r}}}),i=new Fe({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),o=w(", as of May 2023."),l=T(),h(i.$$.fragment)},m(s,f){$(s,e,f),k(e,n),b(t,e,null),k(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(g(t.$$.fragment,s),g(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(m(e),m(l)),v(t),v(i,s)}}}function ra(r){let e,n,t;return n=new oe({props:{$$slots:{default:[na]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(g(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&m(e),v(n)}}}function oa(r){let e,n=r[5][0].properties.name+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){$(o,e,l),k(e,t)},p(o,l){l&32&&n!==(n=o[5][0].properties.name+"")&&R(t,n)},d(o){o&&m(e)}}}function la(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[oa,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&96&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function sa(r){let e,n,t,o;return e=new Ue({props:{id:Ct,paint:{"fill-color":r[2],"fill-opacity":ie(0,.5)},layout:{visibility:r[1]},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[la]},$$scope:{ctx:r}}}),e.$on("click",aa),t=new de({props:{id:r[3],paint:{"line-color":r[2],"line-width":2.5},layout:{visibility:r[1]}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&2&&(a.layout={visibility:l[1]}),i&64&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&2&&(s.layout={visibility:l[1]}),t.$set(s)},i(l){o||(g(e.$$.fragment,l),g(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&m(n),v(e,l),v(t,l)}}}function ia(r){let e,n,t,o,l;function i(s){r[4](s)}let a={id:Ct,$$slots:{right:[ra],default:[ea]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new te({props:a}),X.push(()=>Y(e,"checked",i)),o=new jt({props:{data:`${ae()}/v1/${Ct}.geojson`,$$slots:{default:[sa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&66&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(g(e.$$.fragment,s),g(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&m(t),v(e,s),v(o,s)}}}let Ct="local_authority_districts";function aa(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function fa(r,e,n){let t,o=Z.local_authority_districts,l=`${Ct}-outline`,i=!1;function a(s){i=s,n(0,i)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=i?"visible":"none")},[i,t,o,l,a]}class ua extends z{constructor(e){super(),q(this,e,fa,ia,G,{})}}function ca(r){let e,n,t;return e=new we({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:Q,i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&m(n),v(e,o)}}}function pa(r){let e;return{c(){e=w(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function $a(r){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function ma(r){let e;return{c(){e=w(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function ga(r){let e;return{c(){e=w("this map")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function da(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function _a(r){let e,n,t,o,l,i,a,s,f,u,c,p,d,C,y,O,S,P,B,N,I,D;return t=new V({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[pa]},$$scope:{ctx:r}}}),l=new V({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[$a]},$$scope:{ctx:r}}}),a=new V({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[ma]},$$scope:{ctx:r}}}),d=new V({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[ga]},$$scope:{ctx:r}}}),P=new V({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[da]},$$scope:{ctx:r}}}),I=new Fe({}),{c(){e=L("p"),n=w("LPAs may be a "),h(t.$$.fragment),o=w(", "),h(l.$$.fragment),i=w("y, or "),h(a.$$.fragment),s=w("."),f=T(),u=L("p"),c=L("strong"),p=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(d.$$.fragment),C=w(" to get more details."),y=T(),O=L("p"),S=w("Data from ONS Geography via "),h(P.$$.fragment),B=w(", as of November 2022."),N=T(),h(I.$$.fragment)},m(A,E){$(A,e,E),k(e,n),b(t,e,null),k(e,o),b(l,e,null),k(e,i),b(a,e,null),k(e,s),$(A,f,E),$(A,u,E),k(u,c),k(c,p),b(d,c,null),k(c,C),$(A,y,E),$(A,O,E),k(O,S),b(P,O,null),k(O,B),$(A,N,E),b(I,A,E),D=!0},p(A,E){const M={};E&64&&(M.$$scope={dirty:E,ctx:A}),t.$set(M);const H={};E&64&&(H.$$scope={dirty:E,ctx:A}),l.$set(H);const F={};E&64&&(F.$$scope={dirty:E,ctx:A}),a.$set(F);const W={};E&64&&(W.$$scope={dirty:E,ctx:A}),d.$set(W);const U={};E&64&&(U.$$scope={dirty:E,ctx:A}),P.$set(U)},i(A){D||(g(t.$$.fragment,A),g(l.$$.fragment,A),g(a.$$.fragment,A),g(d.$$.fragment,A),g(P.$$.fragment,A),g(I.$$.fragment,A),D=!0)},o(A){_(t.$$.fragment,A),_(l.$$.fragment,A),_(a.$$.fragment,A),_(d.$$.fragment,A),_(P.$$.fragment,A),_(I.$$.fragment,A),D=!1},d(A){A&&(m(e),m(f),m(u),m(y),m(O),m(N)),v(t),v(l),v(a),v(d),v(P),v(I,A)}}}function ha(r){let e,n,t;return n=new oe({props:{$$slots:{default:[_a]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(g(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&m(e),v(n)}}}function ba(r){let e,n=r[5][0].properties.name+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){$(o,e,l),k(e,t)},p(o,l){l&32&&n!==(n=o[5][0].properties.name+"")&&R(t,n)},d(o){o&&m(e)}}}function va(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[ba,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&96&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wa(r){let e,n,t,o;return e=new Ue({props:{id:xe,sourceLayer:xe,paint:{"fill-color":r[2],"fill-opacity":ie(0,.5)},layout:{visibility:r[1]},manageHoverState:!0,$$slots:{default:[va]},$$scope:{ctx:r}}}),t=new de({props:{id:r[3],sourceLayer:xe,paint:{"line-color":r[2],"line-width":2.5},layout:{visibility:r[1]}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&2&&(a.layout={visibility:l[1]}),i&64&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&2&&(s.layout={visibility:l[1]}),t.$set(s)},i(l){o||(g(e.$$.fragment,l),g(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&m(n),v(e,l),v(t,l)}}}function ya(r){let e,n,t,o,l;function i(s){r[4](s)}let a={id:xe,$$slots:{right:[ha],default:[ca]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new te({props:a}),X.push(()=>Y(e,"checked",i)),o=new $e({props:{url:`pmtiles://${ae()}/v1/${xe}.pmtiles`,$$slots:{default:[wa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&66&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(g(e.$$.fragment,s),g(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&m(t),v(e,s),v(o,s)}}}let xe="local_planning_authorities";function ka(r,e,n){let t,o=Z.local_planning_authorities,l=`${xe}-outline`,i=!1;function a(s){i=s,n(0,i)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=i?"visible":"none")},[i,t,o,l,a]}class Sa extends z{constructor(e){super(),q(this,e,ka,ya,G,{})}}function Ca(r){let e,n,t;return e=new we({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:Q,i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&m(n),v(e,o)}}}function Oa(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function Ta(r){let e,n,t,o,l,i,a;return t=new V({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Oa]},$$scope:{ctx:r}}}),i=new Fe({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),o=w(", as of May 2023."),l=T(),h(i.$$.fragment)},m(s,f){$(s,e,f),k(e,n),b(t,e,null),k(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(g(t.$$.fragment,s),g(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(m(e),m(l)),v(t),v(i,s)}}}function La(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Ta]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(g(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&m(e),v(n)}}}function Aa(r){let e,n=r[5][0].properties.Name+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){$(o,e,l),k(e,t)},p(o,l){l&32&&n!==(n=o[5][0].properties.Name+"")&&R(t,n)},d(o){o&&m(e)}}}function Pa(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[Aa,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&96&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ea(r){let e,n,t,o;return e=new Ue({props:{id:et,sourceLayer:et,paint:{"fill-color":r[2],"fill-opacity":ie(0,.5)},layout:{visibility:r[1]},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[Pa]},$$scope:{ctx:r}}}),e.$on("click",Ia),t=new de({props:{id:r[3],sourceLayer:et,paint:{"line-color":r[2],"line-width":5},layout:{visibility:r[1]}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&2&&(a.layout={visibility:l[1]}),i&64&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&2&&(s.layout={visibility:l[1]}),t.$set(s)},i(l){o||(g(e.$$.fragment,l),g(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&m(n),v(e,l),v(t,l)}}}function Na(r){let e,n,t,o,l;function i(s){r[4](s)}let a={id:et,$$slots:{right:[La],default:[Ca]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new te({props:a}),X.push(()=>Y(e,"checked",i)),o=new $e({props:{url:`pmtiles://${ae()}/v1/${et}.pmtiles`,$$slots:{default:[Ea]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&66&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(g(e.$$.fragment,s),g(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&m(t),v(e,s),v(o,s)}}}let et="parliamentary_constituencies";function Ia(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Da(r,e,n){let t,o=Z.parliamentary_constituencies,l=`${et}-outline`,i=!1;function a(s){i=s,n(0,i)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=i?"visible":"none")},[i,t,o,l,a]}class Ma extends z{constructor(e){super(),q(this,e,Da,Na,G,{})}}function Fa(r){let e,n,t;return e=new we({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=w(`
  Wards`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:Q,i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&m(n),v(e,o)}}}function ja(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function Ba(r){let e,n,t,o,l,i,a;return t=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[ja]},$$scope:{ctx:r}}}),i=new Fe({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),o=w(", as of May 2023."),l=T(),h(i.$$.fragment)},m(s,f){$(s,e,f),k(e,n),b(t,e,null),k(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(g(t.$$.fragment,s),g(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(m(e),m(l)),v(t),v(i,s)}}}function Ha(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Ba]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(g(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&m(e),v(n)}}}function Ra(r){let e,n=r[5][0].properties.name+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){$(o,e,l),k(e,t)},p(o,l){l&32&&n!==(n=o[5][0].properties.name+"")&&R(t,n)},d(o){o&&m(e)}}}function Wa(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[Ra,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&96&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ua(r){let e,n,t,o;return e=new Ue({props:{id:tt,sourceLayer:tt,paint:{"fill-color":r[2],"fill-opacity":ie(0,.5)},layout:{visibility:r[1]},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[Wa]},$$scope:{ctx:r}}}),e.$on("click",za),t=new de({props:{id:r[3],sourceLayer:tt,paint:{"line-color":r[2],"line-width":2.5},layout:{visibility:r[1]}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&2&&(a.layout={visibility:l[1]}),i&64&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&2&&(s.layout={visibility:l[1]}),t.$set(s)},i(l){o||(g(e.$$.fragment,l),g(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&m(n),v(e,l),v(t,l)}}}function Ga(r){let e,n,t,o,l;function i(s){r[4](s)}let a={id:tt,$$slots:{right:[Ha],default:[Fa]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new te({props:a}),X.push(()=>Y(e,"checked",i)),o=new $e({props:{url:`pmtiles://${ae()}/v1/${tt}.pmtiles`,$$slots:{default:[Ua]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&66&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(g(e.$$.fragment,s),g(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&m(t),v(e,s),v(o,s)}}}let tt="wards";function za(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function qa(r,e,n){let t,o=Z.wards,l=`${tt}-outline`,i=!1;function a(s){i=s,n(0,i)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=i?"visible":"none")},[i,t,o,l,a]}class Va extends z{constructor(e){super(),q(this,e,qa,Ga,G,{})}}function Xa(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function Ka(r){let e,n,t,o;return t=new V({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Xa]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("License: "),h(t.$$.fragment)},m(l,i){$(l,e,i),k(e,n),b(t,e,null),o=!0},p(l,[i]){const a={};i&1&&(a.$$scope={dirty:i,ctx:l}),t.$set(a)},i(l){o||(g(t.$$.fragment,l),o=!0)},o(l){_(t.$$.fragment,l),o=!1},d(l){l&&m(e),v(t)}}}class ze extends z{constructor(e){super(),q(this,e,null,Ka,G,{})}}function Ya(r){let e,n,t;return e=new we({props:{color:Z.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=w(`
  Bus routes`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:Q,i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&m(n),v(e,o)}}}function Ja(r){let e;return{c(){e=w(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function Za(r){let e,n,t,o,l,i,a,s,f;return l=new V({props:{href:"https://gtfs.org",$$slots:{default:[Ja]},$$scope:{ctx:r}}}),s=new ze({}),{c(){e=L("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=T(),t=L("p"),o=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(l.$$.fragment),i=w(`, and doesn't include which routes are run or the
        frequency of service.`),a=T(),h(s.$$.fragment)},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),k(t,o),b(l,t,null),k(t,i),$(u,a,c),b(s,u,c),f=!0},p(u,c){const p={};c&16&&(p.$$scope={dirty:c,ctx:u}),l.$set(p)},i(u){f||(g(l.$$.fragment,u),g(s.$$.fragment,u),f=!0)},o(u){_(l.$$.fragment,u),_(s.$$.fragment,u),f=!1},d(u){u&&(m(e),m(n),m(t),m(a)),v(l),v(s,u)}}}function Qa(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Za]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&16&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(g(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&m(e),v(n)}}}function xa(r){let e;return{c(){e=L("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function ef(r){let e;return{c(){e=L("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function tf(r){let e;function n(l,i){return l[3][0].properties.has_bus_lane?ef:xa}let t=n(r),o=t(r);return{c(){o.c(),e=ge()},m(l,i){o.m(l,i),$(l,e,i)},p(l,i){t!==(t=n(l))&&(o.d(1),o=t(l),o&&(o.c(),o.m(e.parentNode,e)))},d(l){l&&m(e),o.d(l)}}}function nf(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[tf,({features:t})=>({3:t}),({features:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&24&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function rf(r){let e,n;return e=new de({props:{id:Ot,sourceLayer:Ot,paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Z.bus_route_with_lane,Z.bus_route_without_lane],"line-width":5,"line-opacity":ie(1,.5)},layout:{visibility:r[1]},$$slots:{default:[nf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&16&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function of(r){let e,n,t,o,l;function i(s){r[2](s)}let a={id:Ot,$$slots:{right:[Qa],default:[Ya]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new te({props:a}),X.push(()=>Y(e,"checked",i)),o=new $e({props:{url:`pmtiles://${ae()}/v1/${Ot}.pmtiles`,$$slots:{default:[rf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&16&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&18&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(g(e.$$.fragment,s),g(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&m(t),v(e,s),v(o,s)}}}let Ot="bus_routes";function lf(r,e,n){let t,o=!1;function l(i){o=i,n(0,o)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=o?"visible":"none")},[o,t,l]}class sf extends z{constructor(e){super(),q(this,e,lf,of,G,{})}}function Xn(r){const e=gf(r[4][0]);r[5]=e[0],r[6]=e[1],r[7]=e[2]}function Kn(r,e,n){const t=r.slice();return t[8]=e[n][0],t[9]=e[n][1],t}function af(r){let e;return{c(){e=w("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function ff(r){let e,n,t,o,l,i,a,s;return a=new ze({}),{c(){e=L("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=T(),t=L("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,o=T(),l=L("p"),l.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=T(),h(a.$$.fragment)},m(f,u){$(f,e,u),$(f,n,u),$(f,t,u),$(f,o,u),$(f,l,u),$(f,i,u),b(a,f,u),s=!0},p:Q,i(f){s||(g(a.$$.fragment,f),s=!0)},o(f){_(a.$$.fragment,f),s=!1},d(f){f&&(m(e),m(n),m(t),m(o),m(l),m(i)),v(a,f)}}}function uf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[ff]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&4096&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(g(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&m(e),v(n)}}}function Yn(r){let e,n,t=Ne(r[2]),o=[];for(let i=0;i<t.length;i+=1)o[i]=Jn(Kn(r,t,i));const l=i=>_(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=ge()},m(i,a){for(let s=0;s<o.length;s+=1)o[s]&&o[s].m(i,a);$(i,e,a),n=!0},p(i,a){if(a&4){t=Ne(i[2]);let s;for(s=0;s<t.length;s+=1){const f=Kn(i,t,s);o[s]?(o[s].p(f,a),g(o[s],1)):(o[s]=Jn(f),o[s].c(),g(o[s],1),o[s].m(e.parentNode,e))}for(ne(),s=t.length;s<o.length;s+=1)l(s);re()}},i(i){if(!n){for(let a=0;a<t.length;a+=1)g(o[a]);n=!0}},o(i){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)_(o[a]);n=!1},d(i){i&&m(e),vt(o,i)}}}function Jn(r){let e,n,t,o=r[8]+"",l,i,a;return n=new we({props:{color:r[9]}}),{c(){e=L("div"),h(n.$$.fragment),t=T(),l=w(o),i=T()},m(s,f){$(s,e,f),b(n,e,null),k(e,t),k(e,l),k(e,i),a=!0},p:Q,i(s){a||(g(n.$$.fragment,s),a=!0)},o(s){_(n.$$.fragment,s),a=!1},d(s){s&&m(e),v(n)}}}function cf(r){Xn(r);let e,n=r[5]+"",t,o,l,i,a,s=r[6]+"",f,u,c,p,d=r[7]+"",C;return{c(){e=L("h2"),t=w(n),o=T(),l=L("p"),i=w("Direction: "),a=L("b"),f=T(),u=L("p"),c=w("Width: "),p=L("b"),C=w(d)},m(y,O){$(y,e,O),k(e,t),$(y,o,O),$(y,l,O),k(l,i),k(l,a),a.innerHTML=s,$(y,f,O),$(y,u,O),k(u,c),k(u,p),k(p,C)},p(y,O){Xn(y),O&16&&n!==(n=y[5]+"")&&R(t,n),O&16&&s!==(s=y[6]+"")&&(a.innerHTML=s),O&16&&d!==(d=y[7]+"")&&R(C,d)},d(y){y&&(m(e),m(o),m(l),m(f),m(u))}}}function pf(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[cf,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&4112&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $f(r){let e,n;return e=new de({props:{id:Tt,sourceLayer:Tt,paint:{"line-color":pr(["get","kind"],{track:Z.cycle_paths.track,lane:Z.cycle_paths.lane,shared_use_segregated:Z.cycle_paths.shared_use_segregated,shared_use_unsegregated:Z.cycle_paths.shared_use_unsegregated},"red"),"line-width":We,"line-opacity":ie(1,.5)},layout:{visibility:r[1]},hoverCursor:"pointer",$$slots:{default:[pf]},$$scope:{ctx:r}}}),e.$on("click",df),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&4096&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mf(r){let e,n,t,o,l,i;function a(u){r[3](u)}let s={id:Tt,$$slots:{right:[uf],default:[af]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new te({props:s}),X.push(()=>Y(e,"checked",a));let f=r[0]&&Yn(r);return l=new $e({props:{url:`pmtiles://${ae()}/v1/${Tt}.pmtiles`,$$slots:{default:[$f]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),f&&f.c(),o=T(),h(l.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),f&&f.m(u,c),$(u,o,c),b(l,u,c),i=!0},p(u,[c]){const p={};c&4096&&(p.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,p.checked=u[0],J(()=>n=!1)),e.$set(p),u[0]?f?(f.p(u,c),c&1&&g(f,1)):(f=Yn(u),f.c(),g(f,1),f.m(o.parentNode,o)):f&&(ne(),_(f,1,1,()=>{f=null}),re());const d={};c&4098&&(d.$$scope={dirty:c,ctx:u}),l.$set(d)},i(u){i||(g(e.$$.fragment,u),g(f),g(l.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),_(f),_(l.$$.fragment,u),i=!1},d(u){u&&(m(t),m(o)),v(e,u),f&&f.d(u),v(l,u)}}}let Tt="cycle_paths";function gf(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.properties.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.properties.direction],t=r.properties.width=="unknown"?"unknown":`${r.properties.width} meters`;return[e,`${n} ${r.properties.direction}`,t]}function df(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function _f(r,e,n){let t,o=[["Separated tracks",Z.cycle_paths.track],["Unprotected lanes",Z.cycle_paths.lane],["Shared-use (segregated)",Z.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",Z.cycle_paths.shared_use_unsegregated]],l=!1;function i(a){l=a,n(0,l)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=l?"visible":"none")},[l,t,o,i]}class hf extends z{constructor(e){super(),q(this,e,_f,mf,G,{})}}function Zn(r){const e=r[4][0].properties.name??"Unknown MRN road";r[5]=e}function bf(r){let e,n,t;return e=new we({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=w(`
  Major Road Network`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:Q,i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&m(n),v(e,o)}}}function vf(r){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function wf(r){let e,n,t,o,l,i,a;return t=new V({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[vf]},$$scope:{ctx:r}}}),i=new Fe({}),{c(){e=L("p"),n=w("Data from the "),h(t.$$.fragment),o=w(", as of September 2021."),l=T(),h(i.$$.fragment)},m(s,f){$(s,e,f),k(e,n),b(t,e,null),k(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(g(t.$$.fragment,s),g(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(m(e),m(l)),v(t),v(i,s)}}}function yf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[wf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(g(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&m(e),v(n)}}}function kf(r){Zn(r);let e,n=r[5]+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){$(o,e,l),k(e,t)},p(o,l){Zn(o),l&16&&n!==(n=o[5]+"")&&R(t,n)},d(o){o&&m(e)}}}function Sf(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[kf,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&80&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Cf(r){let e,n;return e=new de({props:{id:Lt,sourceLayer:Lt,paint:{"line-color":r[2],"line-width":7,"line-opacity":ie(1,.5)},layout:{visibility:r[1]},$$slots:{default:[Sf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&64&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Of(r){let e,n,t,o,l;function i(s){r[3](s)}let a={id:Lt,$$slots:{right:[yf],default:[bf]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new te({props:a}),X.push(()=>Y(e,"checked",i)),o=new $e({props:{url:`pmtiles://${ae()}/v1/${Lt}.pmtiles`,$$slots:{default:[Cf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&66&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(g(e.$$.fragment,s),g(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&m(t),v(e,s),v(o,s)}}}let Lt="mrn";function Tf(r,e,n){let t,o=Z.mrn,l=!1;function i(a){l=a,n(0,l)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=l?"visible":"none")},[l,t,o,i]}class Lf extends z{constructor(e){super(),q(this,e,Tf,Of,G,{})}}function Af(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function Pf(r){let e;return{c(){e=w("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function Ef(r){let e;return{c(){e=w("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function Nf(r){let e,n,t,o,l,i,a,s,f,u,c;return a=new V({props:{href:"https://www.pct.bike",$$slots:{default:[Pf]},$$scope:{ctx:r}}}),f=new V({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Ef]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=T(),t=L("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,o=T(),l=L("p"),i=w("See "),h(a.$$.fragment),s=w(" and "),h(f.$$.fragment),u=w(" for details on methodology and data sources.")},m(p,d){$(p,e,d),$(p,n,d),$(p,t,d),$(p,o,d),$(p,l,d),k(l,i),b(a,l,null),k(l,s),b(f,l,null),k(l,u),c=!0},p(p,d){const C={};d&4096&&(C.$$scope={dirty:d,ctx:p}),a.$set(C);const y={};d&4096&&(y.$$scope={dirty:d,ctx:p}),f.$set(y)},i(p){c||(g(a.$$.fragment,p),g(f.$$.fragment,p),c=!0)},o(p){_(a.$$.fragment,p),_(f.$$.fragment,p),c=!1},d(p){p&&(m(e),m(n),m(t),m(o),m(l)),v(a),v(f)}}}function If(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Nf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&4096&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(g(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&m(e),v(n)}}}function Qn(r){let e,n,t,o,l,i,a,s;e=new Ge({props:{colorScale:r[5],limits:r[6]}});function f(d){r[9](d)}let u={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(u.value=r[0]),t=new mr({props:u}),X.push(()=>Y(t,"value",f));function c(d){r[10](d)}let p={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[2]!==void 0&&(p.value=r[2]),i=new wt({props:p}),X.push(()=>Y(i,"value",c)),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),l=T(),h(i.$$.fragment)},m(d,C){b(e,d,C),$(d,n,C),b(t,d,C),$(d,l,C),b(i,d,C),s=!0},p(d,C){const y={};!o&&C&1&&(o=!0,y.value=d[0],J(()=>o=!1)),t.$set(y);const O={};!a&&C&4&&(a=!0,O.value=d[2],J(()=>a=!1)),i.$set(O)},i(d){s||(g(e.$$.fragment,d),g(t.$$.fragment,d),g(i.$$.fragment,d),s=!0)},o(d){_(e.$$.fragment,d),_(t.$$.fragment,d),_(i.$$.fragment,d),s=!1},d(d){d&&(m(n),m(l)),v(e,d),v(t,d),v(i,d)}}}function Df(r){let e,n=r[7](r[11][0])+"",t;return{c(){e=new gr(!1),t=ge(),e.a=t},m(o,l){e.m(n,o,l),$(o,t,l)},p(o,l){l&2048&&n!==(n=o[7](o[11][0])+"")&&e.p(n)},d(o){o&&(m(t),e.d())}}}function Mf(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[Df,({features:t})=>({11:t}),({features:t})=>t?2048:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&6144&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ff(r){let e,n;return e=new de({props:{id:Ke,sourceLayer:Ke,paint:{"line-color":Ae(["get",r[2]],r[6],r[5]),"line-width":We,"line-opacity":ie(1,.5)},layout:{visibility:r[4]},$$slots:{default:[Mf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&4&&(l.paint={"line-color":Ae(["get",t[2]],t[6],t[5]),"line-width":We,"line-opacity":ie(1,.5)}),o&16&&(l.layout={visibility:t[4]}),o&4096&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function jf(r){let e,n=r[7](r[11][0])+"",t;return{c(){e=new gr(!1),t=ge(),e.a=t},m(o,l){e.m(n,o,l),$(o,t,l)},p(o,l){l&2048&&n!==(n=o[7](o[11][0])+"")&&e.p(n)},d(o){o&&(m(t),e.d())}}}function Bf(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[jf,({features:t})=>({11:t}),({features:t})=>t?2048:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&6144&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Hf(r){let e,n;return e=new de({props:{id:At,sourceLayer:At,paint:{"line-color":Ae(["get",r[2]],r[6],r[5]),"line-width":We,"line-opacity":ie(1,.5)},layout:{visibility:r[3]},$$slots:{default:[Bf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&4&&(l.paint={"line-color":Ae(["get",t[2]],t[6],t[5]),"line-width":We,"line-opacity":ie(1,.5)}),o&8&&(l.layout={visibility:t[3]}),o&4096&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Rf(r){let e,n,t,o,l,i,a,s;function f(p){r[8](p)}let u={id:Ke,$$slots:{right:[If],default:[Af]},$$scope:{ctx:r}};r[1]!==void 0&&(u.checked=r[1]),e=new te({props:u}),X.push(()=>Y(e,"checked",f));let c=r[1]&&Qn(r);return l=new $e({props:{url:`pmtiles://${ae()}/v1/${Ke}.pmtiles`,$$slots:{default:[Ff]},$$scope:{ctx:r}}}),a=new $e({props:{url:`pmtiles://${ae()}/v1/${At}.pmtiles`,$$slots:{default:[Hf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),c&&c.c(),o=T(),h(l.$$.fragment),i=T(),h(a.$$.fragment)},m(p,d){b(e,p,d),$(p,t,d),c&&c.m(p,d),$(p,o,d),b(l,p,d),$(p,i,d),b(a,p,d),s=!0},p(p,[d]){const C={};d&4096&&(C.$$scope={dirty:d,ctx:p}),!n&&d&2&&(n=!0,C.checked=p[1],J(()=>n=!1)),e.$set(C),p[1]?c?(c.p(p,d),d&2&&g(c,1)):(c=Qn(p),c.c(),g(c,1),c.m(o.parentNode,o)):c&&(ne(),_(c,1,1,()=>{c=null}),re());const y={};d&4116&&(y.$$scope={dirty:d,ctx:p}),l.$set(y);const O={};d&4108&&(O.$$scope={dirty:d,ctx:p}),a.$set(O)},i(p){s||(g(e.$$.fragment,p),g(c),g(l.$$.fragment,p),g(a.$$.fragment,p),s=!0)},o(p){_(e.$$.fragment,p),_(c),_(l.$$.fragment,p),_(a.$$.fragment,p),s=!1},d(p){p&&(m(t),m(o),m(i)),v(e,p),c&&c.d(p),v(l,p),v(a,p)}}}let Ke="pct_commute",At="pct_school";function Wf(r,e,n){let t,o,l=Z.sequential_low_to_high,i=[0,50,100,500,1e3,2e3],a=Ke,s="baseline",f=!1;function u(C){let y=C.properties.baseline,O=C.properties.gov_target,S=C.properties.go_dutch,P=`<h2>Trip purpose: ${a==Ke?"commuting":"school"}</h2>`;if(P+=`<p>Baseline (2011): <b>${y.toLocaleString()}</b></p>`,y==0)P+=`<p>Government target (2025): <b>${O.toLocaleString()}</b></p>`,P+=`<p>Go Dutch: <b>${S.toLocaleString()}</b></p>`;else{let B=(O/y).toFixed(1),N=(S/y).toFixed(1);P+=`<p>Government target (2025): ${O.toLocaleString()} (<b>${B}x</b> of baseline)</p>`,P+=`<p>Go Dutch: ${S.toLocaleString()} (<b>${N}x</b> of baseline)</p>`}return P}function c(C){f=C,n(1,f)}function p(C){a=C,n(0,a)}function d(C){s=C,n(2,s)}return r.$$.update=()=>{r.$$.dirty&3&&n(4,t=f&&a==Ke?"visible":"none"),r.$$.dirty&3&&n(3,o=f&&a==At?"visible":"none")},[a,f,s,o,t,l,i,u,c,p,d]}class Uf extends z{constructor(e){super(),q(this,e,Wf,Rf,G,{})}}function Gf(r){let e;return{c(){e=w("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function zf(r){let e;return{c(){e=w("Basemap")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function qf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function Vf(r){let e,n,t,o,l,i,a,s,f,u,c,p;return t=new V({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[zf]},$$scope:{ctx:r}}}),u=new V({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[qf]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("The average speed data is collected over a six-month period by "),h(t.$$.fragment),o=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),l=T(),i=L("p"),i.textContent="Data valid as of 1 September, 2023",a=T(),s=L("p"),f=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),c=w(".")},m(d,C){$(d,e,C),k(e,n),b(t,e,null),k(e,o),$(d,l,C),$(d,i,C),$(d,a,C),$(d,s,C),k(s,f),b(u,s,null),k(s,c),p=!0},p(d,C){const y={};C&512&&(y.$$scope={dirty:C,ctx:d}),t.$set(y);const O={};C&512&&(O.$$scope={dirty:C,ctx:d}),u.$set(O)},i(d){p||(g(t.$$.fragment,d),g(u.$$.fragment,d),p=!0)},o(d){_(t.$$.fragment,d),_(u.$$.fragment,d),p=!1},d(d){d&&(m(e),m(l),m(i),m(a),m(s)),v(t),v(u)}}}function Xf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Vf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&512&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(g(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&m(e),v(n)}}}function xn(r){let e,n,t,o,l;e=new Ge({props:{colorScale:r[3],limits:r[4]}});function i(s){r[7](s)}let a={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[1]!==void 0&&(a.value=r[1]),t=new mr({props:a}),X.push(()=>Y(t,"value",i)),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(s,f){b(e,s,f),$(s,n,f),b(t,s,f),l=!0},p(s,f){const u={};!o&&f&2&&(o=!0,u.value=s[1],J(()=>o=!1)),t.$set(u)},i(s){l||(g(e.$$.fragment,s),g(t.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),l=!1},d(s){s&&m(n),v(e,s),v(t,s)}}}function Kf(r){let e,n,t=r[8][0].properties.indicative_mph+"",o,l,i,a,s,f=r[8][0].properties.highest_mph+"",u,c,p=r[5][r[8][0].properties.highest_description]+"",d,C;return{c(){e=L("p"),n=w("Posted speed limit: "),o=w(t),l=w(" mph"),i=T(),a=L("p"),s=w("Highest average speed: "),u=w(f),c=w(" mph (during "),d=w(p),C=w(")")},m(y,O){$(y,e,O),k(e,n),k(e,o),k(e,l),$(y,i,O),$(y,a,O),k(a,s),k(a,u),k(a,c),k(a,d),k(a,C)},p(y,O){O&256&&t!==(t=y[8][0].properties.indicative_mph+"")&&R(o,t),O&256&&f!==(f=y[8][0].properties.highest_mph+"")&&R(u,f),O&256&&p!==(p=y[5][y[8][0].properties.highest_description]+"")&&R(d,p)},d(y){y&&(m(e),m(i),m(a))}}}function Yf(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[Kf,({features:t})=>({8:t}),({features:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&768&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Jf(r){let e,n;return e=new de({props:{id:Pt,sourceLayer:Pt,paint:{"line-color":Ae(["get",r[1]],r[4],r[3]),"line-width":We,"line-opacity":ie(1,.5)},layout:{visibility:r[2]},$$slots:{default:[Yf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.paint={"line-color":Ae(["get",t[1]],t[4],t[3]),"line-width":We,"line-opacity":ie(1,.5)}),o&4&&(l.layout={visibility:t[2]}),o&512&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zf(r){let e,n,t,o,l,i;function a(u){r[6](u)}let s={id:Pt,$$slots:{right:[Xf],default:[Gf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new te({props:s}),X.push(()=>Y(e,"checked",a));let f=r[0]&&xn(r);return l=new $e({props:{url:`pmtiles://${on()}/v1/${Pt}.pmtiles`,$$slots:{default:[Jf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),f&&f.c(),o=T(),h(l.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),f&&f.m(u,c),$(u,o,c),b(l,u,c),i=!0},p(u,[c]){const p={};c&512&&(p.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,p.checked=u[0],J(()=>n=!1)),e.$set(p),u[0]?f?(f.p(u,c),c&1&&g(f,1)):(f=xn(u),f.c(),g(f,1),f.m(o.parentNode,o)):f&&(ne(),_(f,1,1,()=>{f=null}),re());const d={};c&518&&(d.$$scope={dirty:c,ctx:u}),l.$set(d)},i(u){i||(g(e.$$.fragment,u),g(f),g(l.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),_(f),_(l.$$.fragment,u),i=!1},d(u){u&&(m(t),m(o)),v(e,u),f&&f.d(u),v(l,u)}}}let Pt="road_speeds";function Qf(r,e,n){let t,o=Z.sequential_low_to_high,l=[0,20,30,40,50,90],i="indicative_mph",a=!1,s={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function f(c){a=c,n(0,a)}function u(c){i=c,n(1,i)}return r.$$.update=()=>{r.$$.dirty&1&&n(2,t=a?"visible":"none")},[a,i,t,o,l,s,f,u]}class xf extends z{constructor(e){super(),q(this,e,Qf,Zf,G,{})}}function eu(r){let e;return{c(){e=w("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function tu(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function nu(r){let e,n,t,o,l,i,a,s,f;return a=new V({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[tu]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=T(),t=L("p"),t.textContent="Data valid as of 1 September, 2023",o=T(),l=L("p"),i=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(a.$$.fragment),s=w(".")},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),$(u,o,c),$(u,l,c),k(l,i),b(a,l,null),k(l,s),f=!0},p(u,c){const p={};c&64&&(p.$$scope={dirty:c,ctx:u}),a.$set(p)},i(u){f||(g(a.$$.fragment,u),f=!0)},o(u){_(a.$$.fragment,u),f=!1},d(u){u&&(m(e),m(n),m(t),m(o),m(l)),v(a)}}}function ru(r){let e,n,t;return n=new oe({props:{$$slots:{default:[nu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(g(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&m(e),v(n)}}}function er(r){let e,n;return e=new Ge({props:{colorScale:r[2],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:Q,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ou(r){let e,n,t,o=r[5][0].properties.average+"",l,i,a,s,f,u,c=r[5][0].properties.minimum+"",p,d;return{c(){e=L("p"),n=w("Average width: "),t=L("b"),l=w(o),i=w(`
        meters`),a=T(),s=L("p"),f=w("Minimum width: "),u=L("b"),p=w(c),d=w(`
        meters`)},m(C,y){$(C,e,y),k(e,n),k(e,t),k(t,l),k(e,i),$(C,a,y),$(C,s,y),k(s,f),k(s,u),k(u,p),k(s,d)},p(C,y){y&32&&o!==(o=C[5][0].properties.average+"")&&R(l,o),y&32&&c!==(c=C[5][0].properties.minimum+"")&&R(p,c)},d(C){C&&(m(e),m(a),m(s))}}}function lu(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[ou,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&96&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function su(r){let e,n;return e=new de({props:{id:Et,sourceLayer:Et,paint:{"line-color":Ae(["get","average"],r[3],r[2]),"line-width":We,"line-opacity":ie(1,.5)},layout:{visibility:r[1]},$$slots:{default:[lu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&64&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function iu(r){let e,n,t,o,l,i;function a(u){r[4](u)}let s={id:Et,$$slots:{right:[ru],default:[eu]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new te({props:s}),X.push(()=>Y(e,"checked",a));let f=r[0]&&er(r);return l=new $e({props:{url:`pmtiles://${on()}/v1/${Et}.pmtiles`,$$slots:{default:[su]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),f&&f.c(),o=T(),h(l.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),f&&f.m(u,c),$(u,o,c),b(l,u,c),i=!0},p(u,[c]){const p={};c&64&&(p.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,p.checked=u[0],J(()=>n=!1)),e.$set(p),u[0]?f?(f.p(u,c),c&1&&g(f,1)):(f=er(u),f.c(),g(f,1),f.m(o.parentNode,o)):f&&(ne(),_(f,1,1,()=>{f=null}),re());const d={};c&66&&(d.$$scope={dirty:c,ctx:u}),l.$set(d)},i(u){i||(g(e.$$.fragment,u),g(f),g(l.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),_(f),_(l.$$.fragment,u),i=!1},d(u){u&&(m(t),m(o)),v(e,u),f&&f.d(u),v(l,u)}}}let Et="road_widths";function au(r,e,n){let t,o=Z.sequential_low_to_high,l=[0,5,10,15,20,100],i=!1;function a(s){i=s,n(0,i)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=i?"visible":"none")},[i,t,o,l,a]}class fu extends z{constructor(e){super(),q(this,e,au,iu,G,{})}}function tr(r){const e=r[11][0].properties;r[12]=e}function uu(r){let e,n,t;return{c(){e=L("input"),K(e,"class","govuk-file-upload"),K(e,"id","load-criticals"),K(e,"type","file")},m(o,l){$(o,e,l),r[8](e),n||(t=nt(e,"change",r[6]),n=!0)},p:Q,d(o){o&&m(e),r[8](null),n=!1,t()}}}function nr(r){let e,n;return e=new gt({props:{small:!0,$$slots:{default:[pu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&8197&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function cu(r){let e,n,t=r[2].toLocaleString()+"",o,l,i;return e=new we({props:{color:en}}),{c(){h(e.$$.fragment),n=w(`
        Show `),o=w(t),l=w(" issues")},m(a,s){b(e,a,s),$(a,n,s),$(a,o,s),$(a,l,s),i=!0},p(a,s){(!i||s&4)&&t!==(t=a[2].toLocaleString()+"")&&R(o,t)},i(a){i||(g(e.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),i=!1},d(a){a&&(m(n),m(o),m(l)),v(e,a)}}}function pu(r){let e,n,t;function o(i){r[9](i)}let l={id:"show-criticals",$$slots:{default:[cu]},$$scope:{ctx:r}};return r[0]!==void 0&&(l.checked=r[0]),e=new te({props:l}),X.push(()=>Y(e,"checked",o)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const s={};a&8196&&(s.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,s.checked=i[0],J(()=>n=!1)),e.$set(s)},i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function $u(r){let e,n,t,o,l,i;e=new $r({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[uu]},$$scope:{ctx:r}}}),t=new dr({props:{errorMessage:r[3]}});let a=r[2]>0&&nr(r);return{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),o=T(),a&&a.c(),l=ge()},m(s,f){b(e,s,f),$(s,n,f),b(t,s,f),$(s,o,f),a&&a.m(s,f),$(s,l,f),i=!0},p(s,f){const u={};f&8194&&(u.$$scope={dirty:f,ctx:s}),e.$set(u);const c={};f&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?a?(a.p(s,f),f&4&&g(a,1)):(a=nr(s),a.c(),g(a,1),a.m(l.parentNode,l)):a&&(ne(),_(a,1,1,()=>{a=null}),re())},i(s){i||(g(e.$$.fragment,s),g(t.$$.fragment,s),g(a),i=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),_(a),i=!1},d(s){s&&(m(n),m(o),m(l)),v(e,s),v(t,s),a&&a.d(s)}}}function mu(r){tr(r);let e,n,t=r[12].critical_type+"",o,l,i,a,s,f=r[12].location_description+"",u,c,p,d,C,y=r[12].notes+"",O,S,P,B,N,I,D,A=r[12].id+"",E,M,H,F,W,U=(r[12].inspector??"???")+"",le,qe,ee,ue=r[12].submission_time+"",_e,he,ce,je,ye,ke=r[12].scheme_reference+"",Pe,Se,Be,Me=r[12].current_design_stage+"",j;return{c(){e=L("div"),n=L("h2"),o=w(t),l=T(),i=L("p"),a=L("u"),a.textContent="Location",s=w(`
          : `),u=w(f),c=T(),p=L("p"),d=L("u"),d.textContent="Notes",C=w(`
          : `),O=w(y),S=T(),P=L("hr"),B=T(),N=L("p"),I=w("Critical issue ID: "),D=L("b"),E=w(A),M=T(),H=L("p"),F=w("Submitted by "),W=L("b"),le=w(U),qe=w(`
          at
          `),ee=L("b"),_e=w(ue),he=T(),ce=L("p"),je=w("For scheme "),ye=L("b"),Pe=w(ke),Se=w(`
          in stage
          `),Be=L("b"),j=w(Me),Ie(e,"max-width","30vw")},m(fe,me){$(fe,e,me),k(e,n),k(n,o),k(e,l),k(e,i),k(i,a),k(i,s),k(i,u),k(e,c),k(e,p),k(p,d),k(p,C),k(p,O),k(e,S),k(e,P),k(e,B),k(e,N),k(N,I),k(N,D),k(D,E),k(e,M),k(e,H),k(H,F),k(H,W),k(W,le),k(H,qe),k(H,ee),k(ee,_e),k(e,he),k(e,ce),k(ce,je),k(ce,ye),k(ye,Pe),k(ce,Se),k(ce,Be),k(Be,j)},p(fe,me){tr(fe),me&2048&&t!==(t=fe[12].critical_type+"")&&R(o,t),me&2048&&f!==(f=fe[12].location_description+"")&&R(u,f),me&2048&&y!==(y=fe[12].notes+"")&&R(O,y),me&2048&&A!==(A=fe[12].id+"")&&R(E,A),me&2048&&U!==(U=(fe[12].inspector??"???")+"")&&R(le,U),me&2048&&ue!==(ue=fe[12].submission_time+"")&&R(_e,ue),me&2048&&ke!==(ke=fe[12].scheme_reference+"")&&R(Pe,ke),me&2048&&Me!==(Me=fe[12].current_design_stage+"")&&R(j,Me)},d(fe){fe&&m(e)}}}function gu(r){let e,n;return e=new se({props:{openOn:"click",$$slots:{default:[mu,({features:t})=>({11:t}),({features:t})=>t?2048:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&10240&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function du(r){let e,n,t,o,l,i;return e=new rt({props:{id:`${Nt}-clusters`,applyToClusters:!0,paint:{"circle-color":en,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]},layout:{visibility:r[5]},hoverCursor:"pointer"}}),e.$on("click",r[7]),t=new Oo({props:{applyToClusters:!0,layout:{"text-field":"{point_count_abbreviated}",visibility:r[5]}}}),l=new rt({props:{id:`${Nt}-counts`,applyToClusters:!1,paint:{"circle-color":en,"circle-opacity":.9,"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3},layout:{visibility:r[5]},$$slots:{default:[gu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),o=T(),h(l.$$.fragment)},m(a,s){b(e,a,s),$(a,n,s),b(t,a,s),$(a,o,s),b(l,a,s),i=!0},p(a,s){const f={};s&32&&(f.layout={visibility:a[5]}),e.$set(f);const u={};s&32&&(u.layout={"text-field":"{point_count_abbreviated}",visibility:a[5]}),t.$set(u);const c={};s&32&&(c.layout={visibility:a[5]}),s&8192&&(c.$$scope={dirty:s,ctx:a}),l.$set(c)},i(a){i||(g(e.$$.fragment,a),g(t.$$.fragment,a),g(l.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(l.$$.fragment,a),i=!1},d(a){a&&(m(n),m(o)),v(e,a),v(t,a),v(l,a)}}}function _u(r){let e,n,t,o;return e=new Te({props:{label:"Critical Issues",$$slots:{default:[$u]},$$scope:{ctx:r}}}),t=new jt({props:{id:Nt,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[du]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},p(l,[i]){const a={};i&8207&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&16&&(s.data=l[4]),i&8224&&(s.$$scope={dirty:i,ctx:l}),t.$set(s)},i(l){o||(g(e.$$.fragment,l),g(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&m(n),v(e,l),v(t,l)}}}let Nt="criticals",en="red";function hu(r,e,n){let t,o;pe(r,lt,C=>n(10,o=C));let l,i=!0,a=0,s="",f=rn();async function u(C){try{n(4,f=await Is(l.files[0])),n(2,a=f.features.length),n(3,s="")}catch(y){n(3,s=`The file you loaded is broken: ${y}`)}}function c(C){o.getSource(Nt).getClusterExpansionZoom(C.detail.features[0].properties.cluster_id,(y,O)=>{y||o.easeTo({center:C.detail.features[0].geometry.coordinates,zoom:O})})}function p(C){X[C?"unshift":"push"](()=>{l=C,n(1,l)})}function d(C){i=C,n(0,i)}return r.$$.update=()=>{r.$$.dirty&1&&n(5,t=i?"visible":"none")},[i,l,a,s,f,t,u,c,p,d]}class bu extends z{constructor(e){super(),q(this,e,hu,_u,G,{})}}function vu(r){let e,n,t;return e=new we({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=w(`
  Crossings`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:Q,i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&m(n),v(e,o)}}}function wu(r){let e;return{c(){e=w("crossing")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function yu(r){let e,n,t,o,l,i,a;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[wu]},$$scope:{ctx:r}}}),i=new ze({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),o=w(" data from OpenStreetMap (as of 9 August 2023)."),l=T(),h(i.$$.fragment)},m(s,f){$(s,e,f),k(e,n),b(t,e,null),k(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(g(t.$$.fragment,s),g(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(m(e),m(l)),v(t),v(i,s)}}}function ku(r){let e,n,t;return n=new oe({props:{$$slots:{default:[yu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(g(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&m(e),v(n)}}}function Su(r){let e,n=rr(r[4][0])+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){$(o,e,l),k(e,t)},p(o,l){l&16&&n!==(n=rr(o[4][0])+"")&&R(t,n)},d(o){o&&m(e)}}}function Cu(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[Su,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&48&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ou(r){let e,n;return e=new rt({props:{id:It,sourceLayer:It,paint:{"circle-color":r[2],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]},layout:{visibility:r[1]},$$slots:{default:[Cu]},$$scope:{ctx:r}}}),e.$on("click",Lu),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Tu(r){let e,n,t,o,l;function i(s){r[3](s)}let a={id:It,$$slots:{right:[ku],default:[vu]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new te({props:a}),X.push(()=>Y(e,"checked",i)),o=new $e({props:{url:`pmtiles://${ae()}/v1/${It}.pmtiles`,$$slots:{default:[Ou]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&34&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(g(e.$$.fragment,s),g(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&m(t),v(e,s),v(o,s)}}}let It="crossings";function rr(r){const e=new Map([["no","Location where crossing is impossible/illegal but where there is a clear desire line to cross"],["traffic_signals","Signalised crossing"],["marked","Crossing with no traffic signals"],["uncontrolled","Crossing with no traffic signals"],["unmarked","Crossing with no markings or signals"],["zebra","Zebra crossing"],["island","Crossing with an island"],["informal","Informal crossing with an obvious desire line, but no official infrastructure to support it"]]),n=r.properties.crossing;return`${e.get(n)??`Crossing with unknown type (${n})`}. Click for details.`}function Lu(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Au(r,e,n){let t,o=Z.crossings,l=!1;function i(a){l=a,n(0,l)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=l?"visible":"none")},[l,t,o,i]}class Pu extends z{constructor(e){super(),q(this,e,Au,Tu,G,{})}}function Eu(r){let e,n,t;return e=new we({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=w(`
  Cycle parking`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:Q,i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&m(n),v(e,o)}}}function Nu(r){let e;return{c(){e=w("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function Iu(r){let e,n,t,o,l,i,a;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Nu]},$$scope:{ctx:r}}}),i=new ze({}),{c(){e=L("p"),n=w("Cycle parking, according to "),h(t.$$.fragment),o=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),l=T(),h(i.$$.fragment)},m(s,f){$(s,e,f),k(e,n),b(t,e,null),k(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(g(t.$$.fragment,s),g(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(m(e),m(l)),v(t),v(i,s)}}}function Du(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Iu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(g(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&m(e),v(n)}}}function Mu(r){let e,n=or(r[4][0])+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){$(o,e,l),k(e,t)},p(o,l){l&16&&n!==(n=or(o[4][0])+"")&&R(t,n)},d(o){o&&m(e)}}}function Fu(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[Mu,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&48&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ju(r){let e,n;return e=new rt({props:{id:Dt,sourceLayer:Dt,paint:{"circle-color":r[2],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]},layout:{visibility:r[1]},manageHoverState:!0,$$slots:{default:[Fu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Bu(r){let e,n,t,o,l;function i(s){r[3](s)}let a={id:Dt,$$slots:{right:[Du],default:[Eu]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new te({props:a}),X.push(()=>Y(e,"checked",i)),o=new $e({props:{url:`pmtiles://${ae()}/v1/${Dt}.pmtiles`,$$slots:{default:[ju]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&34&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(g(e.$$.fragment,s),g(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&m(t),v(e,s),v(o,s)}}}let Dt="cycle_parking";function or(r){return`Capacity: ${r.properties.capacity??"unknown"}`}function Hu(r,e,n){let t,o=Z.cycle_parking,l=!1;function i(a){l=a,n(0,l)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=l?"visible":"none")},[l,t,o,i]}class Ru extends z{constructor(e){super(),q(this,e,Hu,Bu,G,{})}}function Wu(r){let e,n,t,o;return e=new we({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=T(),t=w(r[1])},m(l,i){b(e,l,i),$(l,n,i),$(l,t,i),o=!0},p(l,i){(!o||i&2)&&R(t,l[1])},i(l){o||(g(e.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),o=!1},d(l){l&&(m(n),m(t)),v(e,l)}}}function Uu(r){let e;const n=r[7].default,t=ct(n,r,r[9],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&512)&&pt(t,n,o,o[9],e?mt(n,o[9],l,null):$t(o[9]),null)},i(o){e||(g(t,o),e=!0)},o(o){_(t,o),e=!1},d(o){t&&t.d(o)}}}function Gu(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Uu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&512&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(g(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&m(e),v(n)}}}function zu(r){let e,n=r[5](r[10][0])+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){$(o,e,l),k(e,t)},p(o,l){l&1024&&n!==(n=o[5](o[10][0])+"")&&R(t,n)},d(o){o&&m(e)}}}function qu(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[zu,({features:t})=>({10:t}),({features:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1536&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Vu(r){let e,n;return e=new Ue({props:{id:r[0],sourceLayer:r[0],paint:{"fill-color":r[4],"fill-opacity":ie(.7,1)},layout:{visibility:r[3]},manageHoverState:!0,$$slots:{default:[qu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1&&(l.id=t[0]),o&1&&(l.sourceLayer=t[0]),o&8&&(l.layout={visibility:t[3]}),o&512&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xu(r){let e,n,t,o,l;function i(s){r[8](s)}let a={id:r[0],$$slots:{right:[Gu],default:[Wu]},$$scope:{ctx:r}};return r[2]!==void 0&&(a.checked=r[2]),e=new te({props:a}),X.push(()=>Y(e,"checked",i)),o=new $e({props:{url:`pmtiles://${ae()}/v1/${r[0]}.pmtiles`,$$slots:{default:[Vu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&1&&(u.id=s[0]),f&514&&(u.$$scope={dirty:f,ctx:s}),!n&&f&4&&(n=!0,u.checked=s[2],J(()=>n=!1)),e.$set(u);const c={};f&1&&(c.url=`pmtiles://${ae()}/v1/${s[0]}.pmtiles`),f&521&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(g(e.$$.fragment,s),g(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&m(t),v(e,s),v(o,s)}}}function Ku(r,e,n){let t,{$$slots:o={},$$scope:l}=e,{name:i}=e,{singularNoun:a}=e,{pluralNoun:s}=e,f=Z[i],u=!1;function c(d){return d.properties.name??`Unnamed ${a}`}function p(d){u=d,n(2,u)}return r.$$set=d=>{"name"in d&&n(0,i=d.name),"singularNoun"in d&&n(6,a=d.singularNoun),"pluralNoun"in d&&n(1,s=d.pluralNoun),"$$scope"in d&&n(9,l=d.$$scope)},r.$$.update=()=>{r.$$.dirty&4&&n(3,t=u?"visible":"none")},[i,s,u,t,f,c,a,o,p,l]}class sn extends z{constructor(e){super(),q(this,e,Ku,Xu,G,{name:0,singularNoun:6,pluralNoun:1})}}function Yu(r){let e;return{c(){e=w("hospital")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function Ju(r){let e,n,t,o,l,i,a;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Yu]},$$scope:{ctx:r}}}),i=new ze({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),o=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),l=T(),h(i.$$.fragment)},m(s,f){$(s,e,f),k(e,n),b(t,e,null),k(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&1&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(g(t.$$.fragment,s),g(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(m(e),m(l)),v(t),v(i,s)}}}function Zu(r){let e,n;return e=new sn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Ju]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&1&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Qu extends z{constructor(e){super(),q(this,e,null,Zu,G,{})}}function xu(r){let e,n,t;return e=new we({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=w(`
  Railway Stations`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:Q,i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&m(n),v(e,o)}}}function ec(r){let e;return{c(){e=w("railway station")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function tc(r){let e,n,t,o,l,i,a;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[ec]},$$scope:{ctx:r}}}),i=new ze({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),o=w(" data from OpenStreetMap (as of 9 August 2023)."),l=T(),h(i.$$.fragment)},m(s,f){$(s,e,f),k(e,n),b(t,e,null),k(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(g(t.$$.fragment,s),g(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(m(e),m(l)),v(t),v(i,s)}}}function nc(r){let e,n,t;return n=new oe({props:{$$slots:{default:[tc]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(g(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&m(e),v(n)}}}function rc(r){let e,n=lr(r[4][0])+"",t;return{c(){e=L("p"),t=w(n)},m(o,l){$(o,e,l),k(e,t)},p(o,l){l&16&&n!==(n=lr(o[4][0])+"")&&R(t,n)},d(o){o&&m(e)}}}function oc(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[rc,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&48&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function lc(r){let e,n;return e=new rt({props:{id:tn,paint:{"circle-color":r[2],"circle-radius":to/2},layout:{visibility:r[1]},$$slots:{default:[oc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function sc(r){let e,n,t,o,l;function i(s){r[3](s)}let a={id:tn,$$slots:{right:[nc],default:[xu]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new te({props:a}),X.push(()=>Y(e,"checked",i)),o=new jt({props:{data:`${ae()}/v1/${tn}.geojson`,$$slots:{default:[lc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&34&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(g(e.$$.fragment,s),g(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&m(t),v(e,s),v(o,s)}}}let tn="railway_stations";function lr(r){return r.properties.name??"Unnamed railway station"}function ic(r,e,n){let t,o=Z.railway_stations,l=!1;function i(a){l=a,n(0,l)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=l?"visible":"none")},[l,t,o,i]}class ac extends z{constructor(e){super(),q(this,e,ic,sc,G,{})}}function fc(r){let e;return{c(){e=w("primary and secondary schools")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function uc(r){let e,n,t,o,l,i,a;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[fc]},$$scope:{ctx:r}}}),i=new ze({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),o=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),l=T(),h(i.$$.fragment)},m(s,f){$(s,e,f),k(e,n),b(t,e,null),k(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&1&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(g(t.$$.fragment,s),g(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(m(e),m(l)),v(t),v(i,s)}}}function cc(r){let e,n;return e=new sn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[uc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&1&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class pc extends z{constructor(e){super(),q(this,e,null,cc,G,{})}}function $c(r){let e;return{c(){e=w("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function mc(r){let e;return{c(){e=w("sports centres")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function gc(r){let e,n,t,o,l,i,a,s,f;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[$c]},$$scope:{ctx:r}}}),l=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[mc]},$$scope:{ctx:r}}}),s=new ze({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),o=w(" and "),h(l.$$.fragment),i=w(" data from OpenStreetMap (as of 9 August 2023)."),a=T(),h(s.$$.fragment)},m(u,c){$(u,e,c),k(e,n),b(t,e,null),k(e,o),b(l,e,null),k(e,i),$(u,a,c),b(s,u,c),f=!0},p(u,c){const p={};c&1&&(p.$$scope={dirty:c,ctx:u}),t.$set(p);const d={};c&1&&(d.$$scope={dirty:c,ctx:u}),l.$set(d)},i(u){f||(g(t.$$.fragment,u),g(l.$$.fragment,u),g(s.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),_(l.$$.fragment,u),_(s.$$.fragment,u),f=!1},d(u){u&&(m(e),m(a)),v(t),v(l),v(s,u)}}}function dc(r){let e,n;return e=new sn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[gc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&1&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class _c extends z{constructor(e){super(),q(this,e,null,dc,G,{})}}function sr(r){const e=Tc(r[6][0]);r[7]=e[0],r[8]=e[1],r[9]=e[2],r[10]=e[3]}function hc(r){let e;return{c(){e=w("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function bc(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function vc(r){let e;return{c(){e=w("methodology")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function wc(r){let e,n,t,o,l,i,a,s,f,u,c;return t=new V({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[bc]},$$scope:{ctx:r}}}),l=new V({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[vc]},$$scope:{ctx:r}}}),u=new Fe({}),{c(){e=L("p"),n=w("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),o=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(l.$$.fragment),i=w(" for details and caveats about the measurements."),a=T(),s=L("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,f=T(),h(u.$$.fragment)},m(p,d){$(p,e,d),k(e,n),b(t,e,null),k(e,o),b(l,e,null),k(e,i),$(p,a,d),$(p,s,d),$(p,f,d),b(u,p,d),c=!0},p(p,d){const C={};d&2048&&(C.$$scope={dirty:d,ctx:p}),t.$set(C);const y={};d&2048&&(y.$$scope={dirty:d,ctx:p}),l.$set(y)},i(p){c||(g(t.$$.fragment,p),g(l.$$.fragment,p),g(u.$$.fragment,p),c=!0)},o(p){_(t.$$.fragment,p),_(l.$$.fragment,p),_(u.$$.fragment,p),c=!1},d(p){p&&(m(e),m(a),m(s),m(f)),v(t),v(l),v(u,p)}}}function yc(r){let e,n,t;return n=new oe({props:{$$slots:{default:[wc]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),K(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&2048&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(g(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&m(e),v(n)}}}function ir(r){let e,n;return e=new Ge({props:{colorScale:r[2],limits:r[4]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:Q,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function kc(r){sr(r);let e,n=r[7]+"",t,o,l,i,a,s=r[8]+"",f,u,c,p,d,C=r[9]+"",y,O,S,P,B,N=r[10]+"",I;return{c(){e=L("h2"),t=w(n),o=T(),l=L("p"),i=w("Total motor vehicles (2022 AADF): "),a=L("b"),f=w(s),u=T(),c=L("p"),p=w("Total pedal cycles (2022 AADF): "),d=L("b"),y=w(C),O=T(),S=L("p"),P=w("Count method: "),B=L("b"),I=w(N)},m(D,A){$(D,e,A),k(e,t),$(D,o,A),$(D,l,A),k(l,i),k(l,a),k(a,f),$(D,u,A),$(D,c,A),k(c,p),k(c,d),k(d,y),$(D,O,A),$(D,S,A),k(S,P),k(S,B),k(B,I)},p(D,A){sr(D),A&64&&n!==(n=D[7]+"")&&R(t,n),A&64&&s!==(s=D[8]+"")&&R(f,s),A&64&&C!==(C=D[9]+"")&&R(y,C),A&64&&N!==(N=D[10]+"")&&R(I,N)},d(D){D&&(m(e),m(o),m(l),m(u),m(c),m(O),m(S))}}}function Sc(r){let e,n;return e=new se({props:{openOn:"hover",$$slots:{default:[kc,({features:t})=>({6:t}),({features:t})=>t?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2112&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Cc(r){let e,n;return e=new rt({props:{id:Mt,sourceLayer:Mt,paint:{"circle-color":Ae(["get","motor_vehicles_2022"],r[3],r[2]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1},layout:{visibility:r[1]},$$slots:{default:[Sc]},$$scope:{ctx:r}}}),e.$on("click",Lc),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&2048&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Oc(r){let e,n,t,o,l,i;function a(u){r[5](u)}let s={id:Mt,$$slots:{right:[yc],default:[hc]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new te({props:s}),X.push(()=>Y(e,"checked",a));let f=r[0]&&ir(r);return l=new $e({props:{url:`pmtiles://${ae()}/v1/${Mt}.pmtiles`,$$slots:{default:[Cc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),f&&f.c(),o=T(),h(l.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),f&&f.m(u,c),$(u,o,c),b(l,u,c),i=!0},p(u,[c]){const p={};c&2048&&(p.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,p.checked=u[0],J(()=>n=!1)),e.$set(p),u[0]?f?(f.p(u,c),c&1&&g(f,1)):(f=ir(u),f.c(),g(f,1),f.m(o.parentNode,o)):f&&(ne(),_(f,1,1,()=>{f=null}),re());const d={};c&2050&&(d.$$scope={dirty:c,ctx:u}),l.$set(d)},i(u){i||(g(e.$$.fragment,u),g(f),g(l.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),_(f),_(l.$$.fragment,u),i=!1},d(u){u&&(m(t),m(o)),v(e,u),f&&f.d(u),v(l,u)}}}let Mt="vehicle_counts";function Tc(r){let e=r.properties;return[e.location,e.motor_vehicles_2022.toLocaleString(),e.pedal_cycles_2022.toLocaleString(),e.method]}function Lc(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function Ac(r,e,n){let t,o=Z.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],i=["","40k","80k","120k","160k",""],a=!1;function s(f){a=f,n(0,a)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=a?"visible":"none")},[a,t,o,l,i,s]}class Pc extends z{constructor(e){super(),q(this,e,Ac,Oc,G,{})}}function Ec(r){let e,n,t,o,l,i,a,s;return e=new pc({}),t=new Qu({}),l=new _c({}),a=new ac({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),o=T(),h(l.$$.fragment),i=T(),h(a.$$.fragment)},m(f,u){b(e,f,u),$(f,n,u),b(t,f,u),$(f,o,u),b(l,f,u),$(f,i,u),b(a,f,u),s=!0},i(f){s||(g(e.$$.fragment,f),g(t.$$.fragment,f),g(l.$$.fragment,f),g(a.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(l.$$.fragment,f),_(a.$$.fragment,f),s=!1},d(f){f&&(m(n),m(o),m(i)),v(e,f),v(t,f),v(l,f),v(a,f)}}}function Nc(r){let e,n;return e=new gt({props:{small:!0,$$slots:{default:[Ec]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ic(r){let e,n,t,o,l,i,a,s,f,u;return e=new hf({}),t=new Lf({}),l=new sf({}),a=new Ru({}),f=new Pu({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),o=T(),h(l.$$.fragment),i=T(),h(a.$$.fragment),s=T(),h(f.$$.fragment)},m(c,p){b(e,c,p),$(c,n,p),b(t,c,p),$(c,o,p),b(l,c,p),$(c,i,p),b(a,c,p),$(c,s,p),b(f,c,p),u=!0},i(c){u||(g(e.$$.fragment,c),g(t.$$.fragment,c),g(l.$$.fragment,c),g(a.$$.fragment,c),g(f.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(l.$$.fragment,c),_(a.$$.fragment,c),_(f.$$.fragment,c),u=!1},d(c){c&&(m(n),m(o),m(i),m(s)),v(e,c),v(t,c),v(l,c),v(a,c),v(f,c)}}}function Dc(r){let e,n;return e=new gt({props:{small:!0,$$slots:{default:[Ic]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mc(r){let e,n,t,o,l,i,a,s,f,u;return e=new Ma({}),t=new Va({}),l=new Ui({}),a=new ua({}),f=new Sa({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),o=T(),h(l.$$.fragment),i=T(),h(a.$$.fragment),s=T(),h(f.$$.fragment)},m(c,p){b(e,c,p),$(c,n,p),b(t,c,p),$(c,o,p),b(l,c,p),$(c,i,p),b(a,c,p),$(c,s,p),b(f,c,p),u=!0},i(c){u||(g(e.$$.fragment,c),g(t.$$.fragment,c),g(l.$$.fragment,c),g(a.$$.fragment,c),g(f.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(l.$$.fragment,c),_(a.$$.fragment,c),_(f.$$.fragment,c),u=!1},d(c){c&&(m(n),m(o),m(i),m(s)),v(e,c),v(t,c),v(l,c),v(a,c),v(f,c)}}}function Fc(r){let e,n;return e=new gt({props:{small:!0,$$slots:{default:[Mc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function jc(r){let e,n,t,o;return e=new Ei({}),t=new xi({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},i(l){o||(g(e.$$.fragment,l),g(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&m(n),v(e,l),v(t,l)}}}function Bc(r){let e,n,t,o;return e=new fu({}),t=new xf({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},i(l){o||(g(e.$$.fragment,l),g(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&m(n),v(e,l),v(t,l)}}}function Hc(r){let e,n,t,o,l=nn()=="Private (development)",i,a;e=new Pc({}),t=new Uf({});let s=l&&Bc();return{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),o=T(),s&&s.c(),i=ge()},m(f,u){b(e,f,u),$(f,n,u),b(t,f,u),$(f,o,u),s&&s.m(f,u),$(f,i,u),a=!0},p:Q,i(f){a||(g(e.$$.fragment,f),g(t.$$.fragment,f),g(s),a=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(s),a=!1},d(f){f&&(m(n),m(o),m(i)),v(e,f),v(t,f),s&&s.d(f)}}}function Rc(r){let e,n,t,o,l;function i(s){r[4](s)}let a={displayEnableButton:!0};return r[1]!==void 0&&(a.isInactive=r[1]),e=new ro({props:a}),r[3](e),X.push(()=>Y(e,"isInactive",i)),o=new ei({}),{c(){h(e.$$.fragment),t=T(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,f){const u={};!n&&f&2&&(n=!0,u.isInactive=s[1],J(()=>n=!1)),e.$set(u)},i(s){l||(g(e.$$.fragment,s),g(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&m(t),r[3](null),v(e,s),v(o,s)}}}function Wc(r){let e,n,t,o,l,i,a,s,f,u,c,p,d,C,y,O;return e=new bu({}),t=new Te({props:{label:"Trip generators",$$slots:{default:[Nc]},$$scope:{ctx:r}}}),l=new Te({props:{label:"Existing infrastructure",$$slots:{default:[Dc]},$$scope:{ctx:r}}}),a=new Te({props:{label:"Boundaries",$$slots:{default:[Fc]},$$scope:{ctx:r}}}),f=new Te({props:{label:"Census",$$slots:{default:[jc]},$$scope:{ctx:r}}}),c=new Te({props:{label:"Other",$$slots:{default:[Hc]},$$scope:{ctx:r}}}),d=new Te({props:{label:"Tools",$$slots:{default:[Rc]},$$scope:{ctx:r}}}),y=new no({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),o=T(),h(l.$$.fragment),i=T(),h(a.$$.fragment),s=T(),h(f.$$.fragment),u=T(),h(c.$$.fragment),p=T(),h(d.$$.fragment),C=T(),h(y.$$.fragment)},m(S,P){b(e,S,P),$(S,n,P),b(t,S,P),$(S,o,P),b(l,S,P),$(S,i,P),b(a,S,P),$(S,s,P),b(f,S,P),$(S,u,P),b(c,S,P),$(S,p,P),b(d,S,P),$(S,C,P),b(y,S,P),O=!0},p(S,P){const B={};P&32&&(B.$$scope={dirty:P,ctx:S}),t.$set(B);const N={};P&32&&(N.$$scope={dirty:P,ctx:S}),l.$set(N);const I={};P&32&&(I.$$scope={dirty:P,ctx:S}),a.$set(I);const D={};P&32&&(D.$$scope={dirty:P,ctx:S}),f.$set(D);const A={};P&32&&(A.$$scope={dirty:P,ctx:S}),c.$set(A);const E={};P&35&&(E.$$scope={dirty:P,ctx:S}),d.$set(E);const M={};P&2&&(M.disabled=!S[1]),y.$set(M)},i(S){O||(g(e.$$.fragment,S),g(t.$$.fragment,S),g(l.$$.fragment,S),g(a.$$.fragment,S),g(f.$$.fragment,S),g(c.$$.fragment,S),g(d.$$.fragment,S),g(y.$$.fragment,S),O=!0)},o(S){_(e.$$.fragment,S),_(t.$$.fragment,S),_(l.$$.fragment,S),_(a.$$.fragment,S),_(f.$$.fragment,S),_(c.$$.fragment,S),_(d.$$.fragment,S),_(y.$$.fragment,S),O=!1},d(S){S&&(m(n),m(o),m(i),m(s),m(u),m(p),m(C)),v(e,S),v(t,S),v(l,S),v(a,S),v(f,S),v(c,S),v(d,S),v(y,S)}}}function Uc(r){let e,n,t,o;return e=new Te({props:{label:"Layers",open:!0,$$slots:{default:[Wc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(l,i){b(e,l,i),n=!0,t||(o=nt(window,"keydown",r[2]),t=!0)},p(l,[i]){const a={};i&35&&(a.$$scope={dirty:i,ctx:l}),e.$set(a)},i(l){n||(g(e.$$.fragment,l),n=!0)},o(l){_(e.$$.fragment,l),n=!1},d(l){v(e,l),t=!1,o()}}}function Gc(r,e,n){let t;pe(r,fn,s=>n(1,t=s));let o;function l(s){!t&&s.key=="Escape"&&(o.disableStreetView(),s.preventDefault())}function i(s){X[s?"unshift":"push"](()=>{o=s,n(0,o)})}function a(s){t=s,fn.set(t)}return[o,t,l,i,a]}class zc extends z{constructor(e){super(),q(this,e,Gc,Uc,G,{})}}function qc(r,e,n){let{loadFile:t}=e;return ot(async()=>{let l=await(await fetch(`${on()}/v1/random_schemes.geojson`)).text();t(l)}),r.$$set=o=>{"loadFile"in o&&n(0,t=o.loadFile)},[t]}class Vc extends z{constructor(e){super(),q(this,e,qc,null,G,{loadFile:0})}}function Xc(r){let e;return{c(){e=w("Show on map")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function Kc(r){let e;return{c(){e=w("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&m(e)}}}function Yc(r){let e,n,t=r[0].authority_or_region+"",o,l,i,a,s=r[0].capital_scheme_id+"",f,u,c,p,d=r[0].funding_programme+"",C,y,O,S,P,B,N;return S=new it({props:{$$slots:{default:[Xc]},$$scope:{ctx:r}}}),S.$on("click",r[3]),B=new it({props:{disabled:r[1],title:r[2],$$slots:{default:[Kc]},$$scope:{ctx:r}}}),B.$on("click",r[4]),{c(){e=L("p"),n=w("Authority or region: "),o=w(t),l=T(),i=L("p"),a=w("Capital scheme ID: "),f=w(s),u=T(),c=L("p"),p=w("Funding programme: "),C=w(d),y=T(),O=L("div"),h(S.$$.fragment),P=T(),h(B.$$.fragment),K(O,"class","govuk-button-group")},m(I,D){$(I,e,D),k(e,n),k(e,o),$(I,l,D),$(I,i,D),k(i,a),k(i,f),$(I,u,D),$(I,c,D),k(c,p),k(c,C),$(I,y,D),$(I,O,D),b(S,O,null),k(O,P),b(B,O,null),N=!0},p(I,D){(!N||D&1)&&t!==(t=I[0].authority_or_region+"")&&R(o,t),(!N||D&1)&&s!==(s=I[0].capital_scheme_id+"")&&R(f,s),(!N||D&1)&&d!==(d=I[0].funding_programme+"")&&R(C,d);const A={};D&256&&(A.$$scope={dirty:D,ctx:I}),S.$set(A);const E={};D&256&&(E.$$scope={dirty:D,ctx:I}),B.$set(E)},i(I){N||(g(S.$$.fragment,I),g(B.$$.fragment,I),N=!0)},o(I){_(S.$$.fragment,I),_(B.$$.fragment,I),N=!1},d(I){I&&(m(e),m(l),m(i),m(u),m(c),m(y),m(O)),v(S),v(B)}}}function Jc(r){let e,n;return e=new Te({props:{label:`${r[0].scheme_reference}: ${r[0].num_features} features`,$$slots:{default:[Yc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&1&&(l.label=`${t[0].scheme_reference}: ${t[0].num_features} features`),o&257&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zc(r,e,n){let t,o;pe(r,Qe,c=>n(6,t=c)),pe(r,lt,c=>n(7,o=c));let{scheme:l}=e,{authorityNames:i}=e,a=!i.has(l.authority_or_region),s=a?"This scheme doesn't have an authority specified correctly, so you can't edit this scheme. We're working to fix this problem.":void 0;function f(){let c={type:"FeatureCollection",features:t.features.filter(p=>p.properties.scheme_reference==l.scheme_reference)};o==null||o.fitBounds(Kr(c),{padding:20,animate:!1})}function u(){let c={type:"FeatureCollection",features:t.features.filter(d=>d.properties.scheme_reference==l.scheme_reference)},p=l.authority_or_region;window.localStorage.setItem(p,JSON.stringify(c)),window.open(`scheme.html?authority=${l.authority_or_region}`,"_blank")}return r.$$set=c=>{"scheme"in c&&n(0,l=c.scheme),"authorityNames"in c&&n(5,i=c.authorityNames)},[l,a,s,f,u,i]}class Qc extends z{constructor(e){super(),q(this,e,Zc,Jc,G,{scheme:0,authorityNames:5})}}const xc=["Adur","Allerdale","Amber Valley","Arun","Ashfield","Ashford","Babergh","Barking and Dagenham","Barnet","Barnsley","Barrow-in-Furness","Basildon","Basingstoke and Deane","Bassetlaw","Bath and North East Somerset","Bedford","Bexley","Birmingham","Blaby","Blackburn with Darwen","Blackpool","Bolsover","Bolton","Boston","Bournemouth, Christchurch and Poole","Bracknell Forest","Bradford","Braintree","Breckland","Brent","Brentwood","Brighton and Hove","Bristol, City of","Broadland","Bromley","Bromsgrove","Broxbourne","Broxtowe","Buckinghamshire","Burnley","Bury","Calderdale","Cambridge","Cambridgeshire and Peterborough Combined Authority","Camden","Cannock Chase","Canterbury","Carlisle","Castle Point","Central Bedfordshire","Charnwood","Chelmsford","Cheltenham","Cherwell","Cheshire East","Cheshire West and Chester","Chesterfield","Chichester","Chorley","City of London","Colchester","Copeland","Cornwall","Cotswold","County Durham","Coventry","Craven","Crawley","Croydon","Cumbria","Dacorum","Darlington","Dartford","Derby","Derbyshire","Derbyshire Dales","Devon","Doncaster","Dorset","Dover","Dudley","Ealing","Eastbourne","East Cambridgeshire","East Devon","East Hampshire","East Hertfordshire","Eastleigh","East Lindsey","East Riding of Yorkshire","East Staffordshire","East Suffolk","East Sussex","Eden","Elmbridge","Enfield","Epping Forest","Epsom and Ewell","Erewash","Essex","Exeter","Fareham","Fenland","Folkestone and Hythe","Forest of Dean","Fylde","Gateshead","Gedling","Gloucester","Gloucestershire","Gosport","Gravesham","Greater London","Greater Manchester Combined Authority","Great Yarmouth","Greenwich","Guildford","Hackney","Halton","Hambleton","Hammersmith and Fulham","Hampshire","Harborough","Haringey","Harlow","Harrogate","Harrow","Hart","Hartlepool","Hastings","Havant","Havering","Herefordshire","Herefordshire, County of","Hertfordshire","Hertsmere","High Peak","Hillingdon","Hinckley and Bosworth","Horsham","Hounslow","Huntingdonshire","Hyndburn","Ipswich","Isle of Wight","Isles of Scilly","Islington","Kensington and Chelsea","Kent","King's Lynn and West Norfolk","Kingston upon Hull","Kingston upon Hull, City of","Kingston upon Thames","Kirklees","Knowsley","Lambeth","Lancashire","Lancaster","Leeds","Leicester","Leicestershire","Lewes","Lewisham","Lichfield","Lincoln","Lincolnshire","Liverpool","Liverpool City Region Combined Authority","Luton","Maidstone","Maldon","Malvern Hills","Manchester","Mansfield","Medway","Melton","Mendip","Merton","Mid Devon","Middlesbrough","Mid Suffolk","Mid Sussex","Milton Keynes","Mole Valley","Newark and Sherwood","Newcastle-under-Lyme","Newcastle upon Tyne","New Forest","Newham","Norfolk","North Devon","North East Derbyshire","North East Joint Transport Committee","North East Lincolnshire","North Hertfordshire","North Kesteven","North Lincolnshire","North Norfolk","North Northamptonshire","North Somerset","North Tyneside","Northumberland","North Warwickshire","North West Leicestershire","North Yorkshire","Norwich","Nottingham","Nottinghamshire","Nuneaton and Bedworth","Oadby and Wigston","Oldham","Oxford","Oxfordshire","Pendle","Peterborough","Plymouth","Portsmouth","Preston","Reading","Redbridge","Redcar and Cleveland","Redditch","Reigate and Banstead","Ribble Valley","Richmondshire","Richmond upon Thames","Rochdale","Rochford","Rossendale","Rother","Rotherham","Rugby","Runnymede","Rushcliffe","Rushmoor","Rutland","Ryedale","Salford","Sandwell","Scarborough","Sedgemoor","Sefton","Selby","Sevenoaks","Sheffield","Sheffield City Region Combined Authority","Shropshire","Slough","Solihull","Somerset","Somerset West and Taunton","Southampton","South Cambridgeshire","South Derbyshire","Southend-on-Sea","South Gloucestershire","South Hams","South Holland","South Kesteven","South Lakeland","South Norfolk","South Oxfordshire","South Ribble","South Somerset","South Staffordshire","South Tyneside","Southwark","Spelthorne","Stafford","Staffordshire","Staffordshire Moorlands","St Albans","Stevenage","St. Helens","Stockport","Stockton-on-Tees","Stoke-on-Trent","Stratford-on-Avon","Stroud","Suffolk","Sunderland","Surrey","Surrey Heath","Sutton","Swale","Swindon","Tameside","Tamworth","Tandridge","Tees Valley Combined Authority","Teignbridge","Telford and Wrekin","Tendring","Test Valley","Tewkesbury","Thanet","Three Rivers","Thurrock","Tonbridge and Malling","Torbay","Torridge","Tower Hamlets","Trafford","Tunbridge Wells","Uttlesford","Vale of White Horse","Wakefield","Walsall","Waltham Forest","Wandsworth","Warrington","Warwick","Warwickshire","Watford","Waverley","Wealden","Welwyn Hatfield","West Berkshire","West Devon","West Lancashire","West Lindsey","West Midlands ITA","Westminster","West Northamptonshire","West of England Combined Authority","West Oxfordshire","West Suffolk","West Sussex","West Yorkshire Combined Authority","Wigan","Wiltshire","Winchester","Windsor and Maidenhead","Wirral","Woking","Wokingham","Wolverhampton","Worcester","Worcestershire","Worthing","Wychavon","Wyre","Wyre Forest","York"];function ar(r,e,n){const t=r.slice();return t[13]=e[n],t}function ep(r){let e,n;return e=new Vc({props:{loadFile:r[7]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:Q,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fr(r){let e,n,t,o;function l(s){r[9](s)}function i(s){r[10](s)}let a={schemes:r[1]};return r[2]!==void 0&&(a.schemesToBeShown=r[2]),r[3]!==void 0&&(a.filterText=r[3]),e=new zs({props:a}),X.push(()=>Y(e,"schemesToBeShown",l)),X.push(()=>Y(e,"filterText",i)),{c(){h(e.$$.fragment)},m(s,f){b(e,s,f),o=!0},p(s,f){const u={};f&2&&(u.schemes=s[1]),!n&&f&4&&(n=!0,u.schemesToBeShown=s[2],J(()=>n=!1)),!t&&f&8&&(t=!0,u.filterText=s[3],J(()=>t=!1)),e.$set(u)},i(s){o||(g(e.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),o=!1},d(s){v(e,s)}}}function ur(r){let e,n;return e=new Qc({props:{scheme:r[13],authorityNames:r[6]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.scheme=t[13]),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function cr(r){let e=r[2].has(r[13].scheme_reference),n,t,o=e&&ur(r);return{c(){o&&o.c(),n=ge()},m(l,i){o&&o.m(l,i),$(l,n,i),t=!0},p(l,i){i&6&&(e=l[2].has(l[13].scheme_reference)),e?o?(o.p(l,i),i&6&&g(o,1)):(o=ur(l),o.c(),g(o,1),o.m(n.parentNode,n)):o&&(ne(),_(o,1,1,()=>{o=null}),re())},i(l){t||(g(o),t=!0)},o(l){_(o),t=!1},d(l){l&&m(n),o&&o.d(l)}}}function tp(r){let e,n,t,o,l,i,a,s,f,u,c=nn()=="Private (development)",p,d,C,y,O,S,P,B;l=new uo({props:{boundaryGeojson:r[5]}}),a=new Eo({}),f=new Yr({});let N=c&&ep(r);d=new po({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[7]}}),y=new dr({props:{errorMessage:r[0]}});let I=r[1].size>0&&fr(r),D=Ne(r[1].values()),A=[];for(let M=0;M<D.length;M+=1)A[M]=cr(ar(r,D,M));const E=M=>_(A[M],1,1,()=>{A[M]=null});return{c(){e=L("div"),n=L("div"),t=L("h1"),t.textContent="Browse schemes",o=T(),h(l.$$.fragment),i=T(),h(a.$$.fragment),s=T(),h(f.$$.fragment),u=T(),N&&N.c(),p=T(),h(d.$$.fragment),C=T(),h(y.$$.fragment),O=T(),I&&I.c(),S=T(),P=L("ul");for(let M=0;M<A.length;M+=1)A[M].c();Ie(n,"display","flex"),Ie(n,"justify-content","space-between"),K(e,"slot","sidebar"),K(e,"class","govuk-prose")},m(M,H){$(M,e,H),k(e,n),k(n,t),k(n,o),b(l,n,null),k(e,i),b(a,e,null),k(e,s),b(f,e,null),k(e,u),N&&N.m(e,null),k(e,p),b(d,e,null),k(e,C),b(y,e,null),k(e,O),I&&I.m(e,null),k(e,S),k(e,P);for(let F=0;F<A.length;F+=1)A[F]&&A[F].m(P,null);B=!0},p(M,H){const F={};H&32&&(F.boundaryGeojson=M[5]),l.$set(F),c&&N.p(M,H);const W={};if(H&1&&(W.errorMessage=M[0]),y.$set(W),M[1].size>0?I?(I.p(M,H),H&2&&g(I,1)):(I=fr(M),I.c(),g(I,1),I.m(e,S)):I&&(ne(),_(I,1,1,()=>{I=null}),re()),H&70){D=Ne(M[1].values());let U;for(U=0;U<D.length;U+=1){const le=ar(M,D,U);A[U]?(A[U].p(le,H),g(A[U],1)):(A[U]=cr(le),A[U].c(),g(A[U],1),A[U].m(P,null))}for(ne(),U=D.length;U<A.length;U+=1)E(U);re()}},i(M){if(!B){g(l.$$.fragment,M),g(a.$$.fragment,M),g(f.$$.fragment,M),g(N),g(d.$$.fragment,M),g(y.$$.fragment,M),g(I);for(let H=0;H<D.length;H+=1)g(A[H]);B=!0}},o(M){_(l.$$.fragment,M),_(a.$$.fragment,M),_(f.$$.fragment,M),_(N),_(d.$$.fragment,M),_(y.$$.fragment,M),_(I),A=A.filter(Boolean);for(let H=0;H<A.length;H+=1)_(A[H]);B=!1},d(M){M&&m(e),v(l),v(a),v(f),N&&N.d(),v(d),v(y),I&&I.d(),vt(A,M)}}}function np(r){let e,n,t,o,l,i,a,s,f,u,c;return e=new co({props:{colorInterventions:hr("v1")}}),t=new Bt({props:{layer:"interventions-points",tooltip:r[8],clickable:!1}}),l=new Bt({props:{layer:"interventions-lines",tooltip:r[8],clickable:!1}}),a=new Bt({props:{layer:"interventions-polygons",tooltip:r[8],clickable:!1}}),u=new zc({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),o=T(),h(l.$$.fragment),i=T(),h(a.$$.fragment),s=T(),f=L("div"),h(u.$$.fragment),K(f,"class","top-right svelte-u44ed2")},m(p,d){b(e,p,d),$(p,n,d),b(t,p,d),$(p,o,d),b(l,p,d),$(p,i,d),b(a,p,d),$(p,s,d),$(p,f,d),b(u,f,null),c=!0},p:Q,i(p){c||(g(e.$$.fragment,p),g(t.$$.fragment,p),g(l.$$.fragment,p),g(a.$$.fragment,p),g(u.$$.fragment,p),c=!0)},o(p){_(e.$$.fragment,p),_(t.$$.fragment,p),_(l.$$.fragment,p),_(a.$$.fragment,p),_(u.$$.fragment,p),c=!1},d(p){p&&(m(n),m(o),m(i),m(s),m(f)),v(e,p),v(t,p),v(l,p),v(a,p),v(u)}}}function rp(r){let e,n,t;return n=new lo({props:{style:r[4],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[np]},$$scope:{ctx:r}}}),{c(){e=L("div"),h(n.$$.fragment),K(e,"slot","main")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&16&&(i.style=o[4]),l&65536&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(g(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&m(e),v(n)}}}function op(r){let e,n;return e=new oo({props:{$$slots:{main:[rp],sidebar:[tp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&65599&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function lp(r,e,n){let t,o;pe(r,un,O=>n(4,t=O)),pe(r,Qe,O=>n(5,o=O));let l=new Set(xc);ot(()=>{Jr()});const i=new URLSearchParams(window.location.search);un.set(i.get("style")||"dataviz");let a="",s=new Map,f=new Set,u="";Ft(()=>{Qe.set(rn())});function c(O){try{let S=JSON.parse(O);n(1,s=Ns(S)),Qe.set(S),n(0,a="")}catch(S){n(0,a=`The file you loaded is broken: ${S}`)}}function p(O){let S=O.properties;var P='<div style="max-width: 30vw;">';return P+=`<h2>${d(S.name)} (${S.intervention_type})</h2>`,P+=`<p>Scheme reference: ${S.scheme_reference}</p>`,S.length_meters&&(P+=`<p>Length: ${Zr(S.length_meters)}</p>`),S.description&&(P+=`<p>${d(S.description)}</p>`),P+="</div>",P}function d(O){return u?O.replace(new RegExp(u,"gi"),S=>`<mark>${S}</mark>`):O}function C(O){f=O,n(2,f)}function y(O){u=O,n(3,u)}return[a,s,f,u,t,o,l,c,p,C,y]}class sp extends z{constructor(e){super(),q(this,e,lp,op,G,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new sp({target:document.getElementById("app")});
