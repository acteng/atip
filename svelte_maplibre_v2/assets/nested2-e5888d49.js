import{S as G,i as V,s as z,M as Xr,b as X,c as Y,e as M,d as L,g as h,av as Kr,h as Z,j as $,k as T,m as b,w as ut,l as J,t as m,n as _,p as d,q as v,aH as Re,aI as We,aJ as ze,aK as Ue,a2 as me,y as te,o as ne,H as Zr,N as oe,a5 as ct,aQ as nt,x,aR as ce,aS as Ze,aT as Yr,aU as Jr,aV as Qr,r as pt,u as y,f as ln,am as xr,C as mt,ao as kr,T as st,F as Sr,a as _t,v as $n,I as U,B as Yt,aA as eo,ax as je,aL as to,aM as no,ad as ro,_ as sn,P as oo,Y as lo,aP as K,an as He,ay as Tt,aW as pe,aX as Ee,R as Cr,aY as Tr,aZ as an,a_ as so,Z as dn,E as Lr,a$ as gn,D as io,aO as _n,L as ao,z as fo,aE as uo}from"./index-95bbfd7d.js";import{g as $t,u as co,e as Or,m as po,f as Lt,C as Pe,b as wt,d as ie,c as mo,a as $o,B as go,S as _o,L as ho,M as bo}from"./StreetViewController-02237207.js";import{L as vo,h as hn,f as Ar,l as wo,C as ke,Z as yo,I as ko}from"./index-d9ac89d4.js";import{I as dt}from"./InteractiveLayer-a269a522.js";import{F as So}from"./FileInput-1f162409.js";const Co="/atip/svelte_maplibre_v2/assets/help-d011708a.svg";function To(r){let e,n;const t=r[1].default,o=Re(t,r,r[4],null);return{c(){e=M("div"),o&&o.c(),Z(e,"class","govuk-prose")},m(l,i){$(l,e,i),o&&o.m(e,null),n=!0},p(l,i){o&&o.p&&(!n||i&16)&&We(o,t,l,l[4],n?Ue(t,l[4],i,null):ze(l[4]),null)},i(l){n||(m(o,l),n=!0)},o(l){_(o,l),n=!1},d(l){l&&d(e),o&&o.d(l)}}}function Lo(r){let e,n,t,o,l,i,a,s,f;function u(p){r[3](p)}let c={title:"Help",$$slots:{default:[To]},$$scope:{ctx:r}};return r[0]!==void 0&&(c.open=r[0]),l=new Xr({props:c}),X.push(()=>Y(l,"open",u)),{c(){e=M("button"),n=M("img"),o=L(),h(l.$$.fragment),Kr(n.src,t=Co)||Z(n,"src",t),Z(n,"title","Help"),Z(n,"alt","Help"),Z(e,"class","svelte-7d9d1l")},m(p,g){$(p,e,g),T(e,n),$(p,o,g),b(l,p,g),a=!0,s||(f=ut(e,"click",r[2]),s=!0)},p(p,[g]){const S={};g&16&&(S.$$scope={dirty:g,ctx:p}),!i&&g&1&&(i=!0,S.open=p[0],J(()=>i=!1)),l.$set(S)},i(p){a||(m(l.$$.fragment,p),a=!0)},o(p){_(l.$$.fragment,p),a=!1},d(p){p&&(d(e),d(o)),v(l,p),s=!1,f()}}}function Oo(r,e,n){let{$$slots:t={},$$scope:o}=e,l=!1;const i=()=>n(0,l=!0);function a(s){l=s,n(0,l)}return r.$$set=s=>{"$$scope"in s&&n(4,o=s.$$scope)},[l,t,i,a,o]}class ae extends G{constructor(e){super(),V(this,e,Oo,Lo,z,{})}}function bn(r){let e;return n=>{if(n)for(let t in n){let o=e==null?void 0:e[t],l=n[t];o!==l&&r(t,l,o)}else if(e)for(let t in e)r(t,void 0,e[t]);e=n}}function Ao(r,...e){let n=[r];for(let t of e)if(t)Array.isArray(t)&&t[0]===r?n.push(...t.slice(1)):n.push(t);else continue;if(n.length!==1)return n.length===2?n[1]:n}function Io(r){return r===!0?["has","point_count"]:r===!1?["!",["has","point_count"]]:void 0}function fe(r,e){return["case",["boolean",["feature-state","hover"],!1],e,r]}var Ot=Po;function Po(r){var e,n,t;if(r){if(Array.isArray(r)){for(e=[],n=r.length,t=0;t<n;t++){var o=r[t];o!=null&&e.push(o)}return e}if(typeof r=="object"){e={};var l=Object.keys(r);for(n=l.length,t=0;t<n;t++){var i=l[t],a=r[i];a!=null&&(e[i]=a)}return e}}}function vn(r){let e=r[0],n,t,o=wn(r);return{c(){o.c(),n=me()},m(l,i){o.m(l,i),$(l,n,i),t=!0},p(l,i){i[0]&1&&z(e,e=l[0])?(te(),_(o,1,1,x),ne(),o=wn(l),o.c(),m(o,1),o.m(n.parentNode,n)):o.p(l,i)},i(l){t||(m(o),t=!0)},o(l){_(o),t=!1},d(l){l&&d(n),o.d(l)}}}function wn(r){let e;const n=r[35].default,t=Re(n,r,r[34],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l[1]&8)&&We(t,n,o,o[34],e?Ue(n,o[34],l,null):ze(o[34]),null)},i(o){e||(m(t,o),e=!0)},o(o){_(t,o),e=!1},d(o){t&&t.d(o)}}}function Mo(r){let e,n,t=r[0]&&vn(r);return{c(){t&&t.c(),e=me()},m(o,l){t&&t.m(o,l),$(o,e,l),n=!0},p(o,l){o[0]?t?(t.p(o,l),l[0]&1&&m(t,1)):(t=vn(o),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(te(),_(t,1,1,()=>{t=null}),ne())},i(o){n||(m(t),n=!0)},o(o){_(t),n=!1},d(o){o&&d(e),t&&t.d(o)}}}function Eo(r,e,n){let t,o,l,i,a,s,f,u,c,p,g,S,{$$slots:w={},$$scope:C}=e,{id:k=$t("layer")}=e,{source:I=void 0}=e,{sourceLayer:B=void 0}=e,{beforeId:P=void 0}=e,{beforeLayerType:N=void 0}=e,{type:F}=e,{paint:A=void 0}=e,{layout:E=void 0}=e,{filter:D=void 0}=e,{applyToClusters:O=void 0}=e,{minzoom:H=void 0}=e,{maxzoom:W=void 0}=e,{manageHoverState:q=!1}=e,{hovered:le=null}=e,{hoverCursor:Ne=void 0}=e,{eventsIfTopMost:re=!1}=e;const $e=Zr(),{map:Se,source:be,self:ve,minzoom:Ve,maxzoom:Le,eventTopMost:De}=co();oe(r,Se,R=>n(30,c=R)),oe(r,be,R=>n(31,p=R)),oe(r,ve,R=>n(0,u=R)),oe(r,Ve,R=>n(33,S=R)),oe(r,Le,R=>n(32,g=R)),ct(()=>{u&&c&&(c==null||c.removeLayer(u))});let ge;return r.$$set=R=>{"id"in R&&n(7,k=R.id),"source"in R&&n(8,I=R.source),"sourceLayer"in R&&n(9,B=R.sourceLayer),"beforeId"in R&&n(10,P=R.beforeId),"beforeLayerType"in R&&n(11,N=R.beforeLayerType),"type"in R&&n(12,F=R.type),"paint"in R&&n(13,A=R.paint),"layout"in R&&n(14,E=R.layout),"filter"in R&&n(15,D=R.filter),"applyToClusters"in R&&n(16,O=R.applyToClusters),"minzoom"in R&&n(17,H=R.minzoom),"maxzoom"in R&&n(18,W=R.maxzoom),"manageHoverState"in R&&n(19,q=R.manageHoverState),"hovered"in R&&n(6,le=R.hovered),"hoverCursor"in R&&n(20,Ne=R.hoverCursor),"eventsIfTopMost"in R&&n(21,re=R.eventsIfTopMost),"$$scope"in R&&n(34,C=R.$$scope)},r.$$.update=()=>{if(r.$$.dirty[0]&65536&&n(29,t=Io(O)),r.$$.dirty[0]&536903680&&n(28,o=Ao("all",t,D)),r.$$.dirty[0]&131072|r.$$.dirty[1]&4&&n(24,l=H??S),r.$$.dirty[0]&262144|r.$$.dirty[1]&2&&n(23,i=W??g),r.$$.dirty[0]&256|r.$$.dirty[1]&1&&n(27,a=I||p),r.$$.dirty[0]&1509457537&&c&&u!==k&&a){let R=function(se){var qe,Xe;if(!u||!c||re&&De(se)!==u)return;let j=se.features??[],Ce=(Xe=(qe=j[0])==null?void 0:qe.properties)==null?void 0:Xe.cluster_id,Te={event:se,map:c,clusterId:Ce,layer:u,source:a,features:j};$e(se.type,Te)},Oe=P;if(!P&&N){let se=c.getStyle().layers,j=typeof N=="function"?N:Te=>Te.type===N,Ce=se==null?void 0:se.find(j);Ce&&(Oe=Ce.id)}nt(ve,u=k,u),c.addLayer(Ot({id:u,type:F,source:a,"source-layer":B,filter:o,paint:A,layout:E,minzoom:l,maxzoom:i}),Oe),c.on("click",u,R),c.on("dblclick",u,R),c.on("contextmenu",u,R),c.on("mouseenter",u,se=>{var qe,Xe;if(!u||!c||re&&De(se)!==u)return;Ne&&(c.getCanvas().style.cursor=Ne);let j=se.features??[];n(6,le=j[0]??null);let Ce=(Xe=(qe=j[0])==null?void 0:qe.properties)==null?void 0:Xe.cluster_id;$e("mouseenter",{event:se,map:c,clusterId:Ce,layer:u,source:a,features:j})}),c.on("mousemove",u,se=>{var qe,Xe,mn;if(re&&De(se)!==u)return;let j=se.features??[],Ce=(Xe=(qe=j[0])==null?void 0:qe.properties)==null?void 0:Xe.cluster_id,Te=(mn=j[0])==null?void 0:mn.id;Te!==ge&&(q&&(ge!==void 0&&(c==null||c.setFeatureState({source:a,id:ge},{hover:!1})),c==null||c.setFeatureState({source:a,id:Te},{hover:!0})),n(22,ge=Te),n(6,le=j[0]??null)),$e("mousemove",{event:se,map:c,clusterId:Ce,layer:u,source:a,features:j})}),c.on("mouseleave",u,se=>{!u||!c||(Ne&&(c.getCanvas().style.cursor=""),n(6,le=null),q&&ge!==void 0&&(c==null||c.setFeatureState({source:a,id:ge},{hover:!1}),n(22,ge=void 0)),$e("mouseleave",{map:c,layer:u,source:a}))})}r.$$.dirty[0]&1073741825&&n(26,s=u?bn((R,Oe)=>c==null?void 0:c.setPaintProperty(u,R,Oe)):void 0),r.$$.dirty[0]&1073741825&&n(25,f=u?bn((R,Oe)=>c==null?void 0:c.setLayoutProperty(u,R,Oe)):void 0),r.$$.dirty[0]&67117056&&(s==null||s(A)),r.$$.dirty[0]&33570816&&(f==null||f(E)),r.$$.dirty[0]&1098907649&&u&&(c==null||c.setLayerZoomRange(u,l,i))},[u,Se,be,ve,Ve,Le,le,k,I,B,P,N,F,A,E,D,O,H,W,q,Ne,re,ge,i,l,f,s,a,o,t,c,p,g,S,C,w]}class fn extends G{constructor(e){super(),V(this,e,Eo,Mo,z,{id:7,source:8,sourceLayer:9,beforeId:10,beforeLayerType:11,type:12,paint:13,layout:14,filter:15,applyToClusters:16,minzoom:17,maxzoom:18,manageHoverState:19,hovered:6,hoverCursor:20,eventsIfTopMost:21},null,[-1,-1])}}function No(r){let e;const n=r[15].default,t=Re(n,r,r[23],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&8388608)&&We(t,n,o,o[23],e?Ue(n,o[23],l,null):ze(o[23]),null)},i(o){e||(m(t,o),e=!0)},o(o){_(t,o),e=!1},d(o){t&&t.d(o)}}}function Do(r){let e,n,t;function o(i){r[16](i)}let l={id:r[1],type:"circle",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],$$slots:{default:[No]},$$scope:{ctx:r}};return r[0]!==void 0&&(l.hovered=r[0]),e=new fn({props:l}),X.push(()=>Y(e,"hovered",o)),e.$on("click",r[17]),e.$on("dblclick",r[18]),e.$on("contextmenu",r[19]),e.$on("mouseenter",r[20]),e.$on("mousemove",r[21]),e.$on("mouseleave",r[22]),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,[a]){const s={};a&2&&(s.id=i[1]),a&4&&(s.source=i[2]),a&8&&(s.sourceLayer=i[3]),a&16&&(s.beforeId=i[4]),a&32&&(s.beforeLayerType=i[5]),a&64&&(s.paint=i[6]),a&128&&(s.layout=i[7]),a&256&&(s.filter=i[8]),a&512&&(s.applyToClusters=i[9]),a&1024&&(s.minzoom=i[10]),a&2048&&(s.maxzoom=i[11]),a&4096&&(s.hoverCursor=i[12]),a&8192&&(s.manageHoverState=i[13]),a&16384&&(s.eventsIfTopMost=i[14]),a&8388608&&(s.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,s.hovered=i[0],J(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Fo(r,e,n){let{$$slots:t={},$$scope:o}=e,{id:l=$t("circle")}=e,{source:i=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:f=void 0}=e,{paint:u}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{applyToClusters:g=void 0}=e,{minzoom:S=void 0}=e,{maxzoom:w=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:k=!1}=e,{hovered:I=null}=e,{eventsIfTopMost:B=!1}=e;function P(H){I=H,n(0,I)}function N(H){ce.call(this,r,H)}function F(H){ce.call(this,r,H)}function A(H){ce.call(this,r,H)}function E(H){ce.call(this,r,H)}function D(H){ce.call(this,r,H)}function O(H){ce.call(this,r,H)}return r.$$set=H=>{"id"in H&&n(1,l=H.id),"source"in H&&n(2,i=H.source),"sourceLayer"in H&&n(3,a=H.sourceLayer),"beforeId"in H&&n(4,s=H.beforeId),"beforeLayerType"in H&&n(5,f=H.beforeLayerType),"paint"in H&&n(6,u=H.paint),"layout"in H&&n(7,c=H.layout),"filter"in H&&n(8,p=H.filter),"applyToClusters"in H&&n(9,g=H.applyToClusters),"minzoom"in H&&n(10,S=H.minzoom),"maxzoom"in H&&n(11,w=H.maxzoom),"hoverCursor"in H&&n(12,C=H.hoverCursor),"manageHoverState"in H&&n(13,k=H.manageHoverState),"hovered"in H&&n(0,I=H.hovered),"eventsIfTopMost"in H&&n(14,B=H.eventsIfTopMost),"$$scope"in H&&n(23,o=H.$$scope)},[I,l,i,a,s,f,u,c,p,g,S,w,C,k,B,t,P,N,F,A,E,D,O,o]}class zt extends G{constructor(e){super(),V(this,e,Fo,Do,z,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14})}}function jo(r){let e;const n=r[14].default,t=Re(n,r,r[22],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&4194304)&&We(t,n,o,o[22],e?Ue(n,o[22],l,null):ze(o[22]),null)},i(o){e||(m(t,o),e=!0)},o(o){_(t,o),e=!1},d(o){t&&t.d(o)}}}function Bo(r){let e,n,t;function o(i){r[15](i)}let l={id:r[1],type:"fill",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],minzoom:r[9],maxzoom:r[10],hoverCursor:r[11],manageHoverState:r[12],eventsIfTopMost:r[13],$$slots:{default:[jo]},$$scope:{ctx:r}};return r[0]!==void 0&&(l.hovered=r[0]),e=new fn({props:l}),X.push(()=>Y(e,"hovered",o)),e.$on("click",r[16]),e.$on("dblclick",r[17]),e.$on("contextmenu",r[18]),e.$on("mouseenter",r[19]),e.$on("mousemove",r[20]),e.$on("mouseleave",r[21]),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,[a]){const s={};a&2&&(s.id=i[1]),a&4&&(s.source=i[2]),a&8&&(s.sourceLayer=i[3]),a&16&&(s.beforeId=i[4]),a&32&&(s.beforeLayerType=i[5]),a&64&&(s.paint=i[6]),a&128&&(s.layout=i[7]),a&256&&(s.filter=i[8]),a&512&&(s.minzoom=i[9]),a&1024&&(s.maxzoom=i[10]),a&2048&&(s.hoverCursor=i[11]),a&4096&&(s.manageHoverState=i[12]),a&8192&&(s.eventsIfTopMost=i[13]),a&4194304&&(s.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,s.hovered=i[0],J(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Ho(r,e,n){let{$$slots:t={},$$scope:o}=e,{id:l=$t("fill")}=e,{source:i=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:f=void 0}=e,{paint:u}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{minzoom:g=void 0}=e,{maxzoom:S=void 0}=e,{hoverCursor:w=void 0}=e,{manageHoverState:C=!1}=e,{hovered:k=null}=e,{eventsIfTopMost:I=!1}=e;function B(O){k=O,n(0,k)}function P(O){ce.call(this,r,O)}function N(O){ce.call(this,r,O)}function F(O){ce.call(this,r,O)}function A(O){ce.call(this,r,O)}function E(O){ce.call(this,r,O)}function D(O){ce.call(this,r,O)}return r.$$set=O=>{"id"in O&&n(1,l=O.id),"source"in O&&n(2,i=O.source),"sourceLayer"in O&&n(3,a=O.sourceLayer),"beforeId"in O&&n(4,s=O.beforeId),"beforeLayerType"in O&&n(5,f=O.beforeLayerType),"paint"in O&&n(6,u=O.paint),"layout"in O&&n(7,c=O.layout),"filter"in O&&n(8,p=O.filter),"minzoom"in O&&n(9,g=O.minzoom),"maxzoom"in O&&n(10,S=O.maxzoom),"hoverCursor"in O&&n(11,w=O.hoverCursor),"manageHoverState"in O&&n(12,C=O.manageHoverState),"hovered"in O&&n(0,k=O.hovered),"eventsIfTopMost"in O&&n(13,I=O.eventsIfTopMost),"$$scope"in O&&n(22,o=O.$$scope)},[k,l,i,a,s,f,u,c,p,g,S,w,C,I,t,B,P,N,F,A,E,D,o]}class Je extends G{constructor(e){super(),V(this,e,Ho,Bo,z,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13})}}function yn(r){let e=r[0],n,t,o=kn(r);return{c(){o.c(),n=me()},m(l,i){o.m(l,i),$(l,n,i),t=!0},p(l,i){i&1&&z(e,e=l[0])?(te(),_(o,1,1,x),ne(),o=kn(l),o.c(),m(o,1),o.m(n.parentNode,n)):o.p(l,i)},i(l){t||(m(o),t=!0)},o(l){_(o),t=!1},d(l){l&&d(n),o.d(l)}}}function kn(r){let e;const n=r[15].default,t=Re(n,r,r[14],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&16384)&&We(t,n,o,o[14],e?Ue(n,o[14],l,null):ze(o[14]),null)},i(o){e||(m(t,o),e=!0)},o(o){_(t,o),e=!1},d(o){t&&t.d(o)}}}function Ro(r){let e,n,t=r[0]&&yn(r);return{c(){t&&t.c(),e=me()},m(o,l){t&&t.m(o,l),$(o,e,l),n=!0},p(o,[l]){o[0]?t?(t.p(o,l),l&1&&m(t,1)):(t=yn(o),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(te(),_(t,1,1,()=>{t=null}),ne())},i(o){n||(m(t),n=!0)},o(o){_(t),n=!1},d(o){o&&d(e),t&&t.d(o)}}}function Wo(r,e){if(r.getSource(e)){let n=[];for(let t of r.getStyle().layers)"source"in t&&t.source==e&&n.push(t.id);for(let t of n)console.log(`had to remove ${t} first`),r.removeLayer(t);r.removeSource(e)}}function zo(r,e,n){let t,o,l,{$$slots:i={},$$scope:a}=e,{id:s=$t("geojson")}=e,{data:f}=e,{generateId:u=!1}=e,{promoteId:c=void 0}=e,{filter:p=void 0}=e,{lineMetrics:g=void 0}=e,{cluster:S=void 0}=e;const{map:w,cluster:C,self:k}=Or();oe(r,w,P=>n(13,t=P)),oe(r,C,P=>n(16,l=P)),oe(r,k,P=>n(0,o=P));let I,B=!0;return ct(()=>{if(console.log("gj source getting torn down"),o){let P=o;if(console.log(`... will be removing ${P}`),nt(k,o=null,o),n(11,I=void 0),t!=null&&t.loaded()){console.log(`... actually removed ${P}`),Wo(t,P);let N=t.getSource(P);console.log(`its gone, right? ${N}`)}}}),r.$$set=P=>{"id"in P&&n(4,s=P.id),"data"in P&&n(5,f=P.data),"generateId"in P&&n(6,u=P.generateId),"promoteId"in P&&n(7,c=P.promoteId),"filter"in P&&n(8,p=P.filter),"lineMetrics"in P&&n(9,g=P.lineMetrics),"cluster"in P&&n(10,S=P.cluster),"$$scope"in P&&n(14,a=P.$$scope)},r.$$.update=()=>{r.$$.dirty&1024&&nt(C,l=S,l),r.$$.dirty&10225&&t&&o!==s&&(console.log(`$source is ${o}, id is ${s}`),o&&(console.log(`removing existing $source ${o}`),t.removeSource(o)),nt(k,o=s,o),console.log(`just set $source to ${s}. adding source now.`),t.addSource(o,Ot({type:"geojson",data:f,filter:p,lineMetrics:g,generateId:u,promoteId:c,cluster:!!S,clusterMinPoints:S==null?void 0:S.minPoints,clusterMaxZoom:S==null?void 0:S.maxZoom,clusterRadius:S==null?void 0:S.radius,clusterProperties:S==null?void 0:S.properties})),n(11,I=t.getSource(o)),n(12,B=!0)),r.$$.dirty&6176&&I&&(B?n(12,B=!1):I.setData(f)),r.$$.dirty&3072&&(I==null||I.setClusterOptions(Ot({cluster:!!S,clusterMaxZoom:S==null?void 0:S.maxZoom,clusterRadius:S==null?void 0:S.radius})))},[o,w,C,k,s,f,u,c,p,g,S,I,B,t,a,i]}class un extends G{constructor(e){super(),V(this,e,zo,Ro,z,{id:4,data:5,generateId:6,promoteId:7,filter:8,lineMetrics:9,cluster:10})}}function Uo(r){let e;const n=r[14].default,t=Re(n,r,r[22],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&4194304)&&We(t,n,o,o[22],e?Ue(n,o[22],l,null):ze(o[22]),null)},i(o){e||(m(t,o),e=!0)},o(o){_(t,o),e=!1},d(o){t&&t.d(o)}}}function Go(r){let e,n,t;function o(i){r[15](i)}let l={id:r[1],type:"line",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],minzoom:r[9],maxzoom:r[10],hoverCursor:r[11],manageHoverState:r[12],eventsIfTopMost:r[13],$$slots:{default:[Uo]},$$scope:{ctx:r}};return r[0]!==void 0&&(l.hovered=r[0]),e=new fn({props:l}),X.push(()=>Y(e,"hovered",o)),e.$on("click",r[16]),e.$on("dblclick",r[17]),e.$on("contextmenu",r[18]),e.$on("mouseenter",r[19]),e.$on("mousemove",r[20]),e.$on("mouseleave",r[21]),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,[a]){const s={};a&2&&(s.id=i[1]),a&4&&(s.source=i[2]),a&8&&(s.sourceLayer=i[3]),a&16&&(s.beforeId=i[4]),a&32&&(s.beforeLayerType=i[5]),a&64&&(s.paint=i[6]),a&128&&(s.layout=i[7]),a&256&&(s.filter=i[8]),a&512&&(s.minzoom=i[9]),a&1024&&(s.maxzoom=i[10]),a&2048&&(s.hoverCursor=i[11]),a&4096&&(s.manageHoverState=i[12]),a&8192&&(s.eventsIfTopMost=i[13]),a&4194304&&(s.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,s.hovered=i[0],J(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Vo(r,e,n){let{$$slots:t={},$$scope:o}=e,{id:l=$t("line")}=e,{source:i=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:f=void 0}=e,{paint:u}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{minzoom:g=void 0}=e,{maxzoom:S=void 0}=e,{hoverCursor:w=void 0}=e,{manageHoverState:C=!1}=e,{hovered:k=null}=e,{eventsIfTopMost:I=!1}=e;function B(O){k=O,n(0,k)}function P(O){ce.call(this,r,O)}function N(O){ce.call(this,r,O)}function F(O){ce.call(this,r,O)}function A(O){ce.call(this,r,O)}function E(O){ce.call(this,r,O)}function D(O){ce.call(this,r,O)}return r.$$set=O=>{"id"in O&&n(1,l=O.id),"source"in O&&n(2,i=O.source),"sourceLayer"in O&&n(3,a=O.sourceLayer),"beforeId"in O&&n(4,s=O.beforeId),"beforeLayerType"in O&&n(5,f=O.beforeLayerType),"paint"in O&&n(6,u=O.paint),"layout"in O&&n(7,c=O.layout),"filter"in O&&n(8,p=O.filter),"minzoom"in O&&n(9,g=O.minzoom),"maxzoom"in O&&n(10,S=O.maxzoom),"hoverCursor"in O&&n(11,w=O.hoverCursor),"manageHoverState"in O&&n(12,C=O.manageHoverState),"hovered"in O&&n(0,k=O.hovered),"eventsIfTopMost"in O&&n(13,I=O.eventsIfTopMost),"$$scope"in O&&n(22,o=O.$$scope)},[k,l,i,a,s,f,u,c,p,g,S,w,C,I,t,B,P,N,F,A,E,D,o]}class he extends G{constructor(e){super(),V(this,e,Vo,Go,z,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13})}}function Sn(r){let e=r[0],n,t,o=Cn(r);return{c(){o.c(),n=me()},m(l,i){o.m(l,i),$(l,n,i),t=!0},p(l,i){i&1&&z(e,e=l[0])?(te(),_(o,1,1,x),ne(),o=Cn(l),o.c(),m(o,1),o.m(n.parentNode,n)):o.p(l,i)},i(l){t||(m(o),t=!0)},o(l){_(o),t=!1},d(l){l&&d(n),o.d(l)}}}function Cn(r){let e;const n=r[8].default,t=Re(n,r,r[7],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&128)&&We(t,n,o,o[7],e?Ue(n,o[7],l,null):ze(o[7]),null)},i(o){e||(m(t,o),e=!0)},o(o){_(t,o),e=!1},d(o){t&&t.d(o)}}}function qo(r){let e,n,t=r[0]&&Sn(r);return{c(){t&&t.c(),e=me()},m(o,l){t&&t.m(o,l),$(o,e,l),n=!0},p(o,[l]){o[0]?t?(t.p(o,l),l&1&&m(t,1)):(t=Sn(o),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(te(),_(t,1,1,()=>{t=null}),ne())},i(o){n||(m(t),n=!0)},o(o){_(t),n=!1},d(o){o&&d(e),t&&t.d(o)}}}function Xo(r,e,n){let t,o,{$$slots:l={},$$scope:i}=e,{id:a=$t("vector")}=e,{url:s=null}=e,{tiles:f=null}=e;if(s&&s.includes("pmtiles://")&&!Ze.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let p=new Jr;Ze.addProtocol("pmtiles",p.tile)}const{map:u,self:c}=Or();return oe(r,u,p=>n(6,t=p)),oe(r,c,p=>n(0,o=p)),ct(()=>{if(o){let p=o;nt(c,o=null,o),Yr().then(()=>{t!=null&&t.loaded()&&(t==null||t.removeSource(p))})}}),r.$$set=p=>{"id"in p&&n(3,a=p.id),"url"in p&&n(4,s=p.url),"tiles"in p&&n(5,f=p.tiles),"$$scope"in p&&n(7,i=p.$$scope)},r.$$.update=()=>{r.$$.dirty&121&&t&&o!==a&&(o&&t.removeSource(o),nt(c,o=a,o),t.addSource(o,Ot({type:"vector",url:s,tiles:f})))},[o,u,c,a,s,f,t,i,l]}class de extends G{constructor(e){super(),V(this,e,Xo,qo,z,{id:3,url:4,tiles:5})}}const Ko=r=>({features:r[0]&16,data:r[0]&16,map:r[0]&4,close:r[0]&1}),Tn=r=>{var e;return{features:r[4],data:(e=r[4])==null?void 0:e[0],map:r[2],close:r[29]}};function Ln(r){let e,n,t=(r[4]||r[3]instanceof Ze.Marker)&&On(r);return{c(){e=M("div"),t&&t.c()},m(o,l){$(o,e,l),t&&t.m(e,null),r[30](e),n=!0},p(o,l){o[4]||o[3]instanceof Ze.Marker?t?(t.p(o,l),l[0]&24&&m(t,1)):(t=On(o),t.c(),m(t,1),t.m(e,null)):t&&(te(),_(t,1,1,()=>{t=null}),ne())},i(o){n||(m(t),n=!0)},o(o){_(t),n=!1},d(o){o&&d(e),t&&t.d(),r[30](null)}}}function On(r){let e;const n=r[28].default,t=Re(n,r,r[27],Tn);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l[0]&134217749)&&We(t,n,o,o[27],e?Ue(n,o[27],l,Ko):ze(o[27]),Tn)},i(o){e||(m(t,o),e=!0)},o(o){_(t,o),e=!1},d(o){t&&t.d(o)}}}function Zo(r){let e,n,t=r[8].default&&Ln(r);return{c(){t&&t.c(),e=me()},m(o,l){t&&t.m(o,l),$(o,e,l),n=!0},p(o,l){o[8].default?t?(t.p(o,l),l[0]&256&&m(t,1)):(t=Ln(o),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(te(),_(t,1,1,()=>{t=null}),ne())},i(o){n||(m(t),n=!0)},o(o){_(t),n=!1},d(o){o&&d(e),t&&t.d(o)}}}function Yo(r,e,n){let t,o,l,i,a,{$$slots:s={},$$scope:f}=e;const u=Qr(s);let{closeButton:c=void 0}=e,{closeOnClickOutside:p=!0}=e,{closeOnClickInside:g=!1}=e,{closeOnMove:S=!1}=e,{openOn:w="click"}=e,{focusAfterOpen:C=!0}=e,{anchor:k=void 0}=e,{offset:I=void 0}=e,{popupClass:B=void 0}=e,{maxWidth:P=void 0}=e,{lngLat:N=void 0}=e,{html:F=void 0}=e,{open:A=!1}=e;const{map:E,popupTarget:D,layerEvent:O}=po();oe(r,E,j=>n(2,l=j)),oe(r,D,j=>n(3,a=j)),oe(r,O,j=>n(26,i=j));const H=["click","dblclick","contextmenu"];let W,q=!1,le;function Ne(){if(!W)return;let j=W.getElement();!j||j===le||(le=j,w==="hover"&&(le.style.pointerEvents="none"),le.addEventListener("mouseenter",()=>{n(22,q=!0)},{passive:!0}),le.addEventListener("mouseleave",()=>{n(22,q=!1)},{passive:!0}),le.addEventListener("click",()=>{g&&n(0,A=!1)},{passive:!0}))}pt(()=>{if(l)return l.on("click",ge),typeof a=="string"&&(l.on("click",a,Se),l.on("dblclick",a,Se),l.on("contextmenu",a,Se),l.on("mousemove",a,De),l.on("mouseleave",a,Le),l.on("touchstart",a,ve),l.on("touchend",a,Ve)),()=>{l!=null&&l.loaded()&&(W==null||W.remove(),l.off("click",ge),a instanceof Ze.Marker?a.getPopup()===W&&a.setPopup(void 0):typeof a=="string"&&(l.off("click",a,Se),l.off("dblclick",a,Se),l.off("contextmenu",a,Se),l.off("mousemove",a,De),l.off("mouseleave",a,Le),l.off("touchstart",a,ve),l.off("touchend",a,Ve)))}});let re=null,$e="normal";function Se(j){j.type===w&&("layerType"in j?j.layerType==="deckgl"?(n(9,N=j.coordinate),n(4,re=j.object?[j.object]:null)):(n(9,N=j.lngLat),n(4,re=j.features??[])):(n(9,N=j.lngLat),n(4,re=j.features??[])),setTimeout(()=>n(0,A=!0)))}let be=null;function ve(j){be=j.point}function Ve(j){if(!be||w!=="hover")return;let Ce=be.dist(j.point);be=null,Ce<3&&(n(9,N=j.lngLat),n(4,re=j.features??[]),W.isOpen()?n(23,$e="justOpened"):(n(23,$e="opening"),n(0,A=!0)))}function Le(j){w!=="hover"||be||$e!=="normal"||(n(0,A=!1),n(4,re=null))}function De(j){w!=="hover"||be||$e!=="normal"||(n(0,A=!0),n(4,re=j.features??[]),n(9,N=j.lngLat))}function ge(j){if($e==="justOpened"){n(23,$e="normal");return}if(!p)return;let Ce=[le,a instanceof Ze.Marker?a==null?void 0:a.getElement():null];A&&W.isOpen()&&!Ce.some(Te=>Te==null?void 0:Te.contains(j.originalEvent.target))&&n(0,A=!1)}let R;const Oe=()=>n(0,A=!1);function se(j){X[j?"unshift":"push"](()=>{R=j,n(1,R)})}return r.$$set=j=>{"closeButton"in j&&n(10,c=j.closeButton),"closeOnClickOutside"in j&&n(11,p=j.closeOnClickOutside),"closeOnClickInside"in j&&n(12,g=j.closeOnClickInside),"closeOnMove"in j&&n(13,S=j.closeOnMove),"openOn"in j&&n(14,w=j.openOn),"focusAfterOpen"in j&&n(15,C=j.focusAfterOpen),"anchor"in j&&n(16,k=j.anchor),"offset"in j&&n(17,I=j.offset),"popupClass"in j&&n(18,B=j.popupClass),"maxWidth"in j&&n(19,P=j.maxWidth),"lngLat"in j&&n(9,N=j.lngLat),"html"in j&&n(20,F=j.html),"open"in j&&n(0,A=j.open),"$$scope"in j&&n(27,f=j.$$scope)},r.$$.update=()=>{if(r.$$.dirty[0]&7168&&n(25,t=c??(!p&&!g)),r.$$.dirty[0]&36675584&&(W||(n(21,W=new Ze.Popup({closeButton:t,closeOnClick:!1,closeOnMove:S,focusAfterOpen:C,maxWidth:P,className:B,anchor:k,offset:I})),le=W.getElement(),W.on("open",()=>{n(0,A=!0),Ne()}),W.on("close",j=>{n(0,A=!1)}))),r.$$.dirty[0]&2113544&&W&&a instanceof Ze.Marker&&(w==="click"?a.setPopup(W):a.getPopup()===W&&a.setPopup(void 0)),r.$$.dirty[0]&67125248&&H.includes(w)&&(i==null?void 0:i.type)===w&&(Se(i),nt(O,i=null,i)),r.$$.dirty[0]&67125248&&n(24,o=w==="hover"&&((i==null?void 0:i.type)==="mousemove"||(i==null?void 0:i.type)==="mouseenter")),r.$$.dirty[0]&88096768&&w==="hover"&&O&&(o&&i&&(i.layerType==="deckgl"?(n(9,N=i.coordinate),n(4,re=i.object?[i.object]:null)):(n(9,N=i.lngLat),n(4,re=i.features??[]))),n(0,A=(o||q)??!1)),r.$$.dirty[0]&3145730&&(R?W.setDOMContent(R):F&&W.setHTML(F)),r.$$.dirty[0]&2097664&&N&&W.setLngLat(N),r.$$.dirty[0]&10485765&&l){let j=W.isOpen();A&&!j?(W.addTo(l),$e==="opening"&&n(23,$e="justOpened")):!A&&j&&W.remove()}},[A,R,l,a,re,E,D,O,u,N,c,p,g,S,w,C,k,I,B,P,F,W,q,$e,o,t,i,f,s,Oe,se]}class ue extends G{constructor(e){super(),V(this,e,Yo,Zo,z,{closeButton:10,closeOnClickOutside:11,closeOnClickInside:12,closeOnMove:13,openOn:14,focusAfterOpen:15,anchor:16,offset:17,popupClass:18,maxWidth:19,lngLat:9,html:20,open:0},null,[-1,-1])}}function Jo(r){let e;return{c(){e=M("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Qo(r){let e,n,t,o,l=r[0]=="Private (development)"&&Jo();return{c(){l&&l.c(),e=L(),n=M("p"),n.textContent="Note the ATF scheme data has not been validated.",t=L(),o=M("p"),o.innerHTML=`Please contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      about any problems, ideas, or feedback for this site.`},m(i,a){l&&l.m(i,a),$(i,e,a),$(i,n,a),$(i,t,a),$(i,o,a)},p:x,d(i){i&&(d(e),d(n),d(t),d(o)),l&&l.d(i)}}}function xo(r){let e,n,t,o,l,i;return l=new ae({props:{$$slots:{default:[Qo]},$$scope:{ctx:r}}}),{c(){e=M("p"),n=y("App version: "),t=y(r[0]),o=L(),h(l.$$.fragment)},m(a,s){$(a,e,s),T(e,n),T(e,t),T(e,o),b(l,e,null),i=!0},p(a,[s]){const f={};s&2&&(f.$$scope={dirty:s,ctx:a}),l.$set(f)},i(a){i||(m(l.$$.fragment,a),i=!0)},o(a){_(l.$$.fragment,a),i=!1},d(a){a&&d(e),v(l)}}}function el(r){return[ln()]}class tl extends G{constructor(e){super(),V(this,e,el,xo,z,{})}}const nl={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var we=Uint8Array,tt=Uint16Array,Ir=Uint32Array,Pr=new we([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Mr=new we([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),rl=new we([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Er=function(r,e){for(var n=new tt(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var o=new Ir(n[30]),t=1;t<30;++t)for(var l=n[t];l<n[t+1];++l)o[l]=l-n[t]<<5|t;return[n,o]},Nr=Er(Pr,2),Dr=Nr[0],ol=Nr[1];Dr[28]=258,ol[258]=28;var ll=Er(Mr,0),sl=ll[0],Jt=new tt(32768);for(var ee=0;ee<32768;++ee){var Ke=(ee&43690)>>>1|(ee&21845)<<1;Ke=(Ke&52428)>>>2|(Ke&13107)<<2,Ke=(Ke&61680)>>>4|(Ke&3855)<<4,Jt[ee]=((Ke&65280)>>>8|(Ke&255)<<8)>>>1}var gt=function(r,e,n){for(var t=r.length,o=0,l=new tt(e);o<t;++o)r[o]&&++l[r[o]-1];var i=new tt(e);for(o=0;o<e;++o)i[o]=i[o-1]+l[o-1]<<1;var a;if(n){a=new tt(1<<e);var s=15-e;for(o=0;o<t;++o)if(r[o])for(var f=o<<4|r[o],u=e-r[o],c=i[r[o]-1]++<<u,p=c|(1<<u)-1;c<=p;++c)a[Jt[c]>>>s]=f}else for(a=new tt(t),o=0;o<t;++o)r[o]&&(a[o]=Jt[i[r[o]-1]++]>>>15-r[o]);return a},yt=new we(288);for(var ee=0;ee<144;++ee)yt[ee]=8;for(var ee=144;ee<256;++ee)yt[ee]=9;for(var ee=256;ee<280;++ee)yt[ee]=7;for(var ee=280;ee<288;++ee)yt[ee]=8;var Fr=new we(32);for(var ee=0;ee<32;++ee)Fr[ee]=5;var il=gt(yt,9,1),al=gt(Fr,5,1),Ut=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},Ae=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},Gt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},fl=function(r){return(r+7)/8|0},cn=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?tt:r.BYTES_PER_ELEMENT==4?Ir:we)(n-e);return t.set(r.subarray(e,n)),t},ul=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ie=function(r,e,n){var t=new Error(e||ul[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Ie),!n)throw t;return t},cl=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new we(0);var o=!e||n,l=!n||n.i;n||(n={}),e||(e=new we(t*3));var i=function(Oe){var se=e.length;if(Oe>se){var j=new we(Math.max(se*2,Oe));j.set(e),e=j}},a=n.f||0,s=n.p||0,f=n.b||0,u=n.l,c=n.d,p=n.m,g=n.n,S=t*8;do{if(!u){a=Ae(r,s,1);var w=Ae(r,s+1,3);if(s+=3,w)if(w==1)u=il,c=al,p=9,g=5;else if(w==2){var B=Ae(r,s,31)+257,P=Ae(r,s+10,15)+4,N=B+Ae(r,s+5,31)+1;s+=14;for(var F=new we(N),A=new we(19),E=0;E<P;++E)A[rl[E]]=Ae(r,s+E*3,7);s+=P*3;for(var D=Ut(A),O=(1<<D)-1,H=gt(A,D,1),E=0;E<N;){var W=H[Ae(r,s,O)];s+=W&15;var C=W>>>4;if(C<16)F[E++]=C;else{var q=0,le=0;for(C==16?(le=3+Ae(r,s,3),s+=2,q=F[E-1]):C==17?(le=3+Ae(r,s,7),s+=3):C==18&&(le=11+Ae(r,s,127),s+=7);le--;)F[E++]=q}}var Ne=F.subarray(0,B),re=F.subarray(B);p=Ut(Ne),g=Ut(re),u=gt(Ne,p,1),c=gt(re,g,1)}else Ie(1);else{var C=fl(s)+4,k=r[C-4]|r[C-3]<<8,I=C+k;if(I>t){l&&Ie(0);break}o&&i(f+k),e.set(r.subarray(C,I),f),n.b=f+=k,n.p=s=I*8,n.f=a;continue}if(s>S){l&&Ie(0);break}}o&&i(f+131072);for(var $e=(1<<p)-1,Se=(1<<g)-1,be=s;;be=s){var q=u[Gt(r,s)&$e],ve=q>>>4;if(s+=q&15,s>S){l&&Ie(0);break}if(q||Ie(2),ve<256)e[f++]=ve;else if(ve==256){be=s,u=null;break}else{var Ve=ve-254;if(ve>264){var E=ve-257,Le=Pr[E];Ve=Ae(r,s,(1<<Le)-1)+Dr[E],s+=Le}var De=c[Gt(r,s)&Se],ge=De>>>4;De||Ie(3),s+=De&15;var re=sl[ge];if(ge>3){var Le=Mr[ge];re+=Gt(r,s)&(1<<Le)-1,s+=Le}if(s>S){l&&Ie(0);break}o&&i(f+131072);for(var R=f+Ve;f<R;f+=4)e[f]=e[f-re],e[f+1]=e[f+1-re],e[f+2]=e[f+2-re],e[f+3]=e[f+3-re];f=R}}n.l=u,n.p=be,n.b=f,n.f=a,u&&(a=1,n.m=p,n.d=c,n.n=g)}while(!a);return f==e.length?e:cn(e,0,f)},pl=new we(0),Fe=function(r,e){return r[e]|r[e+1]<<8},Me=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},Vt=function(r,e){return Me(r,e)+Me(r,e+4)*4294967296};function ml(r,e){return cl(r,e)}var Qt=typeof TextDecoder<"u"&&new TextDecoder,$l=0;try{Qt.decode(pl,{stream:!0}),$l=1}catch{}var dl=function(r){for(var e="",n=0;;){var t=r[n++],o=(t>127)+(t>223)+(t>239);if(n+o>r.length)return[e,cn(r,n-1)];o?o==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):o&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function jr(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(Qt)return Qt.decode(r);var o=dl(r),l=o[0],i=o[1];return i.length&&Ie(8),l}}var gl=function(r,e){return e+30+Fe(r,e+26)+Fe(r,e+28)},_l=function(r,e,n){var t=Fe(r,e+28),o=jr(r.subarray(e+46,e+46+t),!(Fe(r,e+8)&2048)),l=e+46+t,i=Me(r,e+20),a=n&&i==4294967295?hl(r,l):[i,Me(r,e+24),Me(r,e+42)],s=a[0],f=a[1],u=a[2];return[Fe(r,e+10),s,f,o,l+Fe(r,e+30)+Fe(r,e+32),u]},hl=function(r,e){for(;Fe(r,e)!=1;e+=4+Fe(r,e+2));return[Vt(r,e+12),Vt(r,e+4),Vt(r,e+20)]};function bl(r,e){for(var n={},t=r.length-22;Me(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Ie(13);var o=Fe(r,t+8);if(!o)return{};var l=Me(r,t+16),i=l==4294967295||o==65535;if(i){var a=Me(r,t-12);i=Me(r,a)==101075792,i&&(o=Me(r,a+32),l=Me(r,a+48))}for(var s=e&&e.filter,f=0;f<o;++f){var u=_l(r,l,i),c=u[0],p=u[1],g=u[2],S=u[3],w=u[4],C=u[5],k=gl(r,C);l=w,(!s||s({name:S,size:p,originalSize:g,compression:c}))&&(c?c==8?n[S]=ml(r.subarray(k,k+p),new we(g)):Ie(14,"unknown compression type "+c):n[S]=cn(r,k,k+p))}return n}function vl(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(qt):qt(r)}function qt(r){var e=new Uint8Array(r),n=bl(e);return Promise.resolve(wl(n))}function wl(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var o=t[n];e[o]=jr(r[o])}return e}function Be(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&ot(t)===e)return t;n++}}function kt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var o=r.childNodes[t];o.nodeType===1&&ot(o)===e&&n.push(o),t++}return n}function At(r,e,n){for(var t=0;t<r.childNodes.length;){var o=r.childNodes[t];e?o.nodeType===1&&ot(o)===e&&n(o,t):n(o,t),t++}}function yl(r,e,n){var t=[];return At(r,e,function(o,l){t.push(n(o,l))}),t}var kl=/.+\:/;function ot(r){return r.tagName.replace(kl,"")}function Br(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+ot(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=Br(r.childNodes[t]),t++;return e+="</"+ot(r)+">",e}function Sl(r){var e=r.documentElement,n=Be(e,"sheetData"),t=[];return At(n,"row",function(o){At(o,"c",function(l){t.push(l)})}),t}function Cl(r,e){return Be(e,"v")}function Tl(r,e){if(e.firstChild&&ot(e.firstChild)==="is"&&e.firstChild.firstChild&&ot(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Ll(r){var e=r.documentElement,n=Be(e,"dimension");if(n)return n.getAttribute("ref")}function Ol(r){var e=r.documentElement,n=Be(e,"cellStyleXfs");return n?kt(n,"xf"):[]}function Al(r){var e=r.documentElement,n=Be(e,"cellXfs");return n?kt(n,"xf"):[]}function Il(r){var e=r.documentElement,n=Be(e,"numFmts");return n?kt(n,"numFmt"):[]}function Pl(r){var e=r.documentElement;return yl(e,"si",function(n){var t=Be(n,"t");if(t)return t.textContent;var o="";return At(n,"r",function(l){o+=Be(l,"t").textContent}),o})}function Ml(r){var e=r.documentElement;return Be(e,"workbookPr")}function El(r){var e=r.documentElement;return kt(e,"Relationship")}function Nl(r){var e=r.documentElement,n=Be(e,"sheets");return kt(n,"sheet")}function Dl(r,e){var n=e.createDocument(r),t={},o=Ml(n);o&&o.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var l=function(a){a.getAttribute("name")&&t.sheets.push({id:a.getAttribute("sheetId"),name:a.getAttribute("name"),relationId:a.getAttribute("r:id")})};return Nl(n).forEach(l),t}function Fl(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},o=function(i){var a=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=Xt(a);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=Xt(a);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=Xt(a);break}};return El(n).forEach(o),t}function Xt(r){return r[0]==="/"?r.slice(1):"xl/"+r}function An(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function In(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?An(Object(n),!0).forEach(function(t){jl(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):An(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function jl(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Bl(r,e){if(!r)return{};var n=e.createDocument(r),t=Ol(n).map(Kt),o=Il(n).map(Hl).reduce(function(i,a){return i[a.id]=a,i},[]),l=function(a){return a.hasAttribute("xfId")?In(In({},t[a.xfId]),Kt(a,o)):Kt(a,o)};return Al(n).map(l)}function Hl(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function Kt(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function Rl(r,e){return r?Pl(e.createDocument(r)):[]}function Hr(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function Wl(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=zl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zl(r,e){if(r){if(typeof r=="string")return Pn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pn(r,e)}}function Pn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Ul(r,e,n,t){if(e){var o=n[e];if(!o)throw new Error("Cell style not found: ".concat(e));if(!o.numberFormat)return!1;if(Gl.indexOf(Number(o.numberFormat.id))>=0||t.dateFormat&&o.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&o.numberFormat.template&&Xl(o.numberFormat.template))return!0}}var Gl=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],Vl=/^\[\$-414\]/,ql=/;@$/;function Xl(r){r=r.toLowerCase(),r=r.replace(Vl,""),r=r.replace(ql,"");for(var e=r.split(/\W+/),n=Wl(e),t;!(t=n()).done;){var o=t.value;if(Kl.indexOf(o)<0)return!1}return!0}var Kl=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function Zl(r,e,n){var t=n.getInlineStringValue,o=n.getInlineStringXml,l=n.getStyleId,i=n.styles,a=n.values,s=n.properties,f=n.options;switch(e||(e="n"),e){case"str":r=Zt(r,f);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(o()));r=Zt(r,f);break;case"s":var u=Number(r);if(isNaN(u))throw new Error('Invalid "shared" string index: '.concat(r));if(u>=a.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=a[u],r=Zt(r,f);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=Yl(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var p=Number(r);if(isNaN(p))throw new Error('Invalid "numeric" cell value: '.concat(r));r=p,Ul(r,l(),i,f)&&(r=Hr(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function Yl(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function Zt(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var Jl=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function Ql(r){var e=function(f,u){return f-u},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),o=n[0],l=n[n.length-1],i=t[0],a=t[t.length-1];return[{row:o,column:i},{row:l,column:a}]}function xl(r){for(var e=0,n=0;n<r.length;)e*=26,e+=Jl.indexOf(r[n]),n++;return e}function Rr(r){return r=r.split(/(\d+)/),[parseInt(r[1]),xl(r[0].trim())]}function es(r,e,n,t,o,l,i){var a=Rr(r.getAttribute("r")),s=Cl(e,r),f=s&&s.textContent,u;return r.hasAttribute("t")&&(u=r.getAttribute("t")),{row:a[0],column:a[1],value:Zl(f,u,{getInlineStringValue:function(){return Tl(e,r)},getInlineStringXml:function(){return Br(r)},getStyleId:function(){return r.getAttribute("s")},styles:o,values:t,properties:l,options:i})}}function ts(r,e,n,t,o,l){var i=Sl(r);return i.length===0?[]:i.map(function(a){return es(a,r,e,n,t,o,l)})}function ns(r,e){return ss(r)||ls(r,e)||os(r,e)||rs()}function rs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function os(r,e){if(r){if(typeof r=="string")return Mn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mn(r,e)}}function Mn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ls(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],o=!0,l=!1,i,a;try{for(n=n.call(r);!(o=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));o=!0);}catch(s){l=!0,a=s}finally{try{!o&&n.return!=null&&n.return()}finally{if(l)throw a}}return t}}function ss(r){if(Array.isArray(r))return r}function is(r){var e=Ll(r);if(e)return e=e.split(":").map(Rr).map(function(n){var t=ns(n,2),o=t[0],l=t[1];return{row:o,column:l}}),e.length===1&&(e=[e[0],e[0]]),e}function as(r,e,n,t,o,l){var i=e.createDocument(r),a=ts(i,e,n,t,o,l),s=is(i)||Ql(a);return{cells:a,dimensions:s}}function fs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=us(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function us(r,e){if(r){if(typeof r=="string")return En(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return En(r,e)}}function En(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function cs(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,o=t===void 0?function(c){return c}:t,l=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var a=!0,s=fs(r[i]),f;!(f=s()).done;){var u=f.value;if(o(u)!==null){a=!1;break}}if(a)r.splice(i,1),n&&n.splice(i,1);else if(l)break;i--}return r}function ps(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ms(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ms(r,e){if(r){if(typeof r=="string")return Nn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nn(r,e)}}function Nn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function $s(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,o=e.onlyTrimAtTheEnd,l=r[0].length-1;l>=0;){for(var i=!0,a=ps(r),s;!(s=a()).done;){var f=s.value;if(t(f[l])!==null){i=!1;break}}if(i)for(var u=0;u<r.length;)r[u].splice(l,1),u++;else if(o)break;l--}return r}function ds(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Wr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gs(r,e){return bs(r)||hs(r,e)||Wr(r,e)||_s()}function _s(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wr(r,e){if(r){if(typeof r=="string")return Dn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dn(r,e)}}function Dn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function hs(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],o=!0,l=!1,i,a;try{for(n=n.call(r);!(o=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));o=!0);}catch(s){l=!0,a=s}finally{try{!o&&n.return!=null&&n.return()}finally{if(l)throw a}}return t}}function bs(r){if(Array.isArray(r))return r}function vs(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var o=gs(n,2);o[0];for(var l=o[1],i=l.column,a=l.row,s=new Array(a),f=0;f<a;){s[f]=new Array(i);for(var u=0;u<i;)s[f][u]=null,u++;f++}for(var c=ds(t),p;!(p=c()).done;){var g=p.value,S=g.row-1,w=g.column-1;w<i&&S<a&&(s[S][w]=g.value)}var C=e.rowMap;if(C)for(var k=0;k<s.length;)C[k]=k,k++;return s=cs($s(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:C}),e.transformData&&(s=e.transformData(s)),s}function ws(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ys(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ys(r,e){if(r){if(typeof r=="string")return Fn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fn(r,e)}}function Fn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function jn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function ks(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jn(Object(n),!0).forEach(function(t){Ss(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):jn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ss(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Cs(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=ks({sheet:1},n));var t=function(p){if(!r[p])throw new Error('"'.concat(p,'" file not found inside the *.xlsx file zip archive'));return r[p]},o=Fl(t("xl/_rels/workbook.xml.rels"),e),l=o.sharedStrings?Rl(t(o.sharedStrings),e):[],i=o.styles?Bl(t(o.styles),e):{},a=Dl(t("xl/workbook.xml"),e);if(n.getSheets)return a.sheets.map(function(c){var p=c.name;return{name:p}});var s=Ts(n.sheet,a.sheets);if(!s||!o.sheets[s])throw Ls(n.sheet,a.sheets);var f=as(t(o.sheets[s]),e,l,i,a,n),u=vs(f,n);return n.properties?{data:u,properties:a}:u}function Ts(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=ws(e),o;!(o=t()).done;){var l=o.value;if(l.name===r)return l.relationId}}function Ls(r,e){var n=e&&e.map(function(t,o){return'"'.concat(t.name,'" (#').concat(o+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function xt(r){"@babel/helpers - typeof";return xt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xt(r)}function Bn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function Os(r,e,n){return e&&Bn(r.prototype,e),n&&Bn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function As(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Is(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&ht(r,e)}function Ps(r){var e=zr();return function(){var t=bt(r),o;if(e){var l=bt(this).constructor;o=Reflect.construct(t,arguments,l)}else o=t.apply(this,arguments);return Ms(this,o)}}function Ms(r,e){if(e&&(xt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Es(r)}function Es(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function en(r){var e=typeof Map=="function"?new Map:void 0;return en=function(t){if(t===null||!Ns(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,o)}function o(){return Ct(t,arguments,bt(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),ht(o,t)},en(r)}function Ct(r,e,n){return zr()?Ct=Reflect.construct:Ct=function(o,l,i){var a=[null];a.push.apply(a,l);var s=Function.bind.apply(o,a),f=new s;return i&&ht(f,i.prototype),f},Ct.apply(null,arguments)}function zr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ns(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function ht(r,e){return ht=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t},ht(r,e)}function bt(r){return bt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},bt(r)}var ye=function(r){Is(n,r);var e=Ps(n);function n(t){var o;return As(this,n),o=e.call(this,"invalid"),o.reason=t,o}return Os(n)}(en(Error));function Ds(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new ye("not_a_number")}if(typeof r!="number")throw new ye("not_a_number");if(isNaN(r))throw new ye("invalid_number");if(!isFinite(r))throw new ye("out_of_bounds");return r}function Fs(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new ye("invalid_number");if(!isFinite(r))throw new ye("out_of_bounds");return String(r)}throw new ye("not_a_string")}function js(r){if(typeof r=="boolean")return r;throw new ye("not_a_boolean")}function Bs(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new ye("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new ye("invalid_number");if(!isFinite(r))throw new ye("out_of_bounds");var t=Hr(r,n);if(isNaN(t.valueOf()))throw new ye("out_of_bounds");return t}throw new ye("not_a_date")}function Hs(r,e){return zs(r)||Ws(r,e)||Ur(r,e)||Rs()}function Rs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ws(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],o=!0,l=!1,i,a;try{for(n=n.call(r);!(o=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));o=!0);}catch(s){l=!0,a=s}finally{try{!o&&n.return!=null&&n.return()}finally{if(l)throw a}}return t}}function zs(r){if(Array.isArray(r))return r}function tn(r){"@babel/helpers - typeof";return tn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tn(r)}function Us(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ur(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ur(r,e){if(r){if(typeof r=="string")return Hn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hn(r,e)}}function Hn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Rn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function Wn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rn(Object(n),!0).forEach(function(t){Gs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Gs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var zn={isColumnOriented:!1};function Vs(r,e,n){n?n=Wn(Wn({},zn),n):n=zn;var t=n,o=t.isColumnOriented,l=t.rowMap,i=t.ignoreEmptyRows;Zs(e),o&&(r=Ks(r));for(var a=r[0],s=[],f=[],u=1;u<r.length;u++){var c=Gr(e,r[u],u,a,f,n);(c!==null||i===!1)&&s.push(c)}if(l)for(var p=Us(f),g;!(g=p()).done;){var S=g.value;S.row=l[S.row-1]+1}return{rows:s,errors:f}}function Gr(r,e,n,t,o,l){for(var i={},a=!0,s=function(){var p=u[f],g=r[p],S=tn(g.type)==="object"&&!Array.isArray(g.type),w=e[t.indexOf(p)];w===void 0&&(w=null);var C=void 0,k=void 0,I=void 0;if(S)C=Gr(g.type,e,n,t,o,l);else if(w===null)C=null;else if(Array.isArray(g.type)){var B=!1,P=Xs(w).map(function(F){var A=Un(F,g,l);return A.error&&(C=F,k=A.error,I=A.reason),A.value!==null&&(B=!0),A.value});k||(C=B?P:null)}else{var N=Un(w,g,l);k=N.error,I=N.reason,C=k?w:N.value}!k&&C===null&&g.required&&(k="required"),k?(k={error:k,row:n+1,column:p,value:C},I&&(k.reason=I),g.type&&(k.type=g.type),o.push(k)):(a&&C!==null&&(a=!1),(C!==null||l.includeNullValues)&&(i[g.prop]=C))},f=0,u=Object.keys(r);f<u.length;f++)s();return a?null:i}function Un(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=lt(r,e.parse):e.type?t=qs(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(o){return{error:o.message}}}return t}function lt(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function qs(r,e,n){switch(e){case String:return lt(r,Fs);case Number:return lt(r,Ds);case Date:return lt(r,function(t){return Bs(t,{properties:n.properties})});case Boolean:return lt(r,js);default:if(typeof e=="function")return lt(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Vr(r,e,n){for(var t=0,o="";n+t<r.length;){var l=r[n+t];if(l===e)return[o,t];if(l==='"'){var i=Vr(r,'"',n+t+1);o+=i[0],t+=1+i[1]+1}else o+=l,t++}return[o,t]}function Xs(r){for(var e=[],n=0;n<r.length;){var t=Vr(r,",",n),o=Hs(t,2),l=o[0],i=o[1];n+=i+1,e.push(l.trim())}return e}var Ks=function(e){return e[0].map(function(n,t){return e.map(function(o){return o[t]})})};function Zs(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],o=r[t];if(!o.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function nn(r){"@babel/helpers - typeof";return nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nn(r)}function qr(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var o=t[n],l=r[o],i=void 0;nn(l)==="object"&&(l=Object.keys(r[o])[0],i=qr(r[o][l])),e[o]={prop:l},i&&(e[o].type=i)}return e}var Ys=["schema","map"];function Gn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function St(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gn(Object(n),!0).forEach(function(t){Js(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Gn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Js(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Qs(r,e){if(r==null)return{};var n=xs(r,e),t,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);for(o=0;o<l.length;o++)t=l[o],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function xs(r,e){if(r==null)return{};var n={},t=Object.keys(r),o,l;for(l=0;l<t.length;l++)o=t[l],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}function ei(r,e,n){var t=n.schema,o=n.map,l=Qs(n,Ys);!t&&o&&(t=qr(o));var i=Cs(r,e,St(St({},l),{},{properties:t||l.properties}));return t?Vs(i.data,t,St(St({},l),{},{properties:i.properties})):i}function ti(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return vl(r).then(function(n){return ei(n,nl,e)})}function ni(r){let e=new Map;for(let[t,o]of Object.entries(r.schemes))e.set(t,{scheme_reference:t,num_features:0,authority_or_region:o.authority_or_region,capital_scheme_id:o.capital_scheme_id,funding_programme:o.funding_programme});let n=1;for(let t of r.features){let o=e.get(t.properties.scheme_reference);o.num_features++,t.properties.funding_programme=o.funding_programme,t.id=n++}return e}async function ri(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await ti(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let o of n){let l=xr(o.lat_lon.split(",").map(parseFloat).reverse()),i=o;i.submission_time=o.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:l},id:t.features.length+1})}return t}const Q={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"},Ye=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function oi(r){let e,n,t,o,l;function i(s){r[3](s)}let a={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return r[0]!==void 0&&(a.value=r[0]),e=new Lt({props:a}),X.push(()=>Y(e,"value",i)),e.$on("change",r[2]),o=new vo({props:{rows:r[1]}}),{c(){h(e.$$.fragment),t=L(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};!n&&f&1&&(n=!0,u.value=s[0],J(()=>n=!1)),e.$set(u);const c={};f&2&&(c.rows=s[1]),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}function li(r,e,n){let t;oe(r,mt,s=>n(4,t=s));let o="interventionType",l=hn("v1");function i(){let s;o=="interventionType"?(s=Ar("v1"),n(1,l=hn("v1"))):(s=kr(["get","funding_programme"],{ATF2:Q.atf2,ATF3:Q.atf3,ATF4:Q.atf4},"grey"),n(1,l=[["ATF2",Q.atf2],["ATF3",Q.atf3],["ATF4",Q.atf4]])),t.setPaintProperty("interventions-points","circle-color",s),t.setPaintProperty("interventions-lines","line-color",s),t.setPaintProperty("interventions-polygons","fill-color",s),t.setPaintProperty("interventions-polygon-outlines","line-color",s)}function a(s){o=s,n(0,o)}return[o,l,i,a]}class si extends G{constructor(e){super(),V(this,e,li,oi,z,{})}}function ii(r){let e;return{c(){e=y("Clear")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function ai(r){let e,n,t,o,l,i;return t=new _t({props:{$$slots:{default:[ii]},$$scope:{ctx:r}}}),t.$on("click",r[13]),{c(){e=M("input"),n=L(),h(t.$$.fragment),Z(e,"type","text"),Z(e,"class","govuk-input govuk-input--width-10"),Z(e,"id","filterText")},m(a,s){$(a,e,s),$n(e,r[0]),$(a,n,s),b(t,a,s),o=!0,l||(i=ut(e,"input",r[12]),l=!0)},p(a,s){s&1&&e.value!==a[0]&&$n(e,a[0]);const f={};s&131072&&(f.$$scope={dirty:s,ctx:a}),t.$set(f)},i(a){o||(m(t.$$.fragment,a),o=!0)},o(a){_(t.$$.fragment,a),o=!1},d(a){a&&(d(e),d(n)),v(t,a),l=!1,i()}}}function fi(r){let e,n,t,o,l,i,a,s,f,u;function c(w){r[10](w)}let p={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[2]!==void 0&&(p.value=r[2]),e=new Lt({props:p}),X.push(()=>Y(e,"value",c));function g(w){r[11](w)}let S={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[3]!==void 0&&(S.value=r[3]),o=new Lt({props:S}),X.push(()=>Y(o,"value",g)),a=new Sr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[ai]},$$scope:{ctx:r}}}),f=new si({}),{c(){h(e.$$.fragment),t=L(),h(o.$$.fragment),i=L(),h(a.$$.fragment),s=L(),h(f.$$.fragment)},m(w,C){b(e,w,C),$(w,t,C),b(o,w,C),$(w,i,C),b(a,w,C),$(w,s,C),b(f,w,C),u=!0},p(w,C){const k={};C&32&&(k.choices=w[5]),!n&&C&4&&(n=!0,k.value=w[2],J(()=>n=!1)),e.$set(k);const I={};C&64&&(I.choices=w[6]),!l&&C&8&&(l=!0,I.value=w[3],J(()=>l=!1)),o.$set(I);const B={};C&131073&&(B.$$scope={dirty:C,ctx:w}),a.$set(B)},i(w){u||(m(e.$$.fragment,w),m(o.$$.fragment,w),m(a.$$.fragment,w),m(f.$$.fragment,w),u=!0)},o(w){_(e.$$.fragment,w),_(o.$$.fragment,w),_(a.$$.fragment,w),_(f.$$.fragment,w),u=!1},d(w){w&&(d(t),d(i),d(s)),v(e,w),v(o,w),v(a,w),v(f,w)}}}function ui(r){let e,n=r[1].size.toLocaleString()+"",t,o,l=r[7].route.toLocaleString()+"",i,a,s=r[7].area.toLocaleString()+"",f,u,c=r[7].crossing.toLocaleString()+"",p,g,S=r[7].other.toLocaleString()+"",w,C;return{c(){e=y("Showing "),t=y(n),o=y(" schemes ("),i=y(l),a=y(`
    routes, `),f=y(s),u=y(` areas,
    `),p=y(c),g=y(" crossings, "),w=y(S),C=y(`
    other)`)},m(k,I){$(k,e,I),$(k,t,I),$(k,o,I),$(k,i,I),$(k,a,I),$(k,f,I),$(k,u,I),$(k,p,I),$(k,g,I),$(k,w,I),$(k,C,I)},p(k,I){I&2&&n!==(n=k[1].size.toLocaleString()+"")&&U(t,n),I&128&&l!==(l=k[7].route.toLocaleString()+"")&&U(i,l),I&128&&s!==(s=k[7].area.toLocaleString()+"")&&U(f,s),I&128&&c!==(c=k[7].crossing.toLocaleString()+"")&&U(p,c),I&128&&S!==(S=k[7].other.toLocaleString()+"")&&U(w,S)},d(k){k&&(d(e),d(t),d(o),d(i),d(a),d(f),d(u),d(p),d(g),d(w),d(C))}}}function ci(r){let e,n,t;function o(i){r[14](i)}let l={id:"show-schemes",$$slots:{default:[ui]},$$scope:{ctx:r}};return r[4]!==void 0&&(l.checked=r[4]),e=new ie({props:l}),X.push(()=>Y(e,"checked",o)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const s={};a&131202&&(s.$$scope={dirty:a,ctx:i}),!n&&a&16&&(n=!0,s.checked=i[4],J(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function pi(r){let e,n,t,o;return e=new Pe({props:{label:"Filters",$$slots:{default:[fi]},$$scope:{ctx:r}}}),t=new wt({props:{small:!0,$$slots:{default:[ci]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},p(l,[i]){const a={};i&131181&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&131218&&(s.$$scope={dirty:i,ctx:l}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function mi(r,e,n){let t,o;oe(r,st,P=>n(15,t=P)),oe(r,mt,P=>n(9,o=P));let{schemes:l}=e,{schemesToBeShown:i=new Set}=e,{filterText:a=""}=e,s=[],f="",u=[],c="",p={area:0,route:0,crossing:0,other:0},g=!0;pt(()=>{let P=new Set,N=new Set;for(let F of l.values())F.authority_or_region&&P.add(F.authority_or_region),F.funding_programme&&N.add(F.funding_programme);n(5,s=Array.from(P.entries())),s.sort(),n(6,u=Array.from(N.entries())),u.sort()});function S(P,N,F){let A=P.toLowerCase(),E=O=>{var H,W;if(A&&!((H=O.properties.name)!=null&&H.toLowerCase().includes(A))&&!((W=O.properties.description)!=null&&W.toLowerCase().includes(A)))return!1;if(N||F){let q=l.get(O.properties.scheme_reference);if(N&&q.authority_or_region!=N||F&&q.funding_programme!=F)return!1}return!0};n(1,i=new Set(t.features.filter(E).map(O=>O.properties.scheme_reference))),n(7,p={area:0,route:0,crossing:0,other:0});let D=O=>{var H,W;return!(!i.has(O.properties.scheme_reference)||A&&!((H=O.properties.name)!=null&&H.toLowerCase().includes(A))&&!((W=O.properties.description)!=null&&W.toLowerCase().includes(A)))};st.update(O=>{for(let H of O.features)D(H)?(delete H.properties.hide_while_editing,n(7,p[H.properties.intervention_type]++,p)):H.properties.hide_while_editing=!0;return O}),n(7,p)}function w(P){f=P,n(2,f)}function C(P){c=P,n(3,c)}function k(){a=this.value,n(0,a)}const I=()=>n(0,a="");function B(P){g=P,n(4,g)}return r.$$set=P=>{"schemes"in P&&n(8,l=P.schemes),"schemesToBeShown"in P&&n(1,i=P.schemesToBeShown),"filterText"in P&&n(0,a=P.filterText)},r.$$.update=()=>{if(r.$$.dirty&528&&o)for(let P of["interventions-polygons","interventions-polygon-outlines","interventions-lines","interventions-lines-endpoints","interventions-points"])o.getLayer(P)&&o.setLayoutProperty(P,"visibility",g?"visible":"none");r.$$.dirty&13&&S(a,f,c)},[a,i,f,c,g,s,u,p,l,o,w,C,k,I,B]}class $i extends G{constructor(e){super(),V(this,e,mi,pi,z,{schemes:8,schemesToBeShown:1,filterText:0})}}function di(r,e,n){let t;oe(r,mt,a=>n(3,t=a));let o=null,{markerPosition:l}=e,{markerPositionUpdated:i}=e;return pt(()=>{o=new Yt.Marker({draggable:!0}).setLngLat(l).addTo(t),o.on("dragstart",()=>{t.getCanvas().style.cursor="grabbing"}),o.on("drag",()=>{n(0,l=o.getLngLat()),i()}),o.on("dragend",()=>{t.getCanvas().style.cursor="inherit"})}),ct(()=>{o&&o.remove()}),r.$$set=a=>{"markerPosition"in a&&n(0,l=a.markerPosition),"markerPositionUpdated"in a&&n(1,i=a.markerPositionUpdated)},[l,i]}class gi extends G{constructor(e){super(),V(this,e,di,null,z,{markerPosition:0,markerPositionUpdated:1})}}function Vn(r,e,n){const t=r.slice();return t[16]=e[n],t[17]=e,t[18]=n,t}function _i(r){let e,n;return e=new _t({props:{$$slots:{default:[bi]},$$scope:{ctx:r}}}),e.$on("click",r[4]),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&524288&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function hi(r){let e,n;return e=new _t({props:{$$slots:{default:[vi]},$$scope:{ctx:r}}}),e.$on("click",r[3]),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&524288&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bi(r){let e;return{c(){e=y("Disable Line Measurement Tool")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function vi(r){let e;return{c(){e=y("Enable Line Measurement Tool")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function qn(r){var c;let e,n,t,o=[],l=new Map,i,a,s=r[2]&&((c=r[2].properties)==null?void 0:c.length)&&Xn(r);n=new Pe({props:{label:"Help",$$slots:{default:[wi]},$$scope:{ctx:r}}});let f=je(r[1]);const u=p=>p[16].id;for(let p=0;p<f.length;p+=1){let g=Vn(r,f,p),S=u(g);l.set(S,o[p]=Kn(S,g))}return{c(){s&&s.c(),e=L(),h(n.$$.fragment),t=L();for(let p=0;p<o.length;p+=1)o[p].c();i=me()},m(p,g){s&&s.m(p,g),$(p,e,g),b(n,p,g),$(p,t,g);for(let S=0;S<o.length;S+=1)o[S]&&o[S].m(p,g);$(p,i,g),a=!0},p(p,g){var w;p[2]&&((w=p[2].properties)!=null&&w.length)?s?s.p(p,g):(s=Xn(p),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null);const S={};g&524288&&(S.$$scope={dirty:g,ctx:p}),n.$set(S),g&130&&(f=je(p[1]),te(),o=to(o,g,u,1,p,f,l,i.parentNode,no,Kn,i,Vn),ne())},i(p){if(!a){m(n.$$.fragment,p);for(let g=0;g<f.length;g+=1)m(o[g]);a=!0}},o(p){_(n.$$.fragment,p);for(let g=0;g<o.length;g+=1)_(o[g]);a=!1},d(p){p&&(d(e),d(t),d(i)),s&&s.d(p),v(n,p);for(let g=0;g<o.length;g+=1)o[g].d(p)}}}function Xn(r){var i;let e,n,t=((i=r[2].properties)==null?void 0:i.length)+"",o,l;return{c(){e=M("p"),n=y("Length: "),o=y(t),l=y("m")},m(a,s){$(a,e,s),T(e,n),T(e,o),T(e,l)},p(a,s){var f;s&4&&t!==(t=((f=a[2].properties)==null?void 0:f.length)+"")&&U(o,t)},d(a){a&&d(e)}}}function wi(r){let e;return{c(){e=M("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and Drag</b>
        an existing waypoint to move it</li> <li><b>Hold shift and click on</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(n,t){$(n,e,t)},p:x,d(n){n&&d(e)}}}function Kn(r,e){let n,t,o,l;function i(s){e[8](s,e[16])}let a={markerPositionUpdated:e[7]};return e[16].lngLat!==void 0&&(a.markerPosition=e[16].lngLat),t=new gi({props:a}),X.push(()=>Y(t,"markerPosition",i)),{key:r,first:null,c(){n=me(),h(t.$$.fragment),this.first=n},m(s,f){$(s,n,f),b(t,s,f),l=!0},p(s,f){e=s;const u={};!o&&f&2&&(o=!0,u.markerPosition=e[16].lngLat,J(()=>o=!1)),t.$set(u)},i(s){l||(m(t.$$.fragment,s),l=!0)},o(s){_(t.$$.fragment,s),l=!1},d(s){s&&d(n),v(t,s)}}}function yi(r){let e,n,t,o,l,i,a;const s=[hi,_i],f=[];function u(p,g){return p[0]?0:1}e=u(r),n=f[e]=s[e](r);let c=!r[0]&&qn(r);return{c(){n.c(),t=L(),c&&c.c(),o=me()},m(p,g){f[e].m(p,g),$(p,t,g),c&&c.m(p,g),$(p,o,g),l=!0,i||(a=[ut(window,"keydown",r[5]),ut(window,"keyup",r[6])],i=!0)},p(p,[g]){let S=e;e=u(p),e===S?f[e].p(p,g):(te(),_(f[S],1,1,()=>{f[S]=null}),ne(),n=f[e],n?n.p(p,g):(n=f[e]=s[e](p),n.c()),m(n,1),n.m(t.parentNode,t)),p[0]?c&&(te(),_(c,1,1,()=>{c=null}),ne()):c?(c.p(p,g),g&1&&m(c,1)):(c=qn(p),c.c(),m(c,1),c.m(o.parentNode,o))},i(p){l||(m(n),m(c),l=!0)},o(p){_(n),_(c),l=!1},d(p){p&&(d(t),d(o)),f[e].d(p),c&&c.d(p),i=!1,eo(a)}}}const et="measurement-line";function ki(r,e,n){let t;oe(r,mt,B=>n(11,t=B));let o=!0,l=[],i,a=!1,s=0;function f(B){o||(a||(l.push({id:s++,lngLat:B.lngLat}),n(1,l),w()),a&&l.length>0&&(u(B.lngLat),w()))}function u(B){let N=new Yt.LngLat(0,-90).distanceTo(new Yt.LngLat(0,90)),F;l.forEach(A=>{const E=A.lngLat;N>=B.distanceTo(E)&&(F=E,N=B.distanceTo(E))}),F&&n(1,l=l.filter(A=>{const E=A.lngLat;return E.lng!=(F==null?void 0:F.lng)||E.lat!=(F==null?void 0:F.lat)}))}function c(){n(0,o=!1)}function p(){n(0,o=!0),n(1,l=[]),C()}function g(B){B.key==="Shift"&&(a=!0),B.key==="Escape"&&p()}function S(B){B.key==="Shift"&&(a=!1)}function w(){if(l.length<2){C();return}const B=l.map(P=>[P.lngLat.lng,P.lngLat.lat]);n(2,i=ro(B,{})),i.properties&&n(2,i.properties.length=(wo(i)*1e3).toFixed(2),i),k()}function C(){t.getSource(et)&&(t.getSource(et).setData(sn()),n(2,i=void 0))}function k(){t.getSource(et)?t.getSource(et).setData(i):(oo(t,et,i),lo(t,{id:et,source:et,color:mo.measuringLine,width:5}))}pt(()=>{t.on("click",f)}),ct(()=>{t.off("click",f)});function I(B,P){r.$$.not_equal(P.lngLat,B)&&(P.lngLat=B,n(1,l))}return[o,l,i,c,p,g,S,w,I]}class Si extends G{constructor(e){super(),V(this,e,ki,yi,z,{})}}function Ci(r){let e;return{c(){e=y(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Ti(r){let e,n,t,o,l;return t=new K({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ci]},$$scope:{ctx:r}}}),{c(){e=M("p"),n=y("License: "),h(t.$$.fragment),o=y(`. Contains OS data © Crown copyright and database right
  2023.`)},m(i,a){$(i,e,a),T(e,n),b(t,e,null),T(e,o),l=!0},p(i,[a]){const s={};a&1&&(s.$$scope={dirty:a,ctx:i}),t.$set(s)},i(i){l||(m(t.$$.fragment,i),l=!0)},o(i){_(t.$$.fragment,i),l=!1},d(i){i&&d(e),v(t)}}}class Ge extends G{constructor(e){super(),V(this,e,null,Ti,z,{})}}function Zn(r,e,n){const t=r.slice();return t[2]=e[n],t}function Yn(r,e,n){const t=r.slice();return t[5]=e[n],t}function Jn(r){let e,n;return{c(){e=M("span"),n=y(` 
    `),He(e,"background",r[5]),He(e,"width","100%"),He(e,"border","1px solid black")},m(t,o){$(t,e,o),T(e,n)},p(t,o){o&1&&He(e,"background",t[5])},d(t){t&&d(e)}}}function Qn(r){let e,n=r[2]+"",t;return{c(){e=M("span"),t=y(n)},m(o,l){$(o,e,l),T(e,t)},p(o,l){l&2&&n!==(n=o[2]+"")&&U(t,n)},d(o){o&&d(e)}}}function Li(r){let e,n,t,o=je(r[0]),l=[];for(let s=0;s<o.length;s+=1)l[s]=Jn(Yn(r,o,s));let i=je(r[1]),a=[];for(let s=0;s<i.length;s+=1)a[s]=Qn(Zn(r,i,s));return{c(){e=M("div");for(let s=0;s<l.length;s+=1)l[s].c();n=L(),t=M("div");for(let s=0;s<a.length;s+=1)a[s].c();He(e,"display","flex"),He(t,"display","flex"),He(t,"justify-content","space-between")},m(s,f){$(s,e,f);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(e,null);$(s,n,f),$(s,t,f);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(t,null)},p(s,[f]){if(f&1){o=je(s[0]);let u;for(u=0;u<o.length;u+=1){const c=Yn(s,o,u);l[u]?l[u].p(c,f):(l[u]=Jn(c),l[u].c(),l[u].m(e,null))}for(;u<l.length;u+=1)l[u].d(1);l.length=o.length}if(f&2){i=je(s[1]);let u;for(u=0;u<i.length;u+=1){const c=Zn(s,i,u);a[u]?a[u].p(c,f):(a[u]=Qn(c),a[u].c(),a[u].m(t,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=i.length}},i:x,o:x,d(s){s&&(d(e),d(n),d(t)),Tt(l,s),Tt(a,s)}}}function Oi(r,e,n){let{colorScale:t}=e,{limits:o}=e;return r.$$set=l=>{"colorScale"in l&&n(0,t=l.colorScale),"limits"in l&&n(1,o=l.limits)},[t,o]}class Qe extends G{constructor(e){super(),V(this,e,Oi,Li,z,{colorScale:0,limits:1})}}function xn(r){const e=r[15][0].properties.OA21CD;r[16]=e;const n=r[15][0].properties[r[3]];r[17]=n}function Ai(r){let e;return{c(){e=y("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Ii(r){let e;return{c(){e=y(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Pi(r){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Mi(r){let e;return{c(){e=y(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Ei(r){let e,n,t,o,l,i,a,s,f,u,c,p;return t=new K({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ii]},$$scope:{ctx:r}}}),l=new K({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Pi]},$$scope:{ctx:r}}}),u=new K({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Mi]},$$scope:{ctx:r}}}),{c(){e=M("p"),n=y("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),o=y(". Output area boundaries from "),h(l.$$.fragment),i=y("."),a=L(),s=M("p"),f=y("License: "),h(u.$$.fragment),c=y(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(g,S){$(g,e,S),T(e,n),b(t,e,null),T(e,o),b(l,e,null),T(e,i),$(g,a,S),$(g,s,S),T(s,f),b(u,s,null),T(s,c),p=!0},p(g,S){const w={};S&262144&&(w.$$scope={dirty:S,ctx:g}),t.$set(w);const C={};S&262144&&(C.$$scope={dirty:S,ctx:g}),l.$set(C);const k={};S&262144&&(k.$$scope={dirty:S,ctx:g}),u.$set(k)},i(g){p||(m(t.$$.fragment,g),m(l.$$.fragment,g),m(u.$$.fragment,g),p=!0)},o(g){_(t.$$.fragment,g),_(l.$$.fragment,g),_(u.$$.fragment,g),p=!1},d(g){g&&(d(e),d(a),d(s)),v(t),v(l),v(u)}}}function Ni(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Ei]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),Z(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&262144&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function er(r){let e,n;return e=new Qe({props:{colorScale:r[6],limits:r[8]()}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:x,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Di(r){let e;return{c(){e=y("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Fi(r){let e;return{c(){e=y(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function ji(r){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Bi(r){let e;return{c(){e=y(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Hi(r){let e,n,t,o,l,i,a,s,f,u,c,p,g,S;return l=new K({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Fi]},$$scope:{ctx:r}}}),a=new K({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ji]},$$scope:{ctx:r}}}),p=new K({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Bi]},$$scope:{ctx:r}}}),{c(){e=M("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=L(),t=M("p"),o=y("Car/van availability data is from the 2021 census, via "),h(l.$$.fragment),i=y(". Output area boundaries from "),h(a.$$.fragment),s=y("."),f=L(),u=M("p"),c=y("License: "),h(p.$$.fragment),g=y(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(w,C){$(w,e,C),$(w,n,C),$(w,t,C),T(t,o),b(l,t,null),T(t,i),b(a,t,null),T(t,s),$(w,f,C),$(w,u,C),T(u,c),b(p,u,null),T(u,g),S=!0},p(w,C){const k={};C&262144&&(k.$$scope={dirty:C,ctx:w}),l.$set(k);const I={};C&262144&&(I.$$scope={dirty:C,ctx:w}),a.$set(I);const B={};C&262144&&(B.$$scope={dirty:C,ctx:w}),p.$set(B)},i(w){S||(m(l.$$.fragment,w),m(a.$$.fragment,w),m(p.$$.fragment,w),S=!0)},o(w){_(l.$$.fragment,w),_(a.$$.fragment,w),_(p.$$.fragment,w),S=!1},d(w){w&&(d(e),d(n),d(t),d(f),d(u)),v(l),v(a),v(p)}}}function Ri(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Hi]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),Z(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&262144&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function tr(r){let e,n;return e=new Qe({props:{colorScale:r[6],limits:r[8]()}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:x,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wi(r){let e;return{c(){e=y("Population density")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function zi(r){let e;return{c(){e=y(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Ui(r){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Gi(r){let e,n,t,o,l,i,a,s,f;return t=new K({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[zi]},$$scope:{ctx:r}}}),l=new K({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ui]},$$scope:{ctx:r}}}),s=new Ge({}),{c(){e=M("p"),n=y("Population density data is from the 2021 census, via "),h(t.$$.fragment),o=y(". Output area boundaries from "),h(l.$$.fragment),i=y("."),a=L(),h(s.$$.fragment)},m(u,c){$(u,e,c),T(e,n),b(t,e,null),T(e,o),b(l,e,null),T(e,i),$(u,a,c),b(s,u,c),f=!0},p(u,c){const p={};c&262144&&(p.$$scope={dirty:c,ctx:u}),t.$set(p);const g={};c&262144&&(g.$$scope={dirty:c,ctx:u}),l.$set(g)},i(u){f||(m(t.$$.fragment,u),m(l.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),_(l.$$.fragment,u),_(s.$$.fragment,u),f=!1},d(u){u&&(d(e),d(a)),v(t),v(l),v(s,u)}}}function Vi(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Gi]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),Z(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&262144&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function nr(r){let e,n,t,o;return t=new Qe({props:{colorScale:r[6],limits:r[8]().map(xi)}}),{c(){e=M("p"),e.textContent="(people per square kilometres)",n=L(),h(t.$$.fragment)},m(l,i){$(l,e,i),$(l,n,i),b(t,l,i),o=!0},p:x,i(l){o||(m(t.$$.fragment,l),o=!0)},o(l){_(t.$$.fragment,l),o=!1},d(l){l&&(d(e),d(n)),v(t,l)}}}function qi(r){let e,n,t,o=r[17].toLocaleString()+"",l,i,a=r[16]+"",s;return{c(){e=M("p"),n=y("There are "),t=M("b"),l=y(o),i=y(`
          people per square kilometre in `),s=y(a)},m(f,u){$(f,e,u),T(e,n),T(e,t),T(t,l),T(e,i),T(e,s)},p(f,u){u&32776&&o!==(o=f[17].toLocaleString()+"")&&U(l,o),u&32768&&a!==(a=f[16]+"")&&U(s,a)},d(f){f&&d(e)}}}function Xi(r){let e,n,t=r[16]+"",o,l,i,a=r[17]+"",s,f;return{c(){e=M("p"),n=y("Households in "),o=y(t),l=y(` have an average of
          `),i=M("b"),s=y(a),f=y(`
           cars`)},m(u,c){$(u,e,c),T(e,n),T(e,o),T(e,l),T(e,i),T(i,s),T(e,f)},p(u,c){c&32768&&t!==(t=u[16]+"")&&U(o,t),c&32776&&a!==(a=u[17]+"")&&U(s,a)},d(u){u&&d(e)}}}function Ki(r){let e,n,t=r[17]+"",o,l,i,a=r[16]+"",s,f;return{c(){e=M("p"),n=M("b"),o=y(t),l=y("%"),i=y(`
          of households in `),s=y(a),f=y(" have 1 or more cars")},m(u,c){$(u,e,c),T(e,n),T(n,o),T(n,l),T(e,i),T(e,s),T(e,f)},p(u,c){c&32776&&t!==(t=u[17]+"")&&U(o,t),c&32768&&a!==(a=u[16]+"")&&U(s,a)},d(u){u&&d(e)}}}function Zi(r){xn(r);let e;function n(l,i){return l[3]=="percent_households_with_car"?Ki:l[3]=="average_cars_per_household"?Xi:qi}let t=n(r),o=t(r);return{c(){o.c(),e=me()},m(l,i){o.m(l,i),$(l,e,i)},p(l,i){xn(l),t===(t=n(l))&&o?o.p(l,i):(o.d(1),o=t(l),o&&(o.c(),o.m(e.parentNode,e)))},d(l){l&&d(e),o.d(l)}}}function Yi(r){let e,n;return e=new ue({props:{openOn:"hover",$$slots:{default:[Zi,({features:t})=>({15:t}),({features:t})=>t?32768:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&294920&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ji(r){let e,n,t,o;return e=new Je({props:{id:It,sourceLayer:It,paint:{"fill-color":Ee(["get",r[3]],r[8](),r[6]),"fill-opacity":fe(.5,.7)},layout:{visibility:r[4]},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[Yi]},$$scope:{ctx:r}}}),e.$on("click",r[7]),t=new he({props:{id:r[5],paint:{"line-color":"black","line-width":.5},layout:{visibility:r[4]}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&8&&(a.paint={"fill-color":Ee(["get",l[3]],l[8](),l[6]),"fill-opacity":fe(.5,.7)}),i&16&&(a.layout={visibility:l[4]}),i&262152&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&16&&(s.layout={visibility:l[4]}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function Qi(r){let e,n,t,o,l,i,a,s,f,u,c,p,g,S;function w(E){r[9](E)}let C={id:"percent_households_with_car",$$slots:{right:[Ni],default:[Ai]},$$scope:{ctx:r}};r[0]!==void 0&&(C.checked=r[0]),e=new ie({props:C}),X.push(()=>Y(e,"checked",w)),e.$on("change",r[10]);let k=r[3]=="percent_households_with_car"&&er(r);function I(E){r[11](E)}let B={id:"average_cars_per_household",$$slots:{right:[Ri],default:[Di]},$$scope:{ctx:r}};r[1]!==void 0&&(B.checked=r[1]),l=new ie({props:B}),X.push(()=>Y(l,"checked",I)),l.$on("change",r[12]);let P=r[3]=="average_cars_per_household"&&tr(r);function N(E){r[13](E)}let F={id:"population_density",$$slots:{right:[Vi],default:[Wi]},$$scope:{ctx:r}};r[2]!==void 0&&(F.checked=r[2]),f=new ie({props:F}),X.push(()=>Y(f,"checked",N)),f.$on("change",r[14]);let A=r[3]=="population_density"&&nr(r);return g=new de({props:{url:`pmtiles://${pe()}/v1/${It}.pmtiles`,$$slots:{default:[Ji]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),k&&k.c(),o=L(),h(l.$$.fragment),a=L(),P&&P.c(),s=L(),h(f.$$.fragment),c=L(),A&&A.c(),p=L(),h(g.$$.fragment)},m(E,D){b(e,E,D),$(E,t,D),k&&k.m(E,D),$(E,o,D),b(l,E,D),$(E,a,D),P&&P.m(E,D),$(E,s,D),b(f,E,D),$(E,c,D),A&&A.m(E,D),$(E,p,D),b(g,E,D),S=!0},p(E,[D]){const O={};D&262144&&(O.$$scope={dirty:D,ctx:E}),!n&&D&1&&(n=!0,O.checked=E[0],J(()=>n=!1)),e.$set(O),E[3]=="percent_households_with_car"?k?(k.p(E,D),D&8&&m(k,1)):(k=er(E),k.c(),m(k,1),k.m(o.parentNode,o)):k&&(te(),_(k,1,1,()=>{k=null}),ne());const H={};D&262144&&(H.$$scope={dirty:D,ctx:E}),!i&&D&2&&(i=!0,H.checked=E[1],J(()=>i=!1)),l.$set(H),E[3]=="average_cars_per_household"?P?(P.p(E,D),D&8&&m(P,1)):(P=tr(E),P.c(),m(P,1),P.m(s.parentNode,s)):P&&(te(),_(P,1,1,()=>{P=null}),ne());const W={};D&262144&&(W.$$scope={dirty:D,ctx:E}),!u&&D&4&&(u=!0,W.checked=E[2],J(()=>u=!1)),f.$set(W),E[3]=="population_density"?A?(A.p(E,D),D&8&&m(A,1)):(A=nr(E),A.c(),m(A,1),A.m(p.parentNode,p)):A&&(te(),_(A,1,1,()=>{A=null}),ne());const q={};D&262168&&(q.$$scope={dirty:D,ctx:E}),g.$set(q)},i(E){S||(m(e.$$.fragment,E),m(k),m(l.$$.fragment,E),m(P),m(f.$$.fragment,E),m(A),m(g.$$.fragment,E),S=!0)},o(E){_(e.$$.fragment,E),_(k),_(l.$$.fragment,E),_(P),_(f.$$.fragment,E),_(A),_(g.$$.fragment,E),S=!1},d(E){E&&(d(t),d(o),d(a),d(s),d(c),d(p)),v(e,E),k&&k.d(E),v(l,E),P&&P.d(E),v(f,E),A&&A.d(E),v(g,E)}}}let It="census_output_areas";const xi=r=>r.toLocaleString();function ea(r,e,n){let t,o=`${It}-outline`,l=Q.sequential_low_to_high,i=!1,a=!1,s=!1,f="";function u(I){let B=I.detail.features[0].properties.OA21CD;f=="percent_households_with_car"||f=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${B}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${B}`,"_blank")}function c(){return f=="percent_households_with_car"?[0,20,40,60,80,100]:f=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function p(I){i=I,n(0,i)}const g=()=>{n(1,a=!1),n(2,s=!1)};function S(I){a=I,n(1,a)}const w=()=>{n(0,i=!1),n(2,s=!1)};function C(I){s=I,n(2,s)}const k=()=>{n(0,i=!1),n(1,a=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(i?n(3,f="percent_households_with_car"):a?n(3,f="average_cars_per_household"):s?n(3,f="population_density"):n(3,f="")),r.$$.dirty&8&&n(4,t=f!=""?"visible":"none")},[i,a,s,f,t,o,l,u,c,p,g,S,w,C,k]}class ta extends G{constructor(e){super(),V(this,e,ea,Qi,z,{})}}function na(r){let e,n,t;return e=new ke({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=y(`
  Combined authorities`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:x,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function ra(r){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function oa(r){let e,n,t,o,l,i,a;return t=new K({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[ra]},$$scope:{ctx:r}}}),i=new Ge({}),{c(){e=M("p"),n=y("Data from "),h(t.$$.fragment),o=y(", as of December 2022."),l=L(),h(i.$$.fragment)},m(s,f){$(s,e,f),T(e,n),b(t,e,null),T(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function la(r){let e,n,t;return n=new ae({props:{$$slots:{default:[oa]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),Z(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function sa(r){let e,n=r[5][0].properties.name+"",t;return{c(){e=M("p"),t=y(n)},m(o,l){$(o,e,l),T(e,t)},p(o,l){l&32&&n!==(n=o[5][0].properties.name+"")&&U(t,n)},d(o){o&&d(e)}}}function ia(r){let e,n;return e=new ue({props:{openOn:"hover",$$slots:{default:[sa,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&96&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function aa(r){let e,n,t,o;return e=new Je({props:{id:Pt,paint:{"fill-color":r[2],"fill-opacity":fe(0,.5)},layout:{visibility:r[1]},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[ia]},$$scope:{ctx:r}}}),e.$on("click",ua),t=new he({props:{id:r[3],paint:{"line-color":r[2],"line-width":2.5},layout:{visibility:r[1]}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&2&&(a.layout={visibility:l[1]}),i&64&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&2&&(s.layout={visibility:l[1]}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function fa(r){let e,n,t,o,l;function i(s){r[4](s)}let a={id:Pt,$$slots:{right:[la],default:[na]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ie({props:a}),X.push(()=>Y(e,"checked",i)),o=new un({props:{data:`${pe()}/v1/${Pt}.geojson`,$$slots:{default:[aa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&66&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let Pt="combined_authorities";function ua(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function ca(r,e,n){let t,o=Q.combined_authorities,l=`${Pt}-outline`,i=!1;function a(s){i=s,n(0,i)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=i?"visible":"none")},[i,t,o,l,a]}class pa extends G{constructor(e){super(),V(this,e,ca,fa,z,{})}}function rr(r){const e=r[6][0].properties;r[7]=e}function ma(r){let e;return{c(){e=y("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function $a(r){let e;return{c(){e=y(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function da(r){let e;return{c(){e=y(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function ga(r){let e,n,t,o,l,i,a,s,f;return t=new K({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[$a]},$$scope:{ctx:r}}}),l=new K({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[da]},$$scope:{ctx:r}}}),s=new Ge({}),{c(){e=M("p"),n=y("The 2019 English IMD scores come from "),h(t.$$.fragment),o=y(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(l.$$.fragment),i=y("."),a=L(),h(s.$$.fragment)},m(u,c){$(u,e,c),T(e,n),b(t,e,null),T(e,o),b(l,e,null),T(e,i),$(u,a,c),b(s,u,c),f=!0},p(u,c){const p={};c&256&&(p.$$scope={dirty:c,ctx:u}),t.$set(p);const g={};c&256&&(g.$$scope={dirty:c,ctx:u}),l.$set(g)},i(u){f||(m(t.$$.fragment,u),m(l.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),_(l.$$.fragment,u),_(s.$$.fragment,u),f=!1},d(u){u&&(d(e),d(a)),v(t),v(l),v(s,u)}}}function _a(r){let e,n,t;return n=new ae({props:{$$slots:{default:[ga]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),Z(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&256&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function or(r){let e,n;return e=new Qe({props:{colorScale:r[3],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:x,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ha(r){rr(r);let e,n=r[7].LSOA11CD+"",t,o,l,i=r[7].score+"",a,s,f,u,c,p=r[7].rank.toLocaleString()+"",g,S;return{c(){e=M("p"),t=y(n),o=y(` has an IMD score of
        `),l=M("b"),a=y(i),s=L(),f=M("p"),u=y("Rank: "),c=M("b"),g=y(p),S=y(`
        / 32,844 LSOAs`)},m(w,C){$(w,e,C),T(e,t),T(e,o),T(e,l),T(l,a),$(w,s,C),$(w,f,C),T(f,u),T(f,c),T(c,g),T(f,S)},p(w,C){rr(w),C&64&&n!==(n=w[7].LSOA11CD+"")&&U(t,n),C&64&&i!==(i=w[7].score+"")&&U(a,i),C&64&&p!==(p=w[7].rank.toLocaleString()+"")&&U(g,p)},d(w){w&&(d(e),d(s),d(f))}}}function ba(r){let e,n;return e=new ue({props:{openOn:"hover",$$slots:{default:[ha,({features:t})=>({6:t}),({features:t})=>t?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&320&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function va(r){let e,n,t,o;return e=new Je({props:{id:vt,sourceLayer:vt,paint:{"fill-color":Ee(["-",10,["get","decile"]],r[4],r[3]),"fill-opacity":fe(.5,.7)},layout:{visibility:r[1]},manageHoverState:!0,$$slots:{default:[ba]},$$scope:{ctx:r}}}),t=new he({props:{id:r[2],paint:{"line-color":"black","line-width":.5},layout:{visibility:r[1]}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&2&&(a.layout={visibility:l[1]}),i&256&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&2&&(s.layout={visibility:l[1]}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function wa(r){let e,n,t,o,l,i;function a(u){r[5](u)}let s={id:vt,$$slots:{right:[_a],default:[ma]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ie({props:s}),X.push(()=>Y(e,"checked",a));let f=r[0]&&or(r);return l=new de({props:{url:`pmtiles://${pe()}/v1/${vt}.pmtiles`,$$slots:{default:[va]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),f&&f.c(),o=L(),h(l.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),f&&f.m(u,c),$(u,o,c),b(l,u,c),i=!0},p(u,[c]){const p={};c&256&&(p.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,p.checked=u[0],J(()=>n=!1)),e.$set(p),u[0]?f?(f.p(u,c),c&1&&m(f,1)):(f=or(u),f.c(),m(f,1),f.m(o.parentNode,o)):f&&(te(),_(f,1,1,()=>{f=null}),ne());const g={};c&258&&(g.$$scope={dirty:c,ctx:u}),l.$set(g)},i(u){i||(m(e.$$.fragment,u),m(f),m(l.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),_(f),_(l.$$.fragment,u),i=!1},d(u){u&&(d(t),d(o)),v(e,u),f&&f.d(u),v(l,u)}}}let vt="imd";function ya(r,e,n){let t,o=`${vt}-outline`,l=Q.sequential_low_to_high,i=[0,2,4,6,8,10],a=!1;function s(f){a=f,n(0,a)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=a?"visible":"none")},[a,t,o,l,i,s]}class ka extends G{constructor(e){super(),V(this,e,ya,wa,z,{})}}function Sa(r){let e,n,t;return e=new ke({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=y(`
  Local Authority Districts`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:x,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function Ca(r){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Ta(r){let e,n,t,o,l,i,a;return t=new K({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Ca]},$$scope:{ctx:r}}}),i=new Ge({}),{c(){e=M("p"),n=y("Data from "),h(t.$$.fragment),o=y(", as of May 2023."),l=L(),h(i.$$.fragment)},m(s,f){$(s,e,f),T(e,n),b(t,e,null),T(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function La(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Ta]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),Z(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function Oa(r){let e,n=r[5][0].properties.name+"",t;return{c(){e=M("p"),t=y(n)},m(o,l){$(o,e,l),T(e,t)},p(o,l){l&32&&n!==(n=o[5][0].properties.name+"")&&U(t,n)},d(o){o&&d(e)}}}function Aa(r){let e,n;return e=new ue({props:{openOn:"hover",$$slots:{default:[Oa,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&96&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ia(r){let e,n,t,o;return e=new Je({props:{id:Mt,paint:{"fill-color":r[2],"fill-opacity":fe(0,.5)},layout:{visibility:r[1]},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[Aa]},$$scope:{ctx:r}}}),e.$on("click",Ma),t=new he({props:{id:r[3],paint:{"line-color":r[2],"line-width":2.5},layout:{visibility:r[1]}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&2&&(a.layout={visibility:l[1]}),i&64&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&2&&(s.layout={visibility:l[1]}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function Pa(r){let e,n,t,o,l;function i(s){r[4](s)}let a={id:Mt,$$slots:{right:[La],default:[Sa]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ie({props:a}),X.push(()=>Y(e,"checked",i)),o=new un({props:{data:`${pe()}/v1/${Mt}.geojson`,$$slots:{default:[Ia]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&66&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let Mt="local_authority_districts";function Ma(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function Ea(r,e,n){let t,o=Q.local_authority_districts,l=`${Mt}-outline`,i=!1;function a(s){i=s,n(0,i)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=i?"visible":"none")},[i,t,o,l,a]}class Na extends G{constructor(e){super(),V(this,e,Ea,Pa,z,{})}}function Da(r){let e,n,t;return e=new ke({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=y(`
  Local Planning Authorities`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:x,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function Fa(r){let e;return{c(){e=y(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function ja(r){let e;return{c(){e=y(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Ba(r){let e;return{c(){e=y(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Ha(r){let e;return{c(){e=y("this map")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Ra(r){let e;return{c(){e=y(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Wa(r){let e,n,t,o,l,i,a,s,f,u,c,p,g,S,w,C,k,I,B,P,N,F;return t=new K({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Fa]},$$scope:{ctx:r}}}),l=new K({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ja]},$$scope:{ctx:r}}}),a=new K({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Ba]},$$scope:{ctx:r}}}),g=new K({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Ha]},$$scope:{ctx:r}}}),I=new K({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Ra]},$$scope:{ctx:r}}}),N=new Ge({}),{c(){e=M("p"),n=y("LPAs may be a "),h(t.$$.fragment),o=y(", "),h(l.$$.fragment),i=y("y, or "),h(a.$$.fragment),s=y("."),f=L(),u=M("p"),c=M("strong"),p=y(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(g.$$.fragment),S=y(" to get more details."),w=L(),C=M("p"),k=y("Data from ONS Geography via "),h(I.$$.fragment),B=y(", as of November 2022."),P=L(),h(N.$$.fragment)},m(A,E){$(A,e,E),T(e,n),b(t,e,null),T(e,o),b(l,e,null),T(e,i),b(a,e,null),T(e,s),$(A,f,E),$(A,u,E),T(u,c),T(c,p),b(g,c,null),T(c,S),$(A,w,E),$(A,C,E),T(C,k),b(I,C,null),T(C,B),$(A,P,E),b(N,A,E),F=!0},p(A,E){const D={};E&64&&(D.$$scope={dirty:E,ctx:A}),t.$set(D);const O={};E&64&&(O.$$scope={dirty:E,ctx:A}),l.$set(O);const H={};E&64&&(H.$$scope={dirty:E,ctx:A}),a.$set(H);const W={};E&64&&(W.$$scope={dirty:E,ctx:A}),g.$set(W);const q={};E&64&&(q.$$scope={dirty:E,ctx:A}),I.$set(q)},i(A){F||(m(t.$$.fragment,A),m(l.$$.fragment,A),m(a.$$.fragment,A),m(g.$$.fragment,A),m(I.$$.fragment,A),m(N.$$.fragment,A),F=!0)},o(A){_(t.$$.fragment,A),_(l.$$.fragment,A),_(a.$$.fragment,A),_(g.$$.fragment,A),_(I.$$.fragment,A),_(N.$$.fragment,A),F=!1},d(A){A&&(d(e),d(f),d(u),d(w),d(C),d(P)),v(t),v(l),v(a),v(g),v(I),v(N,A)}}}function za(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Wa]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),Z(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function Ua(r){let e,n=r[5][0].properties.name+"",t;return{c(){e=M("p"),t=y(n)},m(o,l){$(o,e,l),T(e,t)},p(o,l){l&32&&n!==(n=o[5][0].properties.name+"")&&U(t,n)},d(o){o&&d(e)}}}function Ga(r){let e,n;return e=new ue({props:{openOn:"hover",$$slots:{default:[Ua,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&96&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Va(r){let e,n,t,o;return e=new Je({props:{id:it,sourceLayer:it,paint:{"fill-color":r[2],"fill-opacity":fe(0,.5)},layout:{visibility:r[1]},manageHoverState:!0,$$slots:{default:[Ga]},$$scope:{ctx:r}}}),t=new he({props:{id:r[3],sourceLayer:it,paint:{"line-color":r[2],"line-width":2.5},layout:{visibility:r[1]}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&2&&(a.layout={visibility:l[1]}),i&64&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&2&&(s.layout={visibility:l[1]}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function qa(r){let e,n,t,o,l;function i(s){r[4](s)}let a={id:it,$$slots:{right:[za],default:[Da]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ie({props:a}),X.push(()=>Y(e,"checked",i)),o=new de({props:{url:`pmtiles://${pe()}/v1/${it}.pmtiles`,$$slots:{default:[Va]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&66&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let it="local_planning_authorities";function Xa(r,e,n){let t,o=Q.local_planning_authorities,l=`${it}-outline`,i=!1;function a(s){i=s,n(0,i)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=i?"visible":"none")},[i,t,o,l,a]}class Ka extends G{constructor(e){super(),V(this,e,Xa,qa,z,{})}}function Za(r){let e,n,t;return e=new ke({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=y(`
  Parliamentary constituencies`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:x,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function Ya(r){let e;return{c(){e=y(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Ja(r){let e,n,t,o,l,i,a;return t=new K({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Ya]},$$scope:{ctx:r}}}),i=new Ge({}),{c(){e=M("p"),n=y("Data from "),h(t.$$.fragment),o=y(", as of May 2023."),l=L(),h(i.$$.fragment)},m(s,f){$(s,e,f),T(e,n),b(t,e,null),T(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function Qa(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Ja]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),Z(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function xa(r){let e,n=r[5][0].properties.Name+"",t;return{c(){e=M("p"),t=y(n)},m(o,l){$(o,e,l),T(e,t)},p(o,l){l&32&&n!==(n=o[5][0].properties.Name+"")&&U(t,n)},d(o){o&&d(e)}}}function ef(r){let e,n;return e=new ue({props:{openOn:"hover",$$slots:{default:[xa,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&96&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function tf(r){let e,n,t,o;return e=new Je({props:{id:at,sourceLayer:at,paint:{"fill-color":r[2],"fill-opacity":fe(0,.5)},layout:{visibility:r[1]},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[ef]},$$scope:{ctx:r}}}),e.$on("click",rf),t=new he({props:{id:r[3],sourceLayer:at,paint:{"line-color":r[2],"line-width":5},layout:{visibility:r[1]}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&2&&(a.layout={visibility:l[1]}),i&64&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&2&&(s.layout={visibility:l[1]}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function nf(r){let e,n,t,o,l;function i(s){r[4](s)}let a={id:at,$$slots:{right:[Qa],default:[Za]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ie({props:a}),X.push(()=>Y(e,"checked",i)),o=new de({props:{url:`pmtiles://${pe()}/v1/${at}.pmtiles`,$$slots:{default:[tf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&66&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let at="parliamentary_constituencies";function rf(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function of(r,e,n){let t,o=Q.parliamentary_constituencies,l=`${at}-outline`,i=!1;function a(s){i=s,n(0,i)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=i?"visible":"none")},[i,t,o,l,a]}class lf extends G{constructor(e){super(),V(this,e,of,nf,z,{})}}function sf(r){let e,n,t;return e=new ke({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=y(`
  Wards`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:x,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function af(r){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function ff(r){let e,n,t,o,l,i,a;return t=new K({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[af]},$$scope:{ctx:r}}}),i=new Ge({}),{c(){e=M("p"),n=y("Data from "),h(t.$$.fragment),o=y(", as of May 2023."),l=L(),h(i.$$.fragment)},m(s,f){$(s,e,f),T(e,n),b(t,e,null),T(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function uf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[ff]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),Z(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function cf(r){let e,n=r[5][0].properties.name+"",t;return{c(){e=M("p"),t=y(n)},m(o,l){$(o,e,l),T(e,t)},p(o,l){l&32&&n!==(n=o[5][0].properties.name+"")&&U(t,n)},d(o){o&&d(e)}}}function pf(r){let e,n;return e=new ue({props:{openOn:"hover",$$slots:{default:[cf,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&96&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mf(r){let e,n,t,o;return e=new Je({props:{id:ft,sourceLayer:ft,paint:{"fill-color":r[2],"fill-opacity":fe(0,.5)},layout:{visibility:r[1]},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[pf]},$$scope:{ctx:r}}}),e.$on("click",df),t=new he({props:{id:r[3],sourceLayer:ft,paint:{"line-color":r[2],"line-width":2.5},layout:{visibility:r[1]}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},p(l,i){const a={};i&2&&(a.layout={visibility:l[1]}),i&64&&(a.$$scope={dirty:i,ctx:l}),e.$set(a);const s={};i&2&&(s.layout={visibility:l[1]}),t.$set(s)},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function $f(r){let e,n,t,o,l;function i(s){r[4](s)}let a={id:ft,$$slots:{right:[uf],default:[sf]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ie({props:a}),X.push(()=>Y(e,"checked",i)),o=new de({props:{url:`pmtiles://${pe()}/v1/${ft}.pmtiles`,$$slots:{default:[mf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&66&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let ft="wards";function df(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function gf(r,e,n){let t,o=Q.wards,l=`${ft}-outline`,i=!1;function a(s){i=s,n(0,i)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=i?"visible":"none")},[i,t,o,l,a]}class _f extends G{constructor(e){super(),V(this,e,gf,$f,z,{})}}function hf(r){let e;return{c(){e=y("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function bf(r){let e,n,t,o;return t=new K({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[hf]},$$scope:{ctx:r}}}),{c(){e=M("p"),n=y("License: "),h(t.$$.fragment)},m(l,i){$(l,e,i),T(e,n),b(t,e,null),o=!0},p(l,[i]){const a={};i&1&&(a.$$scope={dirty:i,ctx:l}),t.$set(a)},i(l){o||(m(t.$$.fragment,l),o=!0)},o(l){_(t.$$.fragment,l),o=!1},d(l){l&&d(e),v(t)}}}class xe extends G{constructor(e){super(),V(this,e,null,bf,z,{})}}function vf(r){let e,n,t;return e=new ke({props:{color:Q.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=y(`
  Bus routes`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:x,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function wf(r){let e;return{c(){e=y(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function yf(r){let e,n,t,o,l,i,a,s,f;return l=new K({props:{href:"https://gtfs.org",$$slots:{default:[wf]},$$scope:{ctx:r}}}),s=new xe({}),{c(){e=M("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=L(),t=M("p"),o=y("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(l.$$.fragment),i=y(`, and doesn't include which routes are run or the
        frequency of service.`),a=L(),h(s.$$.fragment)},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),T(t,o),b(l,t,null),T(t,i),$(u,a,c),b(s,u,c),f=!0},p(u,c){const p={};c&16&&(p.$$scope={dirty:c,ctx:u}),l.$set(p)},i(u){f||(m(l.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){_(l.$$.fragment,u),_(s.$$.fragment,u),f=!1},d(u){u&&(d(e),d(n),d(t),d(a)),v(l),v(s,u)}}}function kf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[yf]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),Z(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&16&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function Sf(r){let e;return{c(){e=M("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Cf(r){let e;return{c(){e=M("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Tf(r){let e;function n(l,i){return l[3][0].properties.has_bus_lane?Cf:Sf}let t=n(r),o=t(r);return{c(){o.c(),e=me()},m(l,i){o.m(l,i),$(l,e,i)},p(l,i){t!==(t=n(l))&&(o.d(1),o=t(l),o&&(o.c(),o.m(e.parentNode,e)))},d(l){l&&d(e),o.d(l)}}}function Lf(r){let e,n;return e=new ue({props:{openOn:"hover",$$slots:{default:[Tf,({features:t})=>({3:t}),({features:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&24&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Of(r){let e,n;return e=new he({props:{id:Et,sourceLayer:Et,paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Q.bus_route_with_lane,Q.bus_route_without_lane],"line-width":5,"line-opacity":fe(1,.5)},layout:{visibility:r[1]},$$slots:{default:[Lf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&16&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Af(r){let e,n,t,o,l;function i(s){r[2](s)}let a={id:Et,$$slots:{right:[kf],default:[vf]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ie({props:a}),X.push(()=>Y(e,"checked",i)),o=new de({props:{url:`pmtiles://${pe()}/v1/${Et}.pmtiles`,$$slots:{default:[Of]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&16&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&18&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let Et="bus_routes";function If(r,e,n){let t,o=!1;function l(i){o=i,n(0,o)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=o?"visible":"none")},[o,t,l]}class Pf extends G{constructor(e){super(),V(this,e,If,Af,z,{})}}function lr(r){const e=Hf(r[4][0]);r[5]=e[0],r[6]=e[1],r[7]=e[2]}function sr(r,e,n){const t=r.slice();return t[8]=e[n][0],t[9]=e[n][1],t}function Mf(r){let e;return{c(){e=y("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Ef(r){let e,n,t,o,l,i,a,s;return a=new xe({}),{c(){e=M("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=L(),t=M("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,o=L(),l=M("p"),l.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=L(),h(a.$$.fragment)},m(f,u){$(f,e,u),$(f,n,u),$(f,t,u),$(f,o,u),$(f,l,u),$(f,i,u),b(a,f,u),s=!0},p:x,i(f){s||(m(a.$$.fragment,f),s=!0)},o(f){_(a.$$.fragment,f),s=!1},d(f){f&&(d(e),d(n),d(t),d(o),d(l),d(i)),v(a,f)}}}function Nf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Ef]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),Z(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&4096&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function ir(r){let e,n,t=je(r[2]),o=[];for(let i=0;i<t.length;i+=1)o[i]=ar(sr(r,t,i));const l=i=>_(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=me()},m(i,a){for(let s=0;s<o.length;s+=1)o[s]&&o[s].m(i,a);$(i,e,a),n=!0},p(i,a){if(a&4){t=je(i[2]);let s;for(s=0;s<t.length;s+=1){const f=sr(i,t,s);o[s]?(o[s].p(f,a),m(o[s],1)):(o[s]=ar(f),o[s].c(),m(o[s],1),o[s].m(e.parentNode,e))}for(te(),s=t.length;s<o.length;s+=1)l(s);ne()}},i(i){if(!n){for(let a=0;a<t.length;a+=1)m(o[a]);n=!0}},o(i){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)_(o[a]);n=!1},d(i){i&&d(e),Tt(o,i)}}}function ar(r){let e,n,t,o=r[8]+"",l,i,a;return n=new ke({props:{color:r[9]}}),{c(){e=M("div"),h(n.$$.fragment),t=L(),l=y(o),i=L()},m(s,f){$(s,e,f),b(n,e,null),T(e,t),T(e,l),T(e,i),a=!0},p:x,i(s){a||(m(n.$$.fragment,s),a=!0)},o(s){_(n.$$.fragment,s),a=!1},d(s){s&&d(e),v(n)}}}function Df(r){lr(r);let e,n=r[5]+"",t,o,l,i,a,s=r[6]+"",f,u,c,p,g=r[7]+"",S;return{c(){e=M("h2"),t=y(n),o=L(),l=M("p"),i=y("Direction: "),a=M("b"),f=L(),u=M("p"),c=y("Width: "),p=M("b"),S=y(g)},m(w,C){$(w,e,C),T(e,t),$(w,o,C),$(w,l,C),T(l,i),T(l,a),a.innerHTML=s,$(w,f,C),$(w,u,C),T(u,c),T(u,p),T(p,S)},p(w,C){lr(w),C&16&&n!==(n=w[5]+"")&&U(t,n),C&16&&s!==(s=w[6]+"")&&(a.innerHTML=s),C&16&&g!==(g=w[7]+"")&&U(S,g)},d(w){w&&(d(e),d(o),d(l),d(f),d(u))}}}function Ff(r){let e,n;return e=new ue({props:{openOn:"hover",$$slots:{default:[Df,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&4112&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function jf(r){let e,n;return e=new he({props:{id:Nt,sourceLayer:Nt,paint:{"line-color":kr(["get","kind"],{track:Q.cycle_paths.track,lane:Q.cycle_paths.lane,shared_use_segregated:Q.cycle_paths.shared_use_segregated,shared_use_unsegregated:Q.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ye,"line-opacity":fe(1,.5)},layout:{visibility:r[1]},hoverCursor:"pointer",$$slots:{default:[Ff]},$$scope:{ctx:r}}}),e.$on("click",Rf),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&4096&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Bf(r){let e,n,t,o,l,i;function a(u){r[3](u)}let s={id:Nt,$$slots:{right:[Nf],default:[Mf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ie({props:s}),X.push(()=>Y(e,"checked",a));let f=r[0]&&ir(r);return l=new de({props:{url:`pmtiles://${pe()}/v1/${Nt}.pmtiles`,$$slots:{default:[jf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),f&&f.c(),o=L(),h(l.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),f&&f.m(u,c),$(u,o,c),b(l,u,c),i=!0},p(u,[c]){const p={};c&4096&&(p.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,p.checked=u[0],J(()=>n=!1)),e.$set(p),u[0]?f?(f.p(u,c),c&1&&m(f,1)):(f=ir(u),f.c(),m(f,1),f.m(o.parentNode,o)):f&&(te(),_(f,1,1,()=>{f=null}),ne());const g={};c&4098&&(g.$$scope={dirty:c,ctx:u}),l.$set(g)},i(u){i||(m(e.$$.fragment,u),m(f),m(l.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),_(f),_(l.$$.fragment,u),i=!1},d(u){u&&(d(t),d(o)),v(e,u),f&&f.d(u),v(l,u)}}}let Nt="cycle_paths";function Hf(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.properties.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.properties.direction],t=r.properties.width=="unknown"?"unknown":`${r.properties.width} meters`;return[e,`${n} ${r.properties.direction}`,t]}function Rf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Wf(r,e,n){let t,o=[["Separated tracks",Q.cycle_paths.track],["Unprotected lanes",Q.cycle_paths.lane],["Shared-use (segregated)",Q.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",Q.cycle_paths.shared_use_unsegregated]],l=!1;function i(a){l=a,n(0,l)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=l?"visible":"none")},[l,t,o,i]}class zf extends G{constructor(e){super(),V(this,e,Wf,Bf,z,{})}}function fr(r){const e=r[4][0].properties.name??"Unknown MRN road";r[5]=e}function Uf(r){let e,n,t;return e=new ke({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=y(`
  Major Road Network`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:x,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function Gf(r){let e;return{c(){e=y(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Vf(r){let e,n,t,o,l,i,a;return t=new K({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Gf]},$$scope:{ctx:r}}}),i=new Ge({}),{c(){e=M("p"),n=y("Data from the "),h(t.$$.fragment),o=y(", as of September 2021."),l=L(),h(i.$$.fragment)},m(s,f){$(s,e,f),T(e,n),b(t,e,null),T(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function qf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Vf]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),Z(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function Xf(r){fr(r);let e,n=r[5]+"",t;return{c(){e=M("p"),t=y(n)},m(o,l){$(o,e,l),T(e,t)},p(o,l){fr(o),l&16&&n!==(n=o[5]+"")&&U(t,n)},d(o){o&&d(e)}}}function Kf(r){let e,n;return e=new ue({props:{openOn:"hover",$$slots:{default:[Xf,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&80&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zf(r){let e,n;return e=new he({props:{id:Dt,sourceLayer:Dt,paint:{"line-color":r[2],"line-width":7,"line-opacity":fe(1,.5)},layout:{visibility:r[1]},$$slots:{default:[Kf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&64&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Yf(r){let e,n,t,o,l;function i(s){r[3](s)}let a={id:Dt,$$slots:{right:[qf],default:[Uf]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ie({props:a}),X.push(()=>Y(e,"checked",i)),o=new de({props:{url:`pmtiles://${pe()}/v1/${Dt}.pmtiles`,$$slots:{default:[Zf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&64&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&66&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let Dt="mrn";function Jf(r,e,n){let t,o=Q.mrn,l=!1;function i(a){l=a,n(0,l)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=l?"visible":"none")},[l,t,o,i]}class Qf extends G{constructor(e){super(),V(this,e,Jf,Yf,z,{})}}function xf(r){let e;return{c(){e=y("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function eu(r){let e;return{c(){e=y("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function tu(r){let e;return{c(){e=y("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function nu(r){let e,n,t,o,l,i,a,s,f,u,c;return a=new K({props:{href:"https://www.pct.bike",$$slots:{default:[eu]},$$scope:{ctx:r}}}),f=new K({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[tu]},$$scope:{ctx:r}}}),{c(){e=M("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=L(),t=M("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,o=L(),l=M("p"),i=y("See "),h(a.$$.fragment),s=y(" and "),h(f.$$.fragment),u=y(" for details on methodology and data sources.")},m(p,g){$(p,e,g),$(p,n,g),$(p,t,g),$(p,o,g),$(p,l,g),T(l,i),b(a,l,null),T(l,s),b(f,l,null),T(l,u),c=!0},p(p,g){const S={};g&4096&&(S.$$scope={dirty:g,ctx:p}),a.$set(S);const w={};g&4096&&(w.$$scope={dirty:g,ctx:p}),f.$set(w)},i(p){c||(m(a.$$.fragment,p),m(f.$$.fragment,p),c=!0)},o(p){_(a.$$.fragment,p),_(f.$$.fragment,p),c=!1},d(p){p&&(d(e),d(n),d(t),d(o),d(l)),v(a),v(f)}}}function ru(r){let e,n,t;return n=new ae({props:{$$slots:{default:[nu]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),Z(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&4096&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function ur(r){let e,n,t,o,l,i,a,s;e=new Qe({props:{colorScale:r[5],limits:r[6]}});function f(g){r[9](g)}let u={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(u.value=r[0]),t=new Cr({props:u}),X.push(()=>Y(t,"value",f));function c(g){r[10](g)}let p={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[2]!==void 0&&(p.value=r[2]),i=new Lt({props:p}),X.push(()=>Y(i,"value",c)),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(i.$$.fragment)},m(g,S){b(e,g,S),$(g,n,S),b(t,g,S),$(g,l,S),b(i,g,S),s=!0},p(g,S){const w={};!o&&S&1&&(o=!0,w.value=g[0],J(()=>o=!1)),t.$set(w);const C={};!a&&S&4&&(a=!0,C.value=g[2],J(()=>a=!1)),i.$set(C)},i(g){s||(m(e.$$.fragment,g),m(t.$$.fragment,g),m(i.$$.fragment,g),s=!0)},o(g){_(e.$$.fragment,g),_(t.$$.fragment,g),_(i.$$.fragment,g),s=!1},d(g){g&&(d(n),d(l)),v(e,g),v(t,g),v(i,g)}}}function ou(r){let e,n=r[7](r[11][0])+"",t;return{c(){e=new Tr(!1),t=me(),e.a=t},m(o,l){e.m(n,o,l),$(o,t,l)},p(o,l){l&2048&&n!==(n=o[7](o[11][0])+"")&&e.p(n)},d(o){o&&(d(t),e.d())}}}function lu(r){let e,n;return e=new ue({props:{openOn:"hover",$$slots:{default:[ou,({features:t})=>({11:t}),({features:t})=>t?2048:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&6144&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function su(r){let e,n;return e=new he({props:{id:rt,sourceLayer:rt,paint:{"line-color":Ee(["get",r[2]],r[6],r[5]),"line-width":Ye,"line-opacity":fe(1,.5)},layout:{visibility:r[4]},$$slots:{default:[lu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&4&&(l.paint={"line-color":Ee(["get",t[2]],t[6],t[5]),"line-width":Ye,"line-opacity":fe(1,.5)}),o&16&&(l.layout={visibility:t[4]}),o&4096&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function iu(r){let e,n=r[7](r[11][0])+"",t;return{c(){e=new Tr(!1),t=me(),e.a=t},m(o,l){e.m(n,o,l),$(o,t,l)},p(o,l){l&2048&&n!==(n=o[7](o[11][0])+"")&&e.p(n)},d(o){o&&(d(t),e.d())}}}function au(r){let e,n;return e=new ue({props:{openOn:"hover",$$slots:{default:[iu,({features:t})=>({11:t}),({features:t})=>t?2048:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&6144&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fu(r){let e,n;return e=new he({props:{id:Ft,sourceLayer:Ft,paint:{"line-color":Ee(["get",r[2]],r[6],r[5]),"line-width":Ye,"line-opacity":fe(1,.5)},layout:{visibility:r[3]},$$slots:{default:[au]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&4&&(l.paint={"line-color":Ee(["get",t[2]],t[6],t[5]),"line-width":Ye,"line-opacity":fe(1,.5)}),o&8&&(l.layout={visibility:t[3]}),o&4096&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function uu(r){let e,n,t,o,l,i,a,s;function f(p){r[8](p)}let u={id:rt,$$slots:{right:[ru],default:[xf]},$$scope:{ctx:r}};r[1]!==void 0&&(u.checked=r[1]),e=new ie({props:u}),X.push(()=>Y(e,"checked",f));let c=r[1]&&ur(r);return l=new de({props:{url:`pmtiles://${pe()}/v1/${rt}.pmtiles`,$$slots:{default:[su]},$$scope:{ctx:r}}}),a=new de({props:{url:`pmtiles://${pe()}/v1/${Ft}.pmtiles`,$$slots:{default:[fu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),c&&c.c(),o=L(),h(l.$$.fragment),i=L(),h(a.$$.fragment)},m(p,g){b(e,p,g),$(p,t,g),c&&c.m(p,g),$(p,o,g),b(l,p,g),$(p,i,g),b(a,p,g),s=!0},p(p,[g]){const S={};g&4096&&(S.$$scope={dirty:g,ctx:p}),!n&&g&2&&(n=!0,S.checked=p[1],J(()=>n=!1)),e.$set(S),p[1]?c?(c.p(p,g),g&2&&m(c,1)):(c=ur(p),c.c(),m(c,1),c.m(o.parentNode,o)):c&&(te(),_(c,1,1,()=>{c=null}),ne());const w={};g&4116&&(w.$$scope={dirty:g,ctx:p}),l.$set(w);const C={};g&4108&&(C.$$scope={dirty:g,ctx:p}),a.$set(C)},i(p){s||(m(e.$$.fragment,p),m(c),m(l.$$.fragment,p),m(a.$$.fragment,p),s=!0)},o(p){_(e.$$.fragment,p),_(c),_(l.$$.fragment,p),_(a.$$.fragment,p),s=!1},d(p){p&&(d(t),d(o),d(i)),v(e,p),c&&c.d(p),v(l,p),v(a,p)}}}let rt="pct_commute",Ft="pct_school";function cu(r,e,n){let t,o,l=Q.sequential_low_to_high,i=[0,50,100,500,1e3,2e3],a=rt,s="baseline",f=!1;function u(S){let w=S.properties.baseline,C=S.properties.gov_target,k=S.properties.go_dutch,I=`<h2>Trip purpose: ${a==rt?"commuting":"school"}</h2>`;if(I+=`<p>Baseline (2011): <b>${w.toLocaleString()}</b></p>`,w==0)I+=`<p>Government target (2025): <b>${C.toLocaleString()}</b></p>`,I+=`<p>Go Dutch: <b>${k.toLocaleString()}</b></p>`;else{let B=(C/w).toFixed(1),P=(k/w).toFixed(1);I+=`<p>Government target (2025): ${C.toLocaleString()} (<b>${B}x</b> of baseline)</p>`,I+=`<p>Go Dutch: ${k.toLocaleString()} (<b>${P}x</b> of baseline)</p>`}return I}function c(S){f=S,n(1,f)}function p(S){a=S,n(0,a)}function g(S){s=S,n(2,s)}return r.$$.update=()=>{r.$$.dirty&3&&n(4,t=f&&a==rt?"visible":"none"),r.$$.dirty&3&&n(3,o=f&&a==Ft?"visible":"none")},[a,f,s,o,t,l,i,u,c,p,g]}class pu extends G{constructor(e){super(),V(this,e,cu,uu,z,{})}}function mu(r){let e;return{c(){e=y("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function $u(r){let e;return{c(){e=y("Basemap")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function du(r){let e;return{c(){e=y(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function gu(r){let e,n,t,o,l,i,a,s,f,u,c,p;return t=new K({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[$u]},$$scope:{ctx:r}}}),u=new K({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[du]},$$scope:{ctx:r}}}),{c(){e=M("p"),n=y("The average speed data is collected over a six-month period by "),h(t.$$.fragment),o=y(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),l=L(),i=M("p"),i.textContent="Data valid as of 1 September, 2023",a=L(),s=M("p"),f=y(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),c=y(".")},m(g,S){$(g,e,S),T(e,n),b(t,e,null),T(e,o),$(g,l,S),$(g,i,S),$(g,a,S),$(g,s,S),T(s,f),b(u,s,null),T(s,c),p=!0},p(g,S){const w={};S&512&&(w.$$scope={dirty:S,ctx:g}),t.$set(w);const C={};S&512&&(C.$$scope={dirty:S,ctx:g}),u.$set(C)},i(g){p||(m(t.$$.fragment,g),m(u.$$.fragment,g),p=!0)},o(g){_(t.$$.fragment,g),_(u.$$.fragment,g),p=!1},d(g){g&&(d(e),d(l),d(i),d(a),d(s)),v(t),v(u)}}}function _u(r){let e,n,t;return n=new ae({props:{$$slots:{default:[gu]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),Z(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&512&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function cr(r){let e,n,t,o,l;e=new Qe({props:{colorScale:r[3],limits:r[4]}});function i(s){r[7](s)}let a={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[1]!==void 0&&(a.value=r[1]),t=new Cr({props:a}),X.push(()=>Y(t,"value",i)),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(s,f){b(e,s,f),$(s,n,f),b(t,s,f),l=!0},p(s,f){const u={};!o&&f&2&&(o=!0,u.value=s[1],J(()=>o=!1)),t.$set(u)},i(s){l||(m(e.$$.fragment,s),m(t.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),l=!1},d(s){s&&d(n),v(e,s),v(t,s)}}}function hu(r){let e,n,t=r[8][0].properties.indicative_mph+"",o,l,i,a,s,f=r[8][0].properties.highest_mph+"",u,c,p=r[5][r[8][0].properties.highest_description]+"",g,S;return{c(){e=M("p"),n=y("Posted speed limit: "),o=y(t),l=y(" mph"),i=L(),a=M("p"),s=y("Highest average speed: "),u=y(f),c=y(" mph (during "),g=y(p),S=y(")")},m(w,C){$(w,e,C),T(e,n),T(e,o),T(e,l),$(w,i,C),$(w,a,C),T(a,s),T(a,u),T(a,c),T(a,g),T(a,S)},p(w,C){C&256&&t!==(t=w[8][0].properties.indicative_mph+"")&&U(o,t),C&256&&f!==(f=w[8][0].properties.highest_mph+"")&&U(u,f),C&256&&p!==(p=w[5][w[8][0].properties.highest_description]+"")&&U(g,p)},d(w){w&&(d(e),d(i),d(a))}}}function bu(r){let e,n;return e=new ue({props:{openOn:"hover",$$slots:{default:[hu,({features:t})=>({8:t}),({features:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&768&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vu(r){let e,n;return e=new he({props:{id:jt,sourceLayer:jt,paint:{"line-color":Ee(["get",r[1]],r[4],r[3]),"line-width":Ye,"line-opacity":fe(1,.5)},layout:{visibility:r[2]},$$slots:{default:[bu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.paint={"line-color":Ee(["get",t[1]],t[4],t[3]),"line-width":Ye,"line-opacity":fe(1,.5)}),o&4&&(l.layout={visibility:t[2]}),o&512&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wu(r){let e,n,t,o,l,i;function a(u){r[6](u)}let s={id:jt,$$slots:{right:[_u],default:[mu]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ie({props:s}),X.push(()=>Y(e,"checked",a));let f=r[0]&&cr(r);return l=new de({props:{url:`pmtiles://${an()}/v1/${jt}.pmtiles`,$$slots:{default:[vu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),f&&f.c(),o=L(),h(l.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),f&&f.m(u,c),$(u,o,c),b(l,u,c),i=!0},p(u,[c]){const p={};c&512&&(p.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,p.checked=u[0],J(()=>n=!1)),e.$set(p),u[0]?f?(f.p(u,c),c&1&&m(f,1)):(f=cr(u),f.c(),m(f,1),f.m(o.parentNode,o)):f&&(te(),_(f,1,1,()=>{f=null}),ne());const g={};c&518&&(g.$$scope={dirty:c,ctx:u}),l.$set(g)},i(u){i||(m(e.$$.fragment,u),m(f),m(l.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),_(f),_(l.$$.fragment,u),i=!1},d(u){u&&(d(t),d(o)),v(e,u),f&&f.d(u),v(l,u)}}}let jt="road_speeds";function yu(r,e,n){let t,o=Q.sequential_low_to_high,l=[0,20,30,40,50,90],i="indicative_mph",a=!1,s={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function f(c){a=c,n(0,a)}function u(c){i=c,n(1,i)}return r.$$.update=()=>{r.$$.dirty&1&&n(2,t=a?"visible":"none")},[a,i,t,o,l,s,f,u]}class ku extends G{constructor(e){super(),V(this,e,yu,wu,z,{})}}function Su(r){let e;return{c(){e=y("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Cu(r){let e;return{c(){e=y(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Tu(r){let e,n,t,o,l,i,a,s,f;return a=new K({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Cu]},$$scope:{ctx:r}}}),{c(){e=M("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=L(),t=M("p"),t.textContent="Data valid as of 1 September, 2023",o=L(),l=M("p"),i=y(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(a.$$.fragment),s=y(".")},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),$(u,o,c),$(u,l,c),T(l,i),b(a,l,null),T(l,s),f=!0},p(u,c){const p={};c&64&&(p.$$scope={dirty:c,ctx:u}),a.$set(p)},i(u){f||(m(a.$$.fragment,u),f=!0)},o(u){_(a.$$.fragment,u),f=!1},d(u){u&&(d(e),d(n),d(t),d(o),d(l)),v(a)}}}function Lu(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Tu]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),Z(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function pr(r){let e,n;return e=new Qe({props:{colorScale:r[2],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:x,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ou(r){let e,n,t,o=r[5][0].properties.average+"",l,i,a,s,f,u,c=r[5][0].properties.minimum+"",p,g;return{c(){e=M("p"),n=y("Average width: "),t=M("b"),l=y(o),i=y(`
        meters`),a=L(),s=M("p"),f=y("Minimum width: "),u=M("b"),p=y(c),g=y(`
        meters`)},m(S,w){$(S,e,w),T(e,n),T(e,t),T(t,l),T(e,i),$(S,a,w),$(S,s,w),T(s,f),T(s,u),T(u,p),T(s,g)},p(S,w){w&32&&o!==(o=S[5][0].properties.average+"")&&U(l,o),w&32&&c!==(c=S[5][0].properties.minimum+"")&&U(p,c)},d(S){S&&(d(e),d(a),d(s))}}}function Au(r){let e,n;return e=new ue({props:{openOn:"hover",$$slots:{default:[Ou,({features:t})=>({5:t}),({features:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&96&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Iu(r){let e,n;return e=new he({props:{id:Bt,sourceLayer:Bt,paint:{"line-color":Ee(["get","average"],r[3],r[2]),"line-width":Ye,"line-opacity":fe(1,.5)},layout:{visibility:r[1]},$$slots:{default:[Au]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&64&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Pu(r){let e,n,t,o,l,i;function a(u){r[4](u)}let s={id:Bt,$$slots:{right:[Lu],default:[Su]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ie({props:s}),X.push(()=>Y(e,"checked",a));let f=r[0]&&pr(r);return l=new de({props:{url:`pmtiles://${an()}/v1/${Bt}.pmtiles`,$$slots:{default:[Iu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),f&&f.c(),o=L(),h(l.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),f&&f.m(u,c),$(u,o,c),b(l,u,c),i=!0},p(u,[c]){const p={};c&64&&(p.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,p.checked=u[0],J(()=>n=!1)),e.$set(p),u[0]?f?(f.p(u,c),c&1&&m(f,1)):(f=pr(u),f.c(),m(f,1),f.m(o.parentNode,o)):f&&(te(),_(f,1,1,()=>{f=null}),ne());const g={};c&66&&(g.$$scope={dirty:c,ctx:u}),l.$set(g)},i(u){i||(m(e.$$.fragment,u),m(f),m(l.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),_(f),_(l.$$.fragment,u),i=!1},d(u){u&&(d(t),d(o)),v(e,u),f&&f.d(u),v(l,u)}}}let Bt="road_widths";function Mu(r,e,n){let t,o=Q.sequential_low_to_high,l=[0,5,10,15,20,100],i=!1;function a(s){i=s,n(0,i)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=i?"visible":"none")},[i,t,o,l,a]}class Eu extends G{constructor(e){super(),V(this,e,Mu,Pu,z,{})}}function Nu(r){let e,n,t;return{c(){e=M("input"),Z(e,"class","govuk-file-upload"),Z(e,"id","load-criticals"),Z(e,"type","file")},m(o,l){$(o,e,l),r[7](e),n||(t=ut(e,"change",r[4]),n=!0)},p:x,d(o){o&&d(e),r[7](null),n=!1,t()}}}function mr(r){let e,n;return e=new wt({props:{small:!0,$$slots:{default:[Fu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&517&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Du(r){let e,n,t=r[2].toLocaleString()+"",o,l,i;return e=new ke({props:{color:rn}}),{c(){h(e.$$.fragment),n=y(`
        Show `),o=y(t),l=y(" issues")},m(a,s){b(e,a,s),$(a,n,s),$(a,o,s),$(a,l,s),i=!0},p(a,s){(!i||s&4)&&t!==(t=a[2].toLocaleString()+"")&&U(o,t)},i(a){i||(m(e.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),i=!1},d(a){a&&(d(n),d(o),d(l)),v(e,a)}}}function Fu(r){let e,n,t;function o(i){r[8](i)}let l={id:"show-criticals",$$slots:{default:[Du]},$$scope:{ctx:r}};return r[0]!==void 0&&(l.checked=r[0]),e=new ie({props:l}),X.push(()=>Y(e,"checked",o)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const s={};a&516&&(s.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,s.checked=i[0],J(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function ju(r){let e,n,t,o,l,i;e=new Sr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[Nu]},$$scope:{ctx:r}}}),t=new Lr({props:{errorMessage:r[3]}});let a=r[2]>0&&mr(r);return{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),o=L(),a&&a.c(),l=me()},m(s,f){b(e,s,f),$(s,n,f),b(t,s,f),$(s,o,f),a&&a.m(s,f),$(s,l,f),i=!0},p(s,f){const u={};f&514&&(u.$$scope={dirty:f,ctx:s}),e.$set(u);const c={};f&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?a?(a.p(s,f),f&4&&m(a,1)):(a=mr(s),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(te(),_(a,1,1,()=>{a=null}),ne())},i(s){i||(m(e.$$.fragment,s),m(t.$$.fragment,s),m(a),i=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),_(a),i=!1},d(s){s&&(d(n),d(o),d(l)),v(e,s),v(t,s),a&&a.d(s)}}}function Bu(r){let e,n,t,o,l,i;return e=new Pe({props:{label:"Critical Issues",$$slots:{default:[ju]},$$scope:{ctx:r}}}),t=new dt({props:{layer:_e+"-points",tooltip:Hu,show:r[0],clickable:!1}}),l=new dt({props:{layer:_e+"-clusters",show:r[0],clickable:!0,ignoreHigherLayers:[_e+"-counts"]}}),l.$on("click",r[5]),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),o=L(),h(l.$$.fragment)},m(a,s){b(e,a,s),$(a,n,s),b(t,a,s),$(a,o,s),b(l,a,s),i=!0},p(a,[s]){const f={};s&527&&(f.$$scope={dirty:s,ctx:a}),e.$set(f);const u={};s&1&&(u.show=a[0]),t.$set(u);const c={};s&1&&(c.show=a[0]),l.$set(c)},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(l.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(l.$$.fragment,a),i=!1},d(a){a&&(d(n),d(o)),v(e,a),v(t,a),v(l,a)}}}let _e="criticals",rn="red";function Hu(r){let e='<div style="max-width: 30vw;">';return e+=`<h2>${r.properties.critical_type}</h2>`,e+=`<p><u>Location</u>: ${r.properties.location_description}</p>`,e+=`<p><u>Notes</u>: ${r.properties.notes}</p>`,e+="<hr />",e+=`<p>Critical issue ID: <b>${r.properties.id}</b></p>`,e+=`<p>Submitted by <b>${r.properties.inspector??"???"}</b> at <b>${r.properties.submission_time}</b></p>`,e+=`<p>For scheme <b>${r.properties.scheme_reference}</b> in stage <b>${r.properties.current_design_stage}</b></p>`,e+="</div>",e}function Ru(r,e,n){let t;oe(r,mt,p=>n(6,t=p));let o,l=!0,i=0,a="";so(t,_e),t.addSource(_e,{type:"geojson",data:sn(),cluster:!0,clusterMaxZoom:14,clusterRadius:50}),dn(t,{id:`${_e}-clusters`,source:_e,filter:["has","point_count"],color:rn,opacity:.9,radius:["step",["get","point_count"],20,15,30,30,40]}),t.addLayer({id:`${_e}-counts`,source:_e,type:"symbol",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}"}}),dn(t,{id:`${_e}-points`,source:_e,filter:["!",["has","point_count"]],color:rn,opacity:.9,radius:15,strokeColor:"black",strokeWidth:3});async function s(p){try{let g=await ri(o.files[0]);t.getSource(_e).setData(g),n(2,i=g.features.length),n(3,a="")}catch(g){n(3,a=`The file you loaded is broken: ${g}`)}}function f(p){t.getSource(_e).getClusterExpansionZoom(p.detail.properties.cluster_id,(g,S)=>{g||t.easeTo({center:p.detail.geometry.coordinates,zoom:S})})}function u(p){X[p?"unshift":"push"](()=>{o=p,n(1,o)})}function c(p){l=p,n(0,l)}return r.$$.update=()=>{r.$$.dirty&65&&t.getLayer(`${_e}-counts`)&&t.setLayoutProperty(`${_e}-counts`,"visibility",l?"visible":"none")},[l,o,i,a,s,f,t,u,c]}class Wu extends G{constructor(e){super(),V(this,e,Ru,Bu,z,{})}}function zu(r){let e,n,t;return e=new ke({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=y(`
  Crossings`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:x,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function Uu(r){let e;return{c(){e=y("crossing")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Gu(r){let e,n,t,o,l,i,a;return t=new K({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Uu]},$$scope:{ctx:r}}}),i=new xe({}),{c(){e=M("p"),n=y("This shows "),h(t.$$.fragment),o=y(" data from OpenStreetMap (as of 9 August 2023)."),l=L(),h(i.$$.fragment)},m(s,f){$(s,e,f),T(e,n),b(t,e,null),T(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function Vu(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Gu]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),Z(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function qu(r){let e,n=$r(r[4][0])+"",t;return{c(){e=M("p"),t=y(n)},m(o,l){$(o,e,l),T(e,t)},p(o,l){l&16&&n!==(n=$r(o[4][0])+"")&&U(t,n)},d(o){o&&d(e)}}}function Xu(r){let e,n;return e=new ue({props:{openOn:"hover",$$slots:{default:[qu,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&48&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ku(r){let e,n;return e=new zt({props:{id:Ht,sourceLayer:Ht,paint:{"circle-color":r[2],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]},layout:{visibility:r[1]},$$slots:{default:[Xu]},$$scope:{ctx:r}}}),e.$on("click",Yu),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zu(r){let e,n,t,o,l;function i(s){r[3](s)}let a={id:Ht,$$slots:{right:[Vu],default:[zu]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ie({props:a}),X.push(()=>Y(e,"checked",i)),o=new de({props:{url:`pmtiles://${pe()}/v1/${Ht}.pmtiles`,$$slots:{default:[Ku]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&34&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let Ht="crossings";function $r(r){const e=new Map([["no","Location where crossing is impossible/illegal but where there is a clear desire line to cross"],["traffic_signals","Signalised crossing"],["marked","Crossing with no traffic signals"],["uncontrolled","Crossing with no traffic signals"],["unmarked","Crossing with no markings or signals"],["zebra","Zebra crossing"],["island","Crossing with an island"],["informal","Informal crossing with an obvious desire line, but no official infrastructure to support it"]]),n=r.properties.crossing;return`${e.get(n)??`Crossing with unknown type (${n})`}. Click for details.`}function Yu(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Ju(r,e,n){let t,o=Q.crossings,l=!1;function i(a){l=a,n(0,l)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=l?"visible":"none")},[l,t,o,i]}class Qu extends G{constructor(e){super(),V(this,e,Ju,Zu,z,{})}}function xu(r){let e,n,t;return e=new ke({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=y(`
  Cycle parking`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:x,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function ec(r){let e;return{c(){e=y("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function tc(r){let e,n,t,o,l,i,a;return t=new K({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[ec]},$$scope:{ctx:r}}}),i=new xe({}),{c(){e=M("p"),n=y("Cycle parking, according to "),h(t.$$.fragment),o=y(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),l=L(),h(i.$$.fragment)},m(s,f){$(s,e,f),T(e,n),b(t,e,null),T(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function nc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[tc]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),Z(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function rc(r){let e,n=dr(r[4][0])+"",t;return{c(){e=M("p"),t=y(n)},m(o,l){$(o,e,l),T(e,t)},p(o,l){l&16&&n!==(n=dr(o[4][0])+"")&&U(t,n)},d(o){o&&d(e)}}}function oc(r){let e,n;return e=new ue({props:{openOn:"hover",$$slots:{default:[rc,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&48&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function lc(r){let e,n;return e=new zt({props:{id:Rt,sourceLayer:Rt,paint:{"circle-color":r[2],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]},layout:{visibility:r[1]},manageHoverState:!0,$$slots:{default:[oc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function sc(r){let e,n,t,o,l;function i(s){r[3](s)}let a={id:Rt,$$slots:{right:[nc],default:[xu]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ie({props:a}),X.push(()=>Y(e,"checked",i)),o=new de({props:{url:`pmtiles://${pe()}/v1/${Rt}.pmtiles`,$$slots:{default:[lc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&34&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let Rt="cycle_parking";function dr(r){return`Capacity: ${r.properties.capacity??"unknown"}`}function ic(r,e,n){let t,o=Q.cycle_parking,l=!1;function i(a){l=a,n(0,l)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=l?"visible":"none")},[l,t,o,i]}class ac extends G{constructor(e){super(),V(this,e,ic,sc,z,{})}}function fc(r){let e,n,t,o;return e=new ke({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=L(),t=y(r[1])},m(l,i){b(e,l,i),$(l,n,i),$(l,t,i),o=!0},p(l,i){(!o||i&2)&&U(t,l[1])},i(l){o||(m(e.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),o=!1},d(l){l&&(d(n),d(t)),v(e,l)}}}function uc(r){let e;const n=r[7].default,t=Re(n,r,r[9],null);return{c(){t&&t.c()},m(o,l){t&&t.m(o,l),e=!0},p(o,l){t&&t.p&&(!e||l&512)&&We(t,n,o,o[9],e?Ue(n,o[9],l,null):ze(o[9]),null)},i(o){e||(m(t,o),e=!0)},o(o){_(t,o),e=!1},d(o){t&&t.d(o)}}}function cc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[uc]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),Z(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&512&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function pc(r){let e,n=r[5](r[10][0])+"",t;return{c(){e=M("p"),t=y(n)},m(o,l){$(o,e,l),T(e,t)},p(o,l){l&1024&&n!==(n=o[5](o[10][0])+"")&&U(t,n)},d(o){o&&d(e)}}}function mc(r){let e,n;return e=new ue({props:{openOn:"hover",$$slots:{default:[pc,({features:t})=>({10:t}),({features:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1536&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $c(r){let e,n;return e=new Je({props:{id:r[0],sourceLayer:r[0],paint:{"fill-color":r[4],"fill-opacity":fe(.7,1)},layout:{visibility:r[3]},manageHoverState:!0,$$slots:{default:[mc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&1&&(l.id=t[0]),o&1&&(l.sourceLayer=t[0]),o&8&&(l.layout={visibility:t[3]}),o&512&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function dc(r){let e,n,t,o,l;function i(s){r[8](s)}let a={id:r[0],$$slots:{right:[cc],default:[fc]},$$scope:{ctx:r}};return r[2]!==void 0&&(a.checked=r[2]),e=new ie({props:a}),X.push(()=>Y(e,"checked",i)),o=new de({props:{url:`pmtiles://${pe()}/v1/${r[0]}.pmtiles`,$$slots:{default:[$c]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&1&&(u.id=s[0]),f&514&&(u.$$scope={dirty:f,ctx:s}),!n&&f&4&&(n=!0,u.checked=s[2],J(()=>n=!1)),e.$set(u);const c={};f&1&&(c.url=`pmtiles://${pe()}/v1/${s[0]}.pmtiles`),f&521&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}function gc(r,e,n){let t,{$$slots:o={},$$scope:l}=e,{name:i}=e,{singularNoun:a}=e,{pluralNoun:s}=e,f=Q[i],u=!1;function c(g){return g.properties.name??`Unnamed ${a}`}function p(g){u=g,n(2,u)}return r.$$set=g=>{"name"in g&&n(0,i=g.name),"singularNoun"in g&&n(6,a=g.singularNoun),"pluralNoun"in g&&n(1,s=g.pluralNoun),"$$scope"in g&&n(9,l=g.$$scope)},r.$$.update=()=>{r.$$.dirty&4&&n(3,t=u?"visible":"none")},[i,s,u,t,f,c,a,o,p,l]}class pn extends G{constructor(e){super(),V(this,e,gc,dc,z,{name:0,singularNoun:6,pluralNoun:1})}}function _c(r){let e;return{c(){e=y("hospital")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function hc(r){let e,n,t,o,l,i,a;return t=new K({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[_c]},$$scope:{ctx:r}}}),i=new xe({}),{c(){e=M("p"),n=y("This shows "),h(t.$$.fragment),o=y(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),l=L(),h(i.$$.fragment)},m(s,f){$(s,e,f),T(e,n),b(t,e,null),T(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&1&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function bc(r){let e,n;return e=new pn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[hc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&1&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class vc extends G{constructor(e){super(),V(this,e,null,bc,z,{})}}function wc(r){let e,n,t;return e=new ke({props:{color:r[2]}}),{c(){h(e.$$.fragment),n=y(`
  Railway Stations`)},m(o,l){b(e,o,l),$(o,n,l),t=!0},p:x,i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){o&&d(n),v(e,o)}}}function yc(r){let e;return{c(){e=y("railway station")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function kc(r){let e,n,t,o,l,i,a;return t=new K({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[yc]},$$scope:{ctx:r}}}),i=new xe({}),{c(){e=M("p"),n=y("This shows "),h(t.$$.fragment),o=y(" data from OpenStreetMap (as of 9 August 2023)."),l=L(),h(i.$$.fragment)},m(s,f){$(s,e,f),T(e,n),b(t,e,null),T(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function Sc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[kc]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),Z(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&32&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function Cc(r){let e,n=gr(r[4][0])+"",t;return{c(){e=M("p"),t=y(n)},m(o,l){$(o,e,l),T(e,t)},p(o,l){l&16&&n!==(n=gr(o[4][0])+"")&&U(t,n)},d(o){o&&d(e)}}}function Tc(r){let e,n;return e=new ue({props:{openOn:"hover",$$slots:{default:[Cc,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&48&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Lc(r){let e,n;return e=new zt({props:{id:on,paint:{"circle-color":r[2],"circle-radius":$o/2},layout:{visibility:r[1]},$$slots:{default:[Tc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Oc(r){let e,n,t,o,l;function i(s){r[3](s)}let a={id:on,$$slots:{right:[Sc],default:[wc]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new ie({props:a}),X.push(()=>Y(e,"checked",i)),o=new un({props:{data:`${pe()}/v1/${on}.geojson`,$$slots:{default:[Lc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,[f]){const u={};f&32&&(u.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,u.checked=s[0],J(()=>n=!1)),e.$set(u);const c={};f&34&&(c.$$scope={dirty:f,ctx:s}),o.$set(c)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),v(e,s),v(o,s)}}}let on="railway_stations";function gr(r){return r.properties.name??"Unnamed railway station"}function Ac(r,e,n){let t,o=Q.railway_stations,l=!1;function i(a){l=a,n(0,l)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=l?"visible":"none")},[l,t,o,i]}class Ic extends G{constructor(e){super(),V(this,e,Ac,Oc,z,{})}}function Pc(r){let e;return{c(){e=y("primary and secondary schools")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Mc(r){let e,n,t,o,l,i,a;return t=new K({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[Pc]},$$scope:{ctx:r}}}),i=new xe({}),{c(){e=M("p"),n=y("This shows "),h(t.$$.fragment),o=y(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),l=L(),h(i.$$.fragment)},m(s,f){$(s,e,f),T(e,n),b(t,e,null),T(e,o),$(s,l,f),b(i,s,f),a=!0},p(s,f){const u={};f&1&&(u.$$scope={dirty:f,ctx:s}),t.$set(u)},i(s){a||(m(t.$$.fragment,s),m(i.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),a=!1},d(s){s&&(d(e),d(l)),v(t),v(i,s)}}}function Ec(r){let e,n;return e=new pn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[Mc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&1&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Nc extends G{constructor(e){super(),V(this,e,null,Ec,z,{})}}function Dc(r){let e;return{c(){e=y("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Fc(r){let e;return{c(){e=y("sports centres")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function jc(r){let e,n,t,o,l,i,a,s,f;return t=new K({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Dc]},$$scope:{ctx:r}}}),l=new K({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Fc]},$$scope:{ctx:r}}}),s=new xe({}),{c(){e=M("p"),n=y("This shows "),h(t.$$.fragment),o=y(" and "),h(l.$$.fragment),i=y(" data from OpenStreetMap (as of 9 August 2023)."),a=L(),h(s.$$.fragment)},m(u,c){$(u,e,c),T(e,n),b(t,e,null),T(e,o),b(l,e,null),T(e,i),$(u,a,c),b(s,u,c),f=!0},p(u,c){const p={};c&1&&(p.$$scope={dirty:c,ctx:u}),t.$set(p);const g={};c&1&&(g.$$scope={dirty:c,ctx:u}),l.$set(g)},i(u){f||(m(t.$$.fragment,u),m(l.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),_(l.$$.fragment,u),_(s.$$.fragment,u),f=!1},d(u){u&&(d(e),d(a)),v(t),v(l),v(s,u)}}}function Bc(r){let e,n;return e=new pn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[jc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&1&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Hc extends G{constructor(e){super(),V(this,e,null,Bc,z,{})}}function _r(r){const e=Zc(r[6][0]);r[7]=e[0],r[8]=e[1],r[9]=e[2],r[10]=e[3]}function Rc(r){let e;return{c(){e=y("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Wc(r){let e;return{c(){e=y(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function zc(r){let e;return{c(){e=y("methodology")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Uc(r){let e,n,t,o,l,i,a,s,f,u,c;return t=new K({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Wc]},$$scope:{ctx:r}}}),l=new K({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[zc]},$$scope:{ctx:r}}}),u=new Ge({}),{c(){e=M("p"),n=y("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),o=y(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(l.$$.fragment),i=y(" for details and caveats about the measurements."),a=L(),s=M("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,f=L(),h(u.$$.fragment)},m(p,g){$(p,e,g),T(e,n),b(t,e,null),T(e,o),b(l,e,null),T(e,i),$(p,a,g),$(p,s,g),$(p,f,g),b(u,p,g),c=!0},p(p,g){const S={};g&2048&&(S.$$scope={dirty:g,ctx:p}),t.$set(S);const w={};g&2048&&(w.$$scope={dirty:g,ctx:p}),l.$set(w)},i(p){c||(m(t.$$.fragment,p),m(l.$$.fragment,p),m(u.$$.fragment,p),c=!0)},o(p){_(t.$$.fragment,p),_(l.$$.fragment,p),_(u.$$.fragment,p),c=!1},d(p){p&&(d(e),d(a),d(s),d(f)),v(t),v(l),v(u,p)}}}function Gc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Uc]},$$scope:{ctx:r}}}),{c(){e=M("span"),h(n.$$.fragment),Z(e,"slot","right")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&2048&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function hr(r){let e,n;return e=new Qe({props:{colorScale:r[2],limits:r[4]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:x,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Vc(r){_r(r);let e,n=r[7]+"",t,o,l,i,a,s=r[8]+"",f,u,c,p,g,S=r[9]+"",w,C,k,I,B,P=r[10]+"",N;return{c(){e=M("h2"),t=y(n),o=L(),l=M("p"),i=y("Total motor vehicles (2022 AADF): "),a=M("b"),f=y(s),u=L(),c=M("p"),p=y("Total pedal cycles (2022 AADF): "),g=M("b"),w=y(S),C=L(),k=M("p"),I=y("Count method: "),B=M("b"),N=y(P)},m(F,A){$(F,e,A),T(e,t),$(F,o,A),$(F,l,A),T(l,i),T(l,a),T(a,f),$(F,u,A),$(F,c,A),T(c,p),T(c,g),T(g,w),$(F,C,A),$(F,k,A),T(k,I),T(k,B),T(B,N)},p(F,A){_r(F),A&64&&n!==(n=F[7]+"")&&U(t,n),A&64&&s!==(s=F[8]+"")&&U(f,s),A&64&&S!==(S=F[9]+"")&&U(w,S),A&64&&P!==(P=F[10]+"")&&U(N,P)},d(F){F&&(d(e),d(o),d(l),d(u),d(c),d(C),d(k))}}}function qc(r){let e,n;return e=new ue({props:{openOn:"hover",$$slots:{default:[Vc,({features:t})=>({6:t}),({features:t})=>t?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2112&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xc(r){let e,n;return e=new zt({props:{id:Wt,sourceLayer:Wt,paint:{"circle-color":Ee(["get","motor_vehicles_2022"],r[3],r[2]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1},layout:{visibility:r[1]},$$slots:{default:[qc]},$$scope:{ctx:r}}}),e.$on("click",Yc),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.layout={visibility:t[1]}),o&2048&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Kc(r){let e,n,t,o,l,i;function a(u){r[5](u)}let s={id:Wt,$$slots:{right:[Gc],default:[Rc]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ie({props:s}),X.push(()=>Y(e,"checked",a));let f=r[0]&&hr(r);return l=new de({props:{url:`pmtiles://${pe()}/v1/${Wt}.pmtiles`,$$slots:{default:[Xc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),f&&f.c(),o=L(),h(l.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),f&&f.m(u,c),$(u,o,c),b(l,u,c),i=!0},p(u,[c]){const p={};c&2048&&(p.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,p.checked=u[0],J(()=>n=!1)),e.$set(p),u[0]?f?(f.p(u,c),c&1&&m(f,1)):(f=hr(u),f.c(),m(f,1),f.m(o.parentNode,o)):f&&(te(),_(f,1,1,()=>{f=null}),ne());const g={};c&2050&&(g.$$scope={dirty:c,ctx:u}),l.$set(g)},i(u){i||(m(e.$$.fragment,u),m(f),m(l.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),_(f),_(l.$$.fragment,u),i=!1},d(u){u&&(d(t),d(o)),v(e,u),f&&f.d(u),v(l,u)}}}let Wt="vehicle_counts";function Zc(r){let e=r.properties;return[e.location,e.motor_vehicles_2022.toLocaleString(),e.pedal_cycles_2022.toLocaleString(),e.method]}function Yc(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function Jc(r,e,n){let t,o=Q.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],i=["","40k","80k","120k","160k",""],a=!1;function s(f){a=f,n(0,a)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=a?"visible":"none")},[a,t,o,l,i,s]}class Qc extends G{constructor(e){super(),V(this,e,Jc,Kc,z,{})}}function xc(r){let e,n,t,o,l,i,a,s;return e=new Nc({}),t=new vc({}),l=new Hc({}),a=new Ic({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),o=L(),h(l.$$.fragment),i=L(),h(a.$$.fragment)},m(f,u){b(e,f,u),$(f,n,u),b(t,f,u),$(f,o,u),b(l,f,u),$(f,i,u),b(a,f,u),s=!0},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(l.$$.fragment,f),m(a.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(l.$$.fragment,f),_(a.$$.fragment,f),s=!1},d(f){f&&(d(n),d(o),d(i)),v(e,f),v(t,f),v(l,f),v(a,f)}}}function ep(r){let e,n;return e=new wt({props:{small:!0,$$slots:{default:[xc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function tp(r){let e,n,t,o,l,i,a,s,f,u;return e=new zf({}),t=new Qf({}),l=new Pf({}),a=new ac({}),f=new Qu({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),o=L(),h(l.$$.fragment),i=L(),h(a.$$.fragment),s=L(),h(f.$$.fragment)},m(c,p){b(e,c,p),$(c,n,p),b(t,c,p),$(c,o,p),b(l,c,p),$(c,i,p),b(a,c,p),$(c,s,p),b(f,c,p),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(l.$$.fragment,c),m(a.$$.fragment,c),m(f.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(l.$$.fragment,c),_(a.$$.fragment,c),_(f.$$.fragment,c),u=!1},d(c){c&&(d(n),d(o),d(i),d(s)),v(e,c),v(t,c),v(l,c),v(a,c),v(f,c)}}}function np(r){let e,n;return e=new wt({props:{small:!0,$$slots:{default:[tp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function rp(r){let e,n,t,o,l,i,a,s,f,u;return e=new lf({}),t=new _f({}),l=new pa({}),a=new Na({}),f=new Ka({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),o=L(),h(l.$$.fragment),i=L(),h(a.$$.fragment),s=L(),h(f.$$.fragment)},m(c,p){b(e,c,p),$(c,n,p),b(t,c,p),$(c,o,p),b(l,c,p),$(c,i,p),b(a,c,p),$(c,s,p),b(f,c,p),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(l.$$.fragment,c),m(a.$$.fragment,c),m(f.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(l.$$.fragment,c),_(a.$$.fragment,c),_(f.$$.fragment,c),u=!1},d(c){c&&(d(n),d(o),d(i),d(s)),v(e,c),v(t,c),v(l,c),v(a,c),v(f,c)}}}function op(r){let e,n;return e=new wt({props:{small:!0,$$slots:{default:[rp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&32&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function lp(r){let e,n,t,o;return e=new ta({}),t=new ka({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function sp(r){let e,n,t,o;return e=new Eu({}),t=new ku({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(l,i){b(e,l,i),$(l,n,i),b(t,l,i),o=!0},i(l){o||(m(e.$$.fragment,l),m(t.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(t.$$.fragment,l),o=!1},d(l){l&&d(n),v(e,l),v(t,l)}}}function ip(r){let e,n,t,o,l=ln()=="Private (development)",i,a;e=new Qc({}),t=new pu({});let s=l&&sp();return{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),o=L(),s&&s.c(),i=me()},m(f,u){b(e,f,u),$(f,n,u),b(t,f,u),$(f,o,u),s&&s.m(f,u),$(f,i,u),a=!0},p:x,i(f){a||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(s),a=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(s),a=!1},d(f){f&&(d(n),d(o),d(i)),v(e,f),v(t,f),s&&s.d(f)}}}function ap(r){let e,n,t,o,l;function i(s){r[4](s)}let a={displayEnableButton:!0};return r[1]!==void 0&&(a.isInactive=r[1]),e=new _o({props:a}),r[3](e),X.push(()=>Y(e,"isInactive",i)),o=new Si({}),{c(){h(e.$$.fragment),t=L(),h(o.$$.fragment)},m(s,f){b(e,s,f),$(s,t,f),b(o,s,f),l=!0},p(s,f){const u={};!n&&f&2&&(n=!0,u.isInactive=s[1],J(()=>n=!1)),e.$set(u)},i(s){l||(m(e.$$.fragment,s),m(o.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),_(o.$$.fragment,s),l=!1},d(s){s&&d(t),r[3](null),v(e,s),v(o,s)}}}function fp(r){let e,n,t,o,l,i,a,s,f,u,c,p,g,S,w,C;return e=new Wu({}),t=new Pe({props:{label:"Trip generators",$$slots:{default:[ep]},$$scope:{ctx:r}}}),l=new Pe({props:{label:"Existing infrastructure",$$slots:{default:[np]},$$scope:{ctx:r}}}),a=new Pe({props:{label:"Boundaries",$$slots:{default:[op]},$$scope:{ctx:r}}}),f=new Pe({props:{label:"Census",$$slots:{default:[lp]},$$scope:{ctx:r}}}),c=new Pe({props:{label:"Other",$$slots:{default:[ip]},$$scope:{ctx:r}}}),g=new Pe({props:{label:"Tools",$$slots:{default:[ap]},$$scope:{ctx:r}}}),w=new go({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),o=L(),h(l.$$.fragment),i=L(),h(a.$$.fragment),s=L(),h(f.$$.fragment),u=L(),h(c.$$.fragment),p=L(),h(g.$$.fragment),S=L(),h(w.$$.fragment)},m(k,I){b(e,k,I),$(k,n,I),b(t,k,I),$(k,o,I),b(l,k,I),$(k,i,I),b(a,k,I),$(k,s,I),b(f,k,I),$(k,u,I),b(c,k,I),$(k,p,I),b(g,k,I),$(k,S,I),b(w,k,I),C=!0},p(k,I){const B={};I&32&&(B.$$scope={dirty:I,ctx:k}),t.$set(B);const P={};I&32&&(P.$$scope={dirty:I,ctx:k}),l.$set(P);const N={};I&32&&(N.$$scope={dirty:I,ctx:k}),a.$set(N);const F={};I&32&&(F.$$scope={dirty:I,ctx:k}),f.$set(F);const A={};I&32&&(A.$$scope={dirty:I,ctx:k}),c.$set(A);const E={};I&35&&(E.$$scope={dirty:I,ctx:k}),g.$set(E);const D={};I&2&&(D.disabled=!k[1]),w.$set(D)},i(k){C||(m(e.$$.fragment,k),m(t.$$.fragment,k),m(l.$$.fragment,k),m(a.$$.fragment,k),m(f.$$.fragment,k),m(c.$$.fragment,k),m(g.$$.fragment,k),m(w.$$.fragment,k),C=!0)},o(k){_(e.$$.fragment,k),_(t.$$.fragment,k),_(l.$$.fragment,k),_(a.$$.fragment,k),_(f.$$.fragment,k),_(c.$$.fragment,k),_(g.$$.fragment,k),_(w.$$.fragment,k),C=!1},d(k){k&&(d(n),d(o),d(i),d(s),d(u),d(p),d(S)),v(e,k),v(t,k),v(l,k),v(a,k),v(f,k),v(c,k),v(g,k),v(w,k)}}}function up(r){let e,n,t,o;return e=new Pe({props:{label:"Layers",open:!0,$$slots:{default:[fp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(l,i){b(e,l,i),n=!0,t||(o=ut(window,"keydown",r[2]),t=!0)},p(l,[i]){const a={};i&35&&(a.$$scope={dirty:i,ctx:l}),e.$set(a)},i(l){n||(m(e.$$.fragment,l),n=!0)},o(l){_(e.$$.fragment,l),n=!1},d(l){v(e,l),t=!1,o()}}}function cp(r,e,n){let t;oe(r,gn,s=>n(1,t=s));let o;function l(s){!t&&s.key=="Escape"&&(o.disableStreetView(),s.preventDefault())}function i(s){X[s?"unshift":"push"](()=>{o=s,n(0,o)})}function a(s){t=s,gn.set(t)}return[o,t,l,i,a]}class pp extends G{constructor(e){super(),V(this,e,cp,up,z,{})}}function mp(r,e,n){let{loadFile:t}=e;return pt(async()=>{let l=await(await fetch(`${an()}/v1/random_schemes.geojson`)).text();t(l)}),r.$$set=o=>{"loadFile"in o&&n(0,t=o.loadFile)},[t]}class $p extends G{constructor(e){super(),V(this,e,mp,null,z,{loadFile:0})}}function dp(r){let e;return{c(){e=y("Show on map")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function gp(r){let e;return{c(){e=y("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function _p(r){let e,n,t=r[0].authority_or_region+"",o,l,i,a,s=r[0].capital_scheme_id+"",f,u,c,p,g=r[0].funding_programme+"",S,w,C,k,I,B,P;return k=new _t({props:{$$slots:{default:[dp]},$$scope:{ctx:r}}}),k.$on("click",r[3]),B=new _t({props:{disabled:r[1],title:r[2],$$slots:{default:[gp]},$$scope:{ctx:r}}}),B.$on("click",r[4]),{c(){e=M("p"),n=y("Authority or region: "),o=y(t),l=L(),i=M("p"),a=y("Capital scheme ID: "),f=y(s),u=L(),c=M("p"),p=y("Funding programme: "),S=y(g),w=L(),C=M("div"),h(k.$$.fragment),I=L(),h(B.$$.fragment),Z(C,"class","govuk-button-group")},m(N,F){$(N,e,F),T(e,n),T(e,o),$(N,l,F),$(N,i,F),T(i,a),T(i,f),$(N,u,F),$(N,c,F),T(c,p),T(c,S),$(N,w,F),$(N,C,F),b(k,C,null),T(C,I),b(B,C,null),P=!0},p(N,F){(!P||F&1)&&t!==(t=N[0].authority_or_region+"")&&U(o,t),(!P||F&1)&&s!==(s=N[0].capital_scheme_id+"")&&U(f,s),(!P||F&1)&&g!==(g=N[0].funding_programme+"")&&U(S,g);const A={};F&256&&(A.$$scope={dirty:F,ctx:N}),k.$set(A);const E={};F&256&&(E.$$scope={dirty:F,ctx:N}),B.$set(E)},i(N){P||(m(k.$$.fragment,N),m(B.$$.fragment,N),P=!0)},o(N){_(k.$$.fragment,N),_(B.$$.fragment,N),P=!1},d(N){N&&(d(e),d(l),d(i),d(u),d(c),d(w),d(C)),v(k),v(B)}}}function hp(r){let e,n;return e=new Pe({props:{label:`${r[0].scheme_reference}: ${r[0].num_features} features`,$$slots:{default:[_p]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&1&&(l.label=`${t[0].scheme_reference}: ${t[0].num_features} features`),o&257&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bp(r,e,n){let t,o;oe(r,st,c=>n(6,t=c)),oe(r,mt,c=>n(7,o=c));let{scheme:l}=e,{authorityNames:i}=e,a=!i.has(l.authority_or_region),s=a?"This scheme doesn't have an authority specified correctly, so you can't edit this scheme. We're working to fix this problem.":void 0;function f(){let c={type:"FeatureCollection",features:t.features.filter(p=>p.properties.scheme_reference==l.scheme_reference)};o==null||o.fitBounds(io(c),{padding:20,animate:!1})}function u(){let c={type:"FeatureCollection",features:t.features.filter(g=>g.properties.scheme_reference==l.scheme_reference)},p=l.authority_or_region;window.localStorage.setItem(p,JSON.stringify(c)),window.open(`scheme.html?authority=${l.authority_or_region}`,"_blank")}return r.$$set=c=>{"scheme"in c&&n(0,l=c.scheme),"authorityNames"in c&&n(5,i=c.authorityNames)},[l,a,s,f,u,i]}class vp extends G{constructor(e){super(),V(this,e,bp,hp,z,{scheme:0,authorityNames:5})}}const wp=["Adur","Allerdale","Amber Valley","Arun","Ashfield","Ashford","Babergh","Barking and Dagenham","Barnet","Barnsley","Barrow-in-Furness","Basildon","Basingstoke and Deane","Bassetlaw","Bath and North East Somerset","Bedford","Bexley","Birmingham","Blaby","Blackburn with Darwen","Blackpool","Bolsover","Bolton","Boston","Bournemouth, Christchurch and Poole","Bracknell Forest","Bradford","Braintree","Breckland","Brent","Brentwood","Brighton and Hove","Bristol, City of","Broadland","Bromley","Bromsgrove","Broxbourne","Broxtowe","Buckinghamshire","Burnley","Bury","Calderdale","Cambridge","Cambridgeshire and Peterborough Combined Authority","Camden","Cannock Chase","Canterbury","Carlisle","Castle Point","Central Bedfordshire","Charnwood","Chelmsford","Cheltenham","Cherwell","Cheshire East","Cheshire West and Chester","Chesterfield","Chichester","Chorley","City of London","Colchester","Copeland","Cornwall","Cotswold","County Durham","Coventry","Craven","Crawley","Croydon","Cumbria","Dacorum","Darlington","Dartford","Derby","Derbyshire","Derbyshire Dales","Devon","Doncaster","Dorset","Dover","Dudley","Ealing","Eastbourne","East Cambridgeshire","East Devon","East Hampshire","East Hertfordshire","Eastleigh","East Lindsey","East Riding of Yorkshire","East Staffordshire","East Suffolk","East Sussex","Eden","Elmbridge","Enfield","Epping Forest","Epsom and Ewell","Erewash","Essex","Exeter","Fareham","Fenland","Folkestone and Hythe","Forest of Dean","Fylde","Gateshead","Gedling","Gloucester","Gloucestershire","Gosport","Gravesham","Greater London","Greater Manchester Combined Authority","Great Yarmouth","Greenwich","Guildford","Hackney","Halton","Hambleton","Hammersmith and Fulham","Hampshire","Harborough","Haringey","Harlow","Harrogate","Harrow","Hart","Hartlepool","Hastings","Havant","Havering","Herefordshire","Herefordshire, County of","Hertfordshire","Hertsmere","High Peak","Hillingdon","Hinckley and Bosworth","Horsham","Hounslow","Huntingdonshire","Hyndburn","Ipswich","Isle of Wight","Isles of Scilly","Islington","Kensington and Chelsea","Kent","King's Lynn and West Norfolk","Kingston upon Hull","Kingston upon Hull, City of","Kingston upon Thames","Kirklees","Knowsley","Lambeth","Lancashire","Lancaster","Leeds","Leicester","Leicestershire","Lewes","Lewisham","Lichfield","Lincoln","Lincolnshire","Liverpool","Liverpool City Region Combined Authority","Luton","Maidstone","Maldon","Malvern Hills","Manchester","Mansfield","Medway","Melton","Mendip","Merton","Mid Devon","Middlesbrough","Mid Suffolk","Mid Sussex","Milton Keynes","Mole Valley","Newark and Sherwood","Newcastle-under-Lyme","Newcastle upon Tyne","New Forest","Newham","Norfolk","North Devon","North East Derbyshire","North East Joint Transport Committee","North East Lincolnshire","North Hertfordshire","North Kesteven","North Lincolnshire","North Norfolk","North Northamptonshire","North Somerset","North Tyneside","Northumberland","North Warwickshire","North West Leicestershire","North Yorkshire","Norwich","Nottingham","Nottinghamshire","Nuneaton and Bedworth","Oadby and Wigston","Oldham","Oxford","Oxfordshire","Pendle","Peterborough","Plymouth","Portsmouth","Preston","Reading","Redbridge","Redcar and Cleveland","Redditch","Reigate and Banstead","Ribble Valley","Richmondshire","Richmond upon Thames","Rochdale","Rochford","Rossendale","Rother","Rotherham","Rugby","Runnymede","Rushcliffe","Rushmoor","Rutland","Ryedale","Salford","Sandwell","Scarborough","Sedgemoor","Sefton","Selby","Sevenoaks","Sheffield","Sheffield City Region Combined Authority","Shropshire","Slough","Solihull","Somerset","Somerset West and Taunton","Southampton","South Cambridgeshire","South Derbyshire","Southend-on-Sea","South Gloucestershire","South Hams","South Holland","South Kesteven","South Lakeland","South Norfolk","South Oxfordshire","South Ribble","South Somerset","South Staffordshire","South Tyneside","Southwark","Spelthorne","Stafford","Staffordshire","Staffordshire Moorlands","St Albans","Stevenage","St. Helens","Stockport","Stockton-on-Tees","Stoke-on-Trent","Stratford-on-Avon","Stroud","Suffolk","Sunderland","Surrey","Surrey Heath","Sutton","Swale","Swindon","Tameside","Tamworth","Tandridge","Tees Valley Combined Authority","Teignbridge","Telford and Wrekin","Tendring","Test Valley","Tewkesbury","Thanet","Three Rivers","Thurrock","Tonbridge and Malling","Torbay","Torridge","Tower Hamlets","Trafford","Tunbridge Wells","Uttlesford","Vale of White Horse","Wakefield","Walsall","Waltham Forest","Wandsworth","Warrington","Warwick","Warwickshire","Watford","Waverley","Wealden","Welwyn Hatfield","West Berkshire","West Devon","West Lancashire","West Lindsey","West Midlands ITA","Westminster","West Northamptonshire","West of England Combined Authority","West Oxfordshire","West Suffolk","West Sussex","West Yorkshire Combined Authority","Wigan","Wiltshire","Winchester","Windsor and Maidenhead","Wirral","Woking","Wokingham","Wolverhampton","Worcester","Worcestershire","Worthing","Wychavon","Wyre","Wyre Forest","York"];function br(r,e,n){const t=r.slice();return t[13]=e[n],t}function yp(r){let e,n;return e=new $p({props:{loadFile:r[7]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p:x,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vr(r){let e,n,t,o;function l(s){r[9](s)}function i(s){r[10](s)}let a={schemes:r[1]};return r[2]!==void 0&&(a.schemesToBeShown=r[2]),r[3]!==void 0&&(a.filterText=r[3]),e=new $i({props:a}),X.push(()=>Y(e,"schemesToBeShown",l)),X.push(()=>Y(e,"filterText",i)),{c(){h(e.$$.fragment)},m(s,f){b(e,s,f),o=!0},p(s,f){const u={};f&2&&(u.schemes=s[1]),!n&&f&4&&(n=!0,u.schemesToBeShown=s[2],J(()=>n=!1)),!t&&f&8&&(t=!0,u.filterText=s[3],J(()=>t=!1)),e.$set(u)},i(s){o||(m(e.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),o=!1},d(s){v(e,s)}}}function wr(r){let e,n;return e=new vp({props:{scheme:r[13],authorityNames:r[6]}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,o){const l={};o&2&&(l.scheme=t[13]),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yr(r){let e=r[2].has(r[13].scheme_reference),n,t,o=e&&wr(r);return{c(){o&&o.c(),n=me()},m(l,i){o&&o.m(l,i),$(l,n,i),t=!0},p(l,i){i&6&&(e=l[2].has(l[13].scheme_reference)),e?o?(o.p(l,i),i&6&&m(o,1)):(o=wr(l),o.c(),m(o,1),o.m(n.parentNode,n)):o&&(te(),_(o,1,1,()=>{o=null}),ne())},i(l){t||(m(o),t=!0)},o(l){_(o),t=!1},d(l){l&&d(n),o&&o.d(l)}}}function kp(r){let e,n,t,o,l,i,a,s,f,u,c=ln()=="Private (development)",p,g,S,w,C,k,I,B;l=new yo({props:{boundaryGeojson:r[5]}}),a=new tl({}),f=new ao({});let P=c&&yp(r);g=new So({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[7]}}),w=new Lr({props:{errorMessage:r[0]}});let N=r[1].size>0&&vr(r),F=je(r[1].values()),A=[];for(let D=0;D<F.length;D+=1)A[D]=yr(br(r,F,D));const E=D=>_(A[D],1,1,()=>{A[D]=null});return{c(){e=M("div"),n=M("div"),t=M("h1"),t.textContent="Browse schemes",o=L(),h(l.$$.fragment),i=L(),h(a.$$.fragment),s=L(),h(f.$$.fragment),u=L(),P&&P.c(),p=L(),h(g.$$.fragment),S=L(),h(w.$$.fragment),C=L(),N&&N.c(),k=L(),I=M("ul");for(let D=0;D<A.length;D+=1)A[D].c();He(n,"display","flex"),He(n,"justify-content","space-between"),Z(e,"slot","sidebar"),Z(e,"class","govuk-prose")},m(D,O){$(D,e,O),T(e,n),T(n,t),T(n,o),b(l,n,null),T(e,i),b(a,e,null),T(e,s),b(f,e,null),T(e,u),P&&P.m(e,null),T(e,p),b(g,e,null),T(e,S),b(w,e,null),T(e,C),N&&N.m(e,null),T(e,k),T(e,I);for(let H=0;H<A.length;H+=1)A[H]&&A[H].m(I,null);B=!0},p(D,O){const H={};O&32&&(H.boundaryGeojson=D[5]),l.$set(H),c&&P.p(D,O);const W={};if(O&1&&(W.errorMessage=D[0]),w.$set(W),D[1].size>0?N?(N.p(D,O),O&2&&m(N,1)):(N=vr(D),N.c(),m(N,1),N.m(e,k)):N&&(te(),_(N,1,1,()=>{N=null}),ne()),O&70){F=je(D[1].values());let q;for(q=0;q<F.length;q+=1){const le=br(D,F,q);A[q]?(A[q].p(le,O),m(A[q],1)):(A[q]=yr(le),A[q].c(),m(A[q],1),A[q].m(I,null))}for(te(),q=F.length;q<A.length;q+=1)E(q);ne()}},i(D){if(!B){m(l.$$.fragment,D),m(a.$$.fragment,D),m(f.$$.fragment,D),m(P),m(g.$$.fragment,D),m(w.$$.fragment,D),m(N);for(let O=0;O<F.length;O+=1)m(A[O]);B=!0}},o(D){_(l.$$.fragment,D),_(a.$$.fragment,D),_(f.$$.fragment,D),_(P),_(g.$$.fragment,D),_(w.$$.fragment,D),_(N),A=A.filter(Boolean);for(let O=0;O<A.length;O+=1)_(A[O]);B=!1},d(D){D&&d(e),v(l),v(a),v(f),P&&P.d(),v(g),v(w),N&&N.d(),Tt(A,D)}}}function Sp(r){let e,n,t,o,l,i,a,s,f,u,c;return e=new ko({props:{colorInterventions:Ar("v1")}}),t=new dt({props:{layer:"interventions-points",tooltip:r[8],clickable:!1}}),l=new dt({props:{layer:"interventions-lines",tooltip:r[8],clickable:!1}}),a=new dt({props:{layer:"interventions-polygons",tooltip:r[8],clickable:!1}}),u=new pp({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),o=L(),h(l.$$.fragment),i=L(),h(a.$$.fragment),s=L(),f=M("div"),h(u.$$.fragment),Z(f,"class","top-right svelte-u44ed2")},m(p,g){b(e,p,g),$(p,n,g),b(t,p,g),$(p,o,g),b(l,p,g),$(p,i,g),b(a,p,g),$(p,s,g),$(p,f,g),b(u,f,null),c=!0},p:x,i(p){c||(m(e.$$.fragment,p),m(t.$$.fragment,p),m(l.$$.fragment,p),m(a.$$.fragment,p),m(u.$$.fragment,p),c=!0)},o(p){_(e.$$.fragment,p),_(t.$$.fragment,p),_(l.$$.fragment,p),_(a.$$.fragment,p),_(u.$$.fragment,p),c=!1},d(p){p&&(d(n),d(o),d(i),d(s),d(f)),v(e,p),v(t,p),v(l,p),v(a,p),v(u)}}}function Cp(r){let e,n,t;return n=new bo({props:{style:r[4],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Sp]},$$scope:{ctx:r}}}),{c(){e=M("div"),h(n.$$.fragment),Z(e,"slot","main")},m(o,l){$(o,e,l),b(n,e,null),t=!0},p(o,l){const i={};l&16&&(i.style=o[4]),l&65536&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(m(n.$$.fragment,o),t=!0)},o(o){_(n.$$.fragment,o),t=!1},d(o){o&&d(e),v(n)}}}function Tp(r){let e,n;return e=new ho({props:{$$slots:{main:[Cp],sidebar:[kp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,o){b(e,t,o),n=!0},p(t,[o]){const l={};o&65599&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Lp(r,e,n){let t,o;oe(r,_n,C=>n(4,t=C)),oe(r,st,C=>n(5,o=C));let l=new Set(wp);pt(()=>{fo()});const i=new URLSearchParams(window.location.search);_n.set(i.get("style")||"dataviz");let a="",s=new Map,f=new Set,u="";ct(()=>{st.set(sn())});function c(C){try{let k=JSON.parse(C);n(1,s=ni(k)),st.set(k),n(0,a="")}catch(k){n(0,a=`The file you loaded is broken: ${k}`)}}function p(C){let k=C.properties;var I='<div style="max-width: 30vw;">';return I+=`<h2>${g(k.name)} (${k.intervention_type})</h2>`,I+=`<p>Scheme reference: ${k.scheme_reference}</p>`,k.length_meters&&(I+=`<p>Length: ${uo(k.length_meters)}</p>`),k.description&&(I+=`<p>${g(k.description)}</p>`),I+="</div>",I}function g(C){return u?C.replace(new RegExp(u,"gi"),k=>`<mark>${k}</mark>`):C}function S(C){f=C,n(2,f)}function w(C){u=C,n(3,u)}return[a,s,f,u,t,o,l,c,p,S,w]}class Op extends G{constructor(e){super(),V(this,e,Lp,Tp,z,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new Op({target:document.getElementById("app")});
