import{S as L,i as R,s as O,aJ as W,e as v,h as b,j as S,k as p,aK as z,aL as q,aM as A,t as h,n as w,p as C,d as M,ao as U,w as P,aC as fe,b1 as de,b2 as pe,F as ke,g as E,m as I,q as B,E as ve,az as Y,a2 as Q,aD as we,b3 as Z,aA as ye,b4 as Se,v as J,u as H,I as _e,b5 as Ce,b as X,c as me,l as be,N as K,aQ as $,b6 as x,y as j,o as F,b7 as Me,r as Ve,B as G,b8 as ee,C as ge,a5 as Ee,aq as te,R as Ie,aR as Be,b9 as Le,a as he}from"./index-c9c3e32e.js";function Re(n){let e,l,t;const s=n[3].default,a=W(s,n,n[2],null);return{c(){e=v("fieldset"),l=v("div"),a&&a.c(),b(l,"class",n[0]),b(l,"data-module","govuk-checkboxes"),b(e,"class","govuk-fieldset")},m(i,o){S(i,e,o),p(e,l),a&&a.m(l,null),t=!0},p(i,[o]){a&&a.p&&(!t||o&4)&&z(a,s,i,i[2],t?A(s,i[2],o,null):q(i[2]),null)},i(i){t||(h(a,i),t=!0)},o(i){w(a,i),t=!1},d(i){i&&C(e),a&&a.d(i)}}}function Oe(n,e,l){let{$$slots:t={},$$scope:s}=e,{small:a=!1}=e,i=a?"govuk-checkboxes--small":"govuk-checkboxes";return n.$$set=o=>{"small"in o&&l(1,a=o.small),"$$scope"in o&&l(2,s=o.$$scope)},[i,a,s,t]}class rt extends L{constructor(e){super(),R(this,e,Oe,Re,O,{small:1})}}const We=n=>({}),le=n=>({});function ze(n){let e,l,t,s,a,i,o,r,f;const c=n[5].default,u=W(c,n,n[4],null),d=n[5].right,_=W(d,n,n[4],le);return{c(){e=v("div"),l=v("input"),t=M(),s=v("label"),u&&u.c(),a=M(),i=v("span"),_&&_.c(),b(l,"type","checkbox"),b(l,"class","govuk-checkboxes__input"),b(l,"id",n[1]),b(s,"class","govuk-label govuk-checkboxes__label"),b(s,"for",n[1]),b(s,"title",n[2]),U(i,"float","right"),b(e,"class","govuk-checkboxes__item"),b(e,"style",n[3])},m(m,g){S(m,e,g),p(e,l),l.checked=n[0],p(e,t),p(e,s),u&&u.m(s,null),p(e,a),p(e,i),_&&_.m(i,null),o=!0,r||(f=[P(l,"change",n[7]),P(l,"change",n[6])],r=!0)},p(m,[g]){(!o||g&2)&&b(l,"id",m[1]),g&1&&(l.checked=m[0]),u&&u.p&&(!o||g&16)&&z(u,c,m,m[4],o?A(c,m[4],g,null):q(m[4]),null),(!o||g&2)&&b(s,"for",m[1]),(!o||g&4)&&b(s,"title",m[2]),_&&_.p&&(!o||g&16)&&z(_,d,m,m[4],o?A(d,m[4],g,We):q(m[4]),le)},i(m){o||(h(u,m),h(_,m),o=!0)},o(m){w(u,m),w(_,m),o=!1},d(m){m&&C(e),u&&u.d(m),_&&_.d(m),r=!1,fe(f)}}}function qe(n,e,l){let{$$slots:t={},$$scope:s}=e;const a=pe(t);let{id:i}=e,{checked:o}=e,{hint:r=null}=e,c=a.right!==void 0?"float: none":"";function u(_){de.call(this,n,_)}function d(){o=this.checked,l(0,o)}return n.$$set=_=>{"id"in _&&l(1,i=_.id),"checked"in _&&l(0,o=_.checked),"hint"in _&&l(2,r=_.hint),"$$scope"in _&&l(4,s=_.$$scope)},[o,i,r,c,s,t,u,d]}class ut extends L{constructor(e){super(),R(this,e,qe,ze,O,{id:1,checked:0,hint:2})}}function se(n,e,l){const t=n.slice();return t[9]=e[l][0],t[10]=e[l][1],t}function ne(n){let e;return{c(){e=v("option"),e.__value="",J(e,e.__value)},m(l,t){S(l,e,t)},d(l){l&&C(e)}}}function ae(n){let e,l=n[10]+"",t,s;return{c(){e=v("option"),t=H(l),e.__value=s=n[9],J(e,e.__value)},m(a,i){S(a,e,i),p(e,t)},p(a,i){i&8&&l!==(l=a[10]+"")&&_e(t,l),i&8&&s!==(s=a[9])&&(e.__value=s,J(e,e.__value))},d(a){a&&C(e)}}}function Ae(n){let e,l,t,s,a,i,o;e=new ve({props:{errorMessage:n[6]}});let r=n[4]&&ne(),f=Y(n[3]),c=[];for(let u=0;u<f.length;u+=1)c[u]=ae(se(n,f,u));return{c(){E(e.$$.fragment),l=M(),t=v("select"),r&&r.c(),s=Q();for(let u=0;u<c.length;u+=1)c[u].c();b(t,"class","govuk-select"),b(t,"id",n[2]),t.disabled=n[5],n[0]===void 0&&we(()=>n[8].call(t))},m(u,d){I(e,u,d),S(u,l,d),S(u,t,d),r&&r.m(t,null),p(t,s);for(let _=0;_<c.length;_+=1)c[_]&&c[_].m(t,null);Z(t,n[0],!0),a=!0,i||(o=[P(t,"change",n[8]),P(t,"change",n[7])],i=!0)},p(u,d){const _={};if(d&64&&(_.errorMessage=u[6]),e.$set(_),u[4]?r||(r=ne(),r.c(),r.m(t,s)):r&&(r.d(1),r=null),d&8){f=Y(u[3]);let m;for(m=0;m<f.length;m+=1){const g=se(u,f,m);c[m]?c[m].p(g,d):(c[m]=ae(g),c[m].c(),c[m].m(t,null))}for(;m<c.length;m+=1)c[m].d(1);c.length=f.length}(!a||d&4)&&b(t,"id",u[2]),(!a||d&32)&&(t.disabled=u[5]),d&9&&Z(t,u[0])},i(u){a||(h(e.$$.fragment,u),a=!0)},o(u){w(e.$$.fragment,u),a=!1},d(u){u&&(C(l),C(t)),B(e,u),r&&r.d(),ye(c,u),i=!1,fe(o)}}}function De(n){let e,l;return e=new ke({props:{label:n[1],id:n[2],$$slots:{default:[Ae]},$$scope:{ctx:n}}}),{c(){E(e.$$.fragment)},m(t,s){I(e,t,s),l=!0},p(t,[s]){const a={};s&2&&(a.label=t[1]),s&4&&(a.id=t[2]),s&8317&&(a.$$scope={dirty:s,ctx:t}),e.$set(a)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function He(n,e,l){let{label:t}=e,{id:s}=e,{choices:a}=e,{emptyOption:i=!1}=e,{disabled:o=!1}=e,{errorMessage:r=""}=e,{value:f}=e;function c(d){de.call(this,n,d)}function u(){f=Se(this),l(0,f),l(3,a)}return n.$$set=d=>{"label"in d&&l(1,t=d.label),"id"in d&&l(2,s=d.id),"choices"in d&&l(3,a=d.choices),"emptyOption"in d&&l(4,i=d.emptyOption),"disabled"in d&&l(5,o=d.disabled),"errorMessage"in d&&l(6,r=d.errorMessage),"value"in d&&l(0,f=d.value)},[f,t,s,a,i,o,r,c,u]}class Ne extends L{constructor(e){super(),R(this,e,He,De,O,{label:1,id:2,choices:3,emptyOption:4,disabled:5,errorMessage:6,value:0})}}function Pe(n){let e,l,t;function s(i){n[2](i)}let a={label:"Basemap",id:"basemap",choices:Ce(),disabled:n[0]};return n[1]!==void 0&&(a.value=n[1]),e=new Ne({props:a}),X.push(()=>me(e,"value",s)),{c(){E(e.$$.fragment)},m(i,o){I(e,i,o),t=!0},p(i,[o]){const r={};o&1&&(r.disabled=i[0]),!l&&o&2&&(l=!0,r.value=i[1],be(()=>l=!1)),e.$set(r)},i(i){t||(h(e.$$.fragment,i),t=!0)},o(i){w(e.$$.fragment,i),t=!1},d(i){B(e,i)}}}function Te(n,e,l){let t;K(n,$,i=>l(1,t=i));let{disabled:s=!1}=e;function a(i){t=i,$.set(t)}return n.$$set=i=>{"disabled"in i&&l(0,s=i.disabled)},[s,t,a]}class ct extends L{constructor(e){super(),R(this,e,Te,Pe,O,{disabled:0})}}function je(n){let e,l,t,s,a,i,o;const r=n[3].default,f=W(r,n,n[2],null);return{c(){e=v("details"),l=v("summary"),t=v("span"),s=H(n[0]),a=M(),i=v("div"),f&&f.c(),b(t,"class","govuk-details__summary-text"),b(l,"class","govuk-details__summary"),b(i,"class","govuk-details__text"),e.open=n[1],b(e,"class","govuk-details"),b(e,"data-module","govuk-details")},m(c,u){S(c,e,u),p(e,l),p(l,t),p(t,s),p(e,a),p(e,i),f&&f.m(i,null),o=!0},p(c,[u]){(!o||u&1)&&_e(s,c[0]),f&&f.p&&(!o||u&4)&&z(f,r,c,c[2],o?A(r,c[2],u,null):q(c[2]),null),(!o||u&2)&&(e.open=c[1])},i(c){o||(h(f,c),o=!0)},o(c){w(f,c),o=!1},d(c){c&&C(e),f&&f.d(c)}}}function Fe(n,e,l){let{$$slots:t={},$$scope:s}=e,{label:a}=e,{open:i=!1}=e;return n.$$set=o=>{"label"in o&&l(0,a=o.label),"open"in o&&l(1,i=o.open),"$$scope"in o&&l(2,s=o.$$scope)},[a,i,s,t]}class Ge extends L{constructor(e){super(),R(this,e,Fe,je,O,{label:0,open:1})}}const Ue=n=>({}),ie=n=>({}),Je=n=>({}),oe=n=>({});function Ke(n){let e,l,t,s,a,i,o,r,f,c,u;const d=n[4].sidebar,_=W(d,n,n[3],oe),m=n[4].main,g=W(m,n,n[3],ie);return{c(){e=v("div"),l=v("aside"),t=v("div"),_&&_.c(),s=M(),a=v("button"),a.textContent="â†’",o=M(),r=v("main"),g&&g.c(),b(t,"class","sidebar-content content-container svelte-1n0etgd"),b(a,"type","button"),b(a,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),b(l,"class",i=x(n[1]?"":"collapsed")+" svelte-1n0etgd"),U(l,"--sidebarWidth",n[0]),b(r,"class","svelte-1n0etgd"),b(e,"class","overall-layout svelte-1n0etgd")},m(k,y){S(k,e,y),p(e,l),p(l,t),_&&_.m(t,null),p(l,s),p(l,a),p(e,o),p(e,r),g&&g.m(r,null),f=!0,c||(u=P(a,"click",n[2]),c=!0)},p(k,[y]){_&&_.p&&(!f||y&8)&&z(_,d,k,k[3],f?A(d,k[3],y,Je):q(k[3]),oe),(!f||y&2&&i!==(i=x(k[1]?"":"collapsed")+" svelte-1n0etgd"))&&b(l,"class",i),(!f||y&1)&&U(l,"--sidebarWidth",k[0]),g&&g.p&&(!f||y&8)&&z(g,m,k,k[3],f?A(m,k[3],y,Ue):q(k[3]),ie)},i(k){f||(h(_,k),h(g,k),f=!0)},o(k){w(_,k),w(g,k),f=!1},d(k){k&&C(e),_&&_.d(k),g&&g.d(k),c=!1,u()}}}function Qe(n,e,l){let{$$slots:t={},$$scope:s}=e,{sidebarWidth:a="25rem"}=e,i=!0;function o(){l(1,i=!i)}return n.$$set=r=>{"sidebarWidth"in r&&l(0,a=r.sidebarWidth),"$$scope"in r&&l(3,s=r.$$scope)},[a,i,o,s,t]}class ft extends L{constructor(e){super(),R(this,e,Qe,Ke,O,{sidebarWidth:0})}}function re(n){let e;const l=n[5].default,t=W(l,n,n[4],null);return{c(){t&&t.c()},m(s,a){t&&t.m(s,a),e=!0},p(s,a){t&&t.p&&(!e||a&16)&&z(t,l,s,s[4],e?A(l,s[4],a,null):q(s[4]),null)},i(s){e||(h(t,s),e=!0)},o(s){w(t,s),e=!1},d(s){t&&t.d(s)}}}function Xe(n){let e,l,t=n[1]&&re(n);return{c(){e=v("div"),t&&t.c(),b(e,"class","map svelte-12dpf1u")},m(s,a){S(s,e,a),t&&t.m(e,null),n[6](e),l=!0},p(s,[a]){s[1]?t?(t.p(s,a),a&2&&h(t,1)):(t=re(s),t.c(),h(t,1),t.m(e,null)):t&&(j(),w(t,1,1,()=>{t=null}),F())},i(s){l||(h(t),l=!0)},o(s){w(t),l=!1},d(s){s&&C(e),t&&t.d(),n[6](null)}}}function Ye(n,e,l){let{$$slots:t={},$$scope:s}=e,{style:a}=e,{startBounds:i=null}=e,o,r,f=!1,c=!window.location.hash;Me("setCamera",c);let u,d,_,m;Ve(async()=>{o=new G.Map({container:r,style:await ee(a),hash:!0}),o.addControl(new G.ScaleControl({})),o.addControl(new G.NavigationControl({visualizePitch:!0}),"bottom-right"),o.on("load",()=>{l(1,f=!0),c&&i&&o.fitBounds(i,{animate:!1}),ge.set(o)}),new ResizeObserver(()=>{o.resize()}).observe(r),o.on("style.load",()=>{const D=o.getStyle();if(u=D.layers.map(V=>V.id),d=Object.keys(D.sources),m)for(const[V,N]of Object.entries(m))o.addSource(V,N);if(_)for(const V of _)o.addLayer(V)})}),Ee(()=>{o.remove()});async function g(y){if(!o)return;const D=o.getStyle();if(u&&(_=D.layers.filter(N=>!u.includes(N.id))),d){const N=Object.keys(D.sources).filter(T=>!d.includes(T));m={};for(const T of N)m[T]=D.sources[T]}o.setStyle(await ee(y),{diff:!1});let V=new URL(window.location.href);V.searchParams.set("style",y),window.history.replaceState(null,"",V.toString())}function k(y){X[y?"unshift":"push"](()=>{r=y,l(0,r)})}return n.$$set=y=>{"style"in y&&l(2,a=y.style),"startBounds"in y&&l(3,i=y.startBounds),"$$scope"in y&&l(4,s=y.$$scope)},n.$$.update=()=>{n.$$.dirty&4&&g(a)},[r,f,a,i,s,t,k]}class dt extends L{constructor(e){super(),R(this,e,Ye,Xe,O,{style:2,startBounds:3})}}const Ze={area:"#D94324",route:"#555F5E",crossing:"#4daf4a",other:"#984ea3",preapp:"#e41a1c",outline:"#377eb8","reserved matters":"#4daf4a","local plan":"#984ea3",hovering:"black",lineEndpointColor:"black",streetview:"blue"},_t=10,mt=10,$e="/atip/swap_basemap/assets/camera_cursor-824d29b6.svg";function ue(n){let e,l,t,s;const a=[et,xe],i=[];function o(r,f){return r[0]?0:1}return e=o(n),l=i[e]=a[e](n),{c(){l.c(),t=Q()},m(r,f){i[e].m(r,f),S(r,t,f),s=!0},p(r,f){let c=e;e=o(r),e===c?i[e].p(r,f):(j(),w(i[c],1,1,()=>{i[c]=null}),F(),l=i[e],l?l.p(r,f):(l=i[e]=a[e](r),l.c()),h(l,1),l.m(t.parentNode,t))},i(r){s||(h(l),s=!0)},o(r){w(l),s=!1},d(r){r&&C(t),i[e].d(r)}}}function xe(n){let e,l;return e=new he({props:{$$slots:{default:[tt]},$$scope:{ctx:n}}}),e.$on("click",n[3]),{c(){E(e.$$.fragment)},m(t,s){I(e,t,s),l=!0},p(t,s){const a={};s&512&&(a.$$scope={dirty:s,ctx:t}),e.$set(a)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function et(n){let e,l;return e=new he({props:{$$slots:{default:[lt]},$$scope:{ctx:n}}}),e.$on("click",n[2]),{c(){E(e.$$.fragment)},m(t,s){I(e,t,s),l=!0},p(t,s){const a={};s&512&&(a.$$scope={dirty:s,ctx:t}),e.$set(a)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function tt(n){let e;return{c(){e=H("Disable Street View")},m(l,t){S(l,e,t)},d(l){l&&C(e)}}}function lt(n){let e;return{c(){e=H("Enable Street View")},m(l,t){S(l,e,t)},d(l){l&&C(e)}}}function ce(n){let e,l,t,s,a;function i(r){n[6](r)}let o={legend:"Source",id:"streetViewImagery",choices:[["google","Google Street View"],["bing","Bing Streetside"]]};return n[4].streetViewImagery!==void 0&&(o.value=n[4].streetViewImagery),e=new Ie({props:o}),X.push(()=>me(e,"value",i)),s=new Ge({props:{label:"Help",$$slots:{default:[nt]},$$scope:{ctx:n}}}),{c(){E(e.$$.fragment),t=M(),E(s.$$.fragment)},m(r,f){I(e,r,f),S(r,t,f),I(s,r,f),a=!0},p(r,f){const c={};!l&&f&16&&(l=!0,c.value=r[4].streetViewImagery,be(()=>l=!1)),e.$set(c);const u={};f&512&&(u.$$scope={dirty:f,ctx:r}),s.$set(u)},i(r){a||(h(e.$$.fragment,r),h(s.$$.fragment,r),a=!0)},o(r){w(e.$$.fragment,r),w(s.$$.fragment,r),a=!1},d(r){r&&C(t),B(e,r),B(s,r)}}}function st(n){let e;return{c(){e=H("Luc Chaissac")},m(l,t){S(l,e,t)},d(l){l&&C(e)}}}function nt(n){let e,l,t,s,a,i,o,r,f;return r=new Be({props:{href:"https://icon-icons.com/icon/screenshot-cursor-camera/100181",$$slots:{default:[st]},$$scope:{ctx:n}}}),{c(){e=v("ul"),l=v("li"),l.innerHTML=`<b>Click</b>
        on the map to open a new tab with a 3rd-party imagery provider`,t=M(),s=v("li"),s.innerHTML=`Press <b>Escape</b>
        to exit this mode`,a=M(),i=v("li"),o=H("Cursor by "),E(r.$$.fragment)},m(c,u){S(c,e,u),p(e,l),p(e,t),p(e,s),p(e,a),p(e,i),p(i,o),I(r,i,null),f=!0},p(c,u){const d={};u&512&&(d.$$scope={dirty:u,ctx:c}),r.$set(d)},i(c){f||(h(r.$$.fragment,c),f=!0)},o(c){w(r.$$.fragment,c),f=!1},d(c){c&&C(e),B(r)}}}function at(n){let e,l,t,s=n[1]&&ue(n),a=!n[0]&&ce(n);return{c(){s&&s.c(),e=M(),a&&a.c(),l=Q()},m(i,o){s&&s.m(i,o),S(i,e,o),a&&a.m(i,o),S(i,l,o),t=!0},p(i,[o]){i[1]?s?(s.p(i,o),o&2&&h(s,1)):(s=ue(i),s.c(),h(s,1),s.m(e.parentNode,e)):s&&(j(),w(s,1,1,()=>{s=null}),F()),i[0]?a&&(j(),w(a,1,1,()=>{a=null}),F()):a?(a.p(i,o),o&1&&h(a,1)):(a=ce(i),a.c(),h(a,1),a.m(l.parentNode,l))},i(i){t||(h(s),h(a),t=!0)},o(i){w(s),w(a),t=!1},d(i){i&&(C(e),C(l)),s&&s.d(i),a&&a.d(i)}}}function it(n,e,l){let t,s;K(n,ge,d=>l(8,t=d)),K(n,te,d=>l(4,s=d));let{displayEnableButton:a}=e,{isInactive:i}=e,o=[];function r(d){if(i)return;let _=d.lngLat.lng,m=d.lngLat.lat;s.streetViewImagery=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${m},${_}&cbp=11,0,0,0,0`,"_blank"):s.streetViewImagery=="bing"&&window.open(`https://www.bing.com/maps?cp=${m}~${_}&style=x`,"_blank")}function f(){l(0,i=!1),t.on("click",r),t.getCanvas().style.cursor=`url(${$e}), auto`,o=Le();for(let d of o)d.setProperty(t,"line-color",Ze.streetview)}function c(){l(0,i=!0),t.off("click",r),t.getCanvas().style.cursor="inherit";for(let d of o)d.returnToDefaultPaintValues(t)}function u(d){n.$$.not_equal(s.streetViewImagery,d)&&(s.streetViewImagery=d,te.set(s))}return n.$$set=d=>{"displayEnableButton"in d&&l(1,a=d.displayEnableButton),"isInactive"in d&&l(0,i=d.isInactive)},[i,a,f,c,s,r,u]}class bt extends L{constructor(e){super(),R(this,e,it,at,O,{displayEnableButton:1,isInactive:0,handleMapClickEvent:5,enableStreetView:2,disableStreetView:3})}get handleMapClickEvent(){return this.$$.ctx[5]}get enableStreetView(){return this.$$.ctx[2]}get disableStreetView(){return this.$$.ctx[3]}}export{ct as B,Ge as C,ft as L,dt as M,bt as S,_t as a,rt as b,Ze as c,ut as d,Ne as e,mt as l};
