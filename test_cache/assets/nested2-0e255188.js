import{S as We,i as Ue,s as Ge,d as G,m as V,p as B,q,u as K,D as xe,w as Ve,Q as Ke,F as Ye,e as L,c as O,t as I,f as Y,j as J,k as f,g as Ie,n as ae,x as z,a9 as Ne,aa as qe,r as X,ai as ze,v as De,z as Me,O as Je,P as Xe}from"./maplibre_helpers-818d46c3.js";import{L as Ze,g as pe,Z as Qe,e as Oe,t as et,I as tt,B as nt,v as it,M as rt,m as ot,C as st}from"./ZoomOutMap-de9ca121.js";function $(e,t){if(window.NodeList.prototype.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t.call(window,e[n],n,e)}function at(){var e=new Date().getTime();return typeof window.performance<"u"&&typeof window.performance.now=="function"&&(e+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+Math.random()*16)%16|0;return e=Math.floor(e/16),(t==="x"?n:n&3|8).toString(16)})}function re(){for(var e=function(l){var a={},o=function(u,s){for(var c in u)if(Object.prototype.hasOwnProperty.call(u,c)){var p=u[c],m=s?s+"."+c:c;typeof p=="object"?o(p,m):a[m]=p}};return o(l),a},t={},n=0;n<arguments.length;n++){var i=e(arguments[n]);for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}function Ee(e,t){if(!e||typeof e!="object")throw new Error('Provide a `configObject` of type "object".');if(!t||typeof t!="string")throw new Error('Provide a `namespace` of type "string" to filter the `configObject` by.');var n={};for(var i in e){var r=i.split(".");if(Object.prototype.hasOwnProperty.call(e,i)&&r[0]===t){r.length>1&&r.shift();var l=r.join(".");n[l]=e[i]}}return n}(function(e){var t="defineProperty"in Object&&function(){try{var n={};return Object.defineProperty(n,"test",{value:42}),!0}catch{return!1}}();t||function(n){var i=Object.prototype.hasOwnProperty("__defineGetter__"),r="Getters & setters cannot be defined on this javascript engine",l="A property cannot both have accessors and be writable or have a value";Object.defineProperty=function(o,u,s){if(n&&(o===window||o===document||o===Element.prototype||o instanceof Element))return n(o,u,s);if(o===null||!(o instanceof Object||typeof o=="object"))throw new TypeError("Object.defineProperty called on non-object");if(!(s instanceof Object))throw new TypeError("Property description must be an object");var c=String(u),p="value"in s||"writable"in s,m="get"in s&&typeof s.get,y="set"in s&&typeof s.set;if(m){if(m!=="function")throw new TypeError("Getter must be a function");if(!i)throw new TypeError(r);if(p)throw new TypeError(l);Object.__defineGetter__.call(o,c,s.get)}else o[c]=s.value;if(y){if(y!=="function")throw new TypeError("Setter must be a function");if(!i)throw new TypeError(r);if(p)throw new TypeError(l);Object.__defineSetter__.call(o,c,s.set)}return"value"in s&&(o[c]=s.value),o}}(Object.defineProperty)}).call(typeof window=="object"&&window||typeof self=="object"&&self||typeof global=="object"&&global||{});(function(e){var t="Document"in this;t||typeof WorkerGlobalScope>"u"&&typeof importScripts!="function"&&(this.HTMLDocument?this.Document=this.HTMLDocument:(this.Document=this.HTMLDocument=document.constructor=new Function("return function Document() {}")(),this.Document.prototype=document))}).call(typeof window=="object"&&window||typeof self=="object"&&self||typeof global=="object"&&global||{});(function(e){var t="Element"in this&&"HTMLElement"in this;t||function(){if(window.Element&&!window.HTMLElement){window.HTMLElement=window.Element;return}window.Element=window.HTMLElement=new Function("return function Element() {}")();var n=document.appendChild(document.createElement("body")),i=n.appendChild(document.createElement("iframe")),r=i.contentWindow.document,l=Element.prototype=r.appendChild(r.createElement("*")),a={},o=function(y,d){var _=y.childNodes||[],w=-1,v,b,g;if(y.nodeType===1&&y.constructor!==Element){y.constructor=Element;for(v in a)b=a[v],y[v]=b}for(;g=d&&_[++w];)o(g,d);return y},u=document.getElementsByTagName("*"),s=document.createElement,c,p=100;l.attachEvent("onpropertychange",function(y){for(var d=y.propertyName,_=!a.hasOwnProperty(d),w=l[d],v=a[d],b=-1,g;g=u[++b];)g.nodeType===1&&(_||g[d]===v)&&(g[d]=w);a[d]=w}),l.constructor=Element,l.hasAttribute||(l.hasAttribute=function(d){return this.getAttribute(d)!==null});function m(){return p--||clearTimeout(c),document.body&&!document.body.prototype&&/(complete|interactive)/.test(document.readyState)?(o(document,!0),c&&document.body.prototype&&clearTimeout(c),!!document.body.prototype):!1}m()||(document.onreadystatechange=m,c=setInterval(m,25)),document.createElement=function(d){var _=s(String(d).toLowerCase());return o(_)},document.removeChild(n)}()}).call(typeof window=="object"&&window||typeof self=="object"&&self||typeof global=="object"&&global||{});(function(e){var t=function(){if(!document.documentElement.dataset)return!1;var n=document.createElement("div");return n.setAttribute("data-a-b","c"),n.dataset&&n.dataset.aB=="c"}();t||Object.defineProperty(Element.prototype,"dataset",{get:function(){for(var n=this,i=this.attributes,r={},l=0;l<i.length;l++){var a=i[l];if(a&&a.name&&/^data-\w[.\w-]*$/.test(a.name)){var o=a.name,u=a.value,s=o.substr(5).replace(/-./g,function(c){return c.charAt(1).toUpperCase()});"__defineGetter__"in Object.prototype&&"__defineSetter__"in Object.prototype?Object.defineProperty(r,s,{enumerable:!0,get:function(){return this.value}.bind({value:u||""}),set:function(p,m){typeof m<"u"?this.setAttribute(p,m):this.removeAttribute(p)}.bind(n,o)}):r[s]=u}}return r}})}).call(typeof window=="object"&&window||typeof self=="object"&&self||typeof global=="object"&&global||{});(function(e){var t="trim"in String.prototype;t||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")})}).call(typeof window=="object"&&window||typeof self=="object"&&self||typeof global=="object"&&global||{});function lt(e){if(typeof e!="string")return e;var t=e.trim();return t==="true"?!0:t==="false"?!1:t.length>0&&isFinite(Number(t))?Number(t):e}function oe(e){var t={};for(var n in e)t[n]=lt(e[n]);return t}function j(e,t){this.translations=e||{},this.locale=t&&t.locale||document.documentElement.lang||"en"}j.prototype.t=function(e,t){if(!e)throw new Error("i18n: lookup key missing");t&&typeof t.count=="number"&&(e=e+"."+this.getPluralSuffix(e,t.count));var n=this.translations[e];if(typeof n=="string")if(n.match(/%{(.\S+)}/)){if(!t)throw new Error("i18n: cannot replace placeholders in string if no option data provided");return this.replacePlaceholders(n,t)}else return n;else return e};j.prototype.replacePlaceholders=function(e,t){var n;return this.hasIntlNumberFormatSupport()&&(n=new Intl.NumberFormat(this.locale)),e.replace(/%{(.\S+)}/g,function(i,r){if(Object.prototype.hasOwnProperty.call(t,r)){var l=t[r];return l===!1||typeof l!="number"&&typeof l!="string"?"":typeof l=="number"?n?n.format(l):l.toString():l}else throw new Error("i18n: no data found to replace "+i+" placeholder in string")})};j.prototype.hasIntlPluralRulesSupport=function(){return!!(window.Intl&&"PluralRules"in window.Intl&&Intl.PluralRules.supportedLocalesOf(this.locale).length)};j.prototype.hasIntlNumberFormatSupport=function(){return!!(window.Intl&&"NumberFormat"in window.Intl&&Intl.NumberFormat.supportedLocalesOf(this.locale).length)};j.prototype.getPluralSuffix=function(e,t){if(t=Number(t),!isFinite(t))return"other";var n;if(this.hasIntlPluralRulesSupport()?n=new Intl.PluralRules(this.locale).select(t):n=this.selectPluralFormUsingFallbackRules(t),e+"."+n in this.translations)return n;if(e+".other"in this.translations)return console&&"warn"in console&&console.warn('i18n: Missing plural form ".'+n+'" for "'+this.locale+'" locale. Falling back to ".other".'),"other";throw new Error('i18n: Plural form ".other" is required for "'+this.locale+'" locale')};j.prototype.selectPluralFormUsingFallbackRules=function(e){e=Math.abs(Math.floor(e));var t=this.getPluralRulesForLocale();return t?j.pluralRules[t](e):"other"};j.prototype.getPluralRulesForLocale=function(){var e=this.locale,t=e.split("-")[0];for(var n in j.pluralRulesMap)if(Object.prototype.hasOwnProperty.call(j.pluralRulesMap,n)){for(var i=j.pluralRulesMap[n],r=0;r<i.length;r++)if(i[r]===e||i[r]===t)return n}};j.pluralRulesMap={arabic:["ar"],chinese:["my","zh","id","ja","jv","ko","ms","th","vi"],french:["hy","bn","fr","gu","hi","fa","pa","zu"],german:["af","sq","az","eu","bg","ca","da","nl","en","et","fi","ka","de","el","hu","lb","no","so","sw","sv","ta","te","tr","ur"],irish:["ga"],russian:["ru","uk"],scottish:["gd"],spanish:["pt-PT","it","es"],welsh:["cy"]};j.pluralRules={arabic:function(e){return e===0?"zero":e===1?"one":e===2?"two":e%100>=3&&e%100<=10?"few":e%100>=11&&e%100<=99?"many":"other"},chinese:function(){return"other"},french:function(e){return e===0||e===1?"one":"other"},german:function(e){return e===1?"one":"other"},irish:function(e){return e===1?"one":e===2?"two":e>=3&&e<=6?"few":e>=7&&e<=10?"many":"other"},russian:function(e){var t=e%100,n=t%10;return n===1&&t!==11?"one":n>=2&&n<=4&&!(t>=12&&t<=14)?"few":n===0||n>=5&&n<=9||t>=11&&t<=14?"many":"other"},scottish:function(e){return e===1||e===11?"one":e===2||e===12?"two":e>=3&&e<=10||e>=13&&e<=19?"few":"other"},spanish:function(e){return e===1?"one":e%1e6===0&&e!==0?"many":"other"},welsh:function(e){return e===0?"zero":e===1?"one":e===2?"two":e===3?"few":e===6?"many":"other"}};(function(e){var t="DOMTokenList"in this&&function(n){return"classList"in n?!n.classList.toggle("x",!1)&&!n.className:!0}(document.createElement("x"));t||function(n){var i="DOMTokenList"in n&&n.DOMTokenList;(!i||document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg")&&!(document.createElementNS("http://www.w3.org/2000/svg","svg").classList instanceof DOMTokenList))&&(n.DOMTokenList=function(){var r=!0,l=function(o,u,s,c){Object.defineProperty?Object.defineProperty(o,u,{configurable:r===!1?!0:!!c,get:s}):o.__defineGetter__(u,s)};try{l({},"support")}catch{r=!1}var a=function(o,u){var s=this,c=[],p={},m=0,y=0,d=function(v){l(s,v,function(){return w(),c[v]},!1)},_=function(){if(m>=y)for(;y<m;++y)d(y)},w=function(){var v,b,g=arguments,h=/\s+/;if(g.length){for(b=0;b<g.length;++b)if(h.test(g[b]))throw v=new SyntaxError('String "'+g[b]+'" contains an invalid character'),v.code=5,v.name="InvalidCharacterError",v}for(typeof o[u]=="object"?c=(""+o[u].baseVal).replace(/^\s+|\s+$/g,"").split(h):c=(""+o[u]).replace(/^\s+|\s+$/g,"").split(h),c[0]===""&&(c=[]),p={},b=0;b<c.length;++b)p[c[b]]=!0;m=c.length,_()};return w(),l(s,"length",function(){return w(),m}),s.toLocaleString=s.toString=function(){return w(),c.join(" ")},s.item=function(v){return w(),c[v]},s.contains=function(v){return w(),!!p[v]},s.add=function(){w.apply(s,v=arguments);for(var v,b,g=0,h=v.length;g<h;++g)b=v[g],p[b]||(c.push(b),p[b]=!0);m!==c.length&&(m=c.length>>>0,typeof o[u]=="object"?o[u].baseVal=c.join(" "):o[u]=c.join(" "),_())},s.remove=function(){w.apply(s,v=arguments);for(var v,b={},g=0,h=[];g<v.length;++g)b[v[g]]=!0,delete p[v[g]];for(g=0;g<c.length;++g)b[c[g]]||h.push(c[g]);c=h,m=h.length>>>0,typeof o[u]=="object"?o[u].baseVal=c.join(" "):o[u]=c.join(" "),_()},s.toggle=function(v,b){return w.apply(s,[v]),e!==b?b?(s.add(v),!0):(s.remove(v),!1):p[v]?(s.remove(v),!1):(s.add(v),!0)},s};return a}()),function(){var r=document.createElement("span");"classList"in r&&(r.classList.toggle("x",!1),r.classList.contains("x")&&(r.classList.constructor.prototype.toggle=function(a){var o=arguments[1];if(o===e){var u=!this.contains(a);return this[u?"add":"remove"](a),u}return o=!!o,this[o?"add":"remove"](a),o}))}(),function(){var r=document.createElement("span");if("classList"in r&&(r.classList.add("a","b"),!r.classList.contains("b"))){var l=r.classList.constructor.prototype.add;r.classList.constructor.prototype.add=function(){for(var a=arguments,o=arguments.length,u=0;u<o;u++)l.call(this,a[u])}}}(),function(){var r=document.createElement("span");if("classList"in r&&(r.classList.add("a"),r.classList.add("b"),r.classList.remove("a","b"),!!r.classList.contains("b"))){var l=r.classList.constructor.prototype.remove;r.classList.constructor.prototype.remove=function(){for(var a=arguments,o=arguments.length,u=0;u<o;u++)l.call(this,a[u])}}}()}(this)}).call(typeof window=="object"&&window||typeof self=="object"&&self||typeof global=="object"&&global||{});(function(e){var t="document"in this&&"classList"in document.documentElement&&"Element"in this&&"classList"in Element.prototype&&function(){var n=document.createElement("span");return n.classList.add("a","b"),n.classList.contains("b")}();t||function(n){var i=!0,r=function(a,o,u,s){Object.defineProperty?Object.defineProperty(a,o,{configurable:i===!1?!0:!!s,get:u}):a.__defineGetter__(o,u)};try{r({},"support")}catch{i=!1}var l=function(a,o,u){r(a.prototype,o,function(){var s,c=this,p="__defineGetter__DEFINE_PROPERTY"+o;if(c[p])return s;if(c[p]=!0,i===!1){for(var m,y=l.mirror||document.createElement("div"),d=y.childNodes,_=d.length,w=0;w<_;++w)if(d[w]._R===c){m=d[w];break}m||(m=y.appendChild(document.createElement("div"))),s=DOMTokenList.call(m,c,u)}else s=new DOMTokenList(c,u);return r(c,o,function(){return s}),delete c[p],s},!0)};l(n.Element,"classList","className"),l(n.HTMLElement,"classList","className"),l(n.HTMLLinkElement,"relList","rel"),l(n.HTMLAnchorElement,"relList","rel"),l(n.HTMLAreaElement,"relList","rel")}(this)}).call(typeof window=="object"&&window||typeof self=="object"&&self||typeof global=="object"&&global||{});(function(e){var t="document"in this&&"matches"in document.documentElement;t||(Element.prototype.matches=Element.prototype.webkitMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.mozMatchesSelector||function(i){for(var r=this,l=(r.document||r.ownerDocument).querySelectorAll(i),a=0;l[a]&&l[a]!==r;)++a;return!!l[a]})}).call(typeof window=="object"&&window||typeof self=="object"&&self||typeof global=="object"&&global||{});(function(e){var t="document"in this&&"closest"in document.documentElement;t||(Element.prototype.closest=function(i){for(var r=this;r;){if(r.matches(i))return r;r="SVGElement"in window&&r instanceof SVGElement?r.parentNode:r.parentElement}return null})}).call(typeof window=="object"&&window||typeof self=="object"&&self||typeof global=="object"&&global||{});(function(e){var t="Window"in this;t||typeof WorkerGlobalScope>"u"&&typeof importScripts!="function"&&function(n){n.constructor?n.Window=n.constructor:(n.Window=n.constructor=new Function("return function Window() {}")()).prototype=this}(this)}).call(typeof window=="object"&&window||typeof self=="object"&&self||typeof global=="object"&&global||{});(function(e){var t=function(n){if(!("Event"in n))return!1;if(typeof n.Event=="function")return!0;try{return new Event("click"),!0}catch{return!1}}(this);t||function(){var n={click:1,dblclick:1,keyup:1,keypress:1,keydown:1,mousedown:1,mouseup:1,mousemove:1,mouseover:1,mouseenter:1,mouseleave:1,mouseout:1,storage:1,storagecommit:1,textinput:1};if(typeof document>"u"||typeof window>"u")return;function i(l,a){for(var o=-1,u=l.length;++o<u;)if(o in l&&l[o]===a)return o;return-1}var r=window.Event&&window.Event.prototype||null;window.Event=Window.prototype.Event=function(a,o){if(!a)throw new Error("Not enough arguments");var u;if("createEvent"in document){u=document.createEvent("Event");var s=o&&o.bubbles!==e?o.bubbles:!1,c=o&&o.cancelable!==e?o.cancelable:!1;return u.initEvent(a,s,c),u}return u=document.createEventObject(),u.type=a,u.bubbles=o&&o.bubbles!==e?o.bubbles:!1,u.cancelable=o&&o.cancelable!==e?o.cancelable:!1,u},r&&Object.defineProperty(window.Event,"prototype",{configurable:!1,enumerable:!1,writable:!0,value:r}),"createEvent"in document||(window.addEventListener=Window.prototype.addEventListener=Document.prototype.addEventListener=Element.prototype.addEventListener=function(){var a=this,o=arguments[0],u=arguments[1];if(a===window&&o in n)throw new Error("In IE8 the event: "+o+" is not available on the window object. Please see https://github.com/Financial-Times/polyfill-service/issues/317 for more information.");a._events||(a._events={}),a._events[o]||(a._events[o]=function(s){var c=a._events[s.type].list,p=c.slice(),m=-1,y=p.length,d;for(s.preventDefault=function(){s.cancelable!==!1&&(s.returnValue=!1)},s.stopPropagation=function(){s.cancelBubble=!0},s.stopImmediatePropagation=function(){s.cancelBubble=!0,s.cancelImmediate=!0},s.currentTarget=a,s.relatedTarget=s.fromElement||null,s.target=s.target||s.srcElement||a,s.timeStamp=new Date().getTime(),s.clientX&&(s.pageX=s.clientX+document.documentElement.scrollLeft,s.pageY=s.clientY+document.documentElement.scrollTop);++m<y&&!s.cancelImmediate;)m in p&&(d=p[m],i(c,d)!==-1&&typeof d=="function"&&d.call(a,s))},a._events[o].list=[],a.attachEvent&&a.attachEvent("on"+o,a._events[o])),a._events[o].list.push(u)},window.removeEventListener=Window.prototype.removeEventListener=Document.prototype.removeEventListener=Element.prototype.removeEventListener=function(){var a=this,o=arguments[0],u=arguments[1],s;a._events&&a._events[o]&&a._events[o].list&&(s=i(a._events[o].list,u),s!==-1&&(a._events[o].list.splice(s,1),a._events[o].list.length||(a.detachEvent&&a.detachEvent("on"+o,a._events[o]),delete a._events[o])))},window.dispatchEvent=Window.prototype.dispatchEvent=Document.prototype.dispatchEvent=Element.prototype.dispatchEvent=function(a){if(!arguments.length)throw new Error("Not enough arguments");if(!a||typeof a.type!="string")throw new Error("DOM Events Exception 0");var o=this,u=a.type;try{if(!a.bubbles){a.cancelBubble=!0;var s=function(c){c.cancelBubble=!0,(o||window).detachEvent("on"+u,s)};this.attachEvent("on"+u,s)}this.fireEvent("on"+u,a)}catch{a.target=o;do a.currentTarget=o,"_events"in o&&typeof o._events[u]=="function"&&o._events[u].call(o,a),typeof o["on"+u]=="function"&&o["on"+u].call(o,a),o=o.nodeType===9?o.parentWindow:o.parentNode;while(o&&!a.cancelBubble)}return!0},document.attachEvent("onreadystatechange",function(){document.readyState==="complete"&&document.dispatchEvent(new Event("DOMContentLoaded",{bubbles:!0}))}))}()}).call(typeof window=="object"&&window||typeof self=="object"&&self||typeof global=="object"&&global||{});(function(e){var t="bind"in Function.prototype;t||Object.defineProperty(Function.prototype,"bind",{value:function(i){var r=Array,l=Object,a=l.prototype,o=r.prototype,u=function(){},s=a.toString,c=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",p,m=Function.prototype.toString,y=function(M){try{return m.call(M),!0}catch{return!1}},d="[object Function]",_="[object GeneratorFunction]";p=function(M){if(typeof M!="function")return!1;if(c)return y(M);var Q=s.call(M);return Q===d||Q===_};var w=o.slice,v=o.concat,b=o.push,g=Math.max,h=this;if(!p(h))throw new TypeError("Function.prototype.bind called on incompatible "+h);for(var E=w.call(arguments,1),A,T=function(){if(this instanceof A){var H=h.apply(this,v.call(E,w.call(arguments)));return l(H)===H?H:this}else return h.apply(i,v.call(E,w.call(arguments)))},Z=g(0,h.length-E.length),R=[],W=0;W<Z;W++)b.call(R,"$"+W);return A=Function("binder","return function ("+R.join(",")+"){ return binder.apply(this, arguments); }")(T),h.prototype&&(u.prototype=h.prototype,A.prototype=new u,u.prototype=null),A}})}).call(typeof window=="object"&&window||typeof self=="object"&&self||typeof global=="object"&&global||{});var ut={hideAllSections:"Hide all sections",hideSection:"Hide",hideSectionAriaLabel:"Hide this section",showAllSections:"Show all sections",showSection:"Show",showSectionAriaLabel:"Show this section"};function F(e,t){if(!(e instanceof HTMLElement))return this;this.$module=e;var n={i18n:ut,rememberExpanded:!0};this.config=re(n,t||{},oe(e.dataset)),this.i18n=new j(Ee(this.config,"i18n")),this.controlsClass="govuk-accordion__controls",this.showAllClass="govuk-accordion__show-all",this.showAllTextClass="govuk-accordion__show-all-text",this.sectionClass="govuk-accordion__section",this.sectionExpandedClass="govuk-accordion__section--expanded",this.sectionButtonClass="govuk-accordion__section-button",this.sectionHeaderClass="govuk-accordion__section-header",this.sectionHeadingClass="govuk-accordion__section-heading",this.sectionHeadingDividerClass="govuk-accordion__section-heading-divider",this.sectionHeadingTextClass="govuk-accordion__section-heading-text",this.sectionHeadingTextFocusClass="govuk-accordion__section-heading-text-focus",this.sectionShowHideToggleClass="govuk-accordion__section-toggle",this.sectionShowHideToggleFocusClass="govuk-accordion__section-toggle-focus",this.sectionShowHideTextClass="govuk-accordion__section-toggle-text",this.upChevronIconClass="govuk-accordion-nav__chevron",this.downChevronIconClass="govuk-accordion-nav__chevron--down",this.sectionSummaryClass="govuk-accordion__section-summary",this.sectionSummaryFocusClass="govuk-accordion__section-summary-focus",this.sectionContentClass="govuk-accordion__section-content";var i=this.$module.querySelectorAll("."+this.sectionClass);if(!i.length)return this;this.$sections=i,this.browserSupportsSessionStorage=ct.checkForSessionStorage(),this.$showAllButton=null,this.$showAllIcon=null,this.$showAllText=null}F.prototype.init=function(){if(!(!this.$module||!this.$sections)){this.initControls(),this.initSectionHeaders();var e=this.checkIfAllSectionsOpen();this.updateShowAllButton(e)}};F.prototype.initControls=function(){this.$showAllButton=document.createElement("button"),this.$showAllButton.setAttribute("type","button"),this.$showAllButton.setAttribute("class",this.showAllClass),this.$showAllButton.setAttribute("aria-expanded","false"),this.$showAllIcon=document.createElement("span"),this.$showAllIcon.classList.add(this.upChevronIconClass),this.$showAllButton.appendChild(this.$showAllIcon);var e=document.createElement("div");e.setAttribute("class",this.controlsClass),e.appendChild(this.$showAllButton),this.$module.insertBefore(e,this.$module.firstChild),this.$showAllText=document.createElement("span"),this.$showAllText.classList.add(this.showAllTextClass),this.$showAllButton.appendChild(this.$showAllText),this.$showAllButton.addEventListener("click",this.onShowOrHideAllToggle.bind(this)),"onbeforematch"in document&&document.addEventListener("beforematch",this.onBeforeMatch.bind(this))};F.prototype.initSectionHeaders=function(){var e=this,t=this.$sections;$(t,function(n,i){var r=n.querySelector("."+e.sectionHeaderClass);r&&(e.constructHeaderMarkup(r,i),e.setExpanded(e.isExpanded(n),n),r.addEventListener("click",e.onSectionToggle.bind(e,n)),e.setInitialState(n))})};F.prototype.constructHeaderMarkup=function(e,t){var n=e.querySelector("."+this.sectionButtonClass),i=e.querySelector("."+this.sectionHeadingClass),r=e.querySelector("."+this.sectionSummaryClass);if(!(!n||!i)){var l=document.createElement("button");l.setAttribute("type","button"),l.setAttribute("aria-controls",this.$module.id+"-content-"+(t+1).toString());for(var a=0;a<n.attributes.length;a++){var o=n.attributes.item(a);o.nodeName!=="id"&&l.setAttribute(o.nodeName,o.nodeValue)}var u=document.createElement("span");u.classList.add(this.sectionHeadingTextClass),u.id=n.id;var s=document.createElement("span");s.classList.add(this.sectionHeadingTextFocusClass),u.appendChild(s),s.innerHTML=n.innerHTML;var c=document.createElement("span");c.classList.add(this.sectionShowHideToggleClass),c.setAttribute("data-nosnippet","");var p=document.createElement("span");p.classList.add(this.sectionShowHideToggleFocusClass),c.appendChild(p);var m=document.createElement("span"),y=document.createElement("span");if(y.classList.add(this.upChevronIconClass),p.appendChild(y),m.classList.add(this.sectionShowHideTextClass),p.appendChild(m),l.appendChild(u),l.appendChild(this.getButtonPunctuationEl()),r){var d=document.createElement("span"),_=document.createElement("span");_.classList.add(this.sectionSummaryFocusClass),d.appendChild(_);for(var w=0,v=r.attributes.length;w<v;++w){var b=r.attributes.item(w).nodeName,g=r.attributes.item(w).nodeValue;d.setAttribute(b,g)}_.innerHTML=r.innerHTML,r.parentNode.replaceChild(d,r),l.appendChild(d),l.appendChild(this.getButtonPunctuationEl())}l.appendChild(c),i.removeChild(n),i.appendChild(l)}};F.prototype.onBeforeMatch=function(e){var t=e.target;if(t instanceof Element){var n=t.closest("."+this.sectionClass);n&&this.setExpanded(!0,n)}};F.prototype.onSectionToggle=function(e){var t=this.isExpanded(e);this.setExpanded(!t,e),this.storeState(e)};F.prototype.onShowOrHideAllToggle=function(){var e=this,t=this.$sections,n=!this.checkIfAllSectionsOpen();$(t,function(i){e.setExpanded(n,i),e.storeState(i)}),e.updateShowAllButton(n)};F.prototype.setExpanded=function(e,t){var n=t.querySelector("."+this.upChevronIconClass),i=t.querySelector("."+this.sectionShowHideTextClass),r=t.querySelector("."+this.sectionButtonClass),l=t.querySelector("."+this.sectionContentClass);if(!(!n||!(i instanceof HTMLElement)||!r||!l)){var a=e?this.i18n.t("hideSection"):this.i18n.t("showSection");i.innerText=a,r.setAttribute("aria-expanded",e.toString());var o=[],u=t.querySelector("."+this.sectionHeadingTextClass);u instanceof HTMLElement&&o.push(u.innerText.trim());var s=t.querySelector("."+this.sectionSummaryClass);s instanceof HTMLElement&&o.push(s.innerText.trim());var c=e?this.i18n.t("hideSectionAriaLabel"):this.i18n.t("showSectionAriaLabel");o.push(c),r.setAttribute("aria-label",o.join(" , ")),e?(l.removeAttribute("hidden"),t.classList.add(this.sectionExpandedClass),n.classList.remove(this.downChevronIconClass)):(l.setAttribute("hidden","until-found"),t.classList.remove(this.sectionExpandedClass),n.classList.add(this.downChevronIconClass));var p=this.checkIfAllSectionsOpen();this.updateShowAllButton(p)}};F.prototype.isExpanded=function(e){return e.classList.contains(this.sectionExpandedClass)};F.prototype.checkIfAllSectionsOpen=function(){var e=this.$sections.length,t=this.$module.querySelectorAll("."+this.sectionExpandedClass).length,n=e===t;return n};F.prototype.updateShowAllButton=function(e){var t=e?this.i18n.t("hideAllSections"):this.i18n.t("showAllSections");this.$showAllButton.setAttribute("aria-expanded",e.toString()),this.$showAllText.innerText=t,e?this.$showAllIcon.classList.remove(this.downChevronIconClass):this.$showAllIcon.classList.add(this.downChevronIconClass)};var ct={checkForSessionStorage:function(){var e="this is the test string",t;try{return window.sessionStorage.setItem(e,e),t=window.sessionStorage.getItem(e)===e.toString(),window.sessionStorage.removeItem(e),t}catch{return!1}}};F.prototype.storeState=function(e){if(this.browserSupportsSessionStorage&&this.config.rememberExpanded){var t=e.querySelector("."+this.sectionButtonClass);if(t){var n=t.getAttribute("aria-controls"),i=t.getAttribute("aria-expanded");n&&i&&window.sessionStorage.setItem(n,i)}}};F.prototype.setInitialState=function(e){if(this.browserSupportsSessionStorage&&this.config.rememberExpanded){var t=e.querySelector("."+this.sectionButtonClass);if(t){var n=t.getAttribute("aria-controls"),i=n?window.sessionStorage.getItem(n):null;i!==null&&this.setExpanded(i==="true",e)}}};F.prototype.getButtonPunctuationEl=function(){var e=document.createElement("span");return e.classList.add("govuk-visually-hidden",this.sectionHeadingDividerClass),e.innerHTML=", ",e};var dt=32,ht=1;function me(e,t){if(!(e instanceof HTMLElement))return this;this.$module=e,this.debounceFormSubmitTimer=null;var n={preventDoubleClick:!1};this.config=re(n,t||{},oe(e.dataset))}me.prototype.init=function(){this.$module&&(this.$module.addEventListener("keydown",this.handleKeyDown),this.$module.addEventListener("click",this.debounce.bind(this)))};me.prototype.handleKeyDown=function(e){var t=e.target;e.keyCode===dt&&t instanceof HTMLElement&&t.getAttribute("role")==="button"&&(e.preventDefault(),t.click())};me.prototype.debounce=function(e){if(this.config.preventDoubleClick){if(this.debounceFormSubmitTimer)return e.preventDefault(),!1;this.debounceFormSubmitTimer=setTimeout(function(){this.debounceFormSubmitTimer=null}.bind(this),ht*1e3)}};function ft(e,t){var n=e.closest("["+t+"]");return n?n.getAttribute(t):null}(function(e){var t="Date"in self&&"now"in self.Date&&"getTime"in self.Date.prototype;t||(Date.now=function(){return new Date().getTime()})}).call(typeof window=="object"&&window||typeof self=="object"&&self||typeof global=="object"&&global||{});var pt={charactersUnderLimit:{one:"You have %{count} character remaining",other:"You have %{count} characters remaining"},charactersAtLimit:"You have 0 characters remaining",charactersOverLimit:{one:"You have %{count} character too many",other:"You have %{count} characters too many"},wordsUnderLimit:{one:"You have %{count} word remaining",other:"You have %{count} words remaining"},wordsAtLimit:"You have 0 words remaining",wordsOverLimit:{one:"You have %{count} word too many",other:"You have %{count} words too many"},textareaDescription:{other:""}};function N(e,t){if(!(e instanceof HTMLElement))return this;var n=e.querySelector(".govuk-js-character-count");if(!(n instanceof HTMLTextAreaElement||n instanceof HTMLInputElement))return this;var i={threshold:0,i18n:pt},r=oe(e.dataset),l={};if(("maxwords"in r||"maxlength"in r)&&(l={maxlength:!1,maxwords:!1}),this.config=re(i,t||{},l,r),this.i18n=new j(Ee(this.config,"i18n"),{locale:ft(e,"lang")}),this.maxLength=1/0,"maxwords"in this.config&&this.config.maxwords)this.maxLength=this.config.maxwords;else if("maxlength"in this.config&&this.config.maxlength)this.maxLength=this.config.maxlength;else return;this.$module=e,this.$textarea=n,this.$visibleCountMessage=null,this.$screenReaderCountMessage=null,this.lastInputTimestamp=null,this.lastInputValue="",this.valueChecker=null}N.prototype.init=function(){if(!(!this.$module||!this.$textarea)){var e=this.$textarea,t=document.getElementById(e.id+"-info");if(t){t.innerText.match(/^\s*$/)&&(t.innerText=this.i18n.t("textareaDescription",{count:this.maxLength})),e.insertAdjacentElement("afterend",t);var n=document.createElement("div");n.className="govuk-character-count__sr-status govuk-visually-hidden",n.setAttribute("aria-live","polite"),this.$screenReaderCountMessage=n,t.insertAdjacentElement("afterend",n);var i=document.createElement("div");i.className=t.className,i.classList.add("govuk-character-count__status"),i.setAttribute("aria-hidden","true"),this.$visibleCountMessage=i,t.insertAdjacentElement("afterend",i),t.classList.add("govuk-visually-hidden"),e.removeAttribute("maxlength"),this.bindChangeEvents(),window.addEventListener("onpageshow"in window?"pageshow":"DOMContentLoaded",this.updateCountMessage.bind(this)),this.updateCountMessage()}}};N.prototype.bindChangeEvents=function(){var e=this.$textarea;e.addEventListener("keyup",this.handleKeyUp.bind(this)),e.addEventListener("focus",this.handleFocus.bind(this)),e.addEventListener("blur",this.handleBlur.bind(this))};N.prototype.handleKeyUp=function(){this.updateVisibleCountMessage(),this.lastInputTimestamp=Date.now()};N.prototype.handleFocus=function(){this.valueChecker=setInterval(function(){(!this.lastInputTimestamp||Date.now()-500>=this.lastInputTimestamp)&&this.updateIfValueChanged()}.bind(this),1e3)};N.prototype.handleBlur=function(){clearInterval(this.valueChecker)};N.prototype.updateIfValueChanged=function(){this.$textarea.value!==this.lastInputValue&&(this.lastInputValue=this.$textarea.value,this.updateCountMessage())};N.prototype.updateCountMessage=function(){this.updateVisibleCountMessage(),this.updateScreenReaderCountMessage()};N.prototype.updateVisibleCountMessage=function(){var e=this.$textarea,t=this.$visibleCountMessage,n=this.maxLength-this.count(e.value);this.isOverThreshold()?t.classList.remove("govuk-character-count__message--disabled"):t.classList.add("govuk-character-count__message--disabled"),n<0?(e.classList.add("govuk-textarea--error"),t.classList.remove("govuk-hint"),t.classList.add("govuk-error-message")):(e.classList.remove("govuk-textarea--error"),t.classList.remove("govuk-error-message"),t.classList.add("govuk-hint")),t.innerText=this.getCountMessage()};N.prototype.updateScreenReaderCountMessage=function(){var e=this.$screenReaderCountMessage;this.isOverThreshold()?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden","true"),e.innerText=this.getCountMessage()};N.prototype.count=function(e){if("maxwords"in this.config&&this.config.maxwords){var t=e.match(/\S+/g)||[];return t.length}else return e.length};N.prototype.getCountMessage=function(){var e=this.maxLength-this.count(this.$textarea.value),t="maxwords"in this.config&&this.config.maxwords?"words":"characters";return this.formatCountMessage(e,t)};N.prototype.formatCountMessage=function(e,t){if(e===0)return this.i18n.t(t+"AtLimit");var n=e<0?"OverLimit":"UnderLimit";return this.i18n.t(t+n,{count:Math.abs(e)})};N.prototype.isOverThreshold=function(){if(!this.config.threshold)return!0;var e=this.$textarea,t=this.count(e.value),n=this.maxLength,i=n*this.config.threshold/100;return i<=t};function ne(e){if(!(e instanceof HTMLElement))return this;var t=e.querySelectorAll('input[type="checkbox"]');if(!t.length)return this;this.$module=e,this.$inputs=t}ne.prototype.init=function(){if(!(!this.$module||!this.$inputs)){var e=this.$module,t=this.$inputs;$(t,function(n){var i=n.getAttribute("data-aria-controls");!i||!document.getElementById(i)||(n.setAttribute("aria-controls",i),n.removeAttribute("data-aria-controls"))}),window.addEventListener("onpageshow"in window?"pageshow":"DOMContentLoaded",this.syncAllConditionalReveals.bind(this)),this.syncAllConditionalReveals(),e.addEventListener("click",this.handleClick.bind(this))}};ne.prototype.syncAllConditionalReveals=function(){$(this.$inputs,this.syncConditionalRevealWithInputState.bind(this))};ne.prototype.syncConditionalRevealWithInputState=function(e){var t=e.getAttribute("aria-controls");if(t){var n=document.getElementById(t);if(n&&n.classList.contains("govuk-checkboxes__conditional")){var i=e.checked;e.setAttribute("aria-expanded",i.toString()),n.classList.toggle("govuk-checkboxes__conditional--hidden",!i)}}};ne.prototype.unCheckAllInputsExcept=function(e){var t=this,n=document.querySelectorAll('input[type="checkbox"][name="'+e.name+'"]');$(n,function(i){var r=e.form===i.form;r&&i!==e&&(i.checked=!1,t.syncConditionalRevealWithInputState(i))})};ne.prototype.unCheckExclusiveInputs=function(e){var t=this,n=document.querySelectorAll('input[data-behaviour="exclusive"][type="checkbox"][name="'+e.name+'"]');$(n,function(i){var r=e.form===i.form;r&&(i.checked=!1,t.syncConditionalRevealWithInputState(i))})};ne.prototype.handleClick=function(e){var t=e.target;if(!(!(t instanceof HTMLInputElement)||t.type!=="checkbox")){var n=t.getAttribute("aria-controls");if(n&&this.syncConditionalRevealWithInputState(t),!!t.checked){var i=t.getAttribute("data-behaviour")==="exclusive";i?this.unCheckAllInputsExcept(t):this.unCheckExclusiveInputs(t)}}};var mt=13,He=32;function le(e){if(!(e instanceof HTMLElement))return this;this.$module=e,this.$summary=null,this.$content=null}le.prototype.init=function(){if(this.$module){var e="HTMLDetailsElement"in window&&this.$module instanceof HTMLDetailsElement;e||this.polyfillDetails()}};le.prototype.polyfillDetails=function(){var e=this.$module,t=this.$summary=e.getElementsByTagName("summary").item(0),n=this.$content=e.getElementsByTagName("div").item(0);!t||!n||(n.id||(n.id="details-content-"+at()),e.setAttribute("role","group"),t.setAttribute("role","button"),t.setAttribute("aria-controls",n.id),t.tabIndex=0,this.$module.hasAttribute("open")?t.setAttribute("aria-expanded","true"):(t.setAttribute("aria-expanded","false"),n.style.display="none"),this.polyfillHandleInputs(this.polyfillSetAttributes.bind(this)))};le.prototype.polyfillSetAttributes=function(){return this.$module.hasAttribute("open")?(this.$module.removeAttribute("open"),this.$summary.setAttribute("aria-expanded","false"),this.$content.style.display="none"):(this.$module.setAttribute("open","open"),this.$summary.setAttribute("aria-expanded","true"),this.$content.style.display=""),!0};le.prototype.polyfillHandleInputs=function(e){this.$summary.addEventListener("keypress",function(t){var n=t.target;(t.keyCode===mt||t.keyCode===He)&&n instanceof HTMLElement&&n.nodeName.toLowerCase()==="summary"&&(t.preventDefault(),n.click?n.click():e(t))}),this.$summary.addEventListener("keyup",function(t){var n=t.target;t.keyCode===He&&n instanceof HTMLElement&&n.nodeName.toLowerCase()==="summary"&&t.preventDefault()}),this.$summary.addEventListener("click",e)};function ie(e,t){if(!(e instanceof HTMLElement))return this;this.$module=e;var n={disableAutoFocus:!1};this.config=re(n,t||{},oe(e.dataset))}ie.prototype.init=function(){if(this.$module){var e=this.$module;this.setFocus(),e.addEventListener("click",this.handleClick.bind(this))}};ie.prototype.setFocus=function(){var e=this.$module;this.config.disableAutoFocus||(e.setAttribute("tabindex","-1"),e.addEventListener("blur",function(){e.removeAttribute("tabindex")}),e.focus())};ie.prototype.handleClick=function(e){var t=e.target;this.focusTarget(t)&&e.preventDefault()};ie.prototype.focusTarget=function(e){if(!(e instanceof HTMLAnchorElement))return!1;var t=this.getFragmentFromUrl(e.href);if(!t)return!1;var n=document.getElementById(t);if(!n)return!1;var i=this.getAssociatedLegendOrLabel(n);return i?(i.scrollIntoView(),n.focus({preventScroll:!0}),!0):!1};ie.prototype.getFragmentFromUrl=function(e){if(e.indexOf("#")!==-1)return e.split("#").pop()};ie.prototype.getAssociatedLegendOrLabel=function(e){var t=e.closest("fieldset");if(t){var n=t.getElementsByTagName("legend");if(n.length){var i=n[0];if(e instanceof HTMLInputElement&&(e.type==="checkbox"||e.type==="radio"))return i;var r=i.getBoundingClientRect().top,l=e.getBoundingClientRect();if(l.height&&window.innerHeight){var a=l.top+l.height;if(a-r<window.innerHeight/2)return i}}}return document.querySelector("label[for='"+e.getAttribute("id")+"']")||e.closest("label")};var vt={activated:"Loading.",timedOut:"Exit this page expired.",pressTwoMoreTimes:"Shift, press 2 more times to exit.",pressOneMoreTime:"Shift, press 1 more time to exit."};function D(e,t){var n={i18n:vt};if(!(e instanceof HTMLElement))return this;var i=e.querySelector(".govuk-exit-this-page__button");if(!(i instanceof HTMLElement))return this;this.config=re(n,t||{},oe(e.dataset)),this.i18n=new j(Ee(this.config,"i18n")),this.$module=e,this.$button=i,this.$skiplinkButton=document.querySelector(".govuk-js-exit-this-page-skiplink"),this.$updateSpan=null,this.$indicatorContainer=null,this.$overlay=null,this.keypressCounter=0,this.lastKeyWasModified=!1,this.timeoutTime=5e3,this.keypressTimeoutId=null,this.timeoutMessageId=null}D.prototype.initUpdateSpan=function(){this.$updateSpan=document.createElement("span"),this.$updateSpan.setAttribute("role","status"),this.$updateSpan.className="govuk-visually-hidden",this.$module.appendChild(this.$updateSpan)};D.prototype.initButtonClickHandler=function(){this.$button.addEventListener("click",this.handleClick.bind(this)),this.$skiplinkButton&&this.$skiplinkButton.addEventListener("click",this.handleClick.bind(this))};D.prototype.buildIndicator=function(){this.$indicatorContainer=document.createElement("div"),this.$indicatorContainer.className="govuk-exit-this-page__indicator",this.$indicatorContainer.setAttribute("aria-hidden","true");for(var e=0;e<3;e++){var t=document.createElement("div");t.className="govuk-exit-this-page__indicator-light",this.$indicatorContainer.appendChild(t)}this.$button.appendChild(this.$indicatorContainer)};D.prototype.updateIndicator=function(){this.keypressCounter>0?this.$indicatorContainer.classList.add("govuk-exit-this-page__indicator--visible"):this.$indicatorContainer.classList.remove("govuk-exit-this-page__indicator--visible");var e=this.$indicatorContainer.querySelectorAll(".govuk-exit-this-page__indicator-light");$(e,function(t,n){t.classList.toggle("govuk-exit-this-page__indicator-light--on",n<this.keypressCounter)}.bind(this))};D.prototype.exitPage=function(){this.$updateSpan.innerText="",document.body.classList.add("govuk-exit-this-page-hide-content"),this.$overlay=document.createElement("div"),this.$overlay.className="govuk-exit-this-page-overlay",this.$overlay.setAttribute("role","alert"),document.body.appendChild(this.$overlay),this.$overlay.innerText=this.i18n.t("activated"),window.location.href=this.$button.getAttribute("href")};D.prototype.handleClick=function(e){e.preventDefault(),this.exitPage()};D.prototype.handleKeypress=function(e){(e.key==="Shift"||e.keyCode===16||e.which===16)&&!this.lastKeyWasModified?(this.keypressCounter+=1,this.updateIndicator(),this.timeoutMessageId!==null&&(clearTimeout(this.timeoutMessageId),this.timeoutMessageId=null),this.keypressCounter>=3?(this.keypressCounter=0,this.keypressTimeoutId!==null&&(clearTimeout(this.keypressTimeoutId),this.keypressTimeoutId=null),this.exitPage()):this.keypressCounter===1?this.$updateSpan.innerText=this.i18n.t("pressTwoMoreTimes"):this.$updateSpan.innerText=this.i18n.t("pressOneMoreTime"),this.setKeypressTimer()):this.keypressTimeoutId!==null&&this.resetKeypressTimer(),this.lastKeyWasModified=e.shiftKey};D.prototype.setKeypressTimer=function(){clearTimeout(this.keypressTimeoutId),this.keypressTimeoutId=setTimeout(this.resetKeypressTimer.bind(this),this.timeoutTime)};D.prototype.resetKeypressTimer=function(){clearTimeout(this.keypressTimeoutId),this.keypressTimeoutId=null,this.keypressCounter=0,this.$updateSpan.innerText=this.i18n.t("timedOut"),this.timeoutMessageId=setTimeout(function(){this.$updateSpan.innerText=""}.bind(this),this.timeoutTime),this.updateIndicator()};D.prototype.resetPage=function(){document.body.classList.remove("govuk-exit-this-page-hide-content"),this.$overlay&&(this.$overlay.remove(),this.$overlay=null),this.$updateSpan.setAttribute("role","status"),this.$updateSpan.innerText="",this.updateIndicator(),this.keypressTimeoutId&&clearTimeout(this.keypressTimeoutId),this.timeoutMessageId&&clearTimeout(this.timeoutMessageId)};D.prototype.init=function(){this.buildIndicator(),this.initUpdateSpan(),this.initButtonClickHandler(),"govukFrontendExitThisPageKeypress"in document.body.dataset||(document.addEventListener("keyup",this.handleKeypress.bind(this),!0),document.body.dataset.govukFrontendExitThisPageKeypress="true"),window.addEventListener("onpageshow"in window?"pageshow":"DOMContentLoaded",this.resetPage.bind(this))};function ve(e){if(!(e instanceof HTMLElement))return this;this.$module=e,this.$menuButton=e.querySelector(".govuk-js-header-toggle"),this.$menu=this.$menuButton&&e.querySelector("#"+this.$menuButton.getAttribute("aria-controls")),this.menuIsOpen=!1,this.mql=null}ve.prototype.init=function(){!this.$module||!this.$menuButton||!this.$menu||("matchMedia"in window?(this.mql=window.matchMedia("(min-width: 48.0625em)"),"addEventListener"in this.mql?this.mql.addEventListener("change",this.syncState.bind(this)):this.mql.addListener(this.syncState.bind(this)),this.syncState(),this.$menuButton.addEventListener("click",this.handleMenuButtonClick.bind(this))):this.$menuButton.setAttribute("hidden",""))};ve.prototype.syncState=function(){this.mql.matches?(this.$menu.removeAttribute("hidden"),this.$menuButton.setAttribute("hidden","")):(this.$menuButton.removeAttribute("hidden"),this.$menuButton.setAttribute("aria-expanded",this.menuIsOpen.toString()),this.menuIsOpen?this.$menu.removeAttribute("hidden"):this.$menu.setAttribute("hidden",""))};ve.prototype.handleMenuButtonClick=function(){this.menuIsOpen=!this.menuIsOpen,this.syncState()};function _e(e,t){if(!(e instanceof HTMLElement))return this;this.$module=e;var n={disableAutoFocus:!1};this.config=re(n,t||{},oe(e.dataset))}_e.prototype.init=function(){this.$module&&this.setFocus()};_e.prototype.setFocus=function(){var e=this.$module;this.config.disableAutoFocus||e.getAttribute("role")==="alert"&&(e.getAttribute("tabindex")||(e.setAttribute("tabindex","-1"),e.addEventListener("blur",function(){e.removeAttribute("tabindex")})),e.focus())};function ue(e){if(!(e instanceof HTMLElement))return this;var t=e.querySelectorAll('input[type="radio"]');if(!t.length)return this;this.$module=e,this.$inputs=t}ue.prototype.init=function(){if(!(!this.$module||!this.$inputs)){var e=this.$module,t=this.$inputs;$(t,function(n){var i=n.getAttribute("data-aria-controls");!i||!document.getElementById(i)||(n.setAttribute("aria-controls",i),n.removeAttribute("data-aria-controls"))}),window.addEventListener("onpageshow"in window?"pageshow":"DOMContentLoaded",this.syncAllConditionalReveals.bind(this)),this.syncAllConditionalReveals(),e.addEventListener("click",this.handleClick.bind(this))}};ue.prototype.syncAllConditionalReveals=function(){$(this.$inputs,this.syncConditionalRevealWithInputState.bind(this))};ue.prototype.syncConditionalRevealWithInputState=function(e){var t=e.getAttribute("aria-controls");if(t){var n=document.getElementById(t);if(n&&n.classList.contains("govuk-radios__conditional")){var i=e.checked;e.setAttribute("aria-expanded",i.toString()),n.classList.toggle("govuk-radios__conditional--hidden",!i)}}};ue.prototype.handleClick=function(e){var t=this,n=e.target;if(!(!(n instanceof HTMLInputElement)||n.type!=="radio")){var i=document.querySelectorAll('input[type="radio"][aria-controls]'),r=n.form,l=n.name;$(i,function(a){var o=a.form===r,u=a.name===l;u&&o&&t.syncConditionalRevealWithInputState(a)})}};function se(e){if(!(e instanceof HTMLAnchorElement))return this;this.$module=e,this.$linkedElement=null,this.linkedElementListener=!1}se.prototype.init=function(){if(this.$module){var e=this.getLinkedElement();e&&(this.$linkedElement=e,this.$module.addEventListener("click",this.focusLinkedElement.bind(this)))}};se.prototype.getLinkedElement=function(){var e=this.getFragmentFromUrl();return e?document.getElementById(e):null};se.prototype.focusLinkedElement=function(){var e=this.$linkedElement;e.getAttribute("tabindex")||(e.setAttribute("tabindex","-1"),e.classList.add("govuk-skip-link-focused-element"),this.linkedElementListener||(this.$linkedElement.addEventListener("blur",this.removeFocusProperties.bind(this)),this.linkedElementListener=!0)),e.focus()};se.prototype.removeFocusProperties=function(){this.$linkedElement.removeAttribute("tabindex"),this.$linkedElement.classList.remove("govuk-skip-link-focused-element")};se.prototype.getFragmentFromUrl=function(){if(this.$module.hash)return this.$module.hash.split("#").pop()};(function(e){var t="document"in this&&"nextElementSibling"in document.documentElement;t||Object.defineProperty(Element.prototype,"nextElementSibling",{get:function(){for(var n=this.nextSibling;n&&n.nodeType!==1;)n=n.nextSibling;return n}})}).call(typeof window=="object"&&window||typeof self=="object"&&self||typeof global=="object"&&global||{});(function(e){var t="document"in this&&"previousElementSibling"in document.documentElement;t||Object.defineProperty(Element.prototype,"previousElementSibling",{get:function(){for(var n=this.previousSibling;n&&n.nodeType!==1;)n=n.previousSibling;return n}})}).call(typeof window=="object"&&window||typeof self=="object"&&self||typeof global=="object"&&global||{});function S(e){if(!(e instanceof HTMLElement))return this;var t=e.querySelectorAll("a.govuk-tabs__tab");if(!t.length)return this;this.$module=e,this.$tabs=t,this.keys={left:37,right:39,up:38,down:40},this.jsHiddenClass="govuk-tabs__panel--hidden",this.boundTabClick=this.onTabClick.bind(this),this.boundTabKeydown=this.onTabKeydown.bind(this),this.boundOnHashChange=this.onHashChange.bind(this),this.changingHash=!1}S.prototype.init=function(){!this.$module||!this.$tabs||(typeof window.matchMedia=="function"?this.setupResponsiveChecks():this.setup())};S.prototype.setupResponsiveChecks=function(){this.mql=window.matchMedia("(min-width: 40.0625em)"),this.mql.addListener(this.checkMode.bind(this)),this.checkMode()};S.prototype.checkMode=function(){this.mql.matches?this.setup():this.teardown()};S.prototype.setup=function(){var e=this,t=this.$module,n=this.$tabs,i=t.querySelector(".govuk-tabs__list"),r=t.querySelectorAll(".govuk-tabs__list-item");if(!(!n||!i||!r)){i.setAttribute("role","tablist"),$(r,function(a){a.setAttribute("role","presentation")}),$(n,function(a){e.setAttributes(a),a.addEventListener("click",e.boundTabClick,!0),a.addEventListener("keydown",e.boundTabKeydown,!0),e.hideTab(a)});var l=this.getTab(window.location.hash)||this.$tabs[0];l&&(this.showTab(l),window.addEventListener("hashchange",this.boundOnHashChange,!0))}};S.prototype.teardown=function(){var e=this,t=this.$module,n=this.$tabs,i=t.querySelector(".govuk-tabs__list"),r=t.querySelectorAll("a.govuk-tabs__list-item");!n||!i||!r||(i.removeAttribute("role"),$(r,function(l){l.removeAttribute("role")}),$(n,function(l){l.removeEventListener("click",e.boundTabClick,!0),l.removeEventListener("keydown",e.boundTabKeydown,!0),e.unsetAttributes(l)}),window.removeEventListener("hashchange",this.boundOnHashChange,!0))};S.prototype.onHashChange=function(){var e=window.location.hash,t=this.getTab(e);if(t){if(this.changingHash){this.changingHash=!1;return}var n=this.getCurrentTab();n&&(this.hideTab(n),this.showTab(t),t.focus())}};S.prototype.hideTab=function(e){this.unhighlightTab(e),this.hidePanel(e)};S.prototype.showTab=function(e){this.highlightTab(e),this.showPanel(e)};S.prototype.getTab=function(e){return this.$module.querySelector('a.govuk-tabs__tab[href="'+e+'"]')};S.prototype.setAttributes=function(e){var t=this.getHref(e).slice(1);e.setAttribute("id","tab_"+t),e.setAttribute("role","tab"),e.setAttribute("aria-controls",t),e.setAttribute("aria-selected","false"),e.setAttribute("tabindex","-1");var n=this.getPanel(e);n&&(n.setAttribute("role","tabpanel"),n.setAttribute("aria-labelledby",e.id),n.classList.add(this.jsHiddenClass))};S.prototype.unsetAttributes=function(e){e.removeAttribute("id"),e.removeAttribute("role"),e.removeAttribute("aria-controls"),e.removeAttribute("aria-selected"),e.removeAttribute("tabindex");var t=this.getPanel(e);t&&(t.removeAttribute("role"),t.removeAttribute("aria-labelledby"),t.classList.remove(this.jsHiddenClass))};S.prototype.onTabClick=function(e){var t=this.getCurrentTab(),n=e.currentTarget;!t||!(n instanceof HTMLAnchorElement)||(e.preventDefault(),this.hideTab(t),this.showTab(n),this.createHistoryEntry(n))};S.prototype.createHistoryEntry=function(e){var t=this.getPanel(e);if(t){var n=t.id;t.id="",this.changingHash=!0,window.location.hash=this.getHref(e).slice(1),t.id=n}};S.prototype.onTabKeydown=function(e){switch(e.keyCode){case this.keys.left:case this.keys.up:this.activatePreviousTab(),e.preventDefault();break;case this.keys.right:case this.keys.down:this.activateNextTab(),e.preventDefault();break}};S.prototype.activateNextTab=function(){var e=this.getCurrentTab();if(!(!e||!e.parentElement)){var t=e.parentElement.nextElementSibling;if(t){var n=t.querySelector("a.govuk-tabs__tab");n&&(this.hideTab(e),this.showTab(n),n.focus(),this.createHistoryEntry(n))}}};S.prototype.activatePreviousTab=function(){var e=this.getCurrentTab();if(!(!e||!e.parentElement)){var t=e.parentElement.previousElementSibling;if(t){var n=t.querySelector("a.govuk-tabs__tab");n&&(this.hideTab(e),this.showTab(n),n.focus(),this.createHistoryEntry(n))}}};S.prototype.getPanel=function(e){return this.$module.querySelector(this.getHref(e))};S.prototype.showPanel=function(e){var t=this.getPanel(e);t&&t.classList.remove(this.jsHiddenClass)};S.prototype.hidePanel=function(e){var t=this.getPanel(e);t&&t.classList.add(this.jsHiddenClass)};S.prototype.unhighlightTab=function(e){e.parentElement&&(e.setAttribute("aria-selected","false"),e.parentElement.classList.remove("govuk-tabs__list-item--selected"),e.setAttribute("tabindex","-1"))};S.prototype.highlightTab=function(e){e.parentElement&&(e.setAttribute("aria-selected","true"),e.parentElement.classList.add("govuk-tabs__list-item--selected"),e.setAttribute("tabindex","0"))};S.prototype.getCurrentTab=function(){return this.$module.querySelector(".govuk-tabs__list-item--selected a.govuk-tabs__tab")};S.prototype.getHref=function(e){var t=e.getAttribute("href"),n=t.slice(t.indexOf("#"),t.length);return n};function gt(e){e=typeof e<"u"?e:{};var t=e.scope instanceof HTMLElement?e.scope:document,n=t.querySelectorAll('[data-module="govuk-accordion"]');$(n,function(d){new F(d,e.accordion).init()});var i=t.querySelectorAll('[data-module="govuk-button"]');$(i,function(d){new me(d,e.button).init()});var r=t.querySelectorAll('[data-module="govuk-character-count"]');$(r,function(d){new N(d,e.characterCount).init()});var l=t.querySelectorAll('[data-module="govuk-checkboxes"]');$(l,function(d){new ne(d).init()});var a=t.querySelectorAll('[data-module="govuk-details"]');$(a,function(d){new le(d).init()});var o=t.querySelector('[data-module="govuk-error-summary"]');o&&new ie(o,e.errorSummary).init();var u=t.querySelectorAll('[data-module="govuk-exit-this-page"]');$(u,function(d){new D(d,e.exitThisPage).init()});var s=t.querySelector('[data-module="govuk-header"]');s&&new ve(s).init();var c=t.querySelectorAll('[data-module="govuk-notification-banner"]');$(c,function(d){new _e(d,e.notificationBanner).init()});var p=t.querySelectorAll('[data-module="govuk-radios"]');$(p,function(d){new ue(d).init()});var m=t.querySelector('[data-module="govuk-skip-link"]');m&&new se(m).init();var y=t.querySelectorAll('[data-module="govuk-tabs"]');$(y,function(d){new S(d).init()})}function je(e,t,n){const i=e.slice();return i[17]=t[n],i}function Pe(e){let t,n;return t=new st({props:{label:`${e[17].scheme_reference}: ${e[17].num_features} features`,$$slots:{default:[bt]},$$scope:{ctx:e}}}),{c(){G(t.$$.fragment)},m(i,r){V(t,i,r),n=!0},p(i,r){const l={};r&1&&(l.label=`${i[17].scheme_reference}: ${i[17].num_features} features`),r&1048577&&(l.$$scope={dirty:r,ctx:i}),t.$set(l)},i(i){n||(B(t.$$.fragment,i),n=!0)},o(i){q(t.$$.fragment,i),n=!1},d(i){K(t,i)}}}function bt(e){let t,n,i,r=e[17].authority_or_region+"",l,a,o,u,s=e[17].capital_scheme_id+"",c,p,m,y,d=e[17].funding_programme+"",_,w,v,b,g,h,E,A,T,Z;function R(){return e[12](e[17])}function W(){return e[13](e[17])}return{c(){t=L("ul"),n=L("li"),i=I("Authority or region: "),l=I(r),a=O(),o=L("li"),u=I("Capital scheme ID: "),c=I(s),p=O(),m=L("li"),y=I("Funding programme: "),_=I(d),w=O(),v=L("li"),b=L("button"),b.textContent="Show on map",g=O(),h=L("li"),E=L("button"),E.textContent="Edit scheme",A=O(),Y(b,"type","button"),Y(E,"type","button")},m(H,M){J(H,t,M),f(t,n),f(n,i),f(n,l),f(t,a),f(t,o),f(o,u),f(o,c),f(t,p),f(t,m),f(m,y),f(m,_),f(t,w),f(t,v),f(v,b),f(t,g),f(t,h),f(h,E),J(H,A,M),T||(Z=[ae(b,"click",R),ae(E,"click",W)],T=!0)},p(H,M){e=H,M&1&&r!==(r=e[17].authority_or_region+"")&&z(l,r),M&1&&s!==(s=e[17].capital_scheme_id+"")&&z(c,s),M&1&&d!==(d=e[17].funding_programme+"")&&z(_,d)},d(H){H&&(X(t),X(A)),T=!1,De(Z)}}}function Be(e){let t=e[2].has(e[17].scheme_reference),n,i,r=t&&Pe(e);return{c(){r&&r.c(),n=Je()},m(l,a){r&&r.m(l,a),J(l,n,a),i=!0},p(l,a){a&5&&(t=l[2].has(l[17].scheme_reference)),t?r?(r.p(l,a),a&5&&B(r,1)):(r=Pe(l),r.c(),B(r,1),r.m(n.parentNode,n)):r&&(Ne(),q(r,1,1,()=>{r=null}),qe())},i(l){i||(B(r),i=!0)},o(l){q(r),i=!1},d(l){l&&X(n),r&&r.d(l)}}}function yt(e){let t,n,i,r,l,a,o,u,s,c,p,m,y,d,_,w,v,b,g,h,E,A,T,Z,R=e[2].size+"",W,H,M=e[3].route+"",Q,Ce,ce=e[3].area+"",ge,Se,de=e[3].crossing+"",be,Te,he=e[3].other+"",ye,$e,ke,fe,U,we,Le;a=new Qe({props:{boundaryGeojson:e[4]}}),u=new Ye({props:{label:"Load from GeoJSON",uniqueId:"load_geojson",loadFile:e[6]}});let ee=Oe(e[0]),k=[];for(let C=0;C<ee.length;C+=1)k[C]=Be(je(e,ee,C));const Re=C=>q(k[C],1,1,()=>{k[C]=null});return{c(){t=L("div"),n=L("button"),n.textContent="Home",i=O(),r=L("h1"),l=I(`Browse schemes
      `),G(a.$$.fragment),o=O(),G(u.$$.fragment),s=O(),c=L("br"),p=O(),m=L("br"),y=O(),d=L("div"),_=L("label"),w=I("Filter by any field: "),v=L("br"),b=O(),g=L("input"),h=O(),E=L("button"),E.textContent="Clear",A=O(),T=L("p"),Z=I("Showing "),W=I(R),H=I(" schemes ("),Q=I(M),Ce=I(" routes, "),ge=I(ce),Se=I(` areas,
      `),be=I(de),Te=I(" crossings, "),ye=I(he),$e=I(" other)"),ke=O(),fe=L("ul");for(let C=0;C<k.length;C+=1)k[C].c();Y(n,"type","button"),Y(g,"type","text"),Y(E,"type","button"),Y(t,"slot","sidebar"),Y(t,"class","sidebar")},m(C,x){J(C,t,x),f(t,n),f(t,i),f(t,r),f(r,l),V(a,r,null),f(t,o),V(u,t,null),f(t,s),f(t,c),f(t,p),f(t,m),f(t,y),f(t,d),f(d,_),f(_,w),f(_,v),f(_,b),f(_,g),Ie(g,e[1]),f(d,h),f(d,E),f(t,A),f(t,T),f(T,Z),f(T,W),f(T,H),f(T,Q),f(T,Ce),f(T,ge),f(T,Se),f(T,be),f(T,Te),f(T,ye),f(T,$e),f(t,ke),f(t,fe);for(let te=0;te<k.length;te+=1)k[te]&&k[te].m(fe,null);U=!0,we||(Le=[ae(n,"click",e[9]),ae(g,"input",e[10]),ae(E,"click",e[11])],we=!0)},p(C,x){const te={};if(x&16&&(te.boundaryGeojson=C[4]),a.$set(te),x&2&&g.value!==C[1]&&Ie(g,C[1]),(!U||x&4)&&R!==(R=C[2].size+"")&&z(W,R),(!U||x&8)&&M!==(M=C[3].route+"")&&z(Q,M),(!U||x&8)&&ce!==(ce=C[3].area+"")&&z(ge,ce),(!U||x&8)&&de!==(de=C[3].crossing+"")&&z(be,de),(!U||x&8)&&he!==(he=C[3].other+"")&&z(ye,he),x&389){ee=Oe(C[0]);let P;for(P=0;P<ee.length;P+=1){const Ae=je(C,ee,P);k[P]?(k[P].p(Ae,x),B(k[P],1)):(k[P]=Be(Ae),k[P].c(),B(k[P],1),k[P].m(fe,null))}for(Ne(),P=ee.length;P<k.length;P+=1)Re(P);qe()}},i(C){if(!U){B(a.$$.fragment,C),B(u.$$.fragment,C);for(let x=0;x<ee.length;x+=1)B(k[x]);U=!0}},o(C){q(a.$$.fragment,C),q(u.$$.fragment,C),k=k.filter(Boolean);for(let x=0;x<k.length;x+=1)q(k[x]);U=!1},d(C){C&&X(t),K(a),K(u),ze(k,C),we=!1,De(Le)}}}function wt(e){let t,n,i,r,l,a,o,u;return t=new tt({props:{schema:Fe}}),i=new nt({props:{style:e[5]}}),l=new it({props:{schema:Fe}}),o=new rt({props:{layers:["interventions-points","interventions-lines","interventions-polygons"],contents:Ct}}),{c(){G(t.$$.fragment),n=O(),G(i.$$.fragment),r=O(),G(l.$$.fragment),a=O(),G(o.$$.fragment)},m(s,c){V(t,s,c),J(s,n,c),V(i,s,c),J(s,r,c),V(l,s,c),J(s,a,c),V(o,s,c),u=!0},p:Xe,i(s){u||(B(t.$$.fragment,s),B(i.$$.fragment,s),B(l.$$.fragment,s),B(o.$$.fragment,s),u=!0)},o(s){q(t.$$.fragment,s),q(i.$$.fragment,s),q(l.$$.fragment,s),q(o.$$.fragment,s),u=!1},d(s){s&&(X(n),X(r),X(a)),K(t,s),K(i,s),K(l,s),K(o,s)}}}function Et(e){let t,n,i;return n=new et({props:{style:e[5],$$slots:{default:[wt]},$$scope:{ctx:e}}}),{c(){t=L("div"),G(n.$$.fragment),Y(t,"slot","main")},m(r,l){J(r,t,l),V(n,t,null),i=!0},p(r,l){const a={};l&1048576&&(a.$$scope={dirty:l,ctx:r}),n.$set(a)},i(r){i||(B(n.$$.fragment,r),i=!0)},o(r){q(n.$$.fragment,r),i=!1},d(r){r&&X(t),K(n)}}}function _t(e){let t,n;return t=new Ze({props:{$$slots:{main:[Et],sidebar:[yt]},$$scope:{ctx:e}}}),{c(){G(t.$$.fragment)},m(i,r){V(t,i,r),n=!0},p(i,[r]){const l={};r&1048607&&(l.$$scope={dirty:r,ctx:i}),t.$set(l)},i(i){n||(B(t.$$.fragment,i),n=!0)},o(i){q(t.$$.fragment,i),n=!1},d(i){K(t,i)}}}const Fe="v1";function Ct(e){var t="<table>";for(let[n,i]of Object.entries(e))t+=`<tr><td>${n}</td><td>${i}</td></tr>`;return t+="</table>",t}function St(e,t,n){let i,r;xe(e,pe,h=>n(4,i=h)),xe(e,ot,h=>n(14,r=h)),Ve(()=>{gt()});let a=new URLSearchParams(window.location.search).get("style")||"streets",o=[],u="",s=new Set,c={area:0,route:0,crossing:0,other:0};Ke(()=>{pe.set(null)});function p(h){try{let E=JSON.parse(h);pe.set(E),m(E),r==null||r.fitBounds(Me(E),{padding:20,animate:!1})}catch(E){window.alert(`Couldn't load schemes from a file: ${E}`)}}function m(h){let E={};for(let[A,T]of Object.entries(h.schemes))E[A]={scheme_reference:A,num_features:0,...T};for(let A of h.features)E[A.properties.scheme_reference].num_features++;n(0,o=Object.values(E))}function y(h){let E={type:"FeatureCollection",features:i.features.filter(A=>A.properties.scheme_reference==h.scheme_reference)};r==null||r.fitBounds(Me(E),{padding:20,animate:!1})}function d(h){let E={type:"FeatureCollection",features:i.features.filter(T=>T.properties.scheme_reference==h.scheme_reference)},A=h.authority_or_region;window.localStorage.setItem(A,JSON.stringify(E)),window.open(`scheme.html?authority=${h.authority_or_region}`,"_blank")}const _=()=>window.open("index.html");function w(){u=this.value,n(1,u)}const v=()=>n(1,u=""),b=h=>y(h),g=h=>d(h);return e.$$.update=()=>{if(e.$$.dirty&31){if(s.clear(),u){let h=u.toLowerCase();for(let E of i.features)JSON.stringify(E.properties).toLowerCase().includes(h)&&s.add(E.properties.scheme_reference)}else for(let h of o)s.add(h.scheme_reference);pe.update(h=>{if(!h)return null;for(let E of h.features)s.has(E.properties.scheme_reference)?delete E.properties.hide_while_editing:E.properties.hide_while_editing=!0;return h}),n(3,c={area:0,route:0,crossing:0,other:0});for(let h of i==null?void 0:i.features)s.has(h.properties.scheme_reference)&&n(3,c[h.properties.intervention_type]++,c);n(2,s),n(1,u),n(4,i),n(0,o),n(3,c)}},[o,u,s,c,i,a,p,y,d,_,w,v,b,g]}class Tt extends We{constructor(t){super(),Ue(this,t,St,_t,Ge,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new Tt({target:document.getElementById("app")});
