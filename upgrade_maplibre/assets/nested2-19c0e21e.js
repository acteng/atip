import{S as Q,i as J,s as Y,e as T,h as q,a0 as Se,j as $,X as ne,o as p,aQ as cl,b as U,c as W,d as L,g as h,m as b,w as at,l as V,t as m,n as _,p as v,Y as Vt,Z as Xt,_ as Yt,$ as Qt,a8 as je,K as $e,N as pe,aR as gt,u as y,k as w,D as z,J as Fe,O as Tn,P as $l,q as ke,Q as pl,T as ml,U as it,V as _l,W as gl,aY as Bl,aZ as pt,a5 as Dn,a_ as zl,aP as Hl,as as bt,af as On,ak as Jt,r as Ln,a as dt,F as _n,v as We,aX as K,a$ as he,b0 as we,B as x,ai as ee,C as ye,al as te,b1 as se,G as vt,I as dl,aT as Gt,ac as nn,b2 as on,R as hl,b3 as Ht,E as bl,at as ql,b4 as Gl,b5 as Ul,f as gn,ah as Wl,aV as jn,am as Vl,an as Rn,ao as Bn,ap as xt,aW as zn,L as Xl,M as Yl,y as Ql}from"./index-2a0d7e3c.js";import{d as rt,j as _t,C as De,f as Xe,h as le,l as H,k as Jl,S as Kl,B as Zl,c as Hn,b as wt,G as xl}from"./StreetViewTool-d3e3fb85.js";import{a as Ge,F as eo}from"./Popup-1e456b87.js";import{P as fe}from"./Popup-8f0d4e21.js";import{R as to,C as ft,Z as no}from"./ZoomOutMap-2d54bb5c.js";import{L as ro,a as lo}from"./LineMeasureController-685512d0.js";function oo(l){let e;return{c(){e=T("span"),q(e,"class","svelte-kzgqtg"),Se(e,"background",l[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Se(e,"background",n[0])},i:ne,o:ne,d(n){n&&p(e)}}}function so(l,e,n){let{color:t}=e;return l.$$set=r=>{"color"in r&&n(0,t=r.color)},[t]}class Oe extends Q{constructor(e){super(),J(this,e,so,oo,Y,{color:0})}}const io="/atip/upgrade_maplibre/assets/help-d011708a.svg";function ao(l){let e,n;const t=l[1].default,r=Vt(t,l,l[4],null);return{c(){e=T("div"),r&&r.c(),q(e,"class","govuk-prose")},m(o,s){$(o,e,s),r&&r.m(e,null),n=!0},p(o,s){r&&r.p&&(!n||s&16)&&Xt(r,t,o,o[4],n?Qt(t,o[4],s,null):Yt(o[4]),null)},i(o){n||(m(r,o),n=!0)},o(o){_(r,o),n=!1},d(o){o&&p(e),r&&r.d(o)}}}function fo(l){let e,n,t,r,o,s,u;function i(f){l[3](f)}let a={title:"Help",$$slots:{default:[ao]},$$scope:{ctx:l}};return l[0]!==void 0&&(a.open=l[0]),t=new cl({props:a}),U.push(()=>W(t,"open",i)),{c(){e=T("button"),e.innerHTML=`<img src="${io}" title="Help" alt="Help"/>`,n=L(),h(t.$$.fragment),q(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),b(t,f,c),o=!0,s||(u=at(e,"click",l[2]),s=!0)},p(f,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:f}),!r&&c&1&&(r=!0,g.open=f[0],V(()=>r=!1)),t.$set(g)},i(f){o||(m(t.$$.fragment,f),o=!0)},o(f){_(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),v(t,f),s=!1,u()}}}function uo(l,e,n){let{$$slots:t={},$$scope:r}=e,o=!1;const s=()=>n(0,o=!0);function u(i){o=i,n(0,o)}return l.$$set=i=>{"$$scope"in i&&n(4,r=i.$$scope)},[o,t,s,u,r]}class me extends Q{constructor(e){super(),J(this,e,uo,fo,Y,{})}}function qn(l,e,n){const t=l.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function Gn(l){let e,n,t,r=l[1]+"",o,s,u;return n=new Oe({props:{color:l[2]}}),{c(){e=T("li"),h(n.$$.fragment),t=L(),o=y(r),s=L()},m(i,a){$(i,e,a),b(n,e,null),w(e,t),w(e,o),w(e,s),u=!0},p(i,a){const f={};a&1&&(f.color=i[2]),n.$set(f),(!u||a&1)&&r!==(r=i[1]+"")&&z(o,r)},i(i){u||(m(n.$$.fragment,i),u=!0)},o(i){_(n.$$.fragment,i),u=!1},d(i){i&&p(e),v(n)}}}function co(l){let e,n,t=je(l[0]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Gn(qn(l,t,s));const o=s=>_(r[s],1,1,()=>{r[s]=null});return{c(){e=T("ul");for(let s=0;s<r.length;s+=1)r[s].c()},m(s,u){$(s,e,u);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);n=!0},p(s,[u]){if(u&1){t=je(s[0]);let i;for(i=0;i<t.length;i+=1){const a=qn(s,t,i);r[i]?(r[i].p(a,u),m(r[i],1)):(r[i]=Gn(a),r[i].c(),m(r[i],1),r[i].m(e,null))}for($e(),i=t.length;i<r.length;i+=1)o(i);pe()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)m(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)_(r[u]);n=!1},d(s){s&&p(e),gt(r,s)}}}function $o(l,e,n){let{rows:t}=e;return l.$$set=r=>{"rows"in r&&n(0,t=r.rows)},[t]}class An extends Q{constructor(e){super(),J(this,e,$o,co,Y,{rows:0})}}function Un(l){let e=l[0],n,t,r=Wn(l);return{c(){r.c(),n=Fe()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&Y(e,e=o[0])?($e(),_(r,1,1,ne),pe(),r=Wn(o),r.c(),m(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(m(r),t=!0)},o(o){_(r),t=!1},d(o){o&&p(n),r.d(o)}}}function Wn(l){let e;const n=l[10].default,t=Vt(n,l,l[9],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&512)&&Xt(t,n,r,r[9],e?Qt(n,r[9],o,null):Yt(r[9]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function po(l){let e,n,t=l[0]&&Un(l);return{c(){t&&t.c(),e=Fe()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&m(t,1)):(t=Un(r),t.c(),m(t,1),t.m(e.parentNode,e)):t&&($e(),_(t,1,1,()=>{t=null}),pe())},i(r){n||(m(t),n=!0)},o(r){_(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function mo(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Tn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=$l();ke(l,f,k=>n(8,r=k)),ke(l,c,k=>n(0,t=k));let g,d=!0;return pl(()=>{t&&g&&r&&(ml(f,t,g),it(c,t=null,t),n(6,g=void 0))}),l.$$set=k=>{"id"in k&&n(3,u=k.id),"tiles"in k&&n(4,i=k.tiles),"tileSize"in k&&n(5,a=k.tileSize),"$$scope"in k&&n(9,s=k.$$scope)},l.$$.update=()=>{l.$$.dirty&377&&r&&t!==u&&(it(c,t=u,t),_l(r,t,gl({type:"raster",tiles:i,tileSize:a}),k=>r&&k===t,()=>{t&&(n(6,g=r==null?void 0:r.getSource(t)),n(7,d=!0))})),l.$$.dirty&264&&(r==null||r.on("style.load",()=>{n(6,g=r==null?void 0:r.getSource(u))})),l.$$.dirty&208&&g&&(d?n(7,d=!1):g.setTiles(i))},[t,f,c,u,i,a,g,d,r,s,o]}class _o extends Q{constructor(e){super(),J(this,e,mo,po,Y,{id:3,tiles:4,tileSize:5})}}function go(l){let e;const n=l[16].default,t=Vt(n,l,l[24],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&16777216)&&Xt(t,n,r,r[24],e?Qt(n,r[24],o,null):Yt(r[24]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function ho(l){let e,n,t;function r(s){l[17](s)}let o={id:l[1],type:"symbol",source:l[2],sourceLayer:l[3],beforeId:l[4],beforeLayerType:l[5],paint:l[6],layout:l[7],filter:l[8],applyToClusters:l[9],minzoom:l[10],maxzoom:l[11],hoverCursor:l[12],manageHoverState:l[13],eventsIfTopMost:l[14],interactive:l[15],$$slots:{default:[go]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.hovered=l[0]),e=new Bl({props:o}),U.push(()=>W(e,"hovered",r)),e.$on("click",l[18]),e.$on("dblclick",l[19]),e.$on("contextmenu",l[20]),e.$on("mouseenter",l[21]),e.$on("mousemove",l[22]),e.$on("mouseleave",l[23]),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,[u]){const i={};u&2&&(i.id=s[1]),u&4&&(i.source=s[2]),u&8&&(i.sourceLayer=s[3]),u&16&&(i.beforeId=s[4]),u&32&&(i.beforeLayerType=s[5]),u&64&&(i.paint=s[6]),u&128&&(i.layout=s[7]),u&256&&(i.filter=s[8]),u&512&&(i.applyToClusters=s[9]),u&1024&&(i.minzoom=s[10]),u&2048&&(i.maxzoom=s[11]),u&4096&&(i.hoverCursor=s[12]),u&8192&&(i.manageHoverState=s[13]),u&16384&&(i.eventsIfTopMost=s[14]),u&32768&&(i.interactive=s[15]),u&16777216&&(i.$$scope={dirty:u,ctx:s}),!n&&u&1&&(n=!0,i.hovered=s[0],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function bo(l,e,n){let{$$slots:t={},$$scope:r}=e,{id:o=Tn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:g=void 0}=e,{applyToClusters:d=void 0}=e,{minzoom:k=void 0}=e,{maxzoom:O=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:P=!1}=e,{hovered:D=null}=e,{eventsIfTopMost:I=!1}=e,{interactive:N=!0}=e;function A(j){D=j,n(0,D)}function M(j){pt.call(this,l,j)}function E(j){pt.call(this,l,j)}function S(j){pt.call(this,l,j)}function F(j){pt.call(this,l,j)}function G(j){pt.call(this,l,j)}function R(j){pt.call(this,l,j)}return l.$$set=j=>{"id"in j&&n(1,o=j.id),"source"in j&&n(2,s=j.source),"sourceLayer"in j&&n(3,u=j.sourceLayer),"beforeId"in j&&n(4,i=j.beforeId),"beforeLayerType"in j&&n(5,a=j.beforeLayerType),"paint"in j&&n(6,f=j.paint),"layout"in j&&n(7,c=j.layout),"filter"in j&&n(8,g=j.filter),"applyToClusters"in j&&n(9,d=j.applyToClusters),"minzoom"in j&&n(10,k=j.minzoom),"maxzoom"in j&&n(11,O=j.maxzoom),"hoverCursor"in j&&n(12,C=j.hoverCursor),"manageHoverState"in j&&n(13,P=j.manageHoverState),"hovered"in j&&n(0,D=j.hovered),"eventsIfTopMost"in j&&n(14,I=j.eventsIfTopMost),"interactive"in j&&n(15,N=j.interactive),"$$scope"in j&&n(24,r=j.$$scope)},[D,o,s,u,i,a,f,c,g,d,k,O,C,P,I,N,t,A,M,E,S,F,G,R,r]}class sn extends Q{constructor(e){super(),J(this,e,bo,ho,Y,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Vn(l){let e=l[0],n,t,r=Xn(l);return{c(){r.c(),n=Fe()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&Y(e,e=o[0])?($e(),_(r,1,1,ne),pe(),r=Xn(o),r.c(),m(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(m(r),t=!0)},o(o){_(r),t=!1},d(o){o&&p(n),r.d(o)}}}function Xn(l){let e;const n=l[9].default,t=Vt(n,l,l[8],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&256)&&Xt(t,n,r,r[8],e?Qt(n,r[8],o,null):Yt(r[8]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function vo(l){let e,n,t=l[0]&&Vn(l);return{c(){t&&t.c(),e=Fe()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&m(t,1)):(t=Vn(r),t.c(),m(t,1),t.m(e.parentNode,e)):t&&($e(),_(t,1,1,()=>{t=null}),pe())},i(r){n||(m(t),n=!0)},o(r){_(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function wo(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Tn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(i&&i.includes("pmtiles://")&&!Dn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let k=new zl;Dn.addProtocol("pmtiles",k.tile)}const{map:c,self:g}=$l();ke(l,c,k=>n(7,r=k)),ke(l,g,k=>n(0,t=k));let d;return pl(()=>{t&&r&&(ml(c,t,d),it(g,t=null,t),d=void 0)}),l.$$set=k=>{"id"in k&&n(3,u=k.id),"url"in k&&n(4,i=k.url),"tiles"in k&&n(5,a=k.tiles),"promoteId"in k&&n(6,f=k.promoteId),"$$scope"in k&&n(8,s=k.$$scope)},l.$$.update=()=>{l.$$.dirty&249&&r&&t!==u&&(it(g,t=u,t),_l(r,t,gl({type:"vector",url:i,tiles:a,promoteId:f}),k=>r&&k===t,()=>{t&&(d=r==null?void 0:r.getSource(t))})),l.$$.dirty&136&&(r==null||r.on("style.load",()=>{d=r==null?void 0:r.getSource(u)}))},[t,c,g,u,i,a,f,r,s,o]}class ve extends Q{constructor(e){super(),J(this,e,wo,vo,Y,{id:3,url:4,tiles:5,promoteId:6})}}const ko={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Pe=Uint8Array,ct=Uint16Array,vl=Uint32Array,wl=new Pe([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),kl=new Pe([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),yo=new Pe([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),yl=function(l,e){for(var n=new ct(31),t=0;t<31;++t)n[t]=e+=1<<l[t-1];for(var r=new vl(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)r[o]=o-n[t]<<5|t;return[n,r]},Sl=yl(wl,2),Cl=Sl[0],So=Sl[1];Cl[28]=258,So[258]=28;var Co=yl(kl,0),To=Co[0],dn=new ct(32768);for(var de=0;de<32768;++de){var lt=(de&43690)>>>1|(de&21845)<<1;lt=(lt&52428)>>>2|(lt&13107)<<2,lt=(lt&61680)>>>4|(lt&3855)<<4,dn[de]=((lt&65280)>>>8|(lt&255)<<8)>>>1}var qt=function(l,e,n){for(var t=l.length,r=0,o=new ct(e);r<t;++r)l[r]&&++o[l[r]-1];var s=new ct(e);for(r=0;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var u;if(n){u=new ct(1<<e);var i=15-e;for(r=0;r<t;++r)if(l[r])for(var a=r<<4|l[r],f=e-l[r],c=s[l[r]-1]++<<f,g=c|(1<<f)-1;c<=g;++c)u[dn[c]>>>i]=a}else for(u=new ct(t),r=0;r<t;++r)l[r]&&(u[r]=dn[s[l[r]-1]++]>>>15-l[r]);return u},Kt=new Pe(288);for(var de=0;de<144;++de)Kt[de]=8;for(var de=144;de<256;++de)Kt[de]=9;for(var de=256;de<280;++de)Kt[de]=7;for(var de=280;de<288;++de)Kt[de]=8;var Tl=new Pe(32);for(var de=0;de<32;++de)Tl[de]=5;var Oo=qt(Kt,9,1),Lo=qt(Tl,5,1),an=function(l){for(var e=l[0],n=1;n<l.length;++n)l[n]>e&&(e=l[n]);return e},ze=function(l,e,n){var t=e/8|0;return(l[t]|l[t+1]<<8)>>(e&7)&n},fn=function(l,e){var n=e/8|0;return(l[n]|l[n+1]<<8|l[n+2]<<16)>>(e&7)},Ao=function(l){return(l+7)/8|0},In=function(l,e,n){(e==null||e<0)&&(e=0),(n==null||n>l.length)&&(n=l.length);var t=new(l.BYTES_PER_ELEMENT==2?ct:l.BYTES_PER_ELEMENT==4?vl:Pe)(n-e);return t.set(l.subarray(e,n)),t},Io=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],He=function(l,e,n){var t=new Error(e||Io[l]);if(t.code=l,Error.captureStackTrace&&Error.captureStackTrace(t,He),!n)throw t;return t},Po=function(l,e,n){var t=l.length;if(!t||n&&n.f&&!n.l)return e||new Pe(0);var r=!e||n,o=!n||n.i;n||(n={}),e||(e=new Pe(t*3));var s=function(Ee){var Ce=e.length;if(Ee>Ce){var Qe=new Pe(Math.max(Ce*2,Ee));Qe.set(e),e=Qe}},u=n.f||0,i=n.p||0,a=n.b||0,f=n.l,c=n.d,g=n.m,d=n.n,k=t*8;do{if(!f){u=ze(l,i,1);var O=ze(l,i+1,3);if(i+=3,O)if(O==1)f=Oo,c=Lo,g=9,d=5;else if(O==2){var I=ze(l,i,31)+257,N=ze(l,i+10,15)+4,A=I+ze(l,i+5,31)+1;i+=14;for(var M=new Pe(A),E=new Pe(19),S=0;S<N;++S)E[yo[S]]=ze(l,i+S*3,7);i+=N*3;for(var F=an(E),G=(1<<F)-1,R=qt(E,F,1),S=0;S<A;){var j=R[ze(l,i,G)];i+=j&15;var C=j>>>4;if(C<16)M[S++]=C;else{var B=0,X=0;for(C==16?(X=3+ze(l,i,3),i+=2,B=M[S-1]):C==17?(X=3+ze(l,i,7),i+=3):C==18&&(X=11+ze(l,i,127),i+=7);X--;)M[S++]=B}}var re=M.subarray(0,I),oe=M.subarray(I);g=an(re),d=an(oe),f=qt(re,g,1),c=qt(oe,d,1)}else He(1);else{var C=Ao(i)+4,P=l[C-4]|l[C-3]<<8,D=C+P;if(D>t){o&&He(0);break}r&&s(a+P),e.set(l.subarray(C,D),a),n.b=a+=P,n.p=i=D*8,n.f=u;continue}if(i>k){o&&He(0);break}}r&&s(a+131072);for(var ce=(1<<g)-1,Ie=(1<<d)-1,Te=i;;Te=i){var B=f[fn(l,i)&ce],ae=B>>>4;if(i+=B&15,i>k){o&&He(0);break}if(B||He(2),ae<256)e[a++]=ae;else if(ae==256){Te=i,f=null;break}else{var Le=ae-254;if(ae>264){var S=ae-257,ue=wl[S];Le=ze(l,i,(1<<ue)-1)+Cl[S],i+=ue}var _e=c[fn(l,i)&Ie],ge=_e>>>4;_e||He(3),i+=_e&15;var oe=To[ge];if(ge>3){var ue=kl[ge];oe+=fn(l,i)&(1<<ue)-1,i+=ue}if(i>k){o&&He(0);break}r&&s(a+131072);for(var Be=a+Le;a<Be;a+=4)e[a]=e[a-oe],e[a+1]=e[a+1-oe],e[a+2]=e[a+2-oe],e[a+3]=e[a+3-oe];a=Be}}n.l=f,n.p=Te,n.b=a,n.f=u,f&&(u=1,n.m=g,n.d=c,n.n=d)}while(!u);return a==e.length?e:In(e,0,a)},Mo=new Pe(0),Ue=function(l,e){return l[e]|l[e+1]<<8},qe=function(l,e){return(l[e]|l[e+1]<<8|l[e+2]<<16|l[e+3]<<24)>>>0},un=function(l,e){return qe(l,e)+qe(l,e+4)*4294967296};function No(l,e){return Po(l,e)}var hn=typeof TextDecoder<"u"&&new TextDecoder,Fo=0;try{hn.decode(Mo,{stream:!0}),Fo=1}catch{}var Eo=function(l){for(var e="",n=0;;){var t=l[n++],r=(t>127)+(t>223)+(t>239);if(n+r>l.length)return[e,In(l,n-1)];r?r==3?(t=((t&15)<<18|(l[n++]&63)<<12|(l[n++]&63)<<6|l[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):r&1?e+=String.fromCharCode((t&31)<<6|l[n++]&63):e+=String.fromCharCode((t&15)<<12|(l[n++]&63)<<6|l[n++]&63):e+=String.fromCharCode(t)}};function Ol(l,e){if(e){for(var n="",t=0;t<l.length;t+=16384)n+=String.fromCharCode.apply(null,l.subarray(t,t+16384));return n}else{if(hn)return hn.decode(l);var r=Eo(l),o=r[0],s=r[1];return s.length&&He(8),o}}var Do=function(l,e){return e+30+Ue(l,e+26)+Ue(l,e+28)},jo=function(l,e,n){var t=Ue(l,e+28),r=Ol(l.subarray(e+46,e+46+t),!(Ue(l,e+8)&2048)),o=e+46+t,s=qe(l,e+20),u=n&&s==4294967295?Ro(l,o):[s,qe(l,e+24),qe(l,e+42)],i=u[0],a=u[1],f=u[2];return[Ue(l,e+10),i,a,r,o+Ue(l,e+30)+Ue(l,e+32),f]},Ro=function(l,e){for(;Ue(l,e)!=1;e+=4+Ue(l,e+2));return[un(l,e+12),un(l,e+4),un(l,e+20)]};function Bo(l,e){for(var n={},t=l.length-22;qe(l,t)!=101010256;--t)(!t||l.length-t>65558)&&He(13);var r=Ue(l,t+8);if(!r)return{};var o=qe(l,t+16),s=o==4294967295||r==65535;if(s){var u=qe(l,t-12);s=qe(l,u)==101075792,s&&(r=qe(l,u+32),o=qe(l,u+48))}for(var i=e&&e.filter,a=0;a<r;++a){var f=jo(l,o,s),c=f[0],g=f[1],d=f[2],k=f[3],O=f[4],C=f[5],P=Do(l,C);o=O,(!i||i({name:k,size:g,originalSize:d,compression:c}))&&(c?c==8?n[k]=No(l.subarray(P,P+g),new Pe(d)):He(14,"unknown compression type "+c):n[k]=In(l,P,P+g))}return n}function zo(l){return l instanceof File||l instanceof Blob?l.arrayBuffer().then(cn):cn(l)}function cn(l){var e=new Uint8Array(l),n=Bo(e);return Promise.resolve(Ho(n))}function Ho(l){for(var e=[],n=0,t=Object.keys(l);n<t.length;n++){var r=t[n];e[r]=Ol(l[r])}return e}function Ve(l,e){for(var n=0;n<l.childNodes.length;){var t=l.childNodes[n];if(t.nodeType===1&&$t(t)===e)return t;n++}}function Zt(l,e){for(var n=[],t=0;t<l.childNodes.length;){var r=l.childNodes[t];r.nodeType===1&&$t(r)===e&&n.push(r),t++}return n}function rn(l,e,n){for(var t=0;t<l.childNodes.length;){var r=l.childNodes[t];e?r.nodeType===1&&$t(r)===e&&n(r,t):n(r,t),t++}}function qo(l,e,n){var t=[];return rn(l,e,function(r,o){t.push(n(r,o))}),t}var Go=/.+\:/;function $t(l){return l.tagName.replace(Go,"")}function Ll(l){if(l.nodeType!==1)return l.textContent;for(var e="<"+$t(l),n=0;n<l.attributes.length;)e+=" "+l.attributes[n].name+'="'+l.attributes[n].value+'"',n++;e+=">";for(var t=0;t<l.childNodes.length;)e+=Ll(l.childNodes[t]),t++;return e+="</"+$t(l)+">",e}function Uo(l){var e=l.documentElement,n=Ve(e,"sheetData"),t=[];return rn(n,"row",function(r){rn(r,"c",function(o){t.push(o)})}),t}function Wo(l,e){return Ve(e,"v")}function Vo(l,e){if(e.firstChild&&$t(e.firstChild)==="is"&&e.firstChild.firstChild&&$t(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Xo(l){var e=l.documentElement,n=Ve(e,"dimension");if(n)return n.getAttribute("ref")}function Yo(l){var e=l.documentElement,n=Ve(e,"cellStyleXfs");return n?Zt(n,"xf"):[]}function Qo(l){var e=l.documentElement,n=Ve(e,"cellXfs");return n?Zt(n,"xf"):[]}function Jo(l){var e=l.documentElement,n=Ve(e,"numFmts");return n?Zt(n,"numFmt"):[]}function Ko(l){var e=l.documentElement;return qo(e,"si",function(n){var t=Ve(n,"t");if(t)return t.textContent;var r="";return rn(n,"r",function(o){r+=Ve(o,"t").textContent}),r})}function Zo(l){var e=l.documentElement;return Ve(e,"workbookPr")}function xo(l){var e=l.documentElement;return Zt(e,"Relationship")}function es(l){var e=l.documentElement,n=Ve(e,"sheets");return Zt(n,"sheet")}function ts(l,e){var n=e.createDocument(l),t={},r=Zo(n);r&&r.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return es(n).forEach(o),t}function ns(l,e){var n=e.createDocument(l),t={sheets:{},sharedStrings:void 0,styles:void 0},r=function(s){var u=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=$n(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=$n(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=$n(u);break}};return xo(n).forEach(r),t}function $n(l){return l[0]==="/"?l.slice(1):"xl/"+l}function Yn(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function Qn(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Yn(Object(n),!0).forEach(function(t){rs(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):Yn(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function rs(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function ls(l,e){if(!l)return{};var n=e.createDocument(l),t=Yo(n).map(pn),r=Jo(n).map(os).reduce(function(s,u){return s[u.id]=u,s},[]),o=function(u){return u.hasAttribute("xfId")?Qn(Qn({},t[u.xfId]),pn(u,r)):pn(u,r)};return Qo(n).map(o)}function os(l){return{id:l.getAttribute("numFmtId"),template:l.getAttribute("formatCode")}}function pn(l,e){var n={};if(l.hasAttribute("numFmtId")){var t=l.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function ss(l,e){return l?Ko(e.createDocument(l)):[]}function Al(l,e){e&&e.epoch1904&&(l+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((l-n)*24*t))}function is(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=as(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function as(l,e){if(l){if(typeof l=="string")return Jn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jn(l,e)}}function Jn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function fs(l,e,n){if(l){var t=e[l];if(!t)throw new Error("Cell style not found: ".concat(l));if(!t.numberFormat)return!1;if(us.indexOf(Number(t.numberFormat.id))>=0||n.dateFormat&&t.numberFormat.template===n.dateFormat||n.smartDateParser!==!1&&t.numberFormat.template&&ps(t.numberFormat.template))return!0}}var us=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],cs=/^\[\$-414\]/,$s=/;@$/;function ps(l){l=l.toLowerCase(),l=l.replace(cs,""),l=l.replace($s,"");for(var e=l.split(/\W+/),n=is(e),t;!(t=n()).done;){var r=t.value;if(ms.indexOf(r)<0)return!1}return!0}var ms=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function _s(l,e,n){var t=n.getInlineStringValue,r=n.getInlineStringXml,o=n.getStyleId,s=n.styles,u=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":l=mn(l,a);break;case"inlineStr":if(l=t(),l===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(r()));l=mn(l,a);break;case"s":var f=Number(l);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(l));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(l));l=u[f],l=mn(l,a);break;case"b":if(l==="1")l=!0;else if(l==="0")l=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(l));break;case"z":l=void 0;break;case"e":l=gs(l);break;case"d":if(l===void 0)break;var c=new Date(l);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(l));l=c;break;case"n":if(l===void 0)break;var g=fs(o(),s,a);g?(l=Kn(l),l=Al(l,i)):l=(a.parseNumber||Kn)(l);break;default:throw new TypeError("Cell type not supported: ".concat(e))}return l===void 0&&(l=null),l}function gs(l){switch(l){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(l)}}function mn(l,e){return e.trim!==!1&&(l=l.trim()),l===""&&(l=void 0),l}function Kn(l){var e=Number(l);if(isNaN(e))throw new Error('Invalid "numeric" cell value: '.concat(l));return e}var ds=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function hs(l){var e=function(a,f){return a-f},n=l.map(function(i){return i.row}).sort(e),t=l.map(function(i){return i.column}).sort(e),r=n[0],o=n[n.length-1],s=t[0],u=t[t.length-1];return[{row:r,column:s},{row:o,column:u}]}function bs(l){for(var e=0,n=0;n<l.length;)e*=26,e+=ds.indexOf(l[n]),n++;return e}function Il(l){return l=l.split(/(\d+)/),[parseInt(l[1]),bs(l[0].trim())]}function vs(l,e,n,t,r,o,s){var u=Il(l.getAttribute("r")),i=Wo(e,l),a=i&&i.textContent,f;return l.hasAttribute("t")&&(f=l.getAttribute("t")),{row:u[0],column:u[1],value:_s(a,f,{getInlineStringValue:function(){return Vo(e,l)},getInlineStringXml:function(){return Ll(l)},getStyleId:function(){return l.getAttribute("s")},styles:r,values:t,properties:o,options:s})}}function ws(l,e,n,t,r,o){var s=Uo(l);return s.length===0?[]:s.map(function(u){return vs(u,l,e,n,t,r,o)})}function ks(l,e){return Ts(l)||Cs(l,e)||Ss(l,e)||ys()}function ys(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ss(l,e){if(l){if(typeof l=="string")return Zn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zn(l,e)}}function Zn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Cs(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Ts(l){if(Array.isArray(l))return l}function Os(l){var e=Xo(l);if(e)return e=e.split(":").map(Il).map(function(n){var t=ks(n,2),r=t[0],o=t[1];return{row:r,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Ls(l,e,n,t,r,o){var s=e.createDocument(l),u=ws(s,e,n,t,r,o),i=Os(s)||hs(u);return{cells:u,dimensions:i}}function As(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Is(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Is(l,e){if(l){if(typeof l=="string")return xn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xn(l,e)}}function xn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Ps(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,r=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=l.length-1;s>=0;){for(var u=!0,i=As(l[s]),a;!(a=i()).done;){var f=a.value;if(r(f)!==null){u=!1;break}}if(u)l.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return l}function Ms(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Ns(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ns(l,e){if(l){if(typeof l=="string")return er(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return er(l,e)}}function er(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Fs(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,r=e.onlyTrimAtTheEnd,o=l[0].length-1;o>=0;){for(var s=!0,u=Ms(l),i;!(i=u()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var f=0;f<l.length;)l[f].splice(o,1),f++;else if(r)break;o--}return l}function Es(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Pl(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ds(l,e){return Bs(l)||Rs(l,e)||Pl(l,e)||js()}function js(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pl(l,e){if(l){if(typeof l=="string")return tr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tr(l,e)}}function tr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Rs(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Bs(l){if(Array.isArray(l))return l}function zs(l,e){var n=l.dimensions,t=l.cells;if(t.length===0)return[];var r=Ds(n,2);r[0];for(var o=r[1],s=o.column,u=o.row,i=new Array(u),a=0;a<u;){i[a]=new Array(s);for(var f=0;f<s;)i[a][f]=null,f++;a++}for(var c=Es(t),g;!(g=c()).done;){var d=g.value,k=d.row-1,O=d.column-1;O<s&&k<u&&(i[k][O]=d.value)}var C=e.rowMap;if(C)for(var P=0;P<i.length;)C[P]=P,P++;return i=Ps(Fs(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:C}),e.transformData&&(i=e.transformData(i)),i}function Hs(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=qs(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qs(l,e){if(l){if(typeof l=="string")return nr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nr(l,e)}}function nr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function rr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function Gs(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rr(Object(n),!0).forEach(function(t){Us(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function Us(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function Ws(l,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Gs({sheet:1},n));var t=function(g){if(!l[g])throw new Error('"'.concat(g,'" file not found inside the *.xlsx file zip archive'));return l[g]},r=ns(t("xl/_rels/workbook.xml.rels"),e),o=r.sharedStrings?ss(t(r.sharedStrings),e):[],s=r.styles?ls(t(r.styles),e):{},u=ts(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var g=c.name;return{name:g}});var i=Vs(n.sheet,u.sheets);if(!i||!r.sheets[i])throw Xs(n.sheet,u.sheets);var a=Ls(t(r.sheets[i]),e,o,s,u,n),f=zs(a,n);return n.properties?{data:f,properties:u}:f}function Vs(l,e){if(typeof l=="number"){var n=e[l-1];return n&&n.relationId}for(var t=Hs(e),r;!(r=t()).done;){var o=r.value;if(o.name===l)return o.relationId}}function Xs(l,e){var n=e&&e.map(function(t,r){return'"'.concat(t.name,'" (#').concat(r+1,")")}).join(", ");return new Error("Sheet ".concat(typeof l=="number"?"#"+l:'"'+l+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function bn(l){"@babel/helpers - typeof";return bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bn(l)}function lr(l,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function Ys(l,e,n){return e&&lr(l.prototype,e),n&&lr(l,n),Object.defineProperty(l,"prototype",{writable:!1}),l}function Qs(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function")}function Js(l,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(e&&e.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),e&&Ut(l,e)}function Ks(l){var e=Ml();return function(){var t=Wt(l),r;if(e){var o=Wt(this).constructor;r=Reflect.construct(t,arguments,o)}else r=t.apply(this,arguments);return Zs(this,r)}}function Zs(l,e){if(e&&(bn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xs(l)}function xs(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function vn(l){var e=typeof Map=="function"?new Map:void 0;return vn=function(t){if(t===null||!ei(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return tn(t,arguments,Wt(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Ut(r,t)},vn(l)}function tn(l,e,n){return Ml()?tn=Reflect.construct:tn=function(r,o,s){var u=[null];u.push.apply(u,o);var i=Function.bind.apply(r,u),a=new i;return s&&Ut(a,s.prototype),a},tn.apply(null,arguments)}function Ml(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ei(l){return Function.toString.call(l).indexOf("[native code]")!==-1}function Ut(l,e){return Ut=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t},Ut(l,e)}function Wt(l){return Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Wt(l)}var Me=function(l){Js(n,l);var e=Ks(n);function n(t){var r;return Qs(this,n),r=e.call(this,"invalid"),r.reason=t,r}return Ys(n)}(vn(Error));function ti(l){if(typeof l=="string"){var e=l;if(l=Number(l),String(l)!==e)throw new Me("not_a_number")}if(typeof l!="number")throw new Me("not_a_number");if(isNaN(l))throw new Me("invalid_number");if(!isFinite(l))throw new Me("out_of_bounds");return l}function ni(l){if(typeof l=="string")return l;if(typeof l=="number"){if(isNaN(l))throw new Me("invalid_number");if(!isFinite(l))throw new Me("out_of_bounds");return String(l)}throw new Me("not_a_string")}function ri(l){if(typeof l=="boolean")return l;throw new Me("not_a_boolean")}function li(l,e){var n=e.properties;if(l instanceof Date){if(isNaN(l.valueOf()))throw new Me("out_of_bounds");return l}if(typeof l=="number"){if(isNaN(l))throw new Me("invalid_number");if(!isFinite(l))throw new Me("out_of_bounds");var t=Al(l,n);if(isNaN(t.valueOf()))throw new Me("out_of_bounds");return t}throw new Me("not_a_date")}function oi(l,e){return ai(l)||ii(l,e)||Nl(l,e)||si()}function si(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ii(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function ai(l){if(Array.isArray(l))return l}function wn(l){"@babel/helpers - typeof";return wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wn(l)}function fi(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Nl(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nl(l,e){if(l){if(typeof l=="string")return or(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return or(l,e)}}function or(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function sr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function ir(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sr(Object(n),!0).forEach(function(t){ui(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function ui(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}var ar={isColumnOriented:!1};function ci(l,e,n){n?n=ir(ir({},ar),n):n=ar;var t=n,r=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;_i(e),r&&(l=mi(l));for(var u=l[0],i=[],a=[],f=1;f<l.length;f++){var c=Fl(e,l[f],f,u,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var g=fi(a),d;!(d=g()).done;){var k=d.value;k.row=o[k.row-1]+1}return{rows:i,errors:a}}function Fl(l,e,n,t,r,o){for(var s={},u=!0,i=function(D){var I=D.column,N=D.value,A=D.error,M=D.reason,E={error:A,row:n+1,column:I,value:N};return M&&(E.reason=M),l[I].type&&(E.type=l[I].type),E},a=[],f=function(){var D=g[c],I=l[D],N=wn(I.type)==="object"&&!Array.isArray(I.type),A=e[t.indexOf(D)];A===void 0&&(A=null);var M=void 0,E=void 0,S=void 0;if(N)M=Fl(I.type,e,n,t,r,o);else if(A===null)M=null;else if(Array.isArray(I.type)){var F=!1,G=pi(A).map(function(j){var B=fr(j,I,o);return B.error&&(M=j,E=B.error,S=B.reason),B.value!==null&&(F=!0),B.value});E||(M=F?G:null)}else{var R=fr(A,I,o);E=R.error,S=R.reason,M=E?A:R.value}!E&&M===null&&(typeof I.required=="function"?a.push({column:D}):I.required===!0&&(E="required")),E?r.push(i({column:D,value:M,error:E,reason:S})):(u&&M!==null&&(u=!1),(M!==null||o.includeNullValues)&&(s[I.prop]=M))},c=0,g=Object.keys(l);c<g.length;c++)f();if(u)return null;for(var d=0,k=a;d<k.length;d++){var O=k[d].column,C=l[O].required(s);C&&r.push(i({column:O,value:null,error:"required"}))}return s}function fr(l,e,n){if(l===null)return{value:null};var t;if(e.parse?t=mt(l,e.parse):e.type?t=$i(l,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:l},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(r){return{error:r.message}}}return t}function mt(l,e){try{return l=e(l),l===void 0?{value:null}:{value:l}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function $i(l,e,n){switch(e){case String:return mt(l,ni);case Number:return mt(l,ti);case Date:return mt(l,function(t){return li(t,{properties:n.properties})});case Boolean:return mt(l,ri);default:if(typeof e=="function")return mt(l,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function El(l,e,n){for(var t=0,r="";n+t<l.length;){var o=l[n+t];if(o===e)return[r,t];if(o==='"'){var s=El(l,'"',n+t+1);r+=s[0],t+=1+s[1]+1}else r+=o,t++}return[r,t]}function pi(l){for(var e=[],n=0;n<l.length;){var t=El(l,",",n),r=oi(t,2),o=r[0],s=r[1];n+=s+1,e.push(o.trim())}return e}var mi=function(e){return e[0].map(function(n,t){return e.map(function(r){return r[t]})})};function _i(l){for(var e=0,n=Object.keys(l);e<n.length;e++){var t=n[e],r=l[t];if(!r.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function kn(l){"@babel/helpers - typeof";return kn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kn(l)}function Dl(l){for(var e={},n=0,t=Object.keys(l);n<t.length;n++){var r=t[n],o=l[r],s=void 0;kn(o)==="object"&&(o=Object.keys(l[r])[0],s=Dl(l[r][o])),e[r]={prop:o},s&&(e[r].type=s)}return e}var gi=["schema","map"];function ur(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function en(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ur(Object(n),!0).forEach(function(t){di(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):ur(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function di(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function hi(l,e){if(l==null)return{};var n=bi(l,e),t,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);for(r=0;r<o.length;r++)t=o[r],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(l,t)&&(n[t]=l[t])}return n}function bi(l,e){if(l==null)return{};var n={},t=Object.keys(l),r,o;for(o=0;o<t.length;o++)r=t[o],!(e.indexOf(r)>=0)&&(n[r]=l[r]);return n}function vi(l,e,n){var t=n.schema,r=n.map,o=hi(n,gi);!t&&r&&(t=Dl(r));var s=Ws(l,e,en(en({},o),{},{properties:t||o.properties}));return t?ci(s.data,t,en(en({},o),{},{properties:s.properties})):s}function wi(l){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return zo(l).then(function(n){return vi(n,ko,e)})}function ki(l){let e=new Map;for(let[t,r]of Object.entries(l.schemes))e.set(t,r);l.features=l.features.filter(t=>yi(t));let n=1;for(let t of l.features){let r=e.get(t.properties.scheme_reference);r.browse&&(t.properties.funding_programme=r.browse.funding_programme,t.properties.current_milestone=r.browse.current_milestone,t.id=n++)}return e}function yi(l){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(l.properties.id)}async function Si(l){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await wi(l,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let r of n){let o=Hl(r.lat_lon.split(",").map(parseFloat).reverse()),s=r;s.submission_time=r.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const yn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function Ci(l){return bt(["get","intervention_type"],{area:rt.area,route:rt.route,crossing:rt.crossing,other:rt.other},"white")}function Ti(l){return[["Areas",rt.area],["Routes",rt.route],["Crossings",rt.crossing],["Other",rt.other]]}const Z={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"],gradient_flat_to_steep:["#267300","#70A800","#FFAA00","#E60000","#A80000","#730000"]},Ne=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Sn(){let[l,e]=jl(yn,Z.funding_programmes);return[bt(["get","funding_programme"],l,"grey"),e]}function Oi(){let l=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,n]=jl(l,Z.current_milestone);return[bt(["get","current_milestone"],e,"grey"),n]}function jl(l,e){let n=[],t={},r=0;for(let o of l){let s=e[r++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function Li(l){let e,n;return e=new An({props:{rows:l[1]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ai(l){let e,n,t,r,o;function s(i){l[3](i)}let u={label:"Color interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return l[0]!==void 0&&(u.value=l[0]),e=new _t({props:u}),U.push(()=>W(e,"value",s)),e.$on("change",l[2]),r=new De({props:{label:"Legend",$$slots:{default:[Li]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};!n&&a&1&&(n=!0,f.value=i[0],V(()=>n=!1)),e.$set(f);const c={};a&66&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function Ii(l,e,n){let t;ke(l,On,a=>n(4,t=a));let r="fundingProgramme",[o,s]=Sn();function u(){let a;r=="interventionType"?(a=Ci(),n(1,s=Ti())):r=="fundingProgramme"?n(1,[a,s]=Sn(),s):r=="currentMilestone"&&n(1,[a,s]=Oi(),s),t.setPaintProperty("interventions-points","circle-color",a),t.setPaintProperty("interventions-lines","line-color",a),t.setPaintProperty("interventions-polygons","fill-color",a),t.setPaintProperty("interventions-polygons-outlines","line-color",a)}function i(a){r=a,n(0,r)}return[r,s,u,i]}class Pi extends Q{constructor(e){super(),J(this,e,Ii,Ai,Y,{})}}const ht=Jt({type:"FeatureCollection",features:[],schemes:{}}),ln=Jt(new Map),cr=Jt(!0),kt=Jt(""),yt=Jt("");function Mi(l){let e;return{c(){e=y("Reset all filters")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ni(l){let e;return{c(){e=y("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fi(l){let e,n,t,r,o,s;return t=new dt({props:{$$slots:{default:[Ni]},$$scope:{ctx:l}}}),t.$on("click",l[16]),{c(){e=T("input"),n=L(),h(t.$$.fragment),q(e,"type","text"),q(e,"class","govuk-input govuk-input--width-10"),q(e,"id","filterInterventionText")},m(u,i){$(u,e,i),We(e,l[6]),$(u,n,i),b(t,u,i),r=!0,o||(s=at(e,"input",l[15]),o=!0)},p(u,i){i&64&&e.value!==u[6]&&We(e,u[6]);const a={};i&16777216&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(m(t.$$.fragment,u),r=!0)},o(u){_(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),v(t,u),o=!1,s()}}}function Ei(l){let e;return{c(){e=y("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Di(l){let e,n,t,r,o,s;return t=new dt({props:{$$slots:{default:[Ei]},$$scope:{ctx:l}}}),t.$on("click",l[18]),{c(){e=T("input"),n=L(),h(t.$$.fragment),q(e,"type","text"),q(e,"class","govuk-input govuk-input--width-10"),q(e,"id","filterSchemeText")},m(u,i){$(u,e,i),We(e,l[5]),$(u,n,i),b(t,u,i),r=!0,o||(s=at(e,"input",l[17]),o=!0)},p(u,i){i&32&&e.value!==u[5]&&We(e,u[5]);const a={};i&16777216&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(m(t.$$.fragment,u),r=!0)},o(u){_(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),v(t,u),o=!1,s()}}}function ji(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,k,O,C,P;e=new dt({props:{$$slots:{default:[Mi]},$$scope:{ctx:l}}}),e.$on("click",l[11]);function D(S){l[12](S)}let I={label:"Authority or region",choices:l[7],emptyOption:!0};l[2]!==void 0&&(I.value=l[2]),t=new _t({props:I}),U.push(()=>W(t,"value",D));function N(S){l[13](S)}let A={label:"Funding programme",choices:l[8],emptyOption:!0};l[3]!==void 0&&(A.value=l[3]),s=new _t({props:A}),U.push(()=>W(s,"value",N));function M(S){l[14](S)}let E={label:"Current milestone",choices:l[9],emptyOption:!0};return l[4]!==void 0&&(E.value=l[4]),a=new _t({props:E}),U.push(()=>W(a,"value",M)),g=new _n({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Fi]},$$scope:{ctx:l}}}),k=new _n({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[Di]},$$scope:{ctx:l}}}),C=new Pi({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),o=L(),h(s.$$.fragment),i=L(),h(a.$$.fragment),c=L(),h(g.$$.fragment),d=L(),h(k.$$.fragment),O=L(),h(C.$$.fragment)},m(S,F){b(e,S,F),$(S,n,F),b(t,S,F),$(S,o,F),b(s,S,F),$(S,i,F),b(a,S,F),$(S,c,F),b(g,S,F),$(S,d,F),b(k,S,F),$(S,O,F),b(C,S,F),P=!0},p(S,F){const G={};F&16777216&&(G.$$scope={dirty:F,ctx:S}),e.$set(G);const R={};F&128&&(R.choices=S[7]),!r&&F&4&&(r=!0,R.value=S[2],V(()=>r=!1)),t.$set(R);const j={};F&256&&(j.choices=S[8]),!u&&F&8&&(u=!0,j.value=S[3],V(()=>u=!1)),s.$set(j);const B={};F&512&&(B.choices=S[9]),!f&&F&16&&(f=!0,B.value=S[4],V(()=>f=!1)),a.$set(B);const X={};F&16777280&&(X.$$scope={dirty:F,ctx:S}),g.$set(X);const re={};F&16777248&&(re.$$scope={dirty:F,ctx:S}),k.$set(re)},i(S){P||(m(e.$$.fragment,S),m(t.$$.fragment,S),m(s.$$.fragment,S),m(a.$$.fragment,S),m(g.$$.fragment,S),m(k.$$.fragment,S),m(C.$$.fragment,S),P=!0)},o(S){_(e.$$.fragment,S),_(t.$$.fragment,S),_(s.$$.fragment,S),_(a.$$.fragment,S),_(g.$$.fragment,S),_(k.$$.fragment,S),_(C.$$.fragment,S),P=!1},d(S){S&&(p(n),p(o),p(i),p(c),p(d),p(O)),v(e,S),v(t,S),v(s,S),v(a,S),v(g,S),v(k,S),v(C,S)}}}function Ri(l){let e,n=l[0].size.toLocaleString()+"",t,r,o=l[10].route.toLocaleString()+"",s,u,i=l[10].area.toLocaleString()+"",a,f,c=l[10].crossing.toLocaleString()+"",g,d,k=l[10].other.toLocaleString()+"",O,C,P=$r(l[10].totalLength).toFixed(1)+"",D,I;return{c(){e=y("Showing "),t=y(n),r=y(" schemes ("),s=y(o),u=y(`
    routes, `),a=y(i),f=y(` areas,
    `),g=y(c),d=y(" crossings, "),O=y(k),C=y(`
    other, with total LineString length of `),D=y(P),I=y(" miles)")},m(N,A){$(N,e,A),$(N,t,A),$(N,r,A),$(N,s,A),$(N,u,A),$(N,a,A),$(N,f,A),$(N,g,A),$(N,d,A),$(N,O,A),$(N,C,A),$(N,D,A),$(N,I,A)},p(N,A){A&1&&n!==(n=N[0].size.toLocaleString()+"")&&z(t,n),A&1024&&o!==(o=N[10].route.toLocaleString()+"")&&z(s,o),A&1024&&i!==(i=N[10].area.toLocaleString()+"")&&z(a,i),A&1024&&c!==(c=N[10].crossing.toLocaleString()+"")&&z(g,c),A&1024&&k!==(k=N[10].other.toLocaleString()+"")&&z(O,k),A&1024&&P!==(P=$r(N[10].totalLength).toFixed(1)+"")&&z(D,P)},d(N){N&&(p(e),p(t),p(r),p(s),p(u),p(a),p(f),p(g),p(d),p(O),p(C),p(D),p(I))}}}function Bi(l){let e,n,t;function r(s){l[19](s)}let o={$$slots:{default:[Ri]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),U.push(()=>W(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){const i={};u&16778241&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function zi(l){let e,n,t,r;return e=new De({props:{label:"Filters",$$slots:{default:[ji]},$$scope:{ctx:l}}}),t=new Xe({props:{small:!0,$$slots:{default:[Bi]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const u={};s&16778236&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16778243&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function $r(l){return l*621371e-9}function Hi(l,e,n){let t,r,o,s;ke(l,yt,R=>n(5,t=R)),ke(l,kt,R=>n(6,r=R)),ke(l,ht,R=>n(20,o=R)),ke(l,ln,R=>n(21,s=R));let{schemesToBeShown:u=new Set}=e,{show:i=!0}=e,a=[],f="",c=[],g=new Set(yn.slice(0,-1)),d="",k=[],O="",C={area:0,route:0,crossing:0,other:0,totalLength:0};Ln(()=>{var X,re,oe;let R=new Set,j=new Set,B=new Set;for(let ce of s.values())(X=ce.browse)!=null&&X.authority_or_region&&R.add(ce.browse.authority_or_region),(re=ce.browse)!=null&&re.funding_programme&&j.add(ce.browse.funding_programme),(oe=ce.browse)!=null&&oe.current_milestone&&B.add(ce.browse.current_milestone);n(7,a=Array.from(R.entries())),a.sort(),n(8,c=yn.map(ce=>[ce,ce])),n(9,k=Array.from(B.entries())),k.sort()});function P(R,j,B,X,re){let oe=R.toLowerCase(),ce=j.toLowerCase(),Ie=ae=>{var Le,ue,_e,ge,Be,Ee;if(oe&&!((Le=ae.properties.name)!=null&&Le.toLowerCase().includes(oe))&&!((ue=ae.properties.description)!=null&&ue.toLowerCase().includes(oe)))return!1;if(ce||B||X||re){let Ce=s.get(ae.properties.scheme_reference);if(B&&((_e=Ce.browse)==null?void 0:_e.authority_or_region)!=B||X&&X!=="Other"&&((ge=Ce.browse)==null?void 0:ge.funding_programme)!=X||X==="Other"&&g.has(((Be=Ce.browse)==null?void 0:Be.funding_programme)??"")||re&&((Ee=Ce.browse)==null?void 0:Ee.current_milestone)!=re||ce&&!Ce.scheme_reference.toLowerCase().includes(ce)&&!(Ce.scheme_name??"").toLowerCase().includes(ce))return!1}return!0};n(0,u=new Set(o.features.filter(Ie).map(ae=>ae.properties.scheme_reference))),n(10,C={area:0,route:0,crossing:0,other:0,totalLength:0});let Te=ae=>{var Le,ue;return!(!u.has(ae.properties.scheme_reference)||oe&&!((Le=ae.properties.name)!=null&&Le.toLowerCase().includes(oe))&&!((ue=ae.properties.description)!=null&&ue.toLowerCase().includes(oe)))};for(let ae of o.features)Te(ae)?(delete ae.properties.hide_while_editing,n(10,C[ae.properties.intervention_type]++,C),ae.geometry.type=="LineString"&&ae.properties.length_meters&&n(10,C.totalLength+=ae.properties.length_meters,C)):ae.properties.hide_while_editing=!0;ht.set(o),n(10,C)}function D(){n(2,f=""),n(3,d=""),n(4,O=""),it(kt,r="",r),it(yt,t="",t)}function I(R){f=R,n(2,f)}function N(R){d=R,n(3,d)}function A(R){O=R,n(4,O)}function M(){r=this.value,kt.set(r)}const E=()=>it(kt,r="",r);function S(){t=this.value,yt.set(t)}const F=()=>it(yt,t="",t);function G(R){i=R,n(1,i)}return l.$$set=R=>{"schemesToBeShown"in R&&n(0,u=R.schemesToBeShown),"show"in R&&n(1,i=R.show)},l.$$.update=()=>{l.$$.dirty&124&&P(r,t,f,d,O)},[u,i,f,d,O,t,r,a,c,k,C,D,I,N,A,M,E,S,F,G]}class qi extends Q{constructor(e){super(),J(this,e,Hi,zi,Y,{schemesToBeShown:0,show:1})}}function Gi(l){let e;return{c(){e=y(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ui(l){let e,n,t,r,o;return t=new K({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Gi]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=y("License: "),h(t.$$.fragment),r=y(`. Contains OS data © Crown copyright and database right
  2023.`)},m(s,u){$(s,e,u),w(e,n),b(t,e,null),w(e,r),o=!0},p(s,[u]){const i={};u&1&&(i.$$scope={dirty:u,ctx:s}),t.$set(i)},i(s){o||(m(t.$$.fragment,s),o=!0)},o(s){_(t.$$.fragment,s),o=!1},d(s){s&&p(e),v(t)}}}class Ae extends Q{constructor(e){super(),J(this,e,null,Ui,Y,{})}}function pr(l,e,n){const t=l.slice();return t[2]=e[n],t}function mr(l,e,n){const t=l.slice();return t[5]=e[n],t}function _r(l){let e,n;return{c(){e=T("span"),n=y(` 
    `),Se(e,"background",l[5]),Se(e,"width","100%"),Se(e,"border","1px solid black")},m(t,r){$(t,e,r),w(e,n)},p(t,r){r&1&&Se(e,"background",t[5])},d(t){t&&p(e)}}}function gr(l){let e,n=l[2]+"",t;return{c(){e=T("span"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&2&&n!==(n=r[2]+"")&&z(t,n)},d(r){r&&p(e)}}}function Wi(l){let e,n,t,r=je(l[0]),o=[];for(let i=0;i<r.length;i+=1)o[i]=_r(mr(l,r,i));let s=je(l[1]),u=[];for(let i=0;i<s.length;i+=1)u[i]=gr(pr(l,s,i));return{c(){e=T("div");for(let i=0;i<o.length;i+=1)o[i].c();n=L(),t=T("div");for(let i=0;i<u.length;i+=1)u[i].c();Se(e,"display","flex"),Se(t,"display","flex"),Se(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(i,n,a),$(i,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(i,[a]){if(a&1){r=je(i[0]);let f;for(f=0;f<r.length;f+=1){const c=mr(i,r,f);o[f]?o[f].p(c,a):(o[f]=_r(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}if(a&2){s=je(i[1]);let f;for(f=0;f<s.length;f+=1){const c=pr(i,s,f);u[f]?u[f].p(c,a):(u[f]=gr(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=s.length}},i:ne,o:ne,d(i){i&&(p(e),p(n),p(t)),gt(o,i),gt(u,i)}}}function Vi(l,e,n){let{colorScale:t}=e,{limits:r}=e;return l.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,r=o.limits)},[t,r]}class Re extends Q{constructor(e){super(),J(this,e,Vi,Wi,Y,{colorScale:0,limits:1})}}function dr(l){const e=l[13].OA21CD;l[14]=e;const n=l[13][l[3]];l[15]=n}function Xi(l){let e;return{c(){e=y("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Yi(l){let e;return{c(){e=y(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qi(l){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ji(l){let e;return{c(){e=y(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ki(l){let e,n,t,r,o,s,u,i,a,f,c,g;return t=new K({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Yi]},$$scope:{ctx:l}}}),o=new K({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Qi]},$$scope:{ctx:l}}}),f=new K({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ji]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=y("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),r=y(". Output area boundaries from "),h(o.$$.fragment),s=y("."),u=L(),i=T("p"),a=y("License: "),h(f.$$.fragment),c=y(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(d,k){$(d,e,k),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(d,u,k),$(d,i,k),w(i,a),b(f,i,null),w(i,c),g=!0},p(d,k){const O={};k&65536&&(O.$$scope={dirty:k,ctx:d}),t.$set(O);const C={};k&65536&&(C.$$scope={dirty:k,ctx:d}),o.$set(C);const P={};k&65536&&(P.$$scope={dirty:k,ctx:d}),f.$set(P)},i(d){g||(m(t.$$.fragment,d),m(o.$$.fragment,d),m(f.$$.fragment,d),g=!0)},o(d){_(t.$$.fragment,d),_(o.$$.fragment,d),_(f.$$.fragment,d),g=!1},d(d){d&&(p(e),p(u),p(i)),v(t),v(o),v(f)}}}function Zi(l){let e,n,t;return n=new me({props:{$$slots:{default:[Ki]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function hr(l){let e,n;return e=new Re({props:{colorScale:l[4],limits:l[6]()}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xi(l){let e;return{c(){e=y("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ea(l){let e;return{c(){e=y(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ta(l){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function na(l){let e;return{c(){e=y(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ra(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,k;return o=new K({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ea]},$$scope:{ctx:l}}}),u=new K({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ta]},$$scope:{ctx:l}}}),g=new K({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[na]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=L(),t=T("p"),r=y("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),s=y(". Output area boundaries from "),h(u.$$.fragment),i=y("."),a=L(),f=T("p"),c=y("License: "),h(g.$$.fragment),d=y(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(O,C){$(O,e,C),$(O,n,C),$(O,t,C),w(t,r),b(o,t,null),w(t,s),b(u,t,null),w(t,i),$(O,a,C),$(O,f,C),w(f,c),b(g,f,null),w(f,d),k=!0},p(O,C){const P={};C&65536&&(P.$$scope={dirty:C,ctx:O}),o.$set(P);const D={};C&65536&&(D.$$scope={dirty:C,ctx:O}),u.$set(D);const I={};C&65536&&(I.$$scope={dirty:C,ctx:O}),g.$set(I)},i(O){k||(m(o.$$.fragment,O),m(u.$$.fragment,O),m(g.$$.fragment,O),k=!0)},o(O){_(o.$$.fragment,O),_(u.$$.fragment,O),_(g.$$.fragment,O),k=!1},d(O){O&&(p(e),p(n),p(t),p(a),p(f)),v(o),v(u),v(g)}}}function la(l){let e,n,t;return n=new me({props:{$$slots:{default:[ra]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function br(l){let e,n;return e=new Re({props:{colorScale:l[4],limits:l[6]()}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function oa(l){let e;return{c(){e=y("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sa(l){let e;return{c(){e=y(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ia(l){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function aa(l){let e,n,t,r,o,s,u,i,a;return t=new K({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[sa]},$$scope:{ctx:l}}}),o=new K({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ia]},$$scope:{ctx:l}}}),i=new Ae({}),{c(){e=T("p"),n=y("Population density data is from the 2021 census, via "),h(t.$$.fragment),r=y(". Output area boundaries from "),h(o.$$.fragment),s=y("."),u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&65536&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&65536&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function fa(l){let e,n,t;return n=new me({props:{$$slots:{default:[aa]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function vr(l){let e,n,t,r;return t=new Re({props:{colorScale:l[4],limits:l[6]().map(da)}}),{c(){e=T("p"),e.textContent="(people per square kilometres)",n=L(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function ua(l){let e,n,t,r=l[15].toLocaleString()+"",o,s,u=l[14]+"",i;return{c(){e=T("p"),n=y("There are "),t=T("b"),o=y(r),s=y(`
          people per square kilometre in `),i=y(u)},m(a,f){$(a,e,f),w(e,n),w(e,t),w(t,o),w(e,s),w(e,i)},p(a,f){f&8200&&r!==(r=a[15].toLocaleString()+"")&&z(o,r),f&8192&&u!==(u=a[14]+"")&&z(i,u)},d(a){a&&p(e)}}}function ca(l){let e,n,t=l[14]+"",r,o,s,u=l[15]+"",i,a;return{c(){e=T("p"),n=y("Households in "),r=y(t),o=y(` have an average of
          `),s=T("b"),i=y(u),a=y(`
          cars`)},m(f,c){$(f,e,c),w(e,n),w(e,r),w(e,o),w(e,s),w(s,i),w(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&z(r,t),c&8200&&u!==(u=f[15]+"")&&z(i,u)},d(f){f&&p(e)}}}function $a(l){let e,n,t=l[15]+"",r,o,s,u=l[14]+"",i,a;return{c(){e=T("p"),n=T("b"),r=y(t),o=y("%"),s=y(`
          of households in `),i=y(u),a=y(" have 1 or more cars")},m(f,c){$(f,e,c),w(e,n),w(n,r),w(n,o),w(e,s),w(e,i),w(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&z(r,t),c&8192&&u!==(u=f[14]+"")&&z(i,u)},d(f){f&&p(e)}}}function pa(l){dr(l);let e;function n(o,s){return o[3]=="percent_households_with_car"?$a:o[3]=="average_cars_per_household"?ca:ua}let t=n(l),r=t(l);return{c(){r.c(),e=Fe()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){dr(o),t===(t=n(o))&&r?r.p(o,s):(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function ma(l){let e,n;return e=new fe({props:{$$slots:{default:[pa,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&73736&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _a(l){let e,n,t,r;const o=[H(Je),{sourceLayer:Je},{paint:{"fill-color":we(["get",l[3]],l[6](),l[4]),"fill-opacity":x(.5,.7)}},{layout:{visibility:l[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ma]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ge({props:s}),e.$on("click",l[5]);const u=[H(`${Je}-outline`),{sourceLayer:Je},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&88?te(o,[f&0&&se(H(Je)),f&0&&{sourceLayer:Je},f&88&&{paint:{"fill-color":we(["get",a[3]],a[6](),a[4]),"fill-opacity":x(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&8?te(u,[f&0&&se(H(`${Je}-outline`)),f&0&&{sourceLayer:Je},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function ga(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,k;function O(S){l[7](S)}let C={$$slots:{right:[Zi],default:[Xi]},$$scope:{ctx:l}};l[0]!==void 0&&(C.checked=l[0]),e=new le({props:C}),U.push(()=>W(e,"checked",O)),e.$on("change",l[8]);let P=l[3]=="percent_households_with_car"&&hr(l);function D(S){l[9](S)}let I={$$slots:{right:[la],default:[xi]},$$scope:{ctx:l}};l[1]!==void 0&&(I.checked=l[1]),o=new le({props:I}),U.push(()=>W(o,"checked",D)),o.$on("change",l[10]);let N=l[3]=="average_cars_per_household"&&br(l);function A(S){l[11](S)}let M={$$slots:{right:[fa],default:[oa]},$$scope:{ctx:l}};l[2]!==void 0&&(M.checked=l[2]),a=new le({props:M}),U.push(()=>W(a,"checked",A)),a.$on("change",l[12]);let E=l[3]=="population_density"&&vr(l);return d=new ve({props:{url:`pmtiles://${he()}/v1/${Je}.pmtiles`,$$slots:{default:[_a]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),P&&P.c(),r=L(),h(o.$$.fragment),u=L(),N&&N.c(),i=L(),h(a.$$.fragment),c=L(),E&&E.c(),g=L(),h(d.$$.fragment)},m(S,F){b(e,S,F),$(S,t,F),P&&P.m(S,F),$(S,r,F),b(o,S,F),$(S,u,F),N&&N.m(S,F),$(S,i,F),b(a,S,F),$(S,c,F),E&&E.m(S,F),$(S,g,F),b(d,S,F),k=!0},p(S,[F]){const G={};F&65536&&(G.$$scope={dirty:F,ctx:S}),!n&&F&1&&(n=!0,G.checked=S[0],V(()=>n=!1)),e.$set(G),S[3]=="percent_households_with_car"?P?(P.p(S,F),F&8&&m(P,1)):(P=hr(S),P.c(),m(P,1),P.m(r.parentNode,r)):P&&($e(),_(P,1,1,()=>{P=null}),pe());const R={};F&65536&&(R.$$scope={dirty:F,ctx:S}),!s&&F&2&&(s=!0,R.checked=S[1],V(()=>s=!1)),o.$set(R),S[3]=="average_cars_per_household"?N?(N.p(S,F),F&8&&m(N,1)):(N=br(S),N.c(),m(N,1),N.m(i.parentNode,i)):N&&($e(),_(N,1,1,()=>{N=null}),pe());const j={};F&65536&&(j.$$scope={dirty:F,ctx:S}),!f&&F&4&&(f=!0,j.checked=S[2],V(()=>f=!1)),a.$set(j),S[3]=="population_density"?E?(E.p(S,F),F&8&&m(E,1)):(E=vr(S),E.c(),m(E,1),E.m(g.parentNode,g)):E&&($e(),_(E,1,1,()=>{E=null}),pe());const B={};F&65544&&(B.$$scope={dirty:F,ctx:S}),d.$set(B)},i(S){k||(m(e.$$.fragment,S),m(P),m(o.$$.fragment,S),m(N),m(a.$$.fragment,S),m(E),m(d.$$.fragment,S),k=!0)},o(S){_(e.$$.fragment,S),_(P),_(o.$$.fragment,S),_(N),_(a.$$.fragment,S),_(E),_(d.$$.fragment,S),k=!1},d(S){S&&(p(t),p(r),p(u),p(i),p(c),p(g)),v(e,S),P&&P.d(S),v(o,S),N&&N.d(S),v(a,S),E&&E.d(S),v(d,S)}}}let Je="census_output_areas";const da=l=>l.toLocaleString();function ha(l,e,n){let t=Z.sequential_low_to_high,r=!1,o=!1,s=!1,u="";function i(C){let P=C.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${P}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${P}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(C){r=C,n(0,r)}const c=()=>{n(1,o=!1),n(2,s=!1)};function g(C){o=C,n(1,o)}const d=()=>{n(0,r=!1),n(2,s=!1)};function k(C){s=C,n(2,s)}const O=()=>{n(0,r=!1),n(1,o=!1)};return l.$$.update=()=>{l.$$.dirty&7&&(r?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):s?n(3,u="population_density"):n(3,u=""))},[r,o,s,u,t,i,a,f,c,g,d,k,O]}class ba extends Q{constructor(e){super(),J(this,e,ha,ga,Y,{})}}function va(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=y(`
  Combined authorities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function wa(l){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ka(l){let e,n,t,r,o,s,u;return t=new K({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[wa]},$$scope:{ctx:l}}}),s=new Ae({}),{c(){e=T("p"),n=y("Data from "),h(t.$$.fragment),r=y(", as of December 2022."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function ya(l){let e,n,t;return n=new me({props:{$$slots:{default:[ka]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Sa(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Ca(l){let e,n;return e=new fe({props:{$$slots:{default:[Sa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ta(l){let e,n,t,r;const o=[H(St),{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Ca]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ge({props:s}),e.$on("click",La);const u=[H(`${St}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&se(H(St)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?te(u,[f&0&&se(H(`${St}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Oa(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[ya],default:[va]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new vt({props:{data:`${he()}/v1/${St}.geojson`,$$slots:{default:[Ta]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let St="combined_authorities";function La(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Aa(l,e,n){let t=Z.combined_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Ia extends Q{constructor(e){super(),J(this,e,Aa,Oa,Y,{})}}function Pa(l){let e;return{c(){e=y("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ma(l){let e;return{c(){e=y(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Na(l){let e;return{c(){e=y(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fa(l){let e,n,t,r,o,s,u,i,a;return t=new K({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Ma]},$$scope:{ctx:l}}}),o=new K({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Na]},$$scope:{ctx:l}}}),i=new Ae({}),{c(){e=T("p"),n=y("The 2019 English IMD scores come from "),h(t.$$.fragment),r=y(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),s=y("."),u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function Ea(l){let e,n,t;return n=new me({props:{$$slots:{default:[Fa]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function wr(l){let e,n;return e=new Re({props:{colorScale:l[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Da(l){let e,n=l[4].LSOA11CD+"",t,r,o,s=l[4].score+"",u,i,a,f,c,g=l[4].rank.toLocaleString()+"",d,k;return{c(){e=T("p"),t=y(n),r=y(` has an IMD score of
        `),o=T("b"),u=y(s),i=L(),a=T("p"),f=y("Rank: "),c=T("b"),d=y(g),k=y(`
        / 32,844 LSOAs`)},m(O,C){$(O,e,C),w(e,t),w(e,r),w(e,o),w(o,u),$(O,i,C),$(O,a,C),w(a,f),w(a,c),w(c,d),w(a,k)},p(O,C){C&16&&n!==(n=O[4].LSOA11CD+"")&&z(t,n),C&16&&s!==(s=O[4].score+"")&&z(u,s),C&16&&g!==(g=O[4].rank.toLocaleString()+"")&&z(d,g)},d(O){O&&(p(e),p(i),p(a))}}}function ja(l){let e,n;return e=new fe({props:{$$slots:{default:[Da,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ra(l){let e,n,t,r;const o=[H(Ke),{sourceLayer:Ke},{paint:{"fill-color":we(["-",10,["get","decile"]],l[2],l[1]),"fill-opacity":x(.5,.7)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[ja]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ge({props:s});const u=[H(`${Ke}-outline`),{sourceLayer:Ke},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&7?te(o,[f&0&&se(H(Ke)),f&0&&{sourceLayer:Ke},f&6&&{paint:{"fill-color":we(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":x(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&1?te(u,[f&0&&se(H(`${Ke}-outline`)),f&0&&{sourceLayer:Ke},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ba(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[Ea],default:[Pa]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&wr(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${Ke}.pmtiles`,$$slots:{default:[Ra]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=wr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Ke="imd";function za(l,e,n){let t=Z.sequential_low_to_high,r=[0,2,4,6,8,10],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Ha extends Q{constructor(e){super(),J(this,e,za,Ba,Y,{})}}function qa(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=y(`
  Local Authority Districts`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Ga(l){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ua(l){let e,n,t,r,o,s,u;return t=new K({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Ga]},$$scope:{ctx:l}}}),s=new Ae({}),{c(){e=T("p"),n=y("Data from "),h(t.$$.fragment),r=y(", as of May 2023."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Wa(l){let e,n,t;return n=new me({props:{$$slots:{default:[Ua]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Va(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Xa(l){let e,n;return e=new fe({props:{$$slots:{default:[Va,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ya(l){let e,n,t,r;const o=[H(Ct),{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Xa]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ge({props:s}),e.$on("click",Ja);const u=[H(`${Ct}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&se(H(Ct)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?te(u,[f&0&&se(H(`${Ct}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Qa(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Wa],default:[qa]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new vt({props:{data:`${he()}/v1/${Ct}.geojson`,$$slots:{default:[Ya]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Ct="local_authority_districts";function Ja(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.LAD23CD}`,"_blank")}function Ka(l,e,n){let t=Z.local_authority_districts,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Za extends Q{constructor(e){super(),J(this,e,Ka,Qa,Y,{})}}function xa(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=y(`
  Local Planning Authorities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function ef(l){let e;return{c(){e=y(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tf(l){let e;return{c(){e=y(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function nf(l){let e;return{c(){e=y(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function rf(l){let e;return{c(){e=y("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lf(l){let e;return{c(){e=y(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function of(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,k,O,C,P,D,I,N,A,M;return t=new K({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[ef]},$$scope:{ctx:l}}}),o=new K({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[tf]},$$scope:{ctx:l}}}),u=new K({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[nf]},$$scope:{ctx:l}}}),d=new K({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[rf]},$$scope:{ctx:l}}}),D=new K({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[lf]},$$scope:{ctx:l}}}),A=new Ae({}),{c(){e=T("p"),n=y("LPAs may be a "),h(t.$$.fragment),r=y(", "),h(o.$$.fragment),s=y("y, or "),h(u.$$.fragment),i=y("."),a=L(),f=T("p"),c=T("strong"),g=y(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(d.$$.fragment),k=y(" to get more details."),O=L(),C=T("p"),P=y("Data from ONS Geography via "),h(D.$$.fragment),I=y(", as of November 2022."),N=L(),h(A.$$.fragment)},m(E,S){$(E,e,S),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),b(u,e,null),w(e,i),$(E,a,S),$(E,f,S),w(f,c),w(c,g),b(d,c,null),w(c,k),$(E,O,S),$(E,C,S),w(C,P),b(D,C,null),w(C,I),$(E,N,S),b(A,E,S),M=!0},p(E,S){const F={};S&16&&(F.$$scope={dirty:S,ctx:E}),t.$set(F);const G={};S&16&&(G.$$scope={dirty:S,ctx:E}),o.$set(G);const R={};S&16&&(R.$$scope={dirty:S,ctx:E}),u.$set(R);const j={};S&16&&(j.$$scope={dirty:S,ctx:E}),d.$set(j);const B={};S&16&&(B.$$scope={dirty:S,ctx:E}),D.$set(B)},i(E){M||(m(t.$$.fragment,E),m(o.$$.fragment,E),m(u.$$.fragment,E),m(d.$$.fragment,E),m(D.$$.fragment,E),m(A.$$.fragment,E),M=!0)},o(E){_(t.$$.fragment,E),_(o.$$.fragment,E),_(u.$$.fragment,E),_(d.$$.fragment,E),_(D.$$.fragment,E),_(A.$$.fragment,E),M=!1},d(E){E&&(p(e),p(a),p(f),p(O),p(C),p(N)),v(t),v(o),v(u),v(d),v(D),v(A,E)}}}function sf(l){let e,n,t;return n=new me({props:{$$slots:{default:[of]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function af(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function ff(l){let e,n;return e=new fe({props:{$$slots:{default:[af,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function uf(l){let e,n,t,r;const o=[H(Ze),{sourceLayer:Ze},{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[ff]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ge({props:s});const u=[H(`${Ze}-outline`),{sourceLayer:Ze},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&se(H(Ze)),f&0&&{sourceLayer:Ze},f&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?te(u,[f&0&&se(H(`${Ze}-outline`)),f&0&&{sourceLayer:Ze},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function cf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[sf],default:[xa]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${Ze}.pmtiles`,$$slots:{default:[uf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Ze="local_planning_authorities";function $f(l,e,n){let t=Z.local_planning_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class pf extends Q{constructor(e){super(),J(this,e,$f,cf,Y,{})}}function mf(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=y(`
  Parliamentary constituencies`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function _f(l){let e;return{c(){e=y(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gf(l){let e,n,t,r,o,s,u;return t=new K({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[_f]},$$scope:{ctx:l}}}),s=new Ae({}),{c(){e=T("p"),n=y("Data from "),h(t.$$.fragment),r=y(", as of May 2023."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function df(l){let e,n,t;return n=new me({props:{$$slots:{default:[gf]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function hf(l){let e,n=l[3].Name+"",t;return{c(){e=T("p"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].Name+"")&&z(t,n)},d(r){r&&p(e)}}}function bf(l){let e,n;return e=new fe({props:{$$slots:{default:[hf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vf(l){let e,n,t,r;const o=[H(xe),{sourceLayer:xe},{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[bf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ge({props:s}),e.$on("click",kf);const u=[H(`${xe}-outline`),{sourceLayer:xe},{paint:{"line-color":l[1],"line-width":5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&se(H(xe)),f&0&&{sourceLayer:xe},f&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?te(u,[f&0&&se(H(`${xe}-outline`)),f&0&&{sourceLayer:xe},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function wf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[df],default:[mf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${xe}.pmtiles`,$$slots:{default:[vf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let xe="parliamentary_constituencies";function kf(l){let e=l.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function yf(l,e,n){let t=Z.parliamentary_constituencies,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Sf extends Q{constructor(e){super(),J(this,e,yf,wf,Y,{})}}function Cf(l){let e;return{c(){e=y("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Tf(l){let e;return{c(){e=y(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Of(l){let e;return{c(){e=y(`Extrium
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Lf(l){let e;return{c(){e=y(`FAQ
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Af(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,k,O,C;return t=new K({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Tf]},$$scope:{ctx:l}}}),f=new K({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[Of]},$$scope:{ctx:l}}}),g=new K({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[Lf]},$$scope:{ctx:l}}}),O=new Ae({}),{c(){e=T("p"),n=y("Most layers show air quality data from "),h(t.$$.fragment),r=y(`. The measurements are annual means, in units of
        µgm
        `),o=T("sup"),o.textContent="3",s=y(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=L(),i=T("p"),a=y("The noise layer is from "),h(f.$$.fragment),c=y(", using 2017 data. See their "),h(g.$$.fragment),d=y("."),k=L(),h(O.$$.fragment)},m(P,D){$(P,e,D),w(e,n),b(t,e,null),w(e,r),w(e,o),w(e,s),$(P,u,D),$(P,i,D),w(i,a),b(f,i,null),w(i,c),b(g,i,null),w(i,d),$(P,k,D),b(O,P,D),C=!0},p(P,D){const I={};D&2048&&(I.$$scope={dirty:D,ctx:P}),t.$set(I);const N={};D&2048&&(N.$$scope={dirty:D,ctx:P}),f.$set(N);const A={};D&2048&&(A.$$scope={dirty:D,ctx:P}),g.$set(A)},i(P){C||(m(t.$$.fragment,P),m(f.$$.fragment,P),m(g.$$.fragment,P),m(O.$$.fragment,P),C=!0)},o(P){_(t.$$.fragment,P),_(f.$$.fragment,P),_(g.$$.fragment,P),_(O.$$.fragment,P),C=!1},d(P){P&&(p(e),p(u),p(i),p(k)),v(t),v(f),v(g),v(O,P)}}}function If(l){let e,n,t;return n=new me({props:{$$slots:{default:[Af]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function kr(l){let e,n,t,r,o=l[3](l[0])+"",s,u,i,a,f,c,g,d,k,O,C,P,D;function I(S){l[7](S)}let N={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};l[0]!==void 0&&(N.value=l[0]),e=new _t({props:N}),U.push(()=>W(e,"value",I));const A=[Mf,Pf],M=[];function E(S,F){return S[0]=="Noise"?0:1}return d=E(l),k=M[d]=A[d](l),{c(){h(e.$$.fragment),t=L(),r=T("p"),s=y(o),u=L(),i=T("div"),a=T("label"),f=y(`Opacity
      `),c=T("input"),g=L(),k.c(),O=Fe(),q(c,"type","range"),q(c,"min","0"),q(c,"max","100")},m(S,F){b(e,S,F),$(S,t,F),$(S,r,F),w(r,s),$(S,u,F),$(S,i,F),w(i,a),w(a,f),w(a,c),We(c,l[2]),$(S,g,F),M[d].m(S,F),$(S,O,F),C=!0,P||(D=[at(c,"change",l[8]),at(c,"input",l[8])],P=!0)},p(S,F){const G={};!n&&F&1&&(n=!0,G.value=S[0],V(()=>n=!1)),e.$set(G),(!C||F&1)&&o!==(o=S[3](S[0])+"")&&z(s,o),F&4&&We(c,S[2]);let R=d;d=E(S),d===R?M[d].p(S,F):($e(),_(M[R],1,1,()=>{M[R]=null}),pe(),k=M[d],k?k.p(S,F):(k=M[d]=A[d](S),k.c()),m(k,1),k.m(O.parentNode,O))},i(S){C||(m(e.$$.fragment,S),m(k),C=!0)},o(S){_(e.$$.fragment,S),_(k),C=!1},d(S){S&&(p(t),p(r),p(u),p(i),p(g),p(O)),v(e,S),M[d].d(S),P=!1,dl(D)}}}function Pf(l){let e,n,t;return{c(){e=T("img"),nn(e.src,n=l[5](l[0]))||q(e,"src",n),q(e,"width",150),q(e,"alt",t=`Legend for ${l[0]} layer`)},m(r,o){$(r,e,o)},p(r,o){o&1&&!nn(e.src,n=r[5](r[0]))&&q(e,"src",n),o&1&&t!==(t=`Legend for ${r[0]} layer`)&&q(e,"alt",t)},i:ne,o:ne,d(r){r&&p(e)}}}function Mf(l){let e,n;return e=new Re({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Nf(l){let e,n;const t=[H("pollution"),{paint:{"raster-opacity":l[2]/100}},{layout:{visibility:l[1]?"visible":"none"}}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new to({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&6?te(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ff(l){let e,n,t,r,o,s;function u(f){l[6](f)}let i={$$slots:{right:[If],default:[Cf]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[1]&&kr(l);return o=new _o({props:{tiles:[l[4](l[0])],tileSize:256,$$slots:{default:[Nf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&2048&&(g.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,g.checked=f[1],V(()=>n=!1)),e.$set(g),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=kr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&1&&(d.tiles=[f[4](f[0])]),c&2054&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}function Ef(l,e,n){let t,r=!1,o=50,s="PM25_viridis";function u(){return s=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(k){return t[1]}function a(k){let O=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${O}`}function f(k){let O=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${O}`}function c(k){r=k,n(1,r)}function g(k){s=k,n(0,s)}function d(){o=Gt(this.value),n(2,o)}return l.$$.update=()=>{l.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[s])},[s,r,o,i,a,f,c,g,d]}class Df extends Q{constructor(e){super(),J(this,e,Ef,Ff,Y,{})}}function jf(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=y(`
  Wards`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Rf(l){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bf(l){let e,n,t,r,o,s,u;return t=new K({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Rf]},$$scope:{ctx:l}}}),s=new Ae({}),{c(){e=T("p"),n=y("Data from "),h(t.$$.fragment),r=y(", as of May 2023."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function zf(l){let e,n,t;return n=new me({props:{$$slots:{default:[Bf]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Hf(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function qf(l){let e,n;return e=new fe({props:{$$slots:{default:[Hf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gf(l){let e,n,t,r;const o=[H(et),{sourceLayer:et},{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[qf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ge({props:s}),e.$on("click",Wf);const u=[H(`${et}-outline`),{sourceLayer:et},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&se(H(et)),f&0&&{sourceLayer:et},f&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?te(u,[f&0&&se(H(`${et}-outline`)),f&0&&{sourceLayer:et},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Uf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[zf],default:[jf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${et}.pmtiles`,$$slots:{default:[Gf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let et="wards";function Wf(l){let e=encodeURIComponent(l.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Vf(l,e,n){let t=Z.wards,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Xf extends Q{constructor(e){super(),J(this,e,Vf,Uf,Y,{})}}function Yf(l){let e;return{c(){e=y("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qf(l){let e,n,t,r;return t=new K({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Yf]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=y("License: "),h(t.$$.fragment)},m(o,s){$(o,e,s),w(e,n),b(t,e,null),r=!0},p(o,[s]){const u={};s&1&&(u.$$scope={dirty:s,ctx:o}),t.$set(u)},i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&p(e),v(t)}}}class Ye extends Q{constructor(e){super(),J(this,e,null,Qf,Y,{})}}function Jf(l){let e,n,t;return e=new Oe({props:{color:Z.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=y(`
  Bus routes`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Kf(l){let e;return{c(){e=y(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zf(l){let e,n,t,r,o,s,u,i,a;return o=new K({props:{href:"https://gtfs.org",$$slots:{default:[Kf]},$$scope:{ctx:l}}}),i=new Ye({}),{c(){e=T("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=L(),t=T("p"),r=y("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),s=y(`, and doesn't include which routes are run or the
        frequency of service.`),u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),w(t,r),b(o,t,null),w(t,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&8&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),v(o),v(i,f)}}}function xf(l){let e,n,t;return n=new me({props:{$$slots:{default:[Zf]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function eu(l){let e;return{c(){e=T("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tu(l){let e;return{c(){e=T("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function nu(l){let e;function n(o,s){return o[2].has_bus_lane?tu:eu}let t=n(l),r=t(l);return{c(){r.c(),e=Fe()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function ru(l){let e,n;return e=new fe({props:{$$slots:{default:[nu,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function lu(l){let e,n;const t=[H(Tt),{sourceLayer:Tt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Z.bus_route_with_lane,Z.bus_route_without_lane],"line-width":5,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[ru]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&se(H(Tt)),s&0&&{sourceLayer:Tt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ou(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[xf],default:[Jf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${Tt}.pmtiles`,$$slots:{default:[lu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Tt="bus_routes";function su(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class iu extends Q{constructor(e){super(),J(this,e,su,ou,Y,{})}}function yr(l){const e=du(l[5]);l[6]=e[0],l[7]=e[1],l[8]=e[2]}function Sr(l,e,n){const t=l.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function au(l){let e;return{c(){e=y("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fu(l){let e,n,t,r,o,s,u,i;return u=new Ye({}),{c(){e=T("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=L(),t=T("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,r=L(),o=T("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=L(),h(u.$$.fragment)},m(a,f){$(a,e,f),$(a,n,f),$(a,t,f),$(a,r,f),$(a,o,f),$(a,s,f),b(u,a,f),i=!0},p:ne,i(a){i||(m(u.$$.fragment,a),i=!0)},o(a){_(u.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(r),p(o),p(s)),v(u,a)}}}function uu(l){let e,n,t;return n=new me({props:{$$slots:{default:[fu]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Cr(l){let e,n,t;return n=new Xe({props:{$$slots:{default:[$u]},$$scope:{ctx:l}}}),{c(){e=T("div"),h(n.$$.fragment),Se(e,"border","1px solid black"),Se(e,"padding","8px")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function cu(l){let e,n,t=l[9]+"",r,o,s;return e=new Oe({props:{color:l[10]}}),{c(){h(e.$$.fragment),n=L(),r=y(t),o=L()},m(u,i){b(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p:ne,i(u){s||(m(e.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),v(e,u)}}}function Tr(l){let e,n,t;function r(s){l[4](s,l[6])}let o={$$slots:{default:[cu]},$$scope:{ctx:l}};return l[1][l[6]]!==void 0&&(o.checked=l[1][l[6]]),e=new le({props:o}),U.push(()=>W(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){l=s;const i={};u&8192&&(i.$$scope={dirty:u,ctx:l}),!n&&u&6&&(n=!0,i.checked=l[1][l[6]],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function $u(l){let e,n,t=je(l[2]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Tr(Sr(l,t,s));const o=s=>_(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=Fe()},m(s,u){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(s,u);$(s,e,u),n=!0},p(s,u){if(u&6){t=je(s[2]);let i;for(i=0;i<t.length;i+=1){const a=Sr(s,t,i);r[i]?(r[i].p(a,u),m(r[i],1)):(r[i]=Tr(a),r[i].c(),m(r[i],1),r[i].m(e.parentNode,e))}for($e(),i=t.length;i<r.length;i+=1)o(i);pe()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)m(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)_(r[u]);n=!1},d(s){s&&p(e),gt(r,s)}}}function pu(l){yr(l);let e,n=l[6]+"",t,r,o,s,u,i=l[7]+"",a,f,c,g,d=l[8]+"",k;return{c(){e=T("h2"),t=y(n),r=L(),o=T("p"),s=y("Direction: "),u=T("b"),a=L(),f=T("p"),c=y("Width: "),g=T("b"),k=y(d)},m(O,C){$(O,e,C),w(e,t),$(O,r,C),$(O,o,C),w(o,s),w(o,u),u.innerHTML=i,$(O,a,C),$(O,f,C),w(f,c),w(f,g),w(g,k)},p(O,C){yr(O),C&32&&n!==(n=O[6]+"")&&z(t,n),C&32&&i!==(i=O[7]+"")&&(u.innerHTML=i),C&32&&d!==(d=O[8]+"")&&z(k,d)},d(O){O&&(p(e),p(r),p(o),p(a),p(f))}}}function mu(l){let e,n;return e=new fe({props:{$$slots:{default:[pu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&8224&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _u(l){let e,n;const t=[H(Ot),{sourceLayer:Ot},{paint:{"line-color":bt(["get","kind"],{track:Z.cycle_paths.track,lane:Z.cycle_paths.lane,shared_use_segregated:Z.cycle_paths.shared_use_segregated,shared_use_unsegregated:Z.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ne,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:Or(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={$$slots:{default:[mu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),e.$on("click",hu),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&se(H(Ot)),s&0&&{sourceLayer:Ot},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:Or(o[1])},t[5],t[6],t[7]]):{};s&8192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function gu(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[uu],default:[au]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Cr(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${Ot}.pmtiles`,$$slots:{default:[_u]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&8192&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Cr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&8195&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Ot="cycle_paths";function du(l){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[l.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[l.direction],t=l.width=="unknown"?"unknown":`${l.width} meters`;return[e,`${n} ${l.direction}`,t]}function hu(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function Or(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","kind"],["literal",e]]}function bu(l,e,n){let t=[["track","Separated tracks",Z.cycle_paths.track],["lane","Unprotected lanes",Z.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",Z.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",Z.cycle_paths.shared_use_unsegregated]],r=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){r=i,n(0,r)}function u(i,a){l.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[r,o,t,s,u]}class vu extends Q{constructor(e){super(),J(this,e,bu,gu,Y,{})}}function wu(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=y(`
  Major Road Network`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function ku(l){let e;return{c(){e=y(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function yu(l){let e,n,t,r,o,s,u;return t=new K({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[ku]},$$scope:{ctx:l}}}),s=new Ae({}),{c(){e=T("p"),n=y("Data from the "),h(t.$$.fragment),r=y(", as of September 2021."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Su(l){let e,n,t;return n=new me({props:{$$slots:{default:[yu]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Cu(l){let e,n=(l[3].name??"Unknown MRN road")+"",t;return{c(){e=T("p"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unknown MRN road")+"")&&z(t,n)},d(r){r&&p(e)}}}function Tu(l){let e,n;return e=new fe({props:{$$slots:{default:[Cu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ou(l){let e,n;const t=[H(Lt),{sourceLayer:Lt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Tu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&se(H(Lt)),s&0&&{sourceLayer:Lt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Lu(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Su],default:[wu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${Lt}.pmtiles`,$$slots:{default:[Ou]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Lt="mrn";function Au(l,e,n){let t=Z.mrn,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Iu extends Q{constructor(e){super(),J(this,e,Au,Lu,Y,{})}}function Pu(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=y(`
  National Cycle Network`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Mu(l){let e;return{c(){e=y(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Nu(l){let e,n,t,r,o,s,u;return t=new K({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Mu]},$$scope:{ctx:l}}}),s=new Ae({}),{c(){e=T("p"),n=y("Data from Sustrans about the "),h(t.$$.fragment),r=y(", downloaded on 22/01/2024."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Fu(l){let e,n,t;return n=new me({props:{$$slots:{default:[Nu]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Lr(l){let e,n,t,r=l[3].Desc_+"",o;return{c(){e=T("li"),n=y("Description: "),t=T("b"),o=y(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Desc_+"")&&z(o,r)},d(s){s&&p(e)}}}function Ar(l){let e,n,t,r=l[3].Greenway+"",o;return{c(){e=T("li"),n=y("Is greenway: "),t=T("b"),o=y(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Greenway+"")&&z(o,r)},d(s){s&&p(e)}}}function Ir(l){let e,n,t,r=l[3].RouteType+"",o;return{c(){e=T("li"),n=y("Route type: "),t=T("b"),o=y(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteType+"")&&z(o,r)},d(s){s&&p(e)}}}function Pr(l){let e,n,t,r=l[3].RouteNo+"",o;return{c(){e=T("li"),n=y("Route number: "),t=T("b"),o=y(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteNo+"")&&z(o,r)},d(s){s&&p(e)}}}function Mr(l){let e,n,t,r=l[3].RouteCat+"",o;return{c(){e=T("li"),n=y("Route Category: "),t=T("b"),o=y(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteCat+"")&&z(o,r)},d(s){s&&p(e)}}}function Nr(l){let e,n,t,r=l[3].OpenStatus+"",o;return{c(){e=T("li"),n=y("Open Status: "),t=T("b"),o=y(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].OpenStatus+"")&&z(o,r)},d(s){s&&p(e)}}}function Fr(l){let e,n,t,r=l[3].Surface+"",o;return{c(){e=T("li"),n=y("Surface: "),t=T("b"),o=y(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Surface+"")&&z(o,r)},d(s){s&&p(e)}}}function Er(l){let e,n,t,r=l[3].Quality+"",o;return{c(){e=T("li"),n=y("Quality: "),t=T("b"),o=y(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Quality+"")&&z(o,r)},d(s){s&&p(e)}}}function Dr(l){let e,n,t,r=l[3].RoadClass+"",o;return{c(){e=T("li"),n=y("Road Class: "),t=T("b"),o=y(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RoadClass+"")&&z(o,r)},d(s){s&&p(e)}}}function Eu(l){let e,n,t,r,o,s,u,i,a,f=l[3].Desc_&&Lr(l),c=l[3].Greenway&&Ar(l),g=l[3].RouteType&&Ir(l),d=l[3].RouteNo&&Pr(l),k=l[3].RouteCat&&Mr(l),O=l[3].OpenStatus&&Nr(l),C=l[3].Surface&&Fr(l),P=l[3].Quality&&Er(l),D=l[3].RoadClass&&Dr(l);return{c(){e=T("ul"),f&&f.c(),n=L(),c&&c.c(),t=L(),g&&g.c(),r=L(),d&&d.c(),o=L(),k&&k.c(),s=L(),O&&O.c(),u=L(),C&&C.c(),i=L(),P&&P.c(),a=L(),D&&D.c()},m(I,N){$(I,e,N),f&&f.m(e,null),w(e,n),c&&c.m(e,null),w(e,t),g&&g.m(e,null),w(e,r),d&&d.m(e,null),w(e,o),k&&k.m(e,null),w(e,s),O&&O.m(e,null),w(e,u),C&&C.m(e,null),w(e,i),P&&P.m(e,null),w(e,a),D&&D.m(e,null)},p(I,N){I[3].Desc_?f?f.p(I,N):(f=Lr(I),f.c(),f.m(e,n)):f&&(f.d(1),f=null),I[3].Greenway?c?c.p(I,N):(c=Ar(I),c.c(),c.m(e,t)):c&&(c.d(1),c=null),I[3].RouteType?g?g.p(I,N):(g=Ir(I),g.c(),g.m(e,r)):g&&(g.d(1),g=null),I[3].RouteNo?d?d.p(I,N):(d=Pr(I),d.c(),d.m(e,o)):d&&(d.d(1),d=null),I[3].RouteCat?k?k.p(I,N):(k=Mr(I),k.c(),k.m(e,s)):k&&(k.d(1),k=null),I[3].OpenStatus?O?O.p(I,N):(O=Nr(I),O.c(),O.m(e,u)):O&&(O.d(1),O=null),I[3].Surface?C?C.p(I,N):(C=Fr(I),C.c(),C.m(e,i)):C&&(C.d(1),C=null),I[3].Quality?P?P.p(I,N):(P=Er(I),P.c(),P.m(e,a)):P&&(P.d(1),P=null),I[3].RoadClass?D?D.p(I,N):(D=Dr(I),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(I){I&&p(e),f&&f.d(),c&&c.d(),g&&g.d(),d&&d.d(),k&&k.d(),O&&O.d(),C&&C.d(),P&&P.d(),D&&D.d()}}}function Du(l){let e,n;return e=new fe({props:{$$slots:{default:[Eu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ju(l){let e,n;const t=[H(At),{sourceLayer:At},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":4,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Du]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&se(H(At)),s&0&&{sourceLayer:At},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ru(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Fu],default:[Pu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${At}.pmtiles`,$$slots:{default:[ju]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let At="national_cycle_network";function Bu(l,e,n){let t=Z.national_cycle_network,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class zu extends Q{constructor(e){super(),J(this,e,Bu,Ru,Y,{})}}function Hu(l){let e;return{c(){e=y("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qu(l){let e;return{c(){e=y(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gu(l){let e,n,t,r,o,s,u,i,a;return u=new K({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[qu]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road. (You won't be able to distinguish left and right
        though; use the OS Road basemap instead.)`,n=L(),t=T("p"),t.textContent="Data valid as of 1 January, 2024",r=L(),o=T("p"),s=y(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),i=y(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),w(o,s),b(u,o,null),w(o,i),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),u.$set(g)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){_(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),v(u)}}}function Uu(l){let e,n,t;return n=new me({props:{$$slots:{default:[Gu]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function jr(l){let e,n;return e=new Re({props:{colorScale:l[1],limits:l[2]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wu(l){let e,n,t,r=l[4].side+"",o,s,u,i,a,f=l[4].average+"",c,g,d,k,O,C,P=l[4].minimum+"",D,I;return{c(){e=T("p"),n=y("Side of the road: "),t=T("b"),o=y(r),s=L(),u=T("p"),i=y("Average width: "),a=T("b"),c=y(f),g=y(`
        meters`),d=L(),k=T("p"),O=y("Minimum width: "),C=T("b"),D=y(P),I=y(`
        meters`)},m(N,A){$(N,e,A),w(e,n),w(e,t),w(t,o),$(N,s,A),$(N,u,A),w(u,i),w(u,a),w(a,c),w(u,g),$(N,d,A),$(N,k,A),w(k,O),w(k,C),w(C,D),w(k,I)},p(N,A){A&16&&r!==(r=N[4].side+"")&&z(o,r),A&16&&f!==(f=N[4].average+"")&&z(c,f),A&16&&P!==(P=N[4].minimum+"")&&z(D,P)},d(N){N&&(p(e),p(s),p(u),p(d),p(k))}}}function Vu(l){let e,n;return e=new fe({props:{$$slots:{default:[Wu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xu(l){let e,n;const t=[H(It),{sourceLayer:It},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get","average"],l[2],l[1]),"line-width":Ne,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Vu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&se(H(It)),s&0&&{sourceLayer:It},t[2],t[3],s&6&&{paint:{"line-color":we(["get","average"],o[2],o[1]),"line-width":Ne,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Yu(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[Uu],default:[Hu]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&jr(l);return o=new ve({props:{url:`pmtiles://${on()}/v1/${It}.pmtiles`,$$slots:{default:[Xu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=jr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let It="pavement_widths";function Qu(l,e,n){let t=Z.sequential_low_to_high,r=[0,2,4,6,8,13],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Ju extends Q{constructor(e){super(),J(this,e,Qu,Yu,Y,{})}}function Ku(l){let e;return{c(){e=y("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zu(l){let e;return{c(){e=y("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xu(l){let e;return{c(){e=y("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ec(l){let e,n,t,r,o,s,u,i,a,f,c;return u=new K({props:{href:"https://www.pct.bike",$$slots:{default:[Zu]},$$scope:{ctx:l}}}),a=new K({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[xu]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=L(),t=T("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,r=L(),o=T("p"),s=y("See "),h(u.$$.fragment),i=y(" and "),h(a.$$.fragment),f=y(" for details on methodology and data sources.")},m(g,d){$(g,e,d),$(g,n,d),$(g,t,d),$(g,r,d),$(g,o,d),w(o,s),b(u,o,null),w(o,i),b(a,o,null),w(o,f),c=!0},p(g,d){const k={};d&1024&&(k.$$scope={dirty:d,ctx:g}),u.$set(k);const O={};d&1024&&(O.$$scope={dirty:d,ctx:g}),a.$set(O)},i(g){c||(m(u.$$.fragment,g),m(a.$$.fragment,g),c=!0)},o(g){_(u.$$.fragment,g),_(a.$$.fragment,g),c=!1},d(g){g&&(p(e),p(n),p(t),p(r),p(o)),v(u),v(a)}}}function tc(l){let e,n,t;return n=new me({props:{$$slots:{default:[ec]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Rr(l){let e,n,t,r,o,s,u,i;e=new Re({props:{colorScale:l[3],limits:l[4]}});function a(d){l[7](d)}let f={legend:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};l[0]!==void 0&&(f.value=l[0]),t=new hl({props:f}),U.push(()=>W(t,"value",a));function c(d){l[8](d)}let g={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return l[1]!==void 0&&(g.value=l[1]),s=new _t({props:g}),U.push(()=>W(s,"value",c)),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),o=L(),h(s.$$.fragment)},m(d,k){b(e,d,k),$(d,n,k),b(t,d,k),$(d,o,k),b(s,d,k),i=!0},p(d,k){const O={};!r&&k&1&&(r=!0,O.value=d[0],V(()=>r=!1)),t.$set(O);const C={};!u&&k&2&&(u=!0,C.value=d[1],V(()=>u=!1)),s.$set(C)},i(d){i||(m(e.$$.fragment,d),m(t.$$.fragment,d),m(s.$$.fragment,d),i=!0)},o(d){_(e.$$.fragment,d),_(t.$$.fragment,d),_(s.$$.fragment,d),i=!1},d(d){d&&(p(n),p(o)),v(e,d),v(t,d),v(s,d)}}}function nc(l){let e,n=l[5](l[9])+"",t;return{c(){e=new Ht(!1),t=Fe(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function rc(l){let e,n;return e=new fe({props:{$$slots:{default:[nc,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function lc(l){let e,n;const t=[H(nt),{sourceLayer:nt},{paint:{"line-color":we(["get",l[1]],l[4],l[3]),"line-width":Ne,"line-opacity":x(1,.5)}},{layout:{visibility:l[2]&&l[0]==nt?"visible":"none"}}];let r={$$slots:{default:[rc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&31?te(t,[s&0&&se(H(nt)),s&0&&{sourceLayer:nt},s&26&&{paint:{"line-color":we(["get",o[1]],o[4],o[3]),"line-width":Ne,"line-opacity":x(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==nt?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function oc(l){let e,n=l[5](l[9])+"",t;return{c(){e=new Ht(!1),t=Fe(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function sc(l){let e,n;return e=new fe({props:{$$slots:{default:[oc,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ic(l){let e,n;const t=[H(ut),{sourceLayer:ut},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get",l[1]],l[4],l[3]),"line-width":Ne,"line-opacity":x(1,.5)}},{layout:{visibility:l[2]&&l[0]==ut?"visible":"none"}}];let r={$$slots:{default:[sc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&31?te(t,[s&0&&se(H(ut)),s&0&&{sourceLayer:ut},t[2],t[3],s&26&&{paint:{"line-color":we(["get",o[1]],o[4],o[3]),"line-width":Ne,"line-opacity":x(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==ut?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ac(l){let e,n,t,r,o,s,u,i;function a(g){l[6](g)}let f={$$slots:{right:[tc],default:[Ku]},$$scope:{ctx:l}};l[2]!==void 0&&(f.checked=l[2]),e=new le({props:f}),U.push(()=>W(e,"checked",a));let c=l[2]&&Rr(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${nt}.pmtiles`,$$slots:{default:[lc]},$$scope:{ctx:l}}}),u=new ve({props:{url:`pmtiles://${he()}/v1/${ut}.pmtiles`,$$slots:{default:[ic]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),c&&c.c(),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment)},m(g,d){b(e,g,d),$(g,t,d),c&&c.m(g,d),$(g,r,d),b(o,g,d),$(g,s,d),b(u,g,d),i=!0},p(g,[d]){const k={};d&1024&&(k.$$scope={dirty:d,ctx:g}),!n&&d&4&&(n=!0,k.checked=g[2],V(()=>n=!1)),e.$set(k),g[2]?c?(c.p(g,d),d&4&&m(c,1)):(c=Rr(g),c.c(),m(c,1),c.m(r.parentNode,r)):c&&($e(),_(c,1,1,()=>{c=null}),pe());const O={};d&1031&&(O.$$scope={dirty:d,ctx:g}),o.$set(O);const C={};d&1031&&(C.$$scope={dirty:d,ctx:g}),u.$set(C)},i(g){i||(m(e.$$.fragment,g),m(c),m(o.$$.fragment,g),m(u.$$.fragment,g),i=!0)},o(g){_(e.$$.fragment,g),_(c),_(o.$$.fragment,g),_(u.$$.fragment,g),i=!1},d(g){g&&(p(t),p(r),p(s)),v(e,g),c&&c.d(g),v(o,g),v(u,g)}}}let nt="pct_commute",ut="pct_school";function fc(l,e,n){let t=Z.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],o=nt,s="baseline",u=!1;function i(g){let d=g.baseline,k=g.gov_target,O=g.go_dutch,C=`<h2>Trip purpose: ${o==nt?"commuting":"school"}</h2>`;if(C+=`<p>Baseline (2011): <b>${d.toLocaleString()}</b></p>`,d==0)C+=`<p>Government target (2025): <b>${k.toLocaleString()}</b></p>`,C+=`<p>Go Dutch: <b>${O.toLocaleString()}</b></p>`;else{let P=(k/d).toFixed(1),D=(O/d).toFixed(1);C+=`<p>Government target (2025): ${k.toLocaleString()} (<b>${P}x</b> of baseline)</p>`,C+=`<p>Go Dutch: ${O.toLocaleString()} (<b>${D}x</b> of baseline)</p>`}return C}function a(g){u=g,n(2,u)}function f(g){o=g,n(0,o)}function c(g){s=g,n(1,s)}return[o,s,u,t,r,i,a,f,c]}class uc extends Q{constructor(e){super(),J(this,e,fc,ac,Y,{})}}function cc(l){let e;return{c(){e=y("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $c(l){let e;return{c(){e=y("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pc(l){let e;return{c(){e=y(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function mc(l){let e,n,t,r,o,s,u,i,a,f,c,g;return t=new K({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[$c]},$$scope:{ctx:l}}}),f=new K({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[pc]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=y("The average speed data is collected over a six-month period by "),h(t.$$.fragment),r=y(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=L(),s=T("p"),s.textContent="Data valid as of 1 September, 2023",u=L(),i=T("p"),a=y(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=y(".")},m(d,k){$(d,e,k),w(e,n),b(t,e,null),w(e,r),$(d,o,k),$(d,s,k),$(d,u,k),$(d,i,k),w(i,a),b(f,i,null),w(i,c),g=!0},p(d,k){const O={};k&256&&(O.$$scope={dirty:k,ctx:d}),t.$set(O);const C={};k&256&&(C.$$scope={dirty:k,ctx:d}),f.$set(C)},i(d){g||(m(t.$$.fragment,d),m(f.$$.fragment,d),g=!0)},o(d){_(t.$$.fragment,d),_(f.$$.fragment,d),g=!1},d(d){d&&(p(e),p(o),p(s),p(u),p(i)),v(t),v(f)}}}function _c(l){let e,n,t;return n=new me({props:{$$slots:{default:[mc]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Br(l){let e,n,t,r,o;e=new Re({props:{colorScale:l[2],limits:l[3]}});function s(i){l[6](i)}let u={legend:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return l[0]!==void 0&&(u.value=l[0]),t=new hl({props:u}),U.push(()=>W(t,"value",s)),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),o=!0},p(i,a){const f={};!r&&a&1&&(r=!0,f.value=i[0],V(()=>r=!1)),t.$set(f)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),o=!1},d(i){i&&p(n),v(e,i),v(t,i)}}}function gc(l){let e,n,t=l[7].indicative_mph+"",r,o,s,u,i,a=l[7].highest_mph+"",f,c,g=l[4][l[7].highest_description]+"",d,k;return{c(){e=T("p"),n=y("Posted speed limit: "),r=y(t),o=y(" mph"),s=L(),u=T("p"),i=y("Highest average speed: "),f=y(a),c=y(" mph (during "),d=y(g),k=y(")")},m(O,C){$(O,e,C),w(e,n),w(e,r),w(e,o),$(O,s,C),$(O,u,C),w(u,i),w(u,f),w(u,c),w(u,d),w(u,k)},p(O,C){C&128&&t!==(t=O[7].indicative_mph+"")&&z(r,t),C&128&&a!==(a=O[7].highest_mph+"")&&z(f,a),C&128&&g!==(g=O[4][O[7].highest_description]+"")&&z(d,g)},d(O){O&&(p(e),p(s),p(u))}}}function dc(l){let e,n;return e=new fe({props:{$$slots:{default:[gc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&384&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function hc(l){let e,n;const t=[H(Pt),{sourceLayer:Pt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get",l[0]],l[3],l[2]),"line-width":Ne,"line-opacity":x(1,.5)}},{layout:{visibility:l[1]?"visible":"none"}}];let r={$$slots:{default:[dc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&15?te(t,[s&0&&se(H(Pt)),s&0&&{sourceLayer:Pt},t[2],t[3],s&13&&{paint:{"line-color":we(["get",o[0]],o[3],o[2]),"line-width":Ne,"line-opacity":x(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function bc(l){let e,n,t,r,o,s;function u(f){l[5](f)}let i={$$slots:{right:[_c],default:[cc]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[1]&&Br(l);return o=new ve({props:{url:`pmtiles://${on()}/v1/${Pt}.pmtiles`,$$slots:{default:[hc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&256&&(g.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,g.checked=f[1],V(()=>n=!1)),e.$set(g),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=Br(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&259&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Pt="road_speeds";function vc(l,e,n){let t=Z.sequential_low_to_high,r=[0,20,30,40,50,90],o="indicative_mph",s=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(f){s=f,n(1,s)}function a(f){o=f,n(0,o)}return[o,s,t,r,u,i,a]}class wc extends Q{constructor(e){super(),J(this,e,vc,bc,Y,{})}}function kc(l){let e;return{c(){e=y("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function yc(l){let e;return{c(){e=y(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Sc(l){let e,n,t,r,o,s,u,i,a;return u=new K({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[yc]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=L(),t=T("p"),t.textContent="Data valid as of 1 September, 2023",r=L(),o=T("p"),s=y(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),i=y(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),w(o,s),b(u,o,null),w(o,i),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),u.$set(g)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){_(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),v(u)}}}function Cc(l){let e,n,t;return n=new me({props:{$$slots:{default:[Sc]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function zr(l){let e,n;return e=new Re({props:{colorScale:l[1],limits:l[2]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Tc(l){let e,n,t,r=l[4].average+"",o,s,u,i,a,f,c=l[4].minimum+"",g,d;return{c(){e=T("p"),n=y("Average width: "),t=T("b"),o=y(r),s=y(`
        meters`),u=L(),i=T("p"),a=y("Minimum width: "),f=T("b"),g=y(c),d=y(`
        meters`)},m(k,O){$(k,e,O),w(e,n),w(e,t),w(t,o),w(e,s),$(k,u,O),$(k,i,O),w(i,a),w(i,f),w(f,g),w(i,d)},p(k,O){O&16&&r!==(r=k[4].average+"")&&z(o,r),O&16&&c!==(c=k[4].minimum+"")&&z(g,c)},d(k){k&&(p(e),p(u),p(i))}}}function Oc(l){let e,n;return e=new fe({props:{$$slots:{default:[Tc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Lc(l){let e,n;const t=[H(Mt),{sourceLayer:Mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get","average"],l[2],l[1]),"line-width":Ne,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Oc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&se(H(Mt)),s&0&&{sourceLayer:Mt},t[2],t[3],s&6&&{paint:{"line-color":we(["get","average"],o[2],o[1]),"line-width":Ne,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ac(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[Cc],default:[kc]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&zr(l);return o=new ve({props:{url:`pmtiles://${on()}/v1/${Mt}.pmtiles`,$$slots:{default:[Lc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=zr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Mt="road_widths";function Ic(l,e,n){let t=Z.sequential_low_to_high,r=[0,5,10,15,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Pc extends Q{constructor(e){super(),J(this,e,Ic,Ac,Y,{})}}function Mc(l){let e,n,t;return e=new Oe({props:{color:Z.trams}}),{c(){h(e.$$.fragment),n=y(`
  Trams`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Nc(l){let e,n,t,r;return t=new Ye({}),{c(){e=T("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,n=L(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function Fc(l){let e,n,t;return n=new me({props:{$$slots:{default:[Nc]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&4&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Ec(l){let e,n;const t=[H(Nt),{sourceLayer:Nt},{paint:{"line-color":Z.trams,"line-width":5,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),e.$on("click",jc),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&se(H(Nt)),s&0&&{sourceLayer:Nt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Dc(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[Fc],default:[Mc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${Nt}.pmtiles`,$$slots:{default:[Ec]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&4&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&5&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Nt="trams";function jc(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function Rc(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class Bc extends Q{constructor(e){super(),J(this,e,Rc,Dc,Y,{})}}function zc(l){let e;return{c(){e=y("Bus stops")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hc(l){let e;return{c(){e=y(`Bus Open Data Service
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qc(l){let e,n,t,r,o,s,u,i,a;return t=new K({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[Hc]},$$scope:{ctx:l}}}),i=new Ae({}),{c(){e=T("p"),n=y("Data from the "),h(t.$$.fragment),r=y(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),o=L(),s=T("p"),s.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),$(f,o,c),$(f,s,c),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),t.$set(g)},i(f){a||(m(t.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(o),p(s),p(u)),v(t),v(i,f)}}}function Gc(l){let e,n,t;return n=new me({props:{$$slots:{default:[qc]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Hr(l){let e,n,t,r;return t=new Re({props:{colorScale:l[1],limits:l[2]}}),{c(){e=T("p"),e.textContent="Peak hourly frequency:",n=L(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function Uc(l){let e,n,t,r=l[4].stop_name+"",o,s,u,i,a,f=l[4].peak+"",c,g,d,k,O,C=l[4].peak_description+"",P,D,I,N,A,M=l[4].total+"",E,S,F=l[4].total_description+"",G,R;return{c(){e=T("p"),n=y("Stop name: "),t=T("b"),o=y(r),s=L(),u=T("p"),i=y("Peak: "),a=T("b"),c=y(f),g=y(`
        buses during the busiest hour of any day`),d=L(),k=T("p"),O=y("The peak hour is "),P=y(C),D=L(),I=T("p"),N=y("Total buses per day: "),A=T("b"),E=y(M),S=y(`
        (for `),G=y(F),R=y(", the busiest day of the week)")},m(j,B){$(j,e,B),w(e,n),w(e,t),w(t,o),$(j,s,B),$(j,u,B),w(u,i),w(u,a),w(a,c),w(u,g),$(j,d,B),$(j,k,B),w(k,O),w(k,P),$(j,D,B),$(j,I,B),w(I,N),w(I,A),w(A,E),w(I,S),w(I,G),w(I,R)},p(j,B){B&16&&r!==(r=j[4].stop_name+"")&&z(o,r),B&16&&f!==(f=j[4].peak+"")&&z(c,f),B&16&&C!==(C=j[4].peak_description+"")&&z(P,C),B&16&&M!==(M=j[4].total+"")&&z(E,M),B&16&&F!==(F=j[4].total_description+"")&&z(G,F)},d(j){j&&(p(e),p(s),p(u),p(d),p(k),p(D),p(I))}}}function Wc(l){let e,n;return e=new fe({props:{$$slots:{default:[Uc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Vc(l){let e,n;const t=[H(Ft),{sourceLayer:Ft},{paint:{"circle-color":we(["get","peak"],l[2],l[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[Wc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ft({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&se(H(Ft)),s&0&&{sourceLayer:Ft},s&6&&{paint:{"circle-color":we(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Xc(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[Gc],default:[zc]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Hr(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${Ft}.pmtiles`,$$slots:{default:[Vc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Hr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Ft="bus_stops";function Yc(l,e,n){let t=Z.sequential_low_to_high,r=[0,3,10,20,30,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Qc extends Q{constructor(e){super(),J(this,e,Yc,Xc,Y,{})}}function Jc(l){let e,n,t;return{c(){e=T("input"),q(e,"class","govuk-file-upload"),q(e,"id","load-criticals"),q(e,"type","file")},m(r,o){$(r,e,o),l[7](e),n||(t=at(e,"change",l[5]),n=!0)},p:ne,d(r){r&&p(e),l[7](null),n=!1,t()}}}function qr(l){let e,n;return e=new Xe({props:{small:!0,$$slots:{default:[Zc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&2054&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Kc(l){let e,n,t=l[2].toLocaleString()+"",r,o,s;return e=new Oe({props:{color:Et}}),{c(){h(e.$$.fragment),n=y(`
        Show `),r=y(t),o=y(" issues")},m(u,i){b(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p(u,i){(!s||i&4)&&t!==(t=u[2].toLocaleString()+"")&&z(r,t)},i(u){s||(m(e.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),v(e,u)}}}function Zc(l){let e,n,t;function r(s){l[8](s)}let o={$$slots:{default:[Kc]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),U.push(()=>W(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){const i={};u&2052&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function xc(l){let e,n,t,r,o,s;e=new _n({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[Jc]},$$scope:{ctx:l}}}),t=new bl({props:{errorMessage:l[3]}});let u=l[2]>0&&qr(l);return{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),u&&u.c(),o=Fe()},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),$(i,r,a),u&&u.m(i,a),$(i,o,a),s=!0},p(i,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?u?(u.p(i,a),a&4&&m(u,1)):(u=qr(i),u.c(),m(u,1),u.m(o.parentNode,o)):u&&($e(),_(u,1,1,()=>{u=null}),pe())},i(i){s||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(u),s=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),_(u),s=!1},d(i){i&&(p(n),p(r),p(o)),v(e,i),v(t,i),u&&u.d(i)}}}function e$(l){let e,n,t=l[10].critical_type+"",r,o,s,u,i,a=l[10].location_description+"",f,c,g,d,k,O=l[10].notes+"",C,P,D,I,N,A,M,E=l[10].id+"",S,F,G,R,j,B=(l[10].inspector??"???")+"",X,re,oe,ce=l[10].submission_time+"",Ie,Te,ae,Le,ue,_e=l[10].scheme_reference+"",ge,Be,Ee,Ce=l[10].current_design_stage+"",Qe;return{c(){e=T("div"),n=T("h2"),r=y(t),o=L(),s=T("p"),u=T("u"),u.textContent="Location",i=y(`
          : `),f=y(a),c=L(),g=T("p"),d=T("u"),d.textContent="Notes",k=y(`
          : `),C=y(O),P=L(),D=T("hr"),I=L(),N=T("p"),A=y("Critical issue ID: "),M=T("b"),S=y(E),F=L(),G=T("p"),R=y("Submitted by "),j=T("b"),X=y(B),re=y(`
          at
          `),oe=T("b"),Ie=y(ce),Te=L(),ae=T("p"),Le=y("For scheme "),ue=T("b"),ge=y(_e),Be=y(`
          in stage
          `),Ee=T("b"),Qe=y(Ce),Se(e,"max-width","30vw")},m(ie,be){$(ie,e,be),w(e,n),w(n,r),w(e,o),w(e,s),w(s,u),w(s,i),w(s,f),w(e,c),w(e,g),w(g,d),w(g,k),w(g,C),w(e,P),w(e,D),w(e,I),w(e,N),w(N,A),w(N,M),w(M,S),w(e,F),w(e,G),w(G,R),w(G,j),w(j,X),w(G,re),w(G,oe),w(oe,Ie),w(e,Te),w(e,ae),w(ae,Le),w(ae,ue),w(ue,ge),w(ae,Be),w(ae,Ee),w(Ee,Qe)},p(ie,be){be&1024&&t!==(t=ie[10].critical_type+"")&&z(r,t),be&1024&&a!==(a=ie[10].location_description+"")&&z(f,a),be&1024&&O!==(O=ie[10].notes+"")&&z(C,O),be&1024&&E!==(E=ie[10].id+"")&&z(S,E),be&1024&&B!==(B=(ie[10].inspector??"???")+"")&&z(X,B),be&1024&&ce!==(ce=ie[10].submission_time+"")&&z(Ie,ce),be&1024&&_e!==(_e=ie[10].scheme_reference+"")&&z(ge,_e),be&1024&&Ce!==(Ce=ie[10].current_design_stage+"")&&z(Qe,Ce)},d(ie){ie&&p(e)}}}function t$(l){let e,n;return e=new fe({props:{$$slots:{default:[e$,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&3072&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function n$(l){let e,n,t,r,o,s;const u=[H(`${ot}-clusters`),{applyToClusters:!0},{paint:{"circle-color":Et,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:l[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let d=0;d<u.length;d+=1)i=ee(i,u[d]);e=new ft({props:i}),e.$on("click",l[6]);const a=[H(`${ot}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:l[1]?"visible":"none"}}];let f={};for(let d=0;d<a.length;d+=1)f=ee(f,a[d]);t=new sn({props:f});const c=[H(`${ot}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Et,"circle-opacity":x(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:l[1]?"visible":"none"}}];let g={$$slots:{default:[t$]},$$scope:{ctx:l}};for(let d=0;d<c.length;d+=1)g=ee(g,c[d]);return o=new ft({props:g}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment)},m(d,k){b(e,d,k),$(d,n,k),b(t,d,k),$(d,r,k),b(o,d,k),s=!0},p(d,k){const O=k&2?te(u,[k&0&&se(H(`${ot}-clusters`)),u[1],k&0&&{paint:{"circle-color":Et,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},k&2&&{layout:{visibility:d[1]?"visible":"none"}},u[4]]):{};e.$set(O);const C=k&2?te(a,[k&0&&se(H(`${ot}-counts`)),a[1],k&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:d[1]?"visible":"none"}}]):{};t.$set(C);const P=k&2?te(c,[k&0&&se(H(`${ot}-points`)),c[1],c[2],c[3],k&0&&{paint:{"circle-color":Et,"circle-opacity":x(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},k&2&&{layout:{visibility:d[1]?"visible":"none"}}]):{};k&2048&&(P.$$scope={dirty:k,ctx:d}),o.$set(P)},i(d){s||(m(e.$$.fragment,d),m(t.$$.fragment,d),m(o.$$.fragment,d),s=!0)},o(d){_(e.$$.fragment,d),_(t.$$.fragment,d),_(o.$$.fragment,d),s=!1},d(d){d&&(p(n),p(r)),v(e,d),v(t,d),v(o,d)}}}function r$(l){let e,n,t,r;return e=new De({props:{label:"Critical Issues",$$slots:{default:[xc]},$$scope:{ctx:l}}}),t=new vt({props:{id:ot,data:l[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[n$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const u={};s&2063&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}let ot="criticals",Et="red";function l$(l,e,n){let t;ke(l,On,d=>n(9,t=d));let r,o=!0,s=0,u="",i=ql();async function a(d){try{n(4,i=await Si(r.files[0])),n(2,s=i.features.length),n(3,u="")}catch(k){n(3,u=`The file you loaded is broken: ${k}`)}}async function f(d){let k=await t.getSource(ot).getClusterExpansionZoom(d.detail.features[0].properties.cluster_id);t.easeTo({center:d.detail.features[0].geometry.coordinates,zoom:k})}function c(d){U[d?"unshift":"push"](()=>{r=d,n(0,r)})}function g(d){o=d,n(1,o)}return[r,o,s,u,i,a,f,c,g]}class o$ extends Q{constructor(e){super(),J(this,e,l$,r$,Y,{})}}function s$(l){let e;return{c(){e=y("Crossings")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function i$(l){let e;return{c(){e=y("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function a$(l){let e,n,t,r,o,s,u;return t=new K({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[i$]},$$scope:{ctx:l}}}),s=new Ye({}),{c(){e=T("p"),n=y("This shows "),h(t.$$.fragment),r=y(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function f$(l){let e,n,t;return n=new me({props:{$$slots:{default:[a$]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Gr(l){let e,n;return e=new An({props:{rows:l[1]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function u$(l){let e,n=Ur(l[3])+"",t;return{c(){e=T("p"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=Ur(r[3])+"")&&z(t,n)},d(r){r&&p(e)}}}function c$(l){let e,n;return e=new fe({props:{$$slots:{default:[u$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $$(l){let e,n;const t=[H(Dt),{sourceLayer:Dt},{paint:{"circle-color":bt(["get","crossing"],{traffic_signals:Z.signalized_crossing},Z.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[c$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ft({props:r}),e.$on("click",m$),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&se(H(Dt)),s&0&&{sourceLayer:Dt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function p$(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[f$],default:[s$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Gr(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${Dt}.pmtiles`,$$slots:{default:[$$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Gr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&17&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Dt="crossings";function Ur(l){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[l.crossing]??`Unknown crossing type (${l.crossing})`}function m$(l){window.open(`http://openstreetmap.org/node/${l.detail.features[0].properties.osm_id}`,"_blank")}function _$(l,e,n){let t=!1,r=[["Signalized",Z.signalized_crossing],["Other",Z.other_crossing]];function o(s){t=s,n(0,t)}return[t,r,o]}class g$ extends Q{constructor(e){super(),J(this,e,_$,p$,Y,{})}}function d$(l){let e;return{c(){e=y("Gradients")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function h$(l){let e;return{c(){e=y("OS Terrain 50")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function b$(l){let e,n,t,r,o,s,u,i,a,f,c,g,d;return u=new K({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[h$]},$$scope:{ctx:l}}}),f=new Ae({}),g=new Ye({}),{c(){e=T("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
        uphill. You have to zoom in to see all roads.`,n=L(),t=T("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
        on the underlying Digital Elevation Model used.`,r=L(),o=T("p"),s=y("This layer is built from "),h(u.$$.fragment),i=y(` and roads from OpenStreetMap. The data is valid as of 18
        February 2024.`),a=L(),h(f.$$.fragment),c=L(),h(g.$$.fragment)},m(k,O){$(k,e,O),$(k,n,O),$(k,t,O),$(k,r,O),$(k,o,O),w(o,s),b(u,o,null),w(o,i),$(k,a,O),b(f,k,O),$(k,c,O),b(g,k,O),d=!0},p(k,O){const C={};O&32&&(C.$$scope={dirty:O,ctx:k}),u.$set(C)},i(k){d||(m(u.$$.fragment,k),m(f.$$.fragment,k),m(g.$$.fragment,k),d=!0)},o(k){_(u.$$.fragment,k),_(f.$$.fragment,k),_(g.$$.fragment,k),d=!1},d(k){k&&(p(e),p(n),p(t),p(r),p(o),p(a),p(c)),v(u),v(f,k),v(g,k)}}}function v$(l){let e,n,t;return n=new me({props:{$$slots:{default:[b$]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Wr(l){let e,n;return e=new Re({props:{colorScale:l[1],limits:l[2]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function w$(l){let e,n,t,r=Math.abs(l[4].gradient)/100+"",o,s;return{c(){e=T("p"),n=y("Gradient: "),t=T("b"),o=y(r),s=y(`
        %`)},m(u,i){$(u,e,i),w(e,n),w(e,t),w(t,o),w(e,s)},p(u,i){i&16&&r!==(r=Math.abs(u[4].gradient)/100+"")&&z(o,r)},d(u){u&&p(e)}}}function k$(l){let e,n;return e=new fe({props:{$$slots:{default:[w$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function y$(l){let e,n,t,r;const o=[H(tt),{sourceLayer:tt},{manageHoverState:!0},{paint:{"line-color":we(["/",["abs",["get","gradient"]],100],l[2],l[1]),"line-width":Ne,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let s={$$slots:{default:[k$]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new ye({props:s});const u=[H(tt+"_arrows"),{sourceLayer:tt},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new sn({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&7?te(o,[f&0&&se(H(tt)),f&0&&{sourceLayer:tt},o[2],f&6&&{paint:{"line-color":we(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":Ne,"line-opacity":x(1,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&1?te(u,[f&0&&se(H(tt+"_arrows")),f&0&&{sourceLayer:tt},u[2],u[3],f&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function S$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[v$],default:[d$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Wr(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${tt}.pmtiles`,$$slots:{default:[y$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Wr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let tt="gradient";function C$(l,e,n){let t=Z.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class T$ extends Q{constructor(e){super(),J(this,e,C$,S$,Y,{})}}function O$(l){let e,n,t;return{c(){e=T("img"),t=y(`
  Cycle parking`),nn(e.src,n=Gl)||q(e,"src",n),q(e,"alt","a logo representing cycle parking")},m(r,o){$(r,e,o),$(r,t,o)},p:ne,d(r){r&&(p(e),p(t))}}}function L$(l){let e;return{c(){e=y("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function A$(l){let e,n,t,r,o,s,u,i,a;return t=new K({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[L$]},$$scope:{ctx:l}}}),i=new Ye({}),{c(){e=T("p"),n=y("Cycle parking, according to "),h(t.$$.fragment),r=y(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=L(),s=T("p"),s.innerHTML='Icon from <a href="https://github.com/gravitystorm/openstreetmap-carto">OpenStreetMap Carto</a>',u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),$(f,o,c),$(f,s,c),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&8&&(g.$$scope={dirty:c,ctx:f}),t.$set(g)},i(f){a||(m(t.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(o),p(s),p(u)),v(t),v(i,f)}}}function I$(l){let e,n,t;return n=new me({props:{$$slots:{default:[A$]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function P$(l){let e,n,t,r=(l[2].capacity??"unknown")+"",o;return{c(){e=T("p"),n=y("Capacity: "),t=T("b"),o=y(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&4&&r!==(r=(s[2].capacity??"unknown")+"")&&z(o,r)},d(s){s&&p(e)}}}function M$(l){let e,n;return e=new fe({props:{$$slots:{default:[P$,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function N$(l){let e,n;const t=[H(jt),{sourceLayer:jt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[M$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new sn({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&se(H(jt)),s&0&&{sourceLayer:jt},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function F$(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[I$],default:[O$]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${jt}.pmtiles`,$$slots:{default:[N$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let jt="cycle_parking";function E$(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class D$ extends Q{constructor(e){super(),J(this,e,E$,F$,Y,{})}}function j$(l){let e;return{c(){e=y("Education")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function R$(l){let e,n,t,r;return t=new Ye({}),{c(){e=T("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,n=L(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function B$(l){let e,n,t;return n=new me({props:{$$slots:{default:[R$]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Vr(l){let e,n,t;return n=new Xe({props:{$$slots:{default:[G$]},$$scope:{ctx:l}}}),{c(){e=T("div"),h(n.$$.fragment),Se(e,"border","1px solid black"),Se(e,"padding","8px")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&130&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function z$(l){let e,n,t;return e=new Oe({props:{color:Z.education.schools}}),{c(){h(e.$$.fragment),n=y(`
        Schools`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function H$(l){let e,n,t;return e=new Oe({props:{color:Z.education.colleges}}),{c(){h(e.$$.fragment),n=y(`
        Colleges`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function q$(l){let e,n,t;return e=new Oe({props:{color:Z.education.universities}}),{c(){h(e.$$.fragment),n=y(`
        Universities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function G$(l){let e,n,t,r,o,s,u,i,a;function f(C){l[3](C)}let c={$$slots:{default:[z$]},$$scope:{ctx:l}};l[1].school!==void 0&&(c.checked=l[1].school),e=new le({props:c}),U.push(()=>W(e,"checked",f));function g(C){l[4](C)}let d={$$slots:{default:[H$]},$$scope:{ctx:l}};l[1].college!==void 0&&(d.checked=l[1].college),r=new le({props:d}),U.push(()=>W(r,"checked",g));function k(C){l[5](C)}let O={$$slots:{default:[q$]},$$scope:{ctx:l}};return l[1].university!==void 0&&(O.checked=l[1].university),u=new le({props:O}),U.push(()=>W(u,"checked",k)),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment),s=L(),h(u.$$.fragment)},m(C,P){b(e,C,P),$(C,t,P),b(r,C,P),$(C,s,P),b(u,C,P),a=!0},p(C,P){const D={};P&128&&(D.$$scope={dirty:P,ctx:C}),!n&&P&2&&(n=!0,D.checked=C[1].school,V(()=>n=!1)),e.$set(D);const I={};P&128&&(I.$$scope={dirty:P,ctx:C}),!o&&P&2&&(o=!0,I.checked=C[1].college,V(()=>o=!1)),r.$set(I);const N={};P&128&&(N.$$scope={dirty:P,ctx:C}),!i&&P&2&&(i=!0,N.checked=C[1].university,V(()=>i=!1)),u.$set(N)},i(C){a||(m(e.$$.fragment,C),m(r.$$.fragment,C),m(u.$$.fragment,C),a=!0)},o(C){_(e.$$.fragment,C),_(r.$$.fragment,C),_(u.$$.fragment,C),a=!1},d(C){C&&(p(t),p(s)),v(e,C),v(r,C),v(u,C)}}}function U$(l){let e,n=(l[6].name??"Unnamed institution")+"",t;return{c(){e=T("p"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=(r[6].name??"Unnamed institution")+"")&&z(t,n)},d(r){r&&p(e)}}}function W$(l){let e,n;return e=new fe({props:{$$slots:{default:[U$,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&192&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function V$(l){let e,n;const t=[H(Rt),{sourceLayer:Rt},{paint:{"fill-color":bt(["get","type"],{school:Z.education.schools,college:Z.education.colleges,university:Z.education.universities},"grey"),"fill-opacity":x(.7,1)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:Xr(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[W$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Ge({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&se(H(Rt)),s&0&&{sourceLayer:Rt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:Xr(o[1])},t[5],t[6]]):{};s&128&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function X$(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[B$],default:[j$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Vr(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${Rt}.pmtiles`,$$slots:{default:[V$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&128&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Vr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&131&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Rt="education";function Xr(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","type"],["literal",e]]}function Y$(l,e,n){let t=!1;const r={school:!0,college:!0,university:!0};function o(a){t=a,n(0,t)}function s(a){l.$$.not_equal(r.school,a)&&(r.school=a,n(1,r))}function u(a){l.$$.not_equal(r.college,a)&&(r.college=a,n(1,r))}function i(a){l.$$.not_equal(r.university,a)&&(r.university=a,n(1,r))}return[t,r,o,s,u,i]}class Q$ extends Q{constructor(e){super(),J(this,e,Y$,X$,Y,{})}}function J$(l){let e,n,t,r;return e=new Oe({props:{color:l[4]}}),{c(){h(e.$$.fragment),n=L(),t=y(l[2])},m(o,s){b(e,o,s),$(o,n,s),$(o,t,s),r=!0},p(o,s){(!r||s&4)&&z(t,o[2])},i(o){r||(m(e.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),r=!1},d(o){o&&(p(n),p(t)),v(e,o)}}}function K$(l){let e;const n=l[5].default,t=Vt(n,l,l[7],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&128)&&Xt(t,n,r,r[7],e?Qt(n,r[7],o,null):Yt(r[7]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function Z$(l){let e,n,t;return n=new me({props:{$$slots:{default:[K$]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function x$(l){let e,n=(l[8].name??`Unnamed ${l[1]}`)+"",t;return{c(){e=T("p"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&258&&n!==(n=(r[8].name??`Unnamed ${r[1]}`)+"")&&z(t,n)},d(r){r&&p(e)}}}function ep(l){let e,n;return e=new fe({props:{$$slots:{default:[x$,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&386&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function tp(l){let e,n;const t=[H(l[0]),{sourceLayer:l[0]},{paint:{"fill-color":l[4],"fill-opacity":x(.7,1)}},{layout:{visibility:l[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[ep]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Ge({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&25?te(t,[s&1&&se(H(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":x(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function np(l){let e,n,t,r,o;function s(i){l[6](i)}let u={$$slots:{right:[Z$],default:[J$]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.checked=l[3]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${l[0]}.pmtiles`,$$slots:{default:[tp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&132&&(f.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,f.checked=i[3],V(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${he()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function rp(l,e,n){let{$$slots:t={},$$scope:r}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:u}=e,i=Z[o],a=!1;function f(c){a=c,n(3,a)}return l.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,r=c.$$scope)},[o,s,u,a,i,t,f,r]}class Rl extends Q{constructor(e){super(),J(this,e,rp,np,Y,{name:0,singularNoun:1,pluralNoun:2})}}function lp(l){let e;return{c(){e=y("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function op(l){let e,n,t,r,o,s,u;return t=new K({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[lp]},$$scope:{ctx:l}}}),s=new Ye({}),{c(){e=T("p"),n=y("This shows "),h(t.$$.fragment),r=y(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function sp(l){let e,n;return e=new Rl({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[op]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class ip extends Q{constructor(e){super(),J(this,e,null,sp,Y,{})}}function ap(l){let e,n,t;return{c(){e=T("img"),t=y(`
  Railway Stations`),nn(e.src,n=Ul)||q(e,"src",n),q(e,"alt","A logo representing a train")},m(r,o){$(r,e,o),$(r,t,o)},p:ne,d(r){r&&(p(e),p(t))}}}function fp(l){let e;return{c(){e=y("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function up(l){let e,n,t,r,o,s,u,i,a;return t=new K({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[fp]},$$scope:{ctx:l}}}),i=new Ye({}),{c(){e=T("p"),n=y("This shows "),h(t.$$.fragment),r=y(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),s=T("p"),s.innerHTML='Icon from <a href="https://www.nationalrail.co.uk/">National Rail</a>',u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),$(f,o,c),$(f,s,c),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&8&&(g.$$scope={dirty:c,ctx:f}),t.$set(g)},i(f){a||(m(t.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(o),p(s),p(u)),v(t),v(i,f)}}}function cp(l){let e,n,t;return n=new me({props:{$$slots:{default:[up]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function $p(l){let e,n=(l[2].name??"Unnamed railway station")+"",t;return{c(){e=T("p"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&4&&n!==(n=(r[2].name??"Unnamed railway station")+"")&&z(t,n)},d(r){r&&p(e)}}}function pp(l){let e,n;return e=new fe({props:{$$slots:{default:[$p,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mp(l){let e,n;const t=[H(Cn),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[pp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new sn({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&se(H(Cn)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function _p(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[cp],default:[ap]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new vt({props:{data:`${he()}/v1/${Cn}.geojson`,$$slots:{default:[mp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Cn="railway_stations";function gp(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class dp extends Q{constructor(e){super(),J(this,e,gp,_p,Y,{})}}function hp(l){let e;return{c(){e=y("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bp(l){let e;return{c(){e=y("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vp(l){let e,n,t,r,o,s,u,i,a;return t=new K({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[hp]},$$scope:{ctx:l}}}),o=new K({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[bp]},$$scope:{ctx:l}}}),i=new Ye({}),{c(){e=T("p"),n=y("This shows "),h(t.$$.fragment),r=y(" and "),h(o.$$.fragment),s=y(" data from OpenStreetMap (as of 9 August 2023)."),u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&1&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&1&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function wp(l){let e,n;return e=new Rl({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[vp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class kp extends Q{constructor(e){super(),J(this,e,null,wp,Y,{})}}function yp(l){let e;return{c(){e=y("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Sp(l){let e;return{c(){e=y("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Cp(l){let e;return{c(){e=y("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Tp(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,k,O,C,P,D,I,N,A,M,E;return t=new K({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[Sp]},$$scope:{ctx:l}}}),P=new K({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[Cp]},$$scope:{ctx:l}}}),M=new Ae({}),{c(){e=T("p"),n=y("This layer shows collisions recorded in the "),h(t.$$.fragment),r=y(" dataset. Please note these limitations:"),o=L(),s=T("ul"),u=T("li"),u.textContent="Only collisions between 2017 and 2022 are included",i=L(),a=T("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,f=L(),c=T("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,g=L(),d=T("li"),d.textContent='The "pedestrians" category also include mobility scooters',k=L(),O=T("li"),C=y("All limitations "),h(P.$$.fragment),D=y(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),I=L(),N=T("p"),N.textContent="You can click a point to open the full report, thanks to CycleStreets.",A=L(),h(M.$$.fragment)},m(S,F){$(S,e,F),w(e,n),b(t,e,null),w(e,r),$(S,o,F),$(S,s,F),w(s,u),w(s,i),w(s,a),w(s,f),w(s,c),w(s,g),w(s,d),w(s,k),w(s,O),w(O,C),b(P,O,null),w(O,D),$(S,I,F),$(S,N,F),$(S,A,F),b(M,S,F),E=!0},p(S,F){const G={};F&16777216&&(G.$$scope={dirty:F,ctx:S}),t.$set(G);const R={};F&16777216&&(R.$$scope={dirty:F,ctx:S}),P.$set(R)},i(S){E||(m(t.$$.fragment,S),m(P.$$.fragment,S),m(M.$$.fragment,S),E=!0)},o(S){_(t.$$.fragment,S),_(P.$$.fragment,S),_(M.$$.fragment,S),E=!1},d(S){S&&(p(e),p(o),p(s),p(I),p(N),p(A)),v(t),v(P),v(M,S)}}}function Op(l){let e,n,t;return n=new me({props:{$$slots:{default:[Tp]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Yr(l){let e,n,t,r,o,s,u,i,a,f,c,g,d;return n=new Xe({props:{small:!0,$$slots:{default:[Mp]},$$scope:{ctx:l}}}),f=new An({props:{rows:l[14]}}),{c(){e=T("div"),h(n.$$.fragment),t=L(),r=T("div"),o=y(`Filter years:
      `),s=T("input"),u=y(`
      -
      `),i=T("input"),a=L(),h(f.$$.fragment),q(s,"type","number"),q(s,"min",2017),q(s,"max",2022),q(s,"class","svelte-1ft65rw"),q(i,"type","number"),q(i,"min",2017),q(i,"max",2022),q(i,"class","svelte-1ft65rw"),Se(e,"border","1px solid black"),Se(e,"padding","8px")},m(k,O){$(k,e,O),b(n,e,null),w(e,t),w(e,r),w(r,o),w(r,s),We(s,l[4]),w(r,u),w(r,i),We(i,l[5]),w(e,a),b(f,e,null),c=!0,g||(d=[at(s,"input",l[20]),at(i,"input",l[21])],g=!0)},p(k,O){const C={};O&16777231&&(C.$$scope={dirty:O,ctx:k}),n.$set(C),O&16&&Gt(s.value)!==k[4]&&We(s,k[4]),O&32&&Gt(i.value)!==k[5]&&We(i,k[5])},i(k){c||(m(n.$$.fragment,k),m(f.$$.fragment,k),c=!0)},o(k){_(n.$$.fragment,k),_(f.$$.fragment,k),c=!1},d(k){k&&p(e),v(n),v(f),g=!1,dl(d)}}}function Lp(l){let e;return{c(){e=y("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ap(l){let e;return{c(){e=y("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ip(l){let e;return{c(){e=y("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pp(l){let e;return{c(){e=y("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mp(l){let e,n,t,r,o,s,u,i,a,f,c,g;function d(A){l[16](A)}let k={$$slots:{default:[Lp]},$$scope:{ctx:l}};l[0]!==void 0&&(k.checked=l[0]),e=new le({props:k}),U.push(()=>W(e,"checked",d));function O(A){l[17](A)}let C={$$slots:{default:[Ap]},$$scope:{ctx:l}};l[1]!==void 0&&(C.checked=l[1]),r=new le({props:C}),U.push(()=>W(r,"checked",O));function P(A){l[18](A)}let D={$$slots:{default:[Ip]},$$scope:{ctx:l}};l[2]!==void 0&&(D.checked=l[2]),u=new le({props:D}),U.push(()=>W(u,"checked",P));function I(A){l[19](A)}let N={$$slots:{default:[Pp]},$$scope:{ctx:l}};return l[3]!==void 0&&(N.checked=l[3]),f=new le({props:N}),U.push(()=>W(f,"checked",I)),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment),s=L(),h(u.$$.fragment),a=L(),h(f.$$.fragment)},m(A,M){b(e,A,M),$(A,t,M),b(r,A,M),$(A,s,M),b(u,A,M),$(A,a,M),b(f,A,M),g=!0},p(A,M){const E={};M&16777216&&(E.$$scope={dirty:M,ctx:A}),!n&&M&1&&(n=!0,E.checked=A[0],V(()=>n=!1)),e.$set(E);const S={};M&16777216&&(S.$$scope={dirty:M,ctx:A}),!o&&M&2&&(o=!0,S.checked=A[1],V(()=>o=!1)),r.$set(S);const F={};M&16777216&&(F.$$scope={dirty:M,ctx:A}),!i&&M&4&&(i=!0,F.checked=A[2],V(()=>i=!1)),u.$set(F);const G={};M&16777216&&(G.$$scope={dirty:M,ctx:A}),!c&&M&8&&(c=!0,G.checked=A[3],V(()=>c=!1)),f.$set(G)},i(A){g||(m(e.$$.fragment,A),m(r.$$.fragment,A),m(u.$$.fragment,A),m(f.$$.fragment,A),g=!0)},o(A){_(e.$$.fragment,A),_(r.$$.fragment,A),_(u.$$.fragment,A),_(f.$$.fragment,A),g=!1},d(A){A&&(p(t),p(s),p(a)),v(e,A),v(r,A),v(u,A),v(f,A)}}}function Qr(l){let e,n,t,r=l[8][l[23].pedestrian_location]+"",o;return{c(){e=T("p"),n=y("Pedestrian location: "),t=T("b"),o=y(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8388608&&r!==(r=s[8][s[23].pedestrian_location]+"")&&z(o,r)},d(s){s&&p(e)}}}function Jr(l){let e,n,t,r=l[9][l[23].pedestrian_movement]+"",o;return{c(){e=T("p"),n=y("Pedestrian movement: "),t=T("b"),o=y(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8388608&&r!==(r=s[9][s[23].pedestrian_movement]+"")&&z(o,r)},d(s){s&&p(e)}}}function Np(l){let e,n,t,r=l[23].year+"",o,s,u,i,a,f=l[10][l[23].severity]+"",c,g,d,k,O,C=Kr(l[23])+"",P,D,I,N,A,M=l[23].pedestrian_location&&Qr(l),E=l[23].pedestrian_movement&&Jr(l);return{c(){e=T("p"),n=y("Year: "),t=T("b"),o=y(r),s=L(),u=T("p"),i=y("Severity: "),a=T("b"),c=y(f),g=L(),d=T("p"),k=y("Casualties: "),O=T("b"),P=y(C),D=L(),M&&M.c(),I=L(),E&&E.c(),N=L(),A=T("p"),A.textContent="Click to open full report in CycleStreets"},m(S,F){$(S,e,F),w(e,n),w(e,t),w(t,o),$(S,s,F),$(S,u,F),w(u,i),w(u,a),w(a,c),$(S,g,F),$(S,d,F),w(d,k),w(d,O),w(O,P),$(S,D,F),M&&M.m(S,F),$(S,I,F),E&&E.m(S,F),$(S,N,F),$(S,A,F)},p(S,F){F&8388608&&r!==(r=S[23].year+"")&&z(o,r),F&8388608&&f!==(f=S[10][S[23].severity]+"")&&z(c,f),F&8388608&&C!==(C=Kr(S[23])+"")&&z(P,C),S[23].pedestrian_location?M?M.p(S,F):(M=Qr(S),M.c(),M.m(I.parentNode,I)):M&&(M.d(1),M=null),S[23].pedestrian_movement?E?E.p(S,F):(E=Jr(S),E.c(),E.m(N.parentNode,N)):E&&(E.d(1),E=null)},d(S){S&&(p(e),p(s),p(u),p(g),p(d),p(D),p(I),p(N),p(A)),M&&M.d(S),E&&E.d(S)}}}function Fp(l){let e,n;return e=new fe({props:{$$slots:{default:[Np,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&25165824&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ep(l){let e,n;const t=[H(Bt),{sourceLayer:Bt},{paint:{"circle-color":we(["get","severity"],[1,2,3],[l[11],l[12],l[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:l[7]},{layout:{visibility:l[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[Fp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ft({props:r}),e.$on("click",jp),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&14528?te(t,[s&0&&se(H(Bt)),s&0&&{sourceLayer:Bt},s&14336&&{paint:{"circle-color":we(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Dp(l){let e,n,t,r,o,s;function u(f){l[15](f)}let i={$$slots:{right:[Op],default:[yp]},$$scope:{ctx:l}};l[6]!==void 0&&(i.checked=l[6]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[6]&&Yr(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${Bt}.pmtiles`,$$slots:{default:[Ep]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&16777216&&(g.$$scope={dirty:c,ctx:f}),!n&&c&64&&(n=!0,g.checked=f[6],V(()=>n=!1)),e.$set(g),f[6]?a?(a.p(f,c),c&64&&m(a,1)):(a=Yr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&16777408&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Bt="stats19";function Kr(l){let e=[];return l.pedestrian&&e.push("pedestrian"),l.cyclist&&e.push("cyclist"),l.horse_rider&&e.push("horse rider"),l.other&&e.push("other"),e.join(", ")}function jp(l){window.open(`https://www.cyclestreets.net/collisions/reports/${l.detail.features[0].properties.accident_index}`,"_blank")}function Rp(l,e,n){let t,r=!1,o=!0,s=!0,u=!0,i=!1,a=2017,f=2022;function c(G,R,j,B,X,re){let oe=["any"];return o&&oe.push(["get","pedestrian"]),s&&oe.push(["get","cyclist"]),u&&oe.push(["get","horse_rider"]),i&&oe.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],f],oe]}let g={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},d={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},k={1:"Fatal",2:"Serious",3:"Slight"},O=Z.sequential_low_to_high[4],C=Z.sequential_low_to_high[2],P=Z.sequential_low_to_high[0],D=[["Fatal",O],["Serious",C],["Slight",P]];function I(G){r=G,n(6,r)}function N(G){o=G,n(0,o)}function A(G){s=G,n(1,s)}function M(G){u=G,n(2,u)}function E(G){i=G,n(3,i)}function S(){a=Gt(this.value),n(4,a)}function F(){f=Gt(this.value),n(5,f)}return l.$$.update=()=>{l.$$.dirty&63&&n(7,t=c())},[o,s,u,i,a,f,r,t,g,d,k,O,C,P,D,I,N,A,M,E,S,F]}class Bp extends Q{constructor(e){super(),J(this,e,Rp,Dp,Y,{})}}function zp(l){let e;return{c(){e=y("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hp(l){let e;return{c(){e=y(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qp(l){let e;return{c(){e=y("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gp(l){let e,n,t,r,o,s,u,i,a,f,c;return t=new K({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Hp]},$$scope:{ctx:l}}}),o=new K({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[qp]},$$scope:{ctx:l}}}),f=new Ae({}),{c(){e=T("p"),n=y("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),r=y(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),s=y(" for details and caveats about the measurements."),u=L(),i=T("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=L(),h(f.$$.fragment)},m(g,d){$(g,e,d),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(g,u,d),$(g,i,d),$(g,a,d),b(f,g,d),c=!0},p(g,d){const k={};d&64&&(k.$$scope={dirty:d,ctx:g}),t.$set(k);const O={};d&64&&(O.$$scope={dirty:d,ctx:g}),o.$set(O)},i(g){c||(m(t.$$.fragment,g),m(o.$$.fragment,g),m(f.$$.fragment,g),c=!0)},o(g){_(t.$$.fragment,g),_(o.$$.fragment,g),_(f.$$.fragment,g),c=!1},d(g){g&&(p(e),p(u),p(i),p(a)),v(t),v(o),v(f,g)}}}function Up(l){let e,n,t;return n=new me({props:{$$slots:{default:[Gp]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),q(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Zr(l){let e,n;return e=new Re({props:{colorScale:l[1],limits:l[3]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wp(l){let e,n=l[5].location+"",t,r,o,s,u,i=l[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,g,d,k=l[5].pedal_cycles_2022.toLocaleString()+"",O,C,P,D,I,N=l[5].method+"",A;return{c(){e=T("h2"),t=y(n),r=L(),o=T("p"),s=y("Total motor vehicles (2022 AADF): "),u=T("b"),a=y(i),f=L(),c=T("p"),g=y("Total pedal cycles (2022 AADF): "),d=T("b"),O=y(k),C=L(),P=T("p"),D=y("Count method: "),I=T("b"),A=y(N)},m(M,E){$(M,e,E),w(e,t),$(M,r,E),$(M,o,E),w(o,s),w(o,u),w(u,a),$(M,f,E),$(M,c,E),w(c,g),w(c,d),w(d,O),$(M,C,E),$(M,P,E),w(P,D),w(P,I),w(I,A)},p(M,E){E&32&&n!==(n=M[5].location+"")&&z(t,n),E&32&&i!==(i=M[5].motor_vehicles_2022.toLocaleString()+"")&&z(a,i),E&32&&k!==(k=M[5].pedal_cycles_2022.toLocaleString()+"")&&z(O,k),E&32&&N!==(N=M[5].method+"")&&z(A,N)},d(M){M&&(p(e),p(r),p(o),p(f),p(c),p(C),p(P))}}}function Vp(l){let e,n;return e=new fe({props:{$$slots:{default:[Wp,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&96&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xp(l){let e,n;const t=[H(zt),{sourceLayer:zt},{paint:{"circle-color":we(["get","motor_vehicles_2022"],l[2],l[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[Vp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ft({props:r}),e.$on("click",Qp),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&se(H(zt)),s&0&&{sourceLayer:zt},s&6&&{paint:{"circle-color":we(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Yp(l){let e,n,t,r,o,s;function u(f){l[4](f)}let i={$$slots:{right:[Up],default:[zp]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Zr(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${zt}.pmtiles`,$$slots:{default:[Xp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&64&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Zr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&65&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let zt="vehicle_counts";function Qp(l){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${l.detail.features[0].properties.count_point}`,"_blank")}function Jp(l,e,n){let t=Z.sequential_low_to_high,r=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function u(i){s=i,n(0,s)}return[s,t,r,o,u]}class Kp extends Q{constructor(e){super(),J(this,e,Jp,Yp,Y,{})}}function Zp(l){let e,n,t,r,o,s,u,i;return e=new Q$({}),t=new ip({}),o=new kp({}),u=new dp({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),$(a,r,f),b(o,a,f),$(a,s,f),b(u,a,f),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(u.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(o.$$.fragment,a),_(u.$$.fragment,a),i=!1},d(a){a&&(p(n),p(r),p(s)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function xp(l){let e,n;return e=new Xe({props:{small:!0,$$slots:{default:[Zp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function em(l){let e,n,t,r,o,s,u,i,a,f;return e=new vu({}),t=new zu({}),o=new Iu({}),u=new D$({}),a=new g$({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment),i=L(),h(a.$$.fragment)},m(c,g){b(e,c,g),$(c,n,g),b(t,c,g),$(c,r,g),b(o,c,g),$(c,s,g),b(u,c,g),$(c,i,g),b(a,c,g),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(r),p(s),p(i)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function tm(l){let e,n;return e=new Xe({props:{small:!0,$$slots:{default:[em]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function nm(l){let e,n,t,r,o,s;return e=new iu({}),t=new Bc({}),o=new Qc({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment)},m(u,i){b(e,u,i),$(u,n,i),b(t,u,i),$(u,r,i),b(o,u,i),s=!0},i(u){s||(m(e.$$.fragment,u),m(t.$$.fragment,u),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(t.$$.fragment,u),_(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),v(e,u),v(t,u),v(o,u)}}}function rm(l){let e,n,t,r,o,s,u,i,a,f;return e=new Sf({}),t=new Xf({}),o=new Ia({}),u=new Za({}),a=new pf({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment),i=L(),h(a.$$.fragment)},m(c,g){b(e,c,g),$(c,n,g),b(t,c,g),$(c,r,g),b(o,c,g),$(c,s,g),b(u,c,g),$(c,i,g),b(a,c,g),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(r),p(s),p(i)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function lm(l){let e,n;return e=new Xe({props:{small:!0,$$slots:{default:[rm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function om(l){let e,n,t,r;return e=new ba({}),t=new Ha({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function sm(l){let e,n;return e=new Xe({props:{small:!0,$$slots:{default:[om]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function im(l){let e,n,t,r,o,s;return e=new Pc({}),t=new Ju({}),o=new wc({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment)},m(u,i){b(e,u,i),$(u,n,i),b(t,u,i),$(u,r,i),b(o,u,i),s=!0},i(u){s||(m(e.$$.fragment,u),m(t.$$.fragment,u),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(t.$$.fragment,u),_(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),v(e,u),v(t,u),v(o,u)}}}function am(l){let e,n,t,r,o,s,u,i,a=gn()=="Private (development)",f,c,g;e=new Kp({}),t=new Bp({}),o=new uc({}),u=new T$({});let d=a&&im();return c=new Df({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment),i=L(),d&&d.c(),f=L(),h(c.$$.fragment)},m(k,O){b(e,k,O),$(k,n,O),b(t,k,O),$(k,r,O),b(o,k,O),$(k,s,O),b(u,k,O),$(k,i,O),d&&d.m(k,O),$(k,f,O),b(c,k,O),g=!0},p:ne,i(k){g||(m(e.$$.fragment,k),m(t.$$.fragment,k),m(o.$$.fragment,k),m(u.$$.fragment,k),m(d),m(c.$$.fragment,k),g=!0)},o(k){_(e.$$.fragment,k),_(t.$$.fragment,k),_(o.$$.fragment,k),_(u.$$.fragment,k),_(d),_(c.$$.fragment,k),g=!1},d(k){k&&(p(n),p(r),p(s),p(i),p(f)),v(e,k),v(t,k),v(o,k),v(u,k),d&&d.d(k),v(c,k)}}}function fm(l){let e,n;return e=new Xe({props:{small:!0,$$slots:{default:[am]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function um(l){let e,n,t,r,o;function s(i){l[3](i)}let u={};return l[0]!==void 0&&(u.enabled=l[0]),e=new Kl({props:u}),U.push(()=>W(e,"enabled",s)),r=new ro({}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,a){const f={};!n&&a&1&&(n=!0,f.enabled=i[0],V(()=>n=!1)),e.$set(f)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function cm(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,k,O,C,P,D;return e=new o$({}),t=new De({props:{label:"Trip generators",$$slots:{default:[xp]},$$scope:{ctx:l}}}),o=new De({props:{label:"Existing infrastructure",$$slots:{default:[tm]},$$scope:{ctx:l}}}),u=new De({props:{label:"Public transit",$$slots:{default:[nm]},$$scope:{ctx:l}}}),a=new De({props:{label:"Boundaries",$$slots:{default:[lm]},$$scope:{ctx:l}}}),c=new De({props:{label:"Census",$$slots:{default:[sm]},$$scope:{ctx:l}}}),d=new De({props:{label:"Other",$$slots:{default:[fm]},$$scope:{ctx:l}}}),O=new De({props:{label:"Tools",$$slots:{default:[um]},$$scope:{ctx:l}}}),P=new Jl({props:{disabled:!l[1]}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment),i=L(),h(a.$$.fragment),f=L(),h(c.$$.fragment),g=L(),h(d.$$.fragment),k=L(),h(O.$$.fragment),C=L(),h(P.$$.fragment)},m(I,N){b(e,I,N),$(I,n,N),b(t,I,N),$(I,r,N),b(o,I,N),$(I,s,N),b(u,I,N),$(I,i,N),b(a,I,N),$(I,f,N),b(c,I,N),$(I,g,N),b(d,I,N),$(I,k,N),b(O,I,N),$(I,C,N),b(P,I,N),D=!0},p(I,N){const A={};N&16&&(A.$$scope={dirty:N,ctx:I}),t.$set(A);const M={};N&16&&(M.$$scope={dirty:N,ctx:I}),o.$set(M);const E={};N&16&&(E.$$scope={dirty:N,ctx:I}),u.$set(E);const S={};N&16&&(S.$$scope={dirty:N,ctx:I}),a.$set(S);const F={};N&16&&(F.$$scope={dirty:N,ctx:I}),c.$set(F);const G={};N&16&&(G.$$scope={dirty:N,ctx:I}),d.$set(G);const R={};N&17&&(R.$$scope={dirty:N,ctx:I}),O.$set(R);const j={};N&2&&(j.disabled=!I[1]),P.$set(j)},i(I){D||(m(e.$$.fragment,I),m(t.$$.fragment,I),m(o.$$.fragment,I),m(u.$$.fragment,I),m(a.$$.fragment,I),m(c.$$.fragment,I),m(d.$$.fragment,I),m(O.$$.fragment,I),m(P.$$.fragment,I),D=!0)},o(I){_(e.$$.fragment,I),_(t.$$.fragment,I),_(o.$$.fragment,I),_(u.$$.fragment,I),_(a.$$.fragment,I),_(c.$$.fragment,I),_(d.$$.fragment,I),_(O.$$.fragment,I),_(P.$$.fragment,I),D=!1},d(I){I&&(p(n),p(r),p(s),p(i),p(f),p(g),p(k),p(C)),v(e,I),v(t,I),v(o,I),v(u,I),v(a,I),v(c,I),v(d,I),v(O,I),v(P,I)}}}function $m(l){let e,n;const t=[H("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:l[1]?"none":"visible"}}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Ge({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&2?te(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function pm(l){let e,n,t,r;return e=new De({props:{label:"Layers",open:!0,$$slots:{default:[cm]},$$scope:{ctx:l}}}),t=new vt({props:{data:l[2],$$slots:{default:[$m]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const u={};s&19&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function mm(l,e,n){let t,r;ke(l,cr,u=>n(1,r=u));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(u){t=u,n(0,t),n(1,r)}return l.$$.update=()=>{l.$$.dirty&2&&n(0,t=!r),l.$$.dirty&1&&cr.set(!t)},[t,r,o,s]}class _m extends Q{constructor(e){super(),J(this,e,mm,pm,Y,{})}}function xr(l){let e;return{c(){e=T("p"),e.textContent="Loading scheme data..."},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gm(l){let e,n=l[0]&&xr();return{c(){n&&n.c(),e=Fe()},m(t,r){n&&n.m(t,r),$(t,e,r)},p(t,[r]){t[0]?n||(n=xr(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ne,o:ne,d(t){t&&p(e),n&&n.d(t)}}}function dm(l,e,n){let{loadFile:t}=e,r=!0;return Ln(async()=>{let s=await(await fetch(`${on()}/v1/random_schemes.geojson`)).text();t(s),n(0,r=!1)}),l.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[r,t]}class hm extends Q{constructor(e){super(),J(this,e,dm,gm,Y,{loadFile:1})}}function el(l){var o;let e,n,t=((o=l[0].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=T("p"),n=y("Current milestone: "),r=y(t)},m(s,u){$(s,e,u),w(e,n),w(e,r)},p(s,u){var i;u&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&z(r,t)},d(s){s&&p(e)}}}function bm(l){let e;return{c(){e=y("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vm(l){let e;return{c(){e=y("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wm(l){let e,n,t,r;return e=new dt({props:{$$slots:{default:[bm]},$$scope:{ctx:l}}}),e.$on("click",l[1]),t=new dt({props:{$$slots:{default:[vm]},$$scope:{ctx:l}}}),t.$on("click",l[2]),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function km(l){var F,G,R,j;let e,n,t=l[0].scheme_reference+"",r,o,s,u,i=((F=l[0].browse)==null?void 0:F.authority_or_region)+"",a,f,c,g,d=((G=l[0].browse)==null?void 0:G.capital_scheme_id)+"",k,O,C,P,D=((R=l[0].browse)==null?void 0:R.funding_programme)+"",I,N,A,M,E,S=((j=l[0].browse)==null?void 0:j.current_milestone)&&el(l);return M=new Zl({props:{$$slots:{default:[wm]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=y("Scheme reference: "),r=y(t),o=L(),s=T("p"),u=y("Authority or region: "),a=y(i),f=L(),c=T("p"),g=y("Capital scheme ID: "),k=y(d),O=L(),C=T("p"),P=y("Funding programme: "),I=y(D),N=L(),S&&S.c(),A=L(),h(M.$$.fragment)},m(B,X){$(B,e,X),w(e,n),w(e,r),$(B,o,X),$(B,s,X),w(s,u),w(s,a),$(B,f,X),$(B,c,X),w(c,g),w(c,k),$(B,O,X),$(B,C,X),w(C,P),w(C,I),$(B,N,X),S&&S.m(B,X),$(B,A,X),b(M,B,X),E=!0},p(B,X){var oe,ce,Ie,Te;(!E||X&1)&&t!==(t=B[0].scheme_reference+"")&&z(r,t),(!E||X&1)&&i!==(i=((oe=B[0].browse)==null?void 0:oe.authority_or_region)+"")&&z(a,i),(!E||X&1)&&d!==(d=((ce=B[0].browse)==null?void 0:ce.capital_scheme_id)+"")&&z(k,d),(!E||X&1)&&D!==(D=((Ie=B[0].browse)==null?void 0:Ie.funding_programme)+"")&&z(I,D),(Te=B[0].browse)!=null&&Te.current_milestone?S?S.p(B,X):(S=el(B),S.c(),S.m(A.parentNode,A)):S&&(S.d(1),S=null);const re={};X&32&&(re.$$scope={dirty:X,ctx:B}),M.$set(re)},i(B){E||(m(M.$$.fragment,B),E=!0)},o(B){_(M.$$.fragment,B),E=!1},d(B){B&&(p(e),p(o),p(s),p(f),p(c),p(O),p(C),p(N),p(A)),S&&S.d(B),v(M,B)}}}function ym(l){let e,n;return e=new De({props:{label:`${l[0].scheme_name}`,$$slots:{default:[km]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.label=`${t[0].scheme_name}`),r&33&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Sm(l,e,n){let t,r;ke(l,ht,i=>n(3,t=i)),ke(l,On,i=>n(4,r=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};r==null||r.fitBounds(Wl(i),{padding:20,animate:!1})}function u(){var f,c;let i={type:"FeatureCollection",features:t.features.filter(g=>g.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return l.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,u]}class Cm extends Q{constructor(e){super(),J(this,e,Sm,ym,Y,{scheme:0})}}function tl(l){let e,n,t=jn(l[0].length_meters)+"",r;return{c(){e=T("p"),n=y("Length: "),r=y(t)},m(o,s){$(o,e,s),w(e,n),w(e,r)},p(o,s){s&1&&t!==(t=jn(o[0].length_meters)+"")&&z(r,t)},d(o){o&&p(e)}}}function nl(l){let e,n=st(l[0].description,l[2])+"";return{c(){e=T("p")},m(t,r){$(t,e,r),e.innerHTML=n},p(t,r){r&5&&n!==(n=st(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function rl(l){var o;let e,n,t=((o=l[1].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=T("p"),n=y("Current milestone: "),r=y(t)},m(s,u){$(s,e,u),w(e,n),w(e,r)},p(s,u){var i;u&2&&t!==(t=((i=s[1].browse)==null?void 0:i.current_milestone)+"")&&z(r,t)},d(s){s&&p(e)}}}function Tm(l){var Be,Ee,Ce,Qe;let e,n,t,r=st(l[0].name,l[2])+"",o,s=l[0].intervention_type+"",u,i,a,f,c,g,d,k,O,C,P=st(l[1].scheme_name??"",l[3])+"",D,I,N=st(l[0].scheme_reference,l[3])+"",A,M,E,S,F=((Be=l[1].browse)==null?void 0:Be.authority_or_region)+"",G,R,j,B,X=((Ee=l[1].browse)==null?void 0:Ee.capital_scheme_id)+"",re,oe,ce,Ie,Te=((Ce=l[1].browse)==null?void 0:Ce.funding_programme)+"",ae,Le,ue=l[0].length_meters&&tl(l),_e=l[0].description&&nl(l),ge=((Qe=l[1].browse)==null?void 0:Qe.current_milestone)&&rl(l);return{c(){e=T("div"),n=T("h2"),t=new Ht(!1),o=y(" ("),u=y(s),i=y(")"),a=L(),ue&&ue.c(),f=L(),_e&&_e.c(),c=L(),g=T("hr"),d=L(),k=T("p"),O=y("Part of scheme: "),C=new Ht(!1),D=y(" ("),I=new Ht(!1),A=y(")"),M=L(),E=T("p"),S=y("Authority or region: "),G=y(F),R=L(),j=T("p"),B=y("Capital scheme ID: "),re=y(X),oe=L(),ce=T("p"),Ie=y("Funding programme: "),ae=y(Te),Le=L(),ge&&ge.c(),t.a=o,C.a=D,I.a=A,Se(e,"max-width","30vw")},m(ie,be){$(ie,e,be),w(e,n),t.m(r,n),w(n,o),w(n,u),w(n,i),w(e,a),ue&&ue.m(e,null),w(e,f),_e&&_e.m(e,null),w(e,c),w(e,g),w(e,d),w(e,k),w(k,O),C.m(P,k),w(k,D),I.m(N,k),w(k,A),w(e,M),w(e,E),w(E,S),w(E,G),w(e,R),w(e,j),w(j,B),w(j,re),w(e,oe),w(e,ce),w(ce,Ie),w(ce,ae),w(e,Le),ge&&ge.m(e,null)},p(ie,[be]){var Mn,Nn,Fn,En;be&5&&r!==(r=st(ie[0].name,ie[2])+"")&&t.p(r),be&1&&s!==(s=ie[0].intervention_type+"")&&z(u,s),ie[0].length_meters?ue?ue.p(ie,be):(ue=tl(ie),ue.c(),ue.m(e,f)):ue&&(ue.d(1),ue=null),ie[0].description?_e?_e.p(ie,be):(_e=nl(ie),_e.c(),_e.m(e,c)):_e&&(_e.d(1),_e=null),be&10&&P!==(P=st(ie[1].scheme_name??"",ie[3])+"")&&C.p(P),be&9&&N!==(N=st(ie[0].scheme_reference,ie[3])+"")&&I.p(N),be&2&&F!==(F=((Mn=ie[1].browse)==null?void 0:Mn.authority_or_region)+"")&&z(G,F),be&2&&X!==(X=((Nn=ie[1].browse)==null?void 0:Nn.capital_scheme_id)+"")&&z(re,X),be&2&&Te!==(Te=((Fn=ie[1].browse)==null?void 0:Fn.funding_programme)+"")&&z(ae,Te),(En=ie[1].browse)!=null&&En.current_milestone?ge?ge.p(ie,be):(ge=rl(ie),ge.c(),ge.m(e,null)):ge&&(ge.d(1),ge=null)},i:ne,o:ne,d(ie){ie&&p(e),ue&&ue.d(),_e&&_e.d(),ge&&ge.d()}}}function st(l,e){return e?l.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):l}function Om(l,e,n){let t,r,o,s;ke(l,ln,i=>n(4,r=i)),ke(l,kt,i=>n(2,o=i)),ke(l,yt,i=>n(3,s=i));let{props:u}=e;return l.$$set=i=>{"props"in i&&n(0,u=i.props)},l.$$.update=()=>{l.$$.dirty&17&&n(1,t=r.get(u.scheme_reference))},[u,t,o,s,r]}class Pn extends Q{constructor(e){super(),J(this,e,Om,Tm,Y,{props:0})}}function Lm(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Am(l){let e,n;return e=new Pn({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Im(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Lm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Am,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Pm(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Mm(l){let e,n;return e=new Pn({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Nm(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Pm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Mm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Fm(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Em(l){let e,n;return e=new Pn({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Dm(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Fm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Em,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function jm(l){let e,n,t,r,o,s,u,i,a,f;const c=[H("interventions-points"),{filter:["all",Rn,l[3],l[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":l[2],"circle-radius":Hn,"circle-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let g={$$slots:{default:[Im]},$$scope:{ctx:l}};for(let A=0;A<c.length;A+=1)g=ee(g,c[A]);e=new ft({props:g});const d=[H("interventions-lines"),{filter:["all",Bn,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[2],"line-width":wt,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let k={$$slots:{default:[Nm]},$$scope:{ctx:l}};for(let A=0;A<d.length;A+=1)k=ee(k,d[A]);t=new ye({props:k});const O=[H("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*wt,"circle-opacity":0,"circle-stroke-color":rt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:l[0]?"visible":"none"}}];let C={};for(let A=0;A<O.length;A+=1)C=ee(C,O[A]);o=new ft({props:C});const P=[H("interventions-polygons"),{filter:["all",xt,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":l[2],"fill-opacity":x(.2,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let D={$$slots:{default:[Dm]},$$scope:{ctx:l}};for(let A=0;A<P.length;A+=1)D=ee(D,P[A]);u=new Ge({props:D});const I=[H("interventions-polygons-outlines"),{filter:["all",xt,l[3]]},{paint:{"line-color":l[2],"line-opacity":.5,"line-width":.7*wt}},{layout:{visibility:l[0]?"visible":"none"}}];let N={};for(let A=0;A<I.length;A+=1)N=ee(N,I[A]);return a=new ye({props:N}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment),i=L(),h(a.$$.fragment)},m(A,M){b(e,A,M),$(A,n,M),b(t,A,M),$(A,r,M),b(o,A,M),$(A,s,M),b(u,A,M),$(A,i,M),b(a,A,M),f=!0},p(A,M){const E=M&29?te(c,[c[0],M&24&&{filter:["all",Rn,A[3],A[4]]},c[2],c[3],M&4&&{paint:{"circle-color":A[2],"circle-radius":Hn,"circle-opacity":x(1,.5)}},M&1&&{layout:{visibility:A[0]?"visible":"none"}},c[6]]):{};M&128&&(E.$$scope={dirty:M,ctx:A}),e.$set(E);const S=M&13?te(d,[d[0],M&8&&{filter:["all",Bn,A[3]]},d[2],d[3],M&4&&{paint:{"line-color":A[2],"line-width":wt,"line-opacity":x(1,.5)}},M&1&&{layout:{visibility:A[0]?"visible":"none"}},d[6]]):{};M&128&&(S.$$scope={dirty:M,ctx:A}),t.$set(S);const F=M&1?te(O,[O[0],O[1],O[2],{layout:{visibility:A[0]?"visible":"none"}}]):{};o.$set(F);const G=M&13?te(P,[P[0],M&8&&{filter:["all",xt,A[3]]},P[2],P[3],M&4&&{paint:{"fill-color":A[2],"fill-opacity":x(.2,.5)}},M&1&&{layout:{visibility:A[0]?"visible":"none"}},P[6]]):{};M&128&&(G.$$scope={dirty:M,ctx:A}),u.$set(G);const R=M&13?te(I,[I[0],M&8&&{filter:["all",xt,A[3]]},M&4&&{paint:{"line-color":A[2],"line-opacity":.5,"line-width":.7*wt}},M&1&&{layout:{visibility:A[0]?"visible":"none"}}]):{};a.$set(R)},i(A){f||(m(e.$$.fragment,A),m(t.$$.fragment,A),m(o.$$.fragment,A),m(u.$$.fragment,A),m(a.$$.fragment,A),f=!0)},o(A){_(e.$$.fragment,A),_(t.$$.fragment,A),_(o.$$.fragment,A),_(u.$$.fragment,A),_(a.$$.fragment,A),f=!1},d(A){A&&(p(n),p(r),p(s),p(i)),v(e,A),v(t,A),v(o,A),v(u,A),v(a,A)}}}function Rm(l){let e,n;return e=new vt({props:{data:l[1],$$slots:{default:[jm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&2&&(o.data=t[1]),r&129&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Bm(l,e,n){let t,r;ke(l,ht,a=>n(5,r=a));let{showSchemes:o}=e,[s]=Sn();const u=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return l.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},l.$$.update=()=>{l.$$.dirty&32&&n(1,t=Vl(r))},[o,t,s,u,i,r]}class zm extends Q{constructor(e){super(),J(this,e,Bm,Rm,Y,{showSchemes:0})}}function ll(l,e,n){const t=l.slice();return t[13]=e[n],t}function ol(l,e,n){const t=l.slice();return t[16]=e[n],t}function Hm(l){let e,n;return e=new hm({props:{loadFile:l[7]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function sl(l){let e,n,t,r,o;e=new dt({props:{$$slots:{default:[qm]},$$scope:{ctx:l}}}),e.$on("click",l[8]);function s(i){l[9](i)}let u={title:"About this scheme data",$$slots:{default:[Gm]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.open=l[3]),t=new cl({props:u}),U.push(()=>W(t,"open",s)),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),o=!0},p(i,a){const f={};a&524288&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&524304&&(c.$$scope={dirty:a,ctx:i}),!r&&a&8&&(r=!0,c.open=i[3],V(()=>r=!1)),t.$set(c)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),o=!1},d(i){i&&p(n),v(e,i),v(t,i)}}}function qm(l){let e;return{c(){e=y("About the scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function il(l){let e,n,t=l[16]+"",r;return{c(){e=T("li"),n=T("p"),r=y(t)},m(o,s){$(o,e,s),w(e,n),w(n,r)},p(o,s){s&16&&t!==(t=o[16]+"")&&z(r,t)},d(o){o&&p(e)}}}function Gm(l){let e,n,t,r,o=je(l[4].notes),s=[];for(let u=0;u<o.length;u+=1)s[u]=il(ol(l,o,u));return{c(){e=T("div"),n=T("p"),n.textContent="Please note there are data quality caveats for all scheme data:",t=L(),r=T("ul");for(let u=0;u<s.length;u+=1)s[u].c();q(e,"class","govuk-prose")},m(u,i){$(u,e,i),w(e,n),w(e,t),w(e,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(r,null)},p(u,i){if(i&16){o=je(u[4].notes);let a;for(a=0;a<o.length;a+=1){const f=ol(u,o,a);s[a]?s[a].p(f,i):(s[a]=il(f),s[a].c(),s[a].m(r,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(u){u&&p(e),gt(s,u)}}}function al(l){let e,n,t,r;function o(i){l[10](i)}function s(i){l[11](i)}let u={};return l[1]!==void 0&&(u.schemesToBeShown=l[1]),l[2]!==void 0&&(u.show=l[2]),e=new qi({props:u}),U.push(()=>W(e,"schemesToBeShown",o)),U.push(()=>W(e,"show",s)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),r=!0},p(i,a){const f={};!n&&a&2&&(n=!0,f.schemesToBeShown=i[1],V(()=>n=!1)),!t&&a&4&&(t=!0,f.show=i[2],V(()=>t=!1)),e.$set(f)},i(i){r||(m(e.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),r=!1},d(i){v(e,i)}}}function fl(l){let e,n;return e=new Cm({props:{scheme:l[13]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ul(l){let e=l[1].has(l[13].scheme_reference),n,t,r=e&&fl(l);return{c(){r&&r.c(),n=Fe()},m(o,s){r&&r.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?r?(r.p(o,s),s&66&&m(r,1)):(r=fl(o),r.c(),m(r,1),r.m(n.parentNode,n)):r&&($e(),_(r,1,1,()=>{r=null}),pe())},i(o){t||(m(r),t=!0)},o(o){_(r),t=!1},d(o){o&&p(n),r&&r.d(o)}}}function Um(l){let e,n,t,r,o,s,u,i,a,f,c=gn()=="Private (development)",g,d,k,O,C,P,D,I,N;o=new no({props:{boundaryGeojson:l[4]}}),a=new Xl({});let A=c&&Hm(l),M=l[4].notes&&sl(l);k=new eo({props:{label:"Load schemes from GeoJSON",loadFile:l[7]}}),C=new bl({props:{errorMessage:l[0]}});let E=l[6].size>0&&al(l),S=je(l[6].values()),F=[];for(let R=0;R<S.length;R+=1)F[R]=ul(ll(l,S,R));const G=R=>_(F[R],1,1,()=>{F[R]=null});return{c(){e=T("div"),n=T("div"),t=T("h1"),t.textContent="Browse schemes",r=L(),h(o.$$.fragment),s=L(),u=T("p"),u.textContent=`App version: ${gn()}`,i=L(),h(a.$$.fragment),f=L(),A&&A.c(),g=L(),M&&M.c(),d=L(),h(k.$$.fragment),O=L(),h(C.$$.fragment),P=L(),E&&E.c(),D=L(),I=T("ul");for(let R=0;R<F.length;R+=1)F[R].c();Se(n,"display","flex"),Se(n,"justify-content","space-between"),q(e,"slot","sidebar"),q(e,"class","govuk-prose")},m(R,j){$(R,e,j),w(e,n),w(n,t),w(n,r),b(o,n,null),w(e,s),w(e,u),w(e,i),b(a,e,null),w(e,f),A&&A.m(e,null),w(e,g),M&&M.m(e,null),w(e,d),b(k,e,null),w(e,O),b(C,e,null),w(e,P),E&&E.m(e,null),w(e,D),w(e,I);for(let B=0;B<F.length;B+=1)F[B]&&F[B].m(I,null);N=!0},p(R,j){const B={};j&16&&(B.boundaryGeojson=R[4]),o.$set(B),c&&A.p(R,j),R[4].notes?M?(M.p(R,j),j&16&&m(M,1)):(M=sl(R),M.c(),m(M,1),M.m(e,d)):M&&($e(),_(M,1,1,()=>{M=null}),pe());const X={};if(j&1&&(X.errorMessage=R[0]),C.$set(X),R[6].size>0?E?(E.p(R,j),j&64&&m(E,1)):(E=al(R),E.c(),m(E,1),E.m(e,D)):E&&($e(),_(E,1,1,()=>{E=null}),pe()),j&66){S=je(R[6].values());let re;for(re=0;re<S.length;re+=1){const oe=ll(R,S,re);F[re]?(F[re].p(oe,j),m(F[re],1)):(F[re]=ul(oe),F[re].c(),m(F[re],1),F[re].m(I,null))}for($e(),re=S.length;re<F.length;re+=1)G(re);pe()}},i(R){if(!N){m(o.$$.fragment,R),m(a.$$.fragment,R),m(A),m(M),m(k.$$.fragment,R),m(C.$$.fragment,R),m(E);for(let j=0;j<S.length;j+=1)m(F[j]);N=!0}},o(R){_(o.$$.fragment,R),_(a.$$.fragment,R),_(A),_(M),_(k.$$.fragment,R),_(C.$$.fragment,R),_(E),F=F.filter(Boolean);for(let j=0;j<F.length;j+=1)_(F[j]);N=!1},d(R){R&&p(e),v(o),v(a),A&&A.d(),M&&M.d(),v(k),v(C),E&&E.d(),gt(F,R)}}}function Wm(l){let e,n,t,r,o,s,u;return e=new xl({}),t=new zm({props:{showSchemes:l[2]}}),s=new _m({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),o=T("div"),h(s.$$.fragment),q(o,"class","top-right svelte-u44ed2")},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),$(i,r,a),$(i,o,a),b(s,o,null),u=!0},p(i,a){const f={};a&4&&(f.showSchemes=i[2]),t.$set(f)},i(i){u||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(n),p(r),p(o)),v(e,i),v(t,i),v(s)}}}function Vm(l){let e,n,t;return n=new Yl({props:{style:l[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Wm]},$$scope:{ctx:l}}}),{c(){e=T("div"),h(n.$$.fragment),q(e,"slot","main")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.style=r[5]),o&524292&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Xm(l){let e,n;return e=new lo({props:{$$slots:{main:[Vm],sidebar:[Um]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&524415&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ym(l,e,n){let t,r,o;ke(l,ht,C=>n(4,t=C)),ke(l,zn,C=>n(5,r=C)),ke(l,ln,C=>n(6,o=C)),Ln(()=>{Ql()});const s=new URLSearchParams(window.location.search);zn.set(s.get("style")||"dataviz");let u="",i=new Set,a=!0,f=!1;function c(C){try{ht.set(JSON.parse(C)),ln.set(ki(t)),n(0,u="")}catch(P){n(0,u=`The file you loaded is broken: ${P}`)}}const g=()=>n(3,f=!0);function d(C){f=C,n(3,f)}function k(C){i=C,n(1,i)}function O(C){a=C,n(2,a)}return[u,i,a,f,t,r,o,c,g,d,k,O]}class Qm extends Q{constructor(e){super(),J(this,e,Ym,Xm,Y,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new Qm({target:document.getElementById("app")});
