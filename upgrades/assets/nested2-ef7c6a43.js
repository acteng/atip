import{S as J,i as K,s as Y,e as T,h as G,$ as ye,j as $,W as x,o as p,aP as al,b as U,c as W,d as O,g as h,m as b,w as at,l as V,t as m,n as _,p as v,X as Wt,Y as Vt,Z as Xt,_ as Yt,a7 as De,J as $e,K as pe,aQ as It,u as k,k as w,D as H,I as Me,N as Sn,O as fl,q as we,P as ul,Q as cl,T as it,U as $l,V as pl,aX as Dl,aY as $t,a4 as Fn,aZ as jl,aO as Rl,ar as Nt,ae as Cn,aj as Qt,r as Tn,a as Pt,F as mn,v as Je,aW as Z,a_ as be,a$ as ke,B as ee,ah as te,C as Se,ak as ne,b0 as ae,G as Ft,H as ml,aS as qt,ab as En,b1 as on,R as _l,b2 as Ht,E as gl,as as Bl,f as _n,ag as Hl,aU as Dn,al as zl,am as jn,an as Rn,ao as Zt,aV as Bn,L as ql,M as Gl,y as Ul}from"./index-3b8ac415.js";import{d as nt,j as At,C as Ee,f as xe,h as oe,l as z,c as tn,k as Wl,S as Vl,B as Xl,b as Et,G as Yl}from"./StreetViewTool-4a44d261.js";import{a as qe,F as Ql}from"./Popup-bc010802.js";import{P as fe}from"./Popup-baf7e9ff.js";import{R as Jl,C as Ke,Z as Kl}from"./ZoomOutMap-bac3f213.js";import{L as Zl,a as xl}from"./LineMeasureController-84132021.js";function eo(l){let e;return{c(){e=T("span"),G(e,"class","svelte-kzgqtg"),ye(e,"background",l[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&ye(e,"background",n[0])},i:x,o:x,d(n){n&&p(e)}}}function to(l,e,n){let{color:t}=e;return l.$$set=r=>{"color"in r&&n(0,t=r.color)},[t]}class Ce extends J{constructor(e){super(),K(this,e,to,eo,Y,{color:0})}}const no="/atip/upgrades/assets/help-d011708a.svg";function ro(l){let e,n;const t=l[1].default,r=Wt(t,l,l[4],null);return{c(){e=T("div"),r&&r.c(),G(e,"class","govuk-prose")},m(o,s){$(o,e,s),r&&r.m(e,null),n=!0},p(o,s){r&&r.p&&(!n||s&16)&&Vt(r,t,o,o[4],n?Yt(t,o[4],s,null):Xt(o[4]),null)},i(o){n||(m(r,o),n=!0)},o(o){_(r,o),n=!1},d(o){o&&p(e),r&&r.d(o)}}}function lo(l){let e,n,t,r,o,s,u;function i(f){l[3](f)}let a={title:"Help",$$slots:{default:[ro]},$$scope:{ctx:l}};return l[0]!==void 0&&(a.open=l[0]),t=new al({props:a}),U.push(()=>W(t,"open",i)),{c(){e=T("button"),e.innerHTML=`<img src="${no}" title="Help" alt="Help"/>`,n=O(),h(t.$$.fragment),G(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),b(t,f,c),o=!0,s||(u=at(e,"click",l[2]),s=!0)},p(f,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:f}),!r&&c&1&&(r=!0,g.open=f[0],V(()=>r=!1)),t.$set(g)},i(f){o||(m(t.$$.fragment,f),o=!0)},o(f){_(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),v(t,f),s=!1,u()}}}function oo(l,e,n){let{$$slots:t={},$$scope:r}=e,o=!1;const s=()=>n(0,o=!0);function u(i){o=i,n(0,o)}return l.$$set=i=>{"$$scope"in i&&n(4,r=i.$$scope)},[o,t,s,u,r]}class me extends J{constructor(e){super(),K(this,e,oo,lo,Y,{})}}function Hn(l,e,n){const t=l.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function zn(l){let e,n,t,r=l[1]+"",o,s,u;return n=new Ce({props:{color:l[2]}}),{c(){e=T("li"),h(n.$$.fragment),t=O(),o=k(r),s=O()},m(i,a){$(i,e,a),b(n,e,null),w(e,t),w(e,o),w(e,s),u=!0},p(i,a){const f={};a&1&&(f.color=i[2]),n.$set(f),(!u||a&1)&&r!==(r=i[1]+"")&&H(o,r)},i(i){u||(m(n.$$.fragment,i),u=!0)},o(i){_(n.$$.fragment,i),u=!1},d(i){i&&p(e),v(n)}}}function so(l){let e,n,t=De(l[0]),r=[];for(let s=0;s<t.length;s+=1)r[s]=zn(Hn(l,t,s));const o=s=>_(r[s],1,1,()=>{r[s]=null});return{c(){e=T("ul");for(let s=0;s<r.length;s+=1)r[s].c()},m(s,u){$(s,e,u);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);n=!0},p(s,[u]){if(u&1){t=De(s[0]);let i;for(i=0;i<t.length;i+=1){const a=Hn(s,t,i);r[i]?(r[i].p(a,u),m(r[i],1)):(r[i]=zn(a),r[i].c(),m(r[i],1),r[i].m(e,null))}for($e(),i=t.length;i<r.length;i+=1)o(i);pe()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)m(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)_(r[u]);n=!1},d(s){s&&p(e),It(r,s)}}}function io(l,e,n){let{rows:t}=e;return l.$$set=r=>{"rows"in r&&n(0,t=r.rows)},[t]}class On extends J{constructor(e){super(),K(this,e,io,so,Y,{rows:0})}}function qn(l){let e=l[0],n,t,r=Gn(l);return{c(){r.c(),n=Me()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&Y(e,e=o[0])?($e(),_(r,1,1,x),pe(),r=Gn(o),r.c(),m(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(m(r),t=!0)},o(o){_(r),t=!1},d(o){o&&p(n),r.d(o)}}}function Gn(l){let e;const n=l[10].default,t=Wt(n,l,l[9],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&512)&&Vt(t,n,r,r[9],e?Yt(n,r[9],o,null):Xt(r[9]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function ao(l){let e,n,t=l[0]&&qn(l);return{c(){t&&t.c(),e=Me()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&m(t,1)):(t=qn(r),t.c(),m(t,1),t.m(e.parentNode,e)):t&&($e(),_(t,1,1,()=>{t=null}),pe())},i(r){n||(m(t),n=!0)},o(r){_(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function fo(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Sn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=fl();we(l,f,y=>n(8,r=y)),we(l,c,y=>n(0,t=y));let g,d=!0;return ul(()=>{t&&g&&r&&(cl(f,t,g),it(c,t=null,t),n(6,g=void 0))}),l.$$set=y=>{"id"in y&&n(3,u=y.id),"tiles"in y&&n(4,i=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&377&&r&&t!==u&&(it(c,t=u,t),$l(r,t,pl({type:"raster",tiles:i,tileSize:a}),y=>r&&y===t,()=>{t&&(n(6,g=r==null?void 0:r.getSource(t)),n(7,d=!0))})),l.$$.dirty&264&&(r==null||r.on("style.load",()=>{n(6,g=r==null?void 0:r.getSource(u))})),l.$$.dirty&208&&g&&(d?n(7,d=!1):g.setTiles(i))},[t,f,c,u,i,a,g,d,r,s,o]}class uo extends J{constructor(e){super(),K(this,e,fo,ao,Y,{id:3,tiles:4,tileSize:5})}}function co(l){let e;const n=l[16].default,t=Wt(n,l,l[24],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&16777216)&&Vt(t,n,r,r[24],e?Yt(n,r[24],o,null):Xt(r[24]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function $o(l){let e,n,t;function r(s){l[17](s)}let o={id:l[1],type:"symbol",source:l[2],sourceLayer:l[3],beforeId:l[4],beforeLayerType:l[5],paint:l[6],layout:l[7],filter:l[8],applyToClusters:l[9],minzoom:l[10],maxzoom:l[11],hoverCursor:l[12],manageHoverState:l[13],eventsIfTopMost:l[14],interactive:l[15],$$slots:{default:[co]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.hovered=l[0]),e=new Dl({props:o}),U.push(()=>W(e,"hovered",r)),e.$on("click",l[18]),e.$on("dblclick",l[19]),e.$on("contextmenu",l[20]),e.$on("mouseenter",l[21]),e.$on("mousemove",l[22]),e.$on("mouseleave",l[23]),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,[u]){const i={};u&2&&(i.id=s[1]),u&4&&(i.source=s[2]),u&8&&(i.sourceLayer=s[3]),u&16&&(i.beforeId=s[4]),u&32&&(i.beforeLayerType=s[5]),u&64&&(i.paint=s[6]),u&128&&(i.layout=s[7]),u&256&&(i.filter=s[8]),u&512&&(i.applyToClusters=s[9]),u&1024&&(i.minzoom=s[10]),u&2048&&(i.maxzoom=s[11]),u&4096&&(i.hoverCursor=s[12]),u&8192&&(i.manageHoverState=s[13]),u&16384&&(i.eventsIfTopMost=s[14]),u&32768&&(i.interactive=s[15]),u&16777216&&(i.$$scope={dirty:u,ctx:s}),!n&&u&1&&(n=!0,i.hovered=s[0],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function po(l,e,n){let{$$slots:t={},$$scope:r}=e,{id:o=Sn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:g=void 0}=e,{applyToClusters:d=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:L=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:P=!1}=e,{hovered:D=null}=e,{eventsIfTopMost:I=!1}=e,{interactive:N=!0}=e;function A(j){D=j,n(0,D)}function M(j){$t.call(this,l,j)}function E(j){$t.call(this,l,j)}function S(j){$t.call(this,l,j)}function F(j){$t.call(this,l,j)}function q(j){$t.call(this,l,j)}function R(j){$t.call(this,l,j)}return l.$$set=j=>{"id"in j&&n(1,o=j.id),"source"in j&&n(2,s=j.source),"sourceLayer"in j&&n(3,u=j.sourceLayer),"beforeId"in j&&n(4,i=j.beforeId),"beforeLayerType"in j&&n(5,a=j.beforeLayerType),"paint"in j&&n(6,f=j.paint),"layout"in j&&n(7,c=j.layout),"filter"in j&&n(8,g=j.filter),"applyToClusters"in j&&n(9,d=j.applyToClusters),"minzoom"in j&&n(10,y=j.minzoom),"maxzoom"in j&&n(11,L=j.maxzoom),"hoverCursor"in j&&n(12,C=j.hoverCursor),"manageHoverState"in j&&n(13,P=j.manageHoverState),"hovered"in j&&n(0,D=j.hovered),"eventsIfTopMost"in j&&n(14,I=j.eventsIfTopMost),"interactive"in j&&n(15,N=j.interactive),"$$scope"in j&&n(24,r=j.$$scope)},[D,o,s,u,i,a,f,c,g,d,y,L,C,P,I,N,t,A,M,E,S,F,q,R,r]}class mo extends J{constructor(e){super(),K(this,e,po,$o,Y,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Un(l){let e=l[0],n,t,r=Wn(l);return{c(){r.c(),n=Me()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&Y(e,e=o[0])?($e(),_(r,1,1,x),pe(),r=Wn(o),r.c(),m(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(m(r),t=!0)},o(o){_(r),t=!1},d(o){o&&p(n),r.d(o)}}}function Wn(l){let e;const n=l[9].default,t=Wt(n,l,l[8],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&256)&&Vt(t,n,r,r[8],e?Yt(n,r[8],o,null):Xt(r[8]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function _o(l){let e,n,t=l[0]&&Un(l);return{c(){t&&t.c(),e=Me()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&m(t,1)):(t=Un(r),t.c(),m(t,1),t.m(e.parentNode,e)):t&&($e(),_(t,1,1,()=>{t=null}),pe())},i(r){n||(m(t),n=!0)},o(r){_(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function go(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Sn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(i&&i.includes("pmtiles://")&&!Fn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new jl;Fn.addProtocol("pmtiles",y.tile)}const{map:c,self:g}=fl();we(l,c,y=>n(7,r=y)),we(l,g,y=>n(0,t=y));let d;return ul(()=>{t&&r&&(cl(c,t,d),it(g,t=null,t),d=void 0)}),l.$$set=y=>{"id"in y&&n(3,u=y.id),"url"in y&&n(4,i=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,f=y.promoteId),"$$scope"in y&&n(8,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&249&&r&&t!==u&&(it(g,t=u,t),$l(r,t,pl({type:"vector",url:i,tiles:a,promoteId:f}),y=>r&&y===t,()=>{t&&(d=r==null?void 0:r.getSource(t))})),l.$$.dirty&136&&(r==null||r.on("style.load",()=>{d=r==null?void 0:r.getSource(u)}))},[t,c,g,u,i,a,f,r,s,o]}class ve extends J{constructor(e){super(),K(this,e,go,_o,Y,{id:3,url:4,tiles:5,promoteId:6})}}const ho={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Ie=Uint8Array,ut=Uint16Array,dl=Uint32Array,hl=new Ie([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),bl=new Ie([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),bo=new Ie([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),vl=function(l,e){for(var n=new ut(31),t=0;t<31;++t)n[t]=e+=1<<l[t-1];for(var r=new dl(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)r[o]=o-n[t]<<5|t;return[n,r]},wl=vl(hl,2),kl=wl[0],vo=wl[1];kl[28]=258,vo[258]=28;var wo=vl(bl,0),ko=wo[0],gn=new ut(32768);for(var de=0;de<32768;++de){var lt=(de&43690)>>>1|(de&21845)<<1;lt=(lt&52428)>>>2|(lt&13107)<<2,lt=(lt&61680)>>>4|(lt&3855)<<4,gn[de]=((lt&65280)>>>8|(lt&255)<<8)>>>1}var zt=function(l,e,n){for(var t=l.length,r=0,o=new ut(e);r<t;++r)l[r]&&++o[l[r]-1];var s=new ut(e);for(r=0;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var u;if(n){u=new ut(1<<e);var i=15-e;for(r=0;r<t;++r)if(l[r])for(var a=r<<4|l[r],f=e-l[r],c=s[l[r]-1]++<<f,g=c|(1<<f)-1;c<=g;++c)u[gn[c]>>>i]=a}else for(u=new ut(t),r=0;r<t;++r)l[r]&&(u[r]=gn[s[l[r]-1]++]>>>15-l[r]);return u},Jt=new Ie(288);for(var de=0;de<144;++de)Jt[de]=8;for(var de=144;de<256;++de)Jt[de]=9;for(var de=256;de<280;++de)Jt[de]=7;for(var de=280;de<288;++de)Jt[de]=8;var yl=new Ie(32);for(var de=0;de<32;++de)yl[de]=5;var yo=zt(Jt,9,1),So=zt(yl,5,1),sn=function(l){for(var e=l[0],n=1;n<l.length;++n)l[n]>e&&(e=l[n]);return e},Re=function(l,e,n){var t=e/8|0;return(l[t]|l[t+1]<<8)>>(e&7)&n},an=function(l,e){var n=e/8|0;return(l[n]|l[n+1]<<8|l[n+2]<<16)>>(e&7)},Co=function(l){return(l+7)/8|0},Ln=function(l,e,n){(e==null||e<0)&&(e=0),(n==null||n>l.length)&&(n=l.length);var t=new(l.BYTES_PER_ELEMENT==2?ut:l.BYTES_PER_ELEMENT==4?dl:Ie)(n-e);return t.set(l.subarray(e,n)),t},To=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Be=function(l,e,n){var t=new Error(e||To[l]);if(t.code=l,Error.captureStackTrace&&Error.captureStackTrace(t,Be),!n)throw t;return t},Oo=function(l,e,n){var t=l.length;if(!t||n&&n.f&&!n.l)return e||new Ie(0);var r=!e||n,o=!n||n.i;n||(n={}),e||(e=new Ie(t*3));var s=function(Fe){var Te=e.length;if(Fe>Te){var et=new Ie(Math.max(Te*2,Fe));et.set(e),e=et}},u=n.f||0,i=n.p||0,a=n.b||0,f=n.l,c=n.d,g=n.m,d=n.n,y=t*8;do{if(!f){u=Re(l,i,1);var L=Re(l,i+1,3);if(i+=3,L)if(L==1)f=yo,c=So,g=9,d=5;else if(L==2){var I=Re(l,i,31)+257,N=Re(l,i+10,15)+4,A=I+Re(l,i+5,31)+1;i+=14;for(var M=new Ie(A),E=new Ie(19),S=0;S<N;++S)E[bo[S]]=Re(l,i+S*3,7);i+=N*3;for(var F=sn(E),q=(1<<F)-1,R=zt(E,F,1),S=0;S<A;){var j=R[Re(l,i,q)];i+=j&15;var C=j>>>4;if(C<16)M[S++]=C;else{var B=0,X=0;for(C==16?(X=3+Re(l,i,3),i+=2,B=M[S-1]):C==17?(X=3+Re(l,i,7),i+=3):C==18&&(X=11+Re(l,i,127),i+=7);X--;)M[S++]=B}}var re=M.subarray(0,I),le=M.subarray(I);g=sn(re),d=sn(le),f=zt(re,g,1),c=zt(le,d,1)}else Be(1);else{var C=Co(i)+4,P=l[C-4]|l[C-3]<<8,D=C+P;if(D>t){o&&Be(0);break}r&&s(a+P),e.set(l.subarray(C,D),a),n.b=a+=P,n.p=i=D*8,n.f=u;continue}if(i>y){o&&Be(0);break}}r&&s(a+131072);for(var ce=(1<<g)-1,Ae=(1<<d)-1,Oe=i;;Oe=i){var B=f[an(l,i)&ce],ie=B>>>4;if(i+=B&15,i>y){o&&Be(0);break}if(B||Be(2),ie<256)e[a++]=ie;else if(ie==256){Oe=i,f=null;break}else{var Le=ie-254;if(ie>264){var S=ie-257,ue=hl[S];Le=Re(l,i,(1<<ue)-1)+kl[S],i+=ue}var _e=c[an(l,i)&Ae],ge=_e>>>4;_e||Be(3),i+=_e&15;var le=ko[ge];if(ge>3){var ue=bl[ge];le+=an(l,i)&(1<<ue)-1,i+=ue}if(i>y){o&&Be(0);break}r&&s(a+131072);for(var je=a+Le;a<je;a+=4)e[a]=e[a-le],e[a+1]=e[a+1-le],e[a+2]=e[a+2-le],e[a+3]=e[a+3-le];a=je}}n.l=f,n.p=Oe,n.b=a,n.f=u,f&&(u=1,n.m=g,n.d=c,n.n=d)}while(!u);return a==e.length?e:Ln(e,0,a)},Lo=new Ie(0),Qe=function(l,e){return l[e]|l[e+1]<<8},He=function(l,e){return(l[e]|l[e+1]<<8|l[e+2]<<16|l[e+3]<<24)>>>0},fn=function(l,e){return He(l,e)+He(l,e+4)*4294967296};function Ao(l,e){return Oo(l,e)}var dn=typeof TextDecoder<"u"&&new TextDecoder,Io=0;try{dn.decode(Lo,{stream:!0}),Io=1}catch{}var Po=function(l){for(var e="",n=0;;){var t=l[n++],r=(t>127)+(t>223)+(t>239);if(n+r>l.length)return[e,Ln(l,n-1)];r?r==3?(t=((t&15)<<18|(l[n++]&63)<<12|(l[n++]&63)<<6|l[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):r&1?e+=String.fromCharCode((t&31)<<6|l[n++]&63):e+=String.fromCharCode((t&15)<<12|(l[n++]&63)<<6|l[n++]&63):e+=String.fromCharCode(t)}};function Sl(l,e){if(e){for(var n="",t=0;t<l.length;t+=16384)n+=String.fromCharCode.apply(null,l.subarray(t,t+16384));return n}else{if(dn)return dn.decode(l);var r=Po(l),o=r[0],s=r[1];return s.length&&Be(8),o}}var Mo=function(l,e){return e+30+Qe(l,e+26)+Qe(l,e+28)},No=function(l,e,n){var t=Qe(l,e+28),r=Sl(l.subarray(e+46,e+46+t),!(Qe(l,e+8)&2048)),o=e+46+t,s=He(l,e+20),u=n&&s==4294967295?Fo(l,o):[s,He(l,e+24),He(l,e+42)],i=u[0],a=u[1],f=u[2];return[Qe(l,e+10),i,a,r,o+Qe(l,e+30)+Qe(l,e+32),f]},Fo=function(l,e){for(;Qe(l,e)!=1;e+=4+Qe(l,e+2));return[fn(l,e+12),fn(l,e+4),fn(l,e+20)]};function Eo(l,e){for(var n={},t=l.length-22;He(l,t)!=101010256;--t)(!t||l.length-t>65558)&&Be(13);var r=Qe(l,t+8);if(!r)return{};var o=He(l,t+16),s=o==4294967295||r==65535;if(s){var u=He(l,t-12);s=He(l,u)==101075792,s&&(r=He(l,u+32),o=He(l,u+48))}for(var i=e&&e.filter,a=0;a<r;++a){var f=No(l,o,s),c=f[0],g=f[1],d=f[2],y=f[3],L=f[4],C=f[5],P=Mo(l,C);o=L,(!i||i({name:y,size:g,originalSize:d,compression:c}))&&(c?c==8?n[y]=Ao(l.subarray(P,P+g),new Ie(d)):Be(14,"unknown compression type "+c):n[y]=Ln(l,P,P+g))}return n}function Do(l){return l instanceof File||l instanceof Blob?l.arrayBuffer().then(un):un(l)}function un(l){var e=new Uint8Array(l),n=Eo(e);return Promise.resolve(jo(n))}function jo(l){for(var e=[],n=0,t=Object.keys(l);n<t.length;n++){var r=t[n];e[r]=Sl(l[r])}return e}function Ze(l,e){for(var n=0;n<l.childNodes.length;){var t=l.childNodes[n];if(t.nodeType===1&&ct(t)===e)return t;n++}}function Kt(l,e){for(var n=[],t=0;t<l.childNodes.length;){var r=l.childNodes[t];r.nodeType===1&&ct(r)===e&&n.push(r),t++}return n}function nn(l,e,n){for(var t=0;t<l.childNodes.length;){var r=l.childNodes[t];e?r.nodeType===1&&ct(r)===e&&n(r,t):n(r,t),t++}}function Ro(l,e,n){var t=[];return nn(l,e,function(r,o){t.push(n(r,o))}),t}var Bo=/.+\:/;function ct(l){return l.tagName.replace(Bo,"")}function Cl(l){if(l.nodeType!==1)return l.textContent;for(var e="<"+ct(l),n=0;n<l.attributes.length;)e+=" "+l.attributes[n].name+'="'+l.attributes[n].value+'"',n++;e+=">";for(var t=0;t<l.childNodes.length;)e+=Cl(l.childNodes[t]),t++;return e+="</"+ct(l)+">",e}function Ho(l){var e=l.documentElement,n=Ze(e,"sheetData"),t=[];return nn(n,"row",function(r){nn(r,"c",function(o){t.push(o)})}),t}function zo(l,e){return Ze(e,"v")}function qo(l,e){if(e.firstChild&&ct(e.firstChild)==="is"&&e.firstChild.firstChild&&ct(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Go(l){var e=l.documentElement,n=Ze(e,"dimension");if(n)return n.getAttribute("ref")}function Uo(l){var e=l.documentElement,n=Ze(e,"cellStyleXfs");return n?Kt(n,"xf"):[]}function Wo(l){var e=l.documentElement,n=Ze(e,"cellXfs");return n?Kt(n,"xf"):[]}function Vo(l){var e=l.documentElement,n=Ze(e,"numFmts");return n?Kt(n,"numFmt"):[]}function Xo(l){var e=l.documentElement;return Ro(e,"si",function(n){var t=Ze(n,"t");if(t)return t.textContent;var r="";return nn(n,"r",function(o){r+=Ze(o,"t").textContent}),r})}function Yo(l){var e=l.documentElement;return Ze(e,"workbookPr")}function Qo(l){var e=l.documentElement;return Kt(e,"Relationship")}function Jo(l){var e=l.documentElement,n=Ze(e,"sheets");return Kt(n,"sheet")}function Ko(l,e){var n=e.createDocument(l),t={},r=Yo(n);r&&r.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return Jo(n).forEach(o),t}function Zo(l,e){var n=e.createDocument(l),t={sheets:{},sharedStrings:void 0,styles:void 0},r=function(s){var u=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=cn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=cn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=cn(u);break}};return Qo(n).forEach(r),t}function cn(l){return l[0]==="/"?l.slice(1):"xl/"+l}function Vn(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function Xn(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Vn(Object(n),!0).forEach(function(t){xo(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function xo(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function es(l,e){if(!l)return{};var n=e.createDocument(l),t=Uo(n).map($n),r=Vo(n).map(ts).reduce(function(s,u){return s[u.id]=u,s},[]),o=function(u){return u.hasAttribute("xfId")?Xn(Xn({},t[u.xfId]),$n(u,r)):$n(u,r)};return Wo(n).map(o)}function ts(l){return{id:l.getAttribute("numFmtId"),template:l.getAttribute("formatCode")}}function $n(l,e){var n={};if(l.hasAttribute("numFmtId")){var t=l.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function ns(l,e){return l?Xo(e.createDocument(l)):[]}function Tl(l,e){e&&e.epoch1904&&(l+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((l-n)*24*t))}function rs(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=ls(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ls(l,e){if(l){if(typeof l=="string")return Yn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yn(l,e)}}function Yn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function os(l,e,n){if(l){var t=e[l];if(!t)throw new Error("Cell style not found: ".concat(l));if(!t.numberFormat)return!1;if(ss.indexOf(Number(t.numberFormat.id))>=0||n.dateFormat&&t.numberFormat.template===n.dateFormat||n.smartDateParser!==!1&&t.numberFormat.template&&fs(t.numberFormat.template))return!0}}var ss=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],is=/^\[\$-414\]/,as=/;@$/;function fs(l){l=l.toLowerCase(),l=l.replace(is,""),l=l.replace(as,"");for(var e=l.split(/\W+/),n=rs(e),t;!(t=n()).done;){var r=t.value;if(us.indexOf(r)<0)return!1}return!0}var us=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function cs(l,e,n){var t=n.getInlineStringValue,r=n.getInlineStringXml,o=n.getStyleId,s=n.styles,u=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":l=pn(l,a);break;case"inlineStr":if(l=t(),l===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(r()));l=pn(l,a);break;case"s":var f=Number(l);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(l));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(l));l=u[f],l=pn(l,a);break;case"b":if(l==="1")l=!0;else if(l==="0")l=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(l));break;case"z":l=void 0;break;case"e":l=$s(l);break;case"d":if(l===void 0)break;var c=new Date(l);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(l));l=c;break;case"n":if(l===void 0)break;var g=os(o(),s,a);g?(l=Qn(l),l=Tl(l,i)):l=(a.parseNumber||Qn)(l);break;default:throw new TypeError("Cell type not supported: ".concat(e))}return l===void 0&&(l=null),l}function $s(l){switch(l){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(l)}}function pn(l,e){return e.trim!==!1&&(l=l.trim()),l===""&&(l=void 0),l}function Qn(l){var e=Number(l);if(isNaN(e))throw new Error('Invalid "numeric" cell value: '.concat(l));return e}var ps=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function ms(l){var e=function(a,f){return a-f},n=l.map(function(i){return i.row}).sort(e),t=l.map(function(i){return i.column}).sort(e),r=n[0],o=n[n.length-1],s=t[0],u=t[t.length-1];return[{row:r,column:s},{row:o,column:u}]}function _s(l){for(var e=0,n=0;n<l.length;)e*=26,e+=ps.indexOf(l[n]),n++;return e}function Ol(l){return l=l.split(/(\d+)/),[parseInt(l[1]),_s(l[0].trim())]}function gs(l,e,n,t,r,o,s){var u=Ol(l.getAttribute("r")),i=zo(e,l),a=i&&i.textContent,f;return l.hasAttribute("t")&&(f=l.getAttribute("t")),{row:u[0],column:u[1],value:cs(a,f,{getInlineStringValue:function(){return qo(e,l)},getInlineStringXml:function(){return Cl(l)},getStyleId:function(){return l.getAttribute("s")},styles:r,values:t,properties:o,options:s})}}function ds(l,e,n,t,r,o){var s=Ho(l);return s.length===0?[]:s.map(function(u){return gs(u,l,e,n,t,r,o)})}function hs(l,e){return ks(l)||ws(l,e)||vs(l,e)||bs()}function bs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vs(l,e){if(l){if(typeof l=="string")return Jn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jn(l,e)}}function Jn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function ws(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function ks(l){if(Array.isArray(l))return l}function ys(l){var e=Go(l);if(e)return e=e.split(":").map(Ol).map(function(n){var t=hs(n,2),r=t[0],o=t[1];return{row:r,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Ss(l,e,n,t,r,o){var s=e.createDocument(l),u=ds(s,e,n,t,r,o),i=ys(s)||ms(u);return{cells:u,dimensions:i}}function Cs(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Ts(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ts(l,e){if(l){if(typeof l=="string")return Kn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kn(l,e)}}function Kn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Os(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,r=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=l.length-1;s>=0;){for(var u=!0,i=Cs(l[s]),a;!(a=i()).done;){var f=a.value;if(r(f)!==null){u=!1;break}}if(u)l.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return l}function Ls(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=As(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function As(l,e){if(l){if(typeof l=="string")return Zn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zn(l,e)}}function Zn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Is(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,r=e.onlyTrimAtTheEnd,o=l[0].length-1;o>=0;){for(var s=!0,u=Ls(l),i;!(i=u()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var f=0;f<l.length;)l[f].splice(o,1),f++;else if(r)break;o--}return l}function Ps(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Ll(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ms(l,e){return Es(l)||Fs(l,e)||Ll(l,e)||Ns()}function Ns(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ll(l,e){if(l){if(typeof l=="string")return xn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xn(l,e)}}function xn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Fs(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Es(l){if(Array.isArray(l))return l}function Ds(l,e){var n=l.dimensions,t=l.cells;if(t.length===0)return[];var r=Ms(n,2);r[0];for(var o=r[1],s=o.column,u=o.row,i=new Array(u),a=0;a<u;){i[a]=new Array(s);for(var f=0;f<s;)i[a][f]=null,f++;a++}for(var c=Ps(t),g;!(g=c()).done;){var d=g.value,y=d.row-1,L=d.column-1;L<s&&y<u&&(i[y][L]=d.value)}var C=e.rowMap;if(C)for(var P=0;P<i.length;)C[P]=P,P++;return i=Os(Is(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:C}),e.transformData&&(i=e.transformData(i)),i}function js(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Rs(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rs(l,e){if(l){if(typeof l=="string")return er(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return er(l,e)}}function er(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function tr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function Bs(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tr(Object(n),!0).forEach(function(t){Hs(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):tr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function Hs(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function zs(l,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Bs({sheet:1},n));var t=function(g){if(!l[g])throw new Error('"'.concat(g,'" file not found inside the *.xlsx file zip archive'));return l[g]},r=Zo(t("xl/_rels/workbook.xml.rels"),e),o=r.sharedStrings?ns(t(r.sharedStrings),e):[],s=r.styles?es(t(r.styles),e):{},u=Ko(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var g=c.name;return{name:g}});var i=qs(n.sheet,u.sheets);if(!i||!r.sheets[i])throw Gs(n.sheet,u.sheets);var a=Ss(t(r.sheets[i]),e,o,s,u,n),f=Ds(a,n);return n.properties?{data:f,properties:u}:f}function qs(l,e){if(typeof l=="number"){var n=e[l-1];return n&&n.relationId}for(var t=js(e),r;!(r=t()).done;){var o=r.value;if(o.name===l)return o.relationId}}function Gs(l,e){var n=e&&e.map(function(t,r){return'"'.concat(t.name,'" (#').concat(r+1,")")}).join(", ");return new Error("Sheet ".concat(typeof l=="number"?"#"+l:'"'+l+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function hn(l){"@babel/helpers - typeof";return hn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hn(l)}function nr(l,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function Us(l,e,n){return e&&nr(l.prototype,e),n&&nr(l,n),Object.defineProperty(l,"prototype",{writable:!1}),l}function Ws(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function")}function Vs(l,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(e&&e.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),e&&Gt(l,e)}function Xs(l){var e=Al();return function(){var t=Ut(l),r;if(e){var o=Ut(this).constructor;r=Reflect.construct(t,arguments,o)}else r=t.apply(this,arguments);return Ys(this,r)}}function Ys(l,e){if(e&&(hn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qs(l)}function Qs(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function bn(l){var e=typeof Map=="function"?new Map:void 0;return bn=function(t){if(t===null||!Js(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return en(t,arguments,Ut(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Gt(r,t)},bn(l)}function en(l,e,n){return Al()?en=Reflect.construct:en=function(r,o,s){var u=[null];u.push.apply(u,o);var i=Function.bind.apply(r,u),a=new i;return s&&Gt(a,s.prototype),a},en.apply(null,arguments)}function Al(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Js(l){return Function.toString.call(l).indexOf("[native code]")!==-1}function Gt(l,e){return Gt=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t},Gt(l,e)}function Ut(l){return Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ut(l)}var Pe=function(l){Vs(n,l);var e=Xs(n);function n(t){var r;return Ws(this,n),r=e.call(this,"invalid"),r.reason=t,r}return Us(n)}(bn(Error));function Ks(l){if(typeof l=="string"){var e=l;if(l=Number(l),String(l)!==e)throw new Pe("not_a_number")}if(typeof l!="number")throw new Pe("not_a_number");if(isNaN(l))throw new Pe("invalid_number");if(!isFinite(l))throw new Pe("out_of_bounds");return l}function Zs(l){if(typeof l=="string")return l;if(typeof l=="number"){if(isNaN(l))throw new Pe("invalid_number");if(!isFinite(l))throw new Pe("out_of_bounds");return String(l)}throw new Pe("not_a_string")}function xs(l){if(typeof l=="boolean")return l;throw new Pe("not_a_boolean")}function ei(l,e){var n=e.properties;if(l instanceof Date){if(isNaN(l.valueOf()))throw new Pe("out_of_bounds");return l}if(typeof l=="number"){if(isNaN(l))throw new Pe("invalid_number");if(!isFinite(l))throw new Pe("out_of_bounds");var t=Tl(l,n);if(isNaN(t.valueOf()))throw new Pe("out_of_bounds");return t}throw new Pe("not_a_date")}function ti(l,e){return li(l)||ri(l,e)||Il(l,e)||ni()}function ni(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ri(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function li(l){if(Array.isArray(l))return l}function vn(l){"@babel/helpers - typeof";return vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vn(l)}function oi(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Il(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Il(l,e){if(l){if(typeof l=="string")return rr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rr(l,e)}}function rr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function lr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function or(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lr(Object(n),!0).forEach(function(t){si(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function si(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}var sr={isColumnOriented:!1};function ii(l,e,n){n?n=or(or({},sr),n):n=sr;var t=n,r=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;ci(e),r&&(l=ui(l));for(var u=l[0],i=[],a=[],f=1;f<l.length;f++){var c=Pl(e,l[f],f,u,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var g=oi(a),d;!(d=g()).done;){var y=d.value;y.row=o[y.row-1]+1}return{rows:i,errors:a}}function Pl(l,e,n,t,r,o){for(var s={},u=!0,i=function(D){var I=D.column,N=D.value,A=D.error,M=D.reason,E={error:A,row:n+1,column:I,value:N};return M&&(E.reason=M),l[I].type&&(E.type=l[I].type),E},a=[],f=function(){var D=g[c],I=l[D],N=vn(I.type)==="object"&&!Array.isArray(I.type),A=e[t.indexOf(D)];A===void 0&&(A=null);var M=void 0,E=void 0,S=void 0;if(N)M=Pl(I.type,e,n,t,r,o);else if(A===null)M=null;else if(Array.isArray(I.type)){var F=!1,q=fi(A).map(function(j){var B=ir(j,I,o);return B.error&&(M=j,E=B.error,S=B.reason),B.value!==null&&(F=!0),B.value});E||(M=F?q:null)}else{var R=ir(A,I,o);E=R.error,S=R.reason,M=E?A:R.value}!E&&M===null&&(typeof I.required=="function"?a.push({column:D}):I.required===!0&&(E="required")),E?r.push(i({column:D,value:M,error:E,reason:S})):(u&&M!==null&&(u=!1),(M!==null||o.includeNullValues)&&(s[I.prop]=M))},c=0,g=Object.keys(l);c<g.length;c++)f();if(u)return null;for(var d=0,y=a;d<y.length;d++){var L=y[d].column,C=l[L].required(s);C&&r.push(i({column:L,value:null,error:"required"}))}return s}function ir(l,e,n){if(l===null)return{value:null};var t;if(e.parse?t=pt(l,e.parse):e.type?t=ai(l,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:l},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(r){return{error:r.message}}}return t}function pt(l,e){try{return l=e(l),l===void 0?{value:null}:{value:l}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function ai(l,e,n){switch(e){case String:return pt(l,Zs);case Number:return pt(l,Ks);case Date:return pt(l,function(t){return ei(t,{properties:n.properties})});case Boolean:return pt(l,xs);default:if(typeof e=="function")return pt(l,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Ml(l,e,n){for(var t=0,r="";n+t<l.length;){var o=l[n+t];if(o===e)return[r,t];if(o==='"'){var s=Ml(l,'"',n+t+1);r+=s[0],t+=1+s[1]+1}else r+=o,t++}return[r,t]}function fi(l){for(var e=[],n=0;n<l.length;){var t=Ml(l,",",n),r=ti(t,2),o=r[0],s=r[1];n+=s+1,e.push(o.trim())}return e}var ui=function(e){return e[0].map(function(n,t){return e.map(function(r){return r[t]})})};function ci(l){for(var e=0,n=Object.keys(l);e<n.length;e++){var t=n[e],r=l[t];if(!r.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function wn(l){"@babel/helpers - typeof";return wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wn(l)}function Nl(l){for(var e={},n=0,t=Object.keys(l);n<t.length;n++){var r=t[n],o=l[r],s=void 0;wn(o)==="object"&&(o=Object.keys(l[r])[0],s=Nl(l[r][o])),e[r]={prop:o},s&&(e[r].type=s)}return e}var $i=["schema","map"];function ar(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function xt(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ar(Object(n),!0).forEach(function(t){pi(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):ar(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function pi(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function mi(l,e){if(l==null)return{};var n=_i(l,e),t,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);for(r=0;r<o.length;r++)t=o[r],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(l,t)&&(n[t]=l[t])}return n}function _i(l,e){if(l==null)return{};var n={},t=Object.keys(l),r,o;for(o=0;o<t.length;o++)r=t[o],!(e.indexOf(r)>=0)&&(n[r]=l[r]);return n}function gi(l,e,n){var t=n.schema,r=n.map,o=mi(n,$i);!t&&r&&(t=Nl(r));var s=zs(l,e,xt(xt({},o),{},{properties:t||o.properties}));return t?ii(s.data,t,xt(xt({},o),{},{properties:s.properties})):s}function di(l){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Do(l).then(function(n){return gi(n,ho,e)})}function hi(l){let e=new Map;for(let[t,r]of Object.entries(l.schemes))e.set(t,r);l.features=l.features.filter(t=>bi(t));let n=1;for(let t of l.features){let r=e.get(t.properties.scheme_reference);r.browse&&(t.properties.funding_programme=r.browse.funding_programme,t.properties.current_milestone=r.browse.current_milestone,t.id=n++)}return e}function bi(l){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(l.properties.id)}async function vi(l){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await di(l,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let r of n){let o=Rl(r.lat_lon.split(",").map(parseFloat).reverse()),s=r;s.submission_time=r.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const kn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function wi(l){return Nt(["get","intervention_type"],{area:nt.area,route:nt.route,crossing:nt.crossing,other:nt.other},"white")}function ki(l){return[["Areas",nt.area],["Routes",nt.route],["Crossings",nt.crossing],["Other",nt.other]]}const Q={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"]},ze=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function yn(){let[l,e]=Fl(kn,Q.funding_programmes);return[Nt(["get","funding_programme"],l,"grey"),e]}function yi(){let l=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,n]=Fl(l,Q.current_milestone);return[Nt(["get","current_milestone"],e,"grey"),n]}function Fl(l,e){let n=[],t={},r=0;for(let o of l){let s=e[r++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function Si(l){let e,n;return e=new On({props:{rows:l[1]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ci(l){let e,n,t,r,o;function s(i){l[3](i)}let u={label:"Color interventions",id:"colorInterventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return l[0]!==void 0&&(u.value=l[0]),e=new At({props:u}),U.push(()=>W(e,"value",s)),e.$on("change",l[2]),r=new Ee({props:{label:"Legend",$$slots:{default:[Si]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};!n&&a&1&&(n=!0,f.value=i[0],V(()=>n=!1)),e.$set(f);const c={};a&66&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function Ti(l,e,n){let t;we(l,Cn,a=>n(4,t=a));let r="fundingProgramme",[o,s]=yn();function u(){let a;r=="interventionType"?(a=wi(),n(1,s=ki())):r=="fundingProgramme"?n(1,[a,s]=yn(),s):r=="currentMilestone"&&n(1,[a,s]=yi(),s),t.setPaintProperty("interventions-points","circle-color",a),t.setPaintProperty("interventions-lines","line-color",a),t.setPaintProperty("interventions-polygons","fill-color",a),t.setPaintProperty("interventions-polygons-outlines","line-color",a)}function i(a){r=a,n(0,r)}return[r,s,u,i]}class Oi extends J{constructor(e){super(),K(this,e,Ti,Ci,Y,{})}}const Mt=Qt({type:"FeatureCollection",features:[],schemes:{}}),rn=Qt(new Map),fr=Qt(!0),Dt=Qt(""),jt=Qt("");function Li(l){let e;return{c(){e=k("Reset all filters")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ai(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ii(l){let e,n,t,r,o,s;return t=new Pt({props:{$$slots:{default:[Ai]},$$scope:{ctx:l}}}),t.$on("click",l[16]),{c(){e=T("input"),n=O(),h(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(u,i){$(u,e,i),Je(e,l[6]),$(u,n,i),b(t,u,i),r=!0,o||(s=at(e,"input",l[15]),o=!0)},p(u,i){i&64&&e.value!==u[6]&&Je(e,u[6]);const a={};i&16777216&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(m(t.$$.fragment,u),r=!0)},o(u){_(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),v(t,u),o=!1,s()}}}function Pi(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mi(l){let e,n,t,r,o,s;return t=new Pt({props:{$$slots:{default:[Pi]},$$scope:{ctx:l}}}),t.$on("click",l[18]),{c(){e=T("input"),n=O(),h(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterSchemeText")},m(u,i){$(u,e,i),Je(e,l[5]),$(u,n,i),b(t,u,i),r=!0,o||(s=at(e,"input",l[17]),o=!0)},p(u,i){i&32&&e.value!==u[5]&&Je(e,u[5]);const a={};i&16777216&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(m(t.$$.fragment,u),r=!0)},o(u){_(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),v(t,u),o=!1,s()}}}function Ni(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y,L,C,P;e=new Pt({props:{$$slots:{default:[Li]},$$scope:{ctx:l}}}),e.$on("click",l[11]);function D(S){l[12](S)}let I={label:"Authority or region",id:"filterAuthority",choices:l[7],emptyOption:!0};l[2]!==void 0&&(I.value=l[2]),t=new At({props:I}),U.push(()=>W(t,"value",D));function N(S){l[13](S)}let A={label:"Funding programme",id:"filterFundingProgramme",choices:l[8],emptyOption:!0};l[3]!==void 0&&(A.value=l[3]),s=new At({props:A}),U.push(()=>W(s,"value",N));function M(S){l[14](S)}let E={label:"Current milestone",id:"filterCurrentMilestone",choices:l[9],emptyOption:!0};return l[4]!==void 0&&(E.value=l[4]),a=new At({props:E}),U.push(()=>W(a,"value",M)),g=new mn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Ii]},$$scope:{ctx:l}}}),y=new mn({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[Mi]},$$scope:{ctx:l}}}),C=new Oi({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),o=O(),h(s.$$.fragment),i=O(),h(a.$$.fragment),c=O(),h(g.$$.fragment),d=O(),h(y.$$.fragment),L=O(),h(C.$$.fragment)},m(S,F){b(e,S,F),$(S,n,F),b(t,S,F),$(S,o,F),b(s,S,F),$(S,i,F),b(a,S,F),$(S,c,F),b(g,S,F),$(S,d,F),b(y,S,F),$(S,L,F),b(C,S,F),P=!0},p(S,F){const q={};F&16777216&&(q.$$scope={dirty:F,ctx:S}),e.$set(q);const R={};F&128&&(R.choices=S[7]),!r&&F&4&&(r=!0,R.value=S[2],V(()=>r=!1)),t.$set(R);const j={};F&256&&(j.choices=S[8]),!u&&F&8&&(u=!0,j.value=S[3],V(()=>u=!1)),s.$set(j);const B={};F&512&&(B.choices=S[9]),!f&&F&16&&(f=!0,B.value=S[4],V(()=>f=!1)),a.$set(B);const X={};F&16777280&&(X.$$scope={dirty:F,ctx:S}),g.$set(X);const re={};F&16777248&&(re.$$scope={dirty:F,ctx:S}),y.$set(re)},i(S){P||(m(e.$$.fragment,S),m(t.$$.fragment,S),m(s.$$.fragment,S),m(a.$$.fragment,S),m(g.$$.fragment,S),m(y.$$.fragment,S),m(C.$$.fragment,S),P=!0)},o(S){_(e.$$.fragment,S),_(t.$$.fragment,S),_(s.$$.fragment,S),_(a.$$.fragment,S),_(g.$$.fragment,S),_(y.$$.fragment,S),_(C.$$.fragment,S),P=!1},d(S){S&&(p(n),p(o),p(i),p(c),p(d),p(L)),v(e,S),v(t,S),v(s,S),v(a,S),v(g,S),v(y,S),v(C,S)}}}function Fi(l){let e,n=l[0].size.toLocaleString()+"",t,r,o=l[10].route.toLocaleString()+"",s,u,i=l[10].area.toLocaleString()+"",a,f,c=l[10].crossing.toLocaleString()+"",g,d,y=l[10].other.toLocaleString()+"",L,C,P=ur(l[10].totalLength).toFixed(1)+"",D,I;return{c(){e=k("Showing "),t=k(n),r=k(" schemes ("),s=k(o),u=k(`
    routes, `),a=k(i),f=k(` areas,
    `),g=k(c),d=k(" crossings, "),L=k(y),C=k(`
    other, with total LineString length of `),D=k(P),I=k(" miles)")},m(N,A){$(N,e,A),$(N,t,A),$(N,r,A),$(N,s,A),$(N,u,A),$(N,a,A),$(N,f,A),$(N,g,A),$(N,d,A),$(N,L,A),$(N,C,A),$(N,D,A),$(N,I,A)},p(N,A){A&1&&n!==(n=N[0].size.toLocaleString()+"")&&H(t,n),A&1024&&o!==(o=N[10].route.toLocaleString()+"")&&H(s,o),A&1024&&i!==(i=N[10].area.toLocaleString()+"")&&H(a,i),A&1024&&c!==(c=N[10].crossing.toLocaleString()+"")&&H(g,c),A&1024&&y!==(y=N[10].other.toLocaleString()+"")&&H(L,y),A&1024&&P!==(P=ur(N[10].totalLength).toFixed(1)+"")&&H(D,P)},d(N){N&&(p(e),p(t),p(r),p(s),p(u),p(a),p(f),p(g),p(d),p(L),p(C),p(D),p(I))}}}function Ei(l){let e,n,t;function r(s){l[19](s)}let o={id:"show-schemes",$$slots:{default:[Fi]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new oe({props:o}),U.push(()=>W(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){const i={};u&16778241&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Di(l){let e,n,t,r;return e=new Ee({props:{label:"Filters",$$slots:{default:[Ni]},$$scope:{ctx:l}}}),t=new xe({props:{small:!0,$$slots:{default:[Ei]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const u={};s&16778236&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16778243&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function ur(l){return l*621371e-9}function ji(l,e,n){let t,r,o,s;we(l,jt,R=>n(5,t=R)),we(l,Dt,R=>n(6,r=R)),we(l,Mt,R=>n(20,o=R)),we(l,rn,R=>n(21,s=R));let{schemesToBeShown:u=new Set}=e,{show:i=!0}=e,a=[],f="",c=[],g=new Set(kn.slice(0,-1)),d="",y=[],L="",C={area:0,route:0,crossing:0,other:0,totalLength:0};Tn(()=>{var X,re,le;let R=new Set,j=new Set,B=new Set;for(let ce of s.values())(X=ce.browse)!=null&&X.authority_or_region&&R.add(ce.browse.authority_or_region),(re=ce.browse)!=null&&re.funding_programme&&j.add(ce.browse.funding_programme),(le=ce.browse)!=null&&le.current_milestone&&B.add(ce.browse.current_milestone);n(7,a=Array.from(R.entries())),a.sort(),n(8,c=kn.map(ce=>[ce,ce])),n(9,y=Array.from(B.entries())),y.sort()});function P(R,j,B,X,re){let le=R.toLowerCase(),ce=j.toLowerCase(),Ae=ie=>{var Le,ue,_e,ge,je,Fe;if(le&&!((Le=ie.properties.name)!=null&&Le.toLowerCase().includes(le))&&!((ue=ie.properties.description)!=null&&ue.toLowerCase().includes(le)))return!1;if(ce||B||X||re){let Te=s.get(ie.properties.scheme_reference);if(B&&((_e=Te.browse)==null?void 0:_e.authority_or_region)!=B||X&&X!=="Other"&&((ge=Te.browse)==null?void 0:ge.funding_programme)!=X||X==="Other"&&g.has(((je=Te.browse)==null?void 0:je.funding_programme)??"")||re&&((Fe=Te.browse)==null?void 0:Fe.current_milestone)!=re||ce&&!Te.scheme_reference.toLowerCase().includes(ce)&&!(Te.scheme_name??"").toLowerCase().includes(ce))return!1}return!0};n(0,u=new Set(o.features.filter(Ae).map(ie=>ie.properties.scheme_reference))),n(10,C={area:0,route:0,crossing:0,other:0,totalLength:0});let Oe=ie=>{var Le,ue;return!(!u.has(ie.properties.scheme_reference)||le&&!((Le=ie.properties.name)!=null&&Le.toLowerCase().includes(le))&&!((ue=ie.properties.description)!=null&&ue.toLowerCase().includes(le)))};for(let ie of o.features)Oe(ie)?(delete ie.properties.hide_while_editing,n(10,C[ie.properties.intervention_type]++,C),ie.geometry.type=="LineString"&&ie.properties.length_meters&&n(10,C.totalLength+=ie.properties.length_meters,C)):ie.properties.hide_while_editing=!0;Mt.set(o),n(10,C)}function D(){n(2,f=""),n(3,d=""),n(4,L=""),it(Dt,r="",r),it(jt,t="",t)}function I(R){f=R,n(2,f)}function N(R){d=R,n(3,d)}function A(R){L=R,n(4,L)}function M(){r=this.value,Dt.set(r)}const E=()=>it(Dt,r="",r);function S(){t=this.value,jt.set(t)}const F=()=>it(jt,t="",t);function q(R){i=R,n(1,i)}return l.$$set=R=>{"schemesToBeShown"in R&&n(0,u=R.schemesToBeShown),"show"in R&&n(1,i=R.show)},l.$$.update=()=>{l.$$.dirty&124&&P(r,t,f,d,L)},[u,i,f,d,L,t,r,a,c,y,C,D,I,N,A,M,E,S,F,q]}class Ri extends J{constructor(e){super(),K(this,e,ji,Di,Y,{schemesToBeShown:0,show:1})}}function Bi(l){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hi(l){let e,n,t,r,o;return t=new Z({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Bi]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("License: "),h(t.$$.fragment),r=k(`. Contains OS data © Crown copyright and database right
  2023.`)},m(s,u){$(s,e,u),w(e,n),b(t,e,null),w(e,r),o=!0},p(s,[u]){const i={};u&1&&(i.$$scope={dirty:u,ctx:s}),t.$set(i)},i(s){o||(m(t.$$.fragment,s),o=!0)},o(s){_(t.$$.fragment,s),o=!1},d(s){s&&p(e),v(t)}}}class Ne extends J{constructor(e){super(),K(this,e,null,Hi,Y,{})}}function cr(l,e,n){const t=l.slice();return t[2]=e[n],t}function $r(l,e,n){const t=l.slice();return t[5]=e[n],t}function pr(l){let e,n;return{c(){e=T("span"),n=k(` 
    `),ye(e,"background",l[5]),ye(e,"width","100%"),ye(e,"border","1px solid black")},m(t,r){$(t,e,r),w(e,n)},p(t,r){r&1&&ye(e,"background",t[5])},d(t){t&&p(e)}}}function mr(l){let e,n=l[2]+"",t;return{c(){e=T("span"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&2&&n!==(n=r[2]+"")&&H(t,n)},d(r){r&&p(e)}}}function zi(l){let e,n,t,r=De(l[0]),o=[];for(let i=0;i<r.length;i+=1)o[i]=pr($r(l,r,i));let s=De(l[1]),u=[];for(let i=0;i<s.length;i+=1)u[i]=mr(cr(l,s,i));return{c(){e=T("div");for(let i=0;i<o.length;i+=1)o[i].c();n=O(),t=T("div");for(let i=0;i<u.length;i+=1)u[i].c();ye(e,"display","flex"),ye(t,"display","flex"),ye(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(i,n,a),$(i,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(i,[a]){if(a&1){r=De(i[0]);let f;for(f=0;f<r.length;f+=1){const c=$r(i,r,f);o[f]?o[f].p(c,a):(o[f]=pr(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}if(a&2){s=De(i[1]);let f;for(f=0;f<s.length;f+=1){const c=cr(i,s,f);u[f]?u[f].p(c,a):(u[f]=mr(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=s.length}},i:x,o:x,d(i){i&&(p(e),p(n),p(t)),It(o,i),It(u,i)}}}function qi(l,e,n){let{colorScale:t}=e,{limits:r}=e;return l.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,r=o.limits)},[t,r]}class Ge extends J{constructor(e){super(),K(this,e,qi,zi,Y,{colorScale:0,limits:1})}}function _r(l){const e=l[13].OA21CD;l[14]=e;const n=l[13][l[3]];l[15]=n}function Gi(l){let e;return{c(){e=k("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ui(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wi(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vi(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xi(l){let e,n,t,r,o,s,u,i,a,f,c,g;return t=new Z({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ui]},$$scope:{ctx:l}}}),o=new Z({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Wi]},$$scope:{ctx:l}}}),f=new Z({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Vi]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),r=k(". Output area boundaries from "),h(o.$$.fragment),s=k("."),u=O(),i=T("p"),a=k("License: "),h(f.$$.fragment),c=k(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(d,y){$(d,e,y),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(d,u,y),$(d,i,y),w(i,a),b(f,i,null),w(i,c),g=!0},p(d,y){const L={};y&65536&&(L.$$scope={dirty:y,ctx:d}),t.$set(L);const C={};y&65536&&(C.$$scope={dirty:y,ctx:d}),o.$set(C);const P={};y&65536&&(P.$$scope={dirty:y,ctx:d}),f.$set(P)},i(d){g||(m(t.$$.fragment,d),m(o.$$.fragment,d),m(f.$$.fragment,d),g=!0)},o(d){_(t.$$.fragment,d),_(o.$$.fragment,d),_(f.$$.fragment,d),g=!1},d(d){d&&(p(e),p(u),p(i)),v(t),v(o),v(f)}}}function Yi(l){let e,n,t;return n=new me({props:{$$slots:{default:[Xi]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function gr(l){let e,n;return e=new Ge({props:{colorScale:l[4],limits:l[6]()}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:x,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qi(l){let e;return{c(){e=k("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ji(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ki(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zi(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xi(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y;return o=new Z({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ji]},$$scope:{ctx:l}}}),u=new Z({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ki]},$$scope:{ctx:l}}}),g=new Z({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Zi]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=O(),t=T("p"),r=k("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),s=k(". Output area boundaries from "),h(u.$$.fragment),i=k("."),a=O(),f=T("p"),c=k("License: "),h(g.$$.fragment),d=k(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(L,C){$(L,e,C),$(L,n,C),$(L,t,C),w(t,r),b(o,t,null),w(t,s),b(u,t,null),w(t,i),$(L,a,C),$(L,f,C),w(f,c),b(g,f,null),w(f,d),y=!0},p(L,C){const P={};C&65536&&(P.$$scope={dirty:C,ctx:L}),o.$set(P);const D={};C&65536&&(D.$$scope={dirty:C,ctx:L}),u.$set(D);const I={};C&65536&&(I.$$scope={dirty:C,ctx:L}),g.$set(I)},i(L){y||(m(o.$$.fragment,L),m(u.$$.fragment,L),m(g.$$.fragment,L),y=!0)},o(L){_(o.$$.fragment,L),_(u.$$.fragment,L),_(g.$$.fragment,L),y=!1},d(L){L&&(p(e),p(n),p(t),p(a),p(f)),v(o),v(u),v(g)}}}function ea(l){let e,n,t;return n=new me({props:{$$slots:{default:[xi]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function dr(l){let e,n;return e=new Ge({props:{colorScale:l[4],limits:l[6]()}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:x,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ta(l){let e;return{c(){e=k("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function na(l){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ra(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function la(l){let e,n,t,r,o,s,u,i,a;return t=new Z({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[na]},$$scope:{ctx:l}}}),o=new Z({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ra]},$$scope:{ctx:l}}}),i=new Ne({}),{c(){e=T("p"),n=k("Population density data is from the 2021 census, via "),h(t.$$.fragment),r=k(". Output area boundaries from "),h(o.$$.fragment),s=k("."),u=O(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&65536&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&65536&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function oa(l){let e,n,t;return n=new me({props:{$$slots:{default:[la]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function hr(l){let e,n,t,r;return t=new Ge({props:{colorScale:l[4],limits:l[6]().map(pa)}}),{c(){e=T("p"),e.textContent="(people per square kilometres)",n=O(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:x,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function sa(l){let e,n,t,r=l[15].toLocaleString()+"",o,s,u=l[14]+"",i;return{c(){e=T("p"),n=k("There are "),t=T("b"),o=k(r),s=k(`
          people per square kilometre in `),i=k(u)},m(a,f){$(a,e,f),w(e,n),w(e,t),w(t,o),w(e,s),w(e,i)},p(a,f){f&8200&&r!==(r=a[15].toLocaleString()+"")&&H(o,r),f&8192&&u!==(u=a[14]+"")&&H(i,u)},d(a){a&&p(e)}}}function ia(l){let e,n,t=l[14]+"",r,o,s,u=l[15]+"",i,a;return{c(){e=T("p"),n=k("Households in "),r=k(t),o=k(` have an average of
          `),s=T("b"),i=k(u),a=k(`
          cars`)},m(f,c){$(f,e,c),w(e,n),w(e,r),w(e,o),w(e,s),w(s,i),w(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&H(r,t),c&8200&&u!==(u=f[15]+"")&&H(i,u)},d(f){f&&p(e)}}}function aa(l){let e,n,t=l[15]+"",r,o,s,u=l[14]+"",i,a;return{c(){e=T("p"),n=T("b"),r=k(t),o=k("%"),s=k(`
          of households in `),i=k(u),a=k(" have 1 or more cars")},m(f,c){$(f,e,c),w(e,n),w(n,r),w(n,o),w(e,s),w(e,i),w(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&H(r,t),c&8192&&u!==(u=f[14]+"")&&H(i,u)},d(f){f&&p(e)}}}function fa(l){_r(l);let e;function n(o,s){return o[3]=="percent_households_with_car"?aa:o[3]=="average_cars_per_household"?ia:sa}let t=n(l),r=t(l);return{c(){r.c(),e=Me()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){_r(o),t===(t=n(o))&&r?r.p(o,s):(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function ua(l){let e,n;return e=new fe({props:{$$slots:{default:[fa,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&73736&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ca(l){let e,n,t,r;const o=[z(tt),{sourceLayer:tt},{paint:{"fill-color":ke(["get",l[3]],l[6](),l[4]),"fill-opacity":ee(.5,.7)}},{layout:{visibility:l[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ua]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=te(s,o[a]);e=new qe({props:s}),e.$on("click",l[5]);const u=[z(`${tt}-outline`),{sourceLayer:tt},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=te(i,u[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&88?ne(o,[f&0&&ae(z(tt)),f&0&&{sourceLayer:tt},f&88&&{paint:{"fill-color":ke(["get",a[3]],a[6](),a[4]),"fill-opacity":ee(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&8?ne(u,[f&0&&ae(z(`${tt}-outline`)),f&0&&{sourceLayer:tt},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function $a(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y;function L(S){l[7](S)}let C={id:"percent_households_with_car",$$slots:{right:[Yi],default:[Gi]},$$scope:{ctx:l}};l[0]!==void 0&&(C.checked=l[0]),e=new oe({props:C}),U.push(()=>W(e,"checked",L)),e.$on("change",l[8]);let P=l[3]=="percent_households_with_car"&&gr(l);function D(S){l[9](S)}let I={id:"average_cars_per_household",$$slots:{right:[ea],default:[Qi]},$$scope:{ctx:l}};l[1]!==void 0&&(I.checked=l[1]),o=new oe({props:I}),U.push(()=>W(o,"checked",D)),o.$on("change",l[10]);let N=l[3]=="average_cars_per_household"&&dr(l);function A(S){l[11](S)}let M={id:"population_density",$$slots:{right:[oa],default:[ta]},$$scope:{ctx:l}};l[2]!==void 0&&(M.checked=l[2]),a=new oe({props:M}),U.push(()=>W(a,"checked",A)),a.$on("change",l[12]);let E=l[3]=="population_density"&&hr(l);return d=new ve({props:{url:`pmtiles://${be()}/v1/${tt}.pmtiles`,$$slots:{default:[ca]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),P&&P.c(),r=O(),h(o.$$.fragment),u=O(),N&&N.c(),i=O(),h(a.$$.fragment),c=O(),E&&E.c(),g=O(),h(d.$$.fragment)},m(S,F){b(e,S,F),$(S,t,F),P&&P.m(S,F),$(S,r,F),b(o,S,F),$(S,u,F),N&&N.m(S,F),$(S,i,F),b(a,S,F),$(S,c,F),E&&E.m(S,F),$(S,g,F),b(d,S,F),y=!0},p(S,[F]){const q={};F&65536&&(q.$$scope={dirty:F,ctx:S}),!n&&F&1&&(n=!0,q.checked=S[0],V(()=>n=!1)),e.$set(q),S[3]=="percent_households_with_car"?P?(P.p(S,F),F&8&&m(P,1)):(P=gr(S),P.c(),m(P,1),P.m(r.parentNode,r)):P&&($e(),_(P,1,1,()=>{P=null}),pe());const R={};F&65536&&(R.$$scope={dirty:F,ctx:S}),!s&&F&2&&(s=!0,R.checked=S[1],V(()=>s=!1)),o.$set(R),S[3]=="average_cars_per_household"?N?(N.p(S,F),F&8&&m(N,1)):(N=dr(S),N.c(),m(N,1),N.m(i.parentNode,i)):N&&($e(),_(N,1,1,()=>{N=null}),pe());const j={};F&65536&&(j.$$scope={dirty:F,ctx:S}),!f&&F&4&&(f=!0,j.checked=S[2],V(()=>f=!1)),a.$set(j),S[3]=="population_density"?E?(E.p(S,F),F&8&&m(E,1)):(E=hr(S),E.c(),m(E,1),E.m(g.parentNode,g)):E&&($e(),_(E,1,1,()=>{E=null}),pe());const B={};F&65544&&(B.$$scope={dirty:F,ctx:S}),d.$set(B)},i(S){y||(m(e.$$.fragment,S),m(P),m(o.$$.fragment,S),m(N),m(a.$$.fragment,S),m(E),m(d.$$.fragment,S),y=!0)},o(S){_(e.$$.fragment,S),_(P),_(o.$$.fragment,S),_(N),_(a.$$.fragment,S),_(E),_(d.$$.fragment,S),y=!1},d(S){S&&(p(t),p(r),p(u),p(i),p(c),p(g)),v(e,S),P&&P.d(S),v(o,S),N&&N.d(S),v(a,S),E&&E.d(S),v(d,S)}}}let tt="census_output_areas";const pa=l=>l.toLocaleString();function ma(l,e,n){let t=Q.sequential_low_to_high,r=!1,o=!1,s=!1,u="";function i(C){let P=C.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${P}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${P}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(C){r=C,n(0,r)}const c=()=>{n(1,o=!1),n(2,s=!1)};function g(C){o=C,n(1,o)}const d=()=>{n(0,r=!1),n(2,s=!1)};function y(C){s=C,n(2,s)}const L=()=>{n(0,r=!1),n(1,o=!1)};return l.$$.update=()=>{l.$$.dirty&7&&(r?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):s?n(3,u="population_density"):n(3,u=""))},[r,o,s,u,t,i,a,f,c,g,d,y,L]}class _a extends J{constructor(e){super(),K(this,e,ma,$a,Y,{})}}function ga(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Combined authorities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:x,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function da(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ha(l){let e,n,t,r,o,s,u;return t=new Z({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[da]},$$scope:{ctx:l}}}),s=new Ne({}),{c(){e=T("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of December 2022."),o=O(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function ba(l){let e,n,t;return n=new me({props:{$$slots:{default:[ha]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function va(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&H(t,n)},d(r){r&&p(e)}}}function wa(l){let e,n;return e=new fe({props:{$$slots:{default:[va,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ka(l){let e,n,t,r;const o=[z(mt),{paint:{"fill-color":l[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[wa]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=te(s,o[a]);e=new qe({props:s}),e.$on("click",Sa);const u=[z(`${mt}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=te(i,u[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?ne(o,[f&0&&ae(z(mt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?ne(u,[f&0&&ae(z(`${mt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function ya(l){let e,n,t,r,o;function s(i){l[2](i)}let u={id:mt,$$slots:{right:[ba],default:[ga]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new oe({props:u}),U.push(()=>W(e,"checked",s)),r=new Ft({props:{data:`${be()}/v1/${mt}.geojson`,$$slots:{default:[ka]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let mt="combined_authorities";function Sa(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Ca(l,e,n){let t=Q.combined_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Ta extends J{constructor(e){super(),K(this,e,Ca,ya,Y,{})}}function Oa(l){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function La(l){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Aa(l){let e;return{c(){e=k(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ia(l){let e,n,t,r,o,s,u,i,a;return t=new Z({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[La]},$$scope:{ctx:l}}}),o=new Z({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Aa]},$$scope:{ctx:l}}}),i=new Ne({}),{c(){e=T("p"),n=k("The 2019 English IMD scores come from "),h(t.$$.fragment),r=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),s=k("."),u=O(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function Pa(l){let e,n,t;return n=new me({props:{$$slots:{default:[Ia]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function br(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:x,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ma(l){let e,n=l[4].LSOA11CD+"",t,r,o,s=l[4].score+"",u,i,a,f,c,g=l[4].rank.toLocaleString()+"",d,y;return{c(){e=T("p"),t=k(n),r=k(` has an IMD score of
        `),o=T("b"),u=k(s),i=O(),a=T("p"),f=k("Rank: "),c=T("b"),d=k(g),y=k(`
        / 32,844 LSOAs`)},m(L,C){$(L,e,C),w(e,t),w(e,r),w(e,o),w(o,u),$(L,i,C),$(L,a,C),w(a,f),w(a,c),w(c,d),w(a,y)},p(L,C){C&16&&n!==(n=L[4].LSOA11CD+"")&&H(t,n),C&16&&s!==(s=L[4].score+"")&&H(u,s),C&16&&g!==(g=L[4].rank.toLocaleString()+"")&&H(d,g)},d(L){L&&(p(e),p(i),p(a))}}}function Na(l){let e,n;return e=new fe({props:{$$slots:{default:[Ma,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Fa(l){let e,n,t,r;const o=[z(Ue),{sourceLayer:Ue},{paint:{"fill-color":ke(["-",10,["get","decile"]],l[2],l[1]),"fill-opacity":ee(.5,.7)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Na]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=te(s,o[a]);e=new qe({props:s});const u=[z(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=te(i,u[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&7?ne(o,[f&0&&ae(z(Ue)),f&0&&{sourceLayer:Ue},f&6&&{paint:{"fill-color":ke(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":ee(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&1?ne(u,[f&0&&ae(z(`${Ue}-outline`)),f&0&&{sourceLayer:Ue},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ea(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={id:Ue,$$slots:{right:[Pa],default:[Oa]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new oe({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&br(l);return o=new ve({props:{url:`pmtiles://${be()}/v1/${Ue}.pmtiles`,$$slots:{default:[Fa]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=br(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Ue="imd";function Da(l,e,n){let t=Q.sequential_low_to_high,r=[0,2,4,6,8,10],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class ja extends J{constructor(e){super(),K(this,e,Da,Ea,Y,{})}}function Ra(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:x,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Ba(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ha(l){let e,n,t,r,o,s,u;return t=new Z({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Ba]},$$scope:{ctx:l}}}),s=new Ne({}),{c(){e=T("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of May 2023."),o=O(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function za(l){let e,n,t;return n=new me({props:{$$slots:{default:[Ha]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function qa(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&H(t,n)},d(r){r&&p(e)}}}function Ga(l){let e,n;return e=new fe({props:{$$slots:{default:[qa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ua(l){let e,n,t,r;const o=[z(_t),{paint:{"fill-color":l[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Ga]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=te(s,o[a]);e=new qe({props:s}),e.$on("click",Va);const u=[z(`${_t}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=te(i,u[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?ne(o,[f&0&&ae(z(_t)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?ne(u,[f&0&&ae(z(`${_t}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Wa(l){let e,n,t,r,o;function s(i){l[2](i)}let u={id:_t,$$slots:{right:[za],default:[Ra]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new oe({props:u}),U.push(()=>W(e,"checked",s)),r=new Ft({props:{data:`${be()}/v1/${_t}.geojson`,$$slots:{default:[Ua]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let _t="local_authority_districts";function Va(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.LAD23CD}`,"_blank")}function Xa(l,e,n){let t=Q.local_authority_districts,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Ya extends J{constructor(e){super(),K(this,e,Xa,Wa,Y,{})}}function Qa(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:x,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Ja(l){let e;return{c(){e=k(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ka(l){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Za(l){let e;return{c(){e=k(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xa(l){let e;return{c(){e=k("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ef(l){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tf(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y,L,C,P,D,I,N,A,M;return t=new Z({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Ja]},$$scope:{ctx:l}}}),o=new Z({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Ka]},$$scope:{ctx:l}}}),u=new Z({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Za]},$$scope:{ctx:l}}}),d=new Z({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[xa]},$$scope:{ctx:l}}}),D=new Z({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[ef]},$$scope:{ctx:l}}}),A=new Ne({}),{c(){e=T("p"),n=k("LPAs may be a "),h(t.$$.fragment),r=k(", "),h(o.$$.fragment),s=k("y, or "),h(u.$$.fragment),i=k("."),a=O(),f=T("p"),c=T("strong"),g=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(d.$$.fragment),y=k(" to get more details."),L=O(),C=T("p"),P=k("Data from ONS Geography via "),h(D.$$.fragment),I=k(", as of November 2022."),N=O(),h(A.$$.fragment)},m(E,S){$(E,e,S),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),b(u,e,null),w(e,i),$(E,a,S),$(E,f,S),w(f,c),w(c,g),b(d,c,null),w(c,y),$(E,L,S),$(E,C,S),w(C,P),b(D,C,null),w(C,I),$(E,N,S),b(A,E,S),M=!0},p(E,S){const F={};S&16&&(F.$$scope={dirty:S,ctx:E}),t.$set(F);const q={};S&16&&(q.$$scope={dirty:S,ctx:E}),o.$set(q);const R={};S&16&&(R.$$scope={dirty:S,ctx:E}),u.$set(R);const j={};S&16&&(j.$$scope={dirty:S,ctx:E}),d.$set(j);const B={};S&16&&(B.$$scope={dirty:S,ctx:E}),D.$set(B)},i(E){M||(m(t.$$.fragment,E),m(o.$$.fragment,E),m(u.$$.fragment,E),m(d.$$.fragment,E),m(D.$$.fragment,E),m(A.$$.fragment,E),M=!0)},o(E){_(t.$$.fragment,E),_(o.$$.fragment,E),_(u.$$.fragment,E),_(d.$$.fragment,E),_(D.$$.fragment,E),_(A.$$.fragment,E),M=!1},d(E){E&&(p(e),p(a),p(f),p(L),p(C),p(N)),v(t),v(o),v(u),v(d),v(D),v(A,E)}}}function nf(l){let e,n,t;return n=new me({props:{$$slots:{default:[tf]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function rf(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&H(t,n)},d(r){r&&p(e)}}}function lf(l){let e,n;return e=new fe({props:{$$slots:{default:[rf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function of(l){let e,n,t,r;const o=[z(We),{sourceLayer:We},{paint:{"fill-color":l[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[lf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=te(s,o[a]);e=new qe({props:s});const u=[z(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=te(i,u[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?ne(o,[f&0&&ae(z(We)),f&0&&{sourceLayer:We},f&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?ne(u,[f&0&&ae(z(`${We}-outline`)),f&0&&{sourceLayer:We},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function sf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={id:We,$$slots:{right:[nf],default:[Qa]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new oe({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${be()}/v1/${We}.pmtiles`,$$slots:{default:[of]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let We="local_planning_authorities";function af(l,e,n){let t=Q.local_planning_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class ff extends J{constructor(e){super(),K(this,e,af,sf,Y,{})}}function uf(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:x,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function cf(l){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $f(l){let e,n,t,r,o,s,u;return t=new Z({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[cf]},$$scope:{ctx:l}}}),s=new Ne({}),{c(){e=T("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of May 2023."),o=O(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function pf(l){let e,n,t;return n=new me({props:{$$slots:{default:[$f]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function mf(l){let e,n=l[3].Name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].Name+"")&&H(t,n)},d(r){r&&p(e)}}}function _f(l){let e,n;return e=new fe({props:{$$slots:{default:[mf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gf(l){let e,n,t,r;const o=[z(Ve),{sourceLayer:Ve},{paint:{"fill-color":l[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[_f]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=te(s,o[a]);e=new qe({props:s}),e.$on("click",hf);const u=[z(`${Ve}-outline`),{sourceLayer:Ve},{paint:{"line-color":l[1],"line-width":5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=te(i,u[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?ne(o,[f&0&&ae(z(Ve)),f&0&&{sourceLayer:Ve},f&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?ne(u,[f&0&&ae(z(`${Ve}-outline`)),f&0&&{sourceLayer:Ve},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function df(l){let e,n,t,r,o;function s(i){l[2](i)}let u={id:Ve,$$slots:{right:[pf],default:[uf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new oe({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${be()}/v1/${Ve}.pmtiles`,$$slots:{default:[gf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Ve="parliamentary_constituencies";function hf(l){let e=l.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function bf(l,e,n){let t=Q.parliamentary_constituencies,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class vf extends J{constructor(e){super(),K(this,e,bf,df,Y,{})}}function wf(l){let e;return{c(){e=k("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function kf(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function yf(l){let e;return{c(){e=k(`Extrium
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Sf(l){let e;return{c(){e=k(`FAQ
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Cf(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y,L,C;return t=new Z({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[kf]},$$scope:{ctx:l}}}),f=new Z({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[yf]},$$scope:{ctx:l}}}),g=new Z({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[Sf]},$$scope:{ctx:l}}}),L=new Ne({}),{c(){e=T("p"),n=k("Most layers show air quality data from "),h(t.$$.fragment),r=k(`. The measurements are annual means, in units of
        µgm
        `),o=T("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=O(),i=T("p"),a=k("The noise layer is from "),h(f.$$.fragment),c=k(", using 2017 data. See their "),h(g.$$.fragment),d=k("."),y=O(),h(L.$$.fragment)},m(P,D){$(P,e,D),w(e,n),b(t,e,null),w(e,r),w(e,o),w(e,s),$(P,u,D),$(P,i,D),w(i,a),b(f,i,null),w(i,c),b(g,i,null),w(i,d),$(P,y,D),b(L,P,D),C=!0},p(P,D){const I={};D&2048&&(I.$$scope={dirty:D,ctx:P}),t.$set(I);const N={};D&2048&&(N.$$scope={dirty:D,ctx:P}),f.$set(N);const A={};D&2048&&(A.$$scope={dirty:D,ctx:P}),g.$set(A)},i(P){C||(m(t.$$.fragment,P),m(f.$$.fragment,P),m(g.$$.fragment,P),m(L.$$.fragment,P),C=!0)},o(P){_(t.$$.fragment,P),_(f.$$.fragment,P),_(g.$$.fragment,P),_(L.$$.fragment,P),C=!1},d(P){P&&(p(e),p(u),p(i),p(y)),v(t),v(f),v(g),v(L,P)}}}function Tf(l){let e,n,t;return n=new me({props:{$$slots:{default:[Cf]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function vr(l){let e,n,t,r,o=l[3](l[0])+"",s,u,i,a,f,c,g,d,y,L,C,P,D;function I(S){l[7](S)}let N={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};l[0]!==void 0&&(N.value=l[0]),e=new At({props:N}),U.push(()=>W(e,"value",I));const A=[Lf,Of],M=[];function E(S,F){return S[0]=="Noise"?0:1}return d=E(l),y=M[d]=A[d](l),{c(){h(e.$$.fragment),t=O(),r=T("p"),s=k(o),u=O(),i=T("div"),a=T("label"),f=k(`Opacity
      `),c=T("input"),g=O(),y.c(),L=Me(),G(c,"type","range"),G(c,"min","0"),G(c,"max","100")},m(S,F){b(e,S,F),$(S,t,F),$(S,r,F),w(r,s),$(S,u,F),$(S,i,F),w(i,a),w(a,f),w(a,c),Je(c,l[2]),$(S,g,F),M[d].m(S,F),$(S,L,F),C=!0,P||(D=[at(c,"change",l[8]),at(c,"input",l[8])],P=!0)},p(S,F){const q={};!n&&F&1&&(n=!0,q.value=S[0],V(()=>n=!1)),e.$set(q),(!C||F&1)&&o!==(o=S[3](S[0])+"")&&H(s,o),F&4&&Je(c,S[2]);let R=d;d=E(S),d===R?M[d].p(S,F):($e(),_(M[R],1,1,()=>{M[R]=null}),pe(),y=M[d],y?y.p(S,F):(y=M[d]=A[d](S),y.c()),m(y,1),y.m(L.parentNode,L))},i(S){C||(m(e.$$.fragment,S),m(y),C=!0)},o(S){_(e.$$.fragment,S),_(y),C=!1},d(S){S&&(p(t),p(r),p(u),p(i),p(g),p(L)),v(e,S),M[d].d(S),P=!1,ml(D)}}}function Of(l){let e,n,t;return{c(){e=T("img"),En(e.src,n=l[5](l[0]))||G(e,"src",n),G(e,"width",150),G(e,"alt",t=`Legend for ${l[0]} layer`)},m(r,o){$(r,e,o)},p(r,o){o&1&&!En(e.src,n=r[5](r[0]))&&G(e,"src",n),o&1&&t!==(t=`Legend for ${r[0]} layer`)&&G(e,"alt",t)},i:x,o:x,d(r){r&&p(e)}}}function Lf(l){let e,n;return e=new Ge({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:x,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Af(l){let e,n;const t=[z("pollution"),{paint:{"raster-opacity":l[2]/100}},{layout:{visibility:l[1]?"visible":"none"}}];let r={};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Jl({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&6?ne(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function If(l){let e,n,t,r,o,s;function u(f){l[6](f)}let i={id:"pollution",$$slots:{right:[Tf],default:[wf]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new oe({props:i}),U.push(()=>W(e,"checked",u));let a=l[1]&&vr(l);return o=new uo({props:{tiles:[l[4](l[0])],tileSize:256,$$slots:{default:[Af]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&2048&&(g.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,g.checked=f[1],V(()=>n=!1)),e.$set(g),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=vr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&1&&(d.tiles=[f[4](f[0])]),c&2054&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}function Pf(l,e,n){let t,r=!1,o=50,s="PM25_viridis";function u(){return s=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(y){return t[1]}function a(y){let L=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${L}`}function f(y){let L=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${L}`}function c(y){r=y,n(1,r)}function g(y){s=y,n(0,s)}function d(){o=qt(this.value),n(2,o)}return l.$$.update=()=>{l.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[s])},[s,r,o,i,a,f,c,g,d]}class Mf extends J{constructor(e){super(),K(this,e,Pf,If,Y,{})}}function Nf(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Wards`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:x,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Ff(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ef(l){let e,n,t,r,o,s,u;return t=new Z({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Ff]},$$scope:{ctx:l}}}),s=new Ne({}),{c(){e=T("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of May 2023."),o=O(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Df(l){let e,n,t;return n=new me({props:{$$slots:{default:[Ef]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function jf(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&H(t,n)},d(r){r&&p(e)}}}function Rf(l){let e,n;return e=new fe({props:{$$slots:{default:[jf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Bf(l){let e,n,t,r;const o=[z(Xe),{sourceLayer:Xe},{paint:{"fill-color":l[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Rf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=te(s,o[a]);e=new qe({props:s}),e.$on("click",zf);const u=[z(`${Xe}-outline`),{sourceLayer:Xe},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=te(i,u[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?ne(o,[f&0&&ae(z(Xe)),f&0&&{sourceLayer:Xe},f&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?ne(u,[f&0&&ae(z(`${Xe}-outline`)),f&0&&{sourceLayer:Xe},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Hf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={id:Xe,$$slots:{right:[Df],default:[Nf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new oe({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${be()}/v1/${Xe}.pmtiles`,$$slots:{default:[Bf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Xe="wards";function zf(l){let e=encodeURIComponent(l.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function qf(l,e,n){let t=Q.wards,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Gf extends J{constructor(e){super(),K(this,e,qf,Hf,Y,{})}}function Uf(l){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wf(l){let e,n,t,r;return t=new Z({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Uf]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("License: "),h(t.$$.fragment)},m(o,s){$(o,e,s),w(e,n),b(t,e,null),r=!0},p(o,[s]){const u={};s&1&&(u.$$scope={dirty:s,ctx:o}),t.$set(u)},i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&p(e),v(t)}}}class rt extends J{constructor(e){super(),K(this,e,null,Wf,Y,{})}}function Vf(l){let e,n,t;return e=new Ce({props:{color:Q.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=k(`
  Bus routes`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:x,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Xf(l){let e;return{c(){e=k(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Yf(l){let e,n,t,r,o,s,u,i,a;return o=new Z({props:{href:"https://gtfs.org",$$slots:{default:[Xf]},$$scope:{ctx:l}}}),i=new rt({}),{c(){e=T("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=O(),t=T("p"),r=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),u=O(),h(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),w(t,r),b(o,t,null),w(t,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&8&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),v(o),v(i,f)}}}function Qf(l){let e,n,t;return n=new me({props:{$$slots:{default:[Yf]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Jf(l){let e;return{c(){e=T("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Kf(l){let e;return{c(){e=T("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zf(l){let e;function n(o,s){return o[2].has_bus_lane?Kf:Jf}let t=n(l),r=t(l);return{c(){r.c(),e=Me()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function xf(l){let e,n;return e=new fe({props:{$$slots:{default:[Zf,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function eu(l){let e,n;const t=[z(gt),{sourceLayer:gt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Q.bus_route_with_lane,Q.bus_route_without_lane],"line-width":5,"line-opacity":ee(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[xf]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Se({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ae(z(gt)),s&0&&{sourceLayer:gt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function tu(l){let e,n,t,r,o;function s(i){l[1](i)}let u={id:gt,$$slots:{right:[Qf],default:[Vf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new oe({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${be()}/v1/${gt}.pmtiles`,$$slots:{default:[eu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let gt="bus_routes";function nu(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class ru extends J{constructor(e){super(),K(this,e,nu,tu,Y,{})}}function wr(l){const e=pu(l[5]);l[6]=e[0],l[7]=e[1],l[8]=e[2]}function kr(l,e,n){const t=l.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function lu(l){let e;return{c(){e=k("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ou(l){let e,n,t,r,o,s,u,i;return u=new rt({}),{c(){e=T("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=O(),t=T("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,r=O(),o=T("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=O(),h(u.$$.fragment)},m(a,f){$(a,e,f),$(a,n,f),$(a,t,f),$(a,r,f),$(a,o,f),$(a,s,f),b(u,a,f),i=!0},p:x,i(a){i||(m(u.$$.fragment,a),i=!0)},o(a){_(u.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(r),p(o),p(s)),v(u,a)}}}function su(l){let e,n,t;return n=new me({props:{$$slots:{default:[ou]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function yr(l){let e,n,t;return n=new xe({props:{$$slots:{default:[au]},$$scope:{ctx:l}}}),{c(){e=T("div"),h(n.$$.fragment),ye(e,"border","1px solid black"),ye(e,"padding","8px")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function iu(l){let e,n,t=l[9]+"",r,o,s;return e=new Ce({props:{color:l[10]}}),{c(){h(e.$$.fragment),n=O(),r=k(t),o=O()},m(u,i){b(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p:x,i(u){s||(m(e.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),v(e,u)}}}function Sr(l){let e,n,t;function r(s){l[4](s,l[6])}let o={id:l[6],$$slots:{default:[iu]},$$scope:{ctx:l}};return l[1][l[6]]!==void 0&&(o.checked=l[1][l[6]]),e=new oe({props:o}),U.push(()=>W(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){l=s;const i={};u&8192&&(i.$$scope={dirty:u,ctx:l}),!n&&u&6&&(n=!0,i.checked=l[1][l[6]],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function au(l){let e,n,t=De(l[2]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Sr(kr(l,t,s));const o=s=>_(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=Me()},m(s,u){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(s,u);$(s,e,u),n=!0},p(s,u){if(u&6){t=De(s[2]);let i;for(i=0;i<t.length;i+=1){const a=kr(s,t,i);r[i]?(r[i].p(a,u),m(r[i],1)):(r[i]=Sr(a),r[i].c(),m(r[i],1),r[i].m(e.parentNode,e))}for($e(),i=t.length;i<r.length;i+=1)o(i);pe()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)m(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)_(r[u]);n=!1},d(s){s&&p(e),It(r,s)}}}function fu(l){wr(l);let e,n=l[6]+"",t,r,o,s,u,i=l[7]+"",a,f,c,g,d=l[8]+"",y;return{c(){e=T("h2"),t=k(n),r=O(),o=T("p"),s=k("Direction: "),u=T("b"),a=O(),f=T("p"),c=k("Width: "),g=T("b"),y=k(d)},m(L,C){$(L,e,C),w(e,t),$(L,r,C),$(L,o,C),w(o,s),w(o,u),u.innerHTML=i,$(L,a,C),$(L,f,C),w(f,c),w(f,g),w(g,y)},p(L,C){wr(L),C&32&&n!==(n=L[6]+"")&&H(t,n),C&32&&i!==(i=L[7]+"")&&(u.innerHTML=i),C&32&&d!==(d=L[8]+"")&&H(y,d)},d(L){L&&(p(e),p(r),p(o),p(a),p(f))}}}function uu(l){let e,n;return e=new fe({props:{$$slots:{default:[fu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&8224&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function cu(l){let e,n;const t=[z(dt),{sourceLayer:dt},{paint:{"line-color":Nt(["get","kind"],{track:Q.cycle_paths.track,lane:Q.cycle_paths.lane,shared_use_segregated:Q.cycle_paths.shared_use_segregated,shared_use_unsegregated:Q.cycle_paths.shared_use_unsegregated},"red"),"line-width":ze,"line-opacity":ee(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:Cr(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={$$slots:{default:[uu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Se({props:r}),e.$on("click",mu),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(z(dt)),s&0&&{sourceLayer:dt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:Cr(o[1])},t[5],t[6],t[7]]):{};s&8192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function $u(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={id:dt,$$slots:{right:[su],default:[lu]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new oe({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&yr(l);return o=new ve({props:{url:`pmtiles://${be()}/v1/${dt}.pmtiles`,$$slots:{default:[cu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&8192&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=yr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&8195&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let dt="cycle_paths";function pu(l){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[l.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[l.direction],t=l.width=="unknown"?"unknown":`${l.width} meters`;return[e,`${n} ${l.direction}`,t]}function mu(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function Cr(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","kind"],["literal",e]]}function _u(l,e,n){let t=[["track","Separated tracks",Q.cycle_paths.track],["lane","Unprotected lanes",Q.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",Q.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",Q.cycle_paths.shared_use_unsegregated]],r=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){r=i,n(0,r)}function u(i,a){l.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[r,o,t,s,u]}class gu extends J{constructor(e){super(),K(this,e,_u,$u,Y,{})}}function du(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Major Road Network`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:x,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function hu(l){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bu(l){let e,n,t,r,o,s,u;return t=new Z({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[hu]},$$scope:{ctx:l}}}),s=new Ne({}),{c(){e=T("p"),n=k("Data from the "),h(t.$$.fragment),r=k(", as of September 2021."),o=O(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function vu(l){let e,n,t;return n=new me({props:{$$slots:{default:[bu]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function wu(l){let e,n=(l[3].name??"Unknown MRN road")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unknown MRN road")+"")&&H(t,n)},d(r){r&&p(e)}}}function ku(l){let e,n;return e=new fe({props:{$$slots:{default:[wu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yu(l){let e,n;const t=[z(ht),{sourceLayer:ht},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":ee(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[ku]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Se({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(z(ht)),s&0&&{sourceLayer:ht},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Su(l){let e,n,t,r,o;function s(i){l[2](i)}let u={id:ht,$$slots:{right:[vu],default:[du]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new oe({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${be()}/v1/${ht}.pmtiles`,$$slots:{default:[yu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let ht="mrn";function Cu(l,e,n){let t=Q.mrn,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Tu extends J{constructor(e){super(),K(this,e,Cu,Su,Y,{})}}function Ou(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  National Cycle Network`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:x,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Lu(l){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Au(l){let e,n,t,r,o,s,u;return t=new Z({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Lu]},$$scope:{ctx:l}}}),s=new Ne({}),{c(){e=T("p"),n=k("Data from Sustrans about the "),h(t.$$.fragment),r=k(", downloaded on 22/01/2024."),o=O(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Iu(l){let e,n,t;return n=new me({props:{$$slots:{default:[Au]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Tr(l){let e,n,t,r=l[3].Desc_+"",o;return{c(){e=T("li"),n=k("Description: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Desc_+"")&&H(o,r)},d(s){s&&p(e)}}}function Or(l){let e,n,t,r=l[3].Greenway+"",o;return{c(){e=T("li"),n=k("Is greenway: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Greenway+"")&&H(o,r)},d(s){s&&p(e)}}}function Lr(l){let e,n,t,r=l[3].RouteType+"",o;return{c(){e=T("li"),n=k("Route type: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteType+"")&&H(o,r)},d(s){s&&p(e)}}}function Ar(l){let e,n,t,r=l[3].RouteNo+"",o;return{c(){e=T("li"),n=k("Route number: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteNo+"")&&H(o,r)},d(s){s&&p(e)}}}function Ir(l){let e,n,t,r=l[3].RouteCat+"",o;return{c(){e=T("li"),n=k("Route Category: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteCat+"")&&H(o,r)},d(s){s&&p(e)}}}function Pr(l){let e,n,t,r=l[3].OpenStatus+"",o;return{c(){e=T("li"),n=k("Open Status: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].OpenStatus+"")&&H(o,r)},d(s){s&&p(e)}}}function Mr(l){let e,n,t,r=l[3].Surface+"",o;return{c(){e=T("li"),n=k("Surface: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Surface+"")&&H(o,r)},d(s){s&&p(e)}}}function Nr(l){let e,n,t,r=l[3].Quality+"",o;return{c(){e=T("li"),n=k("Quality: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Quality+"")&&H(o,r)},d(s){s&&p(e)}}}function Fr(l){let e,n,t,r=l[3].RoadClass+"",o;return{c(){e=T("li"),n=k("Road Class: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RoadClass+"")&&H(o,r)},d(s){s&&p(e)}}}function Pu(l){let e,n,t,r,o,s,u,i,a,f=l[3].Desc_&&Tr(l),c=l[3].Greenway&&Or(l),g=l[3].RouteType&&Lr(l),d=l[3].RouteNo&&Ar(l),y=l[3].RouteCat&&Ir(l),L=l[3].OpenStatus&&Pr(l),C=l[3].Surface&&Mr(l),P=l[3].Quality&&Nr(l),D=l[3].RoadClass&&Fr(l);return{c(){e=T("ul"),f&&f.c(),n=O(),c&&c.c(),t=O(),g&&g.c(),r=O(),d&&d.c(),o=O(),y&&y.c(),s=O(),L&&L.c(),u=O(),C&&C.c(),i=O(),P&&P.c(),a=O(),D&&D.c()},m(I,N){$(I,e,N),f&&f.m(e,null),w(e,n),c&&c.m(e,null),w(e,t),g&&g.m(e,null),w(e,r),d&&d.m(e,null),w(e,o),y&&y.m(e,null),w(e,s),L&&L.m(e,null),w(e,u),C&&C.m(e,null),w(e,i),P&&P.m(e,null),w(e,a),D&&D.m(e,null)},p(I,N){I[3].Desc_?f?f.p(I,N):(f=Tr(I),f.c(),f.m(e,n)):f&&(f.d(1),f=null),I[3].Greenway?c?c.p(I,N):(c=Or(I),c.c(),c.m(e,t)):c&&(c.d(1),c=null),I[3].RouteType?g?g.p(I,N):(g=Lr(I),g.c(),g.m(e,r)):g&&(g.d(1),g=null),I[3].RouteNo?d?d.p(I,N):(d=Ar(I),d.c(),d.m(e,o)):d&&(d.d(1),d=null),I[3].RouteCat?y?y.p(I,N):(y=Ir(I),y.c(),y.m(e,s)):y&&(y.d(1),y=null),I[3].OpenStatus?L?L.p(I,N):(L=Pr(I),L.c(),L.m(e,u)):L&&(L.d(1),L=null),I[3].Surface?C?C.p(I,N):(C=Mr(I),C.c(),C.m(e,i)):C&&(C.d(1),C=null),I[3].Quality?P?P.p(I,N):(P=Nr(I),P.c(),P.m(e,a)):P&&(P.d(1),P=null),I[3].RoadClass?D?D.p(I,N):(D=Fr(I),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(I){I&&p(e),f&&f.d(),c&&c.d(),g&&g.d(),d&&d.d(),y&&y.d(),L&&L.d(),C&&C.d(),P&&P.d(),D&&D.d()}}}function Mu(l){let e,n;return e=new fe({props:{$$slots:{default:[Pu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Nu(l){let e,n;const t=[z(bt),{sourceLayer:bt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":4,"line-opacity":ee(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Mu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Se({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(z(bt)),s&0&&{sourceLayer:bt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Fu(l){let e,n,t,r,o;function s(i){l[2](i)}let u={id:bt,$$slots:{right:[Iu],default:[Ou]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new oe({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${be()}/v1/${bt}.pmtiles`,$$slots:{default:[Nu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let bt="national_cycle_network";function Eu(l,e,n){let t=Q.national_cycle_network,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Du extends J{constructor(e){super(),K(this,e,Eu,Fu,Y,{})}}function ju(l){let e;return{c(){e=k("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ru(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bu(l){let e,n,t,r,o,s,u,i,a;return u=new Z({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Ru]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road. (You won't be able to distinguish left and right
        though; use the OS Road basemap instead.)`,n=O(),t=T("p"),t.textContent="Data valid as of 1 January, 2024",r=O(),o=T("p"),s=k(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),i=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),w(o,s),b(u,o,null),w(o,i),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),u.$set(g)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){_(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),v(u)}}}function Hu(l){let e,n,t;return n=new me({props:{$$slots:{default:[Bu]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Er(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:x,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zu(l){let e,n,t,r=l[4].side+"",o,s,u,i,a,f=l[4].average+"",c,g,d,y,L,C,P=l[4].minimum+"",D,I;return{c(){e=T("p"),n=k("Side of the road: "),t=T("b"),o=k(r),s=O(),u=T("p"),i=k("Average width: "),a=T("b"),c=k(f),g=k(`
        meters`),d=O(),y=T("p"),L=k("Minimum width: "),C=T("b"),D=k(P),I=k(`
        meters`)},m(N,A){$(N,e,A),w(e,n),w(e,t),w(t,o),$(N,s,A),$(N,u,A),w(u,i),w(u,a),w(a,c),w(u,g),$(N,d,A),$(N,y,A),w(y,L),w(y,C),w(C,D),w(y,I)},p(N,A){A&16&&r!==(r=N[4].side+"")&&H(o,r),A&16&&f!==(f=N[4].average+"")&&H(c,f),A&16&&P!==(P=N[4].minimum+"")&&H(D,P)},d(N){N&&(p(e),p(s),p(u),p(d),p(y))}}}function qu(l){let e,n;return e=new fe({props:{$$slots:{default:[zu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gu(l){let e,n;const t=[z(vt),{sourceLayer:vt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get","average"],l[2],l[1]),"line-width":ze,"line-opacity":ee(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[qu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Se({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ae(z(vt)),s&0&&{sourceLayer:vt},t[2],t[3],s&6&&{paint:{"line-color":ke(["get","average"],o[2],o[1]),"line-width":ze,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Uu(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={id:vt,$$slots:{right:[Hu],default:[ju]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new oe({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Er(l);return o=new ve({props:{url:`pmtiles://${on()}/v1/${vt}.pmtiles`,$$slots:{default:[Gu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Er(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let vt="pavement_widths";function Wu(l,e,n){let t=Q.sequential_low_to_high,r=[0,2,4,6,8,13],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Vu extends J{constructor(e){super(),K(this,e,Wu,Uu,Y,{})}}function Xu(l){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Yu(l){let e;return{c(){e=k("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qu(l){let e;return{c(){e=k("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ju(l){let e,n,t,r,o,s,u,i,a,f,c;return u=new Z({props:{href:"https://www.pct.bike",$$slots:{default:[Yu]},$$scope:{ctx:l}}}),a=new Z({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Qu]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=O(),t=T("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,r=O(),o=T("p"),s=k("See "),h(u.$$.fragment),i=k(" and "),h(a.$$.fragment),f=k(" for details on methodology and data sources.")},m(g,d){$(g,e,d),$(g,n,d),$(g,t,d),$(g,r,d),$(g,o,d),w(o,s),b(u,o,null),w(o,i),b(a,o,null),w(o,f),c=!0},p(g,d){const y={};d&1024&&(y.$$scope={dirty:d,ctx:g}),u.$set(y);const L={};d&1024&&(L.$$scope={dirty:d,ctx:g}),a.$set(L)},i(g){c||(m(u.$$.fragment,g),m(a.$$.fragment,g),c=!0)},o(g){_(u.$$.fragment,g),_(a.$$.fragment,g),c=!1},d(g){g&&(p(e),p(n),p(t),p(r),p(o)),v(u),v(a)}}}function Ku(l){let e,n,t;return n=new me({props:{$$slots:{default:[Ju]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Dr(l){let e,n,t,r,o,s,u,i;e=new Ge({props:{colorScale:l[3],limits:l[4]}});function a(d){l[7](d)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};l[0]!==void 0&&(f.value=l[0]),t=new _l({props:f}),U.push(()=>W(t,"value",a));function c(d){l[8](d)}let g={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return l[1]!==void 0&&(g.value=l[1]),s=new At({props:g}),U.push(()=>W(s,"value",c)),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),o=O(),h(s.$$.fragment)},m(d,y){b(e,d,y),$(d,n,y),b(t,d,y),$(d,o,y),b(s,d,y),i=!0},p(d,y){const L={};!r&&y&1&&(r=!0,L.value=d[0],V(()=>r=!1)),t.$set(L);const C={};!u&&y&2&&(u=!0,C.value=d[1],V(()=>u=!1)),s.$set(C)},i(d){i||(m(e.$$.fragment,d),m(t.$$.fragment,d),m(s.$$.fragment,d),i=!0)},o(d){_(e.$$.fragment,d),_(t.$$.fragment,d),_(s.$$.fragment,d),i=!1},d(d){d&&(p(n),p(o)),v(e,d),v(t,d),v(s,d)}}}function Zu(l){let e,n=l[5](l[9])+"",t;return{c(){e=new Ht(!1),t=Me(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function xu(l){let e,n;return e=new fe({props:{$$slots:{default:[Zu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ec(l){let e,n;const t=[z(Ye),{sourceLayer:Ye},{paint:{"line-color":ke(["get",l[1]],l[4],l[3]),"line-width":ze,"line-opacity":ee(1,.5)}},{layout:{visibility:l[2]&&l[0]==Ye?"visible":"none"}}];let r={$$slots:{default:[xu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Se({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&31?ne(t,[s&0&&ae(z(Ye)),s&0&&{sourceLayer:Ye},s&26&&{paint:{"line-color":ke(["get",o[1]],o[4],o[3]),"line-width":ze,"line-opacity":ee(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==Ye?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function tc(l){let e,n=l[5](l[9])+"",t;return{c(){e=new Ht(!1),t=Me(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function nc(l){let e,n;return e=new fe({props:{$$slots:{default:[tc,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function rc(l){let e,n;const t=[z(ft),{sourceLayer:ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get",l[1]],l[4],l[3]),"line-width":ze,"line-opacity":ee(1,.5)}},{layout:{visibility:l[2]&&l[0]==ft?"visible":"none"}}];let r={$$slots:{default:[nc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Se({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&31?ne(t,[s&0&&ae(z(ft)),s&0&&{sourceLayer:ft},t[2],t[3],s&26&&{paint:{"line-color":ke(["get",o[1]],o[4],o[3]),"line-width":ze,"line-opacity":ee(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==ft?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function lc(l){let e,n,t,r,o,s,u,i;function a(g){l[6](g)}let f={id:Ye,$$slots:{right:[Ku],default:[Xu]},$$scope:{ctx:l}};l[2]!==void 0&&(f.checked=l[2]),e=new oe({props:f}),U.push(()=>W(e,"checked",a));let c=l[2]&&Dr(l);return o=new ve({props:{url:`pmtiles://${be()}/v1/${Ye}.pmtiles`,$$slots:{default:[ec]},$$scope:{ctx:l}}}),u=new ve({props:{url:`pmtiles://${be()}/v1/${ft}.pmtiles`,$$slots:{default:[rc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),c&&c.c(),r=O(),h(o.$$.fragment),s=O(),h(u.$$.fragment)},m(g,d){b(e,g,d),$(g,t,d),c&&c.m(g,d),$(g,r,d),b(o,g,d),$(g,s,d),b(u,g,d),i=!0},p(g,[d]){const y={};d&1024&&(y.$$scope={dirty:d,ctx:g}),!n&&d&4&&(n=!0,y.checked=g[2],V(()=>n=!1)),e.$set(y),g[2]?c?(c.p(g,d),d&4&&m(c,1)):(c=Dr(g),c.c(),m(c,1),c.m(r.parentNode,r)):c&&($e(),_(c,1,1,()=>{c=null}),pe());const L={};d&1031&&(L.$$scope={dirty:d,ctx:g}),o.$set(L);const C={};d&1031&&(C.$$scope={dirty:d,ctx:g}),u.$set(C)},i(g){i||(m(e.$$.fragment,g),m(c),m(o.$$.fragment,g),m(u.$$.fragment,g),i=!0)},o(g){_(e.$$.fragment,g),_(c),_(o.$$.fragment,g),_(u.$$.fragment,g),i=!1},d(g){g&&(p(t),p(r),p(s)),v(e,g),c&&c.d(g),v(o,g),v(u,g)}}}let Ye="pct_commute",ft="pct_school";function oc(l,e,n){let t=Q.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],o=Ye,s="baseline",u=!1;function i(g){let d=g.baseline,y=g.gov_target,L=g.go_dutch,C=`<h2>Trip purpose: ${o==Ye?"commuting":"school"}</h2>`;if(C+=`<p>Baseline (2011): <b>${d.toLocaleString()}</b></p>`,d==0)C+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,C+=`<p>Go Dutch: <b>${L.toLocaleString()}</b></p>`;else{let P=(y/d).toFixed(1),D=(L/d).toFixed(1);C+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${P}x</b> of baseline)</p>`,C+=`<p>Go Dutch: ${L.toLocaleString()} (<b>${D}x</b> of baseline)</p>`}return C}function a(g){u=g,n(2,u)}function f(g){o=g,n(0,o)}function c(g){s=g,n(1,s)}return[o,s,u,t,r,i,a,f,c]}class sc extends J{constructor(e){super(),K(this,e,oc,lc,Y,{})}}function ic(l){let e;return{c(){e=k("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ac(l){let e;return{c(){e=k("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fc(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uc(l){let e,n,t,r,o,s,u,i,a,f,c,g;return t=new Z({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[ac]},$$scope:{ctx:l}}}),f=new Z({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[fc]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("The average speed data is collected over a six-month period by "),h(t.$$.fragment),r=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=O(),s=T("p"),s.textContent="Data valid as of 1 September, 2023",u=O(),i=T("p"),a=k(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=k(".")},m(d,y){$(d,e,y),w(e,n),b(t,e,null),w(e,r),$(d,o,y),$(d,s,y),$(d,u,y),$(d,i,y),w(i,a),b(f,i,null),w(i,c),g=!0},p(d,y){const L={};y&256&&(L.$$scope={dirty:y,ctx:d}),t.$set(L);const C={};y&256&&(C.$$scope={dirty:y,ctx:d}),f.$set(C)},i(d){g||(m(t.$$.fragment,d),m(f.$$.fragment,d),g=!0)},o(d){_(t.$$.fragment,d),_(f.$$.fragment,d),g=!1},d(d){d&&(p(e),p(o),p(s),p(u),p(i)),v(t),v(f)}}}function cc(l){let e,n,t;return n=new me({props:{$$slots:{default:[uc]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function jr(l){let e,n,t,r,o;e=new Ge({props:{colorScale:l[2],limits:l[3]}});function s(i){l[6](i)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return l[0]!==void 0&&(u.value=l[0]),t=new _l({props:u}),U.push(()=>W(t,"value",s)),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),o=!0},p(i,a){const f={};!r&&a&1&&(r=!0,f.value=i[0],V(()=>r=!1)),t.$set(f)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),o=!1},d(i){i&&p(n),v(e,i),v(t,i)}}}function $c(l){let e,n,t=l[7].indicative_mph+"",r,o,s,u,i,a=l[7].highest_mph+"",f,c,g=l[4][l[7].highest_description]+"",d,y;return{c(){e=T("p"),n=k("Posted speed limit: "),r=k(t),o=k(" mph"),s=O(),u=T("p"),i=k("Highest average speed: "),f=k(a),c=k(" mph (during "),d=k(g),y=k(")")},m(L,C){$(L,e,C),w(e,n),w(e,r),w(e,o),$(L,s,C),$(L,u,C),w(u,i),w(u,f),w(u,c),w(u,d),w(u,y)},p(L,C){C&128&&t!==(t=L[7].indicative_mph+"")&&H(r,t),C&128&&a!==(a=L[7].highest_mph+"")&&H(f,a),C&128&&g!==(g=L[4][L[7].highest_description]+"")&&H(d,g)},d(L){L&&(p(e),p(s),p(u))}}}function pc(l){let e,n;return e=new fe({props:{$$slots:{default:[$c,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&384&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mc(l){let e,n;const t=[z(wt),{sourceLayer:wt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get",l[0]],l[3],l[2]),"line-width":ze,"line-opacity":ee(1,.5)}},{layout:{visibility:l[1]?"visible":"none"}}];let r={$$slots:{default:[pc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Se({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&15?ne(t,[s&0&&ae(z(wt)),s&0&&{sourceLayer:wt},t[2],t[3],s&13&&{paint:{"line-color":ke(["get",o[0]],o[3],o[2]),"line-width":ze,"line-opacity":ee(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function _c(l){let e,n,t,r,o,s;function u(f){l[5](f)}let i={id:wt,$$slots:{right:[cc],default:[ic]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new oe({props:i}),U.push(()=>W(e,"checked",u));let a=l[1]&&jr(l);return o=new ve({props:{url:`pmtiles://${on()}/v1/${wt}.pmtiles`,$$slots:{default:[mc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&256&&(g.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,g.checked=f[1],V(()=>n=!1)),e.$set(g),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=jr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&259&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let wt="road_speeds";function gc(l,e,n){let t=Q.sequential_low_to_high,r=[0,20,30,40,50,90],o="indicative_mph",s=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(f){s=f,n(1,s)}function a(f){o=f,n(0,o)}return[o,s,t,r,u,i,a]}class dc extends J{constructor(e){super(),K(this,e,gc,_c,Y,{})}}function hc(l){let e;return{c(){e=k("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bc(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vc(l){let e,n,t,r,o,s,u,i,a;return u=new Z({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[bc]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=O(),t=T("p"),t.textContent="Data valid as of 1 September, 2023",r=O(),o=T("p"),s=k(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),i=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),w(o,s),b(u,o,null),w(o,i),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),u.$set(g)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){_(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),v(u)}}}function wc(l){let e,n,t;return n=new me({props:{$$slots:{default:[vc]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Rr(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:x,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function kc(l){let e,n,t,r=l[4].average+"",o,s,u,i,a,f,c=l[4].minimum+"",g,d;return{c(){e=T("p"),n=k("Average width: "),t=T("b"),o=k(r),s=k(`
        meters`),u=O(),i=T("p"),a=k("Minimum width: "),f=T("b"),g=k(c),d=k(`
        meters`)},m(y,L){$(y,e,L),w(e,n),w(e,t),w(t,o),w(e,s),$(y,u,L),$(y,i,L),w(i,a),w(i,f),w(f,g),w(i,d)},p(y,L){L&16&&r!==(r=y[4].average+"")&&H(o,r),L&16&&c!==(c=y[4].minimum+"")&&H(g,c)},d(y){y&&(p(e),p(u),p(i))}}}function yc(l){let e,n;return e=new fe({props:{$$slots:{default:[kc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Sc(l){let e,n;const t=[z(kt),{sourceLayer:kt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get","average"],l[2],l[1]),"line-width":ze,"line-opacity":ee(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[yc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Se({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ae(z(kt)),s&0&&{sourceLayer:kt},t[2],t[3],s&6&&{paint:{"line-color":ke(["get","average"],o[2],o[1]),"line-width":ze,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Cc(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={id:kt,$$slots:{right:[wc],default:[hc]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new oe({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Rr(l);return o=new ve({props:{url:`pmtiles://${on()}/v1/${kt}.pmtiles`,$$slots:{default:[Sc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Rr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let kt="road_widths";function Tc(l,e,n){let t=Q.sequential_low_to_high,r=[0,5,10,15,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Oc extends J{constructor(e){super(),K(this,e,Tc,Cc,Y,{})}}function Lc(l){let e,n,t;return e=new Ce({props:{color:Q.trams}}),{c(){h(e.$$.fragment),n=k(`
  Trams`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:x,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Ac(l){let e,n,t,r;return t=new rt({}),{c(){e=T("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,n=O(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:x,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function Ic(l){let e,n,t;return n=new me({props:{$$slots:{default:[Ac]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&4&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Pc(l){let e,n;const t=[z(yt),{sourceLayer:yt},{paint:{"line-color":Q.trams,"line-width":5,"line-opacity":ee(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Se({props:r}),e.$on("click",Nc),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ae(z(yt)),s&0&&{sourceLayer:yt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Mc(l){let e,n,t,r,o;function s(i){l[1](i)}let u={id:yt,$$slots:{right:[Ic],default:[Lc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new oe({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${be()}/v1/${yt}.pmtiles`,$$slots:{default:[Pc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&4&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&5&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let yt="trams";function Nc(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function Fc(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class Ec extends J{constructor(e){super(),K(this,e,Fc,Mc,Y,{})}}function Dc(l){let e;return{c(){e=k("Bus stops")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function jc(l){let e;return{c(){e=k(`Bus Open Data Service
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Rc(l){let e,n,t,r,o,s,u,i,a;return t=new Z({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[jc]},$$scope:{ctx:l}}}),i=new Ne({}),{c(){e=T("p"),n=k("Data from the "),h(t.$$.fragment),r=k(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),o=O(),s=T("p"),s.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,u=O(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),$(f,o,c),$(f,s,c),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),t.$set(g)},i(f){a||(m(t.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(o),p(s),p(u)),v(t),v(i,f)}}}function Bc(l){let e,n,t;return n=new me({props:{$$slots:{default:[Rc]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Br(l){let e,n,t,r;return t=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){e=T("p"),e.textContent="Peak hourly frequency:",n=O(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:x,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function Hc(l){let e,n,t,r=l[4].stop_name+"",o,s,u,i,a,f=l[4].peak+"",c,g,d,y,L,C=l[4].peak_description+"",P,D,I,N,A,M=l[4].total+"",E,S,F=l[4].total_description+"",q,R;return{c(){e=T("p"),n=k("Stop name: "),t=T("b"),o=k(r),s=O(),u=T("p"),i=k("Peak: "),a=T("b"),c=k(f),g=k(`
        buses during the busiest hour of any day`),d=O(),y=T("p"),L=k("The peak hour is "),P=k(C),D=O(),I=T("p"),N=k("Total buses per day: "),A=T("b"),E=k(M),S=k(`
        (for `),q=k(F),R=k(", the busiest day of the week)")},m(j,B){$(j,e,B),w(e,n),w(e,t),w(t,o),$(j,s,B),$(j,u,B),w(u,i),w(u,a),w(a,c),w(u,g),$(j,d,B),$(j,y,B),w(y,L),w(y,P),$(j,D,B),$(j,I,B),w(I,N),w(I,A),w(A,E),w(I,S),w(I,q),w(I,R)},p(j,B){B&16&&r!==(r=j[4].stop_name+"")&&H(o,r),B&16&&f!==(f=j[4].peak+"")&&H(c,f),B&16&&C!==(C=j[4].peak_description+"")&&H(P,C),B&16&&M!==(M=j[4].total+"")&&H(E,M),B&16&&F!==(F=j[4].total_description+"")&&H(q,F)},d(j){j&&(p(e),p(s),p(u),p(d),p(y),p(D),p(I))}}}function zc(l){let e,n;return e=new fe({props:{$$slots:{default:[Hc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qc(l){let e,n;const t=[z(St),{sourceLayer:St},{paint:{"circle-color":ke(["get","peak"],l[2],l[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[zc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Ke({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ae(z(St)),s&0&&{sourceLayer:St},s&6&&{paint:{"circle-color":ke(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Gc(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={id:St,$$slots:{right:[Bc],default:[Dc]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new oe({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Br(l);return o=new ve({props:{url:`pmtiles://${be()}/v1/${St}.pmtiles`,$$slots:{default:[qc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Br(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let St="bus_stops";function Uc(l,e,n){let t=Q.sequential_low_to_high,r=[0,3,10,20,30,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Wc extends J{constructor(e){super(),K(this,e,Uc,Gc,Y,{})}}function Vc(l){let e,n,t;return{c(){e=T("input"),G(e,"class","govuk-file-upload"),G(e,"id","load-criticals"),G(e,"type","file")},m(r,o){$(r,e,o),l[7](e),n||(t=at(e,"change",l[5]),n=!0)},p:x,d(r){r&&p(e),l[7](null),n=!1,t()}}}function Hr(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[Yc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&2054&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xc(l){let e,n,t=l[2].toLocaleString()+"",r,o,s;return e=new Ce({props:{color:Rt}}),{c(){h(e.$$.fragment),n=k(`
        Show `),r=k(t),o=k(" issues")},m(u,i){b(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p(u,i){(!s||i&4)&&t!==(t=u[2].toLocaleString()+"")&&H(r,t)},i(u){s||(m(e.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),v(e,u)}}}function Yc(l){let e,n,t;function r(s){l[8](s)}let o={id:"show-criticals",$$slots:{default:[Xc]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new oe({props:o}),U.push(()=>W(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){const i={};u&2052&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Qc(l){let e,n,t,r,o,s;e=new mn({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[Vc]},$$scope:{ctx:l}}}),t=new gl({props:{errorMessage:l[3]}});let u=l[2]>0&&Hr(l);return{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),u&&u.c(),o=Me()},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),$(i,r,a),u&&u.m(i,a),$(i,o,a),s=!0},p(i,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?u?(u.p(i,a),a&4&&m(u,1)):(u=Hr(i),u.c(),m(u,1),u.m(o.parentNode,o)):u&&($e(),_(u,1,1,()=>{u=null}),pe())},i(i){s||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(u),s=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),_(u),s=!1},d(i){i&&(p(n),p(r),p(o)),v(e,i),v(t,i),u&&u.d(i)}}}function Jc(l){let e,n,t=l[10].critical_type+"",r,o,s,u,i,a=l[10].location_description+"",f,c,g,d,y,L=l[10].notes+"",C,P,D,I,N,A,M,E=l[10].id+"",S,F,q,R,j,B=(l[10].inspector??"???")+"",X,re,le,ce=l[10].submission_time+"",Ae,Oe,ie,Le,ue,_e=l[10].scheme_reference+"",ge,je,Fe,Te=l[10].current_design_stage+"",et;return{c(){e=T("div"),n=T("h2"),r=k(t),o=O(),s=T("p"),u=T("u"),u.textContent="Location",i=k(`
          : `),f=k(a),c=O(),g=T("p"),d=T("u"),d.textContent="Notes",y=k(`
          : `),C=k(L),P=O(),D=T("hr"),I=O(),N=T("p"),A=k("Critical issue ID: "),M=T("b"),S=k(E),F=O(),q=T("p"),R=k("Submitted by "),j=T("b"),X=k(B),re=k(`
          at
          `),le=T("b"),Ae=k(ce),Oe=O(),ie=T("p"),Le=k("For scheme "),ue=T("b"),ge=k(_e),je=k(`
          in stage
          `),Fe=T("b"),et=k(Te),ye(e,"max-width","30vw")},m(se,he){$(se,e,he),w(e,n),w(n,r),w(e,o),w(e,s),w(s,u),w(s,i),w(s,f),w(e,c),w(e,g),w(g,d),w(g,y),w(g,C),w(e,P),w(e,D),w(e,I),w(e,N),w(N,A),w(N,M),w(M,S),w(e,F),w(e,q),w(q,R),w(q,j),w(j,X),w(q,re),w(q,le),w(le,Ae),w(e,Oe),w(e,ie),w(ie,Le),w(ie,ue),w(ue,ge),w(ie,je),w(ie,Fe),w(Fe,et)},p(se,he){he&1024&&t!==(t=se[10].critical_type+"")&&H(r,t),he&1024&&a!==(a=se[10].location_description+"")&&H(f,a),he&1024&&L!==(L=se[10].notes+"")&&H(C,L),he&1024&&E!==(E=se[10].id+"")&&H(S,E),he&1024&&B!==(B=(se[10].inspector??"???")+"")&&H(X,B),he&1024&&ce!==(ce=se[10].submission_time+"")&&H(Ae,ce),he&1024&&_e!==(_e=se[10].scheme_reference+"")&&H(ge,_e),he&1024&&Te!==(Te=se[10].current_design_stage+"")&&H(et,Te)},d(se){se&&p(e)}}}function Kc(l){let e,n;return e=new fe({props:{$$slots:{default:[Jc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&3072&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zc(l){let e,n,t,r,o,s;const u=[z(`${ot}-clusters`),{applyToClusters:!0},{paint:{"circle-color":Rt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:l[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let d=0;d<u.length;d+=1)i=te(i,u[d]);e=new Ke({props:i}),e.$on("click",l[6]);const a=[z(`${ot}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:l[1]?"visible":"none"}}];let f={};for(let d=0;d<a.length;d+=1)f=te(f,a[d]);t=new mo({props:f});const c=[z(`${ot}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Rt,"circle-opacity":ee(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:l[1]?"visible":"none"}}];let g={$$slots:{default:[Kc]},$$scope:{ctx:l}};for(let d=0;d<c.length;d+=1)g=te(g,c[d]);return o=new Ke({props:g}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment)},m(d,y){b(e,d,y),$(d,n,y),b(t,d,y),$(d,r,y),b(o,d,y),s=!0},p(d,y){const L=y&2?ne(u,[y&0&&ae(z(`${ot}-clusters`)),u[1],y&0&&{paint:{"circle-color":Rt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:d[1]?"visible":"none"}},u[4]]):{};e.$set(L);const C=y&2?ne(a,[y&0&&ae(z(`${ot}-counts`)),a[1],y&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:d[1]?"visible":"none"}}]):{};t.$set(C);const P=y&2?ne(c,[y&0&&ae(z(`${ot}-points`)),c[1],c[2],c[3],y&0&&{paint:{"circle-color":Rt,"circle-opacity":ee(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:d[1]?"visible":"none"}}]):{};y&2048&&(P.$$scope={dirty:y,ctx:d}),o.$set(P)},i(d){s||(m(e.$$.fragment,d),m(t.$$.fragment,d),m(o.$$.fragment,d),s=!0)},o(d){_(e.$$.fragment,d),_(t.$$.fragment,d),_(o.$$.fragment,d),s=!1},d(d){d&&(p(n),p(r)),v(e,d),v(t,d),v(o,d)}}}function xc(l){let e,n,t,r;return e=new Ee({props:{label:"Critical Issues",$$slots:{default:[Qc]},$$scope:{ctx:l}}}),t=new Ft({props:{id:ot,data:l[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Zc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const u={};s&2063&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}let ot="criticals",Rt="red";function e$(l,e,n){let t;we(l,Cn,d=>n(9,t=d));let r,o=!0,s=0,u="",i=Bl();async function a(d){try{n(4,i=await vi(r.files[0])),n(2,s=i.features.length),n(3,u="")}catch(y){n(3,u=`The file you loaded is broken: ${y}`)}}function f(d){t.getSource(ot).getClusterExpansionZoom(d.detail.features[0].properties.cluster_id,(y,L)=>{y||t.easeTo({center:d.detail.features[0].geometry.coordinates,zoom:L})})}function c(d){U[d?"unshift":"push"](()=>{r=d,n(0,r)})}function g(d){o=d,n(1,o)}return[r,o,s,u,i,a,f,c,g]}class t$ extends J{constructor(e){super(),K(this,e,e$,xc,Y,{})}}function n$(l){let e;return{c(){e=k("Crossings")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function r$(l){let e;return{c(){e=k("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function l$(l){let e,n,t,r,o,s,u;return t=new Z({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[r$]},$$scope:{ctx:l}}}),s=new rt({}),{c(){e=T("p"),n=k("This shows "),h(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function o$(l){let e,n,t;return n=new me({props:{$$slots:{default:[l$]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function zr(l){let e,n;return e=new On({props:{rows:l[1]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:x,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function s$(l){let e,n=qr(l[3])+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=qr(r[3])+"")&&H(t,n)},d(r){r&&p(e)}}}function i$(l){let e,n;return e=new fe({props:{$$slots:{default:[s$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function a$(l){let e,n;const t=[z(Ct),{sourceLayer:Ct},{paint:{"circle-color":Nt(["get","crossing"],{traffic_signals:Q.signalized_crossing},Q.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[i$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Ke({props:r}),e.$on("click",u$),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ae(z(Ct)),s&0&&{sourceLayer:Ct},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function f$(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={id:Ct,$$slots:{right:[o$],default:[n$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new oe({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&zr(l);return o=new ve({props:{url:`pmtiles://${be()}/v1/${Ct}.pmtiles`,$$slots:{default:[a$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=zr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&17&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Ct="crossings";function qr(l){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[l.crossing]??`Unknown crossing type (${l.crossing})`}function u$(l){window.open(`http://openstreetmap.org/node/${l.detail.features[0].properties.osm_id}`,"_blank")}function c$(l,e,n){let t=!1,r=[["Signalized",Q.signalized_crossing],["Other",Q.other_crossing]];function o(s){t=s,n(0,t)}return[t,r,o]}class $$ extends J{constructor(e){super(),K(this,e,c$,f$,Y,{})}}function p$(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Cycle parking`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:x,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function m$(l){let e;return{c(){e=k("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _$(l){let e,n,t,r,o,s,u;return t=new Z({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[m$]},$$scope:{ctx:l}}}),s=new rt({}),{c(){e=T("p"),n=k("Cycle parking, according to "),h(t.$$.fragment),r=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=O(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function g$(l){let e,n,t;return n=new me({props:{$$slots:{default:[_$]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function d$(l){let e,n,t,r=(l[3].capacity??"unknown")+"",o;return{c(){e=T("p"),n=k("Capacity: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=(s[3].capacity??"unknown")+"")&&H(o,r)},d(s){s&&p(e)}}}function h$(l){let e,n;return e=new fe({props:{$$slots:{default:[d$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function b$(l){let e,n;const t=[z(Tt),{sourceLayer:Tt},{paint:{"circle-color":l[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[h$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Ke({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(z(Tt)),s&0&&{sourceLayer:Tt},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function v$(l){let e,n,t,r,o;function s(i){l[2](i)}let u={id:Tt,$$slots:{right:[g$],default:[p$]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new oe({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${be()}/v1/${Tt}.pmtiles`,$$slots:{default:[b$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Tt="cycle_parking";function w$(l,e,n){let t=Q.cycle_parking,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class k$ extends J{constructor(e){super(),K(this,e,w$,v$,Y,{})}}function y$(l){let e;return{c(){e=k("Education")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function S$(l){let e,n,t,r;return t=new rt({}),{c(){e=T("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,n=O(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:x,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function C$(l){let e,n,t;return n=new me({props:{$$slots:{default:[S$]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Gr(l){let e,n,t;return n=new xe({props:{$$slots:{default:[A$]},$$scope:{ctx:l}}}),{c(){e=T("div"),h(n.$$.fragment),ye(e,"border","1px solid black"),ye(e,"padding","8px")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&130&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function T$(l){let e,n,t;return e=new Ce({props:{color:Q.education.schools}}),{c(){h(e.$$.fragment),n=k(`
        Schools`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:x,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function O$(l){let e,n,t;return e=new Ce({props:{color:Q.education.colleges}}),{c(){h(e.$$.fragment),n=k(`
        Colleges`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:x,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function L$(l){let e,n,t;return e=new Ce({props:{color:Q.education.universities}}),{c(){h(e.$$.fragment),n=k(`
        Universities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:x,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function A$(l){let e,n,t,r,o,s,u,i,a;function f(C){l[3](C)}let c={id:"school",$$slots:{default:[T$]},$$scope:{ctx:l}};l[1].school!==void 0&&(c.checked=l[1].school),e=new oe({props:c}),U.push(()=>W(e,"checked",f));function g(C){l[4](C)}let d={id:"college",$$slots:{default:[O$]},$$scope:{ctx:l}};l[1].college!==void 0&&(d.checked=l[1].college),r=new oe({props:d}),U.push(()=>W(r,"checked",g));function y(C){l[5](C)}let L={id:"university",$$slots:{default:[L$]},$$scope:{ctx:l}};return l[1].university!==void 0&&(L.checked=l[1].university),u=new oe({props:L}),U.push(()=>W(u,"checked",y)),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment),s=O(),h(u.$$.fragment)},m(C,P){b(e,C,P),$(C,t,P),b(r,C,P),$(C,s,P),b(u,C,P),a=!0},p(C,P){const D={};P&128&&(D.$$scope={dirty:P,ctx:C}),!n&&P&2&&(n=!0,D.checked=C[1].school,V(()=>n=!1)),e.$set(D);const I={};P&128&&(I.$$scope={dirty:P,ctx:C}),!o&&P&2&&(o=!0,I.checked=C[1].college,V(()=>o=!1)),r.$set(I);const N={};P&128&&(N.$$scope={dirty:P,ctx:C}),!i&&P&2&&(i=!0,N.checked=C[1].university,V(()=>i=!1)),u.$set(N)},i(C){a||(m(e.$$.fragment,C),m(r.$$.fragment,C),m(u.$$.fragment,C),a=!0)},o(C){_(e.$$.fragment,C),_(r.$$.fragment,C),_(u.$$.fragment,C),a=!1},d(C){C&&(p(t),p(s)),v(e,C),v(r,C),v(u,C)}}}function I$(l){let e,n=(l[6].name??"Unnamed institution")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=(r[6].name??"Unnamed institution")+"")&&H(t,n)},d(r){r&&p(e)}}}function P$(l){let e,n;return e=new fe({props:{$$slots:{default:[I$,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&192&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function M$(l){let e,n;const t=[z(Bt),{sourceLayer:Bt},{paint:{"fill-color":Nt(["get","type"],{school:Q.education.schools,college:Q.education.colleges,university:Q.education.universities},"grey"),"fill-opacity":ee(.7,1)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:Ur(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[P$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new qe({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(z(Bt)),s&0&&{sourceLayer:Bt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:Ur(o[1])},t[5],t[6]]):{};s&128&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function N$(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={id:"education",$$slots:{right:[C$],default:[y$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new oe({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Gr(l);return o=new ve({props:{url:`pmtiles://${be()}/v1/${Bt}.pmtiles`,$$slots:{default:[M$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&128&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Gr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&131&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Bt="education";function Ur(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","type"],["literal",e]]}function F$(l,e,n){let t=!1;const r={school:!0,college:!0,university:!0};function o(a){t=a,n(0,t)}function s(a){l.$$.not_equal(r.school,a)&&(r.school=a,n(1,r))}function u(a){l.$$.not_equal(r.college,a)&&(r.college=a,n(1,r))}function i(a){l.$$.not_equal(r.university,a)&&(r.university=a,n(1,r))}return[t,r,o,s,u,i]}class E$ extends J{constructor(e){super(),K(this,e,F$,N$,Y,{})}}function D$(l){let e,n,t,r;return e=new Ce({props:{color:l[4]}}),{c(){h(e.$$.fragment),n=O(),t=k(l[2])},m(o,s){b(e,o,s),$(o,n,s),$(o,t,s),r=!0},p(o,s){(!r||s&4)&&H(t,o[2])},i(o){r||(m(e.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),r=!1},d(o){o&&(p(n),p(t)),v(e,o)}}}function j$(l){let e;const n=l[5].default,t=Wt(n,l,l[7],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&128)&&Vt(t,n,r,r[7],e?Yt(n,r[7],o,null):Xt(r[7]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function R$(l){let e,n,t;return n=new me({props:{$$slots:{default:[j$]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function B$(l){let e,n=(l[8].name??`Unnamed ${l[1]}`)+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&258&&n!==(n=(r[8].name??`Unnamed ${r[1]}`)+"")&&H(t,n)},d(r){r&&p(e)}}}function H$(l){let e,n;return e=new fe({props:{$$slots:{default:[B$,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&386&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function z$(l){let e,n;const t=[z(l[0]),{sourceLayer:l[0]},{paint:{"fill-color":l[4],"fill-opacity":ee(.7,1)}},{layout:{visibility:l[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[H$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new qe({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&25?ne(t,[s&1&&ae(z(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":ee(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function q$(l){let e,n,t,r,o;function s(i){l[6](i)}let u={id:l[0],$$slots:{right:[R$],default:[D$]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.checked=l[3]),e=new oe({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${be()}/v1/${l[0]}.pmtiles`,$$slots:{default:[z$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&1&&(f.id=i[0]),a&132&&(f.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,f.checked=i[3],V(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${be()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function G$(l,e,n){let{$$slots:t={},$$scope:r}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:u}=e,i=Q[o],a=!1;function f(c){a=c,n(3,a)}return l.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,r=c.$$scope)},[o,s,u,a,i,t,f,r]}class El extends J{constructor(e){super(),K(this,e,G$,q$,Y,{name:0,singularNoun:1,pluralNoun:2})}}function U$(l){let e;return{c(){e=k("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function W$(l){let e,n,t,r,o,s,u;return t=new Z({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[U$]},$$scope:{ctx:l}}}),s=new rt({}),{c(){e=T("p"),n=k("This shows "),h(t.$$.fragment),r=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=O(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function V$(l){let e,n;return e=new El({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[W$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class X$ extends J{constructor(e){super(),K(this,e,null,V$,Y,{})}}function Y$(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Railway Stations`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:x,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Q$(l){let e;return{c(){e=k("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function J$(l){let e,n,t,r,o,s,u;return t=new Z({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Q$]},$$scope:{ctx:l}}}),s=new rt({}),{c(){e=T("p"),n=k("This shows "),h(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function K$(l){let e,n,t;return n=new me({props:{$$slots:{default:[J$]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Z$(l){let e,n=(l[3].name??"Unnamed railway station")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unnamed railway station")+"")&&H(t,n)},d(r){r&&p(e)}}}function x$(l){let e,n;return e=new fe({props:{$$slots:{default:[Z$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ep(l){let e,n;const t=[z(ln),{paint:{"circle-color":l[1],"circle-radius":tn/2}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[x$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Ke({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(z(ln)),s&2&&{paint:{"circle-color":o[1],"circle-radius":tn/2}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function tp(l){let e,n,t,r,o;function s(i){l[2](i)}let u={id:ln,$$slots:{right:[K$],default:[Y$]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new oe({props:u}),U.push(()=>W(e,"checked",s)),r=new Ft({props:{data:`${be()}/v1/${ln}.geojson`,$$slots:{default:[ep]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let ln="railway_stations";function np(l,e,n){let t=Q.railway_stations,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class rp extends J{constructor(e){super(),K(this,e,np,tp,Y,{})}}function lp(l){let e;return{c(){e=k("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function op(l){let e;return{c(){e=k("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sp(l){let e,n,t,r,o,s,u,i,a;return t=new Z({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[lp]},$$scope:{ctx:l}}}),o=new Z({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[op]},$$scope:{ctx:l}}}),i=new rt({}),{c(){e=T("p"),n=k("This shows "),h(t.$$.fragment),r=k(" and "),h(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),u=O(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&1&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&1&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function ip(l){let e,n;return e=new El({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[sp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class ap extends J{constructor(e){super(),K(this,e,null,ip,Y,{})}}function fp(l){let e;return{c(){e=k("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function up(l){let e;return{c(){e=k("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cp(l){let e;return{c(){e=k("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $p(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y,L,C,P,D,I,N,A,M,E;return t=new Z({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[up]},$$scope:{ctx:l}}}),P=new Z({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[cp]},$$scope:{ctx:l}}}),M=new Ne({}),{c(){e=T("p"),n=k("This layer shows collisions recorded in the "),h(t.$$.fragment),r=k(" dataset. Please note these limitations:"),o=O(),s=T("ul"),u=T("li"),u.textContent="Only collisions between 2017 and 2022 are included",i=O(),a=T("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,f=O(),c=T("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,g=O(),d=T("li"),d.textContent='The "pedestrians" category also include mobility scooters',y=O(),L=T("li"),C=k("All limitations "),h(P.$$.fragment),D=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),I=O(),N=T("p"),N.textContent="You can click a point to open the full report, thanks to CycleStreets.",A=O(),h(M.$$.fragment)},m(S,F){$(S,e,F),w(e,n),b(t,e,null),w(e,r),$(S,o,F),$(S,s,F),w(s,u),w(s,i),w(s,a),w(s,f),w(s,c),w(s,g),w(s,d),w(s,y),w(s,L),w(L,C),b(P,L,null),w(L,D),$(S,I,F),$(S,N,F),$(S,A,F),b(M,S,F),E=!0},p(S,F){const q={};F&16777216&&(q.$$scope={dirty:F,ctx:S}),t.$set(q);const R={};F&16777216&&(R.$$scope={dirty:F,ctx:S}),P.$set(R)},i(S){E||(m(t.$$.fragment,S),m(P.$$.fragment,S),m(M.$$.fragment,S),E=!0)},o(S){_(t.$$.fragment,S),_(P.$$.fragment,S),_(M.$$.fragment,S),E=!1},d(S){S&&(p(e),p(o),p(s),p(I),p(N),p(A)),v(t),v(P),v(M,S)}}}function pp(l){let e,n,t;return n=new me({props:{$$slots:{default:[$p]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Wr(l){let e,n,t,r,o,s,u,i,a,f,c,g,d;return n=new xe({props:{small:!0,$$slots:{default:[hp]},$$scope:{ctx:l}}}),f=new On({props:{rows:l[14]}}),{c(){e=T("div"),h(n.$$.fragment),t=O(),r=T("div"),o=k(`Filter years:
      `),s=T("input"),u=k(`
      -
      `),i=T("input"),a=O(),h(f.$$.fragment),G(s,"type","number"),G(s,"min",2017),G(s,"max",2022),G(s,"class","svelte-1ft65rw"),G(i,"type","number"),G(i,"min",2017),G(i,"max",2022),G(i,"class","svelte-1ft65rw"),ye(e,"border","1px solid black"),ye(e,"padding","8px")},m(y,L){$(y,e,L),b(n,e,null),w(e,t),w(e,r),w(r,o),w(r,s),Je(s,l[4]),w(r,u),w(r,i),Je(i,l[5]),w(e,a),b(f,e,null),c=!0,g||(d=[at(s,"input",l[20]),at(i,"input",l[21])],g=!0)},p(y,L){const C={};L&16777231&&(C.$$scope={dirty:L,ctx:y}),n.$set(C),L&16&&qt(s.value)!==y[4]&&Je(s,y[4]),L&32&&qt(i.value)!==y[5]&&Je(i,y[5])},i(y){c||(m(n.$$.fragment,y),m(f.$$.fragment,y),c=!0)},o(y){_(n.$$.fragment,y),_(f.$$.fragment,y),c=!1},d(y){y&&p(e),v(n),v(f),g=!1,ml(d)}}}function mp(l){let e;return{c(){e=k("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _p(l){let e;return{c(){e=k("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gp(l){let e;return{c(){e=k("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function dp(l){let e;return{c(){e=k("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function hp(l){let e,n,t,r,o,s,u,i,a,f,c,g;function d(A){l[16](A)}let y={id:"stats19-pedestrians",$$slots:{default:[mp]},$$scope:{ctx:l}};l[0]!==void 0&&(y.checked=l[0]),e=new oe({props:y}),U.push(()=>W(e,"checked",d));function L(A){l[17](A)}let C={id:"stats19-cyclists",$$slots:{default:[_p]},$$scope:{ctx:l}};l[1]!==void 0&&(C.checked=l[1]),r=new oe({props:C}),U.push(()=>W(r,"checked",L));function P(A){l[18](A)}let D={id:"stats19-horse-riders",$$slots:{default:[gp]},$$scope:{ctx:l}};l[2]!==void 0&&(D.checked=l[2]),u=new oe({props:D}),U.push(()=>W(u,"checked",P));function I(A){l[19](A)}let N={id:"stats19-other",$$slots:{default:[dp]},$$scope:{ctx:l}};return l[3]!==void 0&&(N.checked=l[3]),f=new oe({props:N}),U.push(()=>W(f,"checked",I)),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment),s=O(),h(u.$$.fragment),a=O(),h(f.$$.fragment)},m(A,M){b(e,A,M),$(A,t,M),b(r,A,M),$(A,s,M),b(u,A,M),$(A,a,M),b(f,A,M),g=!0},p(A,M){const E={};M&16777216&&(E.$$scope={dirty:M,ctx:A}),!n&&M&1&&(n=!0,E.checked=A[0],V(()=>n=!1)),e.$set(E);const S={};M&16777216&&(S.$$scope={dirty:M,ctx:A}),!o&&M&2&&(o=!0,S.checked=A[1],V(()=>o=!1)),r.$set(S);const F={};M&16777216&&(F.$$scope={dirty:M,ctx:A}),!i&&M&4&&(i=!0,F.checked=A[2],V(()=>i=!1)),u.$set(F);const q={};M&16777216&&(q.$$scope={dirty:M,ctx:A}),!c&&M&8&&(c=!0,q.checked=A[3],V(()=>c=!1)),f.$set(q)},i(A){g||(m(e.$$.fragment,A),m(r.$$.fragment,A),m(u.$$.fragment,A),m(f.$$.fragment,A),g=!0)},o(A){_(e.$$.fragment,A),_(r.$$.fragment,A),_(u.$$.fragment,A),_(f.$$.fragment,A),g=!1},d(A){A&&(p(t),p(s),p(a)),v(e,A),v(r,A),v(u,A),v(f,A)}}}function Vr(l){let e,n,t,r=l[8][l[23].pedestrian_location]+"",o;return{c(){e=T("p"),n=k("Pedestrian location: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8388608&&r!==(r=s[8][s[23].pedestrian_location]+"")&&H(o,r)},d(s){s&&p(e)}}}function Xr(l){let e,n,t,r=l[9][l[23].pedestrian_movement]+"",o;return{c(){e=T("p"),n=k("Pedestrian movement: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8388608&&r!==(r=s[9][s[23].pedestrian_movement]+"")&&H(o,r)},d(s){s&&p(e)}}}function bp(l){let e,n,t,r=l[23].year+"",o,s,u,i,a,f=l[10][l[23].severity]+"",c,g,d,y,L,C=Yr(l[23])+"",P,D,I,N,A,M=l[23].pedestrian_location&&Vr(l),E=l[23].pedestrian_movement&&Xr(l);return{c(){e=T("p"),n=k("Year: "),t=T("b"),o=k(r),s=O(),u=T("p"),i=k("Severity: "),a=T("b"),c=k(f),g=O(),d=T("p"),y=k("Casualties: "),L=T("b"),P=k(C),D=O(),M&&M.c(),I=O(),E&&E.c(),N=O(),A=T("p"),A.textContent="Click to open full report in CycleStreets"},m(S,F){$(S,e,F),w(e,n),w(e,t),w(t,o),$(S,s,F),$(S,u,F),w(u,i),w(u,a),w(a,c),$(S,g,F),$(S,d,F),w(d,y),w(d,L),w(L,P),$(S,D,F),M&&M.m(S,F),$(S,I,F),E&&E.m(S,F),$(S,N,F),$(S,A,F)},p(S,F){F&8388608&&r!==(r=S[23].year+"")&&H(o,r),F&8388608&&f!==(f=S[10][S[23].severity]+"")&&H(c,f),F&8388608&&C!==(C=Yr(S[23])+"")&&H(P,C),S[23].pedestrian_location?M?M.p(S,F):(M=Vr(S),M.c(),M.m(I.parentNode,I)):M&&(M.d(1),M=null),S[23].pedestrian_movement?E?E.p(S,F):(E=Xr(S),E.c(),E.m(N.parentNode,N)):E&&(E.d(1),E=null)},d(S){S&&(p(e),p(s),p(u),p(g),p(d),p(D),p(I),p(N),p(A)),M&&M.d(S),E&&E.d(S)}}}function vp(l){let e,n;return e=new fe({props:{$$slots:{default:[bp,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&25165824&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wp(l){let e,n;const t=[z(Ot),{sourceLayer:Ot},{paint:{"circle-color":ke(["get","severity"],[1,2,3],[l[11],l[12],l[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:l[7]},{layout:{visibility:l[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[vp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Ke({props:r}),e.$on("click",yp),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&14528?ne(t,[s&0&&ae(z(Ot)),s&0&&{sourceLayer:Ot},s&14336&&{paint:{"circle-color":ke(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function kp(l){let e,n,t,r,o,s;function u(f){l[15](f)}let i={id:Ot,$$slots:{right:[pp],default:[fp]},$$scope:{ctx:l}};l[6]!==void 0&&(i.checked=l[6]),e=new oe({props:i}),U.push(()=>W(e,"checked",u));let a=l[6]&&Wr(l);return o=new ve({props:{url:`pmtiles://${be()}/v1/${Ot}.pmtiles`,$$slots:{default:[wp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&16777216&&(g.$$scope={dirty:c,ctx:f}),!n&&c&64&&(n=!0,g.checked=f[6],V(()=>n=!1)),e.$set(g),f[6]?a?(a.p(f,c),c&64&&m(a,1)):(a=Wr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&16777408&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Ot="stats19";function Yr(l){let e=[];return l.pedestrian&&e.push("pedestrian"),l.cyclist&&e.push("cyclist"),l.horse_rider&&e.push("horse rider"),l.other&&e.push("other"),e.join(", ")}function yp(l){window.open(`https://www.cyclestreets.net/collisions/reports/${l.detail.features[0].properties.accident_index}`,"_blank")}function Sp(l,e,n){let t,r=!1,o=!0,s=!0,u=!0,i=!1,a=2017,f=2022;function c(q,R,j,B,X,re){let le=["any"];return o&&le.push(["get","pedestrian"]),s&&le.push(["get","cyclist"]),u&&le.push(["get","horse_rider"]),i&&le.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],f],le]}let g={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},d={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},y={1:"Fatal",2:"Serious",3:"Slight"},L=Q.sequential_low_to_high[4],C=Q.sequential_low_to_high[2],P=Q.sequential_low_to_high[0],D=[["Fatal",L],["Serious",C],["Slight",P]];function I(q){r=q,n(6,r)}function N(q){o=q,n(0,o)}function A(q){s=q,n(1,s)}function M(q){u=q,n(2,u)}function E(q){i=q,n(3,i)}function S(){a=qt(this.value),n(4,a)}function F(){f=qt(this.value),n(5,f)}return l.$$.update=()=>{l.$$.dirty&63&&n(7,t=c())},[o,s,u,i,a,f,r,t,g,d,y,L,C,P,D,I,N,A,M,E,S,F]}class Cp extends J{constructor(e){super(),K(this,e,Sp,kp,Y,{})}}function Tp(l){let e;return{c(){e=k("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Op(l){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Lp(l){let e;return{c(){e=k("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ap(l){let e,n,t,r,o,s,u,i,a,f,c;return t=new Z({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Op]},$$scope:{ctx:l}}}),o=new Z({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Lp]},$$scope:{ctx:l}}}),f=new Ne({}),{c(){e=T("p"),n=k("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),r=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),s=k(" for details and caveats about the measurements."),u=O(),i=T("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=O(),h(f.$$.fragment)},m(g,d){$(g,e,d),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(g,u,d),$(g,i,d),$(g,a,d),b(f,g,d),c=!0},p(g,d){const y={};d&64&&(y.$$scope={dirty:d,ctx:g}),t.$set(y);const L={};d&64&&(L.$$scope={dirty:d,ctx:g}),o.$set(L)},i(g){c||(m(t.$$.fragment,g),m(o.$$.fragment,g),m(f.$$.fragment,g),c=!0)},o(g){_(t.$$.fragment,g),_(o.$$.fragment,g),_(f.$$.fragment,g),c=!1},d(g){g&&(p(e),p(u),p(i),p(a)),v(t),v(o),v(f,g)}}}function Ip(l){let e,n,t;return n=new me({props:{$$slots:{default:[Ap]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Qr(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[3]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:x,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Pp(l){let e,n=l[5].location+"",t,r,o,s,u,i=l[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,g,d,y=l[5].pedal_cycles_2022.toLocaleString()+"",L,C,P,D,I,N=l[5].method+"",A;return{c(){e=T("h2"),t=k(n),r=O(),o=T("p"),s=k("Total motor vehicles (2022 AADF): "),u=T("b"),a=k(i),f=O(),c=T("p"),g=k("Total pedal cycles (2022 AADF): "),d=T("b"),L=k(y),C=O(),P=T("p"),D=k("Count method: "),I=T("b"),A=k(N)},m(M,E){$(M,e,E),w(e,t),$(M,r,E),$(M,o,E),w(o,s),w(o,u),w(u,a),$(M,f,E),$(M,c,E),w(c,g),w(c,d),w(d,L),$(M,C,E),$(M,P,E),w(P,D),w(P,I),w(I,A)},p(M,E){E&32&&n!==(n=M[5].location+"")&&H(t,n),E&32&&i!==(i=M[5].motor_vehicles_2022.toLocaleString()+"")&&H(a,i),E&32&&y!==(y=M[5].pedal_cycles_2022.toLocaleString()+"")&&H(L,y),E&32&&N!==(N=M[5].method+"")&&H(A,N)},d(M){M&&(p(e),p(r),p(o),p(f),p(c),p(C),p(P))}}}function Mp(l){let e,n;return e=new fe({props:{$$slots:{default:[Pp,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&96&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Np(l){let e,n;const t=[z(Lt),{sourceLayer:Lt},{paint:{"circle-color":ke(["get","motor_vehicles_2022"],l[2],l[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[Mp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Ke({props:r}),e.$on("click",Ep),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ae(z(Lt)),s&0&&{sourceLayer:Lt},s&6&&{paint:{"circle-color":ke(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Fp(l){let e,n,t,r,o,s;function u(f){l[4](f)}let i={id:Lt,$$slots:{right:[Ip],default:[Tp]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new oe({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Qr(l);return o=new ve({props:{url:`pmtiles://${be()}/v1/${Lt}.pmtiles`,$$slots:{default:[Np]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&64&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Qr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&65&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Lt="vehicle_counts";function Ep(l){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${l.detail.features[0].properties.count_point}`,"_blank")}function Dp(l,e,n){let t=Q.sequential_low_to_high,r=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function u(i){s=i,n(0,s)}return[s,t,r,o,u]}class jp extends J{constructor(e){super(),K(this,e,Dp,Fp,Y,{})}}function Rp(l){let e,n,t,r,o,s,u,i;return e=new E$({}),t=new X$({}),o=new ap({}),u=new rp({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment),s=O(),h(u.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),$(a,r,f),b(o,a,f),$(a,s,f),b(u,a,f),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(u.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(o.$$.fragment,a),_(u.$$.fragment,a),i=!1},d(a){a&&(p(n),p(r),p(s)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function Bp(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[Rp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Hp(l){let e,n,t,r,o,s,u,i,a,f;return e=new gu({}),t=new Du({}),o=new Tu({}),u=new k$({}),a=new $$({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment),s=O(),h(u.$$.fragment),i=O(),h(a.$$.fragment)},m(c,g){b(e,c,g),$(c,n,g),b(t,c,g),$(c,r,g),b(o,c,g),$(c,s,g),b(u,c,g),$(c,i,g),b(a,c,g),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(r),p(s),p(i)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function zp(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[Hp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qp(l){let e,n,t,r,o,s;return e=new ru({}),t=new Ec({}),o=new Wc({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment)},m(u,i){b(e,u,i),$(u,n,i),b(t,u,i),$(u,r,i),b(o,u,i),s=!0},i(u){s||(m(e.$$.fragment,u),m(t.$$.fragment,u),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(t.$$.fragment,u),_(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),v(e,u),v(t,u),v(o,u)}}}function Gp(l){let e,n,t,r,o,s,u,i,a,f;return e=new vf({}),t=new Gf({}),o=new Ta({}),u=new Ya({}),a=new ff({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment),s=O(),h(u.$$.fragment),i=O(),h(a.$$.fragment)},m(c,g){b(e,c,g),$(c,n,g),b(t,c,g),$(c,r,g),b(o,c,g),$(c,s,g),b(u,c,g),$(c,i,g),b(a,c,g),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(r),p(s),p(i)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Up(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[Gp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wp(l){let e,n,t,r;return e=new _a({}),t=new ja({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Vp(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[Wp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xp(l){let e,n,t,r,o,s;return e=new Oc({}),t=new Vu({}),o=new dc({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment)},m(u,i){b(e,u,i),$(u,n,i),b(t,u,i),$(u,r,i),b(o,u,i),s=!0},i(u){s||(m(e.$$.fragment,u),m(t.$$.fragment,u),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(t.$$.fragment,u),_(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),v(e,u),v(t,u),v(o,u)}}}function Yp(l){let e,n,t,r,o,s,u=_n()=="Private (development)",i,a,f;e=new jp({}),t=new Cp({}),o=new sc({});let c=u&&Xp();return a=new Mf({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment),s=O(),c&&c.c(),i=O(),h(a.$$.fragment)},m(g,d){b(e,g,d),$(g,n,d),b(t,g,d),$(g,r,d),b(o,g,d),$(g,s,d),c&&c.m(g,d),$(g,i,d),b(a,g,d),f=!0},p:x,i(g){f||(m(e.$$.fragment,g),m(t.$$.fragment,g),m(o.$$.fragment,g),m(c),m(a.$$.fragment,g),f=!0)},o(g){_(e.$$.fragment,g),_(t.$$.fragment,g),_(o.$$.fragment,g),_(c),_(a.$$.fragment,g),f=!1},d(g){g&&(p(n),p(r),p(s),p(i)),v(e,g),v(t,g),v(o,g),c&&c.d(g),v(a,g)}}}function Qp(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[Yp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Jp(l){let e,n,t,r,o;function s(i){l[3](i)}let u={};return l[0]!==void 0&&(u.enabled=l[0]),e=new Vl({props:u}),U.push(()=>W(e,"enabled",s)),r=new Zl({}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,a){const f={};!n&&a&1&&(n=!0,f.enabled=i[0],V(()=>n=!1)),e.$set(f)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function Kp(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y,L,C,P,D;return e=new t$({}),t=new Ee({props:{label:"Trip generators",$$slots:{default:[Bp]},$$scope:{ctx:l}}}),o=new Ee({props:{label:"Existing infrastructure",$$slots:{default:[zp]},$$scope:{ctx:l}}}),u=new Ee({props:{label:"Public transit",$$slots:{default:[qp]},$$scope:{ctx:l}}}),a=new Ee({props:{label:"Boundaries",$$slots:{default:[Up]},$$scope:{ctx:l}}}),c=new Ee({props:{label:"Census",$$slots:{default:[Vp]},$$scope:{ctx:l}}}),d=new Ee({props:{label:"Other",$$slots:{default:[Qp]},$$scope:{ctx:l}}}),L=new Ee({props:{label:"Tools",$$slots:{default:[Jp]},$$scope:{ctx:l}}}),P=new Wl({props:{disabled:!l[1]}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment),s=O(),h(u.$$.fragment),i=O(),h(a.$$.fragment),f=O(),h(c.$$.fragment),g=O(),h(d.$$.fragment),y=O(),h(L.$$.fragment),C=O(),h(P.$$.fragment)},m(I,N){b(e,I,N),$(I,n,N),b(t,I,N),$(I,r,N),b(o,I,N),$(I,s,N),b(u,I,N),$(I,i,N),b(a,I,N),$(I,f,N),b(c,I,N),$(I,g,N),b(d,I,N),$(I,y,N),b(L,I,N),$(I,C,N),b(P,I,N),D=!0},p(I,N){const A={};N&16&&(A.$$scope={dirty:N,ctx:I}),t.$set(A);const M={};N&16&&(M.$$scope={dirty:N,ctx:I}),o.$set(M);const E={};N&16&&(E.$$scope={dirty:N,ctx:I}),u.$set(E);const S={};N&16&&(S.$$scope={dirty:N,ctx:I}),a.$set(S);const F={};N&16&&(F.$$scope={dirty:N,ctx:I}),c.$set(F);const q={};N&16&&(q.$$scope={dirty:N,ctx:I}),d.$set(q);const R={};N&17&&(R.$$scope={dirty:N,ctx:I}),L.$set(R);const j={};N&2&&(j.disabled=!I[1]),P.$set(j)},i(I){D||(m(e.$$.fragment,I),m(t.$$.fragment,I),m(o.$$.fragment,I),m(u.$$.fragment,I),m(a.$$.fragment,I),m(c.$$.fragment,I),m(d.$$.fragment,I),m(L.$$.fragment,I),m(P.$$.fragment,I),D=!0)},o(I){_(e.$$.fragment,I),_(t.$$.fragment,I),_(o.$$.fragment,I),_(u.$$.fragment,I),_(a.$$.fragment,I),_(c.$$.fragment,I),_(d.$$.fragment,I),_(L.$$.fragment,I),_(P.$$.fragment,I),D=!1},d(I){I&&(p(n),p(r),p(s),p(i),p(f),p(g),p(y),p(C)),v(e,I),v(t,I),v(o,I),v(u,I),v(a,I),v(c,I),v(d,I),v(L,I),v(P,I)}}}function Zp(l){let e,n;const t=[z("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:l[1]?"none":"visible"}}];let r={};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new qe({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&2?ne(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function xp(l){let e,n,t,r;return e=new Ee({props:{label:"Layers",open:!0,$$slots:{default:[Kp]},$$scope:{ctx:l}}}),t=new Ft({props:{data:l[2],$$slots:{default:[Zp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const u={};s&19&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function em(l,e,n){let t,r;we(l,fr,u=>n(1,r=u));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(u){t=u,n(0,t),n(1,r)}return l.$$.update=()=>{l.$$.dirty&2&&n(0,t=!r),l.$$.dirty&1&&fr.set(!t)},[t,r,o,s]}class tm extends J{constructor(e){super(),K(this,e,em,xp,Y,{})}}function Jr(l){let e;return{c(){e=T("p"),e.textContent="Loading scheme data..."},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function nm(l){let e,n=l[0]&&Jr();return{c(){n&&n.c(),e=Me()},m(t,r){n&&n.m(t,r),$(t,e,r)},p(t,[r]){t[0]?n||(n=Jr(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:x,o:x,d(t){t&&p(e),n&&n.d(t)}}}function rm(l,e,n){let{loadFile:t}=e,r=!0;return Tn(async()=>{let s=await(await fetch(`${on()}/v1/random_schemes.geojson`)).text();t(s),n(0,r=!1)}),l.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[r,t]}class lm extends J{constructor(e){super(),K(this,e,rm,nm,Y,{loadFile:1})}}function Kr(l){var o;let e,n,t=((o=l[0].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=T("p"),n=k("Current milestone: "),r=k(t)},m(s,u){$(s,e,u),w(e,n),w(e,r)},p(s,u){var i;u&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&H(r,t)},d(s){s&&p(e)}}}function om(l){let e;return{c(){e=k("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sm(l){let e;return{c(){e=k("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function im(l){let e,n,t,r;return e=new Pt({props:{$$slots:{default:[om]},$$scope:{ctx:l}}}),e.$on("click",l[1]),t=new Pt({props:{$$slots:{default:[sm]},$$scope:{ctx:l}}}),t.$on("click",l[2]),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function am(l){var F,q,R,j;let e,n,t=l[0].scheme_reference+"",r,o,s,u,i=((F=l[0].browse)==null?void 0:F.authority_or_region)+"",a,f,c,g,d=((q=l[0].browse)==null?void 0:q.capital_scheme_id)+"",y,L,C,P,D=((R=l[0].browse)==null?void 0:R.funding_programme)+"",I,N,A,M,E,S=((j=l[0].browse)==null?void 0:j.current_milestone)&&Kr(l);return M=new Xl({props:{$$slots:{default:[im]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("Scheme reference: "),r=k(t),o=O(),s=T("p"),u=k("Authority or region: "),a=k(i),f=O(),c=T("p"),g=k("Capital scheme ID: "),y=k(d),L=O(),C=T("p"),P=k("Funding programme: "),I=k(D),N=O(),S&&S.c(),A=O(),h(M.$$.fragment)},m(B,X){$(B,e,X),w(e,n),w(e,r),$(B,o,X),$(B,s,X),w(s,u),w(s,a),$(B,f,X),$(B,c,X),w(c,g),w(c,y),$(B,L,X),$(B,C,X),w(C,P),w(C,I),$(B,N,X),S&&S.m(B,X),$(B,A,X),b(M,B,X),E=!0},p(B,X){var le,ce,Ae,Oe;(!E||X&1)&&t!==(t=B[0].scheme_reference+"")&&H(r,t),(!E||X&1)&&i!==(i=((le=B[0].browse)==null?void 0:le.authority_or_region)+"")&&H(a,i),(!E||X&1)&&d!==(d=((ce=B[0].browse)==null?void 0:ce.capital_scheme_id)+"")&&H(y,d),(!E||X&1)&&D!==(D=((Ae=B[0].browse)==null?void 0:Ae.funding_programme)+"")&&H(I,D),(Oe=B[0].browse)!=null&&Oe.current_milestone?S?S.p(B,X):(S=Kr(B),S.c(),S.m(A.parentNode,A)):S&&(S.d(1),S=null);const re={};X&32&&(re.$$scope={dirty:X,ctx:B}),M.$set(re)},i(B){E||(m(M.$$.fragment,B),E=!0)},o(B){_(M.$$.fragment,B),E=!1},d(B){B&&(p(e),p(o),p(s),p(f),p(c),p(L),p(C),p(N),p(A)),S&&S.d(B),v(M,B)}}}function fm(l){let e,n;return e=new Ee({props:{label:`${l[0].scheme_name}`,$$slots:{default:[am]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.label=`${t[0].scheme_name}`),r&33&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function um(l,e,n){let t,r;we(l,Mt,i=>n(3,t=i)),we(l,Cn,i=>n(4,r=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};r==null||r.fitBounds(Hl(i),{padding:20,animate:!1})}function u(){var f,c;let i={type:"FeatureCollection",features:t.features.filter(g=>g.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return l.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,u]}class cm extends J{constructor(e){super(),K(this,e,um,fm,Y,{scheme:0})}}function Zr(l){let e,n,t=Dn(l[0].length_meters)+"",r;return{c(){e=T("p"),n=k("Length: "),r=k(t)},m(o,s){$(o,e,s),w(e,n),w(e,r)},p(o,s){s&1&&t!==(t=Dn(o[0].length_meters)+"")&&H(r,t)},d(o){o&&p(e)}}}function xr(l){let e,n=st(l[0].description,l[2])+"";return{c(){e=T("p")},m(t,r){$(t,e,r),e.innerHTML=n},p(t,r){r&5&&n!==(n=st(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function el(l){var o;let e,n,t=((o=l[1].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=T("p"),n=k("Current milestone: "),r=k(t)},m(s,u){$(s,e,u),w(e,n),w(e,r)},p(s,u){var i;u&2&&t!==(t=((i=s[1].browse)==null?void 0:i.current_milestone)+"")&&H(r,t)},d(s){s&&p(e)}}}function $m(l){var je,Fe,Te,et;let e,n,t,r=st(l[0].name,l[2])+"",o,s=l[0].intervention_type+"",u,i,a,f,c,g,d,y,L,C,P=st(l[1].scheme_name??"",l[3])+"",D,I,N=st(l[0].scheme_reference,l[3])+"",A,M,E,S,F=((je=l[1].browse)==null?void 0:je.authority_or_region)+"",q,R,j,B,X=((Fe=l[1].browse)==null?void 0:Fe.capital_scheme_id)+"",re,le,ce,Ae,Oe=((Te=l[1].browse)==null?void 0:Te.funding_programme)+"",ie,Le,ue=l[0].length_meters&&Zr(l),_e=l[0].description&&xr(l),ge=((et=l[1].browse)==null?void 0:et.current_milestone)&&el(l);return{c(){e=T("div"),n=T("h2"),t=new Ht(!1),o=k(" ("),u=k(s),i=k(")"),a=O(),ue&&ue.c(),f=O(),_e&&_e.c(),c=O(),g=T("hr"),d=O(),y=T("p"),L=k("Part of scheme: "),C=new Ht(!1),D=k(" ("),I=new Ht(!1),A=k(")"),M=O(),E=T("p"),S=k("Authority or region: "),q=k(F),R=O(),j=T("p"),B=k("Capital scheme ID: "),re=k(X),le=O(),ce=T("p"),Ae=k("Funding programme: "),ie=k(Oe),Le=O(),ge&&ge.c(),t.a=o,C.a=D,I.a=A,ye(e,"max-width","30vw")},m(se,he){$(se,e,he),w(e,n),t.m(r,n),w(n,o),w(n,u),w(n,i),w(e,a),ue&&ue.m(e,null),w(e,f),_e&&_e.m(e,null),w(e,c),w(e,g),w(e,d),w(e,y),w(y,L),C.m(P,y),w(y,D),I.m(N,y),w(y,A),w(e,M),w(e,E),w(E,S),w(E,q),w(e,R),w(e,j),w(j,B),w(j,re),w(e,le),w(e,ce),w(ce,Ae),w(ce,ie),w(e,Le),ge&&ge.m(e,null)},p(se,[he]){var In,Pn,Mn,Nn;he&5&&r!==(r=st(se[0].name,se[2])+"")&&t.p(r),he&1&&s!==(s=se[0].intervention_type+"")&&H(u,s),se[0].length_meters?ue?ue.p(se,he):(ue=Zr(se),ue.c(),ue.m(e,f)):ue&&(ue.d(1),ue=null),se[0].description?_e?_e.p(se,he):(_e=xr(se),_e.c(),_e.m(e,c)):_e&&(_e.d(1),_e=null),he&10&&P!==(P=st(se[1].scheme_name??"",se[3])+"")&&C.p(P),he&9&&N!==(N=st(se[0].scheme_reference,se[3])+"")&&I.p(N),he&2&&F!==(F=((In=se[1].browse)==null?void 0:In.authority_or_region)+"")&&H(q,F),he&2&&X!==(X=((Pn=se[1].browse)==null?void 0:Pn.capital_scheme_id)+"")&&H(re,X),he&2&&Oe!==(Oe=((Mn=se[1].browse)==null?void 0:Mn.funding_programme)+"")&&H(ie,Oe),(Nn=se[1].browse)!=null&&Nn.current_milestone?ge?ge.p(se,he):(ge=el(se),ge.c(),ge.m(e,null)):ge&&(ge.d(1),ge=null)},i:x,o:x,d(se){se&&p(e),ue&&ue.d(),_e&&_e.d(),ge&&ge.d()}}}function st(l,e){return e?l.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):l}function pm(l,e,n){let t,r,o,s;we(l,rn,i=>n(4,r=i)),we(l,Dt,i=>n(2,o=i)),we(l,jt,i=>n(3,s=i));let{props:u}=e;return l.$$set=i=>{"props"in i&&n(0,u=i.props)},l.$$.update=()=>{l.$$.dirty&17&&n(1,t=r.get(u.scheme_reference))},[u,t,o,s,r]}class An extends J{constructor(e){super(),K(this,e,pm,$m,Y,{props:0})}}function mm(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&H(t,n)},d(r){r&&p(e)}}}function _m(l){let e,n;return e=new An({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gm(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[mm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[_m,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function dm(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&H(t,n)},d(r){r&&p(e)}}}function hm(l){let e,n;return e=new An({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bm(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[dm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[hm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function vm(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&H(t,n)},d(r){r&&p(e)}}}function wm(l){let e,n;return e=new An({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function km(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[vm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[wm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function ym(l){let e,n,t,r,o,s,u,i,a,f;const c=[z("interventions-points"),{filter:["all",jn,l[3],l[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":l[2],"circle-radius":tn,"circle-opacity":ee(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let g={$$slots:{default:[gm]},$$scope:{ctx:l}};for(let A=0;A<c.length;A+=1)g=te(g,c[A]);e=new Ke({props:g});const d=[z("interventions-lines"),{filter:["all",Rn,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[2],"line-width":Et,"line-opacity":ee(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[bm]},$$scope:{ctx:l}};for(let A=0;A<d.length;A+=1)y=te(y,d[A]);t=new Se({props:y});const L=[z("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Et,"circle-opacity":0,"circle-stroke-color":nt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:l[0]?"visible":"none"}}];let C={};for(let A=0;A<L.length;A+=1)C=te(C,L[A]);o=new Ke({props:C});const P=[z("interventions-polygons"),{filter:["all",Zt,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":l[2],"fill-opacity":ee(.2,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let D={$$slots:{default:[km]},$$scope:{ctx:l}};for(let A=0;A<P.length;A+=1)D=te(D,P[A]);u=new qe({props:D});const I=[z("interventions-polygons-outlines"),{filter:["all",Zt,l[3]]},{paint:{"line-color":l[2],"line-opacity":.5,"line-width":.7*Et}},{layout:{visibility:l[0]?"visible":"none"}}];let N={};for(let A=0;A<I.length;A+=1)N=te(N,I[A]);return a=new Se({props:N}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment),s=O(),h(u.$$.fragment),i=O(),h(a.$$.fragment)},m(A,M){b(e,A,M),$(A,n,M),b(t,A,M),$(A,r,M),b(o,A,M),$(A,s,M),b(u,A,M),$(A,i,M),b(a,A,M),f=!0},p(A,M){const E=M&29?ne(c,[c[0],M&24&&{filter:["all",jn,A[3],A[4]]},c[2],c[3],M&4&&{paint:{"circle-color":A[2],"circle-radius":tn,"circle-opacity":ee(1,.5)}},M&1&&{layout:{visibility:A[0]?"visible":"none"}},c[6]]):{};M&128&&(E.$$scope={dirty:M,ctx:A}),e.$set(E);const S=M&13?ne(d,[d[0],M&8&&{filter:["all",Rn,A[3]]},d[2],d[3],M&4&&{paint:{"line-color":A[2],"line-width":Et,"line-opacity":ee(1,.5)}},M&1&&{layout:{visibility:A[0]?"visible":"none"}},d[6]]):{};M&128&&(S.$$scope={dirty:M,ctx:A}),t.$set(S);const F=M&1?ne(L,[L[0],L[1],L[2],{layout:{visibility:A[0]?"visible":"none"}}]):{};o.$set(F);const q=M&13?ne(P,[P[0],M&8&&{filter:["all",Zt,A[3]]},P[2],P[3],M&4&&{paint:{"fill-color":A[2],"fill-opacity":ee(.2,.5)}},M&1&&{layout:{visibility:A[0]?"visible":"none"}},P[6]]):{};M&128&&(q.$$scope={dirty:M,ctx:A}),u.$set(q);const R=M&13?ne(I,[I[0],M&8&&{filter:["all",Zt,A[3]]},M&4&&{paint:{"line-color":A[2],"line-opacity":.5,"line-width":.7*Et}},M&1&&{layout:{visibility:A[0]?"visible":"none"}}]):{};a.$set(R)},i(A){f||(m(e.$$.fragment,A),m(t.$$.fragment,A),m(o.$$.fragment,A),m(u.$$.fragment,A),m(a.$$.fragment,A),f=!0)},o(A){_(e.$$.fragment,A),_(t.$$.fragment,A),_(o.$$.fragment,A),_(u.$$.fragment,A),_(a.$$.fragment,A),f=!1},d(A){A&&(p(n),p(r),p(s),p(i)),v(e,A),v(t,A),v(o,A),v(u,A),v(a,A)}}}function Sm(l){let e,n;return e=new Ft({props:{data:l[1],$$slots:{default:[ym]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&2&&(o.data=t[1]),r&129&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Cm(l,e,n){let t,r;we(l,Mt,a=>n(5,r=a));let{showSchemes:o}=e,[s]=yn();const u=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return l.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},l.$$.update=()=>{l.$$.dirty&32&&n(1,t=zl(r))},[o,t,s,u,i,r]}class Tm extends J{constructor(e){super(),K(this,e,Cm,Sm,Y,{showSchemes:0})}}function tl(l,e,n){const t=l.slice();return t[13]=e[n],t}function nl(l,e,n){const t=l.slice();return t[16]=e[n],t}function Om(l){let e,n;return e=new lm({props:{loadFile:l[7]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:x,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function rl(l){let e,n,t,r,o;e=new Pt({props:{$$slots:{default:[Lm]},$$scope:{ctx:l}}}),e.$on("click",l[8]);function s(i){l[9](i)}let u={title:"About this scheme data",$$slots:{default:[Am]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.open=l[3]),t=new al({props:u}),U.push(()=>W(t,"open",s)),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),o=!0},p(i,a){const f={};a&524288&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&524304&&(c.$$scope={dirty:a,ctx:i}),!r&&a&8&&(r=!0,c.open=i[3],V(()=>r=!1)),t.$set(c)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),o=!1},d(i){i&&p(n),v(e,i),v(t,i)}}}function Lm(l){let e;return{c(){e=k("About the scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ll(l){let e,n,t=l[16]+"",r;return{c(){e=T("li"),n=T("p"),r=k(t)},m(o,s){$(o,e,s),w(e,n),w(n,r)},p(o,s){s&16&&t!==(t=o[16]+"")&&H(r,t)},d(o){o&&p(e)}}}function Am(l){let e,n,t,r,o=De(l[4].notes),s=[];for(let u=0;u<o.length;u+=1)s[u]=ll(nl(l,o,u));return{c(){e=T("div"),n=T("p"),n.textContent="Please note there are data quality caveats for all scheme data:",t=O(),r=T("ul");for(let u=0;u<s.length;u+=1)s[u].c();G(e,"class","govuk-prose")},m(u,i){$(u,e,i),w(e,n),w(e,t),w(e,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(r,null)},p(u,i){if(i&16){o=De(u[4].notes);let a;for(a=0;a<o.length;a+=1){const f=nl(u,o,a);s[a]?s[a].p(f,i):(s[a]=ll(f),s[a].c(),s[a].m(r,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(u){u&&p(e),It(s,u)}}}function ol(l){let e,n,t,r;function o(i){l[10](i)}function s(i){l[11](i)}let u={};return l[1]!==void 0&&(u.schemesToBeShown=l[1]),l[2]!==void 0&&(u.show=l[2]),e=new Ri({props:u}),U.push(()=>W(e,"schemesToBeShown",o)),U.push(()=>W(e,"show",s)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),r=!0},p(i,a){const f={};!n&&a&2&&(n=!0,f.schemesToBeShown=i[1],V(()=>n=!1)),!t&&a&4&&(t=!0,f.show=i[2],V(()=>t=!1)),e.$set(f)},i(i){r||(m(e.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),r=!1},d(i){v(e,i)}}}function sl(l){let e,n;return e=new cm({props:{scheme:l[13]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function il(l){let e=l[1].has(l[13].scheme_reference),n,t,r=e&&sl(l);return{c(){r&&r.c(),n=Me()},m(o,s){r&&r.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?r?(r.p(o,s),s&66&&m(r,1)):(r=sl(o),r.c(),m(r,1),r.m(n.parentNode,n)):r&&($e(),_(r,1,1,()=>{r=null}),pe())},i(o){t||(m(r),t=!0)},o(o){_(r),t=!1},d(o){o&&p(n),r&&r.d(o)}}}function Im(l){let e,n,t,r,o,s,u,i,a,f,c=_n()=="Private (development)",g,d,y,L,C,P,D,I,N;o=new Kl({props:{boundaryGeojson:l[4]}}),a=new ql({});let A=c&&Om(l),M=l[4].notes&&rl(l);y=new Ql({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:l[7]}}),C=new gl({props:{errorMessage:l[0]}});let E=l[6].size>0&&ol(l),S=De(l[6].values()),F=[];for(let R=0;R<S.length;R+=1)F[R]=il(tl(l,S,R));const q=R=>_(F[R],1,1,()=>{F[R]=null});return{c(){e=T("div"),n=T("div"),t=T("h1"),t.textContent="Browse schemes",r=O(),h(o.$$.fragment),s=O(),u=T("p"),u.textContent=`App version: ${_n()}`,i=O(),h(a.$$.fragment),f=O(),A&&A.c(),g=O(),M&&M.c(),d=O(),h(y.$$.fragment),L=O(),h(C.$$.fragment),P=O(),E&&E.c(),D=O(),I=T("ul");for(let R=0;R<F.length;R+=1)F[R].c();ye(n,"display","flex"),ye(n,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(R,j){$(R,e,j),w(e,n),w(n,t),w(n,r),b(o,n,null),w(e,s),w(e,u),w(e,i),b(a,e,null),w(e,f),A&&A.m(e,null),w(e,g),M&&M.m(e,null),w(e,d),b(y,e,null),w(e,L),b(C,e,null),w(e,P),E&&E.m(e,null),w(e,D),w(e,I);for(let B=0;B<F.length;B+=1)F[B]&&F[B].m(I,null);N=!0},p(R,j){const B={};j&16&&(B.boundaryGeojson=R[4]),o.$set(B),c&&A.p(R,j),R[4].notes?M?(M.p(R,j),j&16&&m(M,1)):(M=rl(R),M.c(),m(M,1),M.m(e,d)):M&&($e(),_(M,1,1,()=>{M=null}),pe());const X={};if(j&1&&(X.errorMessage=R[0]),C.$set(X),R[6].size>0?E?(E.p(R,j),j&64&&m(E,1)):(E=ol(R),E.c(),m(E,1),E.m(e,D)):E&&($e(),_(E,1,1,()=>{E=null}),pe()),j&66){S=De(R[6].values());let re;for(re=0;re<S.length;re+=1){const le=tl(R,S,re);F[re]?(F[re].p(le,j),m(F[re],1)):(F[re]=il(le),F[re].c(),m(F[re],1),F[re].m(I,null))}for($e(),re=S.length;re<F.length;re+=1)q(re);pe()}},i(R){if(!N){m(o.$$.fragment,R),m(a.$$.fragment,R),m(A),m(M),m(y.$$.fragment,R),m(C.$$.fragment,R),m(E);for(let j=0;j<S.length;j+=1)m(F[j]);N=!0}},o(R){_(o.$$.fragment,R),_(a.$$.fragment,R),_(A),_(M),_(y.$$.fragment,R),_(C.$$.fragment,R),_(E),F=F.filter(Boolean);for(let j=0;j<F.length;j+=1)_(F[j]);N=!1},d(R){R&&p(e),v(o),v(a),A&&A.d(),M&&M.d(),v(y),v(C),E&&E.d(),It(F,R)}}}function Pm(l){let e,n,t,r,o,s,u;return e=new Yl({}),t=new Tm({props:{showSchemes:l[2]}}),s=new tm({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),o=T("div"),h(s.$$.fragment),G(o,"class","top-right svelte-u44ed2")},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),$(i,r,a),$(i,o,a),b(s,o,null),u=!0},p(i,a){const f={};a&4&&(f.showSchemes=i[2]),t.$set(f)},i(i){u||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(n),p(r),p(o)),v(e,i),v(t,i),v(s)}}}function Mm(l){let e,n,t;return n=new Gl({props:{style:l[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Pm]},$$scope:{ctx:l}}}),{c(){e=T("div"),h(n.$$.fragment),G(e,"slot","main")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.style=r[5]),o&524292&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Nm(l){let e,n;return e=new xl({props:{$$slots:{main:[Mm],sidebar:[Im]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&524415&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Fm(l,e,n){let t,r,o;we(l,Mt,C=>n(4,t=C)),we(l,Bn,C=>n(5,r=C)),we(l,rn,C=>n(6,o=C)),Tn(()=>{Ul()});const s=new URLSearchParams(window.location.search);Bn.set(s.get("style")||"dataviz");let u="",i=new Set,a=!0,f=!1;function c(C){try{Mt.set(JSON.parse(C)),rn.set(hi(t)),n(0,u="")}catch(P){n(0,u=`The file you loaded is broken: ${P}`)}}const g=()=>n(3,f=!0);function d(C){f=C,n(3,f)}function y(C){i=C,n(1,i)}function L(C){a=C,n(2,a)}return[u,i,a,f,t,r,o,c,g,d,y,L]}class Em extends J{constructor(e){super(),K(this,e,Fm,Nm,Y,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new Em({target:document.getElementById("app")});
