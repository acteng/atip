import{S as H,i as Q,s as V,G as xe,e as J,d as T,f as $,H as et,I as tt,J as nt,t as d,h as b,j as v,c as q,m as N,k as F,a as P,a2 as K,a3 as ne,l as D,g as W,z as oe,a4 as it,a5 as rt,P as Fe,al as Me,Q as pt,am as Ie,r as L,u as B,D as ie,w as E,x as ge,aa as Oe,A as ee,v as te,q as _e,Y as he,y as st,B as le,E as _t,an as ue,aj as mt}from"./stores-8873f58f.js";import{o as ce,D as se,E as be,S as me,R as fe,e as $e,M as dt}from"./files-d44ce58d.js";import{S as we,p as pe,a as ae,C as gt,g as ht,b as bt,t as $t,r as Ue}from"./colors-21655638.js";function vt(t){let e,i;const n=t[1].default,s=xe(n,t,t[0],null);return{c(){e=J("div"),s&&s.c(),T(e,"class","govuk-button-group")},m(u,r){$(u,e,r),s&&s.m(e,null),i=!0},p(u,[r]){s&&s.p&&(!i||r&1)&&et(s,n,u,u[0],i?nt(n,u[0],r,null):tt(u[0]),null)},i(u){i||(d(s,u),i=!0)},o(u){b(s,u),i=!1},d(u){u&&v(e),s&&s.d(u)}}}function kt(t,e,i){let{$$slots:n={},$$scope:s}=e;return t.$$set=u=>{"$$scope"in u&&i(0,s=u.$$scope)},[s,n]}class wt extends H{constructor(e){super(),Q(this,e,kt,vt,V,{})}}function Te(t){let e,i,n=ve(t[0])+"",s;return{c(){e=J("div"),i=D("Â£"),s=D(n),T(e,"class","govuk-hint")},m(u,r){$(u,e,r),W(e,i),W(e,s)},p(u,r){r&1&&n!==(n=ve(u[0])+"")&&oe(s,n)},d(u){u&&v(e)}}}function yt(t){let e;return{c(){e=D("multiply by 1 million")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function St(t){let e,i,n,s,u,r,o,l,f;e=new be({props:{errorMessage:Ae(t[2])}});let a=t[0]!=null&&Te(t);return r=new me({props:{disabled:t[0]==null||t[0]>1e3,$$slots:{default:[yt]},$$scope:{ctx:t}}}),r.$on("click",t[4]),{c(){q(e.$$.fragment),i=P(),a&&a.c(),n=P(),s=J("input"),u=P(),q(r.$$.fragment),T(s,"type","text"),T(s,"inputmode","numeric"),T(s,"class","govuk-input govuk-input--width-10"),T(s,"id",t[3])},m(p,c){N(e,p,c),$(p,i,c),a&&a.m(p,c),$(p,n,c),$(p,s,c),K(s,t[2]),$(p,u,c),N(r,p,c),o=!0,l||(f=ne(s,"input",t[5]),l=!0)},p(p,c){const k={};c&4&&(k.errorMessage=Ae(p[2])),e.$set(k),p[0]!=null?a?a.p(p,c):(a=Te(p),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c&4&&s.value!==p[2]&&K(s,p[2]);const O={};c&1&&(O.disabled=p[0]==null||p[0]>1e3),c&128&&(O.$$scope={dirty:c,ctx:p}),r.$set(O)},i(p){o||(d(e.$$.fragment,p),d(r.$$.fragment,p),o=!0)},o(p){b(e.$$.fragment,p),b(r.$$.fragment,p),o=!1},d(p){p&&(v(i),v(n),v(s),v(u)),F(e,p),a&&a.d(p),F(r,p),l=!1,f()}}}function jt(t){let e,i;return e=new ce({props:{label:t[1],id:t[3],$$slots:{default:[St]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(n,s){N(e,n,s),i=!0},p(n,[s]){const u={};s&2&&(u.label=n[1]),s&133&&(u.$$scope={dirty:s,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){b(e.$$.fragment,n),i=!1},d(n){F(e,n)}}}function lt(t){if(t!="")return parseFloat(t.replaceAll(",",""))}function Ae(t){let e=lt(t);return e==null?"":isNaN(e)?"Please enter a valid number":e<0?"Please enter a positive number":""}function ve(t){return t.toLocaleString()}function qt(t,e,i){let{label:n}=e,{value:s}=e,u=se(),r=s==null?"":ve(s);function o(a){i(0,s=lt(a))}function l(){i(2,r=ve(s*1e6))}function f(){r=this.value,i(2,r)}return t.$$set=a=>{"label"in a&&i(1,n=a.label),"value"in a&&i(0,s=a.value)},t.$$.update=()=>{t.$$.dirty&4&&o(r)},[s,n,r,u,l,f]}class Nt extends H{constructor(e){super(),Q(this,e,qt,jt,V,{label:1,value:0})}}function Ft(t){let e,i,n,s,u,r,o;return e=new be({props:{errorMessage:t[5](t[2])}}),{c(){q(e.$$.fragment),i=P(),n=J("input"),T(n,"type","text"),T(n,"inputmode","numeric"),T(n,"class",s=`govuk-input govuk-input--width-${t[1]}`),T(n,"id",t[3])},m(l,f){N(e,l,f),$(l,i,f),$(l,n,f),K(n,t[2]),u=!0,r||(o=[ne(n,"input",t[9]),ne(n,"change",t[4])],r=!0)},p(l,f){const a={};f&4&&(a.errorMessage=l[5](l[2])),e.$set(a),(!u||f&2&&s!==(s=`govuk-input govuk-input--width-${l[1]}`))&&T(n,"class",s),f&4&&n.value!==l[2]&&K(n,l[2])},i(l){u||(d(e.$$.fragment,l),u=!0)},o(l){b(e.$$.fragment,l),u=!1},d(l){l&&(v(i),v(n)),F(e,l),r=!1,it(o)}}}function Ot(t){let e,i;return e=new ce({props:{label:t[0],id:t[3],$$slots:{default:[Ft]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(n,s){N(e,n,s),i=!0},p(n,[s]){const u={};s&1&&(u.label=n[0]),s&1030&&(u.$$scope={dirty:s,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){b(e.$$.fragment,n),i=!1},d(n){F(e,n)}}}function Pt(t,e,i){let{label:n}=e,{value:s}=e,{width:u}=e,{min:r=void 0}=e,{max:o=void 0}=e,l=s==null?void 0:s.toString(),f=se();function a(){i(6,s=l==null?void 0:parseInt(l,10))}function p(k){if(k==""||k==null)return"";if(k.includes("."))return"Please enter a number without decimals";let O=Number(k);return isNaN(O)?"Please enter a valid number":r!=null&&O<r?`Please enter a number that's at least ${r};`:o!=null&&O>o?`Please enter a number that's at most ${o};`:""}function c(){l=this.value,i(2,l)}return t.$$set=k=>{"label"in k&&i(0,n=k.label),"value"in k&&i(6,s=k.value),"width"in k&&i(1,u=k.width),"min"in k&&i(7,r=k.min),"max"in k&&i(8,o=k.max)},[n,u,l,f,a,p,s,r,o,c]}class Ne extends H{constructor(e){super(),Q(this,e,Pt,Ot,V,{label:0,value:6,width:1,min:7,max:8})}}function Le(t){let e,i;return{c(){e=J("div"),i=D(t[2]),T(e,"class","govuk-hint")},m(n,s){$(n,e,s),W(e,i)},p(n,s){s&4&&oe(i,n[2])},d(n){n&&v(e)}}}function Ct(t){let e,i,n,s,u,r,o;e=new be({props:{errorMessage:t[4]}});let l=t[2]&&Le(t);return{c(){q(e.$$.fragment),i=P(),l&&l.c(),n=P(),s=J("textarea"),T(s,"class","govuk-textarea"),T(s,"id",t[5]),T(s,"rows",t[3])},m(f,a){N(e,f,a),$(f,i,a),l&&l.m(f,a),$(f,n,a),$(f,s,a),K(s,t[0]),u=!0,r||(o=ne(s,"input",t[6]),r=!0)},p(f,a){const p={};a&16&&(p.errorMessage=f[4]),e.$set(p),f[2]?l?l.p(f,a):(l=Le(f),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null),(!u||a&8)&&T(s,"rows",f[3]),a&1&&K(s,f[0])},i(f){u||(d(e.$$.fragment,f),u=!0)},o(f){b(e.$$.fragment,f),u=!1},d(f){f&&(v(i),v(n),v(s)),F(e,f),l&&l.d(f),r=!1,o()}}}function Mt(t){let e,i;return e=new ce({props:{label:t[1],id:t[5],$$slots:{default:[Ct]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(n,s){N(e,n,s),i=!0},p(n,[s]){const u={};s&2&&(u.label=n[1]),s&157&&(u.$$scope={dirty:s,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){b(e.$$.fragment,n),i=!1},d(n){F(e,n)}}}function It(t,e,i){let{label:n}=e,{hint:s=""}=e,{value:u}=e,{rows:r=5}=e,{errorMessage:o=""}=e,l=se();function f(){u=this.value,i(0,u)}return t.$$set=a=>{"label"in a&&i(1,n=a.label),"hint"in a&&i(2,s=a.hint),"value"in a&&i(0,u=a.value),"rows"in a&&i(3,r=a.rows),"errorMessage"in a&&i(4,o=a.errorMessage)},[u,n,s,r,o,l,f]}class ye extends H{constructor(e){super(),Q(this,e,It,Mt,V,{label:1,hint:2,value:0,rows:3,errorMessage:4})}}function Ut(t){let e,i,n,s,u,r;return e=new be({props:{errorMessage:t[2]}}),{c(){q(e.$$.fragment),i=P(),n=J("input"),T(n,"type","text"),T(n,"class","govuk-input"),T(n,"id",t[3])},m(o,l){N(e,o,l),$(o,i,l),$(o,n,l),K(n,t[0]),s=!0,u||(r=[ne(n,"input",t[6]),ne(n,"change",t[5])],u=!0)},p(o,l){const f={};l&4&&(f.errorMessage=o[2]),e.$set(f),l&1&&n.value!==o[0]&&K(n,o[0])},i(o){s||(d(e.$$.fragment,o),s=!0)},o(o){b(e.$$.fragment,o),s=!1},d(o){o&&(v(i),v(n)),F(e,o),u=!1,it(r)}}}function Tt(t){let e,i;return e=new ce({props:{label:t[1],id:t[3],$$slots:{default:[Ut]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(n,s){N(e,n,s),i=!0},p(n,[s]){const u={};s&2&&(u.label=n[1]),s&133&&(u.$$scope={dirty:s,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){b(e.$$.fragment,n),i=!1},d(n){F(e,n)}}}function At(t,e,i){let n,{label:s}=e,{value:u}=e,{required:r=!1}=e,o=se();function l(a){rt.call(this,t,a)}function f(){u=this.value,i(0,u)}return t.$$set=a=>{"label"in a&&i(1,s=a.label),"value"in a&&i(0,u=a.value),"required"in a&&i(4,r=a.required)},t.$$.update=()=>{t.$$.dirty&17&&i(2,n=r&&(u==null||u=="")?"Required":"")},[u,s,n,o,r,l,f]}class Pe extends H{constructor(e){super(),Q(this,e,At,Tt,V,{label:1,value:0,required:4})}}function Lt(t){let e,i,n,s;const u=t[2].default,r=xe(u,t,t[1],null);let o=[{type:"button"},{class:"govuk-button govuk-button--warning"},{"data-module":"govuk-button"},t[0]],l={};for(let f=0;f<o.length;f+=1)l=Fe(l,o[f]);return{c(){e=J("button"),r&&r.c(),Me(e,l)},m(f,a){$(f,e,a),r&&r.m(e,null),e.autofocus&&e.focus(),i=!0,n||(s=ne(e,"click",t[3]),n=!0)},p(f,[a]){r&&r.p&&(!i||a&2)&&et(r,u,f,f[1],i?nt(u,f[1],a,null):tt(f[1]),null),Me(e,l=pt(o,[{type:"button"},{class:"govuk-button govuk-button--warning"},{"data-module":"govuk-button"},a&1&&f[0]]))},i(f){i||(d(r,f),i=!0)},o(f){b(r,f),i=!1},d(f){f&&v(e),r&&r.d(f),n=!1,s()}}}function Bt(t,e,i){let{$$slots:n={},$$scope:s}=e;function u(r){rt.call(this,t,r)}return t.$$set=r=>{i(0,e=Fe(Fe({},e),Ie(r))),"$$scope"in r&&i(1,s=r.$$scope)},e=Ie(e),[e,s,n,u]}class Et extends H{constructor(e){super(),Q(this,e,Bt,Lt,V,{})}}function Be(t){let e,i;return e=new me({props:{disabled:!t[2],$$slots:{default:[Wt]},$$scope:{ctx:t}}}),e.$on("click",t[7]),{c(){q(e.$$.fragment)},m(n,s){N(e,n,s),i=!0},p(n,s){const u={};s&4&&(u.disabled=!n[2]),s&4096&&(u.$$scope={dirty:s,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){b(e.$$.fragment,n),i=!1},d(n){F(e,n)}}}function Wt(t){let e;return{c(){e=D("Auto-fill")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function Rt(t){let e,i,n,s,u,r,o=t[0].length_meters&&Be(t);return{c(){e=J("input"),i=P(),o&&o.c(),n=ie(),T(e,"type","text"),T(e,"class","govuk-input"),T(e,"id",t[5])},m(l,f){$(l,e,f),K(e,t[0].name),$(l,i,f),o&&o.m(l,f),$(l,n,f),s=!0,u||(r=ne(e,"input",t[6]),u=!0)},p(l,f){f&1&&e.value!==l[0].name&&K(e,l[0].name),l[0].length_meters?o?(o.p(l,f),f&1&&d(o,1)):(o=Be(l),o.c(),d(o,1),o.m(n.parentNode,n)):o&&(ee(),b(o,1,1,()=>{o=null}),te())},i(l){s||(d(o),s=!0)},o(l){b(o),s=!1},d(l){l&&(v(e),v(i),v(n)),o&&o.d(l),u=!1,r()}}}function Ee(t){let e,i,n=pe(t[0].length_meters)+"",s;return{c(){e=J("p"),i=D("Length: "),s=D(n)},m(u,r){$(u,e,r),W(e,i),W(e,s)},p(u,r){r&1&&n!==(n=pe(u[0].length_meters)+"")&&oe(s,n)},d(u){u&&v(e)}}}function Jt(t){let e,i,n,s,u,r,o,l,f,a,p,c,k;e=new ce({props:{label:"Name",id:t[5],$$slots:{default:[Rt]},$$scope:{ctx:t}}});function O(m){t[9](m)}let M={label:"Scheme",choices:Object.values(t[3].schemes).map(t[8])};t[0].scheme_reference!==void 0&&(M.value=t[0].scheme_reference),n=new we({props:M}),L.push(()=>B(n,"value",O));function C(m){t[10](m)}let h={label:"Type",choices:[["area","Area"],["route","Route"],["crossing","Crossing"],["other","Other"]],inlineSmall:!0,required:!0};t[0].intervention_type!==void 0&&(h.value=t[0].intervention_type),r=new fe({props:h}),L.push(()=>B(r,"value",C));function _(m){t[11](m)}let j={label:"Description"};t[0].description!==void 0&&(j.value=t[0].description),f=new ye({props:j}),L.push(()=>B(f,"value",_));let U=t[0].length_meters&&Ee(t);return{c(){q(e.$$.fragment),i=P(),q(n.$$.fragment),u=P(),q(r.$$.fragment),l=P(),q(f.$$.fragment),p=P(),U&&U.c(),c=ie()},m(m,A){N(e,m,A),$(m,i,A),N(n,m,A),$(m,u,A),N(r,m,A),$(m,l,A),N(f,m,A),$(m,p,A),U&&U.m(m,A),$(m,c,A),k=!0},p(m,[A]){const y={};A&4101&&(y.$$scope={dirty:A,ctx:m}),e.$set(y);const Y={};A&8&&(Y.choices=Object.values(m[3].schemes).map(m[8])),!s&&A&1&&(s=!0,Y.value=m[0].scheme_reference,E(()=>s=!1)),n.$set(Y);const z={};!o&&A&1&&(o=!0,z.value=m[0].intervention_type,E(()=>o=!1)),r.$set(z);const I={};!a&&A&1&&(a=!0,I.value=m[0].description,E(()=>a=!1)),f.$set(I),m[0].length_meters?U?U.p(m,A):(U=Ee(m),U.c(),U.m(c.parentNode,c)):U&&(U.d(1),U=null)},i(m){k||(d(e.$$.fragment,m),d(n.$$.fragment,m),d(r.$$.fragment,m),d(f.$$.fragment,m),k=!0)},o(m){b(e.$$.fragment,m),b(n.$$.fragment,m),b(r.$$.fragment,m),b(f.$$.fragment,m),k=!1},d(m){m&&(v(i),v(u),v(l),v(p),v(c)),F(e,m),F(n,m),F(r,m),F(f,m),U&&U.d(m)}}}function Dt(t,e,i){let n,s,u=_e,r=()=>(u(),u=he(o,h=>i(3,s=h)),o);ge(t,Oe,h=>i(2,n=h)),t.$$.on_destroy.push(()=>u());let{gjSchemes:o}=e;r();let{props:l}=e;function f(){try{i(0,l.name=n.inner.routeNameForWaypoints(l.waypoints),l)}catch(h){window.alert(`Couldn't auto-name route: ${h}`)}}let a=se();function p(){l.name=this.value,i(0,l)}const c=()=>f(),k=h=>[h.scheme_reference,Se(h)];function O(h){t.$$.not_equal(l.scheme_reference,h)&&(l.scheme_reference=h,i(0,l))}function M(h){t.$$.not_equal(l.intervention_type,h)&&(l.intervention_type=h,i(0,l))}function C(h){t.$$.not_equal(l.description,h)&&(l.description=h,i(0,l))}return t.$$set=h=>{"gjSchemes"in h&&r(i(1,o=h.gjSchemes)),"props"in h&&i(0,l=h.props)},[l,o,n,s,f,a,p,c,k,O,M,C]}class Gt extends H{constructor(e){super(),Q(this,e,Dt,Jt,V,{gjSchemes:1,props:0})}}function We(t){let e,i;return e=new me({props:{disabled:!t[2],$$slots:{default:[Ht]},$$scope:{ctx:t}}}),e.$on("click",t[8]),{c(){q(e.$$.fragment)},m(n,s){N(e,n,s),i=!0},p(n,s){const u={};s&4&&(u.disabled=!n[2]),s&65536&&(u.$$scope={dirty:s,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){b(e.$$.fragment,n),i=!1},d(n){F(e,n)}}}function Ht(t){let e;return{c(){e=D("Auto-fill")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function Qt(t){let e,i,n,s,u,r,o=t[0].length_meters&&We(t);return{c(){e=J("input"),i=P(),o&&o.c(),n=ie(),T(e,"type","text"),T(e,"class","govuk-input"),T(e,"id",t[5])},m(l,f){$(l,e,f),K(e,t[0].name),$(l,i,f),o&&o.m(l,f),$(l,n,f),s=!0,u||(r=ne(e,"input",t[7]),u=!0)},p(l,f){f&1&&e.value!==l[0].name&&K(e,l[0].name),l[0].length_meters?o?(o.p(l,f),f&1&&d(o,1)):(o=We(l),o.c(),d(o,1),o.m(n.parentNode,n)):o&&(ee(),b(o,1,1,()=>{o=null}),te())},i(l){s||(d(o),s=!0)},o(l){b(o),s=!1},d(l){l&&(v(e),v(i),v(n)),o&&o.d(l),u=!1,r()}}}function Re(t){let e,i,n,s,u,r,o,l,f,a,p,c,k,O,M,C,h;function _(I){t[11](I)}let j={label:"Type",choices:[["area","Area"],["route","Route"],["crossing","Crossing"],["modal filter","Modal Filter"],["junction treatment","Junction Treatment"],["other","Other"]]};t[0].v2.intervention_type!==void 0&&(j.value=t[0].v2.intervention_type),e=new fe({props:j}),L.push(()=>B(e,"value",_));function U(I){t[12](I)}let m={$$slots:{default:[Vt]},$$scope:{ctx:t}};t[0].v2.for_cycling!==void 0&&(m.checked=t[0].v2.for_cycling),f=new ae({props:m}),L.push(()=>B(f,"checked",U));function A(I){t[13](I)}let y={$$slots:{default:[zt]},$$scope:{ctx:t}};t[0].v2.for_walking_wheeling!==void 0&&(y.checked=t[0].v2.for_walking_wheeling),c=new ae({props:y}),L.push(()=>B(c,"checked",A));function Y(I){t[14](I)}let z={label:"What infrastructure are you mapping?",choices:[["new","Something completely new"],["improvement","Improvements to something already existing"],["existing","Something existing with no changes planned"]],inlineSmall:!0};return t[0].v2.work_type!==void 0&&(z.value=t[0].v2.work_type),M=new fe({props:z}),L.push(()=>B(M,"value",Y)),{c(){q(e.$$.fragment),n=P(),s=J("fieldset"),u=J("div"),r=J("label"),o=D("Intended users"),l=P(),q(f.$$.fragment),p=P(),q(c.$$.fragment),O=P(),q(M.$$.fragment),T(r,"class","govuk-label govuk-label--s"),T(r,"for",t[6]),T(u,"class","govuk-checkboxes"),T(u,"data-module","govuk-checkboxes"),T(s,"class","govuk-fieldset"),T(s,"id",t[6])},m(I,G){N(e,I,G),$(I,n,G),$(I,s,G),W(s,u),W(u,r),W(r,o),W(u,l),N(f,u,null),W(u,p),N(c,u,null),$(I,O,G),N(M,I,G),h=!0},p(I,G){const g={};!i&&G&1&&(i=!0,g.value=I[0].v2.intervention_type,E(()=>i=!1)),e.$set(g);const w={};G&65536&&(w.$$scope={dirty:G,ctx:I}),!a&&G&1&&(a=!0,w.checked=I[0].v2.for_cycling,E(()=>a=!1)),f.$set(w);const S={};G&65536&&(S.$$scope={dirty:G,ctx:I}),!k&&G&1&&(k=!0,S.checked=I[0].v2.for_walking_wheeling,E(()=>k=!1)),c.$set(S);const R={};!C&&G&1&&(C=!0,R.value=I[0].v2.work_type,E(()=>C=!1)),M.$set(R)},i(I){h||(d(e.$$.fragment,I),d(f.$$.fragment,I),d(c.$$.fragment,I),d(M.$$.fragment,I),h=!0)},o(I){b(e.$$.fragment,I),b(f.$$.fragment,I),b(c.$$.fragment,I),b(M.$$.fragment,I),h=!1},d(I){I&&(v(n),v(s),v(O)),F(e,I),F(f),F(c),F(M,I)}}}function Vt(t){let e;return{c(){e=D("Is this for cyclists?")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function zt(t){let e;return{c(){e=D("Is this for walking/wheeling?")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function Je(t){let e,i,n=pe(t[0].length_meters)+"",s;return{c(){e=J("p"),i=D("Length: "),s=D(n)},m(u,r){$(u,e,r),W(e,i),W(e,s)},p(u,r){r&1&&n!==(n=pe(u[0].length_meters)+"")&&oe(s,n)},d(u){u&&v(e)}}}function Yt(t){let e,i,n,s,u,r,o,l,f,a,p;e=new ce({props:{label:"Name",id:t[5],$$slots:{default:[Qt]},$$scope:{ctx:t}}});function c(_){t[10](_)}let k={label:"Scheme",choices:Object.values(t[3].schemes).map(t[9])};t[0].scheme_reference!==void 0&&(k.value=t[0].scheme_reference),n=new we({props:k}),L.push(()=>B(n,"value",c));let O=t[0].v2&&Re(t);function M(_){t[15](_)}let C={label:"Description"};t[0].description!==void 0&&(C.value=t[0].description),o=new ye({props:C}),L.push(()=>B(o,"value",M));let h=t[0].length_meters&&Je(t);return{c(){q(e.$$.fragment),i=P(),q(n.$$.fragment),u=P(),O&&O.c(),r=P(),q(o.$$.fragment),f=P(),h&&h.c(),a=ie()},m(_,j){N(e,_,j),$(_,i,j),N(n,_,j),$(_,u,j),O&&O.m(_,j),$(_,r,j),N(o,_,j),$(_,f,j),h&&h.m(_,j),$(_,a,j),p=!0},p(_,[j]){const U={};j&65541&&(U.$$scope={dirty:j,ctx:_}),e.$set(U);const m={};j&8&&(m.choices=Object.values(_[3].schemes).map(_[9])),!s&&j&1&&(s=!0,m.value=_[0].scheme_reference,E(()=>s=!1)),n.$set(m),_[0].v2?O?(O.p(_,j),j&1&&d(O,1)):(O=Re(_),O.c(),d(O,1),O.m(r.parentNode,r)):O&&(ee(),b(O,1,1,()=>{O=null}),te());const A={};!l&&j&1&&(l=!0,A.value=_[0].description,E(()=>l=!1)),o.$set(A),_[0].length_meters?h?h.p(_,j):(h=Je(_),h.c(),h.m(a.parentNode,a)):h&&(h.d(1),h=null)},i(_){p||(d(e.$$.fragment,_),d(n.$$.fragment,_),d(O),d(o.$$.fragment,_),p=!0)},o(_){b(e.$$.fragment,_),b(n.$$.fragment,_),b(O),b(o.$$.fragment,_),p=!1},d(_){_&&(v(i),v(u),v(r),v(f),v(a)),F(e,_),F(n,_),O&&O.d(_),F(o,_),h&&h.d(_)}}}function Zt(t,e,i){let n,s,u=_e,r=()=>(u(),u=he(o,m=>i(3,s=m)),o);ge(t,Oe,m=>i(2,n=m)),t.$$.on_destroy.push(()=>u());let{gjSchemes:o}=e;r();let{props:l}=e;l.v2||(l.v2={intervention_type:"",for_cycling:!1,for_walking_wheeling:!1,work_type:""});function f(){try{i(0,l.name=n.inner.routeNameForWaypoints(l.waypoints),l)}catch(m){window.alert(`Couldn't auto-name route: ${m}`)}}let a=se(),p=se();function c(){l.name=this.value,i(0,l)}const k=()=>f(),O=m=>[m.scheme_reference,Se(m)];function M(m){t.$$.not_equal(l.scheme_reference,m)&&(l.scheme_reference=m,i(0,l))}function C(m){t.$$.not_equal(l.v2.intervention_type,m)&&(l.v2.intervention_type=m,i(0,l))}function h(m){t.$$.not_equal(l.v2.for_cycling,m)&&(l.v2.for_cycling=m,i(0,l))}function _(m){t.$$.not_equal(l.v2.for_walking_wheeling,m)&&(l.v2.for_walking_wheeling=m,i(0,l))}function j(m){t.$$.not_equal(l.v2.work_type,m)&&(l.v2.work_type=m,i(0,l))}function U(m){t.$$.not_equal(l.description,m)&&(l.description=m,i(0,l))}return t.$$set=m=>{"gjSchemes"in m&&r(i(1,o=m.gjSchemes)),"props"in m&&i(0,l=m.props)},[l,o,n,s,f,a,p,c,k,O,M,C,h,_,j,U]}class Kt extends H{constructor(e){super(),Q(this,e,Zt,Yt,V,{gjSchemes:1,props:0})}}function Xt(t){let e,i,n;function s(r){t[2](r)}let u={label:t[1],choices:[re("New segregated cycling facility"),re("New junction treatment"),re("New permanent footway"),["New shared use facilities","New shared use (walking and cycling) facilities"],["Improvements to existing route","Improvements to make an existing walking/cycle route safer"],["Area-wide traffic management","Area-wide traffic management (including by TROs - both permanent and experimental)"],["Bus priority measures","Bus priority measures that also enable active travel (for example, bus gates)"],["Secure cycle parking","Provision of secure cycle parking facilities"],re("New road crossings"),re("Restriction or reduction of car parking availability"),re("School streets"),re("Quiet mixed traffic streets"),re("Traffic free routes"),re("Not specified in LCWIP")],emptyOption:!0};return t[0]!==void 0&&(u.value=t[0]),e=new we({props:u}),L.push(()=>B(e,"value",s)),{c(){q(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p(r,[o]){const l={};o&2&&(l.label=r[1]),!i&&o&1&&(i=!0,l.value=r[0],E(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){F(e,r)}}}function re(t){return[t,t]}function xt(t,e,i){let{label:n}=e,{value:s}=e;function u(r){s=r,i(0,s)}return t.$$set=r=>{"label"in r&&i(1,n=r.label),"value"in r&&i(0,s=r.value)},[s,n,u]}class ut extends H{constructor(e){super(),Q(this,e,xt,Xt,V,{label:1,value:0})}}function en(t){let e,i,n,s,u,r,o,l,f,a,p,c,k,O,M,C,h,_;function j(w){t[3](w)}let U={label:"Status",choices:[["","Unknown"],["aspiration","Aspiration"],["planned","Planned"],["in development","In development"],["in construction","In construction"],["completed","Completed"]],inlineSmall:!0,required:t[1]};t[0].status!==void 0&&(U.value=t[0].status),s=new fe({props:U}),L.push(()=>B(s,"value",j));function m(w){t[4](w)}let A={label:"Timescale",choices:[["","Unknown"],["short","Short (1-3 years)"],["medium","Medium (3-6 years)"],["long","Long (6-10 years)"]],inlineSmall:!0,required:t[1]};t[0].timescale!==void 0&&(A.value=t[0].timescale),o=new fe({props:A}),L.push(()=>B(o,"value",m));function y(w){t[5](w)}let Y={label:"Estimated completion year (if known)",width:4,min:2010,max:2100};t[0].timescale_year!==void 0&&(Y.value=t[0].timescale_year),a=new Ne({props:Y}),L.push(()=>B(a,"value",y));function z(w){t[6](w)}let I={label:"What year was this scheme most recently published?",width:4,min:2010,max:2100};t[0].year_published!==void 0&&(I.value=t[0].year_published),k=new Ne({props:I}),L.push(()=>B(k,"value",z));function G(w){t[7](w)}let g={label:"What year was this scheme most recently consulted on?",width:4,min:2010,max:2100};return t[0].year_consulted!==void 0&&(g.value=t[0].year_consulted),C=new Ne({props:g}),L.push(()=>B(C,"value",G)),{c(){e=J("fieldset"),i=J("legend"),i.textContent="Timing and status",n=P(),q(s.$$.fragment),r=P(),q(o.$$.fragment),f=P(),q(a.$$.fragment),c=P(),q(k.$$.fragment),M=P(),q(C.$$.fragment),T(i,"class","govuk-fieldset__legend"),T(e,"class","govuk-fieldset svelte-1bxyfcq")},m(w,S){$(w,e,S),W(e,i),W(e,n),N(s,e,null),W(e,r),N(o,e,null),W(e,f),N(a,e,null),W(e,c),N(k,e,null),W(e,M),N(C,e,null),_=!0},p(w,[S]){const R={};S&2&&(R.required=w[1]),!u&&S&1&&(u=!0,R.value=w[0].status,E(()=>u=!1)),s.$set(R);const Z={};S&2&&(Z.required=w[1]),!l&&S&1&&(l=!0,Z.value=w[0].timescale,E(()=>l=!1)),o.$set(Z);const X={};!p&&S&1&&(p=!0,X.value=w[0].timescale_year,E(()=>p=!1)),a.$set(X);const x={};!O&&S&1&&(O=!0,x.value=w[0].year_published,E(()=>O=!1)),k.$set(x);const de={};!h&&S&1&&(h=!0,de.value=w[0].year_consulted,E(()=>h=!1)),C.$set(de)},i(w){_||(d(s.$$.fragment,w),d(o.$$.fragment,w),d(a.$$.fragment,w),d(k.$$.fragment,w),d(C.$$.fragment,w),_=!0)},o(w){b(s.$$.fragment,w),b(o.$$.fragment,w),b(a.$$.fragment,w),b(k.$$.fragment,w),b(C.$$.fragment,w),_=!1},d(w){w&&v(e),F(s),F(o),F(a),F(k),F(C)}}}function tn(t,e,i){let{data:n}=e,{required:s}=e,{onUpdate:u}=e;function r(c){u()}function o(c){t.$$.not_equal(n.status,c)&&(n.status=c,i(0,n))}function l(c){t.$$.not_equal(n.timescale,c)&&(n.timescale=c,i(0,n))}function f(c){t.$$.not_equal(n.timescale_year,c)&&(n.timescale_year=c,i(0,n))}function a(c){t.$$.not_equal(n.year_published,c)&&(n.year_published=c,i(0,n))}function p(c){t.$$.not_equal(n.year_consulted,c)&&(n.year_consulted=c,i(0,n))}return t.$$set=c=>{"data"in c&&i(0,n=c.data),"required"in c&&i(1,s=c.required),"onUpdate"in c&&i(2,u=c.onUpdate)},t.$$.update=()=>{t.$$.dirty&1&&r()},[n,s,u,o,l,f,a,p]}class ot extends H{constructor(e){super(),Q(this,e,tn,en,V,{data:0,required:1,onUpdate:2})}}function De(t,e,i){const n=t.slice();return n[9]=e[i],n[10]=e,n[11]=i,n}function nn(t){let e;return{c(){e=D("Is the development fully funded?")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function rn(t){let e;return{c(){e=D("Is the construction fully funded?")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function sn(t){let e,i,n;function s(r){t[6](r,t[9])}let u={$$slots:{default:[ln]},$$scope:{ctx:t}};return t[0].funding_sources[t[9]]!==void 0&&(u.checked=t[0].funding_sources[t[9]]),e=new ae({props:u}),L.push(()=>B(e,"checked",s)),{c(){q(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p(r,o){t=r;const l={};o&4096&&(l.$$scope={dirty:o,ctx:t}),!i&&o&3&&(i=!0,l.checked=t[0].funding_sources[t[9]],E(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){F(e,r)}}}function ln(t){let e=t[9].toUpperCase()+"",i,n;return{c(){i=D(e),n=P()},m(s,u){$(s,i,u),$(s,n,u)},p:_e,d(s){s&&(v(i),v(n))}}}function Ge(t){let e,i,n=t[9]!="other"&&sn(t);return{c(){n&&n.c(),e=ie()},m(s,u){n&&n.m(s,u),$(s,e,u),i=!0},p(s,u){s[9]!="other"&&n.p(s,u)},i(s){i||(d(n),i=!0)},o(s){b(n),i=!1},d(s){s&&v(e),n&&n.d(s)}}}function un(t){let e,i,n=$e(t[1]),s=[];for(let r=0;r<n.length;r+=1)s[r]=Ge(De(t,n,r));const u=r=>b(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=ie()},m(r,o){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(r,o);$(r,e,o),i=!0},p(r,o){if(o&3){n=$e(r[1]);let l;for(l=0;l<n.length;l+=1){const f=De(r,n,l);s[l]?(s[l].p(f,o),d(s[l],1)):(s[l]=Ge(f),s[l].c(),d(s[l],1),s[l].m(e.parentNode,e))}for(ee(),l=n.length;l<s.length;l+=1)u(l);te()}},i(r){if(!i){for(let o=0;o<n.length;o+=1)d(s[o]);i=!0}},o(r){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)b(s[o]);i=!1},d(r){r&&v(e),st(s,r)}}}function on(t){let e,i,n,s,u,r,o,l,f,a,p,c,k,O,M,C,h,_,j;function U(g){t[3](g)}let m={label:"Cost (GBP)"};t[0].budget!==void 0&&(m.value=t[0].budget),s=new Nt({props:m}),L.push(()=>B(s,"value",U));function A(g){t[4](g)}let y={$$slots:{default:[nn]},$$scope:{ctx:t}};t[0].development_funded!==void 0&&(y.checked=t[0].development_funded),o=new ae({props:y}),L.push(()=>B(o,"checked",A));function Y(g){t[5](g)}let z={$$slots:{default:[rn]},$$scope:{ctx:t}};t[0].construction_funded!==void 0&&(z.checked=t[0].construction_funded),a=new ae({props:z}),L.push(()=>B(a,"checked",Y)),M=new gt({props:{$$slots:{default:[un]},$$scope:{ctx:t}}});function I(g){t[7](g)}let G={label:"Other funding sources"};return t[0].funding_sources.other!==void 0&&(G.value=t[0].funding_sources.other),h=new Pe({props:G}),L.push(()=>B(h,"value",I)),{c(){e=J("fieldset"),i=J("legend"),i.textContent="Budget",n=P(),q(s.$$.fragment),r=P(),q(o.$$.fragment),f=P(),q(a.$$.fragment),c=P(),k=J("p"),k.textContent="Funding sources",O=P(),q(M.$$.fragment),C=P(),q(h.$$.fragment),T(i,"class","govuk-fieldset__legend"),T(e,"class","govuk-fieldset svelte-1bxyfcq")},m(g,w){$(g,e,w),W(e,i),W(e,n),N(s,e,null),W(e,r),N(o,e,null),W(e,f),N(a,e,null),W(e,c),W(e,k),W(e,O),N(M,e,null),W(e,C),N(h,e,null),j=!0},p(g,[w]){const S={};!u&&w&1&&(u=!0,S.value=g[0].budget,E(()=>u=!1)),s.$set(S);const R={};w&4096&&(R.$$scope={dirty:w,ctx:g}),!l&&w&1&&(l=!0,R.checked=g[0].development_funded,E(()=>l=!1)),o.$set(R);const Z={};w&4096&&(Z.$$scope={dirty:w,ctx:g}),!p&&w&1&&(p=!0,Z.checked=g[0].construction_funded,E(()=>p=!1)),a.$set(Z);const X={};w&4097&&(X.$$scope={dirty:w,ctx:g}),M.$set(X);const x={};!_&&w&1&&(_=!0,x.value=g[0].funding_sources.other,E(()=>_=!1)),h.$set(x)},i(g){j||(d(s.$$.fragment,g),d(o.$$.fragment,g),d(a.$$.fragment,g),d(M.$$.fragment,g),d(h.$$.fragment,g),j=!0)},o(g){b(s.$$.fragment,g),b(o.$$.fragment,g),b(a.$$.fragment,g),b(M.$$.fragment,g),b(h.$$.fragment,g),j=!1},d(g){g&&v(e),F(s),F(o),F(a),F(M),F(h)}}}function fn(t,e,i){let{data:n}=e,{onUpdate:s}=e;function u(c){s()}let r=["atf2","atf3","atf4","atf4e","crsts","luf"];function o(c){t.$$.not_equal(n.budget,c)&&(n.budget=c,i(0,n))}function l(c){t.$$.not_equal(n.development_funded,c)&&(n.development_funded=c,i(0,n))}function f(c){t.$$.not_equal(n.construction_funded,c)&&(n.construction_funded=c,i(0,n))}function a(c,k){t.$$.not_equal(n.funding_sources[k],c)&&(n.funding_sources[k]=c,i(0,n))}function p(c){t.$$.not_equal(n.funding_sources.other,c)&&(n.funding_sources.other=c,i(0,n))}return t.$$set=c=>{"data"in c&&i(0,n=c.data),"onUpdate"in c&&i(2,s=c.onUpdate)},t.$$.update=()=>{t.$$.dirty&1&&u()},[n,r,s,o,l,f,a,p]}class ft extends H{constructor(e){super(),Q(this,e,fn,on,V,{data:0,onUpdate:2})}}function He(t){let e,i;return e=new me({props:{disabled:!t[2],$$slots:{default:[an]},$$scope:{ctx:t}}}),e.$on("click",t[8]),{c(){q(e.$$.fragment)},m(n,s){N(e,n,s),i=!0},p(n,s){const u={};s&4&&(u.disabled=!n[2]),s&262144&&(u.$$scope={dirty:s,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){b(e.$$.fragment,n),i=!1},d(n){F(e,n)}}}function an(t){let e;return{c(){e=D("Auto-fill with street names")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function cn(t){let e,i,n,s,u,r,o,l,f=t[0].length_meters&&He(t);return{c(){e=J("div"),e.textContent="Use the name from the LCWIP if possible",i=P(),n=J("input"),s=P(),f&&f.c(),u=ie(),T(e,"class","govuk-hint"),T(n,"type","text"),T(n,"class","govuk-input"),T(n,"id",t[6])},m(a,p){$(a,e,p),$(a,i,p),$(a,n,p),K(n,t[0].name),$(a,s,p),f&&f.m(a,p),$(a,u,p),r=!0,o||(l=ne(n,"input",t[7]),o=!0)},p(a,p){p&1&&n.value!==a[0].name&&K(n,a[0].name),a[0].length_meters?f?(f.p(a,p),p&1&&d(f,1)):(f=He(a),f.c(),d(f,1),f.m(u.parentNode,u)):f&&(ee(),b(f,1,1,()=>{f=null}),te())},i(a){r||(d(f),r=!0)},o(a){b(f),r=!1},d(a){a&&(v(e),v(i),v(n),v(s),v(u)),f&&f.d(a),o=!1,l()}}}function Qe(t){let e,i,n=pe(t[0].length_meters)+"",s;return{c(){e=J("p"),i=D("Length: "),s=D(n)},m(u,r){$(u,e,r),W(e,i),W(e,s)},p(u,r){r&1&&n!==(n=pe(u[0].length_meters)+"")&&oe(s,n)},d(u){u&&v(e)}}}function Ve(t){let e,i,n,s,u,r,o,l,f,a,p,c,k,O,M,C;function h(g){t[12](g)}let _={label:"Type"};t[0].pipeline.atf4_type!==void 0&&(_.value=t[0].pipeline.atf4_type),e=new ut({props:_}),L.push(()=>B(e,"value",h));function j(g){t[13](g)}let U={label:"Accuracy of mapped data",choices:[["high","High"],["medium","Medium"],["low","Low"]],required:!0,inlineSmall:!0};t[0].pipeline.accuracy!==void 0&&(U.value=t[0].pipeline.accuracy),s=new fe({props:U}),L.push(()=>B(s,"value",j));function m(g){t[14](g)}let A={$$slots:{default:[pn]},$$scope:{ctx:t}};t[0].pipeline.is_alternative!==void 0&&(A.checked=t[0].pipeline.is_alternative),o=new ae({props:A}),L.push(()=>B(o,"checked",m));let y=t[4]&&t[0].is_coverage_polygon!==void 0&&ze(t);function Y(g){t[16](g)}let z={required:!1,onUpdate:dn};t[0].pipeline!==void 0&&(z.data=t[0].pipeline),p=new ot({props:z}),L.push(()=>B(p,"data",Y));function I(g){t[17](g)}let G={onUpdate:gn};return t[0].pipeline!==void 0&&(G.data=t[0].pipeline),O=new ft({props:G}),L.push(()=>B(O,"data",I)),{c(){q(e.$$.fragment),n=P(),q(s.$$.fragment),r=P(),q(o.$$.fragment),f=P(),y&&y.c(),a=P(),q(p.$$.fragment),k=P(),q(O.$$.fragment)},m(g,w){N(e,g,w),$(g,n,w),N(s,g,w),$(g,r,w),N(o,g,w),$(g,f,w),y&&y.m(g,w),$(g,a,w),N(p,g,w),$(g,k,w),N(O,g,w),C=!0},p(g,w){const S={};!i&&w&1&&(i=!0,S.value=g[0].pipeline.atf4_type,E(()=>i=!1)),e.$set(S);const R={};!u&&w&1&&(u=!0,R.value=g[0].pipeline.accuracy,E(()=>u=!1)),s.$set(R);const Z={};w&262144&&(Z.$$scope={dirty:w,ctx:g}),!l&&w&1&&(l=!0,Z.checked=g[0].pipeline.is_alternative,E(()=>l=!1)),o.$set(Z),g[4]&&g[0].is_coverage_polygon!==void 0?y?(y.p(g,w),w&1&&d(y,1)):(y=ze(g),y.c(),d(y,1),y.m(a.parentNode,a)):y&&(ee(),b(y,1,1,()=>{y=null}),te());const X={};!c&&w&1&&(c=!0,X.data=g[0].pipeline,E(()=>c=!1)),p.$set(X);const x={};!M&&w&1&&(M=!0,x.data=g[0].pipeline,E(()=>M=!1)),O.$set(x)},i(g){C||(d(e.$$.fragment,g),d(s.$$.fragment,g),d(o.$$.fragment,g),d(y),d(p.$$.fragment,g),d(O.$$.fragment,g),C=!0)},o(g){b(e.$$.fragment,g),b(s.$$.fragment,g),b(o.$$.fragment,g),b(y),b(p.$$.fragment,g),b(O.$$.fragment,g),C=!1},d(g){g&&(v(n),v(r),v(f),v(a),v(k)),F(e,g),F(s,g),F(o,g),y&&y.d(g),F(p,g),F(O,g)}}}function pn(t){let e;return{c(){e=D("Is this an alternative route and not the default option?")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function ze(t){let e,i,n;function s(r){t[15](r)}let u={$$slots:{default:[_n]},$$scope:{ctx:t}};return t[0].is_coverage_polygon!==void 0&&(u.checked=t[0].is_coverage_polygon),e=new ae({props:u}),L.push(()=>B(e,"checked",s)),{c(){q(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p(r,o){const l={};o&262144&&(l.$$scope={dirty:o,ctx:r}),!i&&o&1&&(i=!0,l.checked=r[0].is_coverage_polygon,E(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){F(e,r)}}}function _n(t){let e;return{c(){e=D(`Does this polygon show the coverage of the scheme? (All area considered
      while making the scheme)`)},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function mn(t){let e,i,n,s,u,r,o,l,f,a,p;e=new ce({props:{label:"Name",id:t[6],$$slots:{default:[cn]},$$scope:{ctx:t}}});function c(_){t[10](_)}let k={label:"Scheme",choices:Object.values(t[3].schemes).map(t[9])};t[0].scheme_reference!==void 0&&(k.value=t[0].scheme_reference),n=new we({props:k}),L.push(()=>B(n,"value",c));function O(_){t[11](_)}let M={label:"Description"};t[0].description!==void 0&&(M.value=t[0].description),r=new ye({props:M}),L.push(()=>B(r,"value",O));let C=t[0].length_meters&&Qe(t),h=t[0].pipeline&&Ve(t);return{c(){q(e.$$.fragment),i=P(),q(n.$$.fragment),u=P(),q(r.$$.fragment),l=P(),C&&C.c(),f=P(),h&&h.c(),a=ie()},m(_,j){N(e,_,j),$(_,i,j),N(n,_,j),$(_,u,j),N(r,_,j),$(_,l,j),C&&C.m(_,j),$(_,f,j),h&&h.m(_,j),$(_,a,j),p=!0},p(_,[j]){const U={};j&262149&&(U.$$scope={dirty:j,ctx:_}),e.$set(U);const m={};j&8&&(m.choices=Object.values(_[3].schemes).map(_[9])),!s&&j&1&&(s=!0,m.value=_[0].scheme_reference,E(()=>s=!1)),n.$set(m);const A={};!o&&j&1&&(o=!0,A.value=_[0].description,E(()=>o=!1)),r.$set(A),_[0].length_meters?C?C.p(_,j):(C=Qe(_),C.c(),C.m(f.parentNode,f)):C&&(C.d(1),C=null),_[0].pipeline?h?(h.p(_,j),j&1&&d(h,1)):(h=Ve(_),h.c(),d(h,1),h.m(a.parentNode,a)):h&&(ee(),b(h,1,1,()=>{h=null}),te())},i(_){p||(d(e.$$.fragment,_),d(n.$$.fragment,_),d(r.$$.fragment,_),d(h),p=!0)},o(_){b(e.$$.fragment,_),b(n.$$.fragment,_),b(r.$$.fragment,_),b(h),p=!1},d(_){_&&(v(i),v(u),v(l),v(f),v(a)),F(e,_),F(n,_),F(r,_),C&&C.d(_),h&&h.d(_)}}}const dn=()=>{},gn=()=>{};function hn(t,e,i){let n,s,u=_e,r=()=>(u(),u=he(o,y=>i(3,s=y)),o);ge(t,Oe,y=>i(2,n=y)),t.$$.on_destroy.push(()=>u());let{gjSchemes:o}=e;r();let{props:l}=e;l.pipeline||(l.pipeline={atf4_type:"",accuracy:"",is_alternative:!1,development_funded:!1,construction_funded:!1,funding_sources:ke(),status:"",timescale:""}),l.is_coverage_polygon||(l.is_coverage_polygon=!1);const f=(s.features.filter(y=>y.properties.is_coverage_polygon).length==0||l.is_coverage_polygon===!0)&&l.intervention_type==="area";function a(){try{i(0,l.name=n.inner.routeNameForWaypoints(l.waypoints),l)}catch(y){window.alert(`Couldn't auto-name route: ${y}`)}}let p=se();function c(){l.name=this.value,i(0,l)}const k=()=>a(),O=y=>[y.scheme_reference,Se(y)];function M(y){t.$$.not_equal(l.scheme_reference,y)&&(l.scheme_reference=y,i(0,l))}function C(y){t.$$.not_equal(l.description,y)&&(l.description=y,i(0,l))}function h(y){t.$$.not_equal(l.pipeline.atf4_type,y)&&(l.pipeline.atf4_type=y,i(0,l))}function _(y){t.$$.not_equal(l.pipeline.accuracy,y)&&(l.pipeline.accuracy=y,i(0,l))}function j(y){t.$$.not_equal(l.pipeline.is_alternative,y)&&(l.pipeline.is_alternative=y,i(0,l))}function U(y){t.$$.not_equal(l.is_coverage_polygon,y)&&(l.is_coverage_polygon=y,i(0,l))}function m(y){t.$$.not_equal(l.pipeline,y)&&(l.pipeline=y,i(0,l))}function A(y){t.$$.not_equal(l.pipeline,y)&&(l.pipeline=y,i(0,l))}return t.$$set=y=>{"gjSchemes"in y&&r(i(1,o=y.gjSchemes)),"props"in y&&i(0,l=y.props)},[l,o,n,s,f,a,p,c,k,O,M,C,h,_,j,U,m,A]}class bn extends H{constructor(e){super(),Q(this,e,hn,mn,V,{gjSchemes:1,props:0})}}function Ye(t,e,i){const n=t.slice();return n[7]=e[i][0],n[8]=e[i][1],n}function Ze(t){let e,i;return e=new me({props:{$$slots:{default:[$n]},$$scope:{ctx:t}}}),e.$on("click",t[4]),{c(){q(e.$$.fragment)},m(n,s){N(e,n,s),i=!0},p(n,s){const u={};s&2048&&(u.$$scope={dirty:s,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){b(e.$$.fragment,n),i=!1},d(n){F(e,n)}}}function $n(t){let e;return{c(){e=D("Handle extra GeoJSON properties")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function Ke(t){let e,i,n=t[7]+"",s,u,r=JSON.stringify(t[8])+"",o,l;return{c(){e=J("li"),i=J("b"),s=D(n),u=D(`
        = `),o=D(r),l=P()},m(f,a){$(f,e,a),W(e,i),W(i,s),W(e,u),W(e,o),W(e,l)},p(f,a){a&2&&n!==(n=f[7]+"")&&oe(s,n),a&2&&r!==(r=JSON.stringify(f[8])+"")&&oe(o,r)},d(f){f&&v(e)}}}function vn(t){let e;return{c(){e=D("Remove these properties")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function kn(t){let e;return{c(){e=D("Cancel")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function wn(t){let e,i,n,s;return e=new Et({props:{$$slots:{default:[vn]},$$scope:{ctx:t}}}),e.$on("click",t[2]),n=new me({props:{$$slots:{default:[kn]},$$scope:{ctx:t}}}),n.$on("click",t[5]),{c(){q(e.$$.fragment),i=P(),q(n.$$.fragment)},m(u,r){N(e,u,r),$(u,i,r),N(n,u,r),s=!0},p(u,r){const o={};r&2048&&(o.$$scope={dirty:r,ctx:u}),e.$set(o);const l={};r&2048&&(l.$$scope={dirty:r,ctx:u}),n.$set(l)},i(u){s||(d(e.$$.fragment,u),d(n.$$.fragment,u),s=!0)},o(u){b(e.$$.fragment,u),b(n.$$.fragment,u),s=!1},d(u){u&&v(i),F(e,u),F(n,u)}}}function yn(t){let e,i,n,s,u,r,o=$e(Object.entries(t[1])),l=[];for(let f=0;f<o.length;f+=1)l[f]=Ke(Ye(t,o,f));return u=new wt({props:{$$slots:{default:[wn]},$$scope:{ctx:t}}}),{c(){e=J("p"),e.textContent="The unexpected properties:",i=P(),n=J("ul");for(let f=0;f<l.length;f+=1)l[f].c();s=P(),q(u.$$.fragment)},m(f,a){$(f,e,a),$(f,i,a),$(f,n,a);for(let p=0;p<l.length;p+=1)l[p]&&l[p].m(n,null);$(f,s,a),N(u,f,a),r=!0},p(f,a){if(a&2){o=$e(Object.entries(f[1]));let c;for(c=0;c<o.length;c+=1){const k=Ye(f,o,c);l[c]?l[c].p(k,a):(l[c]=Ke(k),l[c].c(),l[c].m(n,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=o.length}const p={};a&2049&&(p.$$scope={dirty:a,ctx:f}),u.$set(p)},i(f){r||(d(u.$$.fragment,f),r=!0)},o(f){b(u.$$.fragment,f),r=!1},d(f){f&&(v(e),v(i),v(n),v(s)),st(l,f),F(u,f)}}}function Sn(t){let e=Object.entries(t[1]).length>0,i,n,s,u,r=e&&Ze(t);function o(f){t[6](f)}let l={title:"This imported GeoJSON feature has unexpected properties",$$slots:{default:[yn]},$$scope:{ctx:t}};return t[0]!==void 0&&(l.open=t[0]),n=new dt({props:l}),L.push(()=>B(n,"open",o)),{c(){r&&r.c(),i=P(),q(n.$$.fragment)},m(f,a){r&&r.m(f,a),$(f,i,a),N(n,f,a),u=!0},p(f,[a]){a&2&&(e=Object.entries(f[1]).length>0),e?r?(r.p(f,a),a&2&&d(r,1)):(r=Ze(f),r.c(),d(r,1),r.m(i.parentNode,i)):r&&(ee(),b(r,1,1,()=>{r=null}),te());const p={};a&2051&&(p.$$scope={dirty:a,ctx:f}),!s&&a&1&&(s=!0,p.open=f[0],E(()=>s=!1)),n.$set(p)},i(f){u||(d(r),d(n.$$.fragment,f),u=!0)},o(f){b(r),b(n.$$.fragment,f),u=!1},d(f){f&&v(i),r&&r.d(f),F(n,f)}}}function jn(t,e,i){let n,{props:s}=e,u=!1;function r(){i(0,u=!1);for(let a of Object.keys(n))delete s[a];i(3,s)}const o=()=>i(0,u=!0),l=()=>i(0,u=!1);function f(a){u=a,i(0,u)}return t.$$set=a=>{"props"in a&&i(3,s=a.props)},t.$$.update=()=>{t.$$.dirty&8&&i(1,n=ct(s))},[u,n,r,s,o,l,f]}class qn extends H{constructor(e){super(),Q(this,e,jn,Sn,V,{props:3})}}function Xe(t){let e,i,n;function s(r){t[5](r)}let u={};return t[0]!==void 0&&(u.props=t[0]),e=new qn({props:u}),L.push(()=>B(e,"props",s)),{c(){q(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p(r,o){const l={};!i&&o&1&&(i=!0,l.props=r[0],E(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){F(e,r)}}}function Nn(t){let e,i,n;function s(r){t[8](r)}let u={gjSchemes:t[1]};return t[0]!==void 0&&(u.props=t[0]),e=new Kt({props:u}),L.push(()=>B(e,"props",s)),{c(){q(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p(r,o){const l={};o&2&&(l.gjSchemes=r[1]),!i&&o&1&&(i=!0,l.props=r[0],E(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){F(e,r)}}}function Fn(t){let e,i,n;function s(r){t[7](r)}let u={gjSchemes:t[1]};return t[0]!==void 0&&(u.props=t[0]),e=new bn({props:u}),L.push(()=>B(e,"props",s)),{c(){q(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p(r,o){const l={};o&2&&(l.gjSchemes=r[1]),!i&&o&1&&(i=!0,l.props=r[0],E(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){F(e,r)}}}function On(t){let e,i,n;function s(r){t[6](r)}let u={gjSchemes:t[1]};return t[0]!==void 0&&(u.props=t[0]),e=new Gt({props:u}),L.push(()=>B(e,"props",s)),{c(){q(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p(r,o){const l={};o&2&&(l.gjSchemes=r[1]),!i&&o&1&&(i=!0,l.props=r[0],E(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){F(e,r)}}}function Pn(t){let e,i,n,s,u,r=t[2]!=null&&Xe(t);const o=[On,Fn,Nn],l=[];function f(a,p){return a[3]=="v1"?0:a[3]=="pipeline"?1:a[3]=="v2"?2:-1}return~(i=f(t))&&(n=l[i]=o[i](t)),{c(){r&&r.c(),e=P(),n&&n.c(),s=ie()},m(a,p){r&&r.m(a,p),$(a,e,p),~i&&l[i].m(a,p),$(a,s,p),u=!0},p(a,[p]){a[2]!=null?r?(r.p(a,p),p&4&&d(r,1)):(r=Xe(a),r.c(),d(r,1),r.m(e.parentNode,e)):r&&(ee(),b(r,1,1,()=>{r=null}),te());let c=i;i=f(a),i===c?~i&&l[i].p(a,p):(n&&(ee(),b(l[c],1,1,()=>{l[c]=null}),te()),~i?(n=l[i],n?n.p(a,p):(n=l[i]=o[i](a),n.c()),d(n,1),n.m(s.parentNode,s)):n=null)},i(a){u||(d(r),d(n),u=!0)},o(a){b(r),b(n),u=!1},d(a){a&&(v(e),v(s)),r&&r.d(a),~i&&l[i].d(a)}}}function Cn(t,e,i){let n;ge(t,le,c=>i(3,n=c));let{cfg:s}=e,{gjSchemes:u}=e,{id:r}=e,{props:o}=e;function l(c){o=c,i(0,o)}function f(c){o=c,i(0,o)}function a(c){o=c,i(0,o)}function p(c){o=c,i(0,o)}return t.$$set=c=>{"cfg"in c&&i(4,s=c.cfg),"gjSchemes"in c&&i(1,u=c.gjSchemes),"id"in c&&i(2,r=c.id),"props"in c&&i(0,o=c.props)},[o,u,r,n,s,l,f,a,p]}class Mn extends H{constructor(e){super(),Q(this,e,Cn,Pn,V,{cfg:4,gjSchemes:1,id:2,props:0})}}function In(t){let e,i,n;function s(r){t[3](r)}let u={label:"Scheme name",required:!0};return t[2].schemes[t[1]].scheme_name!==void 0&&(u.value=t[2].schemes[t[1]].scheme_name),e=new Pe({props:u}),L.push(()=>B(e,"value",s)),{c(){q(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p(r,[o]){const l={};!i&&o&6&&(i=!0,l.value=r[2].schemes[r[1]].scheme_name,E(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){F(e,r)}}}function Un(t,e,i){let n,s=_e,u=()=>(s(),s=he(r,f=>i(2,n=f)),r);t.$$.on_destroy.push(()=>s());let{gjSchemes:r}=e;u();let{scheme_reference:o}=e;function l(f){t.$$.not_equal(n.schemes[o].scheme_name,f)&&(n.schemes[o].scheme_name=f,r.set(n))}return t.$$set=f=>{"gjSchemes"in f&&u(i(0,r=f.gjSchemes)),"scheme_reference"in f&&i(1,o=f.scheme_reference)},[r,o,n,l]}class Tn extends H{constructor(e){super(),Q(this,e,Un,In,V,{gjSchemes:0,scheme_reference:1})}}function An(t){let e,i,n,s,u,r,o,l,f,a,p,c,k,O,M,C,h,_,j,U,m;e=new be({props:{errorMessage:t[4]}});function A(S){t[6](S)}let y={label:"Scheme name",required:!0};t[5].schemes[t[1]].scheme_name!==void 0&&(y.value=t[5].schemes[t[1]].scheme_name),n=new Pe({props:y}),L.push(()=>B(n,"value",A));function Y(S){t[7](S)}let z={label:"Scheme type",choices:[["cycling route","Cycling route"],["walking route","Walking route"],["shared-use route","Shared-use route"],["cycling and walking route","Cycling and walking route, not shared use"],["area-based scheme","Area-based scheme"],["intersection","Intersection/junction scheme"]],inlineSmall:!0,required:!0};t[2].scheme_type!==void 0&&(z.value=t[2].scheme_type),f=new fe({props:z}),L.push(()=>B(f,"value",Y));function I(S){t[8](S)}let G={label:"Type of the main intervention"};t[2].atf4_lead_type!==void 0&&(G.value=t[2].atf4_lead_type),c=new ut({props:G}),L.push(()=>B(c,"value",I));function g(S){t[9](S)}let w={label:"Scheme description (150 words max)"};return t[2].scheme_description!==void 0&&(w.value=t[2].scheme_description),M=new ye({props:w}),L.push(()=>B(M,"value",g)),_=new ot({props:{data:t[2],required:!0,onUpdate:t[10]}}),U=new ft({props:{data:t[2],onUpdate:t[11]}}),{c(){q(e.$$.fragment),i=P(),q(n.$$.fragment),u=P(),r=J("fieldset"),o=J("legend"),o.textContent="Basic information",l=P(),q(f.$$.fragment),p=P(),q(c.$$.fragment),O=P(),q(M.$$.fragment),h=P(),q(_.$$.fragment),j=P(),q(U.$$.fragment),T(o,"class","govuk-fieldset__legend"),T(r,"class","govuk-fieldset svelte-1bxyfcq")},m(S,R){N(e,S,R),$(S,i,R),N(n,S,R),$(S,u,R),$(S,r,R),W(r,o),W(r,l),N(f,r,null),W(r,p),N(c,r,null),W(r,O),N(M,r,null),$(S,h,R),N(_,S,R),$(S,j,R),N(U,S,R),m=!0},p(S,[R]){const Z={};R&16&&(Z.errorMessage=S[4]),e.$set(Z);const X={};!s&&R&34&&(s=!0,X.value=S[5].schemes[S[1]].scheme_name,E(()=>s=!1)),n.$set(X);const x={};!a&&R&4&&(a=!0,x.value=S[2].scheme_type,E(()=>a=!1)),f.$set(x);const de={};!k&&R&4&&(k=!0,de.value=S[2].atf4_lead_type,E(()=>k=!1)),c.$set(de);const Ce={};!C&&R&4&&(C=!0,Ce.value=S[2].scheme_description,E(()=>C=!1)),M.$set(Ce);const je={};R&4&&(je.data=S[2]),R&8&&(je.onUpdate=S[10]),_.$set(je);const qe={};R&4&&(qe.data=S[2]),R&8&&(qe.onUpdate=S[11]),U.$set(qe)},i(S){m||(d(e.$$.fragment,S),d(n.$$.fragment,S),d(f.$$.fragment,S),d(c.$$.fragment,S),d(M.$$.fragment,S),d(_.$$.fragment,S),d(U.$$.fragment,S),m=!0)},o(S){b(e.$$.fragment,S),b(n.$$.fragment,S),b(f.$$.fragment,S),b(c.$$.fragment,S),b(M.$$.fragment,S),b(_.$$.fragment,S),b(U.$$.fragment,S),m=!1},d(S){S&&(v(i),v(u),v(r),v(h),v(j)),F(e,S),F(n,S),F(f),F(c),F(M),F(_,S),F(U,S)}}}function Ln(t,e,i){let n,s,u=_e,r=()=>(u(),u=he(o,_=>i(5,s=_)),o);t.$$.on_destroy.push(()=>u());let{gjSchemes:o}=e;r();let{scheme_reference:l}=e,f=s.schemes[l].pipeline,a=0;_t(()=>{o.update(_=>(Object.hasOwn(_.schemes,l)&&(_.schemes[l].pipeline=f),_))});function p(_,j){return f.scheme_type&&f.status&&f.timescale?"":"Missing some required data"}function c(_){t.$$.not_equal(s.schemes[l].scheme_name,_)&&(s.schemes[l].scheme_name=_,o.set(s))}function k(_){t.$$.not_equal(f.scheme_type,_)&&(f.scheme_type=_,i(2,f))}function O(_){t.$$.not_equal(f.atf4_lead_type,_)&&(f.atf4_lead_type=_,i(2,f))}function M(_){t.$$.not_equal(f.scheme_description,_)&&(f.scheme_description=_,i(2,f))}const C=()=>i(3,a++,a),h=()=>i(3,a++,a);return t.$$set=_=>{"gjSchemes"in _&&r(i(0,o=_.gjSchemes)),"scheme_reference"in _&&i(1,l=_.scheme_reference)},t.$$.update=()=>{t.$$.dirty&12&&i(4,n=p())},[o,l,f,a,n,s,c,k,O,M,C,h]}class Bn extends H{constructor(e){super(),Q(this,e,Ln,An,V,{gjSchemes:0,scheme_reference:1})}}function En(t){let e,i;return e=new Tn({props:{gjSchemes:t[0],scheme_reference:t[1]}}),{c(){q(e.$$.fragment)},m(n,s){N(e,n,s),i=!0},p(n,s){const u={};s&1&&(u.gjSchemes=n[0]),s&2&&(u.scheme_reference=n[1]),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){b(e.$$.fragment,n),i=!1},d(n){F(e,n)}}}function Wn(t){let e,i;return e=new Bn({props:{gjSchemes:t[0],scheme_reference:t[1]}}),{c(){q(e.$$.fragment)},m(n,s){N(e,n,s),i=!0},p(n,s){const u={};s&1&&(u.gjSchemes=n[0]),s&2&&(u.scheme_reference=n[1]),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){b(e.$$.fragment,n),i=!1},d(n){F(e,n)}}}function Rn(t){let e,i,n,s;const u=[Wn,En],r=[];function o(l,f){return l[2]=="pipeline"?0:1}return e=o(t),i=r[e]=u[e](t),{c(){i.c(),n=ie()},m(l,f){r[e].m(l,f),$(l,n,f),s=!0},p(l,[f]){let a=e;e=o(l),e===a?r[e].p(l,f):(ee(),b(r[a],1,1,()=>{r[a]=null}),te(),i=r[e],i?i.p(l,f):(i=r[e]=u[e](l),i.c()),d(i,1),i.m(n.parentNode,n))},i(l){s||(d(i),s=!0)},o(l){b(i),s=!1},d(l){l&&v(n),r[e].d(l)}}}function Jn(t,e,i){let n;ge(t,le,r=>i(2,n=r));let{gjSchemes:s}=e,{scheme_reference:u}=e;return t.$$set=r=>{"gjSchemes"in r&&i(0,s=r.gjSchemes),"scheme_reference"in r&&i(1,u=r.scheme_reference)},[s,u,n]}class Dn extends H{constructor(e){super(),Q(this,e,Jn,Rn,V,{gjSchemes:0,scheme_reference:1})}}let Kn={interventionName:Qn,schemeName:Se,backfill:Gn,initializeEmptyScheme:Hn,interventionWarning:Vn,editFeatureForm:Mn,editSchemeForm:Dn,newPointFeature:t=>{t.properties.intervention_type="other"},newPolygonFeature:t=>{t.properties.intervention_type="area",t.properties.is_coverage_polygon=!1},newLineStringFeature:t=>{t.properties.intervention_type="route",t.properties.route_name&&!t.properties.name&&ue(le)!="pipeline"&&(t.properties.name=t.properties.route_name),delete t.properties.route_name,delete t.properties.full_path},updateFeature:(t,e)=>{e.properties.route_name&&!t.properties.name&&ue(le)!="pipeline"&&(t.properties.name=e.properties.route_name)},getStreetViewRoadLayerNames:t=>ht(t,ue(mt)),layerZorder:bt};function Gn(t){var n,s,u,r,o,l,f,a;let e=ue(le),i=1;for(let p of t.features)p.properties||(p.properties={name:"",scheme_reference:"",description:"",intervention_type:"other",is_coverage_polygon:!1}),(e=="pipeline"||e=="v2")&&!p.properties.intervention_type&&(p.properties.intervention_type=new Map([["LineString","route"],["Polygon","area"]]).get(p.geometry.type)??"other"),p.geometry.type=="LineString"&&!p.properties.length_meters&&(p.properties.length_meters=$t(p,{units:"kilometers"})*1e3),p.id=i++;if(!t.schemes){let p=se();t.schemes={},t.schemes[p]={scheme_reference:p,color:Ue()},t.scheme_name&&(t.schemes[p].scheme_name=t.scheme_name,delete t.scheme_name),t.pipeline&&(t.schemes[p].pipeline=t.pipeline,delete t.pipeline);for(let c of t.features)c.properties.scheme_reference=p}for(let p of Object.values(t.schemes)){let c=p;if(c.color??(c.color=Ue()),e=="pipeline"){c.pipeline??(c.pipeline=at()),(n=c.pipeline).development_funded??(n.development_funded=!1),(s=c.pipeline).construction_funded??(s.construction_funded=!1),(u=c.pipeline).funding_sources??(u.funding_sources=ke()),delete c.pipeline.budget_funded,delete c.pipeline.budget_unfunded,delete c.pipeline.funding_source,delete c.pipeline.funded;for(let k of t.features)k.properties.pipeline&&((r=k.properties.pipeline).development_funded??(r.development_funded=!1),(o=k.properties.pipeline).construction_funded??(o.construction_funded=!1),(l=k.properties.pipeline).funding_sources??(l.funding_sources=ke()),(f=k.properties.pipeline).status??(f.status=""),(a=k.properties.pipeline).timescale??(a.timescale=""))}else e=="v2"&&(c.v2={})}return t}function Hn(t){let e=t,i=ue(le);return i=="pipeline"?e.pipeline=at():i=="v2"&&(e.v2={}),e}function at(){return{scheme_type:"",atf4_lead_type:"",scheme_description:"",status:"",timescale:"",development_funded:!1,construction_funded:!1,funding_sources:ke()}}function ke(){return{atf2:!1,atf3:!1,atf4:!1,atf4e:!1,crsts:!1,luf:!1,other:""}}function Qn(t){if(t.properties.name)return t.properties.name;var e=t.properties.intervention_type;return e=="other"&&(t.geometry.type=="Point"?e="point":t.geometry.type=="LineString"?e="line":e="polygon"),`Untitled ${e}`}function Se(t){return t.scheme_name??"Untitled scheme"}function Vn(t){var n;let e=ue(le);if(!t.name)return"No name";if(!new Set(["route","area","crossing","other"]).has(t.intervention_type))return"No intervention type";if(e=="pipeline"&&!((n=t.pipeline)!=null&&n.accuracy))return"Accuracy not specified";let i=ct(t);return Object.entries(i).length>0?`Extra GeoJSON properties: ${Object.keys(i).join(", ")}`:null}function ct(t){let e=ue(le),i=JSON.parse(JSON.stringify(t));for(let n of["name","description","intervention_type","length_meters","waypoints","hide_while_editing","is_coverage_polygon","scheme_reference"])delete i[n];if(e=="pipeline"&&i.pipeline){for(let n of["atf4_type","accuracy","is_alternative","budget","development_funded","construction_funded","funding_sources","status","timescale","timescale_year","year_published","year_consulted"])delete i.pipeline[n];Object.entries(i.pipeline).length==0&&delete i.pipeline}if(e=="v2"&&i.v2){for(let n of["intervention_type","for_cycling","for_walking_wheeling","work_type"])delete i.v2[n];Object.entries(i.v2).length==0&&delete i.v2}return i}export{wt as B,Et as W,Gn as b,Kn as c};
