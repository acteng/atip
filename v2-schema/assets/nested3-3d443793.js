import{S as X,i as x,s as Q,e as S,d as F,b as re,f as d,q as Z,j as h,G as $t,a as L,ao as zn,g as p,a3 as mt,H as _t,I as gt,J as dt,t as m,h as _,A as be,v as we,y as He,c as w,l as T,m as v,z as A,k,D as _e,x as Y,E as yn,F as pt,r as E,u as B,w as U,a5 as Jt,ap as Hn,aq as Qr,P as te,ak as un,ag as Xt,N as Le,Q as ne,R as se,ac as xt,a2 as tt,a4 as jr,ar as Et,o as Nr,as as Zr,an as Kr,aj as dn,n as Xr}from"./stores-8873f58f.js";import{e as me,z as hn,S as Ee,G as ce,R as Sn,H as tn,I as xr,M as eo,o as bn,j as En,f as to,s as no,h as lo,J as Pr,F as ro,E as oo}from"./files-d44ce58d.js";import{c as q,d as nt,t as so,a as ze,C as Fe,e as ve,S as Bt,p as Bn,f as Un,h as Zt,g as io,m as Wn}from"./colors-21655638.js";import{e as Yn,h as ot,M as ao,b as Rr,H as fo,R as uo,f as Ke,C as Ut,d as co,c as Jn,a as Vn,i as ln,W as Tn,B as po,S as $o,G as mo}from"./WarningIcon-23f28063.js";import{g as Cn,u as Dr,r as Fr,b as Gr,c as Ar,e as _o,G as Wt,a as ge,d as go,E as le,h as ee,F as Ae,f as ho,i as bo,j as wo,A as vo,L as ko,M as yo}from"./MapLibreMap-a6b79d94.js";import{P as ie,A as qr}from"./Popup-7eba6617.js";import{D as So}from"./DefaultButton-4f28772f.js";import{H as To}from"./Header-ca486780.js";function Co(o){let e;return{c(){e=S("span"),F(e,"class","svelte-kzgqtg"),re(e,"background",o[0])},m(l,t){d(l,e,t)},p(l,[t]){t&1&&re(e,"background",l[0])},i:Z,o:Z,d(l){l&&h(e)}}}function Lo(o,e,l){let{color:t}=e;return o.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class Se extends X{constructor(e){super(),x(this,e,Lo,Co,Q,{color:0})}}const Io=o=>({}),Qn=o=>({}),Mo=o=>({}),Zn=o=>({});function Oo(o){let e,l,t,n,r,s,f,i,a,u,c;const $=o[4].sidebar,g=$t($,o,o[3],Zn),b=o[4].main,C=$t(b,o,o[3],Qn);return{c(){e=S("div"),l=S("aside"),t=S("div"),g&&g.c(),n=L(),r=S("button"),r.textContent="→",f=L(),i=S("main"),C&&C.c(),F(t,"class","sidebar-content content-container svelte-1n0etgd"),F(r,"type","button"),F(r,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),F(l,"class",s=zn(o[1]?"":"collapsed")+" svelte-1n0etgd"),re(l,"--sidebarWidth",o[0]),F(i,"class","svelte-1n0etgd"),F(e,"class","overall-layout svelte-1n0etgd")},m(y,I){d(y,e,I),p(e,l),p(l,t),g&&g.m(t,null),p(l,n),p(l,r),p(e,f),p(e,i),C&&C.m(i,null),a=!0,u||(c=mt(r,"click",o[2]),u=!0)},p(y,[I]){g&&g.p&&(!a||I&8)&&_t(g,$,y,y[3],a?dt($,y[3],I,Mo):gt(y[3]),Zn),(!a||I&2&&s!==(s=zn(y[1]?"":"collapsed")+" svelte-1n0etgd"))&&F(l,"class",s),(!a||I&1)&&re(l,"--sidebarWidth",y[0]),C&&C.p&&(!a||I&8)&&_t(C,b,y,y[3],a?dt(b,y[3],I,Io):gt(y[3]),Qn)},i(y){a||(m(g,y),m(C,y),a=!0)},o(y){_(g,y),_(C,y),a=!1},d(y){y&&h(e),g&&g.d(y),C&&C.d(y),u=!1,c()}}}function jo(o,e,l){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:r="25rem"}=e,s=!0;function f(){l(1,s=!s)}return o.$$set=i=>{"sidebarWidth"in i&&l(0,r=i.sidebarWidth),"$$scope"in i&&l(3,n=i.$$scope)},[r,s,f,n,t]}class No extends X{constructor(e){super(),x(this,e,jo,Oo,Q,{sidebarWidth:0})}}function Kn(o,e,l){const t=o.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function Xn(o){let e,l,t,n=o[1]+"",r,s,f;return l=new Se({props:{color:o[2]}}),{c(){e=S("li"),w(l.$$.fragment),t=L(),r=T(n),s=L()},m(i,a){d(i,e,a),v(l,e,null),p(e,t),p(e,r),p(e,s),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),l.$set(u),(!f||a&1)&&n!==(n=i[1]+"")&&A(r,n)},i(i){f||(m(l.$$.fragment,i),f=!0)},o(i){_(l.$$.fragment,i),f=!1},d(i){i&&h(e),k(l)}}}function Po(o){let e,l,t=me(o[0]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Xn(Kn(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){e=S("ul");for(let s=0;s<n.length;s+=1)n[s].c()},m(s,f){d(s,e,f);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);l=!0},p(s,[f]){if(f&1){t=me(s[0]);let i;for(i=0;i<t.length;i+=1){const a=Kn(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Xn(a),n[i].c(),m(n[i],1),n[i].m(e,null))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&h(e),He(n,s)}}}function Ro(o,e,l){let{rows:t}=e;return o.$$set=n=>{"rows"in n&&l(0,t=n.rows)},[t]}class Qt extends X{constructor(e){super(),x(this,e,Ro,Po,Q,{rows:0})}}function xn(o){let e=o[0],l,t,n=el(o);return{c(){n.c(),l=_e()},m(r,s){n.m(r,s),d(r,l,s),t=!0},p(r,s){s&1&&Q(e,e=r[0])?(be(),_(n,1,1,Z),we(),n=el(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&h(l),n.d(r)}}}function el(o){let e;const l=o[16].default,t=$t(l,o,o[15],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&32768)&&_t(t,l,n,n[15],e?dt(l,n[15],r,null):gt(n[15]),null)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function Do(o){let e,l,t=o[0]&&xn(o);return{c(){t&&t.c(),e=_e()},m(n,r){t&&t.m(n,r),d(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&m(t,1)):(t=xn(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(be(),_(t,1,1,()=>{t=null}),we())},i(n){l||(m(t),l=!0)},o(n){_(t),l=!1},d(n){n&&h(e),t&&t.d(n)}}}function Fo(o,e,l){let t,n,{$$slots:r={},$$scope:s}=e,{id:f=Cn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e,{bounds:u=null}=e,{scheme:c=null}=e,{attribution:$=null}=e,{minzoom:g=null}=e,{maxzoom:b=null}=e,{volatile:C=null}=e;const{map:y,self:I}=Dr();Y(o,y,N=>l(14,n=N)),Y(o,I,N=>l(0,t=N));let j,P=!0;return yn(()=>{t&&j&&n&&(Fr(y,t,j),pt(I,t=null,t),l(12,j=void 0))}),o.$$set=N=>{"id"in N&&l(3,f=N.id),"tiles"in N&&l(4,i=N.tiles),"tileSize"in N&&l(5,a=N.tileSize),"bounds"in N&&l(6,u=N.bounds),"scheme"in N&&l(7,c=N.scheme),"attribution"in N&&l(8,$=N.attribution),"minzoom"in N&&l(9,g=N.minzoom),"maxzoom"in N&&l(10,b=N.maxzoom),"volatile"in N&&l(11,C=N.volatile),"$$scope"in N&&l(15,s=N.$$scope)},o.$$.update=()=>{o.$$.dirty&24569&&n&&t!==f&&(pt(I,t=f,t),Gr(n,t,Ar({type:"raster",tiles:i,tileSize:a,bounds:u,scheme:c,attribution:$,minzoom:g,maxzoom:b,volatile:C}),N=>n&&N===t,()=>{t&&(l(12,j=n==null?void 0:n.getSource(t)),l(13,P=!0))})),o.$$.dirty&16392&&(n==null||n.on("style.load",()=>{l(12,j=n==null?void 0:n.getSource(f))})),o.$$.dirty&12304&&j&&(P?l(13,P=!1):j.setTiles(i))},[t,y,I,f,i,a,u,c,$,g,b,C,j,P,n,s,r]}class Go extends X{constructor(e){super(),x(this,e,Fo,Do,Q,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function Ao(o){let e;const l=o[16].default,t=$t(l,o,o[24],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16777216)&&_t(t,l,n,n[24],e?dt(l,n[24],r,null):gt(n[24]),null)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function qo(o){let e,l,t;function n(s){o[17](s)}let r={id:o[1],type:"symbol",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],applyToClusters:o[9],minzoom:o[10],maxzoom:o[11],hoverCursor:o[12],manageHoverState:o[13],eventsIfTopMost:o[14],interactive:o[15],$$slots:{default:[Ao]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.hovered=o[0]),e=new _o({props:r}),E.push(()=>B(e,"hovered",n)),e.$on("click",o[18]),e.$on("dblclick",o[19]),e.$on("contextmenu",o[20]),e.$on("mouseenter",o[21]),e.$on("mousemove",o[22]),e.$on("mouseleave",o[23]),{c(){w(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,[f]){const i={};f&2&&(i.id=s[1]),f&4&&(i.source=s[2]),f&8&&(i.sourceLayer=s[3]),f&16&&(i.beforeId=s[4]),f&32&&(i.beforeLayerType=s[5]),f&64&&(i.paint=s[6]),f&128&&(i.layout=s[7]),f&256&&(i.filter=s[8]),f&512&&(i.applyToClusters=s[9]),f&1024&&(i.minzoom=s[10]),f&2048&&(i.maxzoom=s[11]),f&4096&&(i.hoverCursor=s[12]),f&8192&&(i.manageHoverState=s[13]),f&16384&&(i.eventsIfTopMost=s[14]),f&32768&&(i.interactive=s[15]),f&16777216&&(i.$$scope={dirty:f,ctx:s}),!l&&f&1&&(l=!0,i.hovered=s[0],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function zo(o,e,l){let{$$slots:t={},$$scope:n}=e,{id:r=Cn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:$=void 0}=e,{applyToClusters:g=void 0}=e,{minzoom:b=void 0}=e,{maxzoom:C=void 0}=e,{hoverCursor:y=void 0}=e,{manageHoverState:I=!1}=e,{hovered:j=null}=e,{eventsIfTopMost:P=!1}=e,{interactive:N=!0}=e;function O(G){j=G,l(0,j)}function M(G){Jt.call(this,o,G)}function R(G){Jt.call(this,o,G)}function D(G){Jt.call(this,o,G)}function z(G){Jt.call(this,o,G)}function J(G){Jt.call(this,o,G)}function ae(G){Jt.call(this,o,G)}return o.$$set=G=>{"id"in G&&l(1,r=G.id),"source"in G&&l(2,s=G.source),"sourceLayer"in G&&l(3,f=G.sourceLayer),"beforeId"in G&&l(4,i=G.beforeId),"beforeLayerType"in G&&l(5,a=G.beforeLayerType),"paint"in G&&l(6,u=G.paint),"layout"in G&&l(7,c=G.layout),"filter"in G&&l(8,$=G.filter),"applyToClusters"in G&&l(9,g=G.applyToClusters),"minzoom"in G&&l(10,b=G.minzoom),"maxzoom"in G&&l(11,C=G.maxzoom),"hoverCursor"in G&&l(12,y=G.hoverCursor),"manageHoverState"in G&&l(13,I=G.manageHoverState),"hovered"in G&&l(0,j=G.hovered),"eventsIfTopMost"in G&&l(14,P=G.eventsIfTopMost),"interactive"in G&&l(15,N=G.interactive),"$$scope"in G&&l(24,n=G.$$scope)},[j,r,s,f,i,a,u,c,$,g,b,C,y,I,P,N,t,O,M,R,D,z,J,ae,n]}class Ln extends X{constructor(e){super(),x(this,e,zo,qo,Q,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function tl(o){let e=o[0],l,t,n=nl(o);return{c(){n.c(),l=_e()},m(r,s){n.m(r,s),d(r,l,s),t=!0},p(r,s){s&1&&Q(e,e=r[0])?(be(),_(n,1,1,Z),we(),n=nl(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&h(l),n.d(r)}}}function nl(o){let e;const l=o[15].default,t=$t(l,o,o[14],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16384)&&_t(t,l,n,n[14],e?dt(l,n[14],r,null):gt(n[14]),null)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function Ho(o){let e,l,t=o[0]&&tl(o);return{c(){t&&t.c(),e=_e()},m(n,r){t&&t.m(n,r),d(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&m(t,1)):(t=tl(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(be(),_(t,1,1,()=>{t=null}),we())},i(n){l||(m(t),l=!0)},o(n){_(t),l=!1},d(n){n&&h(e),t&&t.d(n)}}}function Eo(o,e,l){let t,n,{$$slots:r={},$$scope:s}=e,{id:f=Cn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e,{bounds:c=null}=e,{scheme:$=null}=e,{attribution:g=null}=e,{minzoom:b=null}=e,{maxzoom:C=null}=e,{volatile:y=null}=e;if(i&&i.includes("pmtiles://")&&!Hn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let N=new Qr;Hn.addProtocol("pmtiles",N.tile)}const{map:I,self:j}=Dr();Y(o,I,N=>l(13,n=N)),Y(o,j,N=>l(0,t=N));let P;return yn(()=>{t&&n&&(Fr(I,t,P),pt(j,t=null,t),P=void 0)}),o.$$set=N=>{"id"in N&&l(3,f=N.id),"url"in N&&l(4,i=N.url),"tiles"in N&&l(5,a=N.tiles),"promoteId"in N&&l(6,u=N.promoteId),"bounds"in N&&l(7,c=N.bounds),"scheme"in N&&l(8,$=N.scheme),"attribution"in N&&l(9,g=N.attribution),"minzoom"in N&&l(10,b=N.minzoom),"maxzoom"in N&&l(11,C=N.maxzoom),"volatile"in N&&l(12,y=N.volatile),"$$scope"in N&&l(14,s=N.$$scope)},o.$$.update=()=>{o.$$.dirty&16377&&n&&t!==f&&(pt(j,t=f,t),Gr(n,t,Ar({type:"vector",url:i,tiles:a,promoteId:u,bounds:c,scheme:$,attribution:g,minzoom:b,maxzoom:C,volatile:y}),N=>n&&N===t,()=>{t&&(P=n==null?void 0:n.getSource(t))})),o.$$.dirty&8200&&(n==null||n.on("style.load",()=>{P=n==null?void 0:n.getSource(f)}))},[t,I,j,f,i,a,u,c,$,g,b,C,y,n,s,r]}class pe extends X{constructor(e){super(),x(this,e,Eo,Ho,Q,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function ll(o,e,l){const t=o.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function Bo(o){let e,l,t;return l=new Ee({props:{$$slots:{default:[Wo]},$$scope:{ctx:o}}}),l.$on("click",o[9]),{c(){e=S("div"),w(l.$$.fragment)},m(n,r){d(n,e,r),v(l,e,null),t=!0},p(n,r){const s={};r&16384&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Uo(o){let e,l,t,n,r,s,f,i,a,u;l=new Ee({props:{$$slots:{default:[Yo]},$$scope:{ctx:o}}}),l.$on("click",o[4]);let c=o[2]&&rl(o);r=new ot({props:{label:"Help",$$slots:{default:[Jo]},$$scope:{ctx:o}}}),f=new go({}),f.$on("click",o[3]);let $=me(o[0]),g=[];for(let C=0;C<$.length;C+=1)g[C]=ol(ll(o,$,C));const b=C=>_(g[C],1,1,()=>{g[C]=null});return{c(){e=S("div"),w(l.$$.fragment),t=L(),c&&c.c(),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L();for(let C=0;C<g.length;C+=1)g[C].c();a=_e()},m(C,y){d(C,e,y),v(l,e,null),d(C,t,y),c&&c.m(C,y),d(C,n,y),v(r,C,y),d(C,s,y),v(f,C,y),d(C,i,y);for(let I=0;I<g.length;I+=1)g[I]&&g[I].m(C,y);d(C,a,y),u=!0},p(C,y){const I={};y&16384&&(I.$$scope={dirty:y,ctx:C}),l.$set(I),C[2]?c?c.p(C,y):(c=rl(C),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const j={};if(y&16384&&(j.$$scope={dirty:y,ctx:C}),r.$set(j),y&65){$=me(C[0]);let P;for(P=0;P<$.length;P+=1){const N=ll(C,$,P);g[P]?(g[P].p(N,y),m(g[P],1)):(g[P]=ol(N),g[P].c(),m(g[P],1),g[P].m(a.parentNode,a))}for(be(),P=$.length;P<g.length;P+=1)b(P);we()}},i(C){if(!u){m(l.$$.fragment,C),m(r.$$.fragment,C),m(f.$$.fragment,C);for(let y=0;y<$.length;y+=1)m(g[y]);u=!0}},o(C){_(l.$$.fragment,C),_(r.$$.fragment,C),_(f.$$.fragment,C),g=g.filter(Boolean);for(let y=0;y<g.length;y+=1)_(g[y]);u=!1},d(C){C&&(h(e),h(t),h(n),h(s),h(i),h(a)),k(l),c&&c.d(C),k(r,C),k(f,C),He(g,C)}}}function Wo(o){let e;return{c(){e=T("Measure lines")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Yo(o){let e;return{c(){e=T("Stop measuring")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function rl(o){let e,l,t=o[2].toFixed(2)+"",n,r;return{c(){e=S("p"),l=T("Length: "),n=T(t),r=T(" meters")},m(s,f){d(s,e,f),p(e,l),p(e,n),p(e,r)},p(s,f){f&4&&t!==(t=s[2].toFixed(2)+"")&&A(n,t)},d(s){s&&h(e)}}}function Jo(o){let e;return{c(){e=S("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){d(l,e,t)},p:Z,d(l){l&&h(e)}}}function Vo(o){let e,l;return{c(){e=S("span"),l=L(),F(e,"class","dot svelte-1tzt432")},m(t,n){d(t,e,n),d(t,l,n)},p:Z,d(t){t&&(h(e),h(l))}}}function ol(o){let e,l,t;function n(f){o[7](f,o[11],o[12],o[13])}function r(){return o[8](o[13])}let s={draggable:!0,$$slots:{default:[Vo]},$$scope:{ctx:o}};return o[11]!==void 0&&(s.lngLat=o[11]),e=new ao({props:s}),E.push(()=>B(e,"lngLat",n)),e.$on("click",r),{c(){w(e.$$.fragment)},m(f,i){v(e,f,i),t=!0},p(f,i){o=f;const a={};i&16384&&(a.$$scope={dirty:i,ctx:o}),!l&&i&1&&(l=!0,a.lngLat=o[11],U(()=>l=!1)),e.$set(a)},i(f){t||(m(e.$$.fragment,f),t=!0)},o(f){_(e.$$.fragment,f),t=!1},d(f){k(e,f)}}}function Qo(o){let e,l;const t=[q("measurement-line"),{paint:{"line-color":nt.measuringLine,"line-width":5}}];let n={};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f={};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Zo(o){let e,l,t,n,r,s,f;const i=[Uo,Bo],a=[];function u(c,$){return c[1]?0:1}return e=u(o),l=a[e]=i[e](o),n=new Wt({props:{data:o[0].length<2?Yn():hn(o[0]),$$slots:{default:[Qo]},$$scope:{ctx:o}}}),{c(){l.c(),t=L(),w(n.$$.fragment)},m(c,$){a[e].m(c,$),d(c,t,$),v(n,c,$),r=!0,s||(f=mt(window,"keydown",o[5]),s=!0)},p(c,[$]){let g=e;e=u(c),e===g?a[e].p(c,$):(be(),_(a[g],1,1,()=>{a[g]=null}),we(),l=a[e],l?l.p(c,$):(l=a[e]=i[e](c),l.c()),m(l,1),l.m(t.parentNode,t));const b={};$&1&&(b.data=c[0].length<2?Yn():hn(c[0])),$&16384&&(b.$$scope={dirty:$,ctx:c}),n.$set(b)},i(c){r||(m(l),m(n.$$.fragment,c),r=!0)},o(c){_(l),_(n.$$.fragment,c),r=!1},d(c){c&&h(t),a[e].d(c),k(n,c),s=!1,f()}}}function Ko(o,e,l){let t,n=!1,r=[];function s(b){return b.length<2?null:1e3*so(hn(b),{units:"kilometers"})}function f(b){l(0,r=[...r,b.detail.lngLat.toArray()])}function i(){l(1,n=!1),l(0,r=[])}function a(b){n&&b.key==="Escape"&&(b.stopPropagation(),i())}function u(b){r.splice(b,1),l(0,r)}function c(b,C,y,I){y[I]=b,l(0,r)}const $=b=>u(b),g=()=>l(1,n=!0);return o.$$.update=()=>{o.$$.dirty&1&&l(2,t=s(r))},[r,n,t,f,i,a,u,c,$,g]}class Xo extends X{constructor(e){super(),x(this,e,Ko,Zo,Q,{})}}const xo="/atip/v2-schema/assets/zoom_out_map-b2e1091a.svg";function es(o){let e,l;return{c(){e=S("img"),Xt(e.src,l=xo)||F(e,"src",l),F(e,"alt","Zoom to show entire boundary")},m(t,n){d(t,e,n)},p:Z,d(t){t&&h(e)}}}function ts(o){let e,l;return e=new Ee({props:{title:"Zoom to show entire boundary",$$slots:{default:[es]},$$scope:{ctx:o}}}),e.$on("click",o[0]),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,[n]){const r={};n&8&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ns(o,e,l){let t;Y(o,un,s=>l(2,t=s));let{boundaryGeojson:n}=e;function r(){let s=Rr(n);Number.isFinite(s[0])&&t.fitBounds(s,{padding:20,animate:!0,duration:500})}return o.$$set=s=>{"boundaryGeojson"in s&&l(1,n=s.boundaryGeojson)},[r,n]}class ls extends X{constructor(e){super(),x(this,e,ns,ts,Q,{boundaryGeojson:1})}}const V={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},rights_of_way:{footpath:"red",bridleway:"green",restricted_byway:"blue",boat:"orange"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},Ge=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function rs(o){let e;return{c(){e=T(`Open Government License
  `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function os(o){let e,l,t,n,r;return t=new le({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[rs]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=T("License: "),w(t.$$.fragment),n=T(`. Contains OS data © Crown copyright and database right
  2023.`)},m(s,f){d(s,e,f),p(e,l),v(t,e,null),p(e,n),r=!0},p(s,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){r||(m(t.$$.fragment,s),r=!0)},o(s){_(t.$$.fragment,s),r=!1},d(s){s&&h(e),k(t)}}}class Te extends X{constructor(e){super(),x(this,e,null,os,Q,{})}}function sl(o,e,l){const t=o.slice();return t[2]=e[l],t}function il(o,e,l){const t=o.slice();return t[5]=e[l],t}function al(o){let e,l;return{c(){e=S("span"),l=T(` 
    `),re(e,"background",o[5]),re(e,"width","100%"),re(e,"border","1px solid black")},m(t,n){d(t,e,n),p(e,l)},p(t,n){n&1&&re(e,"background",t[5])},d(t){t&&h(e)}}}function fl(o){let e,l=o[2]+"",t;return{c(){e=S("span"),t=T(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&2&&l!==(l=n[2]+"")&&A(t,l)},d(n){n&&h(e)}}}function ss(o){let e,l,t,n=me(o[0]),r=[];for(let i=0;i<n.length;i+=1)r[i]=al(il(o,n,i));let s=me(o[1]),f=[];for(let i=0;i<s.length;i+=1)f[i]=fl(sl(o,s,i));return{c(){e=S("div");for(let i=0;i<r.length;i+=1)r[i].c();l=L(),t=S("div");for(let i=0;i<f.length;i+=1)f[i].c();re(e,"display","flex"),re(t,"display","flex"),re(t,"justify-content","space-between")},m(i,a){d(i,e,a);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);d(i,l,a),d(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){n=me(i[0]);let u;for(u=0;u<n.length;u+=1){const c=il(i,n,u);r[u]?r[u].p(c,a):(r[u]=al(c),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}if(a&2){s=me(i[1]);let u;for(u=0;u<s.length;u+=1){const c=sl(i,s,u);f[u]?f[u].p(c,a):(f[u]=fl(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=s.length}},i:Z,o:Z,d(i){i&&(h(e),h(l),h(t)),He(r,i),He(f,i)}}}function is(o,e,l){let{colorScale:t}=e,{limits:n}=e;return o.$$set=r=>{"colorScale"in r&&l(0,t=r.colorScale),"limits"in r&&l(1,n=r.limits)},[t,n]}class Be extends X{constructor(e){super(),x(this,e,is,ss,Q,{colorScale:0,limits:1})}}function $e(o){let e=new URLSearchParams(window.location.search).has(o),l=Le(e);return l.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(o,"1"):n.searchParams.delete(o),window.history.replaceState(null,"",n.toString())}),l}function bt(o,e,l,t){let n=e,r=new URLSearchParams(window.location.search).get(o);if(r!=null)try{n=t(r)}catch(f){console.warn(`Parsing URL parameter ${o}=${r} failed, using default value: ${f}`)}let s=Le(n);return s.subscribe(f=>{let i=new URL(window.location.href),a=l(f);a==null?i.searchParams.delete(o):i.searchParams.set(o,a),window.history.replaceState(null,"",i.toString())}),s}let wn=Le(new Map),Kt=Le(new Set);const as=o=>({}),ul=o=>({}),fs=o=>({}),cl=o=>({}),us=o=>({}),pl=o=>({});function cs(o){let e;return{c(){e=T(o[2])},m(l,t){d(l,e,t)},p(l,t){t&4&&A(e,l[2])},d(l){l&&h(e)}}}function ps(o){let e,l,t;const n=o[7].icon,r=$t(n,o,o[10],pl);return{c(){r&&r.c(),e=L(),l=T(o[2])},m(s,f){r&&r.m(s,f),d(s,e,f),d(s,l,f),t=!0},p(s,f){r&&r.p&&(!t||f&1024)&&_t(r,n,s,s[10],t?dt(n,s[10],f,us):gt(s[10]),pl),(!t||f&4)&&A(l,s[2])},i(s){t||(m(r,s),t=!0)},o(s){_(r,s),t=!1},d(s){s&&(h(e),h(l)),r&&r.d(s)}}}function $s(o){let e;const l=o[7].help,t=$t(l,o,o[10],cl);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&_t(t,l,n,n[10],e?dt(l,n[10],r,fs):gt(n[10]),cl)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function ms(o){let e;return{c(){e=T("X")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function _s(o){let e,l,t,n,r,s,f,i,a;function u($){o[8]($)}let c={$$slots:{default:[ps]},$$scope:{ctx:o}};return o[0]!==void 0&&(c.checked=o[0]),l=new ze({props:c}),E.push(()=>B(l,"checked",u)),s=new fo({props:{$$slots:{default:[$s]},$$scope:{ctx:o}}}),i=new Ee({props:{$$slots:{default:[ms]},$$scope:{ctx:o}}}),i.$on("click",o[6]),{c(){e=S("div"),w(l.$$.fragment),n=L(),r=S("span"),w(s.$$.fragment),f=L(),w(i.$$.fragment),re(e,"display","flex"),re(e,"justify-content","space-between")},m($,g){d($,e,g),v(l,e,null),p(e,n),p(e,r),v(s,r,null),p(r,f),v(i,r,null),a=!0},p($,g){const b={};g&1028&&(b.$$scope={dirty:g,ctx:$}),!t&&g&1&&(t=!0,b.checked=$[0],U(()=>t=!1)),l.$set(b);const C={};g&1024&&(C.$$scope={dirty:g,ctx:$}),s.$set(C);const y={};g&1024&&(y.$$scope={dirty:g,ctx:$}),i.$set(y)},i($){a||(m(l.$$.fragment,$),m(s.$$.fragment,$),m(i.$$.fragment,$),a=!0)},o($){_(l.$$.fragment,$),_(s.$$.fragment,$),_(i.$$.fragment,$),a=!1},d($){$&&h(e),k(l),k(s),k(i)}}}function $l(o){let e;const l=o[7].controls,t=$t(l,o,o[10],ul);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&_t(t,l,n,n[10],e?dt(l,n[10],r,as):gt(n[10]),ul)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function gs(o){let e,l,t,n,r,s;e=new ze({props:{checked:o[4].has(o[1]),$$slots:{default:[cs]},$$scope:{ctx:o}}}),e.$on("change",o[5]),n=new Fe({props:{small:!0,$$slots:{default:[_s]},$$scope:{ctx:o}}});let f=o[0]&&$l(o);return{c(){w(e.$$.fragment),l=L(),t=S("div"),w(n.$$.fragment),r=L(),f&&f.c()},m(i,a){v(e,i,a),d(i,l,a),d(i,t,a),v(n,t,null),p(t,r),f&&f.m(t,null),o[9](t),s=!0},p(i,[a]){const u={};a&18&&(u.checked=i[4].has(i[1])),a&1028&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&1029&&(c.$$scope={dirty:a,ctx:i}),n.$set(c),i[0]?f?(f.p(i,a),a&1&&m(f,1)):(f=$l(i),f.c(),m(f,1),f.m(t,null)):f&&(be(),_(f,1,1,()=>{f=null}),we())},i(i){s||(m(e.$$.fragment,i),m(n.$$.fragment,i),m(f),s=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),_(f),s=!1},d(i){i&&(h(l),h(t)),k(e,i),k(n),f&&f.d(),o[9](null)}}}function ds(o,e,l){let t;Y(o,Kt,b=>l(4,t=b));let{$$slots:n={},$$scope:r}=e,{name:s}=e,{title:f}=e,{show:i}=e;i&&(t.add(s),Kt.set(t));let a=null;yn(()=>{wn.update(b=>(b.delete(s),b))});function u(){Kt.update(b=>(b.has(s)?(b.delete(s),l(0,i=!1)):(b.add(s),l(0,i=!0)),b))}function c(){t.delete(s),Kt.set(t),l(0,i=!1)}function $(b){i=b,l(0,i)}function g(b){E[b?"unshift":"push"](()=>{a=b,l(3,a),l(1,s)})}return o.$$set=b=>{"name"in b&&l(1,s=b.name),"title"in b&&l(2,f=b.title),"show"in b&&l(0,i=b.show),"$$scope"in b&&l(10,r=b.$$scope)},o.$$.update=()=>{o.$$.dirty&10&&a&&wn.update(b=>(l(3,a.style.display="none",a),b.set(s,a),b))},[i,s,f,a,t,u,c,n,$,g,r]}class fe extends X{constructor(e){super(),x(this,e,ds,gs,Q,{name:1,title:2,show:0})}}function ml(o){const e=o[7].OA21CD;o[8]=e;const l=o[7][o[0].kind];o[9]=l}function hs(o){let e,l,t,n,r,s,f;return t=new le({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[vs]},$$scope:{ctx:o}}}),r=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ks]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=T("Population density data is from the 2021 census, via "),w(t.$$.fragment),n=T(". Output area boundaries from "),w(r.$$.fragment),s=T(".")},m(i,a){d(i,e,a),p(e,l),v(t,e,null),p(e,n),v(r,e,null),p(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(r.$$.fragment,i),f=!1},d(i){i&&h(e),k(t),k(r)}}}function bs(o){let e,l,t,n,r,s,f,i,a;return r=new le({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ys]},$$scope:{ctx:o}}}),f=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ss]},$$scope:{ctx:o}}}),{c(){e=S("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,l=L(),t=S("p"),n=T("Car/van availability data is from the 2021 census, via "),w(r.$$.fragment),s=T(". Output area boundaries from "),w(f.$$.fragment),i=T(".")},m(u,c){d(u,e,c),d(u,l,c),d(u,t,c),p(t,n),v(r,t,null),p(t,s),v(f,t,null),p(t,i),a=!0},i(u){a||(m(r.$$.fragment,u),m(f.$$.fragment,u),a=!0)},o(u){_(r.$$.fragment,u),_(f.$$.fragment,u),a=!1},d(u){u&&(h(e),h(l),h(t)),k(r),k(f)}}}function ws(o){let e,l,t,n,r,s,f;return t=new le({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ts]},$$scope:{ctx:o}}}),r=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Cs]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=T("Car/van availability data is from the 2021 census, via "),w(t.$$.fragment),n=T(". Output area boundaries from "),w(r.$$.fragment),s=T(".")},m(i,a){d(i,e,a),p(e,l),v(t,e,null),p(e,n),v(r,e,null),p(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(r.$$.fragment,i),f=!1},d(i){i&&h(e),k(t),k(r)}}}function vs(o){let e;return{c(){e=T(`NOMIS TS006
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ks(o){let e;return{c(){e=T(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ys(o){let e;return{c(){e=T(`NOMIS TS045
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ss(o){let e;return{c(){e=T(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ts(o){let e;return{c(){e=T(`NOMIS TS045
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Cs(o){let e;return{c(){e=T(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ls(o){let e,l,t,n,r,s;const f=[ws,bs,hs],i=[];function a(u,c){return u[0].kind=="percent_households_with_car"?0:u[0].kind=="average_cars_per_household"?1:2}return l=a(o),t=i[l]=f[l](o),r=new Te({}),{c(){e=S("span"),t.c(),n=L(),w(r.$$.fragment),F(e,"slot","help")},m(u,c){d(u,e,c),i[l].m(e,null),p(e,n),v(r,e,null),s=!0},p(u,c){let $=l;l=a(u),l!==$&&(be(),_(i[$],1,1,()=>{i[$]=null}),we(),t=i[l],t||(t=i[l]=f[l](u),t.c()),m(t,1),t.m(e,n))},i(u){s||(m(t),m(r.$$.fragment,u),s=!0)},o(u){_(t),_(r.$$.fragment,u),s=!1},d(u){u&&h(e),i[l].d(),k(r)}}}function Is(o){let e,l,t,n;return t=new Be({props:{colorScale:o[1],limits:ht(o[0].kind).map(_l)}}),{c(){e=S("p"),e.textContent="(people per square kilometres)",l=L(),w(t.$$.fragment)},m(r,s){d(r,e,s),d(r,l,s),v(t,r,s),n=!0},p(r,s){const f={};s&1&&(f.limits=ht(r[0].kind).map(_l)),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){_(t.$$.fragment,r),n=!1},d(r){r&&(h(e),h(l)),k(t,r)}}}function Ms(o){let e,l;return e=new Be({props:{colorScale:o[1],limits:ht(o[0].kind)}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=ht(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Os(o){let e,l;return e=new Be({props:{colorScale:o[1],limits:ht(o[0].kind)}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=ht(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function js(o){let e,l,t,n,r,s,f;function i(g){o[4](g)}let a={label:"Dataset",choices:[["percent_households_with_car","Percent of households with a car"],["average_cars_per_household","Average cars per household"],["population_density","Population density"]],inlineSmall:!0};o[0].kind!==void 0&&(a.value=o[0].kind),l=new Sn({props:a}),E.push(()=>B(l,"value",i));const u=[Os,Ms,Is],c=[];function $(g,b){return g[0].kind=="percent_households_with_car"?0:g[0].kind=="average_cars_per_household"?1:g[0].kind=="population_density"?2:-1}return~(r=$(o))&&(s=c[r]=u[r](o)),{c(){e=S("div"),w(l.$$.fragment),n=L(),s&&s.c(),F(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(g,b){d(g,e,b),v(l,e,null),p(e,n),~r&&c[r].m(e,null),f=!0},p(g,b){const C={};!t&&b&1&&(t=!0,C.value=g[0].kind,U(()=>t=!1)),l.$set(C);let y=r;r=$(g),r===y?~r&&c[r].p(g,b):(s&&(be(),_(c[y],1,1,()=>{c[y]=null}),we()),~r?(s=c[r],s?s.p(g,b):(s=c[r]=u[r](g),s.c()),m(s,1),s.m(e,null)):s=null)},i(g){f||(m(l.$$.fragment,g),m(s),f=!0)},o(g){_(l.$$.fragment,g),_(s),f=!1},d(g){g&&h(e),k(l),~r&&c[r].d()}}}function Ns(o){let e,l,t,n=o[9].toLocaleString()+"",r,s,f=o[8]+"",i;return{c(){e=S("p"),l=T("There are "),t=S("b"),r=T(n),s=T(`
          people per square kilometre in `),i=T(f)},m(a,u){d(a,e,u),p(e,l),p(e,t),p(t,r),p(e,s),p(e,i)},p(a,u){u&129&&n!==(n=a[9].toLocaleString()+"")&&A(r,n),u&128&&f!==(f=a[8]+"")&&A(i,f)},d(a){a&&h(e)}}}function Ps(o){let e,l,t=o[8]+"",n,r,s,f=o[9]+"",i,a;return{c(){e=S("p"),l=T("Households in "),n=T(t),r=T(` have an average of
          `),s=S("b"),i=T(f),a=T(`
          cars`)},m(u,c){d(u,e,c),p(e,l),p(e,n),p(e,r),p(e,s),p(s,i),p(e,a)},p(u,c){c&128&&t!==(t=u[8]+"")&&A(n,t),c&129&&f!==(f=u[9]+"")&&A(i,f)},d(u){u&&h(e)}}}function Rs(o){let e,l,t=o[9]+"",n,r,s,f=o[8]+"",i,a;return{c(){e=S("p"),l=S("b"),n=T(t),r=T("%"),s=T(`
          of households in `),i=T(f),a=T(" have 1 or more cars")},m(u,c){d(u,e,c),p(e,l),p(l,n),p(l,r),p(e,s),p(e,i),p(e,a)},p(u,c){c&129&&t!==(t=u[9]+"")&&A(n,t),c&128&&f!==(f=u[8]+"")&&A(i,f)},d(u){u&&h(e)}}}function Ds(o){ml(o);let e;function l(r,s){return r[0].kind=="percent_households_with_car"?Rs:r[0].kind=="average_cars_per_household"?Ps:Ns}let t=l(o),n=t(o);return{c(){n.c(),e=_e()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){ml(r),t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function Fs(o){let e,l;return e=new ie({props:{$$slots:{default:[Ds,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&1153&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Gs(o){let e,l,t,n;const r=[q(We),{sourceLayer:We},{paint:{"fill-color":ve(["get",o[0].kind],ht(o[0].kind),o[1]),"fill-opacity":ee(.5,.7)}},{layout:{visibility:o[0].show?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Fs]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new Ae({props:s}),e.$on("click",o[3]);const f=[q(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0].show?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&se(q(We)),u&0&&{sourceLayer:We},u&3&&{paint:{"fill-color":ve(["get",a[0].kind],ht(a[0].kind),a[1]),"fill-opacity":ee(.5,.7)}},u&1&&{layout:{visibility:a[0].show?"visible":"none"}},r[4],r[5],r[6]]):{};u&1025&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&1?ne(f,[u&0&&se(q(`${We}-outline`)),u&0&&{sourceLayer:We},f[2],u&1&&{layout:{visibility:a[0].show?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&h(l),k(e,a),k(t,a)}}}function As(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:We,title:"2021 census",$$slots:{controls:[js],help:[Ls]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${We}.pmtiles`,$$slots:{default:[Gs]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&1025&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&1025&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let We="census_output_areas";function qs(o){return o.show?o.kind:null}function zs(o){return{show:!0,kind:o}}function ht(o){return o=="percent_households_with_car"?[0,20,40,60,80,100]:o=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const _l=o=>o.toLocaleString();function Hs(o,e,l){let t,n=V.sequential_low_to_high,s=bt(We,{show:!1,kind:"percent_households_with_car"},qs,zs);Y(o,s,u=>l(0,t=u));function f(u){let c=u.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${c}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${c}`,"_blank")}function i(u){o.$$.not_equal(t.kind,u)&&(t.kind=u,s.set(t))}function a(u){o.$$.not_equal(t.show,u)&&(t.show=u,s.set(t))}return[t,n,s,f,i,a]}class Es extends X{constructor(e){super(),x(this,e,Hs,As,Q,{})}}function Bs(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Us(o){let e;return{c(){e=T(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ws(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/8369f71423ba474ebdbac60a539b53c8_0/explore",$$slots:{default:[Us]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=T("Data from "),w(n.$$.fragment),r=T(", as of May 2024."),s=L(),w(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),v(n,l,null),p(l,r),p(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function Ys(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&h(e)}}}function Js(o){let e,l;return e=new ie({props:{$$slots:{default:[Ys,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Vs(o){let e,l,t,n;const r=[q(vt),{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Js]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new Ae({props:s}),e.$on("click",Ks);const f=[q(`${vt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&se(q(vt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?ne(f,[u&0&&se(q(`${vt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&h(l),k(e,a),k(t,a)}}}function Qs(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:vt,title:Zs,$$slots:{help:[Ws],icon:[Bs]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new Wt({props:{data:`${ce()}/v1/${vt}.geojson`,$$slots:{default:[Vs]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let vt="combined_authorities",Zs="Combined authorities";function Ks(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.CAUTH24CD}`,"_blank")}function Xs(o,e,l){let t,n=V.combined_authorities,r=$e(vt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class xs extends X{constructor(e){super(),x(this,e,Xs,Qs,Q,{})}}function ei(o){let e;return{c(){e=T(`DLUCH GIS
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ti(o){let e;return{c(){e=T(`here
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ni(o){let e,l,t,n,r,s,f,i,a,u;return n=new le({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[ei]},$$scope:{ctx:o}}}),s=new le({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[ti]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),t=T("The 2019 English IMD scores come from "),w(n.$$.fragment),r=T(`. Note the LSOAs identified are from the 2011 census. A
      detailed breakdown of the score across different categories can be found `),w(s.$$.fragment),f=T("."),i=L(),w(a.$$.fragment),F(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(l,t),v(n,l,null),p(l,r),v(s,l,null),p(l,f),p(e,i),v(a,e,null),u=!0},p(c,$){const g={};$&64&&(g.$$scope={dirty:$,ctx:c}),n.$set(g);const b={};$&64&&(b.$$scope={dirty:$,ctx:c}),s.$set(b)},i(c){u||(m(n.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&h(e),k(n),k(s),k(a)}}}function li(o){let e,l,t;return l=new Be({props:{colorScale:o[1],limits:["Least deprived","Most deprived"]}}),{c(){e=S("span"),w(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function ri(o){let e,l=o[5].LSOA11CD+"",t,n,r,s=o[5].score+"",f,i,a,u,c,$=o[5].rank.toLocaleString()+"",g,b;return{c(){e=S("p"),t=T(l),n=T(` has an IMD score of
        `),r=S("b"),f=T(s),i=L(),a=S("p"),u=T("Rank: "),c=S("b"),g=T($),b=T(`
        / 32,844 LSOAs`)},m(C,y){d(C,e,y),p(e,t),p(e,n),p(e,r),p(r,f),d(C,i,y),d(C,a,y),p(a,u),p(a,c),p(c,g),p(a,b)},p(C,y){y&32&&l!==(l=C[5].LSOA11CD+"")&&A(t,l),y&32&&s!==(s=C[5].score+"")&&A(f,s),y&32&&$!==($=C[5].rank.toLocaleString()+"")&&A(g,$)},d(C){C&&(h(e),h(i),h(a))}}}function oi(o){let e,l;return e=new ie({props:{$$slots:{default:[ri,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function si(o){let e,l,t,n;const r=[q(Ye),{sourceLayer:Ye},{paint:{"fill-color":ve(["-",10,["get","decile"]],o[2],o[1]),"fill-opacity":ee(.5,.7)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[oi]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new Ae({props:s});const f=[q(`${Ye}-outline`),{sourceLayer:Ye},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),n=!0},p(a,u){const c=u&7?ne(r,[u&0&&se(q(Ye)),u&0&&{sourceLayer:Ye},u&6&&{paint:{"fill-color":ve(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":ee(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&1?ne(f,[u&0&&se(q(`${Ye}-outline`)),u&0&&{sourceLayer:Ye},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&h(l),k(e,a),k(t,a)}}}function ii(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Ye,title:ai,$$slots:{controls:[li],help:[ni]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Ye}.pmtiles`,$$slots:{default:[si]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Ye="imd",ai="Indices of Multiple Deprivation";function fi(o,e,l){let t,n=V.sequential_low_to_high,r=[0,2,4,6,8,10],s=$e(Ye);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class ui extends X{constructor(e){super(),x(this,e,fi,ii,Q,{})}}function ci(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function pi(o){let e;return{c(){e=T(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function $i(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/fb6ab0ce776243339e45e33444f431c8_0/explore",$$slots:{default:[pi]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=T("Data from "),w(n.$$.fragment),r=T(", as of May 2024."),s=L(),w(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),v(n,l,null),p(l,r),p(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function mi(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&h(e)}}}function _i(o){let e,l;return e=new ie({props:{$$slots:{default:[mi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function gi(o){let e,l,t,n;const r=[q(kt),{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[_i]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new Ae({props:s}),e.$on("click",bi);const f=[q(`${kt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&se(q(kt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?ne(f,[u&0&&se(q(`${kt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&h(l),k(e,a),k(t,a)}}}function di(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:kt,title:hi,$$slots:{help:[$i],icon:[ci]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new Wt({props:{data:`${ce()}/v1/${kt}.geojson`,$$slots:{default:[gi]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let kt="local_authority_districts",hi="Local Authority Districts";function bi(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.LAD24CD}`,"_blank")}function wi(o,e,l){let t,n=V.local_authority_districts,r=$e(kt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class vi extends X{constructor(e){super(),x(this,e,wi,di,Q,{})}}function ki(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function yi(o){let e;return{c(){e=T(`local authority
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Si(o){let e;return{c(){e=T(`national park authorit
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ti(o){let e;return{c(){e=T(`development corporation
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ci(o){let e;return{c(){e=T("this map")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Li(o){let e;return{c(){e=T(`planning.data.gov.uk
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ii(o){let e,l,t,n,r,s,f,i,a,u,c,$,g,b,C,y,I,j,P,N,O,M,R;return n=new le({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[yi]},$$scope:{ctx:o}}}),s=new le({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Si]},$$scope:{ctx:o}}}),i=new le({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Ti]},$$scope:{ctx:o}}}),b=new le({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Ci]},$$scope:{ctx:o}}}),P=new le({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Li]},$$scope:{ctx:o}}}),M=new Te({}),{c(){e=S("span"),l=S("p"),t=T("LPAs may be a "),w(n.$$.fragment),r=T(", "),w(s.$$.fragment),f=T("y, or "),w(i.$$.fragment),a=T("."),u=L(),c=S("p"),$=S("strong"),g=T(`Note there are overlapping LPAs near Northhamptonshire. Only one
        authority name is shown when hovering. Use `),w(b.$$.fragment),C=T(" to get more details."),y=L(),I=S("p"),j=T("Data from ONS Geography via "),w(P.$$.fragment),N=T(", as of November 2022."),O=L(),w(M.$$.fragment),F(e,"slot","help")},m(D,z){d(D,e,z),p(e,l),p(l,t),v(n,l,null),p(l,r),v(s,l,null),p(l,f),v(i,l,null),p(l,a),p(e,u),p(e,c),p(c,$),p($,g),v(b,$,null),p($,C),p(e,y),p(e,I),p(I,j),v(P,I,null),p(I,N),p(e,O),v(M,e,null),R=!0},p(D,z){const J={};z&32&&(J.$$scope={dirty:z,ctx:D}),n.$set(J);const ae={};z&32&&(ae.$$scope={dirty:z,ctx:D}),s.$set(ae);const G={};z&32&&(G.$$scope={dirty:z,ctx:D}),i.$set(G);const K={};z&32&&(K.$$scope={dirty:z,ctx:D}),b.$set(K);const H={};z&32&&(H.$$scope={dirty:z,ctx:D}),P.$set(H)},i(D){R||(m(n.$$.fragment,D),m(s.$$.fragment,D),m(i.$$.fragment,D),m(b.$$.fragment,D),m(P.$$.fragment,D),m(M.$$.fragment,D),R=!0)},o(D){_(n.$$.fragment,D),_(s.$$.fragment,D),_(i.$$.fragment,D),_(b.$$.fragment,D),_(P.$$.fragment,D),_(M.$$.fragment,D),R=!1},d(D){D&&h(e),k(n),k(s),k(i),k(b),k(P),k(M)}}}function Mi(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&h(e)}}}function Oi(o){let e,l;return e=new ie({props:{$$slots:{default:[Mi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ji(o){let e,l,t,n;const r=[q(Je),{sourceLayer:Je},{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Oi]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new Ae({props:s});const f=[q(`${Je}-outline`),{sourceLayer:Je},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&se(q(Je)),u&0&&{sourceLayer:Je},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?ne(f,[u&0&&se(q(`${Je}-outline`)),u&0&&{sourceLayer:Je},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&h(l),k(e,a),k(t,a)}}}function Ni(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Je,title:Pi,$$slots:{help:[Ii],icon:[ki]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Je}.pmtiles`,$$slots:{default:[ji]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Je="local_planning_authorities",Pi="Local Planning Authorities";function Ri(o,e,l){let t,n=V.local_planning_authorities,r=$e(Je);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Di extends X{constructor(e){super(),x(this,e,Ri,Ni,Q,{})}}function Fi(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Gi(o){let e;return{c(){e=T(`Ordnance Survey Boundary-Line
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ai(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Gi]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=T("Data from "),w(n.$$.fragment),r=T(", as of October 2024."),s=L(),w(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),v(n,l,null),p(l,r),p(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function qi(o){let e,l=o[4].Name+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].Name+"")&&A(t,l)},d(n){n&&h(e)}}}function zi(o){let e,l;return e=new ie({props:{$$slots:{default:[qi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Hi(o){let e,l,t,n;const r=[q(Ve),{sourceLayer:Ve},{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[zi]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new Ae({props:s}),e.$on("click",Ui);const f=[q(`${Ve}-outline`),{sourceLayer:Ve},{paint:{"line-color":o[1],"line-width":5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&se(q(Ve)),u&0&&{sourceLayer:Ve},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?ne(f,[u&0&&se(q(`${Ve}-outline`)),u&0&&{sourceLayer:Ve},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&h(l),k(e,a),k(t,a)}}}function Ei(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ve,title:Bi,$$slots:{help:[Ai],icon:[Fi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Ve}.pmtiles`,$$slots:{default:[Hi]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Ve="parliamentary_constituencies",Bi="Parliamentary constituencies";function Ui(o){let e=o.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Wi(o,e,l){let t,n=V.parliamentary_constituencies,r=$e(Ve);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Yi extends X{constructor(e){super(),x(this,e,Wi,Ei,Q,{})}}function Ji(o){let e;return{c(){e=T(`DEFRA
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Vi(o){let e,l,t,n,r,s,f,i,a,u;return n=new le({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Ji]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),t=T("Most layers show air quality data from "),w(n.$$.fragment),r=T(`. The measurements are annual means, in units of µgm
      `),s=S("sup"),s.textContent="3",f=T(`
      . Note the particulate matter layers are not corrected for natural sources.`),i=L(),w(a.$$.fragment),F(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(l,t),v(n,l,null),p(l,r),p(l,s),p(l,f),p(e,i),v(a,e,null),u=!0},p(c,$){const g={};$&4096&&(g.$$scope={dirty:$,ctx:c}),n.$set(g)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&h(e),k(n),k(a)}}}function Qi(o){let e,l,t,n,r,s=o[3](o[0].pollutant)+"",f,i,a,u,c,$,g,b,C,y,I,j,P;function N(M){o[5](M)}let O={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return o[0].pollutant!==void 0&&(O.value=o[0].pollutant),l=new Bt({props:O}),E.push(()=>B(l,"value",N)),{c(){e=S("div"),w(l.$$.fragment),n=L(),r=S("p"),f=T(s),i=L(),a=S("div"),u=S("label"),c=T(`Opacity
        `),$=S("input"),g=L(),b=S("img"),F($,"type","range"),F($,"min","0"),F($,"max","100"),Xt(b.src,C=o[4](o[0].pollutant))||F(b,"src",C),F(b,"width",150),F(b,"alt",y=`Legend for ${o[0].pollutant} layer`),F(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(M,R){d(M,e,R),v(l,e,null),p(e,n),p(e,r),p(r,f),p(e,i),p(e,a),p(a,u),p(u,c),p(u,$),tt($,o[0].opacity),p(e,g),p(e,b),I=!0,j||(P=[mt($,"change",o[6]),mt($,"input",o[6])],j=!0)},p(M,R){const D={};!t&&R&1&&(t=!0,D.value=M[0].pollutant,U(()=>t=!1)),l.$set(D),(!I||R&1)&&s!==(s=M[3](M[0].pollutant)+"")&&A(f,s),R&1&&tt($,M[0].opacity),(!I||R&1&&!Xt(b.src,C=M[4](M[0].pollutant)))&&F(b,"src",C),(!I||R&1&&y!==(y=`Legend for ${M[0].pollutant} layer`))&&F(b,"alt",y)},i(M){I||(m(l.$$.fragment,M),I=!0)},o(M){_(l.$$.fragment,M),I=!1},d(M){M&&h(e),k(l),j=!1,jr(P)}}}function Zi(o){let e,l;const t=[q(on),{paint:{"raster-opacity":o[0].opacity/100}},{layout:{visibility:o[0].show?"visible":"none"}}];let n={};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new uo({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&se(q(on)),s&1&&{paint:{"raster-opacity":r[0].opacity/100}},s&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Ki(o){let e,l,t,n,r;function s(i){o[7](i)}let f={name:on,title:Xi,$$slots:{controls:[Qi],help:[Vi]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new Go({props:{tiles:[o[1]],tileSize:256,$$slots:{default:[Zi]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&4097&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&2&&(c.tiles=[i[1]]),a&4097&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let on="pollution",Xi="Pollution";function xi(o){return o.show?`${o.pollutant}/${o.opacity}`:null}function ea(o){let[e,l]=o.split("/");return{show:!0,pollutant:e,opacity:parseInt(l)}}function ta(o,e,l){let t,n,r,f=bt(on,{show:!1,pollutant:"PM25_viridis",opacity:50},xi,ea);Y(o,f,C=>l(0,r=C));function i(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${r.pollutant}/MapServer/WMSServer`}function a(C){return t[1]}function u(C){let y=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${i()}?bbox={bbox-epsg-3857}&${y}`}function c(C){let y=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${i()}?${y}`}function $(C){o.$$.not_equal(r.pollutant,C)&&(r.pollutant=C,f.set(r))}function g(){r.opacity=xt(this.value),f.set(r)}function b(C){o.$$.not_equal(r.show,C)&&(r.show=C,f.set(r))}return o.$$.update=()=>{o.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[r.pollutant]),o.$$.dirty&1&&l(1,n=u(r.pollutant))},[r,n,f,a,c,$,g,b]}class na extends X{constructor(e){super(),x(this,e,ta,Ki,Q,{})}}function la(o){let e;return{c(){e=T(`DEFRA
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ra(o){let e,l,t,n,r,s,f,i,a,u;return s=new le({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[la]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),l.textContent=`This is the LAeq,16h dataset showing annual average noise levels in units
      of decibels for the 16-hour period between 7am and 11pm. Only roads in
      areas with at least 100,000 people are included.`,t=L(),n=S("p"),r=T("Data from June 2019, produced by "),w(s.$$.fragment),f=T(". See there for methodology details"),i=L(),w(a.$$.fragment),F(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(e,t),p(e,n),p(n,r),v(s,n,null),p(n,f),p(e,i),v(a,e,null),u=!0},p(c,$){const g={};$&32&&(g.$$scope={dirty:$,ctx:c}),s.$set(g)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&h(e),k(s),k(a)}}}function oa(o){let e,l,t;return l=new Be({props:{colorScale:o[1],limits:["55","65","75",">"]}}),{c(){e=S("span"),w(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function sa(o){let e,l=o[4].noiseclass+"",t,n,r=gl(o[4].noiseclass)+"",s,f;return{c(){e=S("p"),t=T(l),n=T(" dB ("),s=T(r),f=T(")")},m(i,a){d(i,e,a),p(e,t),p(e,n),p(e,s),p(e,f)},p(i,a){a&16&&l!==(l=i[4].noiseclass+"")&&A(t,l),a&16&&r!==(r=gl(i[4].noiseclass)+"")&&A(s,r)},d(i){i&&h(e)}}}function ia(o){let e,l;return e=new ie({props:{$$slots:{default:[sa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function aa(o){let e,l;const t=[q(yt),{sourceLayer:yt},{paint:{"fill-color":Ke(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":ee(.5,.8)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[ia]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Ae({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&3?ne(t,[s&0&&se(q(yt)),s&0&&{sourceLayer:yt},s&2&&{paint:{"fill-color":Ke(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":ee(.5,.8)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function fa(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:yt,title:ua,$$slots:{controls:[oa],help:[ra]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${yt}.pmtiles`,$$slots:{default:[aa]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let yt="road_noise",ua="Road noise";function gl(o){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[o]}function ca(o,e,l){let t,n=[V.sequential_low_to_high[0],V.sequential_low_to_high[2],V.sequential_low_to_high[4]],r=$e(yt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class pa extends X{constructor(e){super(),x(this,e,ca,fa,Q,{})}}function dl(o,e,l){const t=o.slice();return t[10]=e[l][0],t[11]=e[l][1],t[12]=e[l][2],t[13]=e,t[14]=l,t}function $a(o){let e;return{c(){e=T(`rowmaps.com
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ma(o){let e,l,t,n,r,s,f,i,a,u;return n=new le({props:{href:"https://www.rowmaps.com",$$slots:{default:[$a]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),t=T("These public rights of way are aggregated from 137 authorities, thanks to "),w(n.$$.fragment),r=T(`. The licenses for each authority may vary, but most use
      the Open Government License v3 or Creative Commons.`),s=L(),f=S("p"),f.textContent="This data is current as of 15 November, 2024.",i=L(),w(a.$$.fragment),F(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(l,t),v(n,l,null),p(l,r),p(e,s),p(e,f),p(e,i),v(a,e,null),u=!0},p(c,$){const g={};$&32768&&(g.$$scope={dirty:$,ctx:c}),n.$set(g)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&h(e),k(n),k(a)}}}function _a(o){let e,l,t=o[11]+"",n,r,s;return e=new Se({props:{color:o[12]}}),{c(){w(e.$$.fragment),l=L(),n=T(t),r=L()},m(f,i){v(e,f,i),d(f,l,i),d(f,n,i),d(f,r,i),s=!0},p:Z,i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),s=!1},d(f){f&&(h(l),h(n),h(r)),k(e,f)}}}function hl(o){let e,l,t;function n(s){o[4](s,o[10])}let r={$$slots:{default:[_a]},$$scope:{ctx:o}};return o[0][o[10]]!==void 0&&(r.checked=o[0][o[10]]),e=new ze({props:r}),E.push(()=>B(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){o=s;const i={};f&32768&&(i.$$scope={dirty:f,ctx:o}),!l&&f&5&&(l=!0,i.checked=o[0][o[10]],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function ga(o){let e,l,t=me(o[2]),n=[];for(let s=0;s<t.length;s+=1)n[s]=hl(dl(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=_e()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);d(s,e,f),l=!0},p(s,f){if(f&5){t=me(s[2]);let i;for(i=0;i<t.length;i+=1){const a=dl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=hl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&h(e),He(n,s)}}}function da(o){let e,l,t;return l=new Fe({props:{small:!0,$$slots:{default:[ga]},$$scope:{ctx:o}}}),{c(){e=S("div"),w(l.$$.fragment),F(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p(n,r){const s={};r&32769&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function ha(o){let e,l=o[9].kind+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&512&&l!==(l=n[9].kind+"")&&A(t,l)},d(n){n&&h(e)}}}function ba(o){let e,l;return e=new ie({props:{$$slots:{default:[ha,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&33280&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function wa(o){let e,l;const t=[q(St),{sourceLayer:St},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Ke(["get","kind"],{footpath:V.rights_of_way.footpath,bridleway:V.rights_of_way.bridleway,"restricted byway":V.rights_of_way.restricted_byway,"byway open to all traffic":V.rights_of_way.boat},"red"),"line-width":Ge,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])}];let n={$$slots:{default:[ba]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&9?ne(t,[s&0&&se(q(St)),s&0&&{sourceLayer:St},t[2],t[3],t[4],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&9&&{filter:r[3](r[0])}]):{};s&32768&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function va(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:St,title:ka,$$slots:{controls:[da],help:[ma]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${St}.pmtiles`,$$slots:{default:[wa]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32769&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&32769&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let St="rights_of_way",ka="Rights of Way";function ya(o){return{show:!0,footpath:o.includes("footpath"),bridleway:o.includes("bridleway"),restricted_byway:o.includes("restricted_byway"),boat:o.includes("boat")}}function Sa(o,e,l){let t,n=["footpath","bridleway","restricted_byway","boat"],r={show:!1,footpath:!0,bridleway:!0,restricted_byway:!0,boat:!0};function s($){return $.show?n.filter(g=>$[g]).join(","):null}let f=bt(St,r,s,ya);Y(o,f,$=>l(0,t=$));let i=[["footpath","Footpath",V.rights_of_way.footpath],["bridleway","Bridleway",V.rights_of_way.bridleway],["restricted_byway","Restricted byway",V.rights_of_way.restricted_byway],["boat","Byway open to all traffic",V.rights_of_way.boat]];function a($){let g=n.filter(b=>$[b]).map(b=>({footpath:"footpath",bridleway:"bridleway",restricted_byway:"restricted byway",boat:"byway open to all traffic"})[b]);return["in",["get","kind"],["literal",g]]}function u($,g){o.$$.not_equal(t[g],$)&&(t[g]=$,f.set(t))}function c($){o.$$.not_equal(t.show,$)&&(t.show=$,f.set(t))}return[t,f,i,a,u,c]}class Ta extends X{constructor(e){super(),x(this,e,Sa,va,Q,{})}}function Ca(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function La(o){let e;return{c(){e=T(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ia(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[La]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=T("Data from "),w(n.$$.fragment),r=T(", as of May 2023."),s=L(),w(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),v(n,l,null),p(l,r),p(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function Ma(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&h(e)}}}function Oa(o){let e,l;return e=new ie({props:{$$slots:{default:[Ma,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ja(o){let e,l,t,n;const r=[q(Qe),{sourceLayer:Qe},{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Oa]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new Ae({props:s}),e.$on("click",Ra);const f=[q(`${Qe}-outline`),{sourceLayer:Qe},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&se(q(Qe)),u&0&&{sourceLayer:Qe},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?ne(f,[u&0&&se(q(`${Qe}-outline`)),u&0&&{sourceLayer:Qe},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&h(l),k(e,a),k(t,a)}}}function Na(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Qe,title:Pa,$$slots:{help:[Ia],icon:[Ca]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Qe}.pmtiles`,$$slots:{default:[ja]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Qe="wards",Pa="Wards";function Ra(o){let e=encodeURIComponent(o.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Da(o,e,l){let t,n=V.wards,r=$e(Qe);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Fa extends X{constructor(e){super(),x(this,e,Da,Na,Q,{})}}function Ga(o){let e;return{c(){e=T("Open Data Commons Open Database License")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Aa(o){let e,l,t,n;return t=new le({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Ga]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=T("License: "),w(t.$$.fragment)},m(r,s){d(r,e,s),p(e,l),v(t,e,null),n=!0},p(r,[s]){const f={};s&1&&(f.$$scope={dirty:s,ctx:r}),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){_(t.$$.fragment,r),n=!1},d(r){r&&h(e),k(t)}}}class lt extends X{constructor(e){super(),x(this,e,null,Aa,Q,{})}}function qa(o){let e,l,t;return l=new Se({props:{color:V.bus_route_with_lane}}),{c(){e=S("span"),w(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function za(o){let e;return{c(){e=T(`GTFS
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ha(o){let e,l,t,n,r,s,f,i,a,u;return s=new le({props:{href:"https://gtfs.org",$$slots:{default:[za]},$$scope:{ctx:o}}}),a=new lt({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows all roads with at least one bus route crossing them. It also
      shows whether the road has a bus lane or not.`,t=L(),n=S("p"),r=T("Note this data is from OpenStreetMap (as of 20 October 2024), not "),w(s.$$.fragment),f=T(`, and doesn't include which routes are run or the frequency
      of service.`),i=L(),w(a.$$.fragment),F(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(e,t),p(e,n),p(n,r),v(s,n,null),p(n,f),p(e,i),v(a,e,null),u=!0},p(c,$){const g={};$&16&&(g.$$scope={dirty:$,ctx:c}),s.$set(g)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&h(e),k(s),k(a)}}}function Ea(o){let e;return{c(){e=S("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ba(o){let e;return{c(){e=S("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ua(o){let e;function l(r,s){return r[3].has_bus_lane?Ba:Ea}let t=l(o),n=t(o);return{c(){n.c(),e=_e()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function Wa(o){let e,l;return e=new ie({props:{$$slots:{default:[Ua,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ya(o){let e,l;const t=[q(Tt),{sourceLayer:Tt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],V.bus_route_with_lane,V.bus_route_without_lane],"line-width":5,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Wa]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&se(q(Tt)),s&0&&{sourceLayer:Tt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Ja(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Tt,title:Va,$$slots:{help:[Ha],icon:[qa]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Tt}.pmtiles`,$$slots:{default:[Ya]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Tt="bus_routes",Va="Bus routes";function Qa(o,e,l){let t,n=$e(Tt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Za extends X{constructor(e){super(),x(this,e,Qa,Ja,Q,{})}}function bl(o){const e=af(o[9]);o[10]=e[0],o[11]=e[1],o[12]=e[2]}function wl(o,e,l){const t=o.slice();return t[10]=e[l][0],t[13]=e[l][1],t[14]=e[l][2],t[15]=e,t[16]=l,t}function Ka(o){let e,l,t,n,r,s,f,i,a;return i=new lt({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
      of 20 October 2024).`,t=L(),n=S("ul"),n.innerHTML=`<li><b>Separated tracks</b>
        include fully or partly segregated cycletracks alongside a carriageway, stepped
        cycletracks, and tracks off the carriageway entirely. They&#39;re also separated
        from foot traffic.</li> <li><b>Unprotected lanes</b>
        are mandatory or advisory lanes on the carriageway, without any physical
        protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
        paths are split between cycle and foot traffic, and are separated from motor
        traffic somehow. There can be segregation between cyclists and pedestrians
        or not.</li>`,r=L(),s=S("p"),s.textContent=`Note there are many known limitations with this layer. Data in
      OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
      processing is also imperfect. You can click a segment to see full
      OpenStreetMap data. Please do report issues with the classification or
      data.`,f=L(),w(i.$$.fragment),F(e,"slot","help")},m(u,c){d(u,e,c),p(e,l),p(e,t),p(e,n),p(e,r),p(e,s),p(e,f),v(i,e,null),a=!0},p:Z,i(u){a||(m(i.$$.fragment,u),a=!0)},o(u){_(i.$$.fragment,u),a=!1},d(u){u&&h(e),k(i)}}}function Xa(o){let e,l,t=o[13]+"",n,r,s;return e=new Se({props:{color:o[14]}}),{c(){w(e.$$.fragment),l=L(),n=T(t),r=L()},m(f,i){v(e,f,i),d(f,l,i),d(f,n,i),d(f,r,i),s=!0},p:Z,i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),s=!1},d(f){f&&(h(l),h(n),h(r)),k(e,f)}}}function vl(o){let e,l,t;function n(s){o[4](s,o[10])}let r={$$slots:{default:[Xa]},$$scope:{ctx:o}};return o[0][o[10]]!==void 0&&(r.checked=o[0][o[10]]),e=new ze({props:r}),E.push(()=>B(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){o=s;const i={};f&131072&&(i.$$scope={dirty:f,ctx:o}),!l&&f&5&&(l=!0,i.checked=o[0][o[10]],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function xa(o){let e,l,t=me(o[2]),n=[];for(let s=0;s<t.length;s+=1)n[s]=vl(wl(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=_e()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);d(s,e,f),l=!0},p(s,f){if(f&5){t=me(s[2]);let i;for(i=0;i<t.length;i+=1){const a=wl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=vl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&h(e),He(n,s)}}}function ef(o){let e,l,t;return l=new Fe({props:{small:!0,$$slots:{default:[xa]},$$scope:{ctx:o}}}),{c(){e=S("div"),w(l.$$.fragment),F(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p(n,r){const s={};r&131073&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function tf(o){bl(o);let e,l=o[10]+"",t,n,r,s,f,i=o[11]+"",a,u,c,$,g=o[12]+"",b;return{c(){e=S("h2"),t=T(l),n=L(),r=S("p"),s=T("Direction: "),f=S("b"),a=L(),u=S("p"),c=T("Width: "),$=S("b"),b=T(g)},m(C,y){d(C,e,y),p(e,t),d(C,n,y),d(C,r,y),p(r,s),p(r,f),f.innerHTML=i,d(C,a,y),d(C,u,y),p(u,c),p(u,$),p($,b)},p(C,y){bl(C),y&512&&l!==(l=C[10]+"")&&A(t,l),y&512&&i!==(i=C[11]+"")&&(f.innerHTML=i),y&512&&g!==(g=C[12]+"")&&A(b,g)},d(C){C&&(h(e),h(n),h(r),h(a),h(u))}}}function nf(o){let e,l;return e=new ie({props:{$$slots:{default:[tf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&131584&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function lf(o){let e,l;const t=[q(Ct),{sourceLayer:Ct},{paint:{"line-color":Ke(["get","kind"],{track:V.cycle_paths.track,lane:V.cycle_paths.lane,shared_use_segregated:V.cycle_paths.shared_use_segregated,shared_use_unsegregated:V.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ge,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[nf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new ge({props:n}),e.$on("click",ff),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&9?ne(t,[s&0&&se(q(Ct)),s&0&&{sourceLayer:Ct},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&9&&{filter:r[3](r[0])},t[5],t[6],t[7]]):{};s&131072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function rf(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Ct,title:of,$$slots:{controls:[ef],help:[Ka]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Ct}.pmtiles`,$$slots:{default:[lf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&131073&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&131073&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Ct="cycle_paths",of="Cycle paths";function sf(o){return{show:!0,track:o.includes("track"),lane:o.includes("lane"),shared_use_segregated:o.includes("shared_use_segregated"),shared_use_unsegregated:o.includes("shared_use_unsegregated")}}function af(o){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[o.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[o.direction],t=o.width=="unknown"?"unknown":`${o.width} meters`;return[e,`${l} ${o.direction}`,t]}function ff(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function uf(o,e,l){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],r={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s($){return $.show?n.filter(g=>$[g]).join(","):null}let f=bt(Ct,r,s,sf);Y(o,f,$=>l(0,t=$));let i=[["track","Separated tracks",V.cycle_paths.track],["lane","Unprotected lanes",V.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",V.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",V.cycle_paths.shared_use_unsegregated]];function a($){let g=n.filter(b=>$[b]);return["in",["get","kind"],["literal",g]]}function u($,g){o.$$.not_equal(t[g],$)&&(t[g]=$,f.set(t))}function c($){o.$$.not_equal(t.show,$)&&(t.show=$,f.set(t))}return[t,f,i,a,u,c]}class cf extends X{constructor(e){super(),x(this,e,uf,rf,Q,{})}}function pf(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function $f(o){let e;return{c(){e=T(`Major Road Network
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function mf(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[$f]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=T("Data from the "),w(n.$$.fragment),r=T(", as of September 2021."),s=L(),w(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),v(n,l,null),p(l,r),p(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function _f(o){let e,l=(o[4].name??"Unknown MRN road")+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown MRN road")+"")&&A(t,l)},d(n){n&&h(e)}}}function gf(o){let e,l;return e=new ie({props:{$$slots:{default:[_f,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function df(o){let e,l;const t=[q(Lt),{sourceLayer:Lt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[gf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&3?ne(t,[s&0&&se(q(Lt)),s&0&&{sourceLayer:Lt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function hf(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Lt,title:bf,$$slots:{help:[mf],icon:[pf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Lt}.pmtiles`,$$slots:{default:[df]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Lt="mrn",bf="Major Road Network";function wf(o,e,l){let t,n=V.mrn,r=$e(Lt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class vf extends X{constructor(e){super(),x(this,e,wf,hf,Q,{})}}function kf(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function yf(o){let e;return{c(){e=T(`OS Open Roads
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Sf(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[yf]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=T("Data from "),w(n.$$.fragment),r=T(`, as of December 2023. The SRN is equivalent to trunk
      roads.`),s=L(),w(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),v(n,l,null),p(l,r),p(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function Tf(o){let e,l=(o[4].name??"Unknown SRN road")+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown SRN road")+"")&&A(t,l)},d(n){n&&h(e)}}}function Cf(o){let e,l;return e=new ie({props:{$$slots:{default:[Tf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Lf(o){let e,l;const t=[q(It),{sourceLayer:It},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Cf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&3?ne(t,[s&0&&se(q(It)),s&0&&{sourceLayer:It},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function If(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:It,title:Mf,$$slots:{help:[Sf],icon:[kf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${It}.pmtiles`,$$slots:{default:[Lf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let It="srn",Mf="Strategic Road Network";function Of(o,e,l){let t,n=V.srn,r=$e(It);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class jf extends X{constructor(e){super(),x(this,e,Of,If,Q,{})}}function Nf(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Pf(o){let e;return{c(){e=T(`National Cycle Network
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Rf(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Pf]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=T("Data from Sustrans about the "),w(n.$$.fragment),r=T(", downloaded on 22/01/2024."),s=L(),w(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),v(n,l,null),p(l,r),p(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function kl(o){let e,l,t,n=o[4].Desc_+"",r;return{c(){e=S("li"),l=T("Description: "),t=S("b"),r=T(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].Desc_+"")&&A(r,n)},d(s){s&&h(e)}}}function yl(o){let e,l,t,n=o[4].Greenway+"",r;return{c(){e=S("li"),l=T("Is greenway: "),t=S("b"),r=T(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].Greenway+"")&&A(r,n)},d(s){s&&h(e)}}}function Sl(o){let e,l,t,n=o[4].RouteType+"",r;return{c(){e=S("li"),l=T("Route type: "),t=S("b"),r=T(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteType+"")&&A(r,n)},d(s){s&&h(e)}}}function Tl(o){let e,l,t,n=o[4].RouteNo+"",r;return{c(){e=S("li"),l=T("Route number: "),t=S("b"),r=T(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteNo+"")&&A(r,n)},d(s){s&&h(e)}}}function Cl(o){let e,l,t,n=o[4].RouteCat+"",r;return{c(){e=S("li"),l=T("Route Category: "),t=S("b"),r=T(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteCat+"")&&A(r,n)},d(s){s&&h(e)}}}function Ll(o){let e,l,t,n=o[4].OpenStatus+"",r;return{c(){e=S("li"),l=T("Open Status: "),t=S("b"),r=T(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].OpenStatus+"")&&A(r,n)},d(s){s&&h(e)}}}function Il(o){let e,l,t,n=o[4].Surface+"",r;return{c(){e=S("li"),l=T("Surface: "),t=S("b"),r=T(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].Surface+"")&&A(r,n)},d(s){s&&h(e)}}}function Ml(o){let e,l,t,n=o[4].Quality+"",r;return{c(){e=S("li"),l=T("Quality: "),t=S("b"),r=T(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].Quality+"")&&A(r,n)},d(s){s&&h(e)}}}function Ol(o){let e,l,t,n=o[4].RoadClass+"",r;return{c(){e=S("li"),l=T("Road Class: "),t=S("b"),r=T(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].RoadClass+"")&&A(r,n)},d(s){s&&h(e)}}}function Df(o){let e,l,t,n,r,s,f,i,a,u=o[4].Desc_&&kl(o),c=o[4].Greenway&&yl(o),$=o[4].RouteType&&Sl(o),g=o[4].RouteNo&&Tl(o),b=o[4].RouteCat&&Cl(o),C=o[4].OpenStatus&&Ll(o),y=o[4].Surface&&Il(o),I=o[4].Quality&&Ml(o),j=o[4].RoadClass&&Ol(o);return{c(){e=S("ul"),u&&u.c(),l=L(),c&&c.c(),t=L(),$&&$.c(),n=L(),g&&g.c(),r=L(),b&&b.c(),s=L(),C&&C.c(),f=L(),y&&y.c(),i=L(),I&&I.c(),a=L(),j&&j.c()},m(P,N){d(P,e,N),u&&u.m(e,null),p(e,l),c&&c.m(e,null),p(e,t),$&&$.m(e,null),p(e,n),g&&g.m(e,null),p(e,r),b&&b.m(e,null),p(e,s),C&&C.m(e,null),p(e,f),y&&y.m(e,null),p(e,i),I&&I.m(e,null),p(e,a),j&&j.m(e,null)},p(P,N){P[4].Desc_?u?u.p(P,N):(u=kl(P),u.c(),u.m(e,l)):u&&(u.d(1),u=null),P[4].Greenway?c?c.p(P,N):(c=yl(P),c.c(),c.m(e,t)):c&&(c.d(1),c=null),P[4].RouteType?$?$.p(P,N):($=Sl(P),$.c(),$.m(e,n)):$&&($.d(1),$=null),P[4].RouteNo?g?g.p(P,N):(g=Tl(P),g.c(),g.m(e,r)):g&&(g.d(1),g=null),P[4].RouteCat?b?b.p(P,N):(b=Cl(P),b.c(),b.m(e,s)):b&&(b.d(1),b=null),P[4].OpenStatus?C?C.p(P,N):(C=Ll(P),C.c(),C.m(e,f)):C&&(C.d(1),C=null),P[4].Surface?y?y.p(P,N):(y=Il(P),y.c(),y.m(e,i)):y&&(y.d(1),y=null),P[4].Quality?I?I.p(P,N):(I=Ml(P),I.c(),I.m(e,a)):I&&(I.d(1),I=null),P[4].RoadClass?j?j.p(P,N):(j=Ol(P),j.c(),j.m(e,null)):j&&(j.d(1),j=null)},d(P){P&&h(e),u&&u.d(),c&&c.d(),$&&$.d(),g&&g.d(),b&&b.d(),C&&C.d(),y&&y.d(),I&&I.d(),j&&j.d()}}}function Ff(o){let e,l;return e=new ie({props:{$$slots:{default:[Df,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Gf(o){let e,l;const t=[q(Mt),{sourceLayer:Mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":4,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Ff]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&3?ne(t,[s&0&&se(q(Mt)),s&0&&{sourceLayer:Mt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":4,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Af(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Mt,title:qf,$$slots:{help:[Rf],icon:[Nf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Mt}.pmtiles`,$$slots:{default:[Gf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Mt="national_cycle_network",qf="National Cycle Network";function zf(o,e,l){let t,n=V.national_cycle_network,r=$e(Mt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Hf extends X{constructor(e){super(),x(this,e,zf,Af,Q,{})}}function jl(o,e,l){const t=o.slice();return t[7]=e[l][0],t[8]=e[l][1],t[9]=e[l][2],t}function Ef(o){let e;return{c(){e=T(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Bf(o){let e,l,t,n,r,s,f,i,a,u,c,$;return u=new le({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Ef]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows the average and minimum pavement width (in meters) from
      Ordnance Survey. Because the shape of pavement may vary along a road, both
      average and minimum are reported. Measurements may be available for the
      left side of the road, the right, or both. The coloring shows the larger
      of the two average widths, and the line thickness has no meaning. Hover
      over a line to see if there's pavement on one or both sides of the road.
      (You won't be able to distinguish left and right though; use the OS Road
      basemap instead.)`,t=L(),n=S("p"),n.textContent=`Note these measurements are difficult to interpret near dual carriageways
      (shown as parallel lines).`,r=L(),s=S("p"),s.textContent="Data valid as of 1 January, 2024",f=L(),i=S("p"),a=T(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),w(u.$$.fragment),c=T("."),F(e,"slot","help")},m(g,b){d(g,e,b),p(e,l),p(e,t),p(e,n),p(e,r),p(e,s),p(e,f),p(e,i),p(i,a),v(u,i,null),p(i,c),$=!0},p(g,b){const C={};b&4096&&(C.$$scope={dirty:b,ctx:g}),u.$set(C)},i(g){$||(m(u.$$.fragment,g),$=!0)},o(g){_(u.$$.fragment,g),$=!1},d(g){g&&h(e),k(u)}}}function Uf(o){let e,l,t;return l=new Be({props:{colorScale:o[1],limits:o[3]}}),{c(){e=S("span"),w(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Wf(o){let e,l,t=sn(o[6].angle+o[9])+"",n;return{c(){e=S("p"),l=new Et(!1),n=T(` side of the road: no pavement
          `),l.a=n},m(r,s){d(r,e,s),l.m(t,e),p(e,n)},p(r,s){s&64&&t!==(t=sn(r[6].angle+r[9])+"")&&l.p(t)},d(r){r&&h(e)}}}function Yf(o){let e,l,t=sn(o[6].angle+o[9])+"",n,r,s=o[7]+"",f,i,a,u=o[8]+"",c,$;return{c(){e=S("p"),l=new Et(!1),n=T(` side of the road:
            `),r=S("b"),f=T(s),i=T(`
            m average,
            `),a=S("b"),c=T(u),$=T(`
            m minimum
          `),l.a=n},m(g,b){d(g,e,b),l.m(t,e),p(e,n),p(e,r),p(r,f),p(e,i),p(e,a),p(a,c),p(e,$)},p(g,b){b&64&&t!==(t=sn(g[6].angle+g[9])+"")&&l.p(t),b&64&&s!==(s=g[7]+"")&&A(f,s),b&64&&u!==(u=g[8]+"")&&A(c,u)},d(g){g&&h(e)}}}function Nl(o){let e;function l(r,s){return r[7]?Yf:Wf}let t=l(o),n=t(o);return{c(){n.c(),e=_e()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function Jf(o){let e,l=me([[o[6].left_average,o[6].left_minimum,-90],[o[6].right_average,o[6].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=Nl(jl(o,l,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=_e()},m(n,r){for(let s=0;s<2;s+=1)t[s]&&t[s].m(n,r);d(n,e,r)},p(n,r){if(r&64){l=me([[n[6].left_average,n[6].left_minimum,-90],[n[6].right_average,n[6].right_minimum,90]]);let s;for(s=0;s<2;s+=1){const f=jl(n,l,s);t[s]?t[s].p(f,r):(t[s]=Nl(f),t[s].c(),t[s].m(e.parentNode,e))}for(;s<2;s+=1)t[s].d(1)}},d(n){n&&h(e),He(t,n)}}}function Vf(o){let e,l;return e=new ie({props:{openOn:"hover",$$slots:{default:[Jf,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&4160&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Qf(o){let e,l;const t=[q(Ot),{sourceLayer:Ot},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ve(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],o[2],o[1]),"line-width":Ge,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Vf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&se(q(Ot)),s&0&&{sourceLayer:Ot},t[2],t[3],s&6&&{paint:{"line-color":ve(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":Ge,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&4096&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Zf(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Ot,title:Kf,$$slots:{controls:[Uf],help:[Bf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${tn()}/v1/${Ot}.pmtiles`,$$slots:{default:[Qf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&4096&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&4097&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Ot="pavement_widths",Kf="OS Pavement widths";function Xf(o){let e=Math.floor((o+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function sn(o){return`${Xf(o)} <span style="display: inline-block; rotate: ${o}deg">⬆</span>`}function xf(o,e,l){let t,n=["black","red","orange","green"],r=[0,1.5,2,3,100],s=["0-1.5m","1.5-2m","2-3m",">3m"],f=$e(Ot);Y(o,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,s,f,i]}class eu extends X{constructor(e){super(),x(this,e,xf,Zf,Q,{})}}function tu(o){let e;return{c(){e=T("the PCT website")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function nu(o){let e;return{c(){e=T("2017 journal article")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function lu(o){let e,l,t,n,r,s,f,i,a,u,c,$;return i=new le({props:{href:"https://www.pct.bike",$$slots:{default:[tu]},$$scope:{ctx:o}}}),u=new le({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[nu]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),l.textContent=`The PCT shows major links on the transport network on which there is high
      latent demand for cycling under scenarios of change, based on the
      "fastest" routes from CycleStreets. Counts approximate daily rush hour
      traffic levels.`,t=L(),n=S("p"),n.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
      Please use this layer with caution.`,r=L(),s=S("p"),f=T("See "),w(i.$$.fragment),a=T(" and "),w(u.$$.fragment),c=T(" for details on methodology and data sources."),F(e,"slot","help")},m(g,b){d(g,e,b),p(e,l),p(e,t),p(e,n),p(e,r),p(e,s),p(s,f),v(i,s,null),p(s,a),v(u,s,null),p(s,c),$=!0},p(g,b){const C={};b&1024&&(C.$$scope={dirty:b,ctx:g}),i.$set(C);const y={};b&1024&&(y.$$scope={dirty:b,ctx:g}),u.$set(y)},i(g){$||(m(i.$$.fragment,g),m(u.$$.fragment,g),$=!0)},o(g){_(i.$$.fragment,g),_(u.$$.fragment,g),$=!1},d(g){g&&h(e),k(i),k(u)}}}function ru(o){let e,l,t,n,r,s,f,i,a;l=new Be({props:{colorScale:o[1],limits:o[2]}});function u(b){o[5](b)}let c={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};o[0].tripPurpose!==void 0&&(c.value=o[0].tripPurpose),n=new Sn({props:c}),E.push(()=>B(n,"value",u));function $(b){o[6](b)}let g={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return o[0].scenario!==void 0&&(g.value=o[0].scenario),f=new Bt({props:g}),E.push(()=>B(f,"value",$)),{c(){e=S("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),s=L(),w(f.$$.fragment),F(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(b,C){d(b,e,C),v(l,e,null),p(e,t),v(n,e,null),p(e,s),v(f,e,null),a=!0},p(b,C){const y={};!r&&C&1&&(r=!0,y.value=b[0].tripPurpose,U(()=>r=!1)),n.$set(y);const I={};!i&&C&1&&(i=!0,I.value=b[0].scenario,U(()=>i=!1)),f.$set(I)},i(b){a||(m(l.$$.fragment,b),m(n.$$.fragment,b),m(f.$$.fragment,b),a=!0)},o(b){_(l.$$.fragment,b),_(n.$$.fragment,b),_(f.$$.fragment,b),a=!1},d(b){b&&h(e),k(l),k(n),k(f)}}}function ou(o){let e,l=o[4](o[9])+"",t;return{c(){e=new Et(!1),t=_e(),e.a=t},m(n,r){e.m(l,n,r),d(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(h(t),e.d())}}}function su(o){let e,l;return e=new ie({props:{$$slots:{default:[ou,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function iu(o){let e,l;const t=[q(st),{sourceLayer:st},{paint:{"line-color":ve(["get",o[0].scenario],o[2],o[1]),"line-width":Ge,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==st?"visible":"none"}}];let n={$$slots:{default:[su]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&se(q(st)),s&0&&{sourceLayer:st},s&7&&{paint:{"line-color":ve(["get",r[0].scenario],r[2],r[1]),"line-width":Ge,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==st?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function au(o){let e,l=o[4](o[9])+"",t;return{c(){e=new Et(!1),t=_e(),e.a=t},m(n,r){e.m(l,n,r),d(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(h(t),e.d())}}}function fu(o){let e,l;return e=new ie({props:{$$slots:{default:[au,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function uu(o){let e,l;const t=[q(wt),{sourceLayer:wt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ve(["get",o[0].scenario],o[2],o[1]),"line-width":Ge,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==wt?"visible":"none"}}];let n={$$slots:{default:[fu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&se(q(wt)),s&0&&{sourceLayer:wt},t[2],t[3],s&7&&{paint:{"line-color":ve(["get",r[0].scenario],r[2],r[1]),"line-width":Ge,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==wt?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function cu(o){let e,l,t,n,r,s,f;function i(u){o[7](u)}let a={name:zr,title:pu,$$slots:{controls:[ru],help:[lu]},$$scope:{ctx:o}};return o[0].show!==void 0&&(a.show=o[0].show),e=new fe({props:a}),E.push(()=>B(e,"show",i)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${st}.pmtiles`,$$slots:{default:[iu]},$$scope:{ctx:o}}}),s=new pe({props:{url:`pmtiles://${ce()}/v1/${wt}.pmtiles`,$$slots:{default:[uu]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment)},m(u,c){v(e,u,c),d(u,t,c),v(n,u,c),d(u,r,c),v(s,u,c),f=!0},p(u,[c]){const $={};c&1025&&($.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,$.show=u[0].show,U(()=>l=!1)),e.$set($);const g={};c&1025&&(g.$$scope={dirty:c,ctx:u}),n.$set(g);const b={};c&1025&&(b.$$scope={dirty:c,ctx:u}),s.$set(b)},i(u){f||(m(e.$$.fragment,u),m(n.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){_(e.$$.fragment,u),_(n.$$.fragment,u),_(s.$$.fragment,u),f=!1},d(u){u&&(h(t),h(r)),k(e,u),k(n,u),k(s,u)}}}let zr="pct",st="pct_commute",wt="pct_school",pu="Propensity to Cycle Tool";function $u(o){return o.show?`${o.tripPurpose}/${o.scenario}`:null}function mu(o){let[e,l]=o.split("/");return{show:!0,tripPurpose:e,scenario:l}}function _u(o,e,l){let t,n=V.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],f=bt(zr,{show:!1,tripPurpose:st,scenario:"baseline"},$u,mu);Y(o,f,$=>l(0,t=$));function i($){let g=$.baseline,b=$.gov_target,C=$.go_dutch,y=`<h2>Trip purpose: ${t.tripPurpose==st?"commuting":"school"}</h2>`;if(y+=`<p>Baseline (2011): <b>${g.toLocaleString()}</b></p>`,g==0)y+=`<p>Government target (2025): <b>${b.toLocaleString()}</b></p>`,y+=`<p>Go Dutch: <b>${C.toLocaleString()}</b></p>`;else{let I=(b/g).toFixed(1),j=(C/g).toFixed(1);y+=`<p>Government target (2025): ${b.toLocaleString()} (<b>${I}x</b> of baseline)</p>`,y+=`<p>Go Dutch: ${C.toLocaleString()} (<b>${j}x</b> of baseline)</p>`}return y}function a($){o.$$.not_equal(t.tripPurpose,$)&&(t.tripPurpose=$,f.set(t))}function u($){o.$$.not_equal(t.scenario,$)&&(t.scenario=$,f.set(t))}function c($){o.$$.not_equal(t.show,$)&&(t.show=$,f.set(t))}return[t,n,r,f,i,a,u,c]}class gu extends X{constructor(e){super(),x(this,e,_u,cu,Q,{})}}function du(o){let e;return{c(){e=T("Basemap")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function hu(o){let e;return{c(){e=T(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function bu(o){let e,l,t,n,r,s,f,i,a,u,c,$,g;return n=new le({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[du]},$$scope:{ctx:o}}}),c=new le({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[hu]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),t=T("The average speed data is collected over a six-month period by "),w(n.$$.fragment),r=T(` from 135,000 vehicle telematic systems and provided through
      Ordnance Survey. The averages are grouped by different time periods for weekdays
      and weekends. This map shows the highest average.`),s=L(),f=S("p"),f.textContent="Data valid as of 1 September, 2023",i=L(),a=S("p"),u=T(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),w(c.$$.fragment),$=T("."),F(e,"slot","help")},m(b,C){d(b,e,C),p(e,l),p(l,t),v(n,l,null),p(l,r),p(e,s),p(e,f),p(e,i),p(e,a),p(a,u),v(c,a,null),p(a,$),g=!0},p(b,C){const y={};C&512&&(y.$$scope={dirty:C,ctx:b}),n.$set(y);const I={};C&512&&(I.$$scope={dirty:C,ctx:b}),c.$set(I)},i(b){g||(m(n.$$.fragment,b),m(c.$$.fragment,b),g=!0)},o(b){_(n.$$.fragment,b),_(c.$$.fragment,b),g=!1},d(b){b&&h(e),k(n),k(c)}}}function wu(o){let e,l,t,n,r,s;l=new Be({props:{colorScale:o[1],limits:o[2]}});function f(a){o[5](a)}let i={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return o[0].kind!==void 0&&(i.value=o[0].kind),n=new Sn({props:i}),E.push(()=>B(n,"value",f)),{c(){e=S("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),F(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(a,u){d(a,e,u),v(l,e,null),p(e,t),v(n,e,null),s=!0},p(a,u){const c={};!r&&u&1&&(r=!0,c.value=a[0].kind,U(()=>r=!1)),n.$set(c)},i(a){s||(m(l.$$.fragment,a),m(n.$$.fragment,a),s=!0)},o(a){_(l.$$.fragment,a),_(n.$$.fragment,a),s=!1},d(a){a&&h(e),k(l),k(n)}}}function vu(o){let e,l,t=o[8].indicative_mph+"",n,r,s,f,i,a=o[8].highest_mph+"",u,c,$=o[4][o[8].highest_description]+"",g,b;return{c(){e=S("p"),l=T("Posted speed limit: "),n=T(t),r=T(" mph"),s=L(),f=S("p"),i=T("Highest average speed: "),u=T(a),c=T(" mph (during "),g=T($),b=T(")")},m(C,y){d(C,e,y),p(e,l),p(e,n),p(e,r),d(C,s,y),d(C,f,y),p(f,i),p(f,u),p(f,c),p(f,g),p(f,b)},p(C,y){y&256&&t!==(t=C[8].indicative_mph+"")&&A(n,t),y&256&&a!==(a=C[8].highest_mph+"")&&A(u,a),y&256&&$!==($=C[4][C[8].highest_description]+"")&&A(g,$)},d(C){C&&(h(e),h(s),h(f))}}}function ku(o){let e,l;return e=new ie({props:{$$slots:{default:[vu,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&768&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function yu(o){let e,l;const t=[q(jt),{sourceLayer:jt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ve(["get",o[0].kind],o[2],o[1]),"line-width":Ge,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}}];let n={$$slots:{default:[ku]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&se(q(jt)),s&0&&{sourceLayer:jt},t[2],t[3],s&7&&{paint:{"line-color":ve(["get",r[0].kind],r[2],r[1]),"line-width":Ge,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Su(o){let e,l,t,n,r;function s(i){o[6](i)}let f={name:jt,title:Tu,$$slots:{controls:[wu],help:[bu]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${tn()}/v1/${jt}.pmtiles`,$$slots:{default:[yu]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&513&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let jt="road_speeds",Tu="OS Speeds";function Cu(o){return o.show?o.kind:null}function Lu(o){return{show:!0,kind:o}}function Iu(o,e,l){let t,n=V.sequential_low_to_high,r=[0,20,30,40,50,90],f=bt(jt,{show:!1,kind:"indicative_mph"},Cu,Lu);Y(o,f,c=>l(0,t=c));let i={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function a(c){o.$$.not_equal(t.kind,c)&&(t.kind=c,f.set(t))}function u(c){o.$$.not_equal(t.show,c)&&(t.show=c,f.set(t))}return[t,n,r,f,i,a,u]}class Mu extends X{constructor(e){super(),x(this,e,Iu,Su,Q,{})}}function Ou(o){let e;return{c(){e=T(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ju(o){let e,l,t,n,r,s,f,i,a,u;return i=new le({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Ou]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),l.textContent=`This is average and minimum road carriageway width (in meters) from
      Ordnance Survey. The coloring shows the average width, and the line
      thickness has no meaning. Be careful interpreting the data near dual
      carriageways and crossing islands.`,t=L(),n=S("p"),n.textContent="Data valid as of 1 September, 2023",r=L(),s=S("p"),f=T(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),w(i.$$.fragment),a=T("."),F(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(e,t),p(e,n),p(e,r),p(e,s),p(s,f),v(i,s,null),p(s,a),u=!0},p(c,$){const g={};$&64&&(g.$$scope={dirty:$,ctx:c}),i.$set(g)},i(c){u||(m(i.$$.fragment,c),u=!0)},o(c){_(i.$$.fragment,c),u=!1},d(c){c&&h(e),k(i)}}}function Nu(o){let e,l,t;return l=new Be({props:{colorScale:o[1],limits:o[2]}}),{c(){e=S("span"),w(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Pu(o){let e,l,t,n=o[5].average+"",r,s,f,i,a,u,c=o[5].minimum+"",$,g;return{c(){e=S("p"),l=T("Average width: "),t=S("b"),r=T(n),s=T(`
        meters`),f=L(),i=S("p"),a=T("Minimum width: "),u=S("b"),$=T(c),g=T(`
        meters`)},m(b,C){d(b,e,C),p(e,l),p(e,t),p(t,r),p(e,s),d(b,f,C),d(b,i,C),p(i,a),p(i,u),p(u,$),p(i,g)},p(b,C){C&32&&n!==(n=b[5].average+"")&&A(r,n),C&32&&c!==(c=b[5].minimum+"")&&A($,c)},d(b){b&&(h(e),h(f),h(i))}}}function Ru(o){let e,l;return e=new ie({props:{$$slots:{default:[Pu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Du(o){let e,l;const t=[q(Nt),{sourceLayer:Nt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ve(["get","average"],o[2],o[1]),"line-width":Ge,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Ru]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&se(q(Nt)),s&0&&{sourceLayer:Nt},t[2],t[3],s&6&&{paint:{"line-color":ve(["get","average"],r[2],r[1]),"line-width":Ge,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Fu(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Nt,title:Gu,$$slots:{controls:[Nu],help:[ju]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${tn()}/v1/${Nt}.pmtiles`,$$slots:{default:[Du]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Nt="road_widths",Gu="OS Road widths";function Au(o,e,l){let t,n=V.sequential_low_to_high,r=[0,5,10,15,20,100],s=$e(Nt);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class qu extends X{constructor(e){super(),x(this,e,Au,Fu,Q,{})}}function zu(o){let e,l,t;return l=new Se({props:{color:V.trams}}),{c(){e=S("span"),w(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Hu(o){let e,l,t,n,r;return n=new lt({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows all trams and light rail lines, according to OpenStreetMap (as
      of 20 October 2024). When these are close to a scheme, interactions
      between the modes must be designed carefully.`,t=L(),w(n.$$.fragment),F(e,"slot","help")},m(s,f){d(s,e,f),p(e,l),p(e,t),v(n,e,null),r=!0},p:Z,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){_(n.$$.fragment,s),r=!1},d(s){s&&h(e),k(n)}}}function Eu(o){let e,l;const t=[q(Pt),{sourceLayer:Pt},{paint:{"line-color":V.trams,"line-width":5,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new ge({props:n}),e.$on("click",Wu),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&se(q(Pt)),s&0&&{sourceLayer:Pt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Bu(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Pt,title:Uu,$$slots:{help:[Hu],icon:[zu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Pt}.pmtiles`,$$slots:{default:[Eu]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Pt="trams",Uu="Trams";function Wu(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function Yu(o,e,l){let t,n=$e(Pt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Ju extends X{constructor(e){super(),x(this,e,Yu,Bu,Q,{})}}function Vu(o){let e;return{c(){e=T(`Bus Open Data Service
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Qu(o){let e,l,t,n,r,s,f,i,a,u;return n=new le({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[Vu]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),t=T("Data from the "),w(n.$$.fragment),r=T(`, as of 7 February 2024. To calculate frequency, every
      scheduled arrival time per stop is considered, grouped by day of the week.
      The total daily count is just the number of scheduled arrivals for a day.
      The peak hour frequency is the highest number of buses in any one hour
      window. That window might not lined up perfectly on the hour -- a peak
      hour might occur from 8:25 to 9:25,for example.`),s=L(),f=S("p"),f.textContent=`There are known limitations with this layer, so please use caution when
      using these numbers. Some stops may not be shown at all. Frequency could
      be over- or under-counted, due to exceptions to the regular daily schedule
      of a service.`,i=L(),w(a.$$.fragment),F(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(l,t),v(n,l,null),p(l,r),p(e,s),p(e,f),p(e,i),v(a,e,null),u=!0},p(c,$){const g={};$&64&&(g.$$scope={dirty:$,ctx:c}),n.$set(g)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&h(e),k(n),k(a)}}}function Zu(o){let e,l,t,n,r;return n=new Be({props:{colorScale:o[1],limits:o[2]}}),{c(){e=S("div"),l=S("p"),l.textContent="Peak hourly frequency:",t=L(),w(n.$$.fragment),F(e,"slot","controls")},m(s,f){d(s,e,f),p(e,l),p(e,t),v(n,e,null),r=!0},p:Z,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){_(n.$$.fragment,s),r=!1},d(s){s&&h(e),k(n)}}}function Ku(o){let e,l,t,n=o[5].stop_name+"",r,s,f,i,a,u=o[5].peak+"",c,$,g,b,C,y=o[5].peak_description+"",I,j,P,N,O,M=o[5].total+"",R,D,z=o[5].total_description+"",J,ae;return{c(){e=S("p"),l=T("Stop name: "),t=S("b"),r=T(n),s=L(),f=S("p"),i=T("Peak: "),a=S("b"),c=T(u),$=T(`
        buses during the busiest hour of any day`),g=L(),b=S("p"),C=T("The peak hour is "),I=T(y),j=L(),P=S("p"),N=T("Total buses per day: "),O=S("b"),R=T(M),D=T(`
        (for `),J=T(z),ae=T(", the busiest day of the week)")},m(G,K){d(G,e,K),p(e,l),p(e,t),p(t,r),d(G,s,K),d(G,f,K),p(f,i),p(f,a),p(a,c),p(f,$),d(G,g,K),d(G,b,K),p(b,C),p(b,I),d(G,j,K),d(G,P,K),p(P,N),p(P,O),p(O,R),p(P,D),p(P,J),p(P,ae)},p(G,K){K&32&&n!==(n=G[5].stop_name+"")&&A(r,n),K&32&&u!==(u=G[5].peak+"")&&A(c,u),K&32&&y!==(y=G[5].peak_description+"")&&A(I,y),K&32&&M!==(M=G[5].total+"")&&A(R,M),K&32&&z!==(z=G[5].total_description+"")&&A(J,z)},d(G){G&&(h(e),h(s),h(f),h(g),h(b),h(j),h(P))}}}function Xu(o){let e,l;return e=new ie({props:{$$slots:{default:[Ku,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function xu(o){let e,l;const t=[q(Rt),{sourceLayer:Rt},{paint:{"circle-color":ve(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Xu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Ut({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&se(q(Rt)),s&0&&{sourceLayer:Rt},s&6&&{paint:{"circle-color":ve(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function ec(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Rt,title:tc,$$slots:{controls:[Zu],help:[Qu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Rt}.pmtiles`,$$slots:{default:[xu]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Rt="bus_stops",tc="Bus stops";function nc(o,e,l){let t,n=V.sequential_low_to_high,r=[0,3,10,20,30,100],s=$e(Rt);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class lc extends X{constructor(e){super(),x(this,e,nc,ec,Q,{})}}function rc(o){let e;return{c(){e=T("crossing")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function oc(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[rc]},$$scope:{ctx:o}}}),f=new lt({}),{c(){e=S("span"),l=S("p"),t=T("This shows "),w(n.$$.fragment),r=T(" data from OpenStreetMap (as of 20 October 2024)."),s=L(),w(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),v(n,l,null),p(l,r),p(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function sc(o){let e,l,t;return l=new Qt({props:{rows:o[2]}}),{c(){e=S("div"),w(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function ic(o){let e,l=Pl(o[4])+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=Pl(n[4])+"")&&A(t,l)},d(n){n&&h(e)}}}function ac(o){let e,l;return e=new ie({props:{$$slots:{default:[ic,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function fc(o){let e,l;const t=[q(Dt),{sourceLayer:Dt},{paint:{"circle-color":Ke(["get","crossing"],{traffic_signals:V.signalized_crossing},V.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[ac]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Ut({props:n}),e.$on("click",pc),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&se(q(Dt)),s&0&&{sourceLayer:Dt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function uc(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Dt,title:cc,$$slots:{controls:[sc],help:[oc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Dt}.pmtiles`,$$slots:{default:[fc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Dt="crossings",cc="Crossings";function Pl(o){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[o.crossing]??`Unknown crossing type (${o.crossing})`}function pc(o){window.open(`http://openstreetmap.org/node/${o.detail.features[0].properties.osm_id}`,"_blank")}function $c(o,e,l){let t,n=$e(Dt);Y(o,n,f=>l(0,t=f));let r=[["Signalized",V.signalized_crossing],["Other",V.other_crossing]];function s(f){t=f,n.set(t)}return[t,n,r,s]}class mc extends X{constructor(e){super(),x(this,e,$c,uc,Q,{})}}function _c(o){let e;return{c(){e=T("OS Terrain 50")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function gc(o){let e,l,t,n,r,s,f,i,a,u,c,$,g,b;return i=new le({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[_c]},$$scope:{ctx:o}}}),c=new Te({}),g=new lt({}),{c(){e=S("span"),l=S("p"),l.textContent=`This layer shows the steepness of roads, with the arrows pointing uphill.
      You have to zoom in to see all roads.`,t=L(),n=S("p"),n.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending on
      the underlying Digital Elevation Model used.`,r=L(),s=S("p"),f=T("This layer is built from "),w(i.$$.fragment),a=T(` and roads from OpenStreetMap. The data is valid as of 18 February
      2024.`),u=L(),w(c.$$.fragment),$=L(),w(g.$$.fragment),F(e,"slot","help")},m(C,y){d(C,e,y),p(e,l),p(e,t),p(e,n),p(e,r),p(e,s),p(s,f),v(i,s,null),p(s,a),p(e,u),v(c,e,null),p(e,$),v(g,e,null),b=!0},p(C,y){const I={};y&64&&(I.$$scope={dirty:y,ctx:C}),i.$set(I)},i(C){b||(m(i.$$.fragment,C),m(c.$$.fragment,C),m(g.$$.fragment,C),b=!0)},o(C){_(i.$$.fragment,C),_(c.$$.fragment,C),_(g.$$.fragment,C),b=!1},d(C){C&&h(e),k(i),k(c),k(g)}}}function dc(o){let e,l,t,n,r;return l=new Be({props:{colorScale:o[1],limits:o[2]}}),{c(){e=S("span"),w(l.$$.fragment),t=L(),n=S("p"),n.innerHTML=`<img src="${ho}" alt="arrow"/>
      Arrows point uphill`,F(e,"slot","controls")},m(s,f){d(s,e,f),v(l,e,null),p(e,t),p(e,n),r=!0},p:Z,i(s){r||(m(l.$$.fragment,s),r=!0)},o(s){_(l.$$.fragment,s),r=!1},d(s){s&&h(e),k(l)}}}function hc(o){let e,l,t,n=Math.abs(o[5].gradient)/100+"",r,s;return{c(){e=S("p"),l=T("Gradient: "),t=S("b"),r=T(n),s=T(`
        %`)},m(f,i){d(f,e,i),p(e,l),p(e,t),p(t,r),p(e,s)},p(f,i){i&32&&n!==(n=Math.abs(f[5].gradient)/100+"")&&A(r,n)},d(f){f&&h(e)}}}function bc(o){let e,l;return e=new ie({props:{$$slots:{default:[hc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function wc(o){let e,l,t,n;const r=[q(Ze),{sourceLayer:Ze},{manageHoverState:!0},{paint:{"line-color":ve(["/",["abs",["get","gradient"]],100],o[2],o[1]),"line-width":Ge,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let s={$$slots:{default:[bc]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new ge({props:s});const f=[q(Ze+"_arrows"),{sourceLayer:Ze},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new Ln({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),n=!0},p(a,u){const c=u&7?ne(r,[u&0&&se(q(Ze)),u&0&&{sourceLayer:Ze},r[2],u&6&&{paint:{"line-color":ve(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":Ge,"line-opacity":ee(1,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&1?ne(f,[u&0&&se(q(Ze+"_arrows")),u&0&&{sourceLayer:Ze},f[2],f[3],u&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&h(l),k(e,a),k(t,a)}}}function vc(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Ze,title:kc,$$slots:{controls:[dc],help:[gc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Ze}.pmtiles`,$$slots:{default:[wc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Ze="gradient",kc="Gradients";function yc(o,e,l){let t,n=V.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],s=$e(Ze);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Sc extends X{constructor(e){super(),x(this,e,yc,vc,Q,{})}}function Tc(o){let e,l;return{c(){e=S("img"),F(e,"slot","icon"),Xt(e.src,l=bo)||F(e,"src",l),F(e,"alt","a logo representing cycle parking")},m(t,n){d(t,e,n)},p:Z,d(t){t&&h(e)}}}function Cc(o){let e;return{c(){e=T("OpenStreetMap")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Lc(o){let e;return{c(){e=T("OpenStreetMap Carto")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ic(o){let e,l,t,n,r,s,f,i,a,u,c,$;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Cc]},$$scope:{ctx:o}}}),a=new le({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[Lc]},$$scope:{ctx:o}}}),c=new lt({}),{c(){e=S("span"),l=S("p"),t=T("Cycle parking, according to "),w(n.$$.fragment),r=T(` (as of 20 October 2024). The type of parking, public/private
      access, and whether it's covered are not shown.`),s=L(),f=S("p"),i=T("Icon from "),w(a.$$.fragment),u=L(),w(c.$$.fragment),F(e,"slot","help")},m(g,b){d(g,e,b),p(e,l),p(l,t),v(n,l,null),p(l,r),p(e,s),p(e,f),p(f,i),v(a,f,null),p(e,u),v(c,e,null),$=!0},p(g,b){const C={};b&16&&(C.$$scope={dirty:b,ctx:g}),n.$set(C);const y={};b&16&&(y.$$scope={dirty:b,ctx:g}),a.$set(y)},i(g){$||(m(n.$$.fragment,g),m(a.$$.fragment,g),m(c.$$.fragment,g),$=!0)},o(g){_(n.$$.fragment,g),_(a.$$.fragment,g),_(c.$$.fragment,g),$=!1},d(g){g&&h(e),k(n),k(a),k(c)}}}function Mc(o){let e,l,t,n=(o[3].capacity??"unknown")+"",r;return{c(){e=S("p"),l=T("Capacity: "),t=S("b"),r=T(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&8&&n!==(n=(s[3].capacity??"unknown")+"")&&A(r,n)},d(s){s&&h(e)}}}function Oc(o){let e,l;return e=new ie({props:{$$slots:{default:[Mc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function jc(o){let e,l;const t=[q(Ft),{sourceLayer:Ft},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Oc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Ln({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&se(q(Ft)),s&0&&{sourceLayer:Ft},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Nc(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Ft,title:Pc,$$slots:{help:[Ic],icon:[Tc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Ft}.pmtiles`,$$slots:{default:[jc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Ft="cycle_parking",Pc="Cycle parking";function Rc(o,e,l){let t,n=$e(Ft);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Dc extends X{constructor(e){super(),x(this,e,Rc,Nc,Q,{})}}function Fc(o){let e,l,t,n,r;return n=new lt({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows different places of education according to OpenStreetMap (as of
      20 October 2024).`,t=L(),w(n.$$.fragment),F(e,"slot","help")},m(s,f){d(s,e,f),p(e,l),p(e,t),v(n,e,null),r=!0},p:Z,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){_(n.$$.fragment,s),r=!1},d(s){s&&h(e),k(n)}}}function Gc(o){let e,l,t;return e=new Se({props:{color:V.education.schools}}),{c(){w(e.$$.fragment),l=T(`
        Schools`)},m(n,r){v(e,n,r),d(n,l,r),t=!0},p:Z,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&h(l),k(e,n)}}}function Ac(o){let e,l,t;return e=new Se({props:{color:V.education.colleges}}),{c(){w(e.$$.fragment),l=T(`
        Colleges`)},m(n,r){v(e,n,r),d(n,l,r),t=!0},p:Z,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&h(l),k(e,n)}}}function qc(o){let e,l,t;return e=new Se({props:{color:V.education.universities}}),{c(){w(e.$$.fragment),l=T(`
        Universities`)},m(n,r){v(e,n,r),d(n,l,r),t=!0},p:Z,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&h(l),k(e,n)}}}function zc(o){let e,l,t,n,r,s,f,i,a;function u(y){o[3](y)}let c={$$slots:{default:[Gc]},$$scope:{ctx:o}};o[0].school!==void 0&&(c.checked=o[0].school),e=new ze({props:c}),E.push(()=>B(e,"checked",u));function $(y){o[4](y)}let g={$$slots:{default:[Ac]},$$scope:{ctx:o}};o[0].college!==void 0&&(g.checked=o[0].college),n=new ze({props:g}),E.push(()=>B(n,"checked",$));function b(y){o[5](y)}let C={$$slots:{default:[qc]},$$scope:{ctx:o}};return o[0].university!==void 0&&(C.checked=o[0].university),f=new ze({props:C}),E.push(()=>B(f,"checked",b)),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment),s=L(),w(f.$$.fragment)},m(y,I){v(e,y,I),d(y,t,I),v(n,y,I),d(y,s,I),v(f,y,I),a=!0},p(y,I){const j={};I&2048&&(j.$$scope={dirty:I,ctx:y}),!l&&I&1&&(l=!0,j.checked=y[0].school,U(()=>l=!1)),e.$set(j);const P={};I&2048&&(P.$$scope={dirty:I,ctx:y}),!r&&I&1&&(r=!0,P.checked=y[0].college,U(()=>r=!1)),n.$set(P);const N={};I&2048&&(N.$$scope={dirty:I,ctx:y}),!i&&I&1&&(i=!0,N.checked=y[0].university,U(()=>i=!1)),f.$set(N)},i(y){a||(m(e.$$.fragment,y),m(n.$$.fragment,y),m(f.$$.fragment,y),a=!0)},o(y){_(e.$$.fragment,y),_(n.$$.fragment,y),_(f.$$.fragment,y),a=!1},d(y){y&&(h(t),h(s)),k(e,y),k(n,y),k(f,y)}}}function Hc(o){let e,l,t;return l=new Fe({props:{small:!0,$$slots:{default:[zc]},$$scope:{ctx:o}}}),{c(){e=S("div"),w(l.$$.fragment),F(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p(n,r){const s={};r&2049&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Ec(o){let e,l=(o[10].name??"Unnamed institution")+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=(n[10].name??"Unnamed institution")+"")&&A(t,l)},d(n){n&&h(e)}}}function Bc(o){let e,l;return e=new ie({props:{$$slots:{default:[Ec,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&3072&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Uc(o){let e,l;const t=[q(Gt),{sourceLayer:Gt},{paint:{"fill-color":Ke(["get","type"],{school:V.education.schools,college:V.education.colleges,university:V.education.universities},"grey"),"fill-opacity":ee(.7,1)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[2](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Bc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Ae({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&5?ne(t,[s&0&&se(q(Gt)),s&0&&{sourceLayer:Gt},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&5&&{filter:r[2](r[0])},t[5],t[6]]):{};s&2048&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Wc(o){let e,l,t,n,r;function s(i){o[6](i)}let f={name:Gt,title:Yc,$$slots:{controls:[Hc],help:[Fc]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Gt}.pmtiles`,$$slots:{default:[Uc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&2049&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Gt="education",Yc="Education";function Jc(o){return{show:!0,school:o.includes("school"),college:o.includes("college"),university:o.includes("university")}}function Vc(o,e,l){let t,n=["school","college","university"],r={show:!1,school:!0,college:!0,university:!0};function s(g){return g.show?n.filter(b=>g[b]).join(","):null}let f=bt(Gt,r,s,Jc);Y(o,f,g=>l(0,t=g));function i(g){let b=n.filter(C=>g[C]);return["in",["get","type"],["literal",b]]}function a(g){o.$$.not_equal(t.school,g)&&(t.school=g,f.set(t))}function u(g){o.$$.not_equal(t.college,g)&&(t.college=g,f.set(t))}function c(g){o.$$.not_equal(t.university,g)&&(t.university=g,f.set(t))}function $(g){o.$$.not_equal(t.show,g)&&(t.show=g,f.set(t))}return[t,f,i,a,u,c,$]}class Qc extends X{constructor(e){super(),x(this,e,Vc,Wc,Q,{})}}function Zc(o){let e,l,t;return l=new Se({props:{color:V.hospitals}}),{c(){e=S("span"),w(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Kc(o){let e;return{c(){e=T("hospital")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Xc(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Kc]},$$scope:{ctx:o}}}),f=new lt({}),{c(){e=S("span"),l=S("p"),t=T("This shows "),w(n.$$.fragment),r=T(` data from OpenStreetMap (as of 20 October 2024). It doesn't
      include outpatient clinics or individual doctor's offices.`),s=L(),w(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),v(n,l,null),p(l,r),p(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&16&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function xc(o){let e,l=(o[3].name??"Unnamed hospital")+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed hospital")+"")&&A(t,l)},d(n){n&&h(e)}}}function ep(o){let e,l;return e=new ie({props:{$$slots:{default:[xc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function tp(o){let e,l;const t=[q(At),{sourceLayer:At},{paint:{"fill-color":V.hospitals,"fill-opacity":ee(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[ep]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Ae({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&se(q(At)),s&0&&{sourceLayer:At},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function np(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:At,title:lp,$$slots:{help:[Xc],icon:[Zc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${At}.pmtiles`,$$slots:{default:[tp]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let At="hospitals",lp="Hospitals";function rp(o,e,l){let t,n=$e(At);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class op extends X{constructor(e){super(),x(this,e,rp,np,Q,{})}}function sp(o){let e,l;return{c(){e=S("img"),F(e,"slot","icon"),Xt(e.src,l=wo)||F(e,"src",l),F(e,"alt","A logo representing a train")},m(t,n){d(t,e,n)},p:Z,d(t){t&&h(e)}}}function ip(o){let e;return{c(){e=T("railway station")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ap(o){let e;return{c(){e=T(`National Rail
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function fp(o){let e,l,t,n,r,s,f,i,a,u,c,$,g;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[ip]},$$scope:{ctx:o}}}),a=new le({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[ap]},$$scope:{ctx:o}}}),$=new lt({}),{c(){e=S("div"),l=S("p"),t=T("This shows "),w(n.$$.fragment),r=T(" data from OpenStreetMap (as of 20 October 2024)."),s=L(),f=S("p"),i=T("Icon from "),w(a.$$.fragment),u=T(". (Note that not all stations shown are National Rail.)"),c=L(),w($.$$.fragment),F(e,"slot","help")},m(b,C){d(b,e,C),p(e,l),p(l,t),v(n,l,null),p(l,r),p(e,s),p(e,f),p(f,i),v(a,f,null),p(f,u),p(e,c),v($,e,null),g=!0},p(b,C){const y={};C&16&&(y.$$scope={dirty:C,ctx:b}),n.$set(y);const I={};C&16&&(I.$$scope={dirty:C,ctx:b}),a.$set(I)},i(b){g||(m(n.$$.fragment,b),m(a.$$.fragment,b),m($.$$.fragment,b),g=!0)},o(b){_(n.$$.fragment,b),_(a.$$.fragment,b),_($.$$.fragment,b),g=!1},d(b){b&&h(e),k(n),k(a),k($)}}}function up(o){let e,l=(o[3].name??"Unnamed railway station")+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed railway station")+"")&&A(t,l)},d(n){n&&h(e)}}}function cp(o){let e,l;return e=new ie({props:{$$slots:{default:[up,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function pp(o){let e,l;const t=[q(en),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[cp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Ln({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&se(q(en)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function $p(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:en,title:mp,$$slots:{help:[fp],icon:[sp]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new Wt({props:{data:`${ce()}/v1/${en}.geojson`,$$slots:{default:[pp]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let en="railway_stations",mp="Railway stations";function _p(o,e,l){let t,n=$e(en);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class gp extends X{constructor(e){super(),x(this,e,_p,$p,Q,{})}}function dp(o){let e,l,t;return l=new Se({props:{color:V.sports_spaces}}),{c(){e=S("span"),w(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function hp(o){let e;return{c(){e=T("sports pitches")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function bp(o){let e;return{c(){e=T("sports centres")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function wp(o){let e,l,t,n,r,s,f,i,a,u;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[hp]},$$scope:{ctx:o}}}),s=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[bp]},$$scope:{ctx:o}}}),a=new lt({}),{c(){e=S("span"),l=S("p"),t=T("This shows "),w(n.$$.fragment),r=T(" and "),w(s.$$.fragment),f=T(" data from OpenStreetMap (as of 20 October 2024)."),i=L(),w(a.$$.fragment),F(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(l,t),v(n,l,null),p(l,r),v(s,l,null),p(l,f),p(e,i),v(a,e,null),u=!0},p(c,$){const g={};$&16&&(g.$$scope={dirty:$,ctx:c}),n.$set(g);const b={};$&16&&(b.$$scope={dirty:$,ctx:c}),s.$set(b)},i(c){u||(m(n.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&h(e),k(n),k(s),k(a)}}}function vp(o){let e,l=(o[3].name??"Unnamed sports space")+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed sports space")+"")&&A(t,l)},d(n){n&&h(e)}}}function kp(o){let e,l;return e=new ie({props:{$$slots:{default:[vp,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function yp(o){let e,l;const t=[q(qt),{sourceLayer:qt},{paint:{"fill-color":V.sports_spaces,"fill-opacity":ee(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[kp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Ae({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&se(q(qt)),s&0&&{sourceLayer:qt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Sp(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:qt,title:Tp,$$slots:{help:[wp],icon:[dp]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${qt}.pmtiles`,$$slots:{default:[yp]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let qt="sports_spaces",Tp="Sports spaces";function Cp(o,e,l){let t,n=$e(qt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Lp extends X{constructor(e){super(),x(this,e,Cp,Sp,Q,{})}}function Ip(o){let e;return{c(){e=T("DfT stats19")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Mp(o){let e;return{c(){e=T("documented by DfT")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Op(o){let e,l,t,n,r,s,f,i,a,u,c,$,g,b,C,y,I,j,P,N,O,M,R,D;return n=new le({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[Ip]},$$scope:{ctx:o}}}),j=new le({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[Mp]},$$scope:{ctx:o}}}),R=new Te({}),{c(){e=S("span"),l=S("p"),t=T("This layer shows collisions recorded in the "),w(n.$$.fragment),r=T(" dataset, as of 30 September 2024. Please note these limitations:"),s=L(),f=S("ul"),i=S("li"),i.textContent="Only collisions between 2017 and 2023 are included",a=L(),u=S("li"),u.textContent=`This tool is intended to be used at high-zoom levels, while inspecting a
        scheme or development area. Not all points are shown at lower zoom
        levels. Do not use this to look for trends across a city or region
        scale.`,c=L(),$=S("li"),$.textContent=`Approximately 150 collisions from the source data aren't included, due
        to problems with the recorded location`,g=L(),b=S("li"),b.textContent='The "pedestrians" category also include mobility scooters',C=L(),y=S("li"),I=T("All limitations "),w(j.$$.fragment),P=T(` also apply. Not all collisions or near misses are reported.
        There's nuance with the severity categories.`),N=L(),O=S("p"),O.textContent="You can click a point to open the full report, thanks to CycleStreets.",M=L(),w(R.$$.fragment),F(e,"slot","help")},m(z,J){d(z,e,J),p(e,l),p(l,t),v(n,l,null),p(l,r),p(e,s),p(e,f),p(f,i),p(f,a),p(f,u),p(f,c),p(f,$),p(f,g),p(f,b),p(f,C),p(f,y),p(y,I),v(j,y,null),p(y,P),p(e,N),p(e,O),p(e,M),v(R,e,null),D=!0},p(z,J){const ae={};J&4194304&&(ae.$$scope={dirty:J,ctx:z}),n.$set(ae);const G={};J&4194304&&(G.$$scope={dirty:J,ctx:z}),j.$set(G)},i(z){D||(m(n.$$.fragment,z),m(j.$$.fragment,z),m(R.$$.fragment,z),D=!0)},o(z){_(n.$$.fragment,z),_(j.$$.fragment,z),_(R.$$.fragment,z),D=!1},d(z){z&&h(e),k(n),k(j),k(R)}}}function jp(o){let e;return{c(){e=T("Pedestrians")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Np(o){let e;return{c(){e=T("Cyclists")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Pp(o){let e;return{c(){e=T("Horse riders")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Rp(o){let e;return{c(){e=T("Other")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Dp(o){let e,l,t,n,r,s,f,i,a,u,c,$;function g(O){o[10](O)}let b={$$slots:{default:[jp]},$$scope:{ctx:o}};o[0].pedestrians!==void 0&&(b.checked=o[0].pedestrians),e=new ze({props:b}),E.push(()=>B(e,"checked",g));function C(O){o[11](O)}let y={$$slots:{default:[Np]},$$scope:{ctx:o}};o[0].cyclists!==void 0&&(y.checked=o[0].cyclists),n=new ze({props:y}),E.push(()=>B(n,"checked",C));function I(O){o[12](O)}let j={$$slots:{default:[Pp]},$$scope:{ctx:o}};o[0].horseRiders!==void 0&&(j.checked=o[0].horseRiders),f=new ze({props:j}),E.push(()=>B(f,"checked",I));function P(O){o[13](O)}let N={$$slots:{default:[Rp]},$$scope:{ctx:o}};return o[0].other!==void 0&&(N.checked=o[0].other),u=new ze({props:N}),E.push(()=>B(u,"checked",P)),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment),s=L(),w(f.$$.fragment),a=L(),w(u.$$.fragment)},m(O,M){v(e,O,M),d(O,t,M),v(n,O,M),d(O,s,M),v(f,O,M),d(O,a,M),v(u,O,M),$=!0},p(O,M){const R={};M&4194304&&(R.$$scope={dirty:M,ctx:O}),!l&&M&1&&(l=!0,R.checked=O[0].pedestrians,U(()=>l=!1)),e.$set(R);const D={};M&4194304&&(D.$$scope={dirty:M,ctx:O}),!r&&M&1&&(r=!0,D.checked=O[0].cyclists,U(()=>r=!1)),n.$set(D);const z={};M&4194304&&(z.$$scope={dirty:M,ctx:O}),!i&&M&1&&(i=!0,z.checked=O[0].horseRiders,U(()=>i=!1)),f.$set(z);const J={};M&4194304&&(J.$$scope={dirty:M,ctx:O}),!c&&M&1&&(c=!0,J.checked=O[0].other,U(()=>c=!1)),u.$set(J)},i(O){$||(m(e.$$.fragment,O),m(n.$$.fragment,O),m(f.$$.fragment,O),m(u.$$.fragment,O),$=!0)},o(O){_(e.$$.fragment,O),_(n.$$.fragment,O),_(f.$$.fragment,O),_(u.$$.fragment,O),$=!1},d(O){O&&(h(t),h(s),h(a)),k(e,O),k(n,O),k(f,O),k(u,O)}}}function Fp(o){let e,l,t,n,r,s,f,i,a,u,c,$,g;return l=new Fe({props:{small:!0,$$slots:{default:[Dp]},$$scope:{ctx:o}}}),u=new Qt({props:{rows:o[9]}}),{c(){e=S("div"),w(l.$$.fragment),t=L(),n=S("div"),r=T(`Filter years:
      `),s=S("input"),f=T(`
      -
      `),i=S("input"),a=L(),w(u.$$.fragment),F(s,"type","number"),F(s,"min",2017),F(s,"max",2023),F(s,"class","svelte-1ft65rw"),F(i,"type","number"),F(i,"min",2017),F(i,"max",2023),F(i,"class","svelte-1ft65rw"),F(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(b,C){d(b,e,C),v(l,e,null),p(e,t),p(e,n),p(n,r),p(n,s),tt(s,o[0].minYear),p(n,f),p(n,i),tt(i,o[0].maxYear),p(e,a),v(u,e,null),c=!0,$||(g=[mt(s,"input",o[14]),mt(i,"input",o[15])],$=!0)},p(b,C){const y={};C&4194305&&(y.$$scope={dirty:C,ctx:b}),l.$set(y),C&1&&xt(s.value)!==b[0].minYear&&tt(s,b[0].minYear),C&1&&xt(i.value)!==b[0].maxYear&&tt(i,b[0].maxYear)},i(b){c||(m(l.$$.fragment,b),m(u.$$.fragment,b),c=!0)},o(b){_(l.$$.fragment,b),_(u.$$.fragment,b),c=!1},d(b){b&&h(e),k(l),k(u),$=!1,jr(g)}}}function Rl(o){let e,l,t,n=o[3][o[21].pedestrian_location]+"",r;return{c(){e=S("p"),l=T("Pedestrian location: "),t=S("b"),r=T(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&2097152&&n!==(n=s[3][s[21].pedestrian_location]+"")&&A(r,n)},d(s){s&&h(e)}}}function Dl(o){let e,l,t,n=o[4][o[21].pedestrian_movement]+"",r;return{c(){e=S("p"),l=T("Pedestrian movement: "),t=S("b"),r=T(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&2097152&&n!==(n=s[4][s[21].pedestrian_movement]+"")&&A(r,n)},d(s){s&&h(e)}}}function Gp(o){let e,l,t,n=o[21].year+"",r,s,f,i,a,u=o[5][o[21].severity]+"",c,$,g,b,C,y=Fl(o[21])+"",I,j,P,N,O,M=o[21].pedestrian_location&&Rl(o),R=o[21].pedestrian_movement&&Dl(o);return{c(){e=S("p"),l=T("Year: "),t=S("b"),r=T(n),s=L(),f=S("p"),i=T("Severity: "),a=S("b"),c=T(u),$=L(),g=S("p"),b=T("Casualties: "),C=S("b"),I=T(y),j=L(),M&&M.c(),P=L(),R&&R.c(),N=L(),O=S("p"),O.textContent="Click to open full report in CycleStreets"},m(D,z){d(D,e,z),p(e,l),p(e,t),p(t,r),d(D,s,z),d(D,f,z),p(f,i),p(f,a),p(a,c),d(D,$,z),d(D,g,z),p(g,b),p(g,C),p(C,I),d(D,j,z),M&&M.m(D,z),d(D,P,z),R&&R.m(D,z),d(D,N,z),d(D,O,z)},p(D,z){z&2097152&&n!==(n=D[21].year+"")&&A(r,n),z&2097152&&u!==(u=D[5][D[21].severity]+"")&&A(c,u),z&2097152&&y!==(y=Fl(D[21])+"")&&A(I,y),D[21].pedestrian_location?M?M.p(D,z):(M=Rl(D),M.c(),M.m(P.parentNode,P)):M&&(M.d(1),M=null),D[21].pedestrian_movement?R?R.p(D,z):(R=Dl(D),R.c(),R.m(N.parentNode,N)):R&&(R.d(1),R=null)},d(D){D&&(h(e),h(s),h(f),h($),h(g),h(j),h(P),h(N),h(O)),M&&M.d(D),R&&R.d(D)}}}function Ap(o){let e,l;return e=new ie({props:{$$slots:{default:[Gp,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&6291456&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function qp(o){let e,l;const t=[q(zt),{sourceLayer:zt},{paint:{"circle-color":ve(["get","severity"],[1,2,3],[o[6],o[7],o[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:o[1]},{layout:{visibility:o[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Ap]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Ut({props:n}),e.$on("click",Bp),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&451?ne(t,[s&0&&se(q(zt)),s&0&&{sourceLayer:zt},s&448&&{paint:{"circle-color":ve(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&2&&{filter:r[1]},s&1&&{layout:{visibility:r[0].show?"visible":"none"}},t[5],t[6]]):{};s&4194304&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function zp(o){let e,l,t,n,r;function s(i){o[16](i)}let f={name:zt,title:Hp,$$slots:{controls:[Fp],help:[Op]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${zt}.pmtiles`,$$slots:{default:[qp]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&4194305&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&4194307&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let zt="stats19",Hp="Stats19";function Ep(o){let[e,l,t]=o.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function Fl(o){let e=[];return o.pedestrian&&e.push("pedestrian"),o.cyclist&&e.push("cyclist"),o.horse_rider&&e.push("horse rider"),o.other&&e.push("other"),e.join(", ")}function Bp(o){window.open(`https://www.cyclestreets.net/collisions/reports/${o.detail.features[0].properties.accident_index}`,"_blank")}function Up(o,e,l){let t,n,r=["pedestrians","cyclists","horseRiders","other"],s={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2023};function f(D){return D.show?`${r.filter(J=>D[J]).join(",")}/${D.minYear}/${D.maxYear}`:null}let i=bt(zt,s,f,Ep);Y(o,i,D=>l(0,n=D));function a(D,z,J,ae,G,K){let H=["any"];return n.pedestrians&&H.push(["get","pedestrian"]),n.cyclists&&H.push(["get","cyclist"]),n.horseRiders&&H.push(["get","horse_rider"]),n.other&&H.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],H]}let u={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},$={1:"Fatal",2:"Serious",3:"Slight"},g=V.sequential_low_to_high[4],b=V.sequential_low_to_high[2],C=V.sequential_low_to_high[0],y=[["Fatal",g],["Serious",b],["Slight",C]];function I(D){o.$$.not_equal(n.pedestrians,D)&&(n.pedestrians=D,i.set(n))}function j(D){o.$$.not_equal(n.cyclists,D)&&(n.cyclists=D,i.set(n))}function P(D){o.$$.not_equal(n.horseRiders,D)&&(n.horseRiders=D,i.set(n))}function N(D){o.$$.not_equal(n.other,D)&&(n.other=D,i.set(n))}function O(){n.minYear=xt(this.value),i.set(n)}function M(){n.maxYear=xt(this.value),i.set(n)}function R(D){o.$$.not_equal(n.show,D)&&(n.show=D,i.set(n))}return o.$$.update=()=>{o.$$.dirty&1&&l(1,t=a(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,i,u,c,$,g,b,C,y,I,j,P,N,O,M,R]}class Wp extends X{constructor(e){super(),x(this,e,Up,zp,Q,{})}}function Yp(o){let e;return{c(){e=T(`DfT road statistics
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Jp(o){let e;return{c(){e=T("methodology")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Vp(o){let e,l,t,n,r,s,f,i,a,u,c,$;return n=new le({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Yp]},$$scope:{ctx:o}}}),s=new le({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Jp]},$$scope:{ctx:o}}}),c=new Te({}),{c(){e=S("span"),l=S("p"),t=T("AADF (annual average daily flow) data from "),w(n.$$.fragment),r=T(`. This counts the total daily number of vehicles traveling
      past a count point (in both directions) on an average day of the year.
      Data from the latest year available is shown. See `),w(s.$$.fragment),f=T(" for details and caveats about the measurements."),i=L(),a=S("p"),a.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
      thicker when the latest data is a manual or automatic count, and thinner
      when it's an estimate from previous years or nearby counters. Click a
      point for full data.`,u=L(),w(c.$$.fragment),F(e,"slot","help")},m(g,b){d(g,e,b),p(e,l),p(l,t),v(n,l,null),p(l,r),v(s,l,null),p(l,f),p(e,i),p(e,a),p(e,u),v(c,e,null),$=!0},p(g,b){const C={};b&128&&(C.$$scope={dirty:b,ctx:g}),n.$set(C);const y={};b&128&&(y.$$scope={dirty:b,ctx:g}),s.$set(y)},i(g){$||(m(n.$$.fragment,g),m(s.$$.fragment,g),m(c.$$.fragment,g),$=!0)},o(g){_(n.$$.fragment,g),_(s.$$.fragment,g),_(c.$$.fragment,g),$=!1},d(g){g&&h(e),k(n),k(s),k(c)}}}function Qp(o){let e,l,t;return l=new Be({props:{colorScale:o[1],limits:o[3]}}),{c(){e=S("span"),w(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Zp(o){let e,l=o[6].location+"",t,n,r,s,f=o[6].year+"",i,a,u,c=o[6].motor_vehicles.toLocaleString()+"",$,g,b,C,y=o[6].year+"",I,j,P,N=o[6].pedal_cycles.toLocaleString()+"",O,M,R,D,z,J=o[6].method+"",ae;return{c(){e=S("h2"),t=T(l),n=L(),r=S("p"),s=T("Total motor vehicles ("),i=T(f),a=T(` AADF):
        `),u=S("b"),$=T(c),g=L(),b=S("p"),C=T("Total pedal cycles ("),I=T(y),j=T(` AADF):
        `),P=S("b"),O=T(N),M=L(),R=S("p"),D=T("Count method: "),z=S("b"),ae=T(J)},m(G,K){d(G,e,K),p(e,t),d(G,n,K),d(G,r,K),p(r,s),p(r,i),p(r,a),p(r,u),p(u,$),d(G,g,K),d(G,b,K),p(b,C),p(b,I),p(b,j),p(b,P),p(P,O),d(G,M,K),d(G,R,K),p(R,D),p(R,z),p(z,ae)},p(G,K){K&64&&l!==(l=G[6].location+"")&&A(t,l),K&64&&f!==(f=G[6].year+"")&&A(i,f),K&64&&c!==(c=G[6].motor_vehicles.toLocaleString()+"")&&A($,c),K&64&&y!==(y=G[6].year+"")&&A(I,y),K&64&&N!==(N=G[6].pedal_cycles.toLocaleString()+"")&&A(O,N),K&64&&J!==(J=G[6].method+"")&&A(ae,J)},d(G){G&&(h(e),h(n),h(r),h(g),h(b),h(M),h(R))}}}function Kp(o){let e,l;return e=new ie({props:{$$slots:{default:[Zp,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&192&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Xp(o){let e,l;const t=[q(Ht),{sourceLayer:Ht},{paint:{"circle-color":ve(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Kp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Ut({props:n}),e.$on("click",t$),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&se(q(Ht)),s&0&&{sourceLayer:Ht},s&6&&{paint:{"circle-color":ve(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&128&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function xp(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Ht,title:e$,$$slots:{controls:[Qp],help:[Vp]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Ht}.pmtiles`,$$slots:{default:[Xp]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&128&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&129&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Ht="vehicle_counts",e$="Vehicle counts";function t$(o){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${o.detail.features[0].properties.count_point}`,"_blank")}function n$(o,e,l){let t,n=["green","orange","red","black"],r=[0,2500,8e3,15e3,205e3],s=["0-2.5k","2.5-8k","8-15k",">15k"],f=$e(Ht);Y(o,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,s,f,i]}class l$ extends X{constructor(e){super(),x(this,e,n$,xp,Q,{})}}function Gl(o,e,l){const t=o.slice();return t[6]=e[l],t}function r$(o){let e;return{c(){e=S("span"),e.innerHTML=`<p>Critical issues and policy conflicts from the Design Assistance Log. This
      is internally collected data.</p> <p>This layer is manually copied from a copy of the DA Log. The data is
      recent as of 10 June 2024.</p>`,F(e,"slot","help")},m(l,t){d(l,e,t)},p:Z,d(l){l&&h(e)}}}function o$(o){let e,l,t;return l=new Qt({props:{rows:o[3]}}),{c(){e=S("div"),w(l.$$.fragment),F(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function s$(o){let e,l=o[5]["Issue ID"]+"",t,n,r=o[5].Code+"",s,f,i,a=o[5]["Issue Stage"]+"",u;return{c(){e=S("h2"),t=T(l),n=T(" - "),s=T(r),f=L(),i=S("p"),u=T(a)},m(c,$){d(c,e,$),p(e,t),p(e,n),p(e,s),d(c,f,$),d(c,i,$),p(i,u)},p(c,$){$&32&&l!==(l=c[5]["Issue ID"]+"")&&A(t,l),$&32&&r!==(r=c[5].Code+"")&&A(s,r),$&32&&a!==(a=c[5]["Issue Stage"]+"")&&A(u,a)},d(c){c&&(h(e),h(f),h(i))}}}function Al(o){let e,l=o[6]+"",t,n,r,s=o[5][o[6]]+"",f,i;return{c(){e=S("p"),t=T(l),n=T(`:
            `),r=S("b"),f=T(s),i=L()},m(a,u){d(a,e,u),p(e,t),p(e,n),p(e,r),p(r,f),p(e,i)},p(a,u){u&32&&s!==(s=a[5][a[6]]+"")&&A(f,s)},d(a){a&&h(e)}}}function i$(o){let e,l=me(o[2]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Al(Gl(o,l,n));return{c(){e=S("div");for(let n=0;n<t.length;n+=1)t[n].c();re(e,"max-width","30vw"),re(e,"max-height","60vh"),re(e,"overflow","auto")},m(n,r){d(n,e,r);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(n,r){if(r&36){l=me(n[2]);let s;for(s=0;s<l.length;s+=1){const f=Gl(n,l,s);t[s]?t[s].p(f,r):(t[s]=Al(f),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=l.length}},d(n){n&&h(e),He(t,n)}}}function a$(o){let e,l,t,n;return e=new ie({props:{openOn:"hover",$$slots:{default:[s$,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),t=new ie({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[i$,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){v(e,r,s),d(r,l,s),v(t,r,s),n=!0},p(r,s){const f={};s&544&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&544&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&h(l),k(e,r),k(t,r)}}}function f$(o){let e,l;const t=[q(an),{paint:{"circle-color":Ke(["get","Design Review Status"],Object.fromEntries(o[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[a$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Ut({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&9?ne(t,[s&0&&se(q(an)),s&8&&{paint:{"circle-color":Ke(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[3],t[4]]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function u$(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:an,title:c$,$$slots:{controls:[o$],help:[r$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new Wt({props:{data:`${tn()}/v1/problems.geojson.gz`,$$slots:{default:[f$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&512&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let an="problems",c$="Issues & Conflicts";function p$(o,e,l){let t,n=$e(an);Y(o,n,i=>l(0,t=i));let r=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],s=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function f(i){t=i,n.set(t)}return[t,n,r,s,f]}class $$ extends X{constructor(e){super(),x(this,e,p$,u$,Q,{})}}function m$(o){let e;function l(r,s){return r[2]<=100?d$:g$}let t=l(o),n=t(o);return{c(){n.c(),e=_e()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},i:Z,o:Z,d(r){r&&h(e),n.d(r)}}}function _$(o){let e,l;return e=new Ee({props:{$$slots:{default:[h$]},$$scope:{ctx:o}}}),e.$on("click",o[3]),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function g$(o){let e;return{c(){e=S("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){d(l,e,t)},p:Z,d(l){l&&h(e)}}}function d$(o){let e,l,t;return{c(){e=S("label"),l=T(`Downloading scheme data
      `),t=S("progress"),t.value=o[2],F(t,"class","svelte-q3473n")},m(n,r){d(n,e,r),p(e,l),p(e,t)},p(n,r){r&4&&(t.value=n[2])},d(n){n&&h(e)}}}function h$(o){let e;return{c(){e=T("Load latest scheme data")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function b$(o){let e,l,t,n;const r=[_$,m$],s=[];function f(i,a){return i[0]?i[1]?1:-1:0}return~(e=f(o))&&(l=s[e]=r[e](o)),{c(){l&&l.c(),t=_e()},m(i,a){~e&&s[e].m(i,a),d(i,t,a),n=!0},p(i,[a]){let u=e;e=f(i),e===u?~e&&s[e].p(i,a):(l&&(be(),_(s[u],1,1,()=>{s[u]=null}),we()),~e?(l=s[e],l?l.p(i,a):(l=s[e]=r[e](i),l.c()),m(l,1),l.m(t.parentNode,t)):l=null)},i(i){n||(m(l),n=!0)},o(i){_(l),n=!1},d(i){i&&h(t),~e&&s[e].d(i)}}}function w$(o,e,l){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),r=!0,s=0;async function f(){let a=await xr(`${tn()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,s=c)});l(2,s=100);let u=new TextDecoder().decode(a);t("all_schemes_output.geojson",u),l(1,r=!1)}Nr(async()=>{n&&await f()});async function i(){l(0,n=!0),await f()}return o.$$set=a=>{"loadFile"in a&&l(4,t=a.loadFile)},[n,r,s,i,t]}class v$ extends X{constructor(e){super(),x(this,e,w$,b$,Q,{loadFile:4})}}function k$(o,e,l){let t={type:"FeatureCollection",features:[],schemes:{},notes:o.notes},n={type:"FeatureCollection",features:[],schemes:{},notes:o.notes};for(let[r,s]of Object.entries(o.schemes))s.pipeline?n.schemes[r]=s:t.schemes[r]=s;for(let r of o.features){if(!y$(r))continue;let s=r.properties.scheme_reference,f=Object.hasOwn(t.schemes,s),i=f?t.schemes[s]:n.schemes[s];i.browse&&(r.properties.funding_programme=i.browse.funding_programme,r.properties.current_milestone=i.browse.current_milestone);let a=f?t:n;r.id=a.features.length+1,a.features.push(r)}e.set(t),l.set(n)}function y$(o){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(o.properties.id)}function S$(){let o={type:"FeatureCollection",features:[],schemes:{},notes:["These schemes are everything you've drawn in this browser using Scheme Sketcher. The data source and accuracy depend on whatever files you imported, created, or edited yourself."]};for(let l=0;l<window.localStorage.length;l++){let t=window.localStorage.key(l),n=t.split("/");if(!(n.length!=3||n[0]!="sketch"))try{let r=JSON.parse(window.localStorage.getItem(t));if(r.features.length==0)continue;for(let s of Object.values(r.schemes))s.browse={authority_or_region:n[1],local_filename:n[2]};o.schemes={...o.schemes,...r.schemes},o.features=[...o.features,...r.features]}catch{}}let e=1;for(let l of o.features)l.id=e++;return o}let Vt={ATF2:"#66c2a5","ATF2 or ATF3":"#fc8d62",ATF3:"#8da0cb",ATF4:"#e78ac3",ATF4E:"#a6d854"},vn={removed:"grey","no data":"grey","not progressed":"red",superseded:"red","preliminary design completed":"#fbb862","feasability design completed":"#eddc76","detailed design completed":"#dafd9d","consruction started":"#76c384","construction completed":"#488f31"};function ql(o,e,l){const t=o.slice();return t[27]=e[l],t[28]=e,t[29]=l,t}function T$(o){let e;return{c(){e=T("Filters")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function C$(o){let e;return{c(){e=T("Reset all filters")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function L$(o){let e,l,t,n,r,s,f,i;e=new bn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[O$]},$$scope:{ctx:o}}});function a(g){o[22](g)}let u={label:"Scheme name or reference",options:fn(o[0])};o[1]!==void 0&&(u.value=o[1]),t=new qr({props:u}),E.push(()=>B(t,"value",a));function c(g){o[23](g)}let $={label:"Authority or region",choices:o[10],emptyOption:!0};return o[4]!==void 0&&($.value=o[4]),s=new Bt({props:$}),E.push(()=>B(s,"value",c)),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),r=L(),w(s.$$.fragment)},m(g,b){v(e,g,b),d(g,l,b),v(t,g,b),d(g,r,b),v(s,g,b),i=!0},p(g,b){const C={};b&1073741828&&(C.$$scope={dirty:b,ctx:g}),e.$set(C);const y={};b&1&&(y.options=fn(g[0])),!n&&b&2&&(n=!0,y.value=g[1],U(()=>n=!1)),t.$set(y);const I={};b&1024&&(I.choices=g[10]),!f&&b&16&&(f=!0,I.value=g[4],U(()=>f=!1)),s.$set(I)},i(g){i||(m(e.$$.fragment,g),m(t.$$.fragment,g),m(s.$$.fragment,g),i=!0)},o(g){_(e.$$.fragment,g),_(t.$$.fragment,g),_(s.$$.fragment,g),i=!1},d(g){g&&(h(l),h(r)),k(e,g),k(t,g),k(s,g)}}}function I$(o){let e,l,t,n,r,s,f,i,a,u,c,$,g,b,C,y;t=new bn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[N$]},$$scope:{ctx:o}}});function I(R){o[16](R)}let j={label:"Scheme name or reference",options:fn(o[0])};o[1]!==void 0&&(j.value=o[1]),r=new qr({props:j}),E.push(()=>B(r,"value",I));function P(R){o[17](R)}let N={label:"Authority or region",choices:o[10],emptyOption:!0};o[4]!==void 0&&(N.value=o[4]),i=new Bt({props:N}),E.push(()=>B(i,"value",P)),$=new bn({props:{label:"Funding programmes",id:"filterFundingProgrammes",$$slots:{default:[D$]},$$scope:{ctx:o}}});function O(R){o[19](R)}let M={label:"Current milestone",choices:o[11],emptyOption:!0};return o[6]!==void 0&&(M.value=o[6]),b=new Bt({props:M}),E.push(()=>B(b,"value",O)),{c(){e=S("div"),l=S("div"),w(t.$$.fragment),n=L(),w(r.$$.fragment),f=L(),w(i.$$.fragment),u=L(),c=S("div"),w($.$$.fragment),g=L(),w(b.$$.fragment),F(l,"class","govuk-grid-column-one-half"),F(c,"class","govuk-grid-column-one-half"),F(e,"class","govuk-grid-row")},m(R,D){d(R,e,D),p(e,l),v(t,l,null),p(l,n),v(r,l,null),p(l,f),v(i,l,null),p(e,u),p(e,c),v($,c,null),p(c,g),v(b,c,null),y=!0},p(R,D){const z={};D&1073741828&&(z.$$scope={dirty:D,ctx:R}),t.$set(z);const J={};D&1&&(J.options=fn(R[0])),!s&&D&2&&(s=!0,J.value=R[1],U(()=>s=!1)),r.$set(J);const ae={};D&1024&&(ae.choices=R[10]),!a&&D&16&&(a=!0,ae.value=R[4],U(()=>a=!1)),i.$set(ae);const G={};D&1073741856&&(G.$$scope={dirty:D,ctx:R}),$.$set(G);const K={};!C&&D&64&&(C=!0,K.value=R[6],U(()=>C=!1)),b.$set(K)},i(R){y||(m(t.$$.fragment,R),m(r.$$.fragment,R),m(i.$$.fragment,R),m($.$$.fragment,R),m(b.$$.fragment,R),y=!0)},o(R){_(t.$$.fragment,R),_(r.$$.fragment,R),_(i.$$.fragment,R),_($.$$.fragment,R),_(b.$$.fragment,R),y=!1},d(R){R&&h(e),k(t),k(r),k(i),k($),k(b)}}}function M$(o){let e;return{c(){e=T("Clear")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function O$(o){let e,l,t,n,r,s;return t=new Ee({props:{$$slots:{default:[M$]},$$scope:{ctx:o}}}),t.$on("click",o[21]),{c(){e=S("input"),l=L(),w(t.$$.fragment),F(e,"type","text"),F(e,"class","govuk-input govuk-input--width-10"),F(e,"id","filterInterventionText")},m(f,i){d(f,e,i),tt(e,o[2]),d(f,l,i),v(t,f,i),n=!0,r||(s=mt(e,"input",o[20]),r=!0)},p(f,i){i&4&&e.value!==f[2]&&tt(e,f[2]);const a={};i&1073741824&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){_(t.$$.fragment,f),n=!1},d(f){f&&(h(e),h(l)),k(t,f),r=!1,s()}}}function j$(o){let e;return{c(){e=T("Clear")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function N$(o){let e,l,t,n,r,s;return t=new Ee({props:{$$slots:{default:[j$]},$$scope:{ctx:o}}}),t.$on("click",o[15]),{c(){e=S("input"),l=L(),w(t.$$.fragment),F(e,"type","text"),F(e,"class","govuk-input govuk-input--width-10"),F(e,"id","filterInterventionText")},m(f,i){d(f,e,i),tt(e,o[2]),d(f,l,i),v(t,f,i),n=!0,r||(s=mt(e,"input",o[14]),r=!0)},p(f,i){i&4&&e.value!==f[2]&&tt(e,f[2]);const a={};i&1073741824&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){_(t.$$.fragment,f),n=!1},d(f){f&&(h(e),h(l)),k(t,f),r=!1,s()}}}function P$(o){let e=o[27]+"",l,t;return{c(){l=T(e),t=L()},m(n,r){d(n,l,r),d(n,t,r)},p:Z,d(n){n&&(h(l),h(t))}}}function zl(o){let e,l,t;function n(s){o[18](s,o[27])}let r={$$slots:{default:[P$]},$$scope:{ctx:o}};return o[5][o[27]]!==void 0&&(r.checked=o[5][o[27]]),e=new ze({props:r}),E.push(()=>B(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){o=s;const i={};f&1073741824&&(i.$$scope={dirty:f,ctx:o}),!l&&f&32&&(l=!0,i.checked=o[5][o[27]],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function R$(o){let e,l,t=me(Object.keys(Vt)),n=[];for(let s=0;s<t.length;s+=1)n[s]=zl(ql(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=_e()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);d(s,e,f),l=!0},p(s,f){if(f&32){t=me(Object.keys(Vt));let i;for(i=0;i<t.length;i+=1){const a=ql(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=zl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&h(e),He(n,s)}}}function D$(o){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[R$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&1073741856&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function F$(o){let e;return{c(){e=T("Done")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function G$(o){let e,l,t,n,r=o[9].interventions.toLocaleString()+"",s,f,i,a,u=o[8].size.toLocaleString()+"",c,$,g,b,C,y=Hl(o[9].totalLength).toFixed(1)+"",I,j,P,N,O,M,R,D,z,J;N=new Ee({props:{$$slots:{default:[C$]},$$scope:{ctx:o}}}),N.$on("click",o[12]);const ae=[I$,L$],G=[];function K(H,ue){return H[3]=="ATF"?0:1}return M=K(o),R=G[M]=ae[M](o),z=new So({props:{$$slots:{default:[F$]},$$scope:{ctx:o}}}),z.$on("click",o[24]),{c(){e=S("p"),e.textContent="Showing:",l=L(),t=S("ul"),n=S("li"),s=T(r),f=T(" interventions"),i=L(),a=S("li"),c=T(u),$=T(" schemes"),g=L(),b=S("li"),C=T("total route length of "),I=T(y),j=T(" miles"),P=L(),w(N.$$.fragment),O=L(),R.c(),D=L(),w(z.$$.fragment)},m(H,ue){d(H,e,ue),d(H,l,ue),d(H,t,ue),p(t,n),p(n,s),p(n,f),p(t,i),p(t,a),p(a,c),p(a,$),p(t,g),p(t,b),p(b,C),p(b,I),p(b,j),d(H,P,ue),v(N,H,ue),d(H,O,ue),G[M].m(H,ue),d(H,D,ue),v(z,H,ue),J=!0},p(H,ue){(!J||ue&512)&&r!==(r=H[9].interventions.toLocaleString()+"")&&A(s,r),(!J||ue&256)&&u!==(u=H[8].size.toLocaleString()+"")&&A(c,u),(!J||ue&512)&&y!==(y=Hl(H[9].totalLength).toFixed(1)+"")&&A(I,y);const Ce={};ue&1073741824&&(Ce.$$scope={dirty:ue,ctx:H}),N.$set(Ce);let qe=M;M=K(H),M===qe?G[M].p(H,ue):(be(),_(G[qe],1,1,()=>{G[qe]=null}),we(),R=G[M],R?R.p(H,ue):(R=G[M]=ae[M](H),R.c()),m(R,1),R.m(D.parentNode,D));const Xe={};ue&1073741824&&(Xe.$$scope={dirty:ue,ctx:H}),z.$set(Xe)},i(H){J||(m(N.$$.fragment,H),m(R),m(z.$$.fragment,H),J=!0)},o(H){_(N.$$.fragment,H),_(R),_(z.$$.fragment,H),J=!1},d(H){H&&(h(e),h(l),h(t),h(P),h(O),h(D)),k(N,H),G[M].d(H),k(z,H)}}}function A$(o){let e,l,t,n,r;e=new Ee({props:{$$slots:{default:[T$]},$$scope:{ctx:o}}}),e.$on("click",o[13]);function s(i){o[25](i)}let f={title:`Filter ${o[3]} schemes`,$$slots:{default:[G$]},$$scope:{ctx:o}};return o[7]!==void 0&&(f.open=o[7]),t=new eo({props:f}),E.push(()=>B(t,"open",s)),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(i,a){v(e,i,a),d(i,l,a),v(t,i,a),r=!0},p(i,[a]){const u={};a&1073741824&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&8&&(c.title=`Filter ${i[3]} schemes`),a&1073743871&&(c.$$scope={dirty:a,ctx:i}),!n&&a&128&&(n=!0,c.open=i[7],U(()=>n=!1)),t.$set(c)},i(i){r||(m(e.$$.fragment,i),m(t.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),r=!1},d(i){i&&h(l),k(e,i),k(t,i)}}}function q$(o){var t;let e=new Set;for(let n of Object.values(o.schemes))(t=n.browse)!=null&&t.authority_or_region&&e.add(n.browse.authority_or_region);let l=Array.from(e.entries());return l.sort(),l}function Hl(o){return o*621371e-9}function fn(o){let e=[];for(let l of Object.values(o.schemes))e.push([l.scheme_reference,l.scheme_reference]),l.scheme_name&&e.push([l.scheme_name,l.scheme_name]);return e}function z$(o,e,l){let t,{source:n}=e,{schemesGj:r}=e,{filterSchemeText:s}=e,{filterInterventionText:f}=e,i=!1,a=new Set,u={interventions:0,totalLength:0},c=Object.keys(vn).map(H=>[H,H]),$="",g=Object.fromEntries(Object.keys(Vt).map(H=>[H,!0])),b="";function C(H,ue,Ce,qe,Xe){let Ie=H.toLowerCase(),rt=ue.toLowerCase(),Yt=de=>{var Ue,at,ft,W;if(Ie&&!((Ue=de.properties.name)!=null&&Ue.toLowerCase().includes(Ie))&&!((at=de.properties.description)!=null&&at.toLowerCase().includes(Ie)))return!1;let Me=r.schemes[de.properties.scheme_reference];return!(Ce&&((ft=Me.browse)==null?void 0:ft.authority_or_region)!=Ce||n=="ATF"&&Me.browse.funding_programme&&!qe[Me.browse.funding_programme]||Xe&&((W=Me.browse)==null?void 0:W.current_milestone)!=Xe||rt&&!Me.scheme_reference.toLowerCase().includes(rt)&&!(Me.scheme_name??"").toLowerCase().includes(rt))};l(8,a=new Set(r.features.filter(Yt).map(de=>de.properties.scheme_reference))),l(9,u={interventions:0,totalLength:0});let it=de=>{var Me,Ue;return!(!a.has(de.properties.scheme_reference)||Ie&&!((Me=de.properties.name)!=null&&Me.toLowerCase().includes(Ie))&&!((Ue=de.properties.description)!=null&&Ue.toLowerCase().includes(Ie)))};for(let de of r.features)it(de)?(delete de.properties.hide_while_editing,l(9,u.interventions++,u),de.geometry.type=="LineString"&&de.properties.length_meters&&l(9,u.totalLength+=de.properties.length_meters,u)):de.properties.hide_while_editing=!0;l(0,r),l(9,u)}function y(){l(4,$=""),l(5,g=Object.fromEntries(Object.keys(Vt).map(H=>[H,!0]))),l(6,b=""),l(2,f=""),l(1,s="")}const I=()=>l(7,i=!0);function j(){f=this.value,l(2,f)}const P=()=>l(2,f="");function N(H){s=H,l(1,s)}function O(H){$=H,l(4,$)}function M(H,ue){o.$$.not_equal(g[ue],H)&&(g[ue]=H,l(5,g))}function R(H){b=H,l(6,b)}function D(){f=this.value,l(2,f)}const z=()=>l(2,f="");function J(H){s=H,l(1,s)}function ae(H){$=H,l(4,$)}const G=()=>l(7,i=!1);function K(H){i=H,l(7,i)}return o.$$set=H=>{"source"in H&&l(3,n=H.source),"schemesGj"in H&&l(0,r=H.schemesGj),"filterSchemeText"in H&&l(1,s=H.filterSchemeText),"filterInterventionText"in H&&l(2,f=H.filterInterventionText)},o.$$.update=()=>{o.$$.dirty&1&&l(10,t=q$(r)),o.$$.dirty&118&&C(f,s,$,g,b)},[r,s,f,n,$,g,b,i,a,u,t,c,y,I,j,P,N,O,M,R,D,z,J,ae,G,K]}class In extends X{constructor(e){super(),x(this,e,z$,A$,Q,{source:3,schemesGj:0,filterSchemeText:1,filterInterventionText:2})}}const rn=Le({type:"FeatureCollection",features:[],schemes:{}}),El=Le(""),Bl=Le(""),cn=Le({type:"FeatureCollection",features:[],schemes:{}}),Ul=Le(""),Wl=Le(""),pn=Le({type:"FeatureCollection",features:[],schemes:{}}),Yl=Le(""),Jl=Le("");function Vl(o){let e,l,t,n=o[0].status+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Status",t=T(`
    : `),r=T(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&1&&n!==(n=s[0].status+"")&&A(r,n)},d(s){s&&h(e)}}}function Ql(o){let e,l,t,n=o[0].timescale+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Timescale",t=T(`
    : `),r=T(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&1&&n!==(n=s[0].timescale+"")&&A(r,n)},d(s){s&&h(e)}}}function Zl(o){let e,l,t,n=o[0].timescale_year+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Estimated completion year",t=T(`
    : `),r=T(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&1&&n!==(n=s[0].timescale_year+"")&&A(r,n)},d(s){s&&h(e)}}}function Kl(o){let e,l,t,n=o[0].year_published+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme most recently published",t=T(`
    : `),r=T(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&1&&n!==(n=s[0].year_published+"")&&A(r,n)},d(s){s&&h(e)}}}function Xl(o){let e,l,t,n=o[0].year_consulted+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme most recently consulted on",t=T(`
    : `),r=T(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&1&&n!==(n=s[0].year_consulted+"")&&A(r,n)},d(s){s&&h(e)}}}function H$(o){let e,l,t,n,r,s=o[0].status&&Vl(o),f=o[0].timescale&&Ql(o),i=o[0].timescale_year&&Zl(o),a=o[0].year_published&&Kl(o),u=o[0].year_consulted&&Xl(o);return{c(){s&&s.c(),e=L(),f&&f.c(),l=L(),i&&i.c(),t=L(),a&&a.c(),n=L(),u&&u.c(),r=_e()},m(c,$){s&&s.m(c,$),d(c,e,$),f&&f.m(c,$),d(c,l,$),i&&i.m(c,$),d(c,t,$),a&&a.m(c,$),d(c,n,$),u&&u.m(c,$),d(c,r,$)},p(c,[$]){c[0].status?s?s.p(c,$):(s=Vl(c),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c[0].timescale?f?f.p(c,$):(f=Ql(c),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),c[0].timescale_year?i?i.p(c,$):(i=Zl(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,$):(a=Kl(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[0].year_consulted?u?u.p(c,$):(u=Xl(c),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},i:Z,o:Z,d(c){c&&(h(e),h(l),h(t),h(n),h(r)),s&&s.d(c),f&&f.d(c),i&&i.d(c),a&&a.d(c),u&&u.d(c)}}}function E$(o,e,l){let{props:t}=e;return o.$$set=n=>{"props"in n&&l(0,t=n.props)},[t]}class Hr extends X{constructor(e){super(),x(this,e,E$,H$,Q,{props:0})}}function xl(o){let e,l,t,n=o[0].budget.toLocaleString()+"",r,s;return{c(){e=S("p"),l=S("b"),l.textContent="Cost",t=T(`
    : `),r=T(n),s=T(`
    GBP`)},m(f,i){d(f,e,i),p(e,l),p(e,t),p(e,r),p(e,s)},p(f,i){i&1&&n!==(n=f[0].budget.toLocaleString()+"")&&A(r,n)},d(f){f&&h(e)}}}function er(o){let e;return{c(){e=S("p"),e.textContent="Development is fully funded"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function tr(o){let e;return{c(){e=S("p"),e.textContent="Construction is fully funded"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function nr(o){let e,l,t,n;return{c(){e=S("p"),l=S("b"),l.textContent="Funding sources",t=T(`
    : `),n=T(o[1])},m(r,s){d(r,e,s),p(e,l),p(e,t),p(e,n)},p(r,s){s&2&&A(n,r[1])},d(r){r&&h(e)}}}function B$(o){let e,l,t,n,r=o[0].budget&&xl(o),s=o[0].development_funded&&er(),f=o[0].construction_funded&&tr(),i=o[1]&&nr(o);return{c(){r&&r.c(),e=L(),s&&s.c(),l=L(),f&&f.c(),t=L(),i&&i.c(),n=_e()},m(a,u){r&&r.m(a,u),d(a,e,u),s&&s.m(a,u),d(a,l,u),f&&f.m(a,u),d(a,t,u),i&&i.m(a,u),d(a,n,u)},p(a,[u]){a[0].budget?r?r.p(a,u):(r=xl(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),a[0].development_funded?s||(s=er(),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null),a[0].construction_funded?f||(f=tr(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),a[1]?i?i.p(a,u):(i=nr(a),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:Z,o:Z,d(a){a&&(h(e),h(l),h(t),h(n)),r&&r.d(a),s&&s.d(a),f&&f.d(a),i&&i.d(a)}}}function U$(o){if(!o.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])o.funding_sources[l]&&e.push(l.toUpperCase());return o.funding_sources.other&&e.push(o.funding_sources.other),e.join(", ")}function W$(o,e,l){let t,{props:n}=e;return o.$$set=r=>{"props"in r&&l(0,n=r.props)},o.$$.update=()=>{o.$$.dirty&1&&l(1,t=U$(n))},[n,t]}class Er extends X{constructor(e){super(),x(this,e,W$,B$,Q,{props:0})}}function $n(o){const e=o.slice(),l=e[5].pipeline;return e[11]=l,e}function mn(o){const e=o.slice(),l=JSON.parse(e[1].v2);return e[11]=l,e}function _n(o){const e=o.slice(),l=JSON.parse(e[1].pipeline);return e[11]=l,e}function lr(o){let e,l,t,n=Bn(o[1].length_meters)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Length",t=T(`
        : `),r=T(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&2&&n!==(n=Bn(s[1].length_meters)+"")&&A(r,n)},d(s){s&&h(e)}}}function rr(o){let e,l=ct(o[1].description,o[3])+"";return{c(){e=S("p")},m(t,n){d(t,e,n),e.innerHTML=l},p(t,n){n&10&&l!==(l=ct(t[1].description,t[3])+"")&&(e.innerHTML=l)},d(t){t&&h(e)}}}function or(o){let e,l,t,n,r,s,f,i=o[11].atf4_type&&sr(o),a=o[11].accuracy&&ir(o),u=o[11].is_alternative&&ar();return n=new Er({props:{props:o[11]}}),s=new Hr({props:{props:o[11]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment)},m(c,$){i&&i.m(c,$),d(c,e,$),a&&a.m(c,$),d(c,l,$),u&&u.m(c,$),d(c,t,$),v(n,c,$),d(c,r,$),v(s,c,$),f=!0},p(c,$){c[11].atf4_type?i?i.p(c,$):(i=sr(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[11].accuracy?a?a.p(c,$):(a=ir(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[11].is_alternative?u||(u=ar(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const g={};$&2&&(g.props=c[11]),n.$set(g);const b={};$&2&&(b.props=c[11]),s.$set(b)},i(c){f||(m(n.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),f=!1},d(c){c&&(h(e),h(l),h(t),h(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),k(n,c),k(s,c)}}}function sr(o){let e,l,t,n=o[11].atf4_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="ATF4 type",t=T(`
          : `),r=T(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&2&&n!==(n=s[11].atf4_type+"")&&A(r,n)},d(s){s&&h(e)}}}function ir(o){let e,l,t,n=o[11].accuracy+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Accuracy",t=T(`
          : `),r=T(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&2&&n!==(n=s[11].accuracy+"")&&A(r,n)},d(s){s&&h(e)}}}function ar(o){let e;return{c(){e=S("p"),e.textContent="Represents an alternative route"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function fr(o){let e,l,t,n=o[11].intervention_type&&ur(o),r=o[11].work_type&&cr(o);function s(a,u){if(a[11].for_cycling&&a[1].v2.for_walking_wheeling)return V$;if(a[11].for_cycling)return J$;if(a[11].for_walking_wheeling)return Y$}let f=s(o),i=f&&f(o);return{c(){n&&n.c(),e=L(),r&&r.c(),l=L(),i&&i.c(),t=_e()},m(a,u){n&&n.m(a,u),d(a,e,u),r&&r.m(a,u),d(a,l,u),i&&i.m(a,u),d(a,t,u)},p(a,u){a[11].intervention_type?n?n.p(a,u):(n=ur(a),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),a[11].work_type?r?r.p(a,u):(r=cr(a),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null),f!==(f=s(a))&&(i&&i.d(1),i=f&&f(a),i&&(i.c(),i.m(t.parentNode,t)))},d(a){a&&(h(e),h(l),h(t)),n&&n.d(a),r&&r.d(a),i&&i.d(a)}}}function ur(o){let e,l,t,n=o[11].intervention_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Type",t=T(`
          : `),r=T(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&2&&n!==(n=s[11].intervention_type+"")&&A(r,n)},d(s){s&&h(e)}}}function cr(o){let e,l,t,n=o[11].work_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="What kind of infrastructure is mapped",t=T(`
          : `),r=T(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&2&&n!==(n=s[11].work_type+"")&&A(r,n)},d(s){s&&h(e)}}}function Y$(o){let e;return{c(){e=S("p"),e.textContent="Only for walking and wheeling"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function J$(o){let e;return{c(){e=S("p"),e.textContent="Only for cycling"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function V$(o){let e;return{c(){e=S("p"),e.textContent="For cycling, walking, and wheeling"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function pr(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.capital_scheme_id)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Capital scheme ID",t=T(`
        : `),r=T(n)},m(f,i){d(f,e,i),p(e,l),p(e,t),p(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.capital_scheme_id)+"")&&A(r,n)},d(f){f&&h(e)}}}function $r(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.funding_programme)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Funding programme",t=T(`
        : `),r=T(n)},m(f,i){d(f,e,i),p(e,l),p(e,t),p(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.funding_programme)+"")&&A(r,n)},d(f){f&&h(e)}}}function mr(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.current_milestone)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Current milestone",t=T(`
        : `),r=T(n)},m(f,i){d(f,e,i),p(e,l),p(e,t),p(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.current_milestone)+"")&&A(r,n)},d(f){f&&h(e)}}}function _r(o){let e,l,t,n,r,s,f,i=o[11].scheme_type&&gr(o),a=o[11].atf4_lead_type&&dr(o),u=o[11].scheme_description&&hr(o);return n=new Er({props:{props:o[11]}}),s=new Hr({props:{props:o[11]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment)},m(c,$){i&&i.m(c,$),d(c,e,$),a&&a.m(c,$),d(c,l,$),u&&u.m(c,$),d(c,t,$),v(n,c,$),d(c,r,$),v(s,c,$),f=!0},p(c,$){c[11].scheme_type?i?i.p(c,$):(i=gr(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[11].atf4_lead_type?a?a.p(c,$):(a=dr(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[11].scheme_description?u?u.p(c,$):(u=hr(c),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const g={};$&32&&(g.props=c[11]),n.$set(g);const b={};$&32&&(b.props=c[11]),s.$set(b)},i(c){f||(m(n.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),f=!1},d(c){c&&(h(e),h(l),h(t),h(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),k(n,c),k(s,c)}}}function gr(o){let e,l,t,n=o[11].scheme_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme type",t=T(`
          : `),r=T(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&32&&n!==(n=s[11].scheme_type+"")&&A(r,n)},d(s){s&&h(e)}}}function dr(o){let e,l,t,n=o[11].atf4_lead_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="ATF4 lead type",t=T(`
          : `),r=T(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&32&&n!==(n=s[11].atf4_lead_type+"")&&A(r,n)},d(s){s&&h(e)}}}function hr(o){let e,l,t,n=o[11].scheme_description+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Descripton",t=T(`
          : `),r=T(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&32&&n!==(n=s[11].scheme_description+"")&&A(r,n)},d(s){s&&h(e)}}}function Q$(o){let e;return{c(){e=T("Edit a copy of this scheme")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Z$(o){let e;return{c(){e=T("Edit your existing version of this scheme")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function K$(o){let e;function l(r,s){var f;return(f=r[5].browse)!=null&&f.local_filename?Z$:Q$}let t=l(o),n=t(o);return{c(){n.c(),e=_e()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function X$(o){let e;return{c(){e=T("Zoom to show entire scheme")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function br(o){var On,jn,Nn,Pn;let e,l,t,n,r,s,f,i=ct(o[1].name,o[3])+"",a,u=o[1].intervention_type+"",c,$,g,b,C,y,I,j,P,N,O,M,R,D,z,J,ae=ct(o[5].scheme_name??"",o[2])+"",G,K,H,ue,Ce,qe=ct(o[1].scheme_reference,o[2])+"",Xe,Ie,rt,Yt,it=((On=o[5].browse)==null?void 0:On.authority_or_region)+"",de,Me,Ue,at,ft,W,xe,nn,ut,et,Oe=o[1].length_meters&&lr(o),je=o[1].description&&rr(o),ke=o[1].pipeline&&or(_n(o)),Ne=o[1].v2&&fr(mn(o)),Pe=((jn=o[5].browse)==null?void 0:jn.capital_scheme_id)&&pr(o),Re=((Nn=o[5].browse)==null?void 0:Nn.funding_programme)&&$r(o),De=((Pn=o[5].browse)==null?void 0:Pn.current_milestone)&&mr(o),ye=o[5].pipeline&&_r($n(o));return xe=new Ee({props:{$$slots:{default:[K$]},$$scope:{ctx:o}}}),xe.$on("click",o[7]),ut=new Ee({props:{$$slots:{default:[X$]},$$scope:{ctx:o}}}),ut.$on("click",o[6]),{c(){e=S("div"),l=S("h2"),l.textContent="Intervention",t=L(),n=S("p"),r=S("b"),r.textContent="Name",s=T(`
      : `),f=new Et(!1),a=T(" ("),c=T(u),$=T(")"),g=L(),Oe&&Oe.c(),b=L(),je&&je.c(),C=L(),ke&&ke.c(),y=L(),Ne&&Ne.c(),I=L(),j=S("hr"),P=L(),N=S("h2"),O=T(o[0]),M=L(),R=S("p"),D=S("b"),D.textContent="Scheme name",z=T(`
      : `),J=new Et(!1),G=L(),K=S("p"),H=S("b"),H.textContent="Scheme reference",ue=T(`
      : `),Ce=new Et(!1),Xe=L(),Ie=S("p"),rt=S("b"),rt.textContent="Authority or region",Yt=T(`
      : `),de=T(it),Me=L(),Pe&&Pe.c(),Ue=L(),Re&&Re.c(),at=L(),De&&De.c(),ft=L(),ye&&ye.c(),W=L(),w(xe.$$.fragment),nn=L(),w(ut.$$.fragment),f.a=a,J.a=null,Ce.a=null,re(e,"max-width","30vw"),re(e,"max-height","60vh"),re(e,"overflow","auto")},m(oe,he){d(oe,e,he),p(e,l),p(e,t),p(e,n),p(n,r),p(n,s),f.m(i,n),p(n,a),p(n,c),p(n,$),p(e,g),Oe&&Oe.m(e,null),p(e,b),je&&je.m(e,null),p(e,C),ke&&ke.m(e,null),p(e,y),Ne&&Ne.m(e,null),p(e,I),p(e,j),p(e,P),p(e,N),p(N,O),p(e,M),p(e,R),p(R,D),p(R,z),J.m(ae,R),p(e,G),p(e,K),p(K,H),p(K,ue),Ce.m(qe,K),p(e,Xe),p(e,Ie),p(Ie,rt),p(Ie,Yt),p(Ie,de),p(e,Me),Pe&&Pe.m(e,null),p(e,Ue),Re&&Re.m(e,null),p(e,at),De&&De.m(e,null),p(e,ft),ye&&ye.m(e,null),p(e,W),v(xe,e,null),p(e,nn),v(ut,e,null),o[9](e),et=!0},p(oe,he){var Fn,Gn,An,qn;(!et||he&10)&&i!==(i=ct(oe[1].name,oe[3])+"")&&f.p(i),(!et||he&2)&&u!==(u=oe[1].intervention_type+"")&&A(c,u),oe[1].length_meters?Oe?Oe.p(oe,he):(Oe=lr(oe),Oe.c(),Oe.m(e,b)):Oe&&(Oe.d(1),Oe=null),oe[1].description?je?je.p(oe,he):(je=rr(oe),je.c(),je.m(e,C)):je&&(je.d(1),je=null),oe[1].pipeline?ke?(ke.p(_n(oe),he),he&2&&m(ke,1)):(ke=or(_n(oe)),ke.c(),m(ke,1),ke.m(e,y)):ke&&(be(),_(ke,1,1,()=>{ke=null}),we()),oe[1].v2?Ne?Ne.p(mn(oe),he):(Ne=fr(mn(oe)),Ne.c(),Ne.m(e,I)):Ne&&(Ne.d(1),Ne=null),(!et||he&1)&&A(O,oe[0]),(!et||he&36)&&ae!==(ae=ct(oe[5].scheme_name??"",oe[2])+"")&&J.p(ae),(!et||he&6)&&qe!==(qe=ct(oe[1].scheme_reference,oe[2])+"")&&Ce.p(qe),(!et||he&32)&&it!==(it=((Fn=oe[5].browse)==null?void 0:Fn.authority_or_region)+"")&&A(de,it),(Gn=oe[5].browse)!=null&&Gn.capital_scheme_id?Pe?Pe.p(oe,he):(Pe=pr(oe),Pe.c(),Pe.m(e,Ue)):Pe&&(Pe.d(1),Pe=null),(An=oe[5].browse)!=null&&An.funding_programme?Re?Re.p(oe,he):(Re=$r(oe),Re.c(),Re.m(e,at)):Re&&(Re.d(1),Re=null),(qn=oe[5].browse)!=null&&qn.current_milestone?De?De.p(oe,he):(De=mr(oe),De.c(),De.m(e,ft)):De&&(De.d(1),De=null),oe[5].pipeline?ye?(ye.p($n(oe),he),he&32&&m(ye,1)):(ye=_r($n(oe)),ye.c(),m(ye,1),ye.m(e,W)):ye&&(be(),_(ye,1,1,()=>{ye=null}),we());const Rn={};he&4128&&(Rn.$$scope={dirty:he,ctx:oe}),xe.$set(Rn);const Dn={};he&4096&&(Dn.$$scope={dirty:he,ctx:oe}),ut.$set(Dn)},i(oe){et||(m(ke),m(ye),m(xe.$$.fragment,oe),m(ut.$$.fragment,oe),et=!0)},o(oe){_(ke),_(ye),_(xe.$$.fragment,oe),_(ut.$$.fragment,oe),et=!1},d(oe){oe&&h(e),Oe&&Oe.d(),je&&je.d(),ke&&ke.d(),Ne&&Ne.d(),Pe&&Pe.d(),Re&&Re.d(),De&&De.d(),ye&&ye.d(),k(xe),k(ut),o[9](null)}}}function x$(o){let e=o[1],l,t,n=br(o);return{c(){n.c(),l=_e()},m(r,s){n.m(r,s),d(r,l,s),t=!0},p(r,[s]){s&2&&Q(e,e=r[1])?(be(),_(n,1,1,Z),we(),n=br(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&h(l),n.d(r)}}}function ct(o,e){return e?o.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):o}function em(o,e,l){let t,n;Y(o,un,b=>l(10,n=b));let{description:r}=e,{props:s}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,u;Zr(()=>{u&&l(4,u.scrollTop=0,u)});function c(){let b={type:"FeatureCollection",features:f.features.filter(C=>C.properties.scheme_reference==t.scheme_reference)};n==null||n.fitBounds(Rr(b),{padding:20,animate:!1})}function $(){var I,j,P;let b={type:"FeatureCollection",features:f.features.filter(N=>N.properties.scheme_reference==t.scheme_reference),schemes:{}};b.schemes[t.scheme_reference]=t;let C=(I=t.browse)==null?void 0:I.authority_or_region;if(!C){window.alert("This scheme has no authority specified, you can't edit this");return}let y=t.pipeline?"pipeline":t.v2?"v2":"v1";if((j=t.browse)!=null&&j.local_filename)window.open(En(C,(P=t.browse)==null?void 0:P.local_filename,y),"_blank");else{let N=`browse_copy_${t.scheme_reference}`,O=to(C,b);for(let M of O.features)delete M.properties.funding_programme,delete M.properties.current_milestone;no(lo(C,N),JSON.stringify(O)),window.open(En(C,N,y),"_blank")}}function g(b){E[b?"unshift":"push"](()=>{u=b,l(4,u)})}return o.$$set=b=>{"description"in b&&l(0,r=b.description),"props"in b&&l(1,s=b.props),"schemesGj"in b&&l(8,f=b.schemesGj),"filterSchemeText"in b&&l(2,i=b.filterSchemeText),"filterInterventionText"in b&&l(3,a=b.filterInterventionText)},o.$$.update=()=>{o.$$.dirty&258&&l(5,t=f.schemes[s.scheme_reference])},[r,s,i,a,u,t,c,$,f,g]}class Mn extends X{constructor(e){super(),x(this,e,em,x$,Q,{description:0,props:1,schemesGj:8,filterSchemeText:2,filterInterventionText:3})}}function tm(o){let e,l=o[10].name+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&A(t,l)},d(n){n&&h(e)}}}function nm(o){let e,l;return e=new Mn({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function lm(o){let e,l,t,n;return e=new ie({props:{popupClass:"border-popup",$$slots:{default:[tm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ie({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[nm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){v(e,r,s),d(r,l,s),v(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&h(l),k(e,r),k(t,r)}}}function rm(o){let e,l=o[10].name+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&A(t,l)},d(n){n&&h(e)}}}function om(o){let e,l;return e=new Mn({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function sm(o){let e,l,t,n;return e=new ie({props:{popupClass:"border-popup",$$slots:{default:[rm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ie({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[om,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){v(e,r,s),d(r,l,s),v(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&h(l),k(e,r),k(t,r)}}}function im(o){let e,l=o[10].name+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&A(t,l)},d(n){n&&h(e)}}}function am(o){let e,l;return e=new Mn({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function fm(o){let e,l,t,n;return e=new ie({props:{popupClass:"border-popup",$$slots:{default:[im,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ie({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[am,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){v(e,r,s),d(r,l,s),v(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&h(l),k(e,r),k(t,r)}}}function um(o){let e,l,t,n,r,s,f,i,a,u;const c=[q(`${o[0]}-interventions-points`),{filter:["all",Jn,o[8],o[9]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":o[6],"circle-radius":Un,"circle-opacity":ee(1,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let $={$$slots:{default:[lm]},$$scope:{ctx:o}};for(let O=0;O<c.length;O+=1)$=te($,c[O]);e=new Ut({props:$});const g=[q(`${o[0]}-interventions-lines`),{filter:["all",Vn,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[6],"line-width":Zt,"line-opacity":ee(1,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let b={$$slots:{default:[sm]},$$scope:{ctx:o}};for(let O=0;O<g.length;O+=1)b=te(b,g[O]);t=new ge({props:b});const C=[q(`${o[0]}-interventions-lines-endpoints`),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Zt,"circle-opacity":0,"circle-stroke-color":nt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:o[2]?"visible":"none"}}];let y={};for(let O=0;O<C.length;O+=1)y=te(y,C[O]);r=new Ut({props:y});const I=[q(`${o[0]}-interventions-polygons`),{filter:["all",ln,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":o[6],"fill-opacity":ee(.2,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let j={$$slots:{default:[fm]},$$scope:{ctx:o}};for(let O=0;O<I.length;O+=1)j=te(j,I[O]);f=new Ae({props:j});const P=[q(`${o[0]}-interventions-polygons-outlines`),{filter:["all",ln,o[8]]},{paint:{"line-color":o[6],"line-opacity":.5,"line-width":.7*Zt}},{layout:{visibility:o[2]?"visible":"none"}}];let N={};for(let O=0;O<P.length;O+=1)N=te(N,P[O]);return a=new ge({props:N}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment)},m(O,M){v(e,O,M),d(O,l,M),v(t,O,M),d(O,n,M),v(r,O,M),d(O,s,M),v(f,O,M),d(O,i,M),v(a,O,M),u=!0},p(O,M){const R=M&837?ne(c,[M&1&&se(q(`${O[0]}-interventions-points`)),M&768&&{filter:["all",Jn,O[8],O[9]]},c[2],c[3],M&64&&{paint:{"circle-color":O[6],"circle-radius":Un,"circle-opacity":ee(1,.5)}},M&4&&{layout:{visibility:O[2]?"visible":"none"}},c[6]]):{};M&2106&&(R.$$scope={dirty:M,ctx:O}),e.$set(R);const D=M&325?ne(g,[M&1&&se(q(`${O[0]}-interventions-lines`)),M&256&&{filter:["all",Vn,O[8]]},g[2],g[3],M&64&&{paint:{"line-color":O[6],"line-width":Zt,"line-opacity":ee(1,.5)}},M&4&&{layout:{visibility:O[2]?"visible":"none"}},g[6]]):{};M&2106&&(D.$$scope={dirty:M,ctx:O}),t.$set(D);const z=M&5?ne(C,[M&1&&se(q(`${O[0]}-interventions-lines-endpoints`)),C[1],C[2],M&4&&{layout:{visibility:O[2]?"visible":"none"}}]):{};r.$set(z);const J=M&325?ne(I,[M&1&&se(q(`${O[0]}-interventions-polygons`)),M&256&&{filter:["all",ln,O[8]]},I[2],I[3],M&64&&{paint:{"fill-color":O[6],"fill-opacity":ee(.2,.5)}},M&4&&{layout:{visibility:O[2]?"visible":"none"}},I[6]]):{};M&2106&&(J.$$scope={dirty:M,ctx:O}),f.$set(J);const ae=M&325?ne(P,[M&1&&se(q(`${O[0]}-interventions-polygons-outlines`)),M&256&&{filter:["all",ln,O[8]]},M&64&&{paint:{"line-color":O[6],"line-opacity":.5,"line-width":.7*Zt}},M&4&&{layout:{visibility:O[2]?"visible":"none"}}]):{};a.$set(ae)},i(O){u||(m(e.$$.fragment,O),m(t.$$.fragment,O),m(r.$$.fragment,O),m(f.$$.fragment,O),m(a.$$.fragment,O),u=!0)},o(O){_(e.$$.fragment,O),_(t.$$.fragment,O),_(r.$$.fragment,O),_(f.$$.fragment,O),_(a.$$.fragment,O),u=!1},d(O){O&&(h(l),h(n),h(s),h(i)),k(e,O),k(t,O),k(r,O),k(f,O),k(a,O)}}}function cm(o){let e,l;return e=new Wt({props:{data:o[7],$$slots:{default:[um]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,[n]){const r={};n&128&&(r.data=t[7]),n&2175&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function pm(o,e,l){let t,{name:n}=e,{description:r}=e,{show:s}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,{color:u}=e;const c=["!=",["get","hide_while_editing"],!0],$=["!=",["get","endpoint"],!0];return o.$$set=g=>{"name"in g&&l(0,n=g.name),"description"in g&&l(1,r=g.description),"show"in g&&l(2,s=g.show),"schemesGj"in g&&l(3,f=g.schemesGj),"filterSchemeText"in g&&l(4,i=g.filterSchemeText),"filterInterventionText"in g&&l(5,a=g.filterInterventionText),"color"in g&&l(6,u=g.color)},o.$$.update=()=>{o.$$.dirty&8&&l(7,t=co(f))},[n,r,s,f,i,a,u,t,c,$]}class gn extends X{constructor(e){super(),x(this,e,pm,cm,Q,{name:0,description:1,show:2,schemesGj:3,filterSchemeText:4,filterInterventionText:5,color:6})}}function $m(o){return Ke(["get","intervention_type"],{area:nt.area,route:nt.route,crossing:nt.crossing,other:nt.other},"white")}function mm(o){return[["Areas",nt.area],["Routes",nt.route],["Crossings",nt.crossing],["Other",nt.other]]}function wr(o,e,l){const t=o.slice();return t[41]=e[l],t}function vr(o,e,l){const t=o.slice();return t[41]=e[l],t}function kr(o,e,l){const t=o.slice();return t[41]=e[l],t}function _m(o){let e,l;return e=new v$({props:{loadFile:o[24]}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p:Z,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function yr(o){let e,l,t;function n(s){o[30](s)}let r={name:Br,title:Ur,$$slots:{controls:[dm],help:[gm]},$$scope:{ctx:o}};return o[12]!==void 0&&(r.show=o[12]),e=new fe({props:r}),E.push(()=>B(e,"show",n)),{c(){w(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f[0]&57473|f[1]&131072&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&4096&&(l=!0,i.show=s[12],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function Sr(o){let e,l,t=o[41]+"",n;return{c(){e=S("li"),l=S("p"),n=T(t)},m(r,s){d(r,e,s),p(e,l),p(l,n)},p(r,s){s[0]&8192&&t!==(t=r[41]+"")&&A(n,t)},d(r){r&&h(e)}}}function gm(o){let e,l,t,n,r,s,f;t=new Tn({props:{text:"Scheme data caveats"}});let i=me(o[13].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Sr(kr(o,i,u));return{c(){e=S("span"),l=S("p"),w(t.$$.fragment),n=T(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();F(e,"slot","help")},m(u,c){d(u,e,c),p(e,l),v(t,l,null),p(l,n),p(e,r),p(e,s);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(s,null);f=!0},p(u,c){if(c[0]&8192){i=me(u[13].notes??[]);let $;for($=0;$<i.length;$+=1){const g=kr(u,i,$);a[$]?a[$].p(g,c):(a[$]=Sr(g),a[$].c(),a[$].m(s,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&h(e),k(t),He(a,u)}}}function dm(o){let e,l,t,n,r,s,f,i,a,u,c;function $(j){o[26](j)}function g(j){o[27](j)}function b(j){o[28](j)}let C={source:"ATF"};o[13]!==void 0&&(C.schemesGj=o[13]),o[14]!==void 0&&(C.filterSchemeText=o[14]),o[15]!==void 0&&(C.filterInterventionText=o[15]),l=new In({props:C}),E.push(()=>B(l,"schemesGj",$)),E.push(()=>B(l,"filterSchemeText",g)),E.push(()=>B(l,"filterInterventionText",b));function y(j){o[29](j)}let I={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return o[0]!==void 0&&(I.value=o[0]),f=new Bt({props:I}),E.push(()=>B(f,"value",y)),u=new Qt({props:{rows:o[7]}}),{c(){e=S("div"),w(l.$$.fragment),s=L(),w(f.$$.fragment),a=L(),w(u.$$.fragment),F(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(j,P){d(j,e,P),v(l,e,null),p(e,s),v(f,e,null),p(e,a),v(u,e,null),c=!0},p(j,P){const N={};!t&&P[0]&8192&&(t=!0,N.schemesGj=j[13],U(()=>t=!1)),!n&&P[0]&16384&&(n=!0,N.filterSchemeText=j[14],U(()=>n=!1)),!r&&P[0]&32768&&(r=!0,N.filterInterventionText=j[15],U(()=>r=!1)),l.$set(N);const O={};!i&&P[0]&1&&(i=!0,O.value=j[0],U(()=>i=!1)),f.$set(O);const M={};P[0]&128&&(M.rows=j[7]),u.$set(M)},i(j){c||(m(l.$$.fragment,j),m(f.$$.fragment,j),m(u.$$.fragment,j),c=!0)},o(j){_(l.$$.fragment,j),_(f.$$.fragment,j),_(u.$$.fragment,j),c=!1},d(j){j&&h(e),k(l),k(f),k(u)}}}function Tr(o){let e,l,t;function n(s){o[35](s)}let r={name:Wr,title:Yr,$$slots:{controls:[bm],help:[hm]},$$scope:{ctx:o}};return o[11]!==void 0&&(r.show=o[11]),e=new fe({props:r}),E.push(()=>B(e,"show",n)),{c(){w(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f[0]&458786|f[1]&131072&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&2048&&(l=!0,i.show=s[11],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function Cr(o){let e,l,t=o[41]+"",n;return{c(){e=S("li"),l=S("p"),n=T(t)},m(r,s){d(r,e,s),p(e,l),p(l,n)},p(r,s){s[0]&65536&&t!==(t=r[41]+"")&&A(n,t)},d(r){r&&h(e)}}}function hm(o){let e,l,t,n,r,s,f;t=new Tn({props:{text:"Scheme data caveats"}});let i=me(o[16].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Cr(vr(o,i,u));return{c(){e=S("span"),l=S("p"),w(t.$$.fragment),n=T(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();F(e,"slot","help")},m(u,c){d(u,e,c),p(e,l),v(t,l,null),p(l,n),p(e,r),p(e,s);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(s,null);f=!0},p(u,c){if(c[0]&65536){i=me(u[16].notes??[]);let $;for($=0;$<i.length;$+=1){const g=vr(u,i,$);a[$]?a[$].p(g,c):(a[$]=Cr(g),a[$].c(),a[$].m(s,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&h(e),k(t),He(a,u)}}}function bm(o){let e,l,t,n,r,s,f,i,a,u,c;function $(j){o[31](j)}function g(j){o[32](j)}function b(j){o[33](j)}let C={source:"LCWIP"};o[16]!==void 0&&(C.schemesGj=o[16]),o[17]!==void 0&&(C.filterSchemeText=o[17]),o[18]!==void 0&&(C.filterInterventionText=o[18]),l=new In({props:C}),E.push(()=>B(l,"schemesGj",$)),E.push(()=>B(l,"filterSchemeText",g)),E.push(()=>B(l,"filterInterventionText",b));function y(j){o[34](j)}let I={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return o[1]!==void 0&&(I.value=o[1]),f=new Bt({props:I}),E.push(()=>B(f,"value",y)),u=new Qt({props:{rows:o[5]}}),{c(){e=S("div"),w(l.$$.fragment),s=L(),w(f.$$.fragment),a=L(),w(u.$$.fragment),F(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(j,P){d(j,e,P),v(l,e,null),p(e,s),v(f,e,null),p(e,a),v(u,e,null),c=!0},p(j,P){const N={};!t&&P[0]&65536&&(t=!0,N.schemesGj=j[16],U(()=>t=!1)),!n&&P[0]&131072&&(n=!0,N.filterSchemeText=j[17],U(()=>n=!1)),!r&&P[0]&262144&&(r=!0,N.filterInterventionText=j[18],U(()=>r=!1)),l.$set(N);const O={};!i&&P[0]&2&&(i=!0,O.value=j[1],U(()=>i=!1)),f.$set(O);const M={};P[0]&32&&(M.rows=j[5]),u.$set(M)},i(j){c||(m(l.$$.fragment,j),m(f.$$.fragment,j),m(u.$$.fragment,j),c=!0)},o(j){_(l.$$.fragment,j),_(f.$$.fragment,j),_(u.$$.fragment,j),c=!1},d(j){j&&h(e),k(l),k(f),k(u)}}}function wm(o){let e=Object.entries(o[13].schemes).length>0,l,t=Object.entries(o[16].schemes).length>0,n,r,s=e&&yr(o),f=t&&Tr(o);return{c(){s&&s.c(),l=L(),f&&f.c(),n=_e()},m(i,a){s&&s.m(i,a),d(i,l,a),f&&f.m(i,a),d(i,n,a),r=!0},p(i,a){a[0]&8192&&(e=Object.entries(i[13].schemes).length>0),e?s?(s.p(i,a),a[0]&8192&&m(s,1)):(s=yr(i),s.c(),m(s,1),s.m(l.parentNode,l)):s&&(be(),_(s,1,1,()=>{s=null}),we()),a[0]&65536&&(t=Object.entries(i[16].schemes).length>0),t?f?(f.p(i,a),a[0]&65536&&m(f,1)):(f=Tr(i),f.c(),m(f,1),f.m(n.parentNode,n)):f&&(be(),_(f,1,1,()=>{f=null}),we())},i(i){r||(m(s),m(f),r=!0)},o(i){_(s),_(f),r=!1},d(i){i&&(h(l),h(n)),s&&s.d(i),f&&f.d(i)}}}function vm(o){let e;return{c(){e=T("Show your sketches")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Lr(o){let e,l,t;function n(s){o[39](s)}let r={name:Jr,title:Vr,$$slots:{controls:[ym],help:[km]},$$scope:{ctx:o}};return o[9]!==void 0&&(r.show=o[9]),e=new fe({props:r}),E.push(()=>B(e,"show",n)),{c(){w(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f[0]&1573896|f[1]&131072&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&512&&(l=!0,i.show=s[9],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function Ir(o){let e,l,t=o[41]+"",n;return{c(){e=S("li"),l=S("p"),n=T(t)},m(r,s){d(r,e,s),p(e,l),p(l,n)},p(r,s){s[0]&1024&&t!==(t=r[41]+"")&&A(n,t)},d(r){r&&h(e)}}}function km(o){let e,l,t,n,r,s,f;t=new Tn({props:{text:"Scheme data caveats"}});let i=me(o[10].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Ir(wr(o,i,u));return{c(){e=S("span"),l=S("p"),w(t.$$.fragment),n=T(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();F(e,"slot","help")},m(u,c){d(u,e,c),p(e,l),v(t,l,null),p(l,n),p(e,r),p(e,s);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(s,null);f=!0},p(u,c){if(c[0]&1024){i=me(u[10].notes??[]);let $;for($=0;$<i.length;$+=1){const g=wr(u,i,$);a[$]?a[$].p(g,c):(a[$]=Ir(g),a[$].c(),a[$].m(s,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&h(e),k(t),He(a,u)}}}function ym(o){let e,l,t,n,r,s,f,i;function a(g){o[36](g)}function u(g){o[37](g)}function c(g){o[38](g)}let $={source:"Local"};return o[10]!==void 0&&($.schemesGj=o[10]),o[19]!==void 0&&($.filterSchemeText=o[19]),o[20]!==void 0&&($.filterInterventionText=o[20]),l=new In({props:$}),E.push(()=>B(l,"schemesGj",a)),E.push(()=>B(l,"filterSchemeText",u)),E.push(()=>B(l,"filterInterventionText",c)),f=new Qt({props:{rows:o[3]}}),{c(){e=S("div"),w(l.$$.fragment),s=L(),w(f.$$.fragment),F(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(g,b){d(g,e,b),v(l,e,null),p(e,s),v(f,e,null),i=!0},p(g,b){const C={};!t&&b[0]&1024&&(t=!0,C.schemesGj=g[10],U(()=>t=!1)),!n&&b[0]&524288&&(n=!0,C.filterSchemeText=g[19],U(()=>n=!1)),!r&&b[0]&1048576&&(r=!0,C.filterInterventionText=g[20],U(()=>r=!1)),l.$set(C);const y={};b[0]&8&&(y.rows=g[3]),f.$set(y)},i(g){i||(m(l.$$.fragment,g),m(f.$$.fragment,g),i=!0)},o(g){_(l.$$.fragment,g),_(f.$$.fragment,g),i=!1},d(g){g&&h(e),k(l),k(f)}}}function Sm(o){let e=Object.entries(o[10].schemes).length>0,l,t,n=e&&Lr(o);return{c(){n&&n.c(),l=_e()},m(r,s){n&&n.m(r,s),d(r,l,s),t=!0},p(r,s){s[0]&1024&&(e=Object.entries(r[10].schemes).length>0),e?n?(n.p(r,s),s[0]&1024&&m(n,1)):(n=Lr(r),n.c(),m(n,1),n.m(l.parentNode,l)):n&&(be(),_(n,1,1,()=>{n=null}),we())},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&h(l),n&&n.d(r)}}}function Tm(o){let e=Pr()=="Private (development)",l,t,n,r,s,f,i,a,u,c,$,g,b,C=e&&_m(o);return t=new Fe({props:{small:!0,$$slots:{default:[wm]},$$scope:{ctx:o}}}),r=new ro({props:{label:"Load schemes from GeoJSON",onLoad:o[24]}}),f=new oo({props:{errorMessage:o[2]}}),c=new Ee({props:{$$slots:{default:[vm]},$$scope:{ctx:o}}}),c.$on("click",o[25]),g=new Fe({props:{small:!0,$$slots:{default:[Sm]},$$scope:{ctx:o}}}),{c(){C&&C.c(),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),a=S("hr"),u=L(),w(c.$$.fragment),$=L(),w(g.$$.fragment)},m(y,I){C&&C.m(y,I),d(y,l,I),v(t,y,I),d(y,n,I),v(r,y,I),d(y,s,I),v(f,y,I),d(y,i,I),d(y,a,I),d(y,u,I),v(c,y,I),d(y,$,I),v(g,y,I),b=!0},p(y,I){e&&C.p(y,I);const j={};I[0]&522403|I[1]&131072&&(j.$$scope={dirty:I,ctx:y}),t.$set(j);const P={};I[0]&4&&(P.errorMessage=y[2]),f.$set(P);const N={};I[1]&131072&&(N.$$scope={dirty:I,ctx:y}),c.$set(N);const O={};I[0]&1574408|I[1]&131072&&(O.$$scope={dirty:I,ctx:y}),g.$set(O)},i(y){b||(m(C),m(t.$$.fragment,y),m(r.$$.fragment,y),m(f.$$.fragment,y),m(c.$$.fragment,y),m(g.$$.fragment,y),b=!0)},o(y){_(C),_(t.$$.fragment,y),_(r.$$.fragment,y),_(f.$$.fragment,y),_(c.$$.fragment,y),_(g.$$.fragment,y),b=!1},d(y){y&&(h(l),h(n),h(s),h(i),h(a),h(u),h($)),C&&C.d(y),k(t,y),k(r,y),k(f,y),k(c,y),k(g,y)}}}function Cm(o){let e,l,t,n,r,s,f,i;return e=new ot({props:{label:"Schemes",open:!0,$$slots:{default:[Tm]},$$scope:{ctx:o}}}),t=new gn({props:{name:"atf",description:Ur,show:o[12],schemesGj:o[13],filterSchemeText:o[14],filterInterventionText:o[15],color:o[8]}}),r=new gn({props:{name:"lcwip",description:Yr,show:o[11],schemesGj:o[16],filterSchemeText:o[17],filterInterventionText:o[18],color:o[6]}}),f=new gn({props:{name:"local",description:Vr,show:o[9],schemesGj:o[10],filterSchemeText:o[19],filterInterventionText:o[20],color:o[4]}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),d(a,n,u),v(r,a,u),d(a,s,u),v(f,a,u),i=!0},p(a,u){const c={};u[0]&2096815|u[1]&131072&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $={};u[0]&4096&&($.show=a[12]),u[0]&8192&&($.schemesGj=a[13]),u[0]&16384&&($.filterSchemeText=a[14]),u[0]&32768&&($.filterInterventionText=a[15]),u[0]&256&&($.color=a[8]),t.$set($);const g={};u[0]&2048&&(g.show=a[11]),u[0]&65536&&(g.schemesGj=a[16]),u[0]&131072&&(g.filterSchemeText=a[17]),u[0]&262144&&(g.filterInterventionText=a[18]),u[0]&64&&(g.color=a[6]),r.$set(g);const b={};u[0]&512&&(b.show=a[9]),u[0]&1024&&(b.schemesGj=a[10]),u[0]&524288&&(b.filterSchemeText=a[19]),u[0]&1048576&&(b.filterInterventionText=a[20]),u[0]&16&&(b.color=a[4]),f.$set(b)},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(r.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&(h(l),h(n),h(s)),k(e,a),k(t,a),k(r,a),k(f,a)}}}let Br="atf_schemes",Ur="ATF schemes",Wr="lcwip_schemes",Yr="LCWIP schemes",Jr="local_schemes",Vr="Your schemes";function Lm(o,e,l){let t,n,r,s,f,i,a,u,c,$,g,b,C,y,I,j,P,N;Y(o,pn,W=>l(10,u=W)),Y(o,rn,W=>l(13,g=W)),Y(o,Bl,W=>l(14,b=W)),Y(o,El,W=>l(15,C=W)),Y(o,cn,W=>l(16,y=W)),Y(o,Wl,W=>l(17,I=W)),Y(o,Ul,W=>l(18,j=W)),Y(o,Jl,W=>l(19,P=W)),Y(o,Yl,W=>l(20,N=W));let O="",M=$e(Br);Y(o,M,W=>l(12,$=W));let R="fundingProgramme",D=$e(Wr);Y(o,D,W=>l(11,c=W));let z="interventionType",J=$e(Jr);Y(o,J,W=>l(9,a=W));function ae(W,xe){try{k$(JSON.parse(xe),rn,cn),pt(M,$=!0,$),pt(D,c=!0,c),l(2,O="")}catch(nn){l(2,O=`The file you loaded is broken: ${nn}`)}}function G(){pt(pn,u=S$(),u),pt(J,a=!0,a)}function K(W){return W=="interventionType"?[$m(),mm()]:W=="fundingProgramme"?[Ke(["get","funding_programme"],Vt,"grey"),Object.entries(Vt)]:W=="currentMilestone"?[Ke(["get","current_milestone"],vn,"grey"),Object.entries(vn)]:["red",[]]}function H(W){g=W,rn.set(g)}function ue(W){b=W,Bl.set(b)}function Ce(W){C=W,El.set(C)}function qe(W){R=W,l(0,R)}function Xe(W){$=W,M.set($)}function Ie(W){y=W,cn.set(y)}function rt(W){I=W,Wl.set(I)}function Yt(W){j=W,Ul.set(j)}function it(W){z=W,l(1,z)}function de(W){c=W,D.set(c)}function Me(W){u=W,pn.set(u)}function Ue(W){P=W,Jl.set(P)}function at(W){N=W,Yl.set(N)}function ft(W){a=W,J.set(a)}return o.$$.update=()=>{o.$$.dirty[0]&1&&l(8,[t,n]=K(R),t,(l(7,n),l(0,R))),o.$$.dirty[0]&2&&l(6,[r,s]=K(z),r,(l(5,s),l(1,z)))},l(4,[f,i]=K("interventionType"),f,l(3,i)),[R,z,O,i,f,s,r,n,t,a,u,c,$,g,b,C,y,I,j,P,N,M,D,J,ae,G,H,ue,Ce,qe,Xe,Ie,rt,Yt,it,de,Me,Ue,at,ft]}class Im extends X{constructor(e){super(),x(this,e,Lm,Cm,Q,{},null,[-1,-1])}}const Mr=Le(!0);let kn=Le(null);function Mm(o){let e,l,t,n,r,s,f,i;return e=new Qc({}),t=new op({}),r=new Lp({}),f=new gp({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),d(a,n,u),v(r,a,u),d(a,s,u),v(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(r.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&(h(l),h(n),h(s)),k(e,a),k(t,a),k(r,a),k(f,a)}}}function Om(o){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[Mm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function jm(o){let e,l,t,n,r,s,f,i,a,u,c,$,g,b;return e=new cf({}),t=new Hf({}),r=new vf({}),f=new jf({}),a=new Dc({}),c=new mc({}),g=new Ta({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment),u=L(),w(c.$$.fragment),$=L(),w(g.$$.fragment)},m(C,y){v(e,C,y),d(C,l,y),v(t,C,y),d(C,n,y),v(r,C,y),d(C,s,y),v(f,C,y),d(C,i,y),v(a,C,y),d(C,u,y),v(c,C,y),d(C,$,y),v(g,C,y),b=!0},i(C){b||(m(e.$$.fragment,C),m(t.$$.fragment,C),m(r.$$.fragment,C),m(f.$$.fragment,C),m(a.$$.fragment,C),m(c.$$.fragment,C),m(g.$$.fragment,C),b=!0)},o(C){_(e.$$.fragment,C),_(t.$$.fragment,C),_(r.$$.fragment,C),_(f.$$.fragment,C),_(a.$$.fragment,C),_(c.$$.fragment,C),_(g.$$.fragment,C),b=!1},d(C){C&&(h(l),h(n),h(s),h(i),h(u),h($)),k(e,C),k(t,C),k(r,C),k(f,C),k(a,C),k(c,C),k(g,C)}}}function Nm(o){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[jm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Pm(o){let e,l,t,n,r,s;return e=new Za({}),t=new Ju({}),r=new lc({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment)},m(f,i){v(e,f,i),d(f,l,i),v(t,f,i),d(f,n,i),v(r,f,i),s=!0},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(r.$$.fragment,f),s=!1},d(f){f&&(h(l),h(n)),k(e,f),k(t,f),k(r,f)}}}function Rm(o){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[Pm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Dm(o){let e,l,t,n,r,s,f,i,a,u;return e=new Yi({}),t=new Fa({}),r=new xs({}),f=new vi({}),a=new Di({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment)},m(c,$){v(e,c,$),d(c,l,$),v(t,c,$),d(c,n,$),v(r,c,$),d(c,s,$),v(f,c,$),d(c,i,$),v(a,c,$),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(r.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(r.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&(h(l),h(n),h(s),h(i)),k(e,c),k(t,c),k(r,c),k(f,c),k(a,c)}}}function Fm(o){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[Dm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Gm(o){let e,l,t,n;return e=new Es({}),t=new ui({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){v(e,r,s),d(r,l,s),v(t,r,s),n=!0},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&h(l),k(e,r),k(t,r)}}}function Am(o){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[Gm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function qm(o){let e,l,t,n,r,s,f,i;return e=new qu({}),t=new eu({}),r=new Mu({}),f=new $$({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),d(a,n,u),v(r,a,u),d(a,s,u),v(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(r.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&(h(l),h(n),h(s)),k(e,a),k(t,a),k(r,a),k(f,a)}}}function zm(o){let e,l,t,n,r,s,f,i,a=Pr()=="Private (development)",u,c,$,g,b;e=new l$({}),t=new Wp({}),r=new gu({}),f=new Sc({});let C=a&&qm();return c=new na({}),g=new pa({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),C&&C.c(),u=L(),w(c.$$.fragment),$=L(),w(g.$$.fragment)},m(y,I){v(e,y,I),d(y,l,I),v(t,y,I),d(y,n,I),v(r,y,I),d(y,s,I),v(f,y,I),d(y,i,I),C&&C.m(y,I),d(y,u,I),v(c,y,I),d(y,$,I),v(g,y,I),b=!0},p:Z,i(y){b||(m(e.$$.fragment,y),m(t.$$.fragment,y),m(r.$$.fragment,y),m(f.$$.fragment,y),m(C),m(c.$$.fragment,y),m(g.$$.fragment,y),b=!0)},o(y){_(e.$$.fragment,y),_(t.$$.fragment,y),_(r.$$.fragment,y),_(f.$$.fragment,y),_(C),_(c.$$.fragment,y),_(g.$$.fragment,y),b=!1},d(y){y&&(h(l),h(n),h(s),h(i),h(u),h($)),k(e,y),k(t,y),k(r,y),k(f,y),C&&C.d(y),k(c,y),k(g,y)}}}function Hm(o){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[zm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Em(o){let e,l,t,n,r;function s(i){o[6](i)}let f={cfg:o[5],map:o[3]};return o[0]!==void 0&&(f.enabled=o[0]),e=new $o({props:f}),E.push(()=>B(e,"enabled",s)),n=new Xo({}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,a){const u={};a&8&&(u.map=i[3]),!l&&a&1&&(l=!0,u.enabled=i[0],U(()=>l=!1)),e.$set(u)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}function Bm(o){let e,l;const t=[q("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:o[1]?"none":"visible"}}];let n={};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Ae({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&2?ne(t,[t[0],t[1],{layout:{visibility:r[1]?"none":"visible"}}]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Um(o){let e,l,t,n,r,s,f,i,a,u,c,$,g,b,C,y,I,j,P,N,O;return l=new Im({}),n=new ot({props:{label:"Trip generators",$$slots:{default:[Om]},$$scope:{ctx:o}}}),s=new ot({props:{label:"Existing infrastructure",$$slots:{default:[Nm]},$$scope:{ctx:o}}}),i=new ot({props:{label:"Public transport",$$slots:{default:[Rm]},$$scope:{ctx:o}}}),u=new ot({props:{label:"Boundaries",$$slots:{default:[Fm]},$$scope:{ctx:o}}}),$=new ot({props:{label:"Census",$$slots:{default:[Am]},$$scope:{ctx:o}}}),b=new ot({props:{label:"Other",$$slots:{default:[Hm]},$$scope:{ctx:o}}}),y=new ot({props:{label:"Tools",$$slots:{default:[Em]},$$scope:{ctx:o}}}),j=new po({props:{disabled:!o[1]}}),N=new Wt({props:{data:o[4],$$slots:{default:[Bm]},$$scope:{ctx:o}}}),{c(){e=S("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment),f=L(),w(i.$$.fragment),a=L(),w(u.$$.fragment),c=L(),w($.$$.fragment),g=L(),w(b.$$.fragment),C=L(),w(y.$$.fragment),I=L(),w(j.$$.fragment),P=L(),w(N.$$.fragment)},m(M,R){d(M,e,R),v(l,e,null),p(e,t),v(n,e,null),p(e,r),v(s,e,null),p(e,f),v(i,e,null),p(e,a),v(u,e,null),p(e,c),v($,e,null),p(e,g),v(b,e,null),p(e,C),v(y,e,null),p(e,I),v(j,e,null),o[7](e),d(M,P,R),v(N,M,R),O=!0},p(M,[R]){const D={};R&256&&(D.$$scope={dirty:R,ctx:M}),n.$set(D);const z={};R&256&&(z.$$scope={dirty:R,ctx:M}),s.$set(z);const J={};R&256&&(J.$$scope={dirty:R,ctx:M}),i.$set(J);const ae={};R&256&&(ae.$$scope={dirty:R,ctx:M}),u.$set(ae);const G={};R&256&&(G.$$scope={dirty:R,ctx:M}),$.$set(G);const K={};R&256&&(K.$$scope={dirty:R,ctx:M}),b.$set(K);const H={};R&265&&(H.$$scope={dirty:R,ctx:M}),y.$set(H);const ue={};R&2&&(ue.disabled=!M[1]),j.$set(ue);const Ce={};R&258&&(Ce.$$scope={dirty:R,ctx:M}),N.$set(Ce)},i(M){O||(m(l.$$.fragment,M),m(n.$$.fragment,M),m(s.$$.fragment,M),m(i.$$.fragment,M),m(u.$$.fragment,M),m($.$$.fragment,M),m(b.$$.fragment,M),m(y.$$.fragment,M),m(j.$$.fragment,M),m(N.$$.fragment,M),O=!0)},o(M){_(l.$$.fragment,M),_(n.$$.fragment,M),_(s.$$.fragment,M),_(i.$$.fragment,M),_(u.$$.fragment,M),_($.$$.fragment,M),_(b.$$.fragment,M),_(y.$$.fragment,M),_(j.$$.fragment,M),_(N.$$.fragment,M),O=!1},d(M){M&&(h(e),h(P)),k(l),k(n),k(s),k(i),k(u),k($),k(b),k(y),k(j),o[7](null),k(N,M)}}}function Wm(o,e,l){let t,n,r,s;Y(o,Mr,c=>l(1,n=c)),Y(o,kn,c=>l(2,r=c)),Y(o,un,c=>l(3,s=c));let f={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},i={getStreetViewRoadLayerNames:c=>io(c,Kr(dn))};function a(c){t=c,l(0,t),l(1,n)}function u(c){E[c?"unshift":"push"](()=>{r=c,kn.set(r)})}return o.$$.update=()=>{o.$$.dirty&2&&l(0,t=!n),o.$$.dirty&1&&Mr.set(!t)},[t,n,r,s,f,i,a,u]}class Ym extends X{constructor(e){super(),x(this,e,Wm,Um,Q,{})}}function Jm(o){let e,l,t;return{c(){e=S("p"),e.innerHTML="<b>Selected layers</b>",l=L(),t=S("div")},m(n,r){d(n,e,r),d(n,l,r),d(n,t,r),o[3](t)},p:Z,i:Z,o:Z,d(n){n&&(h(e),h(l),h(t)),o[3](null)}}}function Vm(o,e,l){if(o){o.innerHTML="";for(let t of e){let n=l.get(t);n&&(n.style.display="block",o.appendChild(n))}}}function Qm(o,e,l){let t,n;Y(o,wn,f=>l(1,t=f)),Y(o,Kt,f=>l(2,n=f));let r=null;function s(f){E[f?"unshift":"push"](()=>{r=f,l(0,r)})}return o.$$.update=()=>{o.$$.dirty&7&&Vm(r,n,t)},[r,t,n,s]}class Zm extends X{constructor(e){super(),x(this,e,Qm,Jm,Q,{})}}function Km(o){let e,l,t,n,r,s,f,i,a,u,c,$,g,b,C;return l=new To({}),n=new vo({}),f=new ko({}),$=new ls({props:{boundaryGeojson:o[3]}}),{c(){e=S("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),r=L(),s=S("div"),w(f.$$.fragment),i=L(),a=S("div"),u=S("h1"),u.textContent="Scheme Browser",c=L(),w($.$$.fragment),g=L(),b=S("div"),re(s,"border-bottom","1px solid #b1b4b6"),re(a,"display","flex"),re(a,"justify-content","space-between"),F(e,"slot","sidebar"),F(e,"class","govuk-prose")},m(y,I){d(y,e,I),v(l,e,null),p(e,t),v(n,e,null),p(e,r),p(e,s),v(f,s,null),p(e,i),p(e,a),p(a,u),p(a,c),v($,a,null),p(e,g),p(e,b),o[6](b),C=!0},p(y,I){const j={};I&8&&(j.boundaryGeojson=y[3]),$.$set(j)},i(y){C||(m(l.$$.fragment,y),m(n.$$.fragment,y),m(f.$$.fragment,y),m($.$$.fragment,y),C=!0)},o(y){_(l.$$.fragment,y),_(n.$$.fragment,y),_(f.$$.fragment,y),_($.$$.fragment,y),C=!1},d(y){y&&h(e),k(l),k(n),k(f),k($),o[6](null)}}}function Or(o){let e,l;return e=new Ym({}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Xm(o){let e,l,t,n;e=new mo({});let r=o[2]&&Or();return{c(){w(e.$$.fragment),l=L(),r&&r.c(),t=_e()},m(s,f){v(e,s,f),d(s,l,f),r&&r.m(s,f),d(s,t,f),n=!0},p(s,f){s[2]?r?f&4&&m(r,1):(r=Or(),r.c(),m(r,1),r.m(t.parentNode,t)):r&&(be(),_(r,1,1,()=>{r=null}),we())},i(s){n||(m(e.$$.fragment,s),m(r),n=!0)},o(s){_(e.$$.fragment,s),_(r),n=!1},d(s){s&&(h(l),h(t)),k(e,s),r&&r.d(s)}}}function xm(o){let e,l,t;return l=new yo({props:{style:o[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Xm]},$$scope:{ctx:o}}}),{c(){e=S("div"),w(l.$$.fragment),F(e,"slot","main")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p(n,r){const s={};r&2&&(s.style=n[1]),r&260&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function e_(o){let e,l,t,n,r;return e=new No({props:{$$slots:{main:[xm],sidebar:[Km]},$$scope:{ctx:o}}}),n=new Zm({}),{c(){w(e.$$.fragment),l=L(),t=S("div"),w(n.$$.fragment),F(t,"class","top-right govuk-prose svelte-u44ed2")},m(s,f){v(e,s,f),d(s,l,f),d(s,t,f),v(n,t,null),r=!0},p(s,[f]){const i={};f&271&&(i.$$scope={dirty:f,ctx:s}),e.$set(i)},i(s){r||(m(e.$$.fragment,s),m(n.$$.fragment,s),r=!0)},o(s){_(e.$$.fragment,s),_(n.$$.fragment,s),r=!1},d(s){s&&(h(l),h(t)),k(e,s),k(n)}}}function t_(o,e,l){let t,n,r,s,f;Y(o,kn,c=>l(4,t=c)),Y(o,un,c=>l(5,n=c)),Y(o,dn,c=>l(1,r=c)),Y(o,Wn,c=>l(2,s=c)),Y(o,rn,c=>l(3,f=c)),Nr(()=>{Xr()});const i=new URLSearchParams(window.location.search);dn.set(i.get("style")||"dataviz");let a;function u(c){E[c?"unshift":"push"](()=>{a=c,l(0,a),l(4,t)})}return o.$$.update=()=>{o.$$.dirty&32&&n&&Wn.set(n),o.$$.dirty&17&&a&&t&&(l(0,a.innerHTML="",a),a.appendChild(t))},[a,r,s,f,t,n,u]}class n_ extends X{constructor(e){super(),x(this,e,t_,e_,Q,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new n_({target:document.getElementById("app")});
