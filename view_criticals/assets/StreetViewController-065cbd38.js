import{S as C,i as L,s as E,G as P,e as h,h as m,j as k,k as b,K as O,L as H,M as R,t as g,l as v,p as w,f as V,X as U,w as G,aL as ke,P as we,a$ as Ce,F as Le,g as I,m as B,q as M,V as F,ad as X,aM as Ee,b0 as ne,W as $e,b1 as Ve,v as K,u as j,U as Y,b as W,c as x,o as ee,x as Q,Q as Ie,aH as ye,b2 as le,y as N,n as q,b3 as Be,r as Me,A,B as Z,ag as Pe,a as te,_ as T,C as Oe,a2 as He,a0 as Re,a8 as se,a7 as oe,a1 as ze,ac as De,ab as je,aa as ie,az as ae,aA as re,b4 as Ge,R as Ne,aV as qe}from"./layer_helper_utils-9fbf88af.js";function Te(s){let e,n,t;const l=s[3].default,o=P(l,s,s[2],null);return{c(){e=h("fieldset"),n=h("div"),o&&o.c(),m(n,"class",s[0]),m(n,"data-module","govuk-checkboxes"),m(e,"class","govuk-fieldset")},m(i,r){k(i,e,r),b(e,n),o&&o.m(n,null),t=!0},p(i,[r]){o&&o.p&&(!t||r&4)&&O(o,l,i,i[2],t?R(l,i[2],r,null):H(i[2]),null)},i(i){t||(g(o,i),t=!0)},o(i){v(o,i),t=!1},d(i){i&&w(e),o&&o.d(i)}}}function Fe(s,e,n){let{$$slots:t={},$$scope:l}=e,{small:o=!1}=e,i=o?"govuk-checkboxes--small":"govuk-checkboxes";return s.$$set=r=>{"small"in r&&n(1,o=r.small),"$$scope"in r&&n(2,l=r.$$scope)},[i,o,l,t]}class Ot extends C{constructor(e){super(),L(this,e,Fe,Te,E,{small:1})}}const We=s=>({}),ce=s=>({});function Ze(s){let e,n,t,l,o,i,r,a,u;const c=s[5].default,f=P(c,s,s[4],null),d=s[5].right,_=P(d,s,s[4],ce);return{c(){e=h("div"),n=h("input"),t=V(),l=h("label"),f&&f.c(),o=V(),i=h("span"),_&&_.c(),m(n,"type","checkbox"),m(n,"class","govuk-checkboxes__input"),m(n,"id",s[1]),m(l,"class","govuk-label govuk-checkboxes__label"),m(l,"for",s[1]),m(l,"title",s[2]),U(i,"float","right"),m(e,"class","govuk-checkboxes__item"),m(e,"style",s[3])},m(p,$){k(p,e,$),b(e,n),n.checked=s[0],b(e,t),b(e,l),f&&f.m(l,null),b(e,o),b(e,i),_&&_.m(i,null),r=!0,a||(u=[G(n,"change",s[7]),G(n,"change",s[6])],a=!0)},p(p,[$]){(!r||$&2)&&m(n,"id",p[1]),$&1&&(n.checked=p[0]),f&&f.p&&(!r||$&16)&&O(f,c,p,p[4],r?R(c,p[4],$,null):H(p[4]),null),(!r||$&2)&&m(l,"for",p[1]),(!r||$&4)&&m(l,"title",p[2]),_&&_.p&&(!r||$&16)&&O(_,d,p,p[4],r?R(d,p[4],$,We):H(p[4]),ce)},i(p){r||(g(f,p),g(_,p),r=!0)},o(p){v(f,p),v(_,p),r=!1},d(p){p&&w(e),f&&f.d(p),_&&_.d(p),a=!1,ke(u)}}}function Ae(s,e,n){let{$$slots:t={},$$scope:l}=e;const o=Ce(t);let{id:i}=e,{checked:r}=e,{hint:a=null}=e,c=o.right!==void 0?"float: none":"";function f(_){we.call(this,s,_)}function d(){r=this.checked,n(0,r)}return s.$$set=_=>{"id"in _&&n(1,i=_.id),"checked"in _&&n(0,r=_.checked),"hint"in _&&n(2,a=_.hint),"$$scope"in _&&n(4,l=_.$$scope)},[r,i,a,c,l,t,f,d]}class Ht extends C{constructor(e){super(),L(this,e,Ae,Ze,E,{id:1,checked:0,hint:2})}}function ue(s,e,n){const t=s.slice();return t[8]=e[n][0],t[9]=e[n][1],t}function fe(s){let e;return{c(){e=h("option"),e.__value="",K(e,e.__value)},m(n,t){k(n,e,t)},d(n){n&&w(e)}}}function de(s){let e,n=s[9]+"",t,l;return{c(){e=h("option"),t=j(n),e.__value=l=s[8],K(e,e.__value)},m(o,i){k(o,e,i),b(e,t)},p(o,i){i&8&&n!==(n=o[9]+"")&&Y(t,n),i&8&&l!==(l=o[8])&&(e.__value=l,K(e,e.__value))},d(o){o&&w(e)}}}function Je(s){let e,n,t,l,o=s[4]&&fe(),i=F(s[3]),r=[];for(let a=0;a<i.length;a+=1)r[a]=de(ue(s,i,a));return{c(){e=h("select"),o&&o.c(),n=X();for(let a=0;a<r.length;a+=1)r[a].c();m(e,"class","govuk-select"),m(e,"id",s[2]),e.disabled=s[5],s[0]===void 0&&Ee(()=>s[7].call(e))},m(a,u){k(a,e,u),o&&o.m(e,null),b(e,n);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(e,null);ne(e,s[0],!0),t||(l=[G(e,"change",s[7]),G(e,"change",s[6])],t=!0)},p(a,u){if(a[4]?o||(o=fe(),o.c(),o.m(e,n)):o&&(o.d(1),o=null),u&8){i=F(a[3]);let c;for(c=0;c<i.length;c+=1){const f=ue(a,i,c);r[c]?r[c].p(f,u):(r[c]=de(f),r[c].c(),r[c].m(e,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=i.length}u&4&&m(e,"id",a[2]),u&32&&(e.disabled=a[5]),u&9&&ne(e,a[0])},d(a){a&&w(e),o&&o.d(),$e(r,a),t=!1,ke(l)}}}function Ue(s){let e,n;return e=new Le({props:{label:s[1],id:s[2],$$slots:{default:[Je]},$$scope:{ctx:s}}}),{c(){I(e.$$.fragment)},m(t,l){B(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.label=t[1]),l&4&&(o.id=t[2]),l&4157&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Ke(s,e,n){let{label:t}=e,{id:l}=e,{choices:o}=e,{emptyOption:i=!1}=e,{disabled:r=!1}=e,{value:a}=e;function u(f){we.call(this,s,f)}function c(){a=Ve(this),n(0,a),n(3,o)}return s.$$set=f=>{"label"in f&&n(1,t=f.label),"id"in f&&n(2,l=f.id),"choices"in f&&n(3,o=f.choices),"emptyOption"in f&&n(4,i=f.emptyOption),"disabled"in f&&n(5,r=f.disabled),"value"in f&&n(0,a=f.value)},[a,t,l,o,i,r,u,c]}class Qe extends C{constructor(e){super(),L(this,e,Ke,Ue,E,{label:1,id:2,choices:3,emptyOption:4,disabled:5,value:0})}}function Xe(s){let e,n,t;function l(i){s[2](i)}let o={label:"Basemap",id:"basemap",choices:[["streets","Streets"],["hybrid","Satellite"],["dataviz","Dataviz"]]};return s[0]!==void 0&&(o.value=s[0]),e=new Qe({props:o}),W.push(()=>x(e,"value",l)),e.$on("change",s[1]),{c(){I(e.$$.fragment)},m(i,r){B(e,i,r),t=!0},p(i,[r]){const a={};!n&&r&1&&(n=!0,a.value=i[0],ee(()=>n=!1)),e.$set(a)},i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){M(e,i)}}}function Ye(s,e,n){let{style:t}=e;function l(){let i=new URLSearchParams(window.location.search);i.set("style",t);let r=`${window.location.pathname}?${i.toString()}${window.location.hash}`;window.location.href=r}function o(i){t=i,n(0,t)}return s.$$set=i=>{"style"in i&&n(0,t=i.style)},[t,l,o]}class Rt extends C{constructor(e){super(),L(this,e,Ye,Xe,E,{style:0})}}function xe(s){let e,n,t,l,o,i,r;const a=s[3].default,u=P(a,s,s[2],null);return{c(){e=h("details"),n=h("summary"),t=h("span"),l=j(s[0]),o=V(),i=h("div"),u&&u.c(),m(t,"class","govuk-details__summary-text"),m(n,"class","govuk-details__summary"),m(i,"class","govuk-details__text"),e.open=s[1],m(e,"class","govuk-details"),m(e,"data-module","govuk-details")},m(c,f){k(c,e,f),b(e,n),b(n,t),b(t,l),b(e,o),b(e,i),u&&u.m(i,null),r=!0},p(c,[f]){(!r||f&1)&&Y(l,c[0]),u&&u.p&&(!r||f&4)&&O(u,a,c,c[2],r?R(a,c[2],f,null):H(c[2]),null),(!r||f&2)&&(e.open=c[1])},i(c){r||(g(u,c),r=!0)},o(c){v(u,c),r=!1},d(c){c&&w(e),u&&u.d(c)}}}function et(s,e,n){let{$$slots:t={},$$scope:l}=e,{label:o}=e,{open:i=!1}=e;return s.$$set=r=>{"label"in r&&n(0,o=r.label),"open"in r&&n(1,i=r.open),"$$scope"in r&&n(2,l=r.$$scope)},[o,i,l,t]}class Se extends C{constructor(e){super(),L(this,e,et,xe,E,{label:0,open:1})}}function tt(s){let e;return{c(){e=h("span"),m(e,"class","svelte-kzgqtg"),U(e,"background",s[0])},m(n,t){k(n,e,t)},p(n,[t]){t&1&&U(e,"background",n[0])},i:Q,o:Q,d(n){n&&w(e)}}}function nt(s,e,n){let{color:t}=e;return s.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class lt extends C{constructor(e){super(),L(this,e,nt,tt,E,{color:0})}}const st="/atip/view_criticals/assets/help-d011708a.svg";function ot(s){let e,n;const t=s[1].default,l=P(t,s,s[4],null);return{c(){e=h("div"),l&&l.c(),m(e,"class","govuk-prose")},m(o,i){k(o,e,i),l&&l.m(e,null),n=!0},p(o,i){l&&l.p&&(!n||i&16)&&O(l,t,o,o[4],n?R(t,o[4],i,null):H(o[4]),null)},i(o){n||(g(l,o),n=!0)},o(o){v(l,o),n=!1},d(o){o&&w(e),l&&l.d(o)}}}function it(s){let e,n,t,l,o,i,r,a,u;function c(d){s[3](d)}let f={title:"Help",$$slots:{default:[ot]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.open=s[0]),o=new Ie({props:f}),W.push(()=>x(o,"open",c)),{c(){e=h("button"),n=h("img"),l=V(),I(o.$$.fragment),ye(n.src,t=st)||m(n,"src",t),m(n,"title","Help"),m(n,"alt","Help"),m(e,"class","svelte-7d9d1l")},m(d,_){k(d,e,_),b(e,n),k(d,l,_),B(o,d,_),r=!0,a||(u=G(e,"click",s[2]),a=!0)},p(d,[_]){const p={};_&16&&(p.$$scope={dirty:_,ctx:d}),!i&&_&1&&(i=!0,p.open=d[0],ee(()=>i=!1)),o.$set(p)},i(d){r||(g(o.$$.fragment,d),r=!0)},o(d){v(o.$$.fragment,d),r=!1},d(d){d&&(w(e),w(l)),M(o,d),a=!1,u()}}}function at(s,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const i=()=>n(0,o=!0);function r(a){o=a,n(0,o)}return s.$$set=a=>{"$$scope"in a&&n(4,l=a.$$scope)},[o,t,i,r,l]}class zt extends C{constructor(e){super(),L(this,e,at,it,E,{})}}const rt=s=>({}),_e=s=>({}),ct=s=>({}),me=s=>({});function ut(s){let e,n,t,l,o,i,r,a,u,c,f;const d=s[3].sidebar,_=P(d,s,s[2],me),p=s[3].main,$=P(p,s,s[2],_e);return{c(){e=h("div"),n=h("aside"),t=h("div"),_&&_.c(),l=V(),o=h("button"),o.textContent="â†’",r=V(),a=h("main"),$&&$.c(),m(t,"class","sidebar-content content-container svelte-ect12w"),m(o,"type","button"),m(o,"class","sidebar-toggle rounded-rect svelte-ect12w"),m(n,"class",i=le(s[0]?"":"collapsed")+" svelte-ect12w"),m(a,"class","svelte-ect12w"),m(e,"class","overall-layout svelte-ect12w")},m(y,z){k(y,e,z),b(e,n),b(n,t),_&&_.m(t,null),b(n,l),b(n,o),b(e,r),b(e,a),$&&$.m(a,null),u=!0,c||(f=G(o,"click",s[1]),c=!0)},p(y,[z]){_&&_.p&&(!u||z&4)&&O(_,d,y,y[2],u?R(d,y[2],z,ct):H(y[2]),me),(!u||z&1&&i!==(i=le(y[0]?"":"collapsed")+" svelte-ect12w"))&&m(n,"class",i),$&&$.p&&(!u||z&4)&&O($,p,y,y[2],u?R(p,y[2],z,rt):H(y[2]),_e)},i(y){u||(g(_,y),g($,y),u=!0)},o(y){v(_,y),v($,y),u=!1},d(y){y&&w(e),_&&_.d(y),$&&$.d(y),c=!1,f()}}}function ft(s,e,n){let{$$slots:t={},$$scope:l}=e,o=!0;function i(){n(0,o=!o)}return s.$$set=r=>{"$$scope"in r&&n(2,l=r.$$scope)},[o,i,l,t]}class Dt extends C{constructor(e){super(),L(this,e,ft,ut,E,{})}}function pe(s,e,n){const t=s.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function ge(s){let e,n,t,l=s[1]+"",o,i,r;return n=new lt({props:{color:s[2]}}),{c(){e=h("li"),I(n.$$.fragment),t=V(),o=j(l),i=V()},m(a,u){k(a,e,u),B(n,e,null),b(e,t),b(e,o),b(e,i),r=!0},p(a,u){const c={};u&1&&(c.color=a[2]),n.$set(c),(!r||u&1)&&l!==(l=a[1]+"")&&Y(o,l)},i(a){r||(g(n.$$.fragment,a),r=!0)},o(a){v(n.$$.fragment,a),r=!1},d(a){a&&w(e),M(n)}}}function dt(s){let e,n,t=F(s[0]),l=[];for(let i=0;i<t.length;i+=1)l[i]=ge(pe(s,t,i));const o=i=>v(l[i],1,1,()=>{l[i]=null});return{c(){e=h("ul");for(let i=0;i<l.length;i+=1)l[i].c()},m(i,r){k(i,e,r);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null);n=!0},p(i,r){if(r&1){t=F(i[0]);let a;for(a=0;a<t.length;a+=1){const u=pe(i,t,a);l[a]?(l[a].p(u,r),g(l[a],1)):(l[a]=ge(u),l[a].c(),g(l[a],1),l[a].m(e,null))}for(N(),a=t.length;a<l.length;a+=1)o(a);q()}},i(i){if(!n){for(let r=0;r<t.length;r+=1)g(l[r]);n=!0}},o(i){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)v(l[r]);n=!1},d(i){i&&w(e),$e(l,i)}}}function _t(s){let e,n;return e=new Se({props:{label:"Legend",$$slots:{default:[dt]},$$scope:{ctx:s}}}),{c(){I(e.$$.fragment)},m(t,l){B(e,t,l),n=!0},p(t,[l]){const o={};l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function mt(s,e,n){let{rows:t}=e;return s.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class jt extends C{constructor(e){super(),L(this,e,mt,_t,E,{rows:0})}}function he(s){let e;const n=s[5].default,t=P(n,s,s[4],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16)&&O(t,n,l,l[4],e?R(n,l[4],o,null):H(l[4]),null)},i(l){e||(g(t,l),e=!0)},o(l){v(t,l),e=!1},d(l){t&&t.d(l)}}}function pt(s){let e,n,t=s[1]&&he(s);return{c(){e=h("div"),t&&t.c(),m(e,"class","map svelte-12dpf1u")},m(l,o){k(l,e,o),t&&t.m(e,null),s[6](e),n=!0},p(l,[o]){l[1]?t?(t.p(l,o),o&2&&g(t,1)):(t=he(l),t.c(),g(t,1),t.m(e,null)):t&&(N(),v(t,1,1,()=>{t=null}),q())},i(l){n||(g(t),n=!0)},o(l){v(t),n=!1},d(l){l&&w(e),t&&t.d(),s[6](null)}}}function gt(s,e,n){let{$$slots:t={},$$scope:l}=e,{style:o}=e,{startBounds:i=null}=e,r,a,u=!1,c=!window.location.hash;Be("setCamera",c),Me(()=>{r=new A.Map({container:a,style:`https://api.maptiler.com/maps/${o}/style.json?key=MZEJTanw3WpxRvt7qDfo`,hash:!0}),r.addControl(new A.ScaleControl({})),r.addControl(new A.NavigationControl({visualizePitch:!0}),"bottom-right"),r.on("load",()=>{n(1,u=!0),c&&i&&r.fitBounds(i,{animate:!1}),Z.set(r)}),new ResizeObserver(()=>{r.resize()}).observe(a)}),Pe(()=>{r.remove()});function f(d){W[d?"unshift":"push"](()=>{a=d,n(0,a)})}return s.$$set=d=>{"style"in d&&n(2,o=d.style),"startBounds"in d&&n(3,i=d.startBounds),"$$scope"in d&&n(4,l=d.$$scope)},[a,u,o,i,l,t,f]}class Gt extends C{constructor(e){super(),L(this,e,gt,pt,E,{style:2,startBounds:3})}}const ht="/atip/view_criticals/assets/zoom_out_map-b2e1091a.svg";function bt(s){let e,n;return{c(){e=h("img"),ye(e.src,n=ht)||m(e,"src",n),m(e,"alt","Zoom to show entire boundary")},m(t,l){k(t,e,l)},p:Q,d(t){t&&w(e)}}}function vt(s){let e,n;return e=new te({props:{title:"Zoom to show entire boundary",$$slots:{default:[bt]},$$scope:{ctx:s}}}),e.$on("click",s[0]),{c(){I(e.$$.fragment)},m(t,l){B(e,t,l),n=!0},p(t,[l]){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function kt(s,e,n){let t;T(s,Z,i=>n(2,t=i));let{boundaryGeojson:l}=e;function o(){t.fitBounds(Oe(l),{padding:20,animate:!0,duration:500})}return s.$$set=i=>{"boundaryGeojson"in i&&n(1,l=i.boundaryGeojson)},[o,l]}class Nt extends C{constructor(e){super(),L(this,e,kt,vt,E,{boundaryGeojson:1})}}const S={area:"#D94324",route:"#555F5E",crossing:"#4daf4a",other:"#984ea3",preapp:"#e41a1c",outline:"#377eb8","reserved matters":"#4daf4a","local plan":"#984ea3",hovering:"black",lineEndpointColor:"black",streetview:"blue"},wt=10,J=10;let D="interventions";function $t(s,e,n){let t,l;T(s,Z,a=>n(1,t=a)),T(s,He,a=>n(2,l=a));let{colorInterventions:o}=e;Re(t,D,l);const i=["!=","hide_while_editing",!0];return se(t,{id:"interventions-points",source:D,filter:["all",De,i,["!=","endpoint",!0]],color:o,radius:wt}),oe(t,{id:"interventions-lines",source:D,filter:["all",je,i],color:o,width:J}),se(t,{id:"interventions-lines-endpoints",source:D,filter:["==","endpoint",!0],radius:.5*J,opacity:0,strokeColor:S.lineEndpointColor,strokeWidth:2}),ze(t,{id:"interventions-polygons",source:D,filter:["all",ie,i],color:o,opacity:.2}),oe(t,{id:"interventions-polygon-outlines",source:D,filter:["all",ie,i],color:o,opacity:.5,width:.7*J}),s.$$set=a=>{"colorInterventions"in a&&n(0,o=a.colorInterventions)},s.$$.update=()=>{if(s.$$.dirty&6){let a=JSON.parse(JSON.stringify(l)),u=[];for(let c of a.features)if(c.geometry.type=="LineString"&&!c.properties.hide_while_editing)for(let f of[c.geometry.coordinates[0],c.geometry.coordinates[c.geometry.coordinates.length-1]])u.push({type:"Feature",properties:{endpoint:!0},geometry:{type:"Point",coordinates:f}});a.features=a.features.concat(u),t.getSource(D).setData(a)}},[o,t,l]}class qt extends C{constructor(e){super(),L(this,e,$t,null,E,{colorInterventions:0})}}function Tt(s){return{v1:"Scheme Design",v2:"Experimental Scheme Design",planning:"Development Planning",criticals:"Critical Issues",atf4:"ATF4 Scheme"}[s]}function Ft(s){return{v1:"an intervention",v2:"an intervention",planning:"a development",criticals:"a critical issue",atf4:"an intervention"}[s]}function Wt(s){return{v1:"interventions",v2:"interventions",planning:"developments",criticals:"critical issues",atf4:"interventions"}[s]}function Zt(s){return s=="planning"?ae(["get","reference_type",["get","planning"]],{preapp:S.preapp,outline:S.outline,"reserved matters":S["reserved matters"],"local plan":S["local plan"]},"black"):ae(["get","intervention_type"],{area:S.area,route:S.route,crossing:S.crossing,other:S.other},"white")}function At(s){return s=="planning"?[["Preapp",S.preapp],["Outline",S.outline],["Reserved matters",S["reserved matters"]],["Local plan",S["local plan"]]]:[["Areas",S.area],["Routes",S.route],["Crossings",S.crossing],["Other",S.other]]}const yt="/atip/view_criticals/assets/camera_cursor-824d29b6.svg";function be(s){let e,n,t,l;const o=[Ct,St],i=[];function r(a,u){return a[0]?0:1}return e=r(s),n=i[e]=o[e](s),{c(){n.c(),t=X()},m(a,u){i[e].m(a,u),k(a,t,u),l=!0},p(a,u){let c=e;e=r(a),e===c?i[e].p(a,u):(N(),v(i[c],1,1,()=>{i[c]=null}),q(),n=i[e],n?n.p(a,u):(n=i[e]=o[e](a),n.c()),g(n,1),n.m(t.parentNode,t))},i(a){l||(g(n),l=!0)},o(a){v(n),l=!1},d(a){a&&w(t),i[e].d(a)}}}function St(s){let e,n;return e=new te({props:{$$slots:{default:[Lt]},$$scope:{ctx:s}}}),e.$on("click",s[3]),{c(){I(e.$$.fragment)},m(t,l){B(e,t,l),n=!0},p(t,l){const o={};l&512&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Ct(s){let e,n;return e=new te({props:{$$slots:{default:[Et]},$$scope:{ctx:s}}}),e.$on("click",s[2]),{c(){I(e.$$.fragment)},m(t,l){B(e,t,l),n=!0},p(t,l){const o={};l&512&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Lt(s){let e;return{c(){e=j("Disable Street View")},m(n,t){k(n,e,t)},d(n){n&&w(e)}}}function Et(s){let e;return{c(){e=j("Enable Street View")},m(n,t){k(n,e,t)},d(n){n&&w(e)}}}function ve(s){let e,n,t,l,o;function i(a){s[6](a)}let r={legend:"Source",id:"streetViewImagery",choices:[["google","Google Street View"],["bing","Bing Streetside"]]};return s[4].streetViewImagery!==void 0&&(r.value=s[4].streetViewImagery),e=new Ne({props:r}),W.push(()=>x(e,"value",i)),l=new Se({props:{label:"Help",$$slots:{default:[It]},$$scope:{ctx:s}}}),{c(){I(e.$$.fragment),t=V(),I(l.$$.fragment)},m(a,u){B(e,a,u),k(a,t,u),B(l,a,u),o=!0},p(a,u){const c={};!n&&u&16&&(n=!0,c.value=a[4].streetViewImagery,ee(()=>n=!1)),e.$set(c);const f={};u&512&&(f.$$scope={dirty:u,ctx:a}),l.$set(f)},i(a){o||(g(e.$$.fragment,a),g(l.$$.fragment,a),o=!0)},o(a){v(e.$$.fragment,a),v(l.$$.fragment,a),o=!1},d(a){a&&w(t),M(e,a),M(l,a)}}}function Vt(s){let e;return{c(){e=j("Luc Chaissac")},m(n,t){k(n,e,t)},d(n){n&&w(e)}}}function It(s){let e,n,t,l,o,i,r,a,u;return a=new qe({props:{href:"https://icon-icons.com/icon/screenshot-cursor-camera/100181",$$slots:{default:[Vt]},$$scope:{ctx:s}}}),{c(){e=h("ul"),n=h("li"),n.innerHTML=`<b>Click</b>
        on the map to open a new tab with a 3rd-party imagery provider`,t=V(),l=h("li"),l.innerHTML=`Press <b>Escape</b>
        to exit this mode`,o=V(),i=h("li"),r=j("Cursor by "),I(a.$$.fragment)},m(c,f){k(c,e,f),b(e,n),b(e,t),b(e,l),b(e,o),b(e,i),b(i,r),B(a,i,null),u=!0},p(c,f){const d={};f&512&&(d.$$scope={dirty:f,ctx:c}),a.$set(d)},i(c){u||(g(a.$$.fragment,c),u=!0)},o(c){v(a.$$.fragment,c),u=!1},d(c){c&&w(e),M(a)}}}function Bt(s){let e,n,t,l=s[1]&&be(s),o=!s[0]&&ve(s);return{c(){l&&l.c(),e=V(),o&&o.c(),n=X()},m(i,r){l&&l.m(i,r),k(i,e,r),o&&o.m(i,r),k(i,n,r),t=!0},p(i,[r]){i[1]?l?(l.p(i,r),r&2&&g(l,1)):(l=be(i),l.c(),g(l,1),l.m(e.parentNode,e)):l&&(N(),v(l,1,1,()=>{l=null}),q()),i[0]?o&&(N(),v(o,1,1,()=>{o=null}),q()):o?(o.p(i,r),r&1&&g(o,1)):(o=ve(i),o.c(),g(o,1),o.m(n.parentNode,n))},i(i){t||(g(l),g(o),t=!0)},o(i){v(l),v(o),t=!1},d(i){i&&(w(e),w(n)),l&&l.d(i),o&&o.d(i)}}}function Mt(s,e,n){let t,l;T(s,Z,d=>n(7,t=d)),T(s,re,d=>n(4,l=d));let{displayEnableButton:o}=e,{isInactive:i}=e,r=Ge();function a(d){if(i)return;let _=d.lngLat.lng,p=d.lngLat.lat;l.streetViewImagery=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${p},${_}&cbp=11,0,0,0,0`,"_blank"):l.streetViewImagery=="bing"&&window.open(`https://www.bing.com/maps?cp=${p}~${_}&style=x`,"_blank")}function u(){n(0,i=!1),t.on("click",a),t.getCanvas().style.cursor=`url(${yt}), auto`;for(let d of r)d.setProperty(t,"line-color",S.streetview)}function c(){n(0,i=!0),t.off("click",a),t.getCanvas().style.cursor="inherit";for(let d of r)d.returnToDefaultPaintValues(t)}function f(d){s.$$.not_equal(l.streetViewImagery,d)&&(l.streetViewImagery=d,re.set(l))}return s.$$set=d=>{"displayEnableButton"in d&&n(1,o=d.displayEnableButton),"isInactive"in d&&n(0,i=d.isInactive)},[i,o,u,c,l,a,f]}class Jt extends C{constructor(e){super(),L(this,e,Mt,Bt,E,{displayEnableButton:1,isInactive:0,handleMapClickEvent:5,enableStreetView:2,disableStreetView:3})}get handleMapClickEvent(){return this.$$.ctx[5]}get enableStreetView(){return this.$$.ctx[2]}get disableStreetView(){return this.$$.ctx[3]}}export{Rt as B,Se as C,zt as H,qt as I,Dt as L,Gt as M,Jt as S,Nt as Z,wt as a,Ot as b,S as c,Ht as d,Qe as e,Wt as f,Tt as g,Zt as h,jt as i,At as j,lt as k,J as l,Ft as s};
